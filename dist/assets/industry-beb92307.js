import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-fec67aeb.js";import{_ as t}from"./VFlex.vue_vue_type_style_index_0_lang-f98d46ef.js";import{e as s,r as a,Z as l,o as i,y as o,z as n,C as r,A as u,B as d,S as c,T as p,l as m,j as v,H as _,Q as y,R as f,aR as g,P as b,J as h,K as w,I as x,D as j,E as k,v as A}from"./index-b44bd223.js";import{_ as S}from"./VInput.vue_vue_type_script_setup_true_lang-eda0c24e.js";import{_ as V}from"./VLabel.vue_vue_type_script_setup_true_lang-4ec9f876.js";import{_ as C}from"./VIconButton-e1955b15.js";import{_ as I}from"./VFilePond.vue_vue_type_script_lang-03703203.js";import{_ as L}from"./VField.vue_vue_type_script_setup_true_lang-d4db08fc.js";import{_ as O,c as E}from"./VFlexTable.vue_vue_type_style_index_0_lang-ed6d47f2.js";import{_ as D}from"./VDropdown.vue_vue_type_style_index_0_lang-dcb88bb8.js";import{_ as N}from"./VAvatar.vue_vue_type_style_index_0_lang-d2121b65.js";import{_ as R}from"./VControl-5537d177.js";import{u as z}from"./useAPI-a0c8585b.js";import{u as F}from"./useNotyf-ce2a3225.js";import{u as W}from"./viewWrapper-f29ee975.js";import"./useVFieldContext-2b7edd2e.js";import"./VIcon.vue_vue_type_script_setup_true_lang-55175548.js";import"./useDropdown-8fed5617.js";import"./userSession-79c4aa14.js";import"./notyf-a2d876ab.js";import"./useThemeColors-e62d188e.js";const P={class:"columns"},T={class:"column is-6"},B={class:"list-flex-toolbar is-reversed"},H={class:"buttons"},K={class:"item-name dark-inverted"},$=["onClick"],q=r("div",{class:"icon"},[r("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),Q={class:"meta"},U=r("span",null,"Edit Industry Details",-1),Y=["onClick"],G=[r("div",{class:"icon"},[r("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),r("div",{class:"meta"},[r("span",null,"Remove"),r("span",null,"Remove from list")],-1)],J={class:"column is-6"},X={class:"is-raised s-card",style:{"border-radius":"20px"}},Z={class:"mt-4 pl-5"},M={class:"title is-5 is-narrow toc-ignore is-flex is-justify-content-start"},ee={class:"mt-5 mb-4 is-flex is-align-items-center is-justify-content-center"},te=["onSubmit"],se=r("label",null,"Industry Logo *",-1),ae={class:"control is-flex is-justify-content-center"},le=["src"],ie={class:"mt-5"},oe=s({__name:"Industries",emits:["update:modalHandler","update:OnSuccess"],setup(s,{emit:A}){const W=a({id:"",name:"",industryLogo:""}),oe=a(""),ne=F(),re=z();a("");const ue=a(!1),de=a(0),ce=a(!1),pe=a(!1),me=a(!1),ve=a(!1),_e=a({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ye=[],fe={industryLogo:{label:"Industry",grow:!0,media:!0},actions:{label:"Actions",align:"end"}},ge=l((()=>{if(oe.value){const e=new RegExp(oe.value,"i");return ye.filter((t=>t.name.match(e)))}return ye})),be=async()=>{try{const e=await re.get("/v3/api/industry/",{});ye.length=0,ye.push(...e.data),oe.value="ss",oe.value=""}catch(e){console.error("ok",e)}},he=async()=>{try{_e.value.isSweetAlertOpen=!1;await re.delete(`/v3/api/industry/${de.value}/`,{});be(),ne.success("Delete Worker, Worker")}catch(e){console.error("ok",e)}ve.value=!1},we=async()=>{try{ue.value=!0;const e=new window.FormData;console.log(W.value,"formData value");for(const t in W.value)"industryLogo"===t&&null===W.value.industryLogo||e.append(t,W.value[t]);if(ve.value){await re.put(`/v3/api/industry/${W.value.id}/`,e);xe(),ne.dismissAll(),ue.value=!1,ne.success("worker updated, worker"),A("update:OnSuccess",null),be(),ve.value=!1}else{await re.post("/v3/api/industry/",e);xe(),ne.dismissAll(),ne.success("New worker added, New Worker"),ue.value=!1,A("update:OnSuccess",null),be()}}catch(e){let t=e.response.data??{};Object.values(t).forEach((e=>{e.forEach((e=>{console.log(e),ne.error(` ${e}, New Worker`)}))}))}},xe=()=>{A("update:modalHandler",!1),console.log("modal closed"),W.value={id:"",name:"",industryLogo:""}},je=(e,t)=>{const s=t.file;s&&(W.value={...W.value,industryLogo:s})},ke=(e,t)=>{W.value={...W.value,industryLogo:null}};return i((()=>{be()})),(s,a)=>{const l=R,i=N,A=E,z=D,F=O,ne=L,re=I,ye=C,be=V,xe=S,Ae=k,Se=t,Ve=e;return o(),n(y,null,[r("div",P,[r("div",T,[r("div",B,[r("div",H,[u(l,{icon:"feather:search"},{default:d((()=>[c(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>v(oe)?oe.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[p,m(oe)]])])),_:1})])]),m(ge).length?(o(),_(F,{key:0,data:m(ge),columns:fe,rounded:""},{body:d((()=>[u(g,{name:"list",tag:"div",class:"flex-list-inner"},{default:d((()=>[(o(!0),n(y,null,f(m(ge),(e=>(o(),n("div",{key:e.id,class:"flex-table-item"},[u(A,{column:{media:!0,grow:!0}},{default:d((()=>[u(i,{picture:e.industryLogo},null,8,["picture"]),r("div",null,[r("span",K,h(e.name),1)])])),_:2},1024),u(A,{column:{align:"end"}},{default:d((()=>[u(z,{class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:d((()=>[r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>(e=>{pe.value=!0,W.value={...e},ve.value=!0})(e)},[q,r("div",Q,[r("span",null,h((m(ve),"Edit")),1),U])],8,$),r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return s=e.id,de.value=s,void(_e.value={title:"Are you sure?",subtitle:"You will not be able to recover this Industry!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var s}},G,8,Y)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):b("",!0)]),r("div",J,[r("div",X,[r("div",Z,[r("h2",M,h(m(ve)?"Edit Industry":"Add Industry"),1)]),r("div",ee,[r("form",{onSubmit:w(we,["prevent"]),style:{width:"400px"}},[u(ne,null,{default:d((()=>[se])),_:1}),r("div",ae,[u(i,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:d((()=>[m(pe)?(o(),n("img",{key:0,class:"avatar",src:null==m(W).industryLogo?"/images/avatars/placeholder.jpg":m(W).industryLogo,alt:""},null,8,le)):b("",!0),m(pe)?b("",!0):(o(),_(re,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='fas fa-cloud-upload-alt' style='font-size:27px'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onAddfile:je,onRemovefile:ke})),r("span",null,[m(pe)?(o(),_(ye,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:a[1]||(a[1]=x(w((e=>ce.value=!0),["prevent"]),["space"])),onClick:a[2]||(a[2]=e=>{ce.value=!0,pe.value=!1,me.value=!0})})):b("",!0),m(me)?(o(),_(ye,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:a[3]||(a[3]=x(w((e=>ce.value=!1),["prevent"]),["space"])),onClick:a[4]||(a[4]=e=>{ce.value=!1,pe.value=!0,me.value=!1})})):b("",!0)])])),_:1})]),u(ne,null,{default:d((()=>[u(be,null,{default:d((()=>[j("Name *")])),_:1}),u(l,null,{default:d((()=>[u(xe,{required:"",type:"text",placeholder:"Enter Industry Name..",modelValue:m(W).name,"onUpdate:modelValue":a[5]||(a[5]=e=>m(W).name=e),onChange:a[6]||(a[6]=e=>{return t=e,console.log(t.target.name),void(W.value={...W.value,[t.target.name]:t.target.value});var t})},null,8,["modelValue"])])),_:1})])),_:1}),u(Se,{"justify-content":"end"},{default:d((()=>[r("div",ie,[u(Ae,{color:"primary",icon:m(ve)?"fas fa-edit":"fas fa-plus",elevated:"",type:"submit",loading:m(ue)},{default:d((()=>[j(h(m(ve)?"Edit":"Add"),1)])),_:1},8,["icon","loading"])])])),_:1})],40,te)])])])]),m(_e).isSweetAlertOpen?(o(),_(Ve,{key:0,isSweetAlertOpen:m(_e).isSweetAlertOpen,title:m(_e).title,subtitle:m(_e).subtitle,btntext:m(_e).btntext,onConfirm:he,onCancel:()=>m(_e).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0)],64)}}}),ne={class:"page-content-inner"},re=s({__name:"industry",setup:e=>(W().setPageTitle("Industries"),A({title:"Industry - Arez"}),(e,t)=>{const s=oe;return o(),n("div",ne,[u(s)])})});export{re as default};
