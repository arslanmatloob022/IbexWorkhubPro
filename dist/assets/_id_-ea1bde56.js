import{_ as e}from"./AddUpdateUser-2b65890d.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-d4c1a0a6.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-5ddbc423.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-44706e4c.js";import{_ as t}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-063a697a.js";import{e as i,r as n,Z as r,o,B as u,C as p,l as c,N as d,D as _,E as m,F as v,K as g,j as y,X as f,U as h,J as j,H as k,V as b,W as x,aR as w,M as V,P,x as A,z as I}from"./index-6822cb6c.js";import{_ as S}from"./VField.vue_vue_type_script_setup_true_lang-631d5387.js";import{_ as T}from"./VControl-82cc88a1.js";import{_ as C}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-7a8a8147.js";import{_ as M,a as L}from"./search-1-dark-61831a90.js";import{u as W}from"./useAPI-8ffd32d3.js";import{u as F}from"./useNotyf-58075e13.js";import{i as N}from"./index-f52ed8ce.js";import{u as E}from"./personalScoreGauge-9ed87eeb.js";import{u as U}from"./viewWrapper-1be7af83.js";import"./VModal.vue_vue_type_style_index_0_lang-5f85507f.js";import"./VRadio.vue_vue_type_style_index_0_lang-ce6a14d3.js";import"./VLabel.vue_vue_type_script_setup_true_lang-c267a264.js";import"./useVFieldContext-8c3287cc.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-072f5ed6.js";import"./VIcon.vue_vue_type_script_setup_true_lang-60b95533.js";import"./VFilePond.vue_vue_type_script_lang-8e5d5aa1.js";import"./VInput.vue_vue_type_script_setup_true_lang-81ee3232.js";import"./useSupportElement-04dac3f0.js";import"./userSession-04f4c15c.js";import"./VFlex.vue_vue_type_style_index_0_lang-b1e9a525.js";import"./VPlaceloadWrap-317d44e1.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-190bea09.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-680f6262.js";import"./notyf-5c084f1f.js";import"./useThemeColors-9a3bb308.js";import"./billboard-5857d5e1.js";const R={key:1},H={class:"list-view-toolbar"},O={class:"list-info"},z={key:0},q={key:1},B={class:"buttons"},K={class:"page-content-inner"},D={class:"list-view list-view-v1"},J=_("img",{class:"light-image",src:M,alt:""},null,-1),X=_("img",{class:"dark-image",src:L,alt:""},null,-1),Y={class:"list-view-inner"},Z={class:"list-view-item-inner"},$={class:"meta-left"},G=_("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),Q={class:"meta-right"},ee={class:"tags"},se={class:"stats"},ae={class:"stat"},le=_("span",null,"Status",-1),te=_("div",{class:"separator"},null,-1),ie={class:"stat"},ne=_("span",null,"Active tasks",-1),re=_("div",{class:"separator"},null,-1),oe={class:"stat"},ue=_("span",null,"Pending tasks",-1),pe=i({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(i){const A=i,I=W();F();const M=n(!1),L=n({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),N=n(""),E=r((()=>N.value?L.value.filter((e=>e.username.match(new RegExp(N.value,"i"))||e.email.match(new RegExp(N.value,"i")))):L.value));console.log(E.value);const U=n(!1),pe=()=>{U.value=!0},ce=async()=>{try{M.value=!0;const e=await I.get(`/api/users/workers/?supplier=${A.supplierId}`);L.value=e.data}catch(e){console.log(e)}finally{M.value=!1}};return o((()=>{ce()})),(i,n)=>{const r=C,o=T,I=S,L=P,W=t,F=l,de=a,_e=s,me=e;return u(),p(b,null,[c(M)?(u(),d(r,{key:0})):(u(),p("div",R,[_("div",H,[m(I,null,{default:v((()=>[m(o,{icon:"feather:search"},{default:v((()=>[g(_("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>y(N)?N.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(N)]])])),_:1})])),_:1}),_("div",O,[1===c(E).length?(u(),p("span",z,"1 record found")):(u(),p("span",q,h(c(E).length)+" records found",1))]),_("div",B,[m(L,{color:"primary",onClick:pe,icon:"fas fa-plus",elevated:""},{default:v((()=>[j(" Worker ")])),_:1})])]),_("div",K,[_("div",D,[m(W,{class:k([0!==c(E).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[J,X])),_:1},8,["class"]),_("div",Y,[m(w,{name:"list-complete",tag:"div"},{default:v((()=>[(u(!0),p(b,null,x(c(E),((e,s)=>(u(),p("div",{key:s,class:"list-view-item"},[_("div",Z,[m(F,{picture:e.avatar,size:"large"},null,8,["picture"]),_("div",$,[_("h3",null,h(e.username),1),_("span",null,[G,_("span",null,h(e.email),1)])]),_("div",Q,[_("div",ee,[m(de,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),_("div",se,[_("div",ae,[_("span",null,h(e.is_active?"Active":"In-Active"),1),le]),te,_("div",ie,[_("span",null,h(e.active_tasks),1),ne]),re,_("div",oe,[_("span",null,h(e.pending_tasks),1),ue])])])])])))),128))])),_:1})])]),c(E).length>5?(u(),d(_e,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):V("",!0)])])),c(U)?(u(),d(me,{key:2,isModalOpen:c(U),supplierId:A.supplierId,userRole:"worker","onUpdate:closeModalHandler":n[1]||(n[1]=e=>U.value=!1),"onUpdate:actionUpdateHandler":ce},null,8,["isModalOpen","supplierId"])):V("",!0)],64)}}}),ce={class:"lifestyle-dashboard lifestyle-dashboard-v3"},de={class:"illustration-header"},_e={class:"p-4"},me={class:"header-meta"},ve={class:"summary-stats"},ge={class:"summary-stat"},ye=_("span",null,"Role",-1),fe={class:"summary-stat"},he=_("span",null,"Status",-1),je={class:"summary-stat"},ke=_("span",null,"Phone",-1),be={class:"summary-stat"},xe=_("span",null,"Email",-1),we={class:"summary-stat h-hidden-tablet-p"},Ve=_("span",null,"Email Notification",-1),Pe={class:"columns is-multiline is-flex-tablet-p"},Ae={class:"column is-12"},Ie=i({__name:"SubContractorProfile",setup(e){F();const s=W(),a=A();n([]),E();const t=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all");const i=n(!1);n([]),n([]),n([]),n([]),n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),n({plugins:[N],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]});return n({}),o((async()=>{await(async()=>{try{i.value=!0;const e=await s.get(`/api/users/${a.params.id}`);t.value=e.data}catch(e){console.log(e)}finally{i.value=!1}})()})),(e,s)=>{const n=l,r=pe;return u(),p("div",ce,[_("div",de,[_("div",_e,[m(n,{size:"xl",squared:"",picture:c(t).avatar,alt:""},null,8,["picture"])]),_("div",me,[_("h3",null,h(c(i)?"Loading...":c(t)?.username),1),_("div",ve,[_("div",ge,[_("span",null,h(c(i)?"Loading...":c(t)?.role),1),ye]),_("div",fe,[_("span",null,h(c(i)?"Loading...":c(t)?.is_active?"Active":" In-Active"),1),he]),_("div",je,[_("span",null,h(c(i)?"Loading...":c(t)?.phoneNumber?c(t)?.phoneNumber:"N/A"),1),ke]),_("div",be,[_("span",null,h(c(i)?"Loading...":c(t)?.email),1),xe]),_("div",we,[_("span",null,h(c(i)?"Loading...":c(t).is_sentMail?"On":"Off"),1),Ve])])])]),_("div",Pe,[_("div",Ae,[m(r,{"supplier-id":c(a).params.id},null,8,["supplier-id"])])])])}}}),Se={class:""},Te=i({__name:"[id]",setup:e=>(U().setPageTitle("Sub-Contractor Info"),I({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ie;return u(),p("div",Se,[m(a)])})});export{Te as default};
