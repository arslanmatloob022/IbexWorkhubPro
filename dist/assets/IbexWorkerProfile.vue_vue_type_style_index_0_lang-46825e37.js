import{_ as a}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-3ecffda5.js";import{_ as e}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-4a95d147.js";import{_ as s}from"./WorkerTasks-11598e56.js";import{_ as t}from"./VIconBox.vue_vue_type_style_index_0_lang-e100c4eb.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-9a36d6a0.js";import{e as i,N as r,r as n,t as o,o as d,y as c,z as u,C as p,A as v,l as m,D as h,J as y,B as k,O as f,I as _,S as w,Y as g,P as b,H as j,K as x}from"./index-57283339.js";import{F as T}from"./FullCalendar-5120e2d2.js";import{i as C}from"./index-f52ed8ce.js";import{u as I}from"./useAPI-3d1b2833.js";import{u as D}from"./useNotyf-989627b5.js";import{u as A}from"./userSession-a3dc25ef.js";const M={class:"lifestyle-dashboard lifestyle-dashboard-v3"},P={class:"illustration-header"},N={class:"p-4"},S={class:"header-meta"},K={class:"summary-stats"},O={class:"summary-stat"},V=p("span",null,"Role",-1),W={class:"summary-stat"},$=p("span",null,"Status",-1),z={class:"summary-stat"},F=p("span",null,"Phone",-1),H={class:"summary-stat"},B=p("span",null,"Email",-1),L={class:"summary-stat h-hidden-tablet-p"},R=p("span",null,"Mail notify ",-1),Y={class:"summary-stat h-hidden-tablet-p"},q=p("span",null,"Password ",-1),E={class:"columns is-multiline is-flex-tablet-p"},J={class:"column is-3"},U={class:"health-tile"},G={class:"tile-head"},Q=p("i",{"aria-hidden":"true",class:"fas fa-weight"},null,-1),X={class:"dark-inverted"},Z=p("h3",{class:"dark-inverted"},"Total Tasks",-1),aa=p("p",null,"Number of tasks assigned within 30 Days duration",-1),ea={class:"column is-3"},sa={class:"health-tile"},ta={class:"tile-head"},la=p("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ia={class:"dark-inverted"},ra=p("h3",{class:"dark-inverted"},"Active Tasks",-1),na=p("p",null,"Tasks are currently active and worker notified",-1),oa={class:"column is-3"},da={class:"health-tile"},ca={class:"tile-head"},ua=p("i",{"aria-hidden":"true",class:"fas fa-heart"},null,-1),pa={class:"dark-inverted"},va=p("h3",{class:"dark-inverted"},"Pending Tasks",-1),ma=p("p",null,"Tasks that are pending and worker need to done.",-1),ha={class:"column is-3"},ya={class:"health-tile"},ka={class:"tile-head"},fa=p("i",{"aria-hidden":"true",class:"fas fa-weight"},null,-1),_a={class:"dark-inverted"},wa=p("h3",{class:"dark-inverted"},"Completed Tasks",-1),ga=p("p",null," The worker has done his job on these tasks and assure by the manager ",-1),ba={class:"columns is-multiline"},ja={class:"list-flex-toolbar is-reversed"},xa={class:"tabs-inner"},Ta={class:"tabs is-boxed"},Ca=[p("span",null,"Cards View",-1)],Ia=[p("span",null,"Calendar View",-1)],Da=[p("span",null,"Today Tasks",-1)],Aa=p("li",{class:"tab-naver"},null,-1),Ma={class:"column is-12"},Pa={key:0,class:"column is-12"},Na={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},Sa={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},Ka={style:{"margin-top":"8px","padding-right":"10px"}},Oa={key:1,class:"column is-12"},Va=i({__name:"IbexWorkerProfile",setup(i){const Va=A(),Wa=D(),$a=I(),za=r(),Fa=n([]);o();const Ha=n("cards"),Ba=n(""),La=n(!1),Ra=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all"),n("");const Ya=n(!1),qa=n([]),Ea=n([]),Ja=n([]),Ua=n([]),Ga=n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),Qa=n({plugins:[C],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),Xa=n({});return d((async()=>{await(async()=>{try{Ya.value=!0;const a=await $a.get(`/api/users/${za.params.id?za.params.id:Va.user.id}`);Ra.value=a.data,Ya.value=!1}catch(a){console.log(a)}})(),await(async()=>{try{const a=await $a.get(`/api/task/${za.params.id?za.params.id:Va.user.id}/worker-tasks/`);qa.value=a.data,console.log("worker tasks",qa.value)}catch(a){qa.value=[]}})(),(async(a=!1)=>{try{const e=await $a.get(`/api/task/worker-today/${za.params.id?za.params.id:Va.user.id}/`);Xa.value=e.data,a&&Wa.green("Tasks list Refreshed")}catch(e){console.log(e)}})(),Fa.value=qa.value.map((a=>({id:a.id,resourceId:a.project.id,start:a.startDate,end:a.endDate,title:a.title,color:a.color,description:a.description,workers:a.workers,borderColor:Ga[a.status],status:a.status}))),Ua.value=qa.value.map((a=>({id:a.project.id,start:a.project.startDate,end:a.project.endDate,title:a.project.title,address:a.project.address,status:a.project.status,color:Ga[a.project.status]}))),Ea.value=Ua.value,Ja.value=Fa.value,Qa.value={...Qa.value,resources:Ea.value,events:Ja.value},console.log("tasks",Qa.value.events,"resources",Qa.value.resources)})),(i,r)=>{const n=l,o=t,d=s,C=e,I=a;return c(),u("div",M,[p("div",P,[p("div",N,[v(n,{size:"xl",squared:"",picture:m(Ra).avatar,alt:""},null,8,["picture"])]),p("div",S,[p("h3",null,[h(y(m(Ra)?.username)+" ",1),p("i",{onClick:r[0]||(r[0]=a=>{m(Ra).id}),class:"fas fa-pencil-alt ml-2","aria-hidden":"true"})]),p("div",K,[p("div",O,[V,p("span",null,y(m(Ra)?.role),1)]),p("div",W,[$,p("span",null,y(m(Ra)?.is_active?"Active":" In-Active"),1)]),p("div",z,[F,p("span",null,y(m(Ra)?.phoneNumber?m(Ra)?.phoneNumber:"N/A"),1)]),p("div",H,[B,p("span",null,y(m(Ra)?.email),1)]),p("div",L,[R,p("span",null,y(m(Ra).is_sentMail?"On":"Off"),1)]),p("div",Y,[q,p("span",null,[p("i",{onClick:r[1]||(r[1]=a=>{return e=m(Ra).id,Ba.value=e,void(La.value=!0);var e}),class:"fas fa-lock","aria-hidden":"true"})])])])])]),p("div",E,[p("div",J,[p("div",U,[p("div",G,[v(o,{color:"primary"},{default:k((()=>[Q])),_:1}),p("h4",null,[p("span",X,y(m(Xa)?.stats?.pending+m(Xa)?.stats?.active+m(Xa)?.stats?.active),1)])]),Z,aa])]),p("div",ea,[p("div",sa,[p("div",ta,[v(o,{color:"primary"},{default:k((()=>[la])),_:1}),p("h4",null,[p("span",ia,y(m(Xa)?.stats?.active?m(Xa)?.stats?.active:0),1)])]),ra,na])]),p("div",oa,[p("div",da,[p("div",ca,[v(o,{color:"primary"},{default:k((()=>[ua])),_:1}),p("h4",null,[p("span",pa,y(m(Xa)?.stats?.pending?m(Xa)?.stats?.pending:0),1)])]),va,ma])]),p("div",ha,[p("div",ya,[p("div",ka,[v(o,{color:"primary"},{default:k((()=>[fa])),_:1}),p("h4",null,[p("span",_a,y(m(Xa)?.stats?.completed?m(Xa)?.stats?.completed:0),1)])]),wa,ga])])]),p("div",ba,[p("div",ja,[p("div",xa,[p("div",Ta,[p("ul",null,[p("li",{class:f(["cards"===m(Ha)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:r[2]||(r[2]=_(x((a=>Ha.value="cards"),["prevent"]),["space"])),onClick:r[3]||(r[3]=a=>Ha.value="cards")},Ca,32)],2),p("li",{class:f(["calendar"===m(Ha)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:r[4]||(r[4]=_(x((a=>Ha.value="calendar"),["prevent"]),["space"])),onClick:r[5]||(r[5]=a=>Ha.value="calendar")},Ia,32)],2),p("li",{class:f(["today"===m(Ha)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:r[6]||(r[6]=_(x((a=>Ha.value="today"),["prevent"]),["space"])),onClick:r[7]||(r[7]=a=>Ha.value="today")},Da,32)],2),Aa])])])]),w(p("div",Ma,[v(d,{workerId:m(za).params.id},null,8,["workerId"])],512),[[g,"cards"==m(Ha)]]),"calendar"==m(Ha)?(c(),u("div",Pa,[v(m(T),{options:m(Qa)},{eventContent:k((a=>[p("div",Na,[p("p",Sa,y(a.event.title),1),p("div",null,[p("p",Ka,y(new Date(a.event.start).toDateString())+" to "+y(new Date(a.event.end).toDateString()),1)])])])),_:1},8,["options"])])):b("",!0),"today"==m(Ha)?(c(),u("div",Oa,[v(C,{workerId:m(za).params.id},null,8,["workerId"])])):b("",!0)]),m(La)?(c(),j(I,{key:0,isModalOpen:m(La),userId:m(Ba),"onUpdate:closeModalHandler":r[8]||(r[8]=a=>La.value=!1)},null,8,["isModalOpen","userId"])):b("",!0)])}}});export{Va as _};
