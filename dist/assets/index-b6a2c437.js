import{_ as e}from"./AddUpdateUser.vue_vue_type_script_setup_true_lang-b6898326.js";import{_ as t}from"./SweetAlert.vue_vue_type_style_index_0_lang-4e34ac38.js";import{_ as a}from"./VProgress.vue_vue_type_style_index_0_lang-4055a001.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-f86e362a.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-a98a6142.js";import{e as i,r as n,Z as r,o,M as u,l as c,y as d,H as _,z as p,C as v,A as m,B as g,S as y,T as f,j as h,O as b,Q as k,R as w,aR as x,P as j,E as A,J as S,D as V,N as C,v as O}from"./index-b750ebd3.js";import{_ as P}from"./VField.vue_vue_type_script_setup_true_lang-25e58195.js";import{_ as U}from"./VControl-48792b30.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-4bc1d7c9.js";import{_ as D,a as I}from"./search-4-dark-2b5b440c.js";import{u as M}from"./useAPI-d7cc4ad4.js";import{u as E}from"./useNotyf-fd6acdce.js";import{u as T}from"./userSession-d0612c40.js";import{u as R}from"./viewWrapper-db3fb23d.js";import"./VModal.vue_vue_type_style_index_0_lang-81be354b.js";import"./VRadio.vue_vue_type_style_index_0_lang-fb8bd3d7.js";import"./VLabel.vue_vue_type_script_setup_true_lang-30ee3a3d.js";import"./useVFieldContext-9a307bb2.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-2149a20d.js";import"./VIcon.vue_vue_type_script_setup_true_lang-0ccdaf92.js";import"./VFilePond.vue_vue_type_script_lang-6d64cfdf.js";import"./VInput.vue_vue_type_script_setup_true_lang-76fd6db5.js";import"./useSupportElement-c5cb7903.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-331fb727.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-4e71e205.js";import"./notyf-bf301fc1.js";import"./useThemeColors-6c14c032.js";const $={key:1},z={class:"card-grid-toolbar"},F={class:"buttons"},L=v("span",{class:"icon"},[v("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),N=v("span",null," Worker",-1),B={class:"card-grid card-grid-v1"},H=v("img",{class:"light-image",src:D,alt:""},null,-1),Q=v("img",{class:"dark-image",src:I,alt:""},null,-1),G={class:"card-grid-item"},J={class:"card-grid-item-body"},X={class:"left"},Z={class:"meta"},q={class:"dark-inverted"},K={class:"right"},Y={class:"social-links"},ee=["onClick"],te=[v("i",{class:"fas fa-check-circle","aria-hidden":"true"},null,-1)],ae=["onClick"],le=[v("i",{class:"fas fa-ban","aria-hidden":"true"},null,-1)],se={key:2,channel:"Twitter",class:"social-link"},ie=[v("i",{class:"fas fa-envelope","aria-hidden":"true"},null,-1)],ne=["onClick"],re=[v("i",{"aria-hidden":"true",class:"fas fa-edit"},null,-1)],oe=["onClick"],ue=[v("i",{"aria-hidden":"true",class:"fas fa-trash"},null,-1)],ce={class:"card-grid-item-footer"},de={class:"left"},_e=v("div",{class:"progress-stats"},[v("span",{class:"dark-inverted"},"Progress"),v("span",null,"60%")],-1),pe={class:"progress-bar"},ve={class:"right"},me={class:"buttons"},ge=i({__name:"IbexWorkers",setup(i){const C=M(),O=E();T(),n(!1);const D=n(""),I=n(""),R=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ge=n([{username:"",email:"",password:"",is_sentMail:!1,status:"",role:"worker",is_active:!0,phoneNumber:"",avatar:null}]),ye=n(""),fe=n(!1),he=(e="")=>{ye.value=e,fe.value=!fe.value},be=r((()=>D.value?ge.value.filter((e=>e.username.match(new RegExp(D.value,"i"))||e.email.match(new RegExp(D.value,"i")))):ge.value)),ke=n(0),we=["All","UI/UX Design","Web Development","Software Eng.","Business"],xe=n(!1),je=n(null),Ae=n(null);n(null),n(""),n({username:"",email:"",password:"",status:"",avatar:null,is_sentMail:!1,phoneNumber:""}),n(0),n("");const Se=e=>{je.value=e.id,Ae.value=e.is_active,R.value.title="Change Status",R.value.btntext=""+(e.is_active?"In-Activate":"Activate"),R.value.subtitle=Ae.value?"After this User will not be able to login into the system":"From now this user will be able to login and perform all activities",R.value.isSweetAlertOpen=!0},Ve=async()=>{try{xe.value=!0,await C.delete(`/api/users/${I.value}/`,{}),await Ce(),O.green("Worker deleted successfully")}catch(e){console.log(e),O.error("Error while deleting")}finally{xe.value=!1}},Ce=async()=>{try{xe.value=!0;const e=await C.get("/api/users/by-role/worker/",{});ge.value=e.data,console.log("data",ge.value)}catch(e){console.log(e)}finally{xe.value=!1}},Oe=async()=>{try{xe.value=!0;const e=await C.patch(`/api/users/${je.value}/`,{is_active:!Ae.value});await Ce(),O.success(Ae.value?"Worker set inactive successfully":"Worker set active successfully"),R.value.isSweetAlertOpen=!1,console.log(e)}catch(e){console.log(e)}finally{xe.value=!1}};return o((()=>{Ce()})),(i,n)=>{const r=W,o=U,C=u("Multiselect"),O=P,M=A,E=s,T=l,ge=a,je=t,Ae=e;return c(xe)?(d(),_(r,{key:0})):(d(),p("div",$,[v("div",z,[m(o,{icon:"feather:search"},{default:g((()=>[y(v("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>h(D)?D.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(D)]])])),_:1}),v("div",F,[m(O,{class:"h-hidden-mobile"},{default:g((()=>[m(o,null,{default:g((()=>[m(C,{modelValue:c(ke),"onUpdate:modelValue":n[1]||(n[1]=e=>h(ke)?ke.value=e:null),options:we,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),m(M,{onClick:n[2]||(n[2]=e=>he()),color:"primary",raised:""},{default:g((()=>[L,N])),_:1})])]),v("div",B,[m(E,{class:b([0!==c(be).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[H,Q])),_:1},8,["class"]),m(x,{name:"list",tag:"div",class:"columns is-multiline"},{default:g((()=>[(d(!0),p(k,null,w(c(be),((e,t)=>(d(),p("div",{key:t,class:"column is-6"},[v("div",G,[v("div",J,[v("div",X,[m(T,{size:"big",picture:e.avatar},null,8,["picture"]),v("div",Z,[v("span",q,S(e.username),1),v("span",null,S(e.role),1)])]),v("div",K,[v("div",Y,[e.is_active?(d(),p("a",{key:0,onClick:t=>Se(e),channel:"Linkedin",class:"social-link"},te,8,ee)):(d(),p("a",{key:1,onClick:t=>Se(e),channel:"Linkedin",class:"social-link"},le,8,ae)),e.is_sentMail?(d(),p("a",se,ie)):j("",!0),v("a",{channel:"Dribbble",onClick:t=>he(e.id),class:"social-link"},re,8,ne),v("a",{channel:"Dribbble",onClick:t=>{return a=e,I.value=a.id,void(R.value={title:`Delete ${a.username}?`,subtitle:"After deleting this worker you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var a},class:"social-link"},ue,8,oe)])])]),v("div",ce,[v("div",de,[_e,v("div",pe,[m(ge,{size:"tiny",value:60})])]),v("div",ve,[v("div",me,[m(M,{to:`/sidebar/dashboard/workers/${e.id}`,"dark-outlined":"",rounded:""},{default:g((()=>[V(" View Profile ")])),_:2},1032,["to"])])])])])])))),128))])),_:1})]),c(R).isSweetAlertOpen?(d(),_(je,{key:0,loading:c(xe),isSweetAlertOpen:c(R).isSweetAlertOpen,title:c(R).title,subtitle:c(R).subtitle,btntext:c(R).btntext,onConfirm:Oe,onCancel:()=>c(R).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0),c(R).isSweetAlertOpen?(d(),_(je,{key:1,loading:c(xe),isSweetAlertOpen:c(R).isSweetAlertOpen,title:c(R).title,subtitle:c(R).subtitle,btntext:c(R).btntext,onConfirm:Ve,onCancel:()=>c(R).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0),c(fe)?(d(),_(Ae,{key:2,"is-modal-open":c(fe),"user-role":"worker","user-id":c(ye),"onUpdate:closeModalHandler":n[3]||(n[3]=e=>fe.value=!1),"onUpdate:actionUpdateHandler":Ce},null,8,["is-modal-open","user-id"])):j("",!0)]))}}}),ye={class:"page-content-inner"},fe=i({__name:"index",setup(e){C();return R().setPageTitle("Workers"),O({title:"Workers - Ibex"}),(e,t)=>{const a=ge;return d(),p("div",ye,[m(a)])}}});export{fe as default};
