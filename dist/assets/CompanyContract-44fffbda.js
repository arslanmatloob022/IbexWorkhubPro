import{e,r as t,s as l,x as a,o as i,b as s,_ as o,B as n,N as r,F as c,K as d,D as u,l as m,W as p,J as g,a3 as y,C as v,U as f,V as h,M as b,L as w,E as x,I as _,aA as C,O as k,P as S,Q as D,R as I,T as z,j as E,ar as O,am as A,ag as N,H as j,G as T,X as P,w as M}from"./index-666288a0.js";import{_ as V}from"./VModal.vue_vue_type_style_index_0_lang-b78fecb3.js";import{u as R,a as L}from"./useAPI-d7a2b438.js";import{u as U}from"./useNotyf-dcbb7c6d.js";import{u as H}from"./company-015562a6.js";import{m as $,a as J}from"./useSupportElement-acd313a8.js";import{_ as F}from"./SweetAlert.vue_vue_type_style_index_0_lang-5055a0b8.js";import{_ as q}from"./VField.vue_vue_type_script_setup_true_lang-d5e364bd.js";import{_ as K}from"./VControl-5b33fee1.js";import{_ as B}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-18feec8d.js";import{_ as G}from"./RotaView-33c11930.js";import{_ as W}from"./VDropdown.vue_vue_type_style_index_0_lang-ea259411.js";import{_ as Y}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-d24f7a87.js";import{_ as Z}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-96d3d04b.js";import{_ as X,a as Q}from"./search-4-dark-2b5b440c.js";const ee=e=>(S("data-v-10d78a0b"),e=e(),D(),e),te={class:""},le={class:""},ae={class:"modal-form columns cu-all-input is-multiline"},ie={class:"column is-12",style:{"margin-top":"-1rem"}},se={class:"column is-12 mb-0 p-0",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},oe={class:"field column is-4 mb-0"},ne=ee((()=>u("label",null,[g("Contract Name "),u("span",{style:{color:"red"}},"*")],-1))),re={class:"control"},ce={class:"field column is-4 mb-0"},de=ee((()=>u("label",null,[g("From Date "),u("span",{style:{color:"red"}},"*")],-1))),ue={class:"control"},me={class:"field column is-4 mb-0"},pe=ee((()=>u("label",null,[g("To Date "),u("span",{style:{color:"red"}},"*")],-1))),ge={class:"control"},ye={class:"field column is-3 mb-0"},ve=ee((()=>u("label",null,[g("Total Hours: "),u("span",null,"(Optional)")],-1))),fe={class:"control"},he={class:"field column is-3 mb-0"},be=ee((()=>u("label",null,[g("Charge Rate (£) "),u("span",{style:{color:"red"}},"*")],-1))),we={class:"control"},xe={class:"field column is-3 mb-0"},_e=ee((()=>u("label",null,"Overtime Rate (£)",-1))),Ce={class:"control"},ke={class:"field column is-2 mt-3",style:{position:"relative","margin-left":".4rem",cursor:"pointer",display:"flex","align-items":"center","flex-direction":"row"}},Se=ee((()=>u("i",{style:{color:"var(--primary)","margin-left":"10px",size:"3rem"},class:"fas fa-paint-brush","aria-hidden":"true"},null,-1))),De={class:"column is-4 pb-4"},Ie={key:0,style:{position:"absolute",top:"1rem","background-color":"white",width:"350px",right:"4rem","z-index":"999"}},ze={class:"colorContainer"},Ee={class:"close-btn"},Oe=["onClick"],Ae={key:0,class:"fas fa-check","aria-hidden":"true"},Ne=ee((()=>u("div",{class:"column is-12 mb-2",style:{"margin-top":"1rem"}},[u("h2",{class:"section-heading",style:{"font-size":"1.3rem","font-weight":"500"}}," Contact Person Details ")],-1))),je={class:"field column is-4 mb-0"},Te=ee((()=>u("label",null,[g("Name "),u("span",{style:{color:"red"}},"*")],-1))),Pe={class:"control"},Me={class:"field column is-4 mb-0"},Ve=ee((()=>u("label",null,[g("Phone no "),u("span",{style:{color:"red"}},"*")],-1))),Re={class:"control"},Le={class:"field column is-4 mb-0"},Ue=ee((()=>u("label",null,[g("Email "),u("span",{style:{color:"red"}},"*")],-1))),He={class:"control"},$e={class:"field column is-12 mb-0"},Je=ee((()=>u("label",{style:{"margin-bottom":".5rem"}},"Description",-1))),Fe={class:"page-content-inner"},qe={class:"columns is-multiline"},Ke={class:"column is-12"},Be={class:"columns"},Ge={class:"column is-12 content",style:{}},We=e({__name:"ContractModal",props:{openCustomCompany:{type:Boolean},id:{},customerCompanyId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:S}){const D=e,I=U(),z=R(),E=t(!1),O=H(),A=l(),N=a(),j=t(!1),T=t({id:0,hexCode:""}),P=t({step:1,stepTitle:"Contact Info",data:{}}),M=t({id:"",charge_rate:0,total_hours:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",over_rate:0,description:"",color:"#D875C7",company:"",customer_company:0,name:""}),L=async()=>{try{M.value.company=O.loggedCompany.id,M.value.customer_company=D.customerCompanyId||N.params.id,E.value=!0;const e=J(M.value,["logo"]);if(e.append("arezCompany",O.loggedCompany.id),M.value.id){await z.patch(`/v3/api/contract/${M.value.id}/`,e);I.success("Contract edit succesfully."),F()}else{await z.post("/v3/api/contract/",e);F(),I.dismissAll(),I.success("New contract added")}S("update:OnSuccess",null)}catch(e){I.error(" Something went wrong!");let t=e.response.data??{};Object.values(t).forEach((e=>{e.forEach((e=>{I.error(` ${e}, New Contract`)}))}))}finally{E.value=!1}},F=()=>{S("update:modalHandler",!1),console.log("modal closed"),M.value={charge_rate:0,total_hours:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",over_rate:0,description:"",color:"",company:0,customer_company:0,name:""}},q=()=>{j.value=!j.value};i((async()=>{D.id&&await(async()=>{const e=await z.get(`/v3/api/contract/${D.id}/`);M.value=e.data})()}));const K=s((()=>o((()=>import("./ckeditor-6ef67739.js").then((e=>e.c))),["assets/ckeditor-6ef67739.js","assets/index-666288a0.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-8880ced0.js"]).then((e=>e.default.component)))),B={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return i((async()=>{A.value=await o((()=>import("./ckeditor-be2e0568.js").then((e=>e.c))),["assets/ckeditor-be2e0568.js","assets/index-666288a0.js","assets/index-ce8747cd.css"]).then((e=>e.default))})),(e,t)=>{const l=C,a=k,i=V;return n(),r(i,{is:"form",open:D.openCustomCompany,title:m(M).id?"Edit Contract":"Contract Details",size:"xl",actions:"right",onSubmit:_(L,["prevent"]),onClose:F,noclose:""},{content:c((()=>[d(u("div",te,[d(u("div",le,[u("div",ae,[u("div",ie,[u("div",se,[u("div",oe,[ne,u("div",re,[d(u("input",{type:"text",name:"name","onUpdate:modelValue":t[0]||(t[0]=e=>m(M).name=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Contract Name",style:{width:"100%"}},null,512),[[p,m(M).name]])])]),u("div",ce,[de,u("div",ue,[d(u("input",{type:"date",name:"fromDate","onUpdate:modelValue":t[1]||(t[1]=e=>m(M).start_date=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"From Date",style:{width:"100%"}},null,512),[[p,m(M).start_date]])])]),u("div",me,[pe,u("div",ge,[d(u("input",{type:"date",name:"toDate","onUpdate:modelValue":t[2]||(t[2]=e=>m(M).end_date=e),class:"input is-primary-focus is-primary-focus",placeholder:"To date"},null,512),[[p,m(M).end_date]])])]),u("div",ye,[ve,u("div",fe,[d(u("input",{type:"text",name:"totalHours","onUpdate:modelValue":t[3]||(t[3]=e=>m(M).total_hours=e),class:"input is-primary-focus is-primary-focus",placeholder:"Total Hours"},null,512),[[p,m(M).total_hours]])])]),u("div",he,[be,u("div",we,[d(u("input",{type:"text",name:"changeRate","onUpdate:modelValue":t[4]||(t[4]=e=>m(M).charge_rate=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Charge Rate (£)"},null,512),[[p,m(M).charge_rate]])])]),u("div",xe,[_e,u("div",Ce,[d(u("input",{type:"text",name:"overtime","onUpdate:modelValue":t[5]||(t[5]=e=>m(M).over_rate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Overtime Rate (£)"},null,512),[[p,m(M).over_rate]])])]),u("div",ke,[u("div",{class:"column is-4 pb-4 cus-input-label",style:{display:"flex","align-items":"center",gap:".5rem",color:"#bbb","font-weight":"500",width:"100%"},onClick:q},[g(" Color "),Se]),u("div",De,[u("div",null,[u("div",{onClick:q,class:"color-pellate"},[u("div",{class:"current-color-div",style:y({backgroundColor:m(M).color})},null,4)])])]),m(j)?(n(),v("div",Ie,[u("div",ze,[u("div",Ee,[u("i",{onClick:t[6]||(t[6]=e=>j.value=!1),class:"lnir lnir-close","aria-hidden":"true"})]),(n(!0),v(f,null,h(m($),((e,t)=>(n(),v("div",{key:e.id,onClick:t=>(e=>{T.value=e,j.value=!1,M.value={...M.value,color:e.hexCode}})(e),style:y({backgroundColor:e.hexCode}),class:"colorDiv"},[m(T)==e?(n(),v("i",Ae)):b("",!0)],12,Oe)))),128))])])):b("",!0)]),Ne,u("div",je,[Te,u("div",Pe,[d(u("input",{type:"text",name:"registeredCompanyName","onUpdate:modelValue":t[7]||(t[7]=e=>m(M).incharge_name=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Full Name",style:{width:"100%"}},null,512),[[p,m(M).incharge_name]])])]),u("div",Me,[Ve,u("div",Re,[d(u("input",{type:"tel",name:"phone_number","onUpdate:modelValue":t[8]||(t[8]=e=>m(M).incharge_phone=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Phone number",style:{width:"100%"}},null,512),[[p,m(M).incharge_phone]])])]),u("div",Le,[Ue,u("div",He,[d(u("input",{type:"email",name:"email","onUpdate:modelValue":t[9]||(t[9]=e=>m(M).incharge_email=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"email",style:{width:"100%"}},null,512),[[p,m(M).incharge_email]])])]),u("div",$e,[Je,u("div",Fe,[u("div",qe,[u("div",Ke,[u("div",Be,[u("div",Ge,[m(A)?(n(),r(m(K),{key:0,modelValue:m(M).description,"onUpdate:modelValue":t[10]||(t[10]=e=>m(M).description=e),editor:m(A),config:B,style:{color:"#fff"}},null,8,["modelValue","editor"])):(n(),r(l,{key:1,height:"500px"}))])])])])])])])])])],512),[[w,1===m(P).step]])],512),[[w,1===m(P).step]])])),cancel:c((()=>[x(a,{loading:m(E),type:"button",color:"primary",light:"",style:{float:"right",border:"1xp solid #ccc",display:"none"}},{default:c((()=>[g("Previous")])),_:1},8,["loading"])])),action:c((()=>[x(a,{loading:m(E),type:"submit",color:"primary",raised:"",style:{float:"right"},onChick:t[11]||(t[11]=()=>{})},{default:c((()=>[g("Save & close")])),_:1},8,["loading"])])),_:1},8,["open","title","onSubmit"])}}}),Ye=I(We,[["__scopeId","data-v-10d78a0b"]]),Ze={id:"plyGonMap",style:{"border-radius":"20px",width:"100%"}},Xe=e({__name:"PolygonMap",props:{siteData:{}},setup(e){const t=e;return i((()=>{console.log("site data",t.siteData),(e=>{console.log("ploygon data",e);const t=[],l=new google.maps.Map(document.getElementById("plyGonMap"),{zoom:14,center:{lat:e.latitude?e.latitude:51.449927,lng:e.longitude?e.longitude:-.34712}});new google.maps.Marker({position:{lat:e.latitude?e.latitude:51.449927,lng:e.longitude?e.longitude:-.34712},map:l,title:"Site Location",icon:{path:"M-1.547 12l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM0 0q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",scale:2.5,strokeWeight:2,fillOpacity:1,fillColor:"#FB0E03",anchor:new google.maps.Point(0,20)}}),Array.isArray(e.geofence)&&e.geofence.forEach((e=>{console.log("lat",e.lat),t.push({lat:e.lat,lng:e.lng})})),new google.maps.Polygon({paths:t,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}).setMap(l)})(t.siteData)})),(e,t)=>(n(),v("div",Ze))}}),Qe=e=>(S("data-v-a61a9100"),e=e(),D(),e),et={class:"modal-form columns is-multiline"},tt={class:"field column is-12 mb-0"},lt={class:"field columns is-multiline mb-0 cu-all-input"},at={class:"field column is-6 mb-0"},it={class:"field column is-12 mb-0"},st=Qe((()=>u("label",null,"Site Name *",-1))),ot={class:"control"},nt={class:"field column is-12 mb-0"},rt=Qe((()=>u("label",null,"Post Code *",-1))),ct={class:"control",style:{position:"relative"}},dt=Qe((()=>u("i",{class:"iconify","data-icon":"feather:search","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1))),ut={class:"field column is-12 mb-0"},mt=Qe((()=>u("label",null,"Site Address:",-1))),pt={class:"control"},gt={class:"field column is-12 mb-0"},yt=Qe((()=>u("label",null,"City",-1))),vt={class:"control"},ft={class:"field column is-6 mb-0"},ht={class:"field column is-12 mb-0"},bt=Qe((()=>u("label",null,"Site Manager Name",-1))),wt={class:"control"},xt={class:"field column is-12 mb-0"},_t=Qe((()=>u("label",null,"Phone",-1))),Ct={class:"control"},kt={class:"field column is-12 mb-0"},St=Qe((()=>u("label",null,"Email",-1))),Dt={class:"control"},It={class:"field column is-12 mt-5",style:{position:"relative","margin-left":"0.4rem",cursor:"pointer",display:"flex","align-items":"center","flex-direction":"row"}},zt={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between",width:"70%"}},Et=Qe((()=>u("i",{style:{color:"var(--primary)","margin-left":"10px",size:"3rem"},class:"fas fa-paint-brush","aria-hidden":"true"},null,-1))),Ot={class:"column is-4 pb-4"},At={key:0,style:{position:"absolute",bottom:"3.5rem","background-color":"white",width:"350px",right:"3rem","z-index":"999"}},Nt={class:"colorContainer"},jt={class:"close-btn"},Tt=["onClick"],Pt={key:0,class:"fas fa-check","aria-hidden":"true"},Mt={class:"field column is-12 mb-0"},Vt={key:0,class:"",style:{display:"flex","align-items":"end","justify-content":"end","margin-bottom":"0.8rem"}},Rt=Qe((()=>u("i",{class:"iconify","data-icon":"feather:edit-2","aria-hidden":"true",style:{color:"#666","font-size":"1.2rem"}},null,-1))),Lt={key:0,id:"map",style:{width:"100%",height:"380px","background-color":"#f3f3f3"}},Ut={class:"field column is-12 mb-0 mt-0",style:{padding:"0px 20px"}},Ht=Qe((()=>u("label",null,"Comment",-1))),$t={class:"columns"},Jt={class:"column is-12 content",style:{}},Ft=e({__name:"SiteDetailModal",props:{AddSiteModalOpen:{type:Boolean},contractId:{},EditSiteID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:a}){const w=e,S=U(),D=R(),I=t(!1),E=t(!1),O=t({id:0,hexCode:""}),A=t({}),N=t(!1),j=l(),T=t({id:0,name:"",address:"",postcode:"",latitude:0,longitude:0,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{},color:"#D875C7"}),P=()=>{a("update:modalHandler",!1)};let M="";const H=async()=>{try{const e=await L.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${T.value.postcode}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);if("OK"===e.data.status){T.value.address=e.data.results[0].formatted_address;const t=e.data.results[0].geometry.location.lat;T.value.latitude=t;const l=e.data.results[0].geometry.location.lng;T.value.longitude=l,S.success("Address Added"),J()}else"ZERO_RESULTS"===e.data.status&&S.error("Invalid Post-Code")}catch(e){S.error("Invalid Post-Code"),console.error(e)}};var J=function(){var e;M=new google.maps.Map(document.getElementById("map"),{center:{lat:T.value.latitude,lng:T.value.longitude},zoom:18}),google.maps.event.addListener(M,"click",(function(e){var t;t=e.latLng,new google.maps.Marker({position:t,map:M}),console.log(e.latLng.toUrlValue(5))})),new google.maps.Marker({position:{lat:T.value.latitude?T.value.latitude:51.449927,lng:T.value.longitude?T.value.longitude:-.34712},map:M,title:"Site Location",icon:{path:"M-1.547 12l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM0 0q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",scale:2.5,strokeWeight:2,fillOpacity:1,fillColor:"#FB0E03",anchor:new google.maps.Point(0,20)}});var t=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.MARKER,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]},markerOptions:{icon:"images/beachflag.png"},circleOptions:{fillColor:"#ffff00",fillOpacity:.2,strokeWeight:3,clickable:!1,editable:!0,zIndex:1},polygonOptions:{clickable:!0,draggable:!0,editable:!0,fillColor:"#2aac8e",fillOpacity:.4},rectangleOptions:{clickable:!0,draggable:!0,editable:!0,fillColor:"#ffff00",fillOpacity:.5}});function l(t){e&&(e.setEditable(!1),e=null),e=t,t.setEditable(!0),console.log("shpes",t),function(e){const t=e.getPath().getLength(),l=[];for(let a=0;a<t;a++){const t=e.getPath().getAt(a).toUrlValue(6),[i,s]=t.split(",");l.push({lat:parseFloat(i),lng:parseFloat(s)})}T.value.geofence=l}(e)}t.setMap(M),google.maps.event.addListener(t,"polygoncomplete",(function(e){e.getPath().getLength(),google.maps.event.addListener(e.getPath(),"insert_at",(function(){for(var t=e.getPath().getLength(),l=0;l<t;l++)console.log(e.getPath().getAt(l).toUrlValue(5))})),google.maps.event.addListener(e.getPath(),"set_at",(function(){for(var t=e.getPath().getLength(),l=0;l<t;l++)console.log(e.getPath().getAt(l).toUrlValue(5))}))})),google.maps.event.addListener(t,"overlaycomplete",(function(e){if(e.type!==google.maps.drawing.OverlayType.MARKER){t.setDrawingMode(null);var a=e.overlay;a.type=e.type,google.maps.event.addListener(a,"click",(function(){l(a)})),l(a)}}));var a=document.createElement("div");new function(t,l){var a=document.createElement("div");a.style.backgroundColor="#fff",a.style.border="2px solid #fff",a.style.borderRadius="3px",a.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",a.style.cursor="pointer",a.style.marginBottom="22px",a.style.textAlign="center",a.title="Select to delete the shape",t.appendChild(a);var i=document.createElement("div");i.style.color="#FF0000",i.style.fontFamily="Roboto,Arial,sans-serif",i.style.fontSize="16px",i.style.lineHeight="38px",i.style.paddingLeft="5px",i.style.paddingRight="5px",i.innerHTML="Delete Selected Area",a.appendChild(i),a.addEventListener("click",(function(){e&&e.setMap(null)}))}(a),a.index=1,M.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(a)};const F=async()=>{if(!T.value.latitude&&!T.value.longitude)return S.error("Please enter valid Post Code!");I.value=!0;try{if(w.EditSiteID){await D.patch(`/v3/api/site/${w.EditSiteID}/`,{contract:w.contractId,name:T.value.name,address:T.value.address,postcode:T.value.postcode,latitude:T.value.latitude,longitude:T.value.longitude,city:T.value.city,inchargeName:T.value.inchargeName,inchargePhoneNo:T.value.inchargePhoneNo,inchargeEmail:T.value.inchargeEmail,comments:T.value.comments,color:T.value.color,geofence:JSON.stringify(T.value.geofence)});a("update:OnSuccess",null),S.success("Site updated Successfuly"),P(),I.value=!1}else{await D.post("/v3/api/site/",{contract:w.contractId,name:T.value.name,address:T.value.address,postcode:T.value.postcode,latitude:T.value.latitude,longitude:T.value.longitude,city:T.value.city,inchargeName:T.value.inchargeName,inchargePhoneNo:T.value.inchargePhoneNo,inchargeEmail:T.value.inchargeEmail,comments:T.value.comments,color:T.value.color,geofence:JSON.stringify(T.value.geofence)});a("update:OnSuccess",null),S.success("Site Added Successfuly"),P()}I.value=!1}catch(e){console.log(e),I.value=!1}},q=()=>{E.value=!E.value};i((()=>{w.EditSiteID&&(async()=>{const e=await D.get(`/v3/api/site/${w.EditSiteID}/`);T.value=e.data,A.value=e.data,console.log("Data:",A.value.geofence?A.value.geofence.length:0)})(),w.EditSiteID||J()}));const K=s((()=>o((()=>import("./ckeditor-6ef67739.js").then((e=>e.c))),["assets/ckeditor-6ef67739.js","assets/index-666288a0.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-8880ced0.js"]).then((e=>e.default.component)))),B={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return i((async()=>{j.value=await o((()=>import("./ckeditor-be2e0568.js").then((e=>e.c))),["assets/ckeditor-be2e0568.js","assets/index-666288a0.js","assets/index-ce8747cd.css"]).then((e=>e.default))})),(e,t)=>{const l=k,a=Xe,i=C,s=V;return n(),r(s,{is:"form",size:"xl",open:w.AddSiteModalOpen,title:w.EditSiteID?"Update Site":"Add Site",actions:"right",onSubmit:_(F,["prevent"]),onClose:P},{content:c((()=>[u("div",et,[u("div",tt,[u("div",lt,[u("div",at,[u("div",it,[st,u("div",ot,[d(u("input",{type:"text",name:"title",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>m(T).name=e),class:"input is-primary-focus",placeholder:"Site name"},null,512),[[p,m(T).name]])])]),u("div",nt,[rt,u("div",ct,[x(l,{color:"primary",light:"",style:{position:"absolute",right:"0.2rem",top:"0.3rem","z-index":"10",width:"3rem","border-radius":"2rem"},onClick:t[1]||(t[1]=()=>{N.value=!0,H()})},{default:c((()=>[dt])),_:1}),d(u("input",{type:"text",name:"postcode",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>m(T).postcode=e),class:"input is-primary-focus",placeholder:"Enter post-code",onBlur:H},null,544),[[p,m(T).postcode]])])]),u("div",ut,[mt,u("div",pt,[d(u("input",{type:"text",name:"title","onUpdate:modelValue":t[3]||(t[3]=e=>m(T).address=e),class:"input is-primary-focus",placeholder:"Site address"},null,512),[[p,m(T).address]])])]),u("div",gt,[yt,u("div",vt,[d(u("input",{type:"text",name:"city","onUpdate:modelValue":t[4]||(t[4]=e=>m(T).city=e),class:"input is-primary-focus",placeholder:"City"},null,512),[[p,m(T).city]])])])]),u("div",ft,[u("div",ht,[bt,u("div",wt,[d(u("input",{type:"text",name:"title","onUpdate:modelValue":t[5]||(t[5]=e=>m(T).inchargeName=e),class:"input is-primary-focus",placeholder:"Manager Name"},null,512),[[p,m(T).inchargeName]])])]),u("div",xt,[_t,u("div",Ct,[d(u("input",{type:"text",name:"phone","onUpdate:modelValue":t[6]||(t[6]=e=>m(T).inchargePhoneNo=e),class:"input is-primary-focus",placeholder:"Phone"},null,512),[[p,m(T).inchargePhoneNo]])])]),u("div",kt,[St,u("div",Dt,[d(u("input",{type:"email",name:"Email","onUpdate:modelValue":t[7]||(t[7]=e=>m(T).inchargeEmail=e),class:"input is-primary-focus",placeholder:"Email"},null,512),[[p,m(T).inchargeEmail]])])]),u("div",It,[u("div",zt,[u("div",{class:"column is-4 pb-4 cus-input-label",style:{display:"flex","align-items":"center",gap:"0.5rem",color:"#bbb","font-weight":"500",width:"100%"},onClick:q},[g(" Color "),Et]),u("div",Ot,[u("div",null,[u("div",{onClick:q,class:"color-pellate"},[u("div",{class:"current-color-div",style:y([{backgroundColor:m(T).color},{width:"5rem"}])},null,4)])])])]),m(E)?(n(),v("div",At,[u("div",Nt,[u("div",jt,[u("i",{onClick:t[8]||(t[8]=e=>E.value=!1),class:"lnir lnir-close","aria-hidden":"true"})]),(n(!0),v(f,null,h(m($),((e,t)=>(n(),v("div",{key:e.id,onClick:t=>(e=>{O.value=e,E.value=!1,T.value={...T.value,color:e.hexCode}})(e),style:y({backgroundColor:e.hexCode}),class:"colorDiv"},[m(O)==e?(n(),v("i",Pt)):b("",!0)],12,Tt)))),128))])])):b("",!0)])])])]),u("div",Mt,[w.EditSiteID?(n(),v("div",Vt,[u("span",{style:{"font-size":"1rem",color:"#bbb",cursor:"pointer"},onClick:t[9]||(t[9]=()=>{N.value=!m(N),H()})},[g("Edit Geofence "),Rt])])):b("",!0),u("div",null,[w.EditSiteID&&!0!==m(N)?b("",!0):(n(),v("div",Lt)),w.EditSiteID&&m(A)&&m(A).geofence&&!1===m(N)?(n(),r(a,{key:1,style:{width:"100%",height:"380px"},siteData:m(A)},null,8,["siteData"])):b("",!0)])]),u("div",Ut,[Ht,u("div",$t,[u("div",Jt,[m(j)?(n(),r(m(K),{key:0,modelValue:m(T).comments,"onUpdate:modelValue":t[10]||(t[10]=e=>m(T).comments=e),editor:m(j),config:B,style:{color:"#fff"}},null,8,["modelValue","editor"])):(n(),r(i,{key:1,height:"500px"}))])])])])])),action:c((()=>[x(l,{type:"submit",color:"primary",loading:m(I),raised:""},{default:c((()=>[g(z(w.EditSiteID?"Update & close":"Save & close"),1)])),_:1},8,["loading"])])),_:1},8,["open","title","onSubmit"])}}}),qt=I(Ft,[["__scopeId","data-v-a61a9100"]]),Kt=e=>(S("data-v-93e789de"),e=e(),D(),e),Bt={class:""},Gt={class:""},Wt={class:"modal-form columns cu-all-input is-multiline"},Yt={class:"column is-12",style:{"margin-top":"-1rem"}},Zt={class:"column is-12 mb-0 p-0",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},Xt={class:"field column is-12 mb-0"},Qt=Kt((()=>u("label",null,[g("Job Type "),u("span",{style:{color:"red"}},"*")],-1))),el={class:"",style:{display:"flex","align-items":"center",gap:"2rem","margin-top":"0.5rem"}},tl={style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888"}},ll={style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888"}},al={style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888"}},il=Kt((()=>u("span",{style:{width:"fit-content",display:"flex"}},"Temporary (Shifts)",-1))),sl={class:"field column is-4 mb-0"},ol=Kt((()=>u("label",null,[g("Job Name "),u("span",{style:{color:"red"}},"*")],-1))),nl={class:"control"},rl={class:"field column is-4 mb-0"},cl=Kt((()=>u("label",null,[g("Start Date "),u("span",{style:{color:"red"}},"*")],-1))),dl={class:"control"},ul={key:0,class:"field column is-4 mb-0"},ml=Kt((()=>u("label",null,[g("End Date "),u("span",{style:{color:"red"}},"*")],-1))),pl={class:"control"},gl={class:"field column is-4 mb-0"},yl=Kt((()=>u("label",null,[g("Start Time "),u("span",{style:{color:"red"}},"*")],-1))),vl={class:"control"},fl={class:"field column is-4 mb-0"},hl=Kt((()=>u("label",null,[g("End Time "),u("span",{style:{color:"red"}},"*")],-1))),bl={class:"control"},wl={class:"field column is-4 mb-0"},xl=Kt((()=>u("label",null,"Hourly Rate (£) ",-1))),_l={class:"control"},Cl={class:"field column is-4 mb-0"},kl=Kt((()=>u("label",null,"Overtime Rate (£)",-1))),Sl={class:"control"},Dl={class:"field column is-4 mb-0",style:{display:"flex","align-items":"center","flex-direction":"row","margin-top":"1rem",gap:"1rem"}},Il=Kt((()=>u("label",{style:{"margin-bottom":"1rem"}},"Approval Required",-1))),zl={class:"field column is-3 mt-3",style:{position:"relative","margin-left":"0.4rem",cursor:"pointer",display:"flex","align-items":"center","flex-direction":"row"}},El=Kt((()=>u("i",{style:{color:"var(--primary)","margin-left":"10px",size:"3rem"},class:"fas fa-paint-brush","aria-hidden":"true"},null,-1))),Ol={class:"column is-4 pb-4"},Al={class:"colorContainer"},Nl={class:"close-btn"},jl=["onClick"],Tl={key:0,class:"fas fa-check","aria-hidden":"true"},Pl={key:1,class:"field column is-6",style:{"margin-left":"0rem"}},Ml=Kt((()=>u("label",null,"Week Availability",-1))),Vl={class:"",style:{display:"flex","align-items":"center",gap:"2rem","margin-top":"0.5rem"}},Rl=["value"],Ll={class:"field column is-12 mb-0"},Ul=Kt((()=>u("label",{style:{"margin-bottom":"0.5rem"}},"Description",-1))),Hl={class:"page-content-inner"},$l={class:"columns is-multiline"},Jl={class:"column is-12"},Fl={class:"columns"},ql={class:"column is-12 content",style:{}},Kl=e({__name:"AddJobModal",props:{openSiteJobModel:{type:Boolean},id:{},siteID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:S}){const D=e,I=U(),N=R(),j=t(!1),T=H(),P=l();a();const M=t(!1),L=t("longTerm"),F=t([]),G=t(!1),W=t({id:0,hexCode:""}),Y=t({step:1,stepTitle:"Contact Info",data:{}}),Z=t({id:"",jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"",endTime:"",hourlyRate:0,overtimeRate:0,jobType:"",site:D.siteID,color:"#D875C7",workingDays:[],isApproval:!1}),X=async()=>{Z.value.isApproval=G.value,Z.value.workingDays=JSON.stringify(F.value),Z.value.jobType=L.value;try{j.value=!0;const e=J(Z.value,["logo"]);if(e.append("arezCompany",T.loggedCompany.id),Z.value.id){await N.patch(`/v3/api/jobs/${Z.value.id}/`,e);I.success("Job edit succesfully."),Q()}else{if(!Z.value.site)return I.error("Contract Site Id required!");await N.post("/v3/api/jobs/",e);Q(),I.dismissAll(),I.success("New Job added")}S("update:OnSuccess",null)}catch(e){let t=e.response.data??{};Object.values(t).forEach((e=>{e.forEach((e=>{I.error(` ${e}, New Contract`)}))}))}finally{j.value=!1}},Q=()=>{S("update:modalHandler",!1),console.log("modal closed"),Z.value={jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"",endTime:"",hourlyRate:0,overtimeRate:0,jobType:"",color:""}},ee=()=>{M.value=!M.value};i((async()=>{D.id&&await(async()=>{const e=await N.get(`/v3/api/jobs/${D.id}/`);Z.value=e.data,console.log("Get Jobs:",e.data),L.value=e.data.jobType,F.value=e.data.workingDays,G.value=e.data.isApproval})()}));const te=s((()=>o((()=>import("./ckeditor-6ef67739.js").then((e=>e.c))),["assets/ckeditor-6ef67739.js","assets/index-666288a0.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-8880ced0.js"]).then((e=>e.default.component)))),le={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return i((async()=>{P.value=await o((()=>import("./ckeditor-be2e0568.js").then((e=>e.c))),["assets/ckeditor-be2e0568.js","assets/index-666288a0.js","assets/index-ce8747cd.css"]).then((e=>e.default))})),(e,t)=>{const l=B,a=K,i=q,s=C,o=k,S=V;return n(),r(S,{is:"form",open:D.openSiteJobModel,title:m(Z).id?"Edit Job Placement Details":"Job Placement Details",size:"xl",actions:"right",onSubmit:_(X,["prevent"]),onClose:Q,noclose:""},{content:c((()=>[d(u("div",Bt,[d(u("div",Gt,[u("div",Wt,[u("div",Yt,[u("div",Zt,[u("div",Xt,[Qt,u("div",el,[u("label",tl,[d(u("input",{type:"radio",name:"jobname","onUpdate:modelValue":t[0]||(t[0]=e=>E(L)?L.value=e:null),value:"longTerm",style:{width:"fit-content"}},null,512),[[O,m(L)]]),g(" Long Term ")]),u("label",ll,[d(u("input",{type:"radio",name:"jobname","onUpdate:modelValue":t[1]||(t[1]=e=>E(L)?L.value=e:null),value:"contract",style:{width:"auto"}},null,512),[[O,m(L)]]),g(" Contract ")]),u("label",al,[d(u("input",{type:"radio",name:"jobname","onUpdate:modelValue":t[2]||(t[2]=e=>E(L)?L.value=e:null),value:"temporary",style:{width:"auto"}},null,512),[[O,m(L)]]),il])])]),u("div",sl,[ol,u("div",nl,[d(u("input",{type:"text",name:"jobname","onUpdate:modelValue":t[3]||(t[3]=e=>m(Z).jobName=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Job Name",style:{width:"100%"}},null,512),[[p,m(Z).jobName]])])]),u("div",rl,[cl,u("div",dl,[d(u("input",{type:"date",name:"StartDate",required:"","onUpdate:modelValue":t[4]||(t[4]=e=>m(Z).startDate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Start Date",style:{width:"100%"}},null,512),[[p,m(Z).startDate]])])]),"longTerm"!=m(L)?(n(),v("div",ul,[ml,u("div",pl,[d(u("input",{type:"date",name:"endDate",required:"","onUpdate:modelValue":t[5]||(t[5]=e=>m(Z).endDate=e),class:"input is-primary-focus is-primary-focus",placeholder:"End date"},null,512),[[p,m(Z).endDate]])])])):b("",!0),u("div",gl,[yl,u("div",vl,[d(u("input",{type:"time",name:"startTime",required:"","onUpdate:modelValue":t[6]||(t[6]=e=>m(Z).startTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"Start Time"},null,512),[[p,m(Z).startTime]])])]),u("div",fl,[hl,u("div",bl,[d(u("input",{type:"time",name:"endTime",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>m(Z).endTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"End Time"},null,512),[[p,m(Z).endTime]])])]),u("div",wl,[xl,u("div",_l,[d(u("input",{type:"number",name:"changeRate","onUpdate:modelValue":t[8]||(t[8]=e=>m(Z).hourlyRate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Charge Rate (£)"},null,512),[[p,m(Z).hourlyRate]])])]),u("div",Cl,[kl,u("div",Sl,[d(u("input",{type:"number",name:"overtime","onUpdate:modelValue":t[9]||(t[9]=e=>m(Z).overtimeRate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Overtime Rate (£)"},null,512),[[p,m(Z).overtimeRate]])])]),u("div",Dl,[Il,x(i,null,{default:c((()=>[x(a,{subcontrol:"",class:"mr-2"},{default:c((()=>[x(l,{color:"primary",modelValue:m(G),"onUpdate:modelValue":t[10]||(t[10]=e=>E(G)?G.value=e:null),label:"Yes",onClick:t[11]||(t[11]=()=>{G.value=!m(G)})},null,8,["modelValue"])])),_:1})])),_:1}),x(i,{id:"interests",class:"pb-4",label:""})]),u("div",zl,[u("div",{class:"column is-4 pb-4 cus-input-label",style:{display:"flex","align-items":"center",gap:"0.5rem",color:"#bbb","font-weight":"500",width:"100%"},onClick:ee},[g(" Color "),El]),u("div",Ol,[u("div",null,[u("div",{onClick:ee,class:"color-pellate"},[u("div",{class:"current-color-div",style:y({backgroundColor:m(Z).color})},null,4)])])]),m(M)?(n(),v("div",{key:0,style:y([{right:"contract"===m(L)||"temporary"===m(L)?"12rem":"-14rem"},{position:"absolute",top:"-19rem","background-color":"white",width:"350px","z-index":"999"}])},[u("div",Al,[u("div",Nl,[u("i",{onClick:t[12]||(t[12]=e=>M.value=!1),class:"lnir lnir-close","aria-hidden":"true"})]),(n(!0),v(f,null,h(m($),((e,t)=>(n(),v("div",{key:e.id,onClick:t=>(e=>{W.value=e,M.value=!1,Z.value={...Z.value,color:e.hexCode}})(e),style:y({backgroundColor:e.hexCode}),class:"colorDiv"},[m(W)==e?(n(),v("i",Tl)):b("",!0)],12,jl)))),128))])],4)):b("",!0)]),"temporary"==m(L)?(n(),v("div",Pl,[Ml,u("div",Vl,[(n(),v(f,null,h(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],((e,l)=>u("label",{key:l,style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888","font-size":"1.1rem"}},[d(u("input",{type:"checkbox",name:"availability",value:e,"onUpdate:modelValue":t[13]||(t[13]=e=>E(F)?F.value=e:null),style:{width:"auto","font-size":"1.1rem"}},null,8,Rl),[[A,m(F)]]),g(" "+z(e.charAt(0).toUpperCase()+e.slice(1)),1)]))),64))])])):b("",!0),u("div",Ll,[Ul,u("div",Hl,[u("div",$l,[u("div",Jl,[u("div",Fl,[u("div",ql,[m(P)?(n(),r(m(te),{key:0,modelValue:m(Z).description,"onUpdate:modelValue":t[14]||(t[14]=e=>m(Z).description=e),editor:m(P),config:le,style:{color:"#fff"}},null,8,["modelValue","editor"])):(n(),r(s,{key:1,height:"500px"}))])])])])])])])])])],512),[[w,1===m(Y).step]])],512),[[w,1===m(Y).step]])])),cancel:c((()=>[x(o,{loading:m(j),type:"button",color:"primary",light:"",style:{float:"right",border:"1xp solid #ccc",display:"none"}},{default:c((()=>[g("Previous")])),_:1},8,["loading"])])),action:c((()=>[x(o,{loading:m(j),type:"submit",color:"primary",raised:"",style:{float:"right"}},{default:c((()=>[g("Save & close")])),_:1},8,["loading"])])),_:1},8,["open","title","onSubmit"])}}}),Bl=I(Kl,[["__scopeId","data-v-93e789de"]]),Gl={style:{display:"flex","align-items":"start","justify-content":"space-between"}},Wl={class:"site-content",style:{display:"flex","flex-direction":"column",gap:"2rem"}},Yl=u("i",{class:"iconify","data-icon":"feather:edit","aria-hidden":"true",style:{"font-size":"1.4rem","margin-left":"2rem",color:"#23ad8d",cursor:"pointer",position:"absolute",right:"50%"}},null,-1),Zl=[Yl],Xl={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},Ql=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Site Name:",-1),ea={style:{"font-weight":"400","font-size":"1.1rem"}},ta={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},la=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Site Address:",-1),aa={style:{"font-weight":"400","font-size":"1.1rem"}},ia={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},sa=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Post Code:",-1),oa={style:{"font-weight":"400","font-size":"1.1rem"}},na={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},ra=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Site Incharge:",-1),ca={style:{"font-weight":"400","font-size":"1.1rem"}},da={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},ua=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Contact Person:",-1),ma={style:{"font-weight":"400","font-size":"1.1rem"}},pa={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},ga=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Contact Phone:",-1),ya={style:{"font-weight":"400","font-size":"1.1rem"}},va={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},fa=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"City:",-1),ha={style:{"font-weight":"400","font-size":"1.1rem"}},ba={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},wa=u("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Email:",-1),xa={style:{"font-weight":"400","font-size":"1.1rem"}},_a={class:"",style:{display:"flex","flex-direction":"column",gap:"0.4rem"}},Ca=u("label",{style:{"font-size":"1.2rem","font-weight":"500",width:"9rem"},class:"ckeditor"},"Comments:",-1),ka=["innerHTML"],Sa={key:0,style:{border:"1px solid #ccc","border-radius":"1rem","box-shadow":"0.2rem 0.2rem 0.2rem rgba(0, 0, 0, 0.2)"}},Da=e({__name:"SiteDetails",props:{EditSiteID:{type:String}},setup(e){const l=e,s=R();a(),U();const o=t(!1),c=t({id:null,name:"",address:"",postcode:"",latitude:null,longitude:null,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{},created_at:"2024-05-07T12:17:14.267313Z",updated_at:"2024-05-09T11:17:59.556648Z",color:"#D875C7",regionFormat:"Large North",areaManager:"",managingDirector:"Jonathan Taylor",contract:0,jobs:[],contractInfo:{id:0,name:" ",company:0,customer_company:0,incharge_name:"",color:"",charge_rate:0,cuCompanyInfo:{id:0,name:"",email:"",logo:"",phone_number:""}}}),d=async()=>{const e=await s.get(`/v3/api/site/${l.EditSiteID}/`);c.value=e.data},m=()=>{o.value=!0};return i((()=>{l.EditSiteID&&d()})),(t,l)=>{const a=Xe,i=qt;return n(),v(f,null,[u("div",Gl,[u("div",Wl,[u("span",{style:{"font-size":"1.4rem","margin-left":"2rem",color:"#23ad8d",cursor:"pointer",position:"absolute",right:"50%"},onClick:m},Zl),u("div",Xl,[Ql,u("span",ea,z(c.value?.name),1)]),u("div",ta,[la,u("span",aa,z(c.value?.address),1)]),u("div",ia,[sa,u("span",oa,z(c.value?.postcode),1)]),u("div",na,[ra,u("span",ca,z(c.value.contractInfo?.incharge_name?c.value.contractInfo?.incharge_name:"Not mentioned"),1)]),u("div",da,[ua,u("span",ma,z(c.value?.inchargeName?c.value?.inchargeName:"Not Mentioned"),1)]),u("div",pa,[ga,u("span",ya,z(c.value?.inchargePhoneNo),1)]),u("div",va,[fa,u("span",ha,z(c.value?.city),1)]),u("div",ba,[wa,u("span",xa,z(c.value?.inchargeEmail?c.value?.inchargeEmail:" N/A"),1)]),u("div",_a,[Ca,u("div",{innerHTML:c.value?.comments?c.value?.comments:"N/A",class:"ckeditor",style:{"font-weight":"500","margin-left":"0.5rem",color:"#111"}},null,8,ka)])]),c.value.latitude?(n(),v("div",Sa,[x(a,{style:{width:"600px",height:"350px"},siteData:c.value},null,8,["siteData"])])):b("",!0)]),o.value?(n(),r(i,{key:0,EditSiteID:e.EditSiteID,"onUpdate:modalHandler":l[0]||(l[0]=()=>{o.value=!1}),AddSiteModalOpen:o.value,"onUpdate:OnSuccess":d},null,8,["EditSiteID","AddSiteModalOpen"])):b("",!0)],64)}}}),Ia=e=>(S("data-v-2939f37b"),e=e(),D(),e),za={class:"contract-wrapper"},Ea={class:"contract-header",style:{position:"relative"}},Oa={class:"header-left",style:{display:"flex","flex-direction":"column",position:"relative"}},Aa={class:"is-flex"},Na={style:{"font-size":"1.1rem","font-weight":"500",color:"#111",display:"flex","align-items":"center"}},ja=Ia((()=>u("i",{class:"iconify","data-icon":"feather:arrow-left","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1))),Ta={style:{"font-size":"1.7rem","font-weight":"500",color:"#111"}},Pa={class:"",style:{display:"flex","align-items":"center",gap:"0.6rem"}},Ma={style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},Va={style:{"font-size":"1rem","font-weight":"400",color:"#333"}},Ra=P('<span class="" style="width:2px;height:1rem;background:#ccc;" data-v-2939f37b></span><span style="font-size:1.1rem;font-weight:500;color:#333;" data-v-2939f37b>Assigned Jobs: <span style="font-size:1rem;font-weight:400;color:#333;" data-v-2939f37b>00</span></span><span class="" style="width:2px;height:1rem;background:#ccc;" data-v-2939f37b></span><span style="font-size:1.1rem;font-weight:500;color:#333;" data-v-2939f37b>Unassigned Jobs: <span style="font-size:1rem;font-weight:400;color:#333;" data-v-2939f37b>00</span></span>',4),La=Ia((()=>u("div",{class:"",style:{position:"absolute",bottom:"3rem",left:"31rem"}},null,-1))),Ua={class:"",style:{"margin-top":"2.2rem",display:"flex","flex-direction":"column",gap:"1rem","padding-left":"2.5rem",position:"relative"}},Ha={style:{"font-size":"1.2rem","font-weight":"500","margin-bottom":"0.5rem",color:"#333"}},$a={class:"",style:{color:"#333"}},Ja={class:"",style:{"font-size":"1.5rem","font-weight":"500",color:"#333"}},Fa={class:"tabs-wrapper rounded",type:"rounded",style:{"padding-left":"2.5rem"}},qa={class:"contract-header",style:{"margin-top":"2rem"}},Ka={class:"header-left"},Ba={class:"tabs-inner"},Ga={class:"tabs is-toggle"},Wa=[Ia((()=>u("span",{style:{}},"Site Details",-1)))],Ya=[Ia((()=>u("span",null,"Placements",-1)))],Za=[Ia((()=>u("span",null,"Site Rota",-1)))],Xa=[Ia((()=>u("span",null,"Time Sheet",-1)))],Qa={class:"",style:{"margin-top":"1.5rem"}},ei={class:"contracts-section1"},ti={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column","grid-area":"0.5rem"}},li=Ia((()=>u("i",{class:"iconify","data-icon":"feather:plus","aria-hidden":"true",style:{"font-size":"2.5rem",color:"#179e9b"}},null,-1))),ai=Ia((()=>u("span",{style:{"font-size":"1.4rem","font-weight":"500",display:"flex","align-items":"center",gap:"0.5rem",color:"#179e9b"}}," Create New Placements at ",-1))),ii={style:{"font-size":"1.1rem","font-weight":"400",display:"flex","text-align":"center","align-items":"center",gap:"0.5rem",color:"#179e9b","max-width":"90%"}},si={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},oi={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center","text-transform":"capitalize",gap:"0.5rem",color:"#333"}},ni=Ia((()=>u("i",{class:"iconify","data-icon":"feather:clock","aria-hidden":"true",style:{color:"#179e9b"}},null,-1))),ri=["onClick"],ci=[Ia((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Ia((()=>u("div",{class:"meta"},[u("span",null,"Edit"),u("span",null,"Edit site details")],-1)))],di=Ia((()=>u("hr",{class:"dropdown-divider"},null,-1))),ui=["onClick"],mi=[Ia((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),Ia((()=>u("div",{class:"meta"},[u("span",null,"Delete"),u("span",null,"Delete from list")],-1)))],pi={class:"",style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},gi={class:"Genevieve-Hodges-Copy",style:{"font-size":"1.4rem","margin-top":"0.5rem","font-weight":"500",color:"#333"}},yi={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between",color:"#333"}},vi={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},fi={class:"",style:{display:"flex","align-items":"center",gap:"0.6rem","margin-top":"1rem",color:"#333"}},hi=Ia((()=>u("span",{style:{"font-size":"1.1rem","font-weight":"400"}},"4 Assigned ",-1))),bi=Ia((()=>u("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),wi={style:{"font-size":"1.1rem","font-weight":"400","text-transform":"capitalize",color:"#333"}},xi=Ia((()=>u("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),_i={style:{"font-size":"1.1rem","font-weight":"400",color:"#333"}},Ci={key:0,class:"",style:{"margin-top":"3.5rem"}},ki={class:"",style:{display:"flex","flex-direction":"column",gap:"2.5rem"}},Si={class:"",style:{display:"flex","align-items":"center",gap:"4rem"}},Di={class:"",style:{"margin-top":"0.5rem"}},Ii=[Ia((()=>u("div",{class:"",style:{display:"flex","flex-direction":"column",gap:"2.5rem"}},[u("h1",null,"Time Sheet")],-1)))],zi={class:"",style:{"margin-top":"1.5rem"}},Ei=I(e({__name:"SiteJobs",props:{siteID:{type:String},getSites:Function,editSiteModal:Function,isShow:Number,siteLength:Number},setup(e){const l=e,a=R(),s=U(),o=t("");t("");const m=t(0),p=t(!1),C=t(!1),S=t(""),D=t(!1),I=t("siteDetails");t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});const E=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),O=t({id:"",jobsCount:0,name:"",inchargeName:"",color:"",postcode:"",contractInfo:{},jobs:[]});t({id:null,name:"",address:"",postcode:"",latitude:null,longitude:null,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{}});const A=async()=>{C.value=!0,console.log(l.siteID);const e=await a.get(`/v3/api/jobs/site/${l.siteID}/`);O.value=e.data,console.log("Job Data:",e.data),C.value=!1},P=async()=>{try{C.value=!0,E.value.isSweetAlertOpen=!1;await a.delete(`/v3/api/jobs/${m.value}/`);A(),s.dismissAll(),s.success("Job Delete"),C.value=!1}catch(e){console.error("ok",e),C.value=!1}};i((()=>{A()}));return N((()=>{A()})),(t,a)=>{const i=k,s=Y,N=W,M=G,V=Da,R=Bl,L=qt,U=F;return n(),v("div",za,[u("div",Ea,[u("div",Oa,[u("div",Aa,[u("div",{class:"",style:y([{padding:"1rem 1rem","border-radius":"1rem","margin-top":"1rem",border:"1px solid #eee"},{backgroundImage:`linear-gradient(-175deg, white 65%, ${O.value?.contractInfo?.color}30)`}])},[u("span",Na,[1!==e.isShow?(n(),r(i,{key:0,color:"primary",outlined:"",class:"mr-1",onClick:l.getSites,style:{width:"3rem","border-radius":"12px",padding:"2px 4px"}},{default:c((()=>[ja])),_:1},8,["onClick"])):b("",!0),g(" Contract_00"+z(O.value.contractInfo.id),1)]),u("h1",Ta,z(O.value?.contractInfo?.name),1),u("div",Pa,[u("span",Ma,[g("Total Sites: "),u("span",Va,z(l?.siteLength<10&&l.siteLength>0?"0"+l.siteLength:l.siteLength),1)]),Ra])],4),La,u("div",Ua,[u("div",{class:"",style:y([{display:"flex","flex-direction":"column",gap:"0rem",padding:"1rem","border-radius":"0.8rem","min-width":"19rem","max-width":"27rem",border:"1px solid #eee"},{backgroundImage:`linear-gradient(to bottom left, white 75%, ${O.value?.color}50)`}])},[u("label",Ha,"Site_00"+z(O.value?.id),1),u("span",$a," Site: "+z(O.value?.postcode),1),u("span",Ja,z(O.value?.name),1)],4)])])])]),u("div",Fa,[u("div",qa,[u("div",Ka,[u("div",Ba,[u("div",Ga,[u("ul",null,[u("li",{class:j(["siteDetails"===I.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:a[0]||(a[0]=T(_((e=>I.value="siteDetails"),["prevent"]),["space"])),onClick:a[1]||(a[1]=e=>I.value="siteDetails")},Wa,32)],2),u("li",{class:j(["jobs"===I.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:a[2]||(a[2]=T(_((e=>I.value="jobs"),["prevent"]),["space"])),onClick:a[3]||(a[3]=e=>I.value="jobs")},Ya,32)],2),u("li",{class:j(["siteRota"===I.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:a[4]||(a[4]=T(_((e=>I.value="siteRota"),["prevent"]),["space"])),onClick:a[5]||(a[5]=e=>I.value="siteRota")},Za,32)],2),u("li",{class:j(["timeSheet"===I.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:a[6]||(a[6]=T(_((e=>I.value="timeSheet"),["prevent"]),["space"])),onClick:a[7]||(a[7]=e=>I.value="timeSheet")},Xa,32)],2)])])])])]),d(u("div",Qa,[u("div",ei,[u("div",{class:"contracts-list",style:{background:"#e3f3f3",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column","grid-area":"0.5rem",height:"13.5rem"},onClick:a[8]||(a[8]=()=>{o.value="",p.value=!p.value})},[u("div",ti,[li,ai,u("span",ii,z(O.value?.site?.address),1)])]),C.value?(n(),r(s,{key:0})):b("",!0),(n(!0),v(f,null,h(O.value.jobs,((e,t)=>(n(),v("div",{class:"contracts-section",key:e.id,style:{"margin-top":"0rem"}},[u("div",{class:"contracts-list",style:y({backgroundImage:`linear-gradient(-175deg, white 40%, ${e?.color}45)`})},[u("div",si,[u("span",oi,[ni,g(" "+z(e?.jobType),1)]),x(N,{style:{position:"relative"},class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>((e=0)=>{o.value=e,p.value=!0})(e.id)},ci,8,ri),di,u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return l=e.id,m.value=l,void(E.value={title:"Are you sure?",subtitle:"You will not be able to recover this job!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l}},mi,8,ui)])),_:2},1024)]),u("div",pi,[u("span",gi,z(e?.jobName),1),u("div",yi,[u("span",vi,"From: "+z(e?.startDate)+" "+z(e?.endDate?"- To:":"")+" "+z(e?.endDate),1)]),u("div",fi,[hi,bi,u("span",wi,z(e?.shift)+" Shift ",1),xi,u("span",_i,"Rate: £"+z(e?.hourlyRate)+" per hour ",1)])])],4)])))),128))])],512),[[w,"jobs"==I.value]]),"siteRota"==I.value?(n(),v("div",Ci,[u("div",ki,[u("div",Si,[x(M,{siteID:l.siteID},null,8,["siteID"])])])])):b("",!0),d(u("div",Di,Ii,512),[[w,"timeSheet"==I.value]]),d(u("div",zi,[x(V,{EditSiteID:l.siteID},null,8,["EditSiteID"])],512),[[w,"siteDetails"==I.value]])]),p.value?(n(),r(R,{key:0,id:o.value,siteID:l.siteID,openSiteJobModel:p.value,"onUpdate:modalHandler":a[9]||(a[9]=e=>(p.value=e,A()))},null,8,["id","siteID","openSiteJobModel"])):b("",!0),D.value?(n(),r(L,{key:1,contractId:O.value.contract.id,EditSiteID:S.value,"onUpdate:modalHandler":a[10]||(a[10]=()=>{D.value=!D.value}),AddSiteModalOpen:D.value,"onUpdate:OnSuccess":A},null,8,["contractId","EditSiteID","AddSiteModalOpen"])):b("",!0),E.value.isSweetAlertOpen?(n(),r(U,{key:2,isSweetAlertOpen:E.value.isSweetAlertOpen,title:E.value.title,subtitle:E.value.subtitle,btntext:E.value.btntext,onConfirm:P,onCancel:()=>E.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0)])}}}),[["__scopeId","data-v-2939f37b"]]),Oi=[u("div",{id:"myMap",style:{height:"650px",width:"80vw","border-radius":"10px"}},null,-1)],Ai=e({__name:"SiteMapLocation",props:{companyId:{},sites:{}},setup(e){const t=e;let l={};return i((()=>{var e,a;e=t.sites,a=new google.maps.InfoWindow,l=new google.maps.Map(document.getElementById("myMap"),{center:{lat:51.4497984,lng:-.3464489},scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:8}),e.forEach(((e,t)=>{const i=new google.maps.Marker({position:{lat:e.latitude,lng:e.longitude},map:l,title:"Worker",icon:{url:"/images/marker_new.png",scaledSize:new google.maps.Size(20,30)}});i.addListener("click",(()=>{var t=`<div style="display:flex; flex-direction: column;  gap:16px">\n                <div>\n                <h3 style="color:#010101; font-size:20px font-weight:500">${e.name}</h3>\n                </div>\n                <div style="display:flex; flex-direction:column; justify-content:center;  gap:6px">\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Post Code: ${e.postcode}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Latitude: ${e.latitude}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Longitude: ${e.longitude}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Manager: ${e.inchargeName}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Phone No: ${e.inchargePhoneNo}</h4>\n                </div>\n            \n            </div>`;a.setContent(t),a.open(l,i)}))}))})),(e,t)=>(n(),v("div",null,Oi))}}),Ni=e=>(S("data-v-ca209147"),e=e(),D(),e),ji={class:"contract-wrapper"},Ti={key:0,class:"contract-wrapper"},Pi={class:"contract-header"},Mi={class:"header-left",style:{display:"flex","flex-direction":"column"}},Vi={style:{"font-size":"1.1rem","font-weight":"500",color:"#111","margin-top":"1rem",display:"flex","align-items":"center"}},Ri=Ni((()=>u("i",{class:"iconify","data-icon":"feather:arrow-left","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1))),Li={style:{"font-size":"1.7rem","font-weight":"500",color:"#111"}},Ui={class:"",style:{display:"flex","align-items":"center",gap:"0.6rem"}},Hi={style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},$i={style:{"font-size":"1rem","font-weight":"400",color:"#333"}},Ji=Ni((()=>u("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),Fi=Ni((()=>u("span",{style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},[g("Slots Available: "),u("span",{style:{"font-size":"1rem","font-weight":"400",color:"#333"}},"0/15")],-1))),qi=Ni((()=>u("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),Ki={style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},Bi={style:{"font-size":"1rem","font-weight":"400",color:"#333"}},Gi={class:"header-right",style:{display:"flex","align-items":"center",gap:"1rem","margin-top":"6rem"}},Wi=Ni((()=>u("i",{class:"iconify","data-icon":"feather:plus","aria-hidden":"true"},null,-1))),Yi={class:"",style:{display:"flex","flex-direction":"column",gap:"1rem","margin-top":"1rem"}},Zi={class:"tabs-inner"},Xi={class:"tabs is-toggle"},Qi=[Ni((()=>u("span",null,"List View",-1)))],es=[Ni((()=>u("span",null,"Map View",-1)))],ts={class:"contracts-section1"},ls={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},as={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"0.5rem",color:"#333"}},is=Ni((()=>u("i",{class:"fas fa-map-marker-alt","aria-hidden":"true"},null,-1))),ss=["onClick"],os=[Ni((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Ni((()=>u("div",{class:"meta"},[u("span",null,"Edit"),u("span",null,"Edit site details")],-1)))],ns=Ni((()=>u("hr",{class:"dropdown-divider"},null,-1))),rs=["onClick"],cs=[Ni((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),Ni((()=>u("div",{class:"meta"},[u("span",null,"Delete"),u("span",null,"Delete from list")],-1)))],ds=["onClick"],us={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"0.6rem"}},ms={class:"Genevieve-Hodges-Copy",style:{"font-size":"13px","margin-top":"0.5rem","font-weight":"500",color:"#333"}},ps={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},gs={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},ys={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"0.2rem"}},vs=Ni((()=>u("b",{style:{"font-weight":"500",color:"#222"}},"City:",-1))),fs={style:{color:"#333"}},hs={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"0.2rem"}},bs=Ni((()=>u("b",{style:{"font-weight":"500",color:"#222"}},"Site Manager Name:",-1))),ws={style:{color:"#333"}},xs=Ni((()=>u("img",{class:"light-image",src:X,alt:""},null,-1))),_s=Ni((()=>u("img",{class:"dark-image",src:Q,alt:""},null,-1))),Cs={key:0,class:"contracts-section1"},ks={key:1,class:"contract-wrapper"},Ss=I(e({__name:"ContractDetails",props:{contractId:{type:String},getContract:Function,colors:String},setup(e){const l=e,s=R();a();const o=U();t(!1);const m=t(""),p=t(""),C=t(0),S=t(0),D=t(!1);t([]);const I=t(!1),E=t(""),O=t(""),A=t("listview"),N=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),P=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),M=t([{id:"",sites:[],charge_rate:0,total_hours:"",name:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",color:"",over_rate:0,description:"",company:"",customer_company:""}]);t({id:null,name:"",address:"",postcode:"",latitude:null,longitude:null,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{}}),t([]);const V=(e=0)=>{m.value=e,D.value=!0},L=async()=>{E.value="",I.value=!0,console.log(l.contractId);const e=await s.get(`/v3/api/site/contract/${l.contractId}/`);M.value=e.data,console.log("All Sites:",e.data),O.value=e.data.customer_company,C.value=e.data.sites.length,I.value=!1,console.log("Sites List:",M.value),console.log("Contract Id :",O.value)},H=async()=>{try{I.value=!0,P.value.isSweetAlertOpen=!1;await s.delete(`/v3/api/site/${S.value}/`);L(),o.dismissAll(),o.success("Site Delete"),I.value=!1}catch(e){console.error("ok",e),I.value=!1}};i((()=>{L()}));const $=async()=>{N.value.isSweetAlertOpen=!1;try{const{data:e}=await s.post("/v3/api/contract/assign-site/",{contract:l.contractId,site:p.value});e&&(L(),o.success("Site added"))}catch(e){console.log(e),o.error("This Site is already assigned.")}};return(e,t)=>{const a=k,i=Y,s=W,o=Z,p=Ai,R=F,U=Ei,J=qt;return n(),v("div",ji,[E.value?b("",!0):(n(),v("div",Ti,[u("div",Pi,[u("div",Mi,[u("div",{style:y([{backgroundImage:`linear-gradient(-175deg, white 65%, ${M.value.color}30)`},{display:"flex","flex-direction":"column",padding:"1rem","border-radius":"1rem",border:"1px solid #eee"}])},[u("span",Vi,[x(a,{color:"primary",outlined:"",class:"mr-2",onClick:l.getContract,style:{width:"3rem","border-radius":"12px",padding:"2px 4px"}},{default:c((()=>[Ri])),_:1},8,["onClick"]),g(" Contract_"+z(l.contractId),1)]),u("h1",Li,z(M.value.name),1),u("div",Ui,[u("span",Hi,[g("Total Sites: "),u("span",$i,z(C.value<10&&C.value>0?"0"+C.value:C.value),1)]),Ji,Fi,qi,u("span",Ki,[g("Contact Person: "),u("span",Bi,z(M.value.incharge_name),1)])])],4)]),u("div",Gi,[x(a,{color:"primary",style:{"border-radius":"1.5rem",display:"flex","align-items":"center",gap:"0.5rem"},onClick:t[0]||(t[0]=()=>{m.value="",D.value=!D.value})},{default:c((()=>[Wi,g(" Add New Site ")])),_:1})])]),u("div",Yi,[u("div",Zi,[u("div",Xi,[u("ul",null,[u("li",{class:j(["listview"===A.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:t[1]||(t[1]=T(_((e=>A.value="listview"),["prevent"]),["space"])),onClick:t[2]||(t[2]=e=>A.value="listview")},Qi,32)],2),u("li",{class:j(["mapview"===A.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:t[3]||(t[3]=T(_((e=>A.value="mapview"),["prevent"]),["space"])),onClick:t[4]||(t[4]=e=>A.value="mapview")},es,32)],2)])])]),d(u("div",ts,[I.value?(n(),r(i,{key:0})):b("",!0),(n(!0),v(f,null,h(M.value.sites,((e,t)=>(n(),v("div",{class:"contracts-section",key:e.id},[u("div",{class:"contracts-list",style:y({backgroundImage:`linear-gradient(-175deg, white 40%, ${e.color}45)`})},[u("div",ls,[u("span",as,[is,g(z(e.postcode),1)]),x(s,{style:{position:"relative"},class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>V(e.id)},os,8,ss),ns,u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return l=e.id,S.value=l,void(P.value={title:"Are you sure?",subtitle:"You will not be able to recover this site!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l}},cs,8,rs)])),_:2},1024)]),u("div",{class:"",style:{display:"flex","flex-direction":"column",gap:"0.5rem"},onClick:t=>E.value=e.id},[u("div",us,[u("span",ms,z(e.name),1)]),u("div",ps,[u("span",gs,z(e.address),1)]),u("div",ys,[vs,u("span",fs,z(e.city),1)]),u("div",hs,[bs,u("span",ws,z(e.inchargeName),1)])],8,ds)],4)])))),128)),M.value.sites&&0===M.value.sites.length?(n(),r(o,{key:1,title:"No Sites is added for this Contract.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n\t\t\t\t\t\tsearch terms you've entered. Please try different search terms or\n\t\t\t\t\t\tcriteria.",larger:""},{image:c((()=>[xs,_s])),_:1})):b("",!0)],512),[[w,"listview"==A.value]]),"mapview"==A.value?(n(),v("div",Cs,[x(p,{sites:M.value.sites,companyId:O.value},null,8,["sites","companyId"])])):b("",!0),P.value.isSweetAlertOpen?(n(),r(R,{key:1,isSweetAlertOpen:P.value.isSweetAlertOpen,title:P.value.title,subtitle:P.value.subtitle,btntext:P.value.btntext,onConfirm:H,onCancel:()=>P.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0),N.value.isSweetAlertOpen?(n(),r(R,{key:2,isSweetAlertOpen:N.value.isSweetAlertOpen,title:N.value.title,subtitle:N.value.subtitle,btntext:N.value.btntext,onConfirm:$,onCancel:()=>N.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0)])])),E.value?(n(),v("div",ks,[x(U,{getSites:L,siteID:E.value,editSiteModal:V,siteLength:C.value},null,8,["siteID","siteLength"])])):b("",!0),D.value?(n(),r(J,{key:2,contractId:l.contractId,EditSiteID:m.value,"onUpdate:modalHandler":t[5]||(t[5]=()=>{D.value=!D.value}),AddSiteModalOpen:D.value,"onUpdate:OnSuccess":L},null,8,["contractId","EditSiteID","AddSiteModalOpen"])):b("",!0)])}}}),[["__scopeId","data-v-ca209147"]]),Ds=e=>(S("data-v-b338ead2"),e=e(),D(),e),Is={class:"contract-wrapper",style:{"margin-top":"-1.5rem"}},zs={key:0,style:{display:"flex","flex-direction":"column",gap:"1rem","margin-top":"3rem"}},Es={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},Os={class:"",style:{display:"flex","align-items":"center",gap:"0.7rem"}},As=Ds((()=>u("h3",{style:{"font-size":"1.4rem","font-weight":"500"}},"Contract",-1))),Ns={style:{padding:"0.4rem 0.5rem","border-radius":"0.8rem",background:"#000",color:"#fff","font-size":"1.1rem"}},js={class:"header-right"},Ts=Ds((()=>u("i",{class:"iconify","data-icon":"feather:plus","aria-hidden":"true"},null,-1))),Ps={class:"contracts-section1"},Ms={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},Vs={style:{"font-size":"1rem","font-weight":"500",display:"flex","align-items":"center",gap:"0.4rem",color:"#111"}},Rs=["src"],Ls=["onClick"],Us=[Ds((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Ds((()=>u("div",{class:"meta"},[u("span",null,"Edit"),u("span",null,"Edit contract details")],-1)))],Hs=Ds((()=>u("hr",{class:"dropdown-divider"},null,-1))),$s=["onClick"],Js=[Ds((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),Ds((()=>u("div",{class:"meta"},[u("span",null,"Delete"),u("span",null,"Delete from list")],-1)))],Fs={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},qs={style:{"font-size":"1rem","font-weight":"500",display:"flex","align-items":"center",gap:"0.4rem",color:"#444"}},Ks=["onClick"],Bs={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},Gs={class:"Genevieve-Hodges-Copy",style:{"font-size":"13px","margin-top":"0.5rem","font-weight":"400",color:"#666"}},Ws=Ds((()=>u("b",{style:{"font-weight":"500"}},"Total Hours:",-1))),Ys={class:"Genevieve-Hodges-Copy",style:{"font-size":"13px","margin-top":"0.5rem","font-weight":"400",color:"#666"}},Zs=Ds((()=>u("b",{style:{"font-weight":"500"}},"Total Sites:",-1))),Xs={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},Qs={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},eo=Ds((()=>u("b",{style:{"font-weight":"500"}},"Change Rate:",-1))),to={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},lo=Ds((()=>u("b",{style:{"font-weight":"500"}},"Overtime Rate:",-1))),ao={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"1rem"}},io=Ds((()=>u("b",{style:{"font-weight":"500",color:"#666"}},"From Date:",-1))),so=Ds((()=>u("b",{style:{"font-weight":"500",color:"#666"}},"End Date:",-1))),oo=Ds((()=>u("img",{class:"light-image",src:X,alt:""},null,-1))),no=Ds((()=>u("img",{class:"dark-image",src:Q,alt:""},null,-1))),ro={key:1},co={style:{"margin-top":"0.5rem"}},uo=I(e({__name:"CompanyContract",props:{customerCompanyId:String,companyLogo:null,companyName:String},setup(e){const l=e,s=R(),o=a(),d=U(),m=t(!1),p=t(""),w=t(0),_=t(0),C=t(!1),S=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),D=t("");t(!1);const I=t(""),E=t([{id:"",charge_rate:0,total_hours:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",over_rate:0,description:"",color:"",company:0,customer_company:0,name:""}]),O=(e=0)=>{p.value=e,m.value=!0},A=async()=>{C.value=!0,D.value="";const e=await s.get(`/v3/api/contract/customer-company/${l.customerCompanyId||o.params.id}/`);E.value=e.data,w.value=e.data.length,C.value=!1},N=async()=>{try{S.value.isSweetAlertOpen=!1;await s.delete(`/v3/api/contract/${_.value}/`,{});A(),d.dismissAll(),d.success("Contract Delete")}catch(e){console.error("ok",e)}};return M(l,((e,t)=>{A()})),i((()=>{A()})),(e,t)=>{const a=k,i=Y,s=W,o=Z,d=F,j=Ss,T=Ye;return n(),v("div",Is,[D.value?b("",!0):(n(),v("div",zs,[u("div",Es,[u("div",Os,[As,u("span",Ns,z(w.value<10&&w.value>0?"0"+w.value:w.value),1)]),u("div",js,[x(a,{color:"primary",style:{"border-radius":"1.5rem",display:"flex","align-items":"center",gap:"0.5rem"},onClick:O},{default:c((()=>[Ts,g(" Add New Contract ")])),_:1})])]),u("div",Ps,[C.value?(n(),r(i,{key:0})):b("",!0),(n(!0),v(f,null,h(E.value,((e,t)=>(n(),v("div",{class:"contracts-section",key:e.id},[u("div",{class:"contracts-list",style:y({backgroundImage:`linear-gradient(-175deg, white 60%, ${e.color}30)`})},[u("div",Ms,[u("span",Vs,[u("img",{src:l.companyLogo?l.companyLogo:"/demo/placeholder.jpg",alt:"",style:{position:"relative",width:"3rem",height:"3rem","border-radius":"50%",border:"2px solid #25b190"}},null,8,Rs),g(" "+z(l.companyName),1)]),x(s,{style:{position:"relative"},class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>O(e.id)},Us,8,Ls),Hs,u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return l=e.id,_.value=l,void(S.value={title:"Are you sure?",subtitle:"You will not be able to recover this contract!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l}},Js,8,$s)])),_:2},1024)]),u("div",Fs,[u("span",qs,z(e.name),1)]),u("div",{class:"",style:{display:"flex","flex-direction":"column",gap:"0.8rem",color:"#444"},onClick:t=>D.value=e.id},[u("div",Bs,[u("span",Gs,[Ws,g(" "+z(e.total_hours)+" Hours",1)]),u("span",Ys,[Zs,u("span",{style:y([{backgroundImage:`url('${e.color}')`},{"margin-left":"0.3rem",padding:"0.3rem 0.6rem","border-radius":"0.6rem",background:"#444",color:"#fff","font-size":"1rem"}])},z(e.sitesCount),5)])]),u("div",Xs,[u("span",Qs,[eo,g(" "+z(e.charge_rate)+" (£)",1)]),u("span",to,[lo,g(" "+z(e.over_rate)+" (£)",1)])]),u("div",ao,[u("span",null,[io,g(" "+z(e.start_date),1)]),u("span",null,[so,g(" "+z(e.end_date),1)])])],8,Ks)],4)])))),128)),0==E.value.length?(n(),r(o,{key:1,title:"No Contract is added for this Business.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n\t\t\t\t\t\tsearch terms you've entered. Please try different search terms or\n\t\t\t\t\t\tcriteria.",larger:""},{image:c((()=>[oo,no])),_:1})):b("",!0)]),S.value.isSweetAlertOpen?(n(),r(d,{key:0,isSweetAlertOpen:S.value.isSweetAlertOpen,title:S.value.title,subtitle:S.value.subtitle,btntext:S.value.btntext,onConfirm:N,onCancel:()=>S.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0)])),D.value?(n(),v("div",ro,[u("div",co,[x(j,{contractId:D.value,getContract:A,colors:E.value.color,customerCompanyId:I.value},null,8,["contractId","colors","customerCompanyId"])])])):b("",!0),m.value?(n(),r(T,{key:2,id:p.value,customerCompanyId:l.customerCompanyId,openCustomCompany:m.value,"onUpdate:modalHandler":t[0]||(t[0]=e=>m.value=e),"onUpdate:OnSuccess":A},null,8,["id","customerCompanyId","openCustomCompany"])):b("",!0)])}}}),[["__scopeId","data-v-b338ead2"]]);export{uo as _};
