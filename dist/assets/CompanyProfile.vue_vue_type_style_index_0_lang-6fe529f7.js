import{_ as e}from"./EditCompany.vue_vue_type_script_setup_true_lang-b1b6abc1.js";import{_ as t}from"./VTabs.vue_vue_type_script_setup_true_lang-bd157e1e.js";import{_ as l}from"./TeamMembaresNetwork.vue_vue_type_style_index_0_lang-dd9dd860.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import{e as i,r as s,o,v as n,F as r,z as c,A as d,R as u,l as p,S as m,y,x as v,O as g,B as f,I as h,C as x,a6 as b,P as _,Q as w,N as k,H as C,J as T,w as q,G as D,a3 as I,j as z,V as A,W as j,s as O,M as S,Z as M}from"./index-a3511ab8.js";import{_ as V}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as R}from"./VControl-f6dba4dd.js";import{_ as E}from"./VRadio.vue_vue_type_style_index_0_lang-00d47e80.js";import{u as N}from"./useAPI-2f913358.js";import{u as U}from"./useNotyf-bee6672a.js";import{u as L}from"./company-ca9a809c.js";import{_ as $}from"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import{_ as Q}from"./VTextarea.vue_vue_type_script_setup_true_lang-e1d809a1.js";import{_ as F}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{_ as P}from"./VIconButton-87810f23.js";import{_ as B}from"./VFilePond.vue_vue_type_script_lang-5b28d21f.js";import{a as H}from"./useSupportElement-ec851bb5.js";import{_ as W}from"./SweetAlert.vue_vue_type_style_index_0_lang-776f3a3f.js";import{_ as Y}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{_ as G}from"./VFlex.vue_vue_type_style_index_0_lang-2a70d1e0.js";import{_ as K}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-ab5188b6.js";import{_ as J}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-66b5c7cb.js";import{_ as Z}from"./VFlexItem.vue_vue_type_style_index_0_lang-141a6e18.js";import{_ as X}from"./VBlock.vue_vue_type_style_index_0_lang-63cb9f62.js";import{_ as ee}from"./VDropdown.vue_vue_type_style_index_0_lang-dab44eb0.js";import{_ as te,a as le}from"./search-4-dark-2b5b440c.js";import{_ as ae}from"./VIconWrap.vue_vue_type_style_index_0_lang-065b703e.js";import{_ as ie}from"./VPeity.vue_vue_type_script_setup_true_lang-32b39d52.js";import{A as se}from"./vue3-apexcharts.common-763b2026.js";import{u as oe}from"./useThemeColors-9cb1eefd.js";const ne={class:"modal-form columns is-multiline"},re={class:"field column is-12 mb-0"},ce=d("label",null,"Questoin Title: *",-1),de={class:"control"},ue={class:"field column is-12 mb-0"},pe=d("label",null,"Answer type: *",-1),me={key:0,class:"field column is-12 mb-0"},ye=d("label",null,"Correct Answer: *",-1),ve={class:"control"},ge=i({__name:"WorkerQuestion",props:{QuestionModalOpen:{type:Boolean},type:{},industryID:{},questionId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,i=L(),b=s(!1),_=U(),w=N(),k=s({id:0,title:"",type:"CheckBox",correctAnswer:"",questionFor:"",created_at:"",arezCompany:0,industry:0}),C=()=>{t("update:modalHandler",!1)},T=async()=>{try{const e={title:k.value.title,type:k.value.type,correctAnswer:k.value.correctAnswer,questionFor:l.type,arezCompany:i.loggedCompany.id,industry:l.industryID};if(l.questionId){const t=await w.patch(`/v3/api/partner/questions/${l.questionId}/`,e);console.log("question",t.data),_.success("Question updated succesfuly.")}else{const t=await w.post("/v3/api/partner/questions/",e);console.log("question",t.data),_.success("Question added succesfuly.")}t("update:OnSuccess",null)}catch(e){console.log(e)}};return o((()=>{l.questionId&&(async()=>{try{const e=await w.get(`/v3/api/partner/questions/${l.questionId}/`);k.value=e.data}catch(e){console.log(e)}})()})),(e,t)=>{const i=E,s=R,o=V,_=x,w=a;return n(),r(w,{is:"form",open:l.QuestionModalOpen,title:"Question",actions:"right",onSubmit:h(T,["prevent"]),onClose:C},{content:c((()=>[d("div",ne,[d("div",re,[ce,d("div",de,[u(d("input",{type:"text",name:"title","onUpdate:modelValue":t[0]||(t[0]=e=>p(k).title=e),class:"input is-primary-focus",placeholder:"Question Title"},null,512),[[m,p(k).title]])])]),d("div",ue,[pe,y(o,{class:"is-flex"},{default:c((()=>[y(s,{raw:"",subcontrol:""},{default:c((()=>[y(i,{modelValue:p(k).type,"onUpdate:modelValue":t[1]||(t[1]=e=>p(k).type=e),value:"CheckBox",label:"Choice",color:"primary"},null,8,["modelValue"])])),_:1}),y(s,{raw:"",subcontrol:""},{default:c((()=>[y(i,{modelValue:p(k).type,"onUpdate:modelValue":t[2]||(t[2]=e=>p(k).type=e),value:"Input",label:"Text",color:"info"},null,8,["modelValue"])])),_:1})])),_:1})]),"CheckBox"==p(k).type?(n(),v("div",me,[ye,d("div",ve,[y(o,{class:"is-flex"},{default:c((()=>[y(s,{raw:"",subcontrol:""},{default:c((()=>[y(i,{modelValue:p(k).correctAnswer,"onUpdate:modelValue":t[3]||(t[3]=e=>p(k).correctAnswer=e),value:"true",label:"Yes",color:"primary"},null,8,["modelValue"])])),_:1}),y(s,{raw:"",subcontrol:""},{default:c((()=>[y(i,{modelValue:p(k).correctAnswer,"onUpdate:modelValue":t[4]||(t[4]=e=>p(k).correctAnswer=e),value:"false",label:"NO",color:"info"},null,8,["modelValue"])])),_:1})])),_:1})])])):g("",!0)])])),action:c((()=>[y(_,{type:"submit",color:"primary",loading:p(b),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),fe=b("elements",(()=>{const e=N(),t=s({url:"",file:"",title:""}),l=s(!1),a=s(!1),i=s([{id:"",title:"",icon:""}]),o=()=>{t.url=null,t.file=null,t.title=null};return{setIcon:async function(e){const a=i.value.find((t=>t.id==e.id));a?(t.value={url:a.icon,title:a.title},l.value=!1):console.error("Icon not found in template icons:",e)},loadIcons:async function(){a.value=!0;try{const t=await e.get("/v3/api/template-icons/");i.value=t.data,console.log("icons",i.value)}finally{a.value=!1}},openTemplateModal:()=>{l.value=!0},closeTemplateModal:()=>{l.value=!1,o()},clear:o,isOpenTemplateModal:l,templateIcons:i,loading:a,selectedIcon:t}})),he={style:{"z-index":"10000"}},xe={class:"modal-form columns is-multiline"},be={class:"field column is-12 mb-0"},_e={class:"indutryOptions"},we=["onClick","src"],ke=i({__name:"TemplateIcons",setup(e){const t=fe(),l=s(!1),i=s("");return o((()=>{t.loadIcons()})),(e,s)=>{const o=R,r=V,u=x,m=a;return n(),v("div",he,[y(m,{open:p(t).isOpenTemplateModal,title:"Select icon",size:"big",actions:"right",onClose:p(t).closeTemplateModal},{content:c((()=>[d("div",xe,[d("div",be,[y(r,null,{default:c((()=>[y(o,null,{default:c((()=>[d("div",_e,[(n(!0),v(_,null,w(p(t).templateIcons,((e,l)=>(n(),v("div",{class:"options",key:l},[d("img",{onClick:()=>{p(t).setIcon(e),i.value=e.id},class:k(p(i)==e.id?"cus-img":""),src:e.icon},null,10,we),d("p",null,C(e.title.length<8?e.title:`${e.title.slice(0,8)}... `),1)])))),128))])])),_:1})])),_:1}),y(r,{id:"interests",class:"p-0",label:""})])])])),action:c((()=>[y(u,{color:"primary",style:{display:"none"},loading:p(l),raised:""},{default:c((()=>[f(" Select")])),_:1},8,["loading"])])),cancel:c((()=>[y(u,{style:{display:"none"},onClick:p(t).closeTemplateModal,raised:""},{default:c((()=>[f("Close")])),_:1},8,["onClick"])])),_:1},8,["open","onClose"])])}}}),Ce=T(ke,[["__scopeId","data-v-cf66b438"]]),Te={class:"modal-form columns is-multiline cu-all-input"},qe={class:"field column is-12 mb-0",style:{display:"flex","justify-content":"center"}},De={class:"field cu-align-center"},Ie=d("label",{class:"light-weight"},"Icon:",-1),ze=d("i",{style:{"font-size":"16px","font-weight":"500","margin-top":"5px"},"aria-hidden":"true",class:"iconify sidebar-svg","data-icon":"feather-plus"},null,-1),Ae=[ze],je={class:"control is-flex is-justify-content-center"},Oe=["src"],Se={key:2},Me={class:"field column is-12 mb-0"},Ve=d("label",{class:"light-weight"},"Document Title: *",-1),Re={class:"control"},Ee={class:"column is-12"},Ne={class:"columns mb-0"},Ue={class:"field column is-12 mb-0"},Le=d("label",{class:"light-weight"},"Subtitle:",-1),$e={class:"field column is-12 mb-0"},Qe={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},Fe={class:"field cu-align-center"},Pe=d("label",{class:"light-weight"},"Document level:",-1),Be=d("i",{style:{"font-size":"18px","font-weight":"500"},class:"iconify cu-pointer mt-1 ml-2","data-icon":"mingcute:question-fill"},null,-1),He=[Be],We={key:0,class:"field column is-12 mb-0"},Ye={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},Ge=d("label",{class:"light-weight"},"Expiry Date Required:",-1),Ke={key:1,class:"field column is-12 mb-0"},Je=d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"12px"}},[d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Mandatory: "),f(" Mandatory document uploads are required during worker signup. "),d("br"),d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Optional: "),f(" Documents may be uploaded after the worker's successful signup process. ")])],-1),Ze=[Je],Xe=i({__name:"SupplierTemplateDocModal",props:{CompanyDocModalOpen:{type:Boolean},industry:{},docID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,i=L(),b=s("update"),w=s(!0),k=s(!1),C=fe(),T=U(),z=N(),A=s({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0,icon_url:"",template:0}),j=()=>{t("update:modalHandler",!1)},O=async()=>{try{console.log("tempppp",l.industry),k.value=!0,A.value.icon_url=C.selectedIcon.url;const e=H(A.value,["icon"]);if(l.docID){await z.patch(`/v3/api/partner/company_document/${l.docID}/`,e)}else{e.append("industry",l.industry),e.append("arezCompany",i.loggedCompany.id);await z.post("/v3/api/partner/company_document/",e)}t("update:OnSuccess",null),k.value=!1}catch(e){console.error(e),T.error("error accur ")}finally{k.value=!1}},S=(e,t)=>{const l=t.file;l&&(console.log(l),A.value={...A.value,icon:l})},M=(e,t)=>{A.value={...A.value,icon:null}};return q(C,((e,t)=>{C.selectedIcon.url&&(A.value.icon=C.selectedIcon.url,console.log("add company",A.value),w.value=!1)})),o((()=>{l.docID&&((async e=>{k.value=!0;const t=await z.get(`v3/api/partner/company_document/${e}/`,{});A.value=t.data,console.log(t.data),k.value=!1})(l.docID),w.value=!1)})),(e,t)=>{const i=B,s=P,o=F,T=V,q=Q,z=R,E=$,N=x,U=a,L=Ce;return n(),v(_,null,[y(U,{is:"form",open:l.CompanyDocModalOpen,title:"Compliance Document",actions:"right",onSubmit:h(O,["prevent"]),onClose:j},{content:c((()=>[d("div",Te,[d("div",qe,[y(T,{class:"column is-6"},{default:c((()=>[d("div",De,[Ie,d("a",{class:"search-link",tabindex:"0",role:"button",onClick:t[0]||(t[0]=()=>{p(C).openTemplateModal()})},Ae)]),d("div",je,[y(o,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:c((()=>[p(w)?(n(),r(i,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='fas fa-cloud-upload-alt' style='font-size:27px'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onAddfile:S,onRemovefile:M})):(n(),v("img",{key:0,class:"avatar",src:null==p(A).icon?"/images/avatars/placeholder.jpg":p(A).icon,alt:""},null,8,Oe)),"update"==p(b)?(n(),v("span",Se,[p(w)?(n(),r(s,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:t[3]||(t[3]=D(h((e=>w.value=!1),["prevent"]),["space"])),onClick:t[4]||(t[4]=e=>w.value=!1)})):(n(),r(s,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:t[1]||(t[1]=D(h((e=>w.value=!0),["prevent"]),["space"])),onClick:t[2]||(t[2]=e=>w.value=!0)}))])):g("",!0)])),_:1})])])),_:1})]),d("div",Me,[Ve,d("div",Re,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[5]||(t[5]=e=>p(A).documentTitle=e),required:"",class:"input is-primary-focus",placeholder:"Title"},null,512),[[m,p(A).documentTitle]])])]),d("div",Ee,[d("div",Ne,[d("div",Ue,[Le,y(z,null,{default:c((()=>[y(q,{style:{"border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},modelValue:p(A).subTitle,"onUpdate:modelValue":t[6]||(t[6]=e=>p(A).subTitle=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])])]),d("div",$e,[d("div",Qe,[d("div",Fe,[Pe,d("a",{class:"search-link light-text",tabindex:"0",role:"button",onClick:t[7]||(t[7]=(...t)=>e.toggleCaption&&e.toggleCaption(...t))},He)]),y(z,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(E,{style:I([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_1"===p(A).step?"#2aac8e":"white",color:"step_1"===p(A).step?"white":""}]),label:"Mandatory",rounded:"",onClick:t[8]||(t[8]=()=>{p(A).step="step_1"})},null,8,["style"]),y(E,{style:I([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_2"===p(A).step?"#2aac8e":"white",color:"step_2"===p(A).step?"white":""}]),label:"Optional",rounded:"",onClick:t[9]||(t[9]=()=>{p(A).step="step_2"})},null,8,["style"])])),_:1})])]),e.showCaption?g("",!0):(n(),v("div",We,[d("div",Ye,[Ge,y(z,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(E,{style:I([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!1===p(A).expiryDateRequired?"#2aac8e":"white",color:!1===p(A).expiryDateRequired?"white":""}]),label:"No",rounded:"",onClick:t[10]||(t[10]=()=>{p(A).expiryDateRequired=!1})},null,8,["style"]),y(E,{style:I([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!0===p(A).expiryDateRequired?"#2aac8e":"white",color:!0===p(A).expiryDateRequired?"white":""}]),label:"Yes",rounded:"",onClick:t[11]||(t[11]=()=>{p(A).expiryDateRequired=!0})},null,8,["style"])])),_:1})])])),e.showCaption?(n(),v("div",Ke,Ze)):g("",!0)])])),action:c((()=>[y(N,{type:"submit",color:"primary",light:"",loading:p(k),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"]),y(L)],64)}}}),et=d("h1",{class:"cus-stat-heading mb-3"}," Selecte industry to view related compliance template ",-1),tt={class:"tabs-inner"},lt={class:"tabs is-boxed"},at=["id"],it=["onClick"],st={key:0,style:{"background-color":"transparent",border:"none"},class:"list-widget is-straight mt-0 mb-4"},ot={class:"widget-head"},nt={class:"dark-inverted"},rt={class:"profile-body"},ct={class:"tabs-wrapper is-flex space-between"},dt={class:"tabs-inner"},ut={class:"tabs"},pt=["onClick"],mt=["onClick"],yt={class:"is-flex cus-align-center"},vt={key:2,style:{display:"flex",gap:"16px","align-items":"center"}},gt=["onClick"],ft=["src"],ht={class:"meta"},xt={key:0,class:"tab-content is-active"},bt={class:"cus-stat-heading"},_t={class:"light-text"},wt={class:"mt-2 mb-2",style:{display:"flex","flex-wrap":"wrap"}},kt=["onClick"],Ct=d("div",{class:"icon"},[d("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1),Tt=d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Info")],-1),qt=[Ct,Tt],Dt=d("hr",{class:"dropdown-divider"},null,-1),It=["onClick"],zt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),At=d("div",{class:"meta"},[d("span",null,"Archive"),d("span",null,"Remove from list")],-1),jt=[zt,At],Ot=d("a",{href:"#"},null,-1),St={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},Mt={class:"mt-1",href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Vt={class:"cus-align-center mt-2"},Rt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Et={style:{color:"var(--light-text)","font-size":"12px"}},Nt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Ut={style:{color:"var(--light-text)","font-size":"12px"}},Lt=d("hr",null,null,-1),$t=d("h2",{class:"cus-stat-heading"},"(Archived)",-1),Qt={style:{display:"flex","flex-wrap":"wrap"}},Ft=["onClick"],Pt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),Bt=d("div",{class:"meta"},[d("span",null,"Un-Archive"),d("span",null,"Remove from list")],-1),Ht=[Pt,Bt],Wt=d("a",{href:"#"},null,-1),Yt={class:"is-flex mb-1",style:{display:"flex","justify-content":"space-between",width:"100%"}},Gt={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Kt={class:"cus-align-center mt-2"},Jt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Zt={style:{color:"var(--light-text)","font-size":"12px"}},Xt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},el={style:{color:"var(--light-text)","font-size":"12px"}},tl={key:0},ll=d("p",{class:""},"No document added for this industry",-1),al=[ll],il={key:1,class:"tab-content is-active"},sl={style:{display:"flex","flex-wrap":"wrap"}},ol=["onClick"],nl=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),rl=d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit question")],-1),cl=[nl,rl],dl=["onClick"],ul=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),pl=d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete question")],-1),ml=[ul,pl],yl=d("a",{href:"#"},null,-1),vl={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},gl={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},fl={key:0,class:"is-flex"},hl=d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ",-1),xl={key:1},bl=[d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ------ ",-1)],_l={key:0},wl=[d("p",{class:""},"No question added for this industry",-1)],kl={class:"widget-head"},Cl=d("h3",{class:"dark-inverted"},"Industry",-1),Tl={class:"tile-grid-item"},ql={class:"tile-grid-item-inner placeload-wrap is-flex"},Dl=d("img",{class:"light-image",src:te,alt:""},null,-1),Il=d("img",{class:"dark-image",src:le,alt:""},null,-1),zl={class:"cus-justify-center"},Al=d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1),jl={class:"modal-form columns is-multiline"},Ol=d("div",{class:"field column is-12 mb-0"},[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"14px"}},[d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: "),f(" Introducing a new template document to our industry without affecting existing files. This action adds new documents and removes all other current ones. "),d("br")])])],-1),Sl={class:"field column is-12 mb-0"},Ml=d("label",null,[f("To assign, type: "),d("span",{style:{"font-weight":"500"}},"Assign This Template"),f(" below:")],-1),Vl={class:"control"},Rl=i({__name:"PertnerCompanyDocuments",props:{users:{default:()=>[]},id:{},companyInfo:{}},setup(e){const t=e,l=L();s(!1);const i=s(0),h=s(!1),b=N(),T=U();s(!1),s(!1),s(!1),s("update");const q=s(0);s({});const D=s(!1),A=s(0),j=s(!0),O=s(!1),S=s(""),M=s(0),V=s(0),R=s(!1),E=s(""),$=s(0),Q=s(!1),P=s(0),B=s(0),H=s(0),te=s([{industry_id:"",industry_name:"",industry_logo:"",doc_count:"",docs:[{id:0,documentTitle:"",icon:"",subTitle:"",arezCompany:"",industry:"",step:"",archived:!1,expiryDateRequired:!1}],questions:[{id:0,title:"Fifth Question",type:"Input",correctAnswer:"",questionFor:"partner",created_at:"2024-03-19T10:45:58.093663Z",arezCompany:0,industry:0}]}]),le=s([{id:1,title:"Limited Screening",subtitle:"Limited screening documents uploads are required during worker signup",step:"step_1"},{id:2,title:"Full Screening",subtitle:"Full screening documents may be uploaded after the worker's successful signup process",step:"step_2"}]),ae=s({title:"",alertIcon:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});s({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0});const ie=s([{id:0,title:"",created_at:"",doc_count:0,industry:{id:0,name:"",industryLogo:""}}]),se=async()=>{try{Q.value=!1,R.value=!1,h.value=!0;const e=await b.get(`v3/api/partner/company_document/${t.id}/get_documents_of_a_company/`,{});Q.value=!1;const a=e.data.map((e=>{const t=l.loggedCompany.industry.find((t=>t.id===e.industry_id));return{...e,industry_logo:t?.industryLogo||null,industry_name:t?.name||e.industry_name,activeTab:t?.id==B.value?"ques":"docs"}}));l.loggedCompany.industry.forEach((t=>{e.data.some((e=>e.industry_id===t.id))||a.push({industry_id:t.id,industry_name:t.name,industry_logo:t.industryLogo,doc_count:0,docs:[],activeTab:"docs"})})),console.log("result array",l.loggedCompany.industry),te.value=a,H.value=te.value.length>0?te.value[0].industry_id:0,h.value=!1,setTimeout((()=>{window.location.hash=M.value}),1e3)}catch(e){console.error("ok",e)}},oe=(e,t)=>{q.value=e,j.value=t,console.log("the id "+e),A.value=3,ae.value={title:"Archive this document?",alertIcon:"lnir lnir-alarm-2",subtitle:"This document will be archived, and it will be deleted  permanently after 30 days",btntext:"Yes, Archive it",isSweetAlertOpen:!0}},ne=()=>{1==A.value?ce():2==A.value?re():3==A.value&&de()},re=async()=>{try{if("Assign This Template"!=S.value)return void T.error("Invalid Captcha Text");D.value=!0,ae.value.isSweetAlertOpen=!1;const e=await b.post("/v3/api/partner/compliance/template/assign-template-to-company/",{company:t.id,template:i.value});O.value=!1,T.success(e.data),se()}catch(e){T.error("Server error while assigning the template")}finally{D.value=!1,S.value=""}},ce=async()=>{try{ae.value.isSweetAlertOpen=!1;await b.delete(`/v3/api/partner/company_document/${q.value}/`,{});se(),T.dismissAll(),T.success("Delete company document, Company Document")}catch(e){console.error("ok",e)}},de=async()=>{try{ae.value.isSweetAlertOpen=!1;await b.patch(`/v3/api/partner/company_document/${q.value}/archive-company-document/`,{archived:j.value});se(),T.warning("Document archived")}catch(e){console.log(e)}};return o((()=>{se(),(async()=>{try{const e=await b.get(`/v3/api/partner/compliance/template/get-company-indutries-tmeplates/${t.id}/`);ie.value=e.data,console.log(e.data)}catch(e){console.log(e)}})()})),(e,t)=>{const l=x,s=ee,o=F,h=X,A=Z,j=J,N=K,U=G,L=Y,ce=W,de=a,ue=Xe,pe=Ce,me=ge;return n(),v(_,null,[y(U,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap",styl:"just"},{default:c((()=>[et,d("div",tt,[d("div",lt,[d("ul",null,[(n(!0),v(_,null,w(p(te),((e,t)=>(n(),v("li",{key:t,id:e.industry_id,class:k([e.industry_id===p(H)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:t=>{return l=e.industry_id,H.value=0,void(H.value=l);var l}},[d("span",null,C(e.industry_name),1)],8,it)],10,at)))),128))])])]),0!=p(te).length?(n(!0),v(_,{key:0},w(p(te),((t,a)=>(n(),r(A,{key:a,id:t.industry_id},{default:c((()=>[e.GetLoadinG||t.industry_id!=p(H)?g("",!0):(n(),v("div",st,[d("div",ot,[d("h3",nt,C(t.industry_name),1)]),d("div",rt,[d("div",ct,[d("div",dt,[d("div",ut,[d("ul",null,[d("li",{class:k(["docs"===t.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{t.activeTab="docs",B.value=0}},[d("span",null,"Documents ("+C(t.doc_count)+")",1)],8,pt)],2),d("li",{class:k(["ques"===t.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{t.activeTab="ques",B.value=t.industry_id}},[d("span",null,"Questions ("+C(t.questions?t.questions.length:0)+")",1)],8,mt)],2)])])]),d("div",yt,["ques"==t.activeTab?(n(),r(l,{key:0,light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{E.value="partner",$.value=t.industry_id,Q.value=!0,P.value=0},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Question ")])),_:2},1032,["onClick"])):g("",!0),"docs"==t.activeTab?(n(),r(l,{key:1,class:"mr-4",light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{q.value=0,V.value=t.industry_id,R.value=!0,e.scrollToIndustry=t.industry_id},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Document ")])),_:2},1032,["onClick"])):g("",!0),"docs"==t.activeTab?(n(),v("div",vt,[y(s,{title:"Compliance Template",color:"primary",right:"",spaced:""},{content:c((()=>[(n(!0),v(_,null,w(p(ie),(e=>(n(),v("div",{key:e.id},[e.industry.id===t.industry_id?(n(),v("a",{key:0,onClick:()=>{i.value=e.id,M.value=t.industry_id,O.value=!0},class:"dropdown-item is-media"},[d("img",{class:"item-img",src:e.industry.industryLogo,alt:""},null,8,ft),d("div",ht,[d("span",null,C(e.title),1),d("span",null,C(e.industry.name)+" "+C(-e.doc_count?`(${e.doc_count})`:""),1)])],8,gt)):g("",!0)])))),128))])),_:2},1024)])):g("",!0)])])]),"docs"==t.activeTab?(n(),v("div",xt,[(n(!0),v(_,null,w(p(le),(l=>(n(),v("div",{key:l.id},[d("h2",bt,"("+C(l.title)+")",1),d("p",_t,C(l.subtitle),1),d("div",wt,[(n(!0),v(_,null,w(t.docs,((a,i)=>(n(),v("div",{key:a.id,class:""},[0==t.docs[i].archived&&t.docs[i].step==l.step?(n(),r(h,{key:0,center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px",border:"1px solid #89898930"}},{icon:c((()=>[y(o,{picture:a.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(s,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{q.value=a.id,R.value=!0,e.scrollToIndustry=t.industry_id}},qt,8,kt),Dt,d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(a.id,!0)},jt,8,It)])),_:2},1024)])),default:c((()=>[Ot,d("span",St,C(a.documentTitle),1),d("a",Mt,C(a.subTitle?a.subTitle.slice(0,190):"....")+" "+C(a.subTitle&&a.subTitle.length>190?"...":""),1),d("div",Vt,[d("a",Rt,[f("Expiry date: "),d("p",Et,C(a.expiryDateRequired?"Required":" Not required"),1)]),d("a",Nt,[f("Document level: "),d("p",Ut,C("step_1"==a.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))])])))),128)),Lt,$t,d("div",Qt,[(n(!0),v(_,null,w(t.docs,((e,l)=>(n(),v("div",{key:e.id,class:""},[1==t.docs[l].archived?(n(),r(h,{key:0,center:"",lighter:"",style:{margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px","background-color":"#fff",border:"1px solid rgba(110, 110, 110, 0.1)"}},{icon:c((()=>[y(o,{picture:e.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(s,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>oe(e.id,!1)},Ht,8,Ft)])),_:2},1024)])),default:c((()=>[Wt,d("span",Yt,C(e.documentTitle),1),d("a",Gt,C(e.subTitle.slice(0,190))+" "+C(e.subTitle.length>190?"...":""),1),d("div",Kt,[d("a",Jt,[f("Expiry date: "),d("p",Zt,C(e.expiryDateRequired?"Required":" Not required"),1)]),d("a",Xt,[f("Document level: "),d("p",el,C("step_1"==e.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))]),t.docs.length?g("",!0):(n(),v("div",tl,al))])):g("",!0),"ques"==t.activeTab?(n(),v("div",il,[d("div",sl,[(n(!0),v(_,null,w(t.questions,((e,l)=>(n(),v("div",{key:e.id,class:""},[y(h,{center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"400px","margin-left":"50px",border:"2px solid rgba(110, 110, 110, 0.247)"}},{action:c((()=>[y(s,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{E.value="worker",P.value=e.id,$.value=t.industry_id,Q.value=!0}},cl,8,ol),d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>(async e=>{try{await b.delete(`/v3/api/partner/questions/${e}/`),T.error("Question deleted successfuly"),se()}catch(t){console.log(t)}})(e.id)},ml,8,dl)])),_:2},1024)])),default:c((()=>[yl,d("span",vl,C(e.title.slice(0,36)),1),d("a",gl," Type: "+C(e.type),1),e.correctAnswer?(n(),v("div",fl,[hl,d("a",{style:I([{"font-size":"13px"},{color:"true"==e.correctAnswer?"var(--primary)":"var(--danger)"}])},C("true"==e.correctAnswer?"Yes":"No"),5)])):(n(),v("div",xl,bl))])),_:2},1024)])))),128))]),t.docs.length?g("",!0):(n(),v("div",_l,wl))])):g("",!0)]))])),_:2},1032,["id"])))),128)):g("",!0),e.GetLoadinG?(n(),r(U,{key:1,"jusitfy-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap"},{default:c((()=>[(n(),v(_,null,w([0,1,2],(e=>d("div",{class:"list-widget is-straight",key:e},[d("div",kl,[Cl,y(l,{color:"primary",icon:"fas fa-plus",rounded:"",style:{height:"27px","font-size":"10px"}},{default:c((()=>[f(" Document ")])),_:1})]),(n(),v(_,null,w(2,(e=>d("div",{key:e,class:"inner-list"},[d("div",Tl,[d("div",ql,[y(j,{size:"medium"}),y(N,{width:"80%","last-line-width":"60%",class:"mx-2"})])])]))),64))]))),64))])),_:1})):g("",!0),0==p(te).length?(n(),r(L,{key:2,title:"No Industry added to this company yet !",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n    search terms you've entered. Please try different search terms or\n    criteria.",larger:""},{image:c((()=>[Dl,Il])),_:1})):g("",!0)])),_:1}),p(ae).isSweetAlertOpen?(n(),r(ce,{key:0,isSweetAlertOpen:p(ae).isSweetAlertOpen,title:p(ae).title,subtitle:p(ae).subtitle,btntext:p(ae).btntext,alertIcon:p(ae).alertIcon,onConfirm:ne,onCancel:()=>p(ae).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","alertIcon","onCancel"])):g("",!0),y(de,{open:p(O),title:"Assign Template",actions:"right",onClose:t[1]||(t[1]=e=>O.value=!1)},{content:c((()=>[d("div",zl,[Al,d("div",jl,[Ol,d("div",Sl,[Ml,d("div",Vl,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>z(S)?S.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,p(S)]])])])])])])),cancel:c((()=>[y(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:c((()=>[f("Close")])),_:1})])),action:c((()=>[y(l,{type:"submit",onClick:re,color:"primary",loading:p(D),raised:""},{default:c((()=>[f("Assign it ")])),_:1},8,["loading"])])),_:1},8,["open"]),p(R)?(n(),r(ue,{key:1,docID:p(q),industry:p(V),CompanyDocModalOpen:p(R),"onUpdate:modalHandler":t[2]||(t[2]=()=>{R.value=!p(R)}),"onUpdate:OnSuccess":t[3]||(t[3]=()=>{se()})},null,8,["docID","industry","CompanyDocModalOpen"])):g("",!0),y(pe),p(Q)?(n(),r(me,{key:2,questionId:p(P),type:p(E),industryID:p($),QuestionModalOpen:p(Q),"onUpdate:modalHandler":t[4]||(t[4]=()=>{Q.value=!p(Q)}),"onUpdate:OnSuccess":se},null,8,["questionId","type","industryID","QuestionModalOpen"])):g("",!0)],64)}}}),El={class:"modal-form columns is-multiline cu-all-input"},Nl={class:"field column is-12 mb-0",style:{display:"flex","justify-content":"center"}},Ul={class:"field cu-align-center"},Ll=d("label",{class:"light-weight"},"Icon:",-1),$l=[d("i",{style:{"font-size":"16px","font-weight":"500","margin-top":"5px"},"aria-hidden":"true",class:"iconify sidebar-svg","data-icon":"feather-plus"},null,-1)],Ql={class:"control is-flex is-justify-content-center"},Fl=["src"],Pl={key:2},Bl={class:"field column is-12 mb-0"},Hl=d("label",{class:"light-weight"},"Document Title: *",-1),Wl={class:"control"},Yl={class:"column is-12"},Gl={class:"columns mb-0"},Kl={class:"field column is-12 mb-0"},Jl=d("label",{class:"light-weight"},"Subtitle:",-1),Zl={class:"field column is-12 mb-0"},Xl={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},ea=d("label",{class:"light-weight"},"Document level:",-1),ta=[d("i",{style:{"font-size":"18px","font-weight":"500"},class:"iconify cu-pointer mt-1 ml-2","data-icon":"mingcute:question-fill"},null,-1)],la={key:0,class:"field column is-12 mb-0"},aa={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},ia=d("label",{class:"light-weight"},"Expiry Date Required:",-1),sa={key:1,class:"field column is-12 mb-0"},oa=[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"12px"}},[d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Mandatory: "),f(" Mandatory document uploads are required during worker signup. "),d("br"),d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Optional: "),f(" Documents may be uploaded after the worker's successful signup process. ")])],-1)],na=i({__name:"WorkerTemplateDocModal",props:{CompanyDocModalOpen:{type:Boolean},industry:{},docID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,i=L(),b=s("update"),w=s(!0),k=s(!1),C=fe(),T=U(),z=N(),A=s(!1),j=s({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0,icon_url:"",template:0}),O=()=>{t("update:modalHandler",!1)},S=async()=>{try{console.log("tempppp",l.industry),k.value=!0,j.value.icon_url=C.selectedIcon.url;const e=H(j.value,["icon"]);if(l.docID){await z.patch(`/v3/api/company_document/${l.docID}/`,e)}else{e.append("industry",l.industry),e.append("arezCompany",i.loggedCompany.id);await z.post("/v3/api/company_document/",e)}t("update:OnSuccess",null),k.value=!1}catch(e){console.error(e),T.error("error accur ")}finally{k.value=!1}},M=(e,t)=>{const l=t.file;l&&(console.log(l),j.value={...j.value,icon:l})},E=(e,t)=>{j.value={...j.value,icon:null}};q(C,((e,t)=>{C.selectedIcon.url&&(j.value.icon=C.selectedIcon.url,console.log("add company",j.value),w.value=!1)}));const W=()=>{A.value=!A.value,console.log("calling")};return o((()=>{l.docID&&((async e=>{k.value=!0;const t=await z.get(`v3/api/company_document/${e}/`,{});j.value=t.data,console.log(t.data),k.value=!1})(l.docID),w.value=!1)})),(e,t)=>{const i=B,s=P,o=F,T=V,q=Q,z=R,N=$,U=x,L=a,H=Ce;return n(),v(_,null,[y(L,{is:"form",open:l.CompanyDocModalOpen,title:"Compliance Document",actions:"right",onSubmit:h(S,["prevent"]),onClose:O},{content:c((()=>[d("div",El,[d("div",Nl,[y(T,{class:"column is-6"},{default:c((()=>[d("div",Ul,[Ll,d("a",{class:"search-link",tabindex:"0",role:"button",onClick:t[0]||(t[0]=()=>{p(C).openTemplateModal()})},$l)]),d("div",Ql,[y(o,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:c((()=>[p(w)?(n(),r(i,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='fas fa-cloud-upload-alt' style='font-size:27px'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onAddfile:M,onRemovefile:E})):(n(),v("img",{key:0,class:"avatar",src:null==p(j).icon?"/images/avatars/placeholder.jpg":p(j).icon,alt:""},null,8,Fl)),"update"==p(b)?(n(),v("span",Pl,[p(w)?(n(),r(s,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:t[3]||(t[3]=D(h((e=>w.value=!1),["prevent"]),["space"])),onClick:t[4]||(t[4]=e=>w.value=!1)})):(n(),r(s,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:t[1]||(t[1]=D(h((e=>w.value=!0),["prevent"]),["space"])),onClick:t[2]||(t[2]=e=>w.value=!0)}))])):g("",!0)])),_:1})])])),_:1})]),d("div",Bl,[Hl,d("div",Wl,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[5]||(t[5]=e=>p(j).documentTitle=e),required:"",class:"input is-primary-focus",placeholder:"Title"},null,512),[[m,p(j).documentTitle]])])]),d("div",Yl,[d("div",Gl,[d("div",Kl,[Jl,y(z,null,{default:c((()=>[y(q,{style:{"border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},modelValue:p(j).subTitle,"onUpdate:modelValue":t[6]||(t[6]=e=>p(j).subTitle=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])])]),d("div",Zl,[d("div",Xl,[d("div",{class:"field cu-align-center"},[ea,d("a",{class:"search-link light-text",tabindex:"0",role:"button",onClick:W},ta)]),y(z,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(N,{style:I([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_1"===p(j).step?"#2aac8e":"white",color:"step_1"===p(j).step?"white":""}]),label:"Mandatory",rounded:"",onClick:t[7]||(t[7]=()=>{p(j).step="step_1"})},null,8,["style"]),y(N,{style:I([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_2"===p(j).step?"#2aac8e":"white",color:"step_2"===p(j).step?"white":""}]),label:"Optional",rounded:"",onClick:t[8]||(t[8]=()=>{p(j).step="step_2"})},null,8,["style"])])),_:1})])]),p(A)?g("",!0):(n(),v("div",la,[d("div",aa,[ia,y(z,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(N,{style:I([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!1===p(j).expiryDateRequired?"#2aac8e":"white",color:!1===p(j).expiryDateRequired?"white":""}]),label:"No",rounded:"",onClick:t[9]||(t[9]=()=>{p(j).expiryDateRequired=!1})},null,8,["style"]),y(N,{style:I([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!0===p(j).expiryDateRequired?"#2aac8e":"white",color:!0===p(j).expiryDateRequired?"white":""}]),label:"Yes",rounded:"",onClick:t[10]||(t[10]=()=>{p(j).expiryDateRequired=!0})},null,8,["style"])])),_:1})])])),p(A)?(n(),v("div",sa,oa)):g("",!0)])])),action:c((()=>[y(U,{type:"submit",color:"primary",light:"",loading:p(k),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"]),y(H)],64)}}}),ra=e=>(A("data-v-f29f1c24"),e=e(),j(),e),ca=ra((()=>d("h1",{class:"cus-stat-heading mb-3"}," Selecte industry to view related compliance template ",-1))),da={class:"tabs-inner"},ua={class:"tabs is-boxed"},pa=["id"],ma=["onClick"],ya={key:0,style:{"background-color":"transparent",border:"none"},class:"list-widget is-straight mt-0 mb-4"},va={class:"widget-head"},ga={class:"dark-inverted"},fa={class:"profile-body"},ha={class:"tabs-wrapper is-flex space-between"},xa={class:"tabs-inner"},ba={class:"tabs"},_a=["onClick"],wa=["onClick"],ka={class:"is-flex cus-align-center"},Ca={key:2,style:{display:"flex",gap:"16px","align-items":"center"}},Ta=["onClick"],qa=["src"],Da={class:"meta"},Ia={key:0,class:"tab-content is-active"},za={class:"cus-stat-heading"},Aa={class:"light-text"},ja={class:"mt-2 mb-2",style:{display:"flex","flex-wrap":"wrap"}},Oa=["onClick"],Sa=[ra((()=>d("div",{class:"icon"},[d("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1))),ra((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Info")],-1)))],Ma=ra((()=>d("hr",{class:"dropdown-divider"},null,-1))),Va=["onClick"],Ra=[ra((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),ra((()=>d("div",{class:"meta"},[d("span",null,"Archive"),d("span",null,"Remove from list")],-1)))],Ea=ra((()=>d("a",{href:"#"},null,-1))),Na={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},Ua={class:"mt-1",href:"#",style:{color:"var(--light-text)","font-size":"12px"}},La={class:"cus-align-center mt-2"},$a={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Qa={style:{color:"var(--light-text)","font-size":"12px"}},Fa={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Pa={style:{color:"var(--light-text)","font-size":"12px"}},Ba=ra((()=>d("hr",null,null,-1))),Ha=ra((()=>d("h2",{class:"cus-stat-heading"},"(Archived)",-1))),Wa={style:{display:"flex","flex-wrap":"wrap"}},Ya=["onClick"],Ga=[ra((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),ra((()=>d("div",{class:"meta"},[d("span",null,"Un-Archive"),d("span",null,"Remove from list")],-1)))],Ka=ra((()=>d("a",{href:"#"},null,-1))),Ja={class:"is-flex mb-1",style:{display:"flex","justify-content":"space-between",width:"100%"}},Za={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Xa={class:"cus-align-center mt-2"},ei={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ti={style:{color:"var(--light-text)","font-size":"12px"}},li={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ai={style:{color:"var(--light-text)","font-size":"12px"}},ii={key:0},si=[ra((()=>d("p",{class:""},"No document added for this industry",-1)))],oi={key:1,class:"tab-content is-active"},ni={style:{display:"flex","flex-wrap":"wrap"}},ri=["onClick"],ci=[ra((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),ra((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit question")],-1)))],di=["onClick"],ui=[ra((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),ra((()=>d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete question")],-1)))],pi=ra((()=>d("a",{href:"#"},null,-1))),mi={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},yi={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},vi={key:0,class:"is-flex"},gi=ra((()=>d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ",-1))),fi={key:1},hi=[ra((()=>d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ------ ",-1)))],xi={key:0},bi=[ra((()=>d("p",{class:""},"No question added for this industry",-1)))],_i={class:"widget-head"},wi=ra((()=>d("h3",{class:"dark-inverted"},"Industry",-1))),ki={class:"tile-grid-item"},Ci={class:"tile-grid-item-inner placeload-wrap is-flex"},Ti=ra((()=>d("img",{class:"light-image",src:te,alt:""},null,-1))),qi=ra((()=>d("img",{class:"dark-image",src:le,alt:""},null,-1))),Di={class:"cus-justify-center"},Ii=ra((()=>d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1))),zi={class:"modal-form columns is-multiline"},Ai=ra((()=>d("div",{class:"field column is-12 mb-0"},[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"14px"}},[d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: "),f(" Introducing a new template document to our industry without affecting existing files. This action adds new documents and removes all other current ones. "),d("br")])])],-1))),ji={class:"field column is-12 mb-0"},Oi=ra((()=>d("label",null,[f("To assign, type: "),d("span",{style:{"font-weight":"500"}},"Assign This Template"),f(" below:")],-1))),Si={class:"control"},Mi=T(i({__name:"CompanyDocuments",props:{users:{default:()=>[]},id:{},companyInfo:{}},setup(e){const t=e,l=L();s(!1);const i=s(!1),h=N(),b=U();s(!1);const T=s(0),q=s(!1),D=s(0),A=s(!0),j=s(!1),O=s(""),S=s(0),M=s(0),V=s(!1),R=s(""),E=s(0),$=s(!1),Q=s(0),P=s(0),B=s(0),H=s(0),te=s(0),le=s([{id:0,industry_id:"",industry_name:"",industry_logo:"",doc_count:"",docs:[{id:0,documentTitle:"",icon:"",subTitle:"",arezCompany:"",industry:"",step:"",archived:!1,expiryDateRequired:!1}],questions:[{id:0,title:"Fifth Question",type:"Input",correctAnswer:"",questionFor:"partner",created_at:"2024-03-19T10:45:58.093663Z",arezCompany:0,industry:0}]}]),ae=s([{id:1,title:"Limited Screening",subtitle:"Limited screening documents uploads are required during worker signup",step:"step_1"},{id:2,title:"Full Screening",subtitle:"Full screening documents may be uploaded after the worker's successful signup process",step:"step_2"}]),ie=s({title:"",alertIcon:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});s({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0});const se=s([{id:0,title:"",created_at:"",doc_count:0,industry:{id:0,name:"",industryLogo:""}}]),oe=async()=>{try{$.value=!1,V.value=!1,i.value=!0;const e=await h.get(`v3/api/company_document/${t.id}/get_documents_of_a_company/`,{});$.value=!1;const a=e.data.map((e=>{const t=l.loggedCompany.industry.find((t=>t.id===e.industry_id));return{...e,industry_logo:t?.industryLogo||null,industry_name:t?.name||e.industry_name,activeTab:t?.id==H.value?"ques":"docs",currentSelectedIndustry:t?.id}}));l.loggedCompany.industry.forEach((t=>{e.data.some((e=>e.industry_id===t.id))||a.push({industry_id:t.id,industry_name:t.name,industry_logo:t.industryLogo,doc_count:0,docs:[],activeTab:"docs"})})),console.log("result array",l.loggedCompany.industry),le.value=a,te.value=le.value.length>0?le.value[0].industry_id:0,i.value=!1,setTimeout((()=>{window.location.hash=S.value}),1e3)}catch(e){console.error("ok",e)}},ne=(e,t)=>{T.value=e,A.value=t,console.log("the id "+e),D.value=3,ie.value={title:"Archive this document?",alertIcon:"lnir lnir-alarm-2",subtitle:"This document will be archived, and it will be deleted  permanently after 30 days",btntext:"Yes, Archive it",isSweetAlertOpen:!0}},re=()=>{1==D.value?de():2==D.value?ce():3==D.value&&ue()},ce=async()=>{try{if("Assign This Template"!=O.value)return void b.error("Invalid Captcha Text");q.value=!0,ie.value.isSweetAlertOpen=!1;const e=await h.post("/v3/api/compliance/template/assign-template-to-company/",{company:t.id,template:E.value});j.value=!1,b.success(e.data),oe()}catch(e){b.error("Server error while assigning the template")}finally{q.value=!1,O.value=""}},de=async()=>{try{ie.value.isSweetAlertOpen=!1;await h.delete(`/v3/api/company_document/${T.value}/`,{});oe(),b.dismissAll(),b.success("Delete company document, Company Document")}catch(e){console.error("ok",e)}},ue=async()=>{try{ie.value.isSweetAlertOpen=!1;await h.patch(`/v3/api/company_document/${T.value}/archive-company-document/`,{archived:A.value});oe(),b.warning("Document archived")}catch(e){console.log(e)}};return o((()=>{oe(),(async()=>{try{const e=await h.get(`/v3/api/compliance/template/get-company-indutries-tmeplates/${t.id}/`);se.value=e.data,console.log(e.data)}catch(e){console.log(e)}})()})),(e,t)=>{const l=x,s=ee,o=F,D=X,A=Z,N=J,U=K,L=G,de=Y,ue=W,pe=a,me=na,ye=Ce,ve=ge;return n(),v(_,null,[y(L,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap",styl:"just"},{default:c((()=>[ca,d("div",da,[d("div",ua,[d("ul",null,[(n(!0),v(_,null,w(p(le),((e,t)=>(n(),v("li",{key:t,id:e.industry_id,class:k([e.industry_id===p(te)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:t=>{return l=e.industry_id,te.value=0,void(te.value=l);var l}},[d("span",null,C(e.industry_name),1)],8,ma)],10,pa)))),128))])])]),0!=p(le).length?(n(!0),v(_,{key:0},w(p(le),((e,t)=>(n(),r(A,{key:t,id:e.industry_id},{default:c((()=>[p(i)||e.industry_id!=p(te)?g("",!0):(n(),v("div",ya,[d("div",va,[d("h3",ga,C(e.industry_name),1)]),d("div",fa,[d("div",ha,[d("div",xa,[d("div",ba,[d("ul",null,[d("li",{class:k(["docs"===e.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{e.activeTab="docs",H.value=0}},[d("span",null,"Documents ("+C(e.doc_count)+")",1)],8,_a)],2),d("li",{class:k(["ques"===e.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{e.activeTab="ques",H.value=e.industry_id}},[d("span",null,"Questions ("+C(e.questions?e.questions.length:0)+")",1)],8,wa)],2)])])]),d("div",ka,["ques"==e.activeTab?(n(),r(l,{key:0,light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{R.value="worker",P.value=e.industry_id,$.value=!0,Q.value=0},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Question ")])),_:2},1032,["onClick"])):g("",!0),"docs"==e.activeTab?(n(),r(l,{key:1,class:"mr-4",light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{T.value=0,M.value=e.industry_id,V.value=!0,B.value=e.industry_id},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Document ")])),_:2},1032,["onClick"])):g("",!0),"docs"==e.activeTab?(n(),v("div",Ca,[y(s,{title:"Compliance Template",color:"primary",right:"",spaced:""},{content:c((()=>[(n(!0),v(_,null,w(p(se),(t=>(n(),v("div",{key:t.id},[t.industry.id===e.industry_id?(n(),v("a",{key:0,onClick:()=>{E.value=t.id,S.value=e.industry_id,j.value=!0},class:"dropdown-item is-media"},[d("img",{class:"item-img",src:t.industry.industryLogo,alt:""},null,8,qa),d("div",Da,[d("span",null,C(t.title),1),d("span",null,C(t.industry.name)+" "+C(-t.doc_count?`(${t.doc_count})`:""),1)])],8,Ta)):g("",!0)])))),128))])),_:2},1024)])):g("",!0)])])]),"docs"==e.activeTab?(n(),v("div",Ia,[(n(!0),v(_,null,w(p(ae),(t=>(n(),v("div",{key:t.id},[d("h2",za,"("+C(t.title)+")",1),d("p",Aa,C(t.subtitle),1),d("div",ja,[(n(!0),v(_,null,w(e.docs,((l,a)=>(n(),v("div",{key:l.id,class:""},[0==e.docs[a].archived&&e.docs[a].step==t.step?(n(),r(D,{key:0,center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px",border:"1px solid #89898930"}},{icon:c((()=>[y(o,{picture:l.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(s,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{T.value=l.id,V.value=!0,B.value=e.industry_id}},Sa,8,Oa),Ma,d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>ne(l.id,!0)},Ra,8,Va)])),_:2},1024)])),default:c((()=>[Ea,d("span",Na,C(l.documentTitle),1),d("a",Ua,C(l.subTitle?l.subTitle.slice(0,190):"....")+" "+C(l.subTitle&&l.subTitle.length>190?"...":""),1),d("div",La,[d("a",$a,[f("Expiry date: "),d("p",Qa,C(l.expiryDateRequired?"Required":" Not required"),1)]),d("a",Fa,[f("Document level: "),d("p",Pa,C("step_1"==l.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))])])))),128)),Ba,Ha,d("div",Wa,[(n(!0),v(_,null,w(e.docs,((t,l)=>(n(),v("div",{key:t.id,class:""},[1==e.docs[l].archived?(n(),r(D,{key:0,center:"",lighter:"",style:{margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px","background-color":"#fff",border:"1px solid rgba(110, 110, 110, 0.1)"}},{icon:c((()=>[y(o,{picture:t.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(s,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>ne(t.id,!1)},Ga,8,Ya)])),_:2},1024)])),default:c((()=>[Ka,d("span",Ja,C(t.documentTitle),1),d("a",Za,C(t.subTitle.slice(0,190))+" "+C(t.subTitle.length>190?"...":""),1),d("div",Xa,[d("a",ei,[f("Expiry date: "),d("p",ti,C(t.expiryDateRequired?"Required":" Not required"),1)]),d("a",li,[f("Document level: "),d("p",ai,C("step_1"==t.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))]),e.docs.length?g("",!0):(n(),v("div",ii,si))])):g("",!0),"ques"==e.activeTab?(n(),v("div",oi,[d("div",ni,[(n(!0),v(_,null,w(e.questions,((t,l)=>(n(),v("div",{key:t.id,class:""},[y(D,{center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"400px","margin-left":"50px",border:"2px solid rgba(110, 110, 110, 0.247)"}},{action:c((()=>[y(s,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{R.value="worker",Q.value=t.id,P.value=e.industry_id,$.value=!0}},ci,8,ri),d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>(async e=>{try{await h.delete(`/v3/api/partner/questions/${e}/`),b.error("Question deleted successfuly"),oe()}catch(t){console.log(t)}})(t.id)},ui,8,di)])),_:2},1024)])),default:c((()=>[pi,d("span",mi,C(t.title.slice(0,36)),1),d("a",yi," Type: "+C(t.type),1),t.correctAnswer?(n(),v("div",vi,[gi,d("a",{style:I([{"font-size":"13px"},{color:"true"==t.correctAnswer?"var(--primary)":"var(--danger)"}])},C("true"==t.correctAnswer?"Yes":"No"),5)])):(n(),v("div",fi,hi))])),_:2},1024)])))),128))]),e.docs.length?g("",!0):(n(),v("div",xi,bi))])):g("",!0)]))])),_:2},1032,["id"])))),128)):g("",!0),p(i)?(n(),r(L,{key:1,"jusitfy-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap"},{default:c((()=>[(n(),v(_,null,w([0,1,2],(e=>d("div",{class:"list-widget is-straight",key:e},[d("div",_i,[wi,y(l,{color:"primary",icon:"fas fa-plus",rounded:"",style:{height:"27px","font-size":"10px"}},{default:c((()=>[f(" Document ")])),_:1})]),(n(),v(_,null,w(2,(e=>d("div",{key:e,class:"inner-list"},[d("div",ki,[d("div",Ci,[y(N,{size:"medium"}),y(U,{width:"80%","last-line-width":"60%",class:"mx-2"})])])]))),64))]))),64))])),_:1})):g("",!0),0==p(le).length?(n(),r(de,{key:2,title:"No Industry added to this company yet !",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n      search terms you've entered. Please try different search terms or\n      criteria.",larger:""},{image:c((()=>[Ti,qi])),_:1})):g("",!0)])),_:1}),p(ie).isSweetAlertOpen?(n(),r(ue,{key:0,isSweetAlertOpen:p(ie).isSweetAlertOpen,title:p(ie).title,subtitle:p(ie).subtitle,btntext:p(ie).btntext,alertIcon:p(ie).alertIcon,onConfirm:re,onCancel:()=>p(ie).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","alertIcon","onCancel"])):g("",!0),y(pe,{open:p(j),title:"Assign Template",actions:"right",onClose:t[1]||(t[1]=e=>j.value=!1)},{content:c((()=>[d("div",Di,[Ii,d("div",zi,[Ai,d("div",ji,[Oi,d("div",Si,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>z(O)?O.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,p(O)]])])])])])])),cancel:c((()=>[y(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:c((()=>[f("Close")])),_:1})])),action:c((()=>[y(l,{type:"submit",onClick:ce,color:"primary",loading:p(q),raised:""},{default:c((()=>[f("Assign it ")])),_:1},8,["loading"])])),_:1},8,["open"]),p(V)?(n(),r(me,{key:1,docID:p(T),industry:p(M),CompanyDocModalOpen:p(V),"onUpdate:modalHandler":t[2]||(t[2]=()=>{V.value=!p(V)}),"onUpdate:OnSuccess":t[3]||(t[3]=()=>{oe()})},null,8,["docID","industry","CompanyDocModalOpen"])):g("",!0),y(ye),p($)?(n(),r(ve,{key:2,questionId:p(Q),type:p(R),industryID:p(P),QuestionModalOpen:p($),"onUpdate:modalHandler":t[4]||(t[4]=()=>{$.value=!p($)}),"onUpdate:OnSuccess":oe},null,8,["questionId","type","industryID","QuestionModalOpen"])):g("",!0)],64)}}}),[["__scopeId","data-v-f29f1c24"]]),Vi={class:"personal-dashboard personal-dashboard-v1"},Ri={class:"dashboard-body"},Ei={class:"columns is-multiline"},Ni={class:"column is-12"},Ui={class:"dashboard-card"},Li=i({__name:"CompanyRegisterWorkerChart",setup(e){const t=oe(),l=O({series:[{name:"Registered",data:[20,34,40,50,60,80,20,46,56,80,25,60]}],chart:{height:285,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e},offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],position:"top",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{max:100,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1,formatter:function(e){return e}}},colors:[t.primary,t.secondary,t.orange],title:{text:"Registered Workers",align:"left"}});return(e,t)=>(n(),v("div",Vi,[d("div",Ri,[d("div",Ei,[d("div",Ni,[d("div",Ui,[y(p(se),{height:p(l).chart.height,type:p(l).chart.type,series:p(l).series,options:p(l)},null,8,["height","type","series","options"])])])])])]))}}),$i={class:"profile-wrapper"},Qi={class:"is-flex"},Fi=["src"],Pi={class:"title is-4 is-narrow ml-4 mt-4 mb-4"},Bi={style:{display:"flex","padding-left":"10px","margin-left":"10px"}},Hi={class:"mb-1 ml-0 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},Wi={class:"profile-stat"},Yi=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Name: ",-1),Gi={style:{color:"var(--light-text)"}},Ki={class:"profile-stat"},Ji=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Email: ",-1),Zi={style:{color:"var(--light-text)"}},Xi={class:"mb-1 ml-4 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},es={class:"profile-stat mr-2"},ts=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Status: ",-1),ls={style:{color:"var(--light-text)"}},as={class:"profile-stat mr-3"},is=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Phone: ",-1),ss={style:{color:"var(--light-text)"}},os={class:"mb-1 ml-4 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},ns={class:"profile-stat"},rs=d("span",{style:{color:"var(--primary)"}},"Licences: ",-1),cs={style:{color:"var(--light-text)"}},ds={class:"profile-stat"},us=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Workers: ",-1),ps={class:"profile-stat"},ms=d("span",{style:{color:"var(--primary)"}},"Check workers Sanctions: ",-1),ys={key:0},vs={class:"profile-body"},gs={class:"columns"},fs={class:"column is-8"},hs={class:"profile-card"},xs={class:"profile-card-section"},bs=d("div",{class:"columns"},[d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#e3ffe3"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"20"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}}," Active Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#ffe3e3"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"10"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}}," Not-active Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#6c31a34a"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"30"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}},"Total Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#42d04d78"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"100"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}},"Total Registered Workers")])])])])],-1),_s={class:"column is-4"},ws={class:"profile-card"},ks={class:"profile-card-section no-padding"},Cs=d("div",{class:"section-title"},[d("h4",null,"Industries")],-1),Ts={class:"section-content"},qs={class:"tools-wrapper"},Ds={class:"tools-item"},Is={class:"meta"},zs={class:"dark-inverted"},As={key:1},js={key:2},Os={key:3},Ss=i({__name:"CompanyProfile",setup(a){const i=L(),u=N(),m=U(),h=S(),x=s(!1);s("about");const b=i.loggedCompany.id,k=s(!1);s({});const T=M((()=>h.query.tab?h.query.tab:"about")),q=async()=>{try{x.value=!0;const e=await u.post("/v3/api/worker/sanction/update-workers/",{company:b});console.log("sanctions",e),x.value=!1,m.success("Worker sanctions list updated successfuly")}catch(e){m.error(e)}finally{x.value=!1}};console.log("active value "+T.value);const D=async()=>{i.loadCompany(i.loggedCompany.id)};return o((()=>{})),(a,s)=>{const o=P,u=Li,m=ie,z=ae,A=Mi,j=Rl,O=l,S=t,M=e;return n(),v("div",$i,[d("div",{style:I([{backgroundImage:`linear-gradient(to right, ${p(i).loggedCompany.color}50, ${p(i).loggedCompany.color}30, ${p(i).loggedCompany.color}10)`},{padding:"20px 10px",display:"flex","margin-bottom":"12px",height:"180px","border-radius":"16px",border:"1px solid rgba(85, 85, 85, 0.164)"}])},[d("div",Qi,[d("img",{class:"m-3",src:p(i).loggedCompany.compnayLogo?p(i).loggedCompany.compnayLogo:"/images/dummyShareProf/logo-placeholder.png",alt:"logo",style:{width:"120px",height:"auto","border-radius":"16px"}},null,8,Fi),d("div",null,[d("h3",Pi,[f(C(p(i).loggedCompany.companyName&&p(i).loggedCompany.companyName)+" ",1),d("i",{onClick:s[0]||(s[0]=e=>{k.value=!0}),"aria-hidden":"true",class:"lnil lnil-pencil",style:{cursor:"pointer","font-size":"16px",color:"var(--primary)"}})]),d("div",Bi,[d("div",Hi,[d("div",Wi,[Yi,d("span",Gi,C(p(i).loggedCompany.companyRegisteredName),1)]),d("div",Ki,[Ji,d("span",Zi,C(p(i).loggedCompany.companyEmailAddress),1)])]),d("div",Xi,[d("div",es,[ts,d("span",ls,C(p(i).loggedCompany.activationStatus?"Active":"In-Active"),1)]),d("div",as,[is,d("span",ss,C(p(i).loggedCompany.companyPhoneNumber),1)])]),d("div",os,[d("div",ns,[rs,d("span",cs,C(p(i).loggedCompany.current_licence)+"+ ",1)]),d("div",ds,[us,d("span",{onClick:s[1]||(s[1]=()=>{T.value="workers"}),style:{color:"var(--light-text)"}},C(p(i).loggedCompany.managed_workers)+" Workers",1)])]),d("div",ps,[ms,y(o,{onClick:q,style:{padding:"2px",width:"22px",height:"22px","padding-top":"4px"},color:"primary",outlined:"",loading:p(x),circle:"",icon:"fas fa-sync-alt"},null,8,["loading"])])])])])],4),y(S,{selected:p(T),class:"mt-4",type:"toggle",tabs:[{label:"Home",value:"about",icon:"lnil lnil-home"},{label:"Worker Compliance",value:"docs",icon:"lnil lnil-licencse"},{label:"Partner Compliance",value:"partner-doc",icon:"fas fa-users"},{label:"Controllers",value:"team-members",icon:"lnil lnil-users"}]},{tab:c((({activeValue:e})=>["about"===e?(n(),v("div",ys,[d("div",vs,[d("div",gs,[d("div",fs,[d("div",hs,[d("div",xs,[bs,y(u)])])]),d("div",_s,[d("div",ws,[d("div",ks,[Cs,d("div",Ts,[d("div",qs,[(n(!0),v(_,null,w(p(i).loggedCompany.industry,(e=>(n(),v("div",Ds,[e.id?(n(),r(z,{key:0,picture:e.industryLogo,alt:"img"},{after:c((()=>[y(m,{type:"pie",values:[100,100],fill:["var(--primary)","transparent"],height:50,"inner-radius":22,width:50},null,8,["fill"])])),_:2},1032,["picture"])):g("",!0),d("div",Is,[d("span",zs,C(e.name),1)])])))),256))])])])])])])])])):g("",!0),"docs"!==e&&!p(h).query.compliance?g("",!0):(n(),v("div",As,[y(A,{id:p(b)},null,8,["id"])])),"partner-doc"!==e&&!p(h).query.compliance?g("",!0):(n(),v("div",js,[y(j,{id:p(b)},null,8,["id"])])),"team-members"===e?(n(),v("div",Os,[y(O)])):g("",!0)])),_:1},8,["selected"]),p(k)?(n(),r(M,{key:0,EditCompanyModalOpen:p(k),id:p(b),"onUpdate:handleUpdateEditCompanyModalOpen":s[2]||(s[2]=e=>k.value=e),"onUpdate:getAllCompanies":D},null,8,["EditCompanyModalOpen","id"])):g("",!0)])}}});export{Ss as _};
