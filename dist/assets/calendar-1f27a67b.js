import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-d1b96b5b.js";import{F as t}from"./FullCalendar-dbcd37e8.js";import{i as a}from"./index-f52ed8ce.js";import{u as s}from"./useAPI-008c05f7.js";import{u as r}from"./useNotyf-493e68e7.js";import{u as o}from"./userSession-325772ef.js";import{e as i,x as l,r as n,o as c,B as u,C as d,D as p,E as v,F as m,T as _,l as f,N as y,M as g,U as k,z as j}from"./index-65ab8135.js";import{u as w}from"./viewWrapper-80a16a8e.js";import"./VModal.vue_vue_type_style_index_0_lang-aaafd911.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-97681688.js";import"./VBlock.vue_vue_type_style_index_0_lang-04a94689.js";import"./VAvatar.vue_vue_type_style_index_0_lang-15847dda.js";import"./notyf-e6b1364d.js";import"./useThemeColors-e89e9c7b.js";const h={class:"lifestyle-dashboard lifestyle-dashboard-v3"},b={class:"columns is-multiline"},D={class:"column is-12"},T=["onClick"],x={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},C={style:{"margin-top":"8px","padding-right":"10px",color:"#f1f1f1"}},M=i({__name:"WorkerCalendar",setup(i){const j=o(),w=r(),M=s();l();const A=n(!1);n({});const W=n([]),V=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all"),n("");const F=n(!1),I=n([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),N=n([]),P=n([]),S=n([]);n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"});const B=n({plugins:[a],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[],resourceClick:function(e){console.log("Additional Data:")}}),H=n({}),L=n({});return c((async()=>{await(async()=>{try{F.value=!0;const e=await M.get(`/api/users/${j.user.id}/`);V.value=e.data,F.value=!1}catch(e){console.log(e)}})(),await(async()=>{try{const e=await M.get(`/api/task/${j.user.id}/worker-tasks/`);I.value=e.data,console.log("worker tasks",I.value)}catch(e){I.value=[]}})(),(async(e=!1)=>{try{const t=await M.get(`/api/task/worker-today/${j.user.id}/`);L.value=t.data,e&&w.green("Tasks list Refreshed")}catch(t){console.log(t)}})(),W.value=I.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,status:e.status,unit:e.unit,note:e.note,project:e.project}))),S.value=I.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status}))),N.value=S.value,P.value=W.value,B.value={...B.value,resources:N.value,events:P.value},console.log("tasks",B.value.events,"resources",B.value.resources)})),(a,s)=>{const r=e;return u(),d(k,null,[p("div",h,[p("div",b,[p("div",D,[v(f(t),{options:f(B)},{eventContent:m((e=>[p("div",{onClick:t=>{return a=e.event.extendedProps,console.log("detail",a),H.value=a,void(A.value=!0);var a},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},[p("p",x,_(e.event.title),1),p("div",null,[p("p",C,_(new Date(e.event.start).toDateString())+" to "+_(new Date(e.event.end).toDateString()),1)])],8,T)])),_:1},8,["options"])])])]),f(A)?(u(),y(r,{key:0,taskDetailModal:f(A),taskData:f(H),"onUpdate:modalHandler":s[0]||(s[0]=e=>A.value=!1)},null,8,["taskDetailModal","taskData"])):g("",!0)],64)}}}),A={class:""},W=i({__name:"calendar",setup:e=>(w().setPageTitle("Calendar View"),j({title:"Tasks Calendar- Ibex"}),(e,t)=>{const a=M;return u(),d("div",A,[v(a)])})});export{W as default};
