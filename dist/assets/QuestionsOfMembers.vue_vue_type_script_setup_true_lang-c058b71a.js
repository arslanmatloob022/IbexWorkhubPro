import{_ as e}from"./VFlex.vue_vue_type_style_index_0_lang-b564a019.js";import{_ as s}from"./VField.vue_vue_type_script_setup_true_lang-8fda54d1.js";import{_ as l}from"./VControl-3a0d7b90.js";import{_ as t}from"./VTextarea.vue_vue_type_script_setup_true_lang-f608710e.js";import{_ as r}from"./VBlock.vue_vue_type_style_index_0_lang-83a39e8a.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-725ce0ff.js";import{u as n}from"./useAPI-bba6ff57.js";import{u as i}from"./useNotyf-953388fb.js";import{u as o}from"./company-5bfaee0a.js";import{e as d,r as p,o as u,y as c,H as m,B as f,C as y,z as _,Q as w,R as x,l as g,J as b,A as v,P as h}from"./index-879cc21e.js";const A={class:"list-widget is-straight mt-1 mb-3"},j={style:{display:"flex","flex-wrap":"wrap"}},k={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},V={style:{width:"100%"},class:"field space-between column is-12 is-flex cu-align-center mb-0"},C={class:"field is-flex cu-align-center mb-0"},B=y("label",null,"Answer :",-1),I={style:{display:"flex","flex-wrap":"wrap"}},q={class:"is-flex mb-2",style:{display:"flex","justify-content":"space-between",width:"100%"}},Q={class:"cu-all-input",style:{width:"560px"}},$=d({__name:"QuestionsOfMembers",props:{type:{},memberId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(d,{emit:$}){const F=d;o(),p(!1);const O=i(),P=n(),T=p([{id:0,title:"",type:"CheckBox",correctAnswer:"",questionFor:"",created_at:"",filledAnswer:"",arezCompany:0,industry:0}]),z=(e,s,l)=>{console.log("ans",e,s),H(e,s,l)},H=async(e,s,l)=>{try{let t={filledAnswer:e};if(console.log("old ans",l),t[F.type]=F.memberId,l){await P.patch(`/v3/api/partner/member-questions/${s}/`,t);O.success("Answer updated.")}else if(!l){t.companyQuestion=s;await P.post("/v3/api/partner/member-questions/",t);O.success("Answer marked.")}M()}catch(t){console.log(t)}},M=async()=>{try{const e=await P.get(`/v3/api/partner/member-questions/${F.memberId}/questions_of_member/?member=${F.type}`);T.value=e.data.map((e=>{const s=!!e.hasOwnProperty("filledAnswer");return{...e,oldAnswer:s}}))}catch(e){console.log(e)}};return u((()=>{F.memberId&&M()})),(n,i)=>{const o=a,d=r,p=t,u=l,$=s,F=e;return c(),m(F,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"10px","row-gap":"10px","flex-wrap":"wrap",styl:"just"},{default:f((()=>[y("div",A,[y("div",j,[(c(!0),_(w,null,x(g(T),((e,s)=>(c(),_("div",{key:e.id,class:""},["CheckBox"==e.type?(c(),m(d,{key:0,center:"",lighter:"",style:{margin:"6px","border-radius":"8px",padding:"12px",display:"flex","justify-content":"space-between",width:"360px",border:"1px solid rgba(110, 110, 110, 0.011)"}},{default:f((()=>[y("h3",k,b(e.title),1),y("div",V,[y("div",C,[B,v(o,{onClick:s=>{z("true",e.id,e.filledAnswer)},color:e.filledAnswer?"primary":"light",rounded:"",label:"Yes",outlined:"false"==e.filledAnswer,class:"mr-3 ml-3 cu-pointer"},null,8,["onClick","color","outlined"]),v(o,{onClick:s=>{z("false",e.id,e.filledAnswer)},color:e.filledAnswer?"info":"light",rounded:"",label:"No",outlined:"true"==e.filledAnswer,class:"mr-3 cu-pointer"},null,8,["onClick","color","outlined"])])])])),_:2},1024)):h("",!0)])))),128))]),y("div",I,[(c(!0),_(w,null,x(g(T),((e,s)=>(c(),_("div",{key:e.id},["Input"==e.type?(c(),m(d,{key:0,center:"",lighter:"",style:{margin:"8px","border-radius":"8px",padding:"12px",width:"600px",border:"1px solid rgba(110, 110, 110, 0.017)"}},{default:f((()=>[y("h3",q,b(e.title),1),y("div",Q,[v($,null,{default:f((()=>[v(u,null,{default:f((()=>[v(p,{modelValue:e.filledAnswer,"onUpdate:modelValue":s=>e.filledAnswer=s,onBlur:s=>{var l,t,r;l=s,t=e.id,r=e.oldAnswer,console.log("ans",l.target.value,t),H(l.target.value,t,r)},style:{width:"100%","border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},class:"is-primary-focus",rows:"2",placeholder:"Answer..."},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:2},1024)])),_:2},1024)])])),_:2},1024)):h("",!0)])))),128))])])])),_:1})}}});export{$ as _};
