import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-776f3a3f.js";import{_ as t}from"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import{e as a,r as l,o,v as s,x as i,A as r,F as n,O as c,l as u,y as d,z as p,P as m,B as y,H as v,a3 as g,j as _,R as f,aa as h,C as k,V as b,W as x,J as w,s as C}from"./index-a3511ab8.js";import{_ as D}from"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import{_ as A}from"./VFlexTable.vue_vue_type_style_index_0_lang-ab11cfa6.js";import{_ as S}from"./VIconButton-87810f23.js";import{_ as j}from"./VIconBox.vue_vue_type_style_index_0_lang-51da0b67.js";import{_ as V}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as T}from"./VControl-f6dba4dd.js";import{_ as O}from"./VInput.vue_vue_type_script_setup_true_lang-17074c81.js";import{_ as N}from"./VLabel.vue_vue_type_script_setup_true_lang-dfa6e2cd.js";import{_ as z}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{_ as I}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-203bc318.js";import{a as U}from"./docmandatory-a5126801.js";import{_ as W}from"./pdf-9ba17336.js";import{u as P}from"./company-ca9a809c.js";import{u as R}from"./useAPI-2f913358.js";import{u as q}from"./useNotyf-bee6672a.js";import{u as B}from"./userSession-1e35e5f3.js";import{A as E}from"./vue3-apexcharts.common-763b2026.js";import{u as F}from"./useThemeColors-9cb1eefd.js";const L=e=>(b("data-v-c00a52b0"),e=e(),x(),e),Y={class:"modal-form columns is-multiline"},$=L((()=>r("div",{class:"column is-12 mb-6"},[r("h2",{class:"section-heading"})],-1))),H={class:"profile-card column is-10",style:{"max-height":"820px","overflow-y":"auto"}},J={class:"profile-card-section"},K={class:"section-content"},M={class:"column is-12"},X={key:0,class:"incoming"},G={class:"cus-docTitles"},Q={id:"titles"},Z={class:"item-name mb-1 dark-inverted"},ee={key:0,style:{width:"12px",height:"12px"},src:U},te={class:"item-meta"},ae={key:0,style:{color:"var(--light-text)","font-weight":"500"},class:"cu-pointer"},le={class:"item-meta"},oe={class:"cu-pointer cus-sub-title"},se={key:0,class:"item-meta"},ie=["onClick"],re={key:0,style:{position:"absolute","background-color":"#fff",padding:"6px",width:"220px"}},ne={key:0,id:"cus-toggle-center",class:"navbar-item is-theme-toggle cell-end"},ce={class:"theme-toggle"},ue=["disabled","onUpdate:modelValue","onClick"],de=L((()=>r("span",{class:"toggler"},[r("span",{class:"dark"},[r("i",{class:"iconify","data-icon":"feather:check","aria-hidden":"true"})]),r("span",{class:"light"},[r("i",{class:"iconify","data-icon":"feather:x","aria-hidden":"true"})])],-1))),pe={key:1,id:"cus-toggle-center",class:"navbar-item is-theme-toggle"},me={class:"theme-toggle"},ye=["onUpdate:modelValue","onClick"],ve=L((()=>r("span",{class:"toggler",style:{"border-color":"var(--primary-grey) !important"}},[r("span",{class:"cus-dark"},[r("i",{color:"info",class:"iconify","data-icon":"feather:check","aria-hidden":"true"})]),r("span",{class:"light",style:{"background-color":"var(--primary-grey) !important"}},[r("i",{color:"info",class:"iconify","data-icon":"feather:x","aria-hidden":"true"})])],-1))),ge={key:0},_e={key:0},fe=["onClick"],he={key:1},ke={class:"png-icon"},be=["onClick"],xe=L((()=>r("i",{class:"iconify","data-icon":"feather:upload-cloud","aria-hidden":"true"},null,-1))),we=L((()=>r("i",{class:"iconify","data-icon":"feather:trash-2","aria-hidden":"true"},null,-1))),Ce={key:1},De={class:"modal-form"},Ae=["src"],Se=["src"],je=w(a({__name:"SupplierDocuments",props:{id:{}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:b}){const x=a,w=B(),C=R(),U=q(),E=P(),F=l(!1);l("partner");const L=l(!1),je=l(""),Ve=l(null),Te=l({}),Oe=l(!0),Ne=l(""),ze=l(""),Ie=l([]),Ue=l(""),We=l(!1),Pe=l(0),Re=l(""),qe=l({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Be={documentTitle:{label:"Documents",grow:!1,media:!0},status:{label:"Status",align:"center"},actions:{label:"Actions",align:"end"}};!E.loggedCompany.industry||E.loggedCompany.industry,l({id:0,latitude:"",longitude:"",supplierName:"",country:"United Kingdom",partnerLogo:null,noOfEmployees:"",supplierPhoneNumber:"",address:"",registrationNumber:"",postCode:"",color:"",registeredName:"",supplierEmailAddress:"",approved_till:"",vatNumber:"",taxReference:"",bankCountry:"",bankName:"",accountName:"",sortCode:"",accountNumber:"",accountReference:"",website:"",contactEmail:"",contactPhoneNumber:"",postalAddress:"",status:!1,businessArea:"",contactPerson:"",tradingName:"",relationShip:"",industry:"",expiredIn:7,company:0});const Ee=async()=>{try{Oe&&(F.value=!0,Oe.value=!1);const e=await C.get(`/v3/api/partner/document/${x.id}/get_documents_of_a_partner/`,{});F.value=!1,Ie.value=e.data}catch(e){F.value=!1,console.error("ok",e)}},Fe=async(e,t)=>{try{const a=new window.FormData;for(const e in t)a.append(e,t[e]);await C.patch(`/v3/api/partner/document/${e}/`,a);U.dismissAll(),U.success("worker document updated, Worker"),Ee(),Ye(!1),$e.value=0,b("update:OnSuccess",null)}catch(a){console.error("ok",a)}},Le=e=>{const t=e.target,a=t.files?.[0];t.value="",a&&(Ye(!0),Te.value.partner?Fe(Te.value.id,{document:a}):(async(e,t)=>{try{let a={status:!1,partner:x.id,companyDocument:e.id,document:t};const l=new window.FormData;for(const e in a)l.append(e,a[e]);console.log(e),await C.post("/v3/api/partner/document/",l),Ee(),b("update:OnSuccess",null)}catch(a){U.error("Please reduce file size to upload")}finally{Ye(!1)}})(Te.value,a))},Ye=e=>{let t=Ie.value;const a=t.findIndex((e=>e.id===Te.value.id));-1!==a&&(t[a].loading=e),Ie.value=[...t]},$e=l(0),He=async()=>{try{qe.value.isSweetAlertOpen=!1;await C.delete(`/v3/api/partner/document/${Pe.value}/`,{});Ee(),U.dismissAll(),U.success("Delete worker document, Worker"),b("update:OnSuccess",null)}catch(e){console.error("ok",e)}};return o((async()=>{Ee()})),(a,l)=>{const o=I,b=z,x=N,C=O,U=T,P=V,R=j,q=S,B=A,E=D,F=k,Oe=t,Ee=e;return s(),i(m,null,[r("div",Y,[$,r("div",H,[r("div",J,[a.Loading?(s(),n(o,{key:0})):c("",!0),r("input",{ref_key:"fileInput",ref:Ve,type:"file",style:{display:"none"},onChange:Le,accept:"image/*,application/pdf"},null,544),r("div",K,[r("div",M,[u(Ie).length>0?(s(),i("div",X,[d(B,{rounded:"",data:u(Ie),columns:Be,class:"noborder",id:"doc-table"},{"body-cell":p((({row:e,column:t,value:a})=>["documentTitle"===t.key?(s(),i(m,{key:0},[d(b,{picture:e.icon,squared:!0},null,8,["picture"]),r("div",G,[r("div",Q,[r("span",Z,[y(v(e.documentTitle)+" ",1),"step_1"==e.step?(s(),i("img",ee)):c("",!0)]),r("span",te,[e.expiryDateRequired&&!e.expiryDate?(s(),i("span",ae," Date required")):c("",!0)]),r("span",le,[r("span",oe,v(e.subTitle),1)]),e.expiryDateRequired&&e.document?(s(),i("span",se,[r("span",{style:g({color:e.expiryDate?"var(--primary)":"var(--danger)"}),class:"cu-pointer"},"Expiry date: "+v(e.expiryDate),5),r("i",{onClick:t=>{return a=e.id,l=e.expiryDate,ze.value=l,void($e.value=a);var a,l},class:"lnil lnil-pencil ml-2 cu-pointer",style:{color:"var(--primary)","font-size":"10px"},"aria-hidden":"true"},null,8,ie)])):c("",!0)])]),u($e)==e.id?(s(),i("div",re,[d(P,null,{default:p((()=>[r("i",{class:"lnil lnil-close cu-pointer",onClick:l[0]||(l[0]=()=>{$e.value=0}),style:{float:"right"},"aria-hidden":"true"}),d(x,null,{default:p((()=>[y("Enter expiry date :")])),_:1}),d(U,null,{default:p((()=>[d(C,{modelValue:u(ze),"onUpdate:modelValue":l[1]||(l[1]=e=>_(ze)?ze.value=e:null),onChange:t=>Fe(e.id,{expiryDate:u(ze),docTitle:u(Ne)}),type:"Date",placeholder:"Document expiry date"},null,8,["modelValue","onChange"])])),_:2},1024)])),_:2},1024)])):c("",!0)],64)):"status"===t.key?(s(),i(m,{key:1},[e.partner?(s(),i("div",ne,[r("label",ce,[f(r("input",{disabled:"partner"==u(w).user.role,id:"navbar-night-toggle--daynight","onUpdate:modelValue":t=>e.status=t,onClick:t=>Fe(e.id,{status:!e.status,docTitle:e.documentTitle}),"data-cy":"dark-mode-toggle",type:"checkbox"},null,8,ue),[[h,e.status]]),de])])):(s(),i("div",pe,[r("label",me,[f(r("input",{style:{"background-color":"var(info) !important"},disabled:"","onUpdate:modelValue":t=>e.status=t,onClick:t=>Fe(e.id,{status:!e.status,docTitle:e.documentTitle}),"data-cy":"dark-mode-toggle",type:"checkbox"},null,8,ye),[[h,e.status]]),ve])]))],64)):"actions"===t.key?(s(),i(m,{key:2},[e.document?(s(),i("div",ge,[e.document.includes(".pdf")?(s(),i("div",_e,[r("img",{onClick:()=>{je.value=e.document,Ue.value=e.id,We.value=e.expiryDateRequired,L.value=!0,Ne.value=e.documentTitle,ze.value=e.expiryDate},class:"image-icon",src:W,alt:"",style:{"margin-right":"10px",width:"34px",height:"34px",cursor:"pointer","border-radius":"50%"}},null,8,fe)])):(s(),i("div",he,[r("div",ke,[r("i",{onClick:()=>{je.value=e.document,L.value=!0,Ue.value=e.id,We.value=e.expiryDateRequired,Ne.value=e.documentTitle,ze.value=e.expiryDate},class:"fas fa-file-image",style:{"font-size":"18px",cursor:"pointer",color:"var(--primary)"}},null,8,be)])]))])):c("",!0),e.loading?c("",!0):(s(),n(R,{key:1,size:"small",color:"info",style:{cursor:"pointer"},rounded:"",onClick:()=>(e=>{Te.value=e,Ve.value&&Ve.value.click()})(e)},{default:p((()=>[xe])),_:2},1032,["onClick"])),e.loading?(s(),n(q,{key:2,color:"primary",outlined:"",loading:"",circle:"",icon:"feather:plus"})):c("",!0),e.partner?(s(),n(R,{key:3,size:"small",color:"danger",class:"ml-3",style:{cursor:"pointer"},rounded:"",onClick:t=>(e=>{Pe.value=e.id,Re.value=e.documentTitle,qe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Worker Document!",btntext:"Yes, Delete it",isSweetAlertOpen:!0}})(e)},{default:p((()=>[we])),_:2},1032,["onClick"])):c("",!0)],64)):c("",!0)])),_:1},8,["data"])])):(s(),i("div",Ce,[d(E,{color:"solid",label:"No Documents Are Available!",rounded:""})]))])])])])]),d(Oe,{is:"form",open:u(L),title:u(Ne),size:"big",actions:"right",onClose:l[4]||(l[4]=e=>L.value=!1)},{content:p((()=>[u(We)?(s(),n(P,{key:0},{default:p((()=>[d(x,null,{default:p((()=>[y("Document expiry date :")])),_:1}),d(U,null,{default:p((()=>[d(C,{modelValue:u(ze),"onUpdate:modelValue":l[2]||(l[2]=e=>_(ze)?ze.value=e:null),onChange:l[3]||(l[3]=e=>Fe(u(Ue),{expiryDate:u(ze),docTitle:u(Ne)})),type:"Date",placeholder:"Document expiry date"},null,8,["modelValue"])])),_:1})])),_:1})):c("",!0),r("div",De,[u(je).includes(".pdf")?(s(),i("iframe",{key:0,src:u(je),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ae)):(s(),i("img",{key:1,src:u(je),alt:""},null,8,Se))])])),cancel:p((()=>[d(F,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:p((()=>[y("Close")])),_:1})])),_:1},8,["open","title"]),u(qe).isSweetAlertOpen?(s(),n(Ee,{key:0,isSweetAlertOpen:u(qe).isSweetAlertOpen,title:u(qe).title,subtitle:u(qe).subtitle,btntext:u(qe).btntext,onConfirm:He,onCancel:()=>u(qe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):c("",!0)],64)}}}),[["__scopeId","data-v-c00a52b0"]]),Ve=a({__name:"ApexChart",props:{Statvalue:{type:Number,default:0},color:{type:String,default:""}},setup(e){const t=e,a=F(),l=C({series:[0],chart:{height:160,type:"radialBar",toolbar:{show:!1}},colors:[a.accent],plotOptions:{radialBar:{hollow:{size:"40%"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontWeight:500,offsetY:-10,color:t.color?t.color:[a.accent]},value:{show:!0,fontWeight:600,color:t.color?t.color:[a.accent],fontSize:"16px",offsetY:-10}}}},labels:[""]});return o((()=>{})),(e,a)=>(s(),i("div",null,[d(u(E),{id:"radial-circle",class:"circle-chart-wrapper",height:u(l).chart.height,type:u(l).chart.type,series:[t.Statvalue?t.Statvalue:0],options:u(l)},null,8,["height","type","series","options"])]))}});export{Ve as _,je as a};
