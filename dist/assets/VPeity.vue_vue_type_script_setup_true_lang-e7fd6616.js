import{f as t,r as i,$ as e,aq as n,C as l,D as a,m as o}from"./index-ba14f1f1.js";function s(t,i){const e=document.createElementNS("http://www.w3.org/2000/svg",t);for(const n of Object.keys(i))e.setAttribute(n,i[n]);return e}function r(t,i,e){let n=i.map((t=>t>0?t:0));if(2===n.length){const t=n[0],i=n[1];n=[t,Math.max(0,i-t)]}let l=0,a=n.length,o=0;for(;l<a;l++)o+=n[l];o||(a=2,o=1,n=[0,1]);const r=t.getBoundingClientRect(),d=r.width,f=r.height,h=d/2,c=f/2,u=Math.min(h,c);let p=e.innerRadius;"donut"!==e.type||p||(p=.5*u);const g=Math.PI,m=(t,i)=>{const e=t/o*g*2-g/2;return[i*Math.cos(e)+h,i*Math.sin(e)+c]};let y=0;for(l=0;l<a;l++){const i=n[l],a=i/o;let r,d;if(0!==a){if(1===a)if(p){const t=h-.01,i=c-u,e=c-p;r=s("path",{d:["M",h,i,"A",u,u,0,1,1,t,i,"L",t,e,"A",p,p,0,1,0,h,e].join(" ")})}else r=s("circle",{cx:h,cy:c,r:u});else{const t=y+i;let e=["M"].concat(m(y,u).map(String),"A",`${u}`,`${u}`,"0",a>.5?"1":"0","1",m(t,u).map(String),"L");p?e=e.concat(m(t,p).map(String),"A",`${p}`,`${p}`,"0",a>.5?"1":"0","0",m(y,p).map(String)):e.push(`${h}`,`${c}`),y+=i,r=s("path",{d:e.join(" ")})}"string"==typeof e.fill?d=e.fill:Array.isArray(e.fill)?d=e.fill?.[l]??e.fill?.[0]:"function"==typeof e.fill&&(d=e.fill(l)),d&&r.setAttribute("fill",d),t.appendChild(r)}}}const d=["height","width"],f=t({__name:"VPeity",props:{values:{default:()=>[]},type:{default:"line"},min:{default:void 0},max:{default:void 0},radius:{default:8},innerRadius:{default:5},height:{default:16},width:{default:16},padding:{default:.1},stroke:{default:void 0},strokeWidth:{default:1},fill:{default:void 0}},setup(t){const f=t,h=i(),c=e((()=>{const t=f.height||16;if("pie"===f.type||"donut"===f.type){const i=2*f.radius;return t||i}return t})),u=e((()=>{const t=f.width||16;if("pie"===f.type||"donut"===f.type){const i=2*f.radius;return t||i}return t}));return n((()=>{if(!h.value)return;const t=h.value;t.innerHTML="";const i={type:f.type,height:f.height,width:f.width,fill:t=>{const i=f.fill??[];return i[t%i.length]}};switch(f.type){case"bar":i.min=f.min,i.padding=f.padding,function(t,i,e){const n=i,l=Math.max(...void 0===e.max?n:n.concat(e.max)),a=Math.min(...void 0===e.min?n:n.concat(e.min)),o=t.getBoundingClientRect(),r=o.width,d=o.height,f=l-a,h=e.padding??2,c=t=>t*r/n.length,u=t=>d-(f?(t-a)/f*d:1);for(let p=0;p<n.length;p++){const i=c(p+h),o=c(p+1-h)-i,r=n[p],d=u(r);let g,m,y=d,w=d;f?r<0?y=u(Math.min(l,0)):w=u(Math.max(a,0)):g=1,g=w-y,0===g&&(g=1,l>0&&f&&y--),"string"==typeof e.fill?m=e.fill:Array.isArray(e.fill)?m=e.fill?.[p]??e.fill[0]:"function"==typeof e.fill&&(m=e.fill(p)),m&&t.appendChild(s("rect",{fill:m,x:i,y:y,width:o,height:g}))}}(t,f.values,i);break;case"line":i.min=f.min,i.stroke=f.stroke,i.strokeWidth=f.strokeWidth,function(t,i,e){const n=i;1===n.length&&n.push(n[0]);const l=Math.max(...void 0===e.max?n:n.concat(e.max)),a=Math.min(...void 0===e.min?n:n.concat(e.min)),o=t.getBoundingClientRect(),r=e.strokeWidth??1,d=o.width,f=o.height-r,h=l-a,c=t=>{let i=f;return h&&(i-=(t-a)/h*f),i+r/2},u=c(Math.max(a,0)),p=[0,u];for(let s=0;s<n.length;s++)p.push(s*(d/(n.length-1)),c(n[s]));let g;p.push(d,u),"string"==typeof e.fill?g=e.fill:Array.isArray(e.fill)?g=e.fill?.[0]:"function"==typeof e.fill&&(g=e.fill(0)),g&&t.appendChild(s("polygon",{fill:g,points:p.join(" ")})),r&&t.appendChild(s("polyline",{fill:"none",points:p.slice(2,p.length-2).join(" "),stroke:e.stroke,"stroke-width":r,"stroke-linecap":"square"}))}(t,f.values,i);break;case"pie":case"donut":i.radius=f.radius,i.innerRadius=f.innerRadius,r(t,f.values,i)}})),(t,i)=>(l(),a("svg",{ref_key:"svgElement",ref:h,xmlns:"http://www.w3.org/2000/svg",class:"peity",height:o(c),width:o(u)},null,8,d))}});export{f as _};
