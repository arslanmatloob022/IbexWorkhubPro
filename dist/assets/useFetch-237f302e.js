import{u as t}from"./userSession-fdb9f7c9.js";const e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,o=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,r=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function s(t,e){if(!("__proto__"===t||"constructor"===t&&e&&"object"==typeof e&&"prototype"in e))return e;!function(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}(t)}function n(t,n={}){if("string"!=typeof t)return t;const i=t.trim();if('"'===t[0]&&'"'===t.at(-1)&&!t.includes("\\"))return i.slice(1,-1);if(i.length<=9){const t=i.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if("undefined"===t)return;if("null"===t)return null;if("nan"===t)return Number.NaN;if("infinity"===t)return Number.POSITIVE_INFINITY;if("-infinity"===t)return Number.NEGATIVE_INFINITY}if(!r.test(t)){if(n.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(e.test(t)||o.test(t)){if(n.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,s)}return JSON.parse(t)}catch(a){if(n.strict)throw a;return t}}const i=/#/g,a=/&/g,u=/=/g,c=/\+/g,p=/%5e/gi,f=/%60/gi,l=/%7c/gi,h=/%20/gi;function d(t){return(e="string"==typeof t?t:JSON.stringify(t),encodeURI(""+e).replace(l,"|")).replace(c,"%2B").replace(h,"+").replace(i,"%23").replace(a,"%26").replace(f,"`").replace(p,"^");var e}function y(t){return d(t).replace(u,"%3D")}function b(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function m(t){return b(t.replace(c," "))}function g(t=""){const e={};"?"===t[0]&&(t=t.slice(1));for(const o of t.split("&")){const t=o.match(/([^=]+)=?(.*)/)||[];if(t.length<2)continue;const r=b(t[1].replace(c," "));if("__proto__"===r||"constructor"===r)continue;const s=m(t[2]||"");void 0===e[r]?e[r]=s:Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]}return e}function w(t){return Object.keys(t).filter((e=>void 0!==t[e])).map((e=>{return o=e,"number"!=typeof(r=t[e])&&"boolean"!=typeof r||(r=String(r)),r?Array.isArray(r)?r.map((t=>`${y(o)}=${d(t)}`)).join("&"):`${y(o)}=${d(r)}`:y(o);var o,r})).filter(Boolean).join("&")}const T=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,E=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,q=/^([/\\]\s*){2,}[^/\\]/;function S(t,e={}){return"boolean"==typeof e&&(e={acceptRelative:e}),e.strict?T.test(t):E.test(t)||!!e.acceptRelative&&q.test(t)}const j=/\/$|\/\?|\/#/;function R(t="",e){return e?j.test(t):t.endsWith("/")}function A(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(R(t,!0))return t||"/";let o=t,r="";const s=t.indexOf("#");if(s>=0&&(o=t.slice(0,s),r=t.slice(s),!o))return r;const[n,...i]=o.split("?");return n+"/"+(i.length>0?`?${i.join("?")}`:"")+r}function $(t,e){if(!(o=e)||"/"===o||S(t))return t;var o;const r=function(t="",e){if(!e)return(R(t)?t.slice(0,-1):t)||"/";if(!R(t,!0))return t||"/";let o=t,r="";const s=t.indexOf("#");s>=0&&(o=t.slice(0,s),r=t.slice(s));const[n,...i]=o.split("?");return(n.slice(0,-1)||"/")+(i.length>0?`?${i.join("?")}`:"")+r}(e);return t.startsWith(r)?t:function(t,...e){let o=t||"";for(const r of e.filter((t=>function(t){return t&&"/"!==t}(t))))if(o){const t=r.replace(v,"");o=A(o)+t}else o=r;return o}(r,t)}function _(t,e){const o=x(t),r={...g(o.search),...e};return o.search=w(r),function(t){const e=t.pathname||"",o=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",n=t.host||"",i=t.protocol?t.protocol+"//":"";return i+s+n+e+o+r}(o)}const v=/^\.?\//;function x(t="",e){const o=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(o){const[,t,e=""]=o;return{protocol:t.toLowerCase(),pathname:e,href:t+e,auth:"",host:"",search:"",hash:""}}if(!S(t,{acceptRelative:!0}))return e?x(e+t):N(t);const[,r="",s,n=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,i="",a=""]=n.match(/([^#/?]*)(.*)?/)||[],{pathname:u,search:c,hash:p}=N(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:i,pathname:u,search:c,hash:p}}function N(t=""){const[e="",o="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:o,hash:r}}class I extends Error{constructor(t,e){super(t,e),this.name="FetchError",e?.cause&&!this.cause&&(this.cause=e.cause)}}const O=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function C(t="GET"){return O.has(t.toUpperCase())}const P=new Set(["image/svg","application/xml","application/xhtml","application/html"]),F=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function L(t,e,o=globalThis.Headers){const r={...e,...t};if(e?.params&&t?.params&&(r.params={...e?.params,...t?.params}),e?.query&&t?.query&&(r.query={...e?.query,...t?.query}),e?.headers&&t?.headers){r.headers=new o(e?.headers||{});for(const[e,s]of new o(t?.headers||{}))r.headers.set(e,s)}return r}const U=new Set([408,409,425,429,500,502,503,504]),k=new Set([101,204,205,304]);const H=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),J=function t(e={}){const{fetch:o=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function i(t){const e=t.error&&"AbortError"===t.error.name&&!t.options.timeout||!1;if(!1!==t.options.retry&&!e){let e;e="number"==typeof t.options.retry?t.options.retry:C(t.options.method)?0:1;const o=t.response&&t.response.status||500;if(e>0&&(Array.isArray(t.options.retryStatusCodes)?t.options.retryStatusCodes.includes(o):U.has(o))){const o=t.options.retryDelay||0;return o>0&&await new Promise((t=>setTimeout(t,o))),a(t.request,{...t.options,retry:e-1,timeout:t.options.timeout})}}const o=function(t){const e=t.error?.message||t.error?.toString()||"",o=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${o}] ${JSON.stringify(r)}`,n=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",i=new I(`${s}: ${n}${e?` ${e}`:""}`,t.error?{cause:t.error}:void 0);for(const a of["request","options","response"])Object.defineProperty(i,a,{get:()=>t[a]});for(const[a,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(i,a,{get:()=>t.response&&t.response[u]});return i}(t);throw Error.captureStackTrace&&Error.captureStackTrace(o,a),o}const a=async function(t,a={}){const u={request:t,options:L(a,e.defaults,r),response:void 0,error:void 0};if(u.options.method=u.options.method?.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),"string"==typeof u.request&&(u.options.baseURL&&(u.request=$(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=_(u.request,{...u.options.params,...u.options.query}))),u.options.body&&C(u.options.method)&&(!function(t){if(void 0===t)return!1;const e=typeof t;return"string"===e||"number"===e||"boolean"===e||null===e||"object"===e&&(!!Array.isArray(t)||!t.buffer&&(t.constructor&&"Object"===t.constructor.name||"function"==typeof t.toJSON))}(u.options.body)?("pipeTo"in u.options.body&&"function"==typeof u.options.body.pipeTo||"function"==typeof u.options.body.pipe)&&("duplex"in u.options||(u.options.duplex="half")):(u.options.body="string"==typeof u.options.body?u.options.body:JSON.stringify(u.options.body),u.options.headers=new r(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json"))),!u.options.signal&&u.options.timeout){const t=new s;setTimeout((()=>t.abort()),u.options.timeout),u.options.signal=t.signal}try{u.response=await o(u.request,u.options)}catch(c){return u.error=c,u.options.onRequestError&&await u.options.onRequestError(u),await i(u)}if(u.response.body&&!k.has(u.response.status)&&"HEAD"!==u.options.method){const t=(u.options.parseResponse?"json":u.options.responseType)||function(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return F.test(e)?"json":P.has(e)||e.startsWith("text/")?"text":"blob"}(u.response.headers.get("content-type")||"");switch(t){case"json":{const t=await u.response.text(),e=u.options.parseResponse||n;u.response._data=e(t);break}case"stream":u.response._data=u.response.body;break;default:u.response._data=await u.response[t]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await i(u)):u.response},u=async function(t,e){return(await a(t,e))._data};return u.raw=a,u.native=(...t)=>o(...t),u.create=(o={})=>t({...e,defaults:{...e.defaults,...o}}),u}({fetch:H.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Headers:H.Headers,AbortController:H.AbortController});function D(){return J.create({baseURL:{}.VITE_API_BASE_URL,onRequest:({options:e})=>{const o=t();o.isLoggedIn&&(e.headers={...e.headers,Authorization:`Bearer ${o.token}`})}})}export{D as u};
