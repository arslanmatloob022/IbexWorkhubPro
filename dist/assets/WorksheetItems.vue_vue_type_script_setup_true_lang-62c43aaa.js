import{e,s as l,r as a,b as t,_ as o,o as s,B as i,N as n,F as u,D as r,E as d,K as c,l as p,W as m,C as _,U as v,V as b,J as f,T as y,M as h,I as g,O as k,a4 as C,a6 as T,Z as P,j as V,X as w,P as I,Q as M,R as U,i as x,A,aR as D,H as S,G as N}from"./index-f5583d51.js";import{_ as O}from"./VModal.vue_vue_type_style_index_0_lang-79a6d3c7.js";import{_ as q}from"./VInput.vue_vue_type_script_setup_true_lang-432f95ca.js";import{_ as L}from"./VTextarea.vue_vue_type_script_setup_true_lang-72043862.js";import{_ as j}from"./VField.vue_vue_type_script_setup_true_lang-f233c151.js";import{_ as E}from"./VControl-ff823799.js";import{_ as H,a as B}from"./VOption.vue_vue_type_style_index_0_lang-9a38abea.js";import{u as Q}from"./useAPI-4b99dffb.js";import{u as R}from"./useNotyf-dde682c8.js";import{a as Z}from"./useSupportElement-4ec5955f.js";import{u as F}from"./userSession-41a444ea.js";import{_ as G}from"./VAvatar.vue_vue_type_style_index_0_lang-e1dfcd96.js";import{_ as z}from"./VCheckbox.vue_vue_type_style_index_0_lang-74abcf95.js";import{_ as W}from"./VRadio.vue_vue_type_style_index_0_lang-8c4685f4.js";import{_ as J}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-c4e9cdb1.js";const $={class:"modal-form columns is-multiline"},K={class:"columns is-multiline"},X={class:"field column is-12 mb-0"},Y=r("label",null,"Title: ",-1),ee={class:"control"},le={class:"field column is-6"},ae=r("label",{for:""},"Cost Type",-1),te={class:"field column is-6"},oe=r("label",{for:""},"Catalog",-1),se={class:"field column is-6"},ie=r("label",{for:""},"Mark As",-1),ne={class:"field column is-6"},ue=r("label",{for:""},"Cost Code *",-1),re={class:"field column is-6"},de=r("label",{for:""},"Group Cost",-1),ce={class:"field column is-12 mb-0"},pe=r("label",{for:"",class:"label"},"Description",-1),me={class:"field column is-12 mb-0"},_e=r("label",{for:"",class:"label"},"Internal Notes",-1),ve={class:"columns is-multiline"},be={class:"field column is-6"},fe=r("label",null,"Unit Cost",-1),ye={class:"field column is-6"},he=r("label",null,"Quantity",-1),ge={class:"field column is-6"},ke=r("label",null,"Unit",-1),Ce={class:"field column is-6"},Te=r("label",null,"Builder Cost",-1),Pe={class:"field column is-6"},Ve=r("label",null,"Markup",-1),we={class:"field column is-6"},Ie=r("label",null,"Client Price",-1),Me={class:"field column is-6"},Ue=r("label",null,"Margin",-1),xe=e({__name:"EstimateCostItemModal",props:{costItemModal:{type:Boolean},proposalId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:T}){const P=e,V=l();F();const w=R(),I=Q(),M=a(!1);a([]),a([]);const U=a({id:"",type:"",total_price:0,cost_code:"",cost_type:"",builder_cost:0,internal_notes:"",mark_as:"",state:"",title:"",description:"",quantity:0,unit:"",unit_cost:0,markup:0,margin:0,profit:0,group:"",proposal:P.proposalId}),x=a([{value:"labour",label:"Labour"},{value:"material",label:"Material"},{value:"equipment",label:"Equipment"},{value:"subcontractor",label:"Subcontractor"},{value:"other",label:"Others"}]),A=a([{value:"11011",label:"Labour"},{value:"11012",label:"Material"},{value:"11013",label:"Equipment"},{value:"11014",label:"Subcontractor"},{value:"11015",label:"Others"}]),D=a([{value:"Tiling",label:"Tiling"},{value:"Material",label:"Material"},{value:"Paint",label:"Paint"},{value:"Carpenter",label:"Carpenter"}]),S=a([{value:"bid",label:"Bid"},{value:"allowance",label:"Allowance"}]);a([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const N=async()=>{try{M.value=!0;const e=Z(U.value,[""]);await I.post("/api/cost/",e);G(),z(),w.success("Item added successfully.")}catch(e){w.error(` ${e}, New Worker`)}finally{M.value=!1}},G=()=>{T("update:modalHandler",!1)},z=()=>{T("update:OnSuccess",null)},W=t((()=>o((()=>import("./ckeditor-50922a29.js").then((e=>e.c))),["assets/ckeditor-50922a29.js","assets/index-f5583d51.js","assets/index-1c8d8af6.css","assets/vue.runtime.esm-bundler-61fa7fd1.js"]).then((e=>e.default.component)))),J={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return s((async()=>{V.value=await o((()=>import("./ckeditor-9eb11a96.js").then((e=>e.c))),["assets/ckeditor-9eb11a96.js","assets/index-f5583d51.js","assets/index-1c8d8af6.css"]).then((e=>e.default))})),(e,l)=>{const a=H,t=B,o=E,s=j,T=k,w=L,I=C,Q=q,R=O;return i(),n(R,{is:"form",open:P.costItemModal,title:"Cost Item ",size:"xl",actions:"right",onSubmit:g(N,["prevent"]),onClose:G},{content:u((()=>[r("div",$,[d(I,{class:"column is-12"},{default:u((()=>[r("div",K,[r("div",X,[Y,r("div",ee,[c(r("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>p(U).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[m,p(U).title]])])]),r("div",le,[ae,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(t,{modelValue:p(U).cost_type,"onUpdate:modelValue":l[1]||(l[1]=e=>p(U).cost_type=e)},{default:u((()=>[(i(!0),_(v,null,b(p(x),((e,l)=>(i(),n(a,{value:e.value},{default:u((()=>[f(y(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),r("div",te,[oe,r("div",null,[d(T,{size:"small"},{default:u((()=>[f("Add in Catalog")])),_:1})])]),r("div",se,[ie,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(t,{modelValue:p(U).mark_as,"onUpdate:modelValue":l[2]||(l[2]=e=>p(U).mark_as=e)},{default:u((()=>[(i(!0),_(v,null,b(p(S),((e,l)=>(i(),n(a,{value:e.value},{default:u((()=>[f(y(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),r("div",ne,[ue,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(t,{modelValue:p(U).cost_code,"onUpdate:modelValue":l[3]||(l[3]=e=>p(U).cost_code=e)},{default:u((()=>[(i(!0),_(v,null,b(p(A),((e,l)=>(i(),n(a,{value:e.value},{default:u((()=>[f(y(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),r("div",re,[de,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(t,{modelValue:p(U).group,"onUpdate:modelValue":l[4]||(l[4]=e=>p(U).group=e)},{default:u((()=>[(i(!0),_(v,null,b(p(D),((e,l)=>(i(),n(a,{value:e.value},{default:u((()=>[f(y(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),r("div",ce,[pe,p(V)?(i(),n(p(W),{key:0,modelValue:p(U).description,"onUpdate:modelValue":l[5]||(l[5]=e=>p(U).description=e),editor:p(V),config:J},null,8,["modelValue","editor"])):h("",!0)]),r("div",me,[_e,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(w,{modelValue:p(U).internal_notes,"onUpdate:modelValue":l[6]||(l[6]=e=>p(U).internal_notes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1}),d(I,{class:"column is-12 mt-3"},{default:u((()=>[r("div",ve,[r("div",be,[fe,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).unit_cost,"onUpdate:modelValue":l[7]||(l[7]=e=>p(U).unit_cost=e),type:"number",name:"unitCost",placeholder:"Unit cost"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",ye,[he,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).quantity,"onUpdate:modelValue":l[8]||(l[8]=e=>p(U).quantity=e),type:"number",name:"quantity",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",ge,[ke,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).unit,"onUpdate:modelValue":l[9]||(l[9]=e=>p(U).unit=e),type:"text",name:"unit",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Ce,[Te,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).builder_cost,"onUpdate:modelValue":l[10]||(l[10]=e=>p(U).builder_cost=e),type:"number",name:"builderCost",placeholder:"Builder cost"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Pe,[Ve,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).markup,"onUpdate:modelValue":l[11]||(l[11]=e=>p(U).markup=e),type:"number",name:"markup",placeholder:"Markup"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",we,[Ie,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).total_price,"onUpdate:modelValue":l[12]||(l[12]=e=>p(U).total_price=e),type:"number",name:"markup",placeholder:"Total Price"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Me,[Ue,d(s,null,{default:u((()=>[d(o,null,{default:u((()=>[d(Q,{modelValue:p(U).margin,"onUpdate:modelValue":l[13]||(l[13]=e=>p(U).margin=e),type:"number",name:"markup",placeholder:"Margin"},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1})])])),action:u((()=>[d(T,{loading:p(M),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:u((()=>[f("Add Item")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Ae=a([{id:"12347",title:"Electrical Wiring",cost_code:"040100",cost_type:"Material",unit_cost:20,quantity:500,unit:"meters",total_cost:1e4,price:750,markup:15,markup_type:"percentage",markup_value:1500,markup_amount:3e3,unit_price:50,tax_rate:7.5,client_price:12000.9,total_price:9e3,builder_cost:825,group_price:78987,grand_total:12325,total_markup:9874567,mark_as:"catalogue_item",description:"Electrical wiring and related materials.",internal_notes:"Include wiring for backup generator.",created_by:"user125",created_date:"2024-12-22T12:00:00Z",updated_by:"user125",updated_date:"2024-12-22T13:00:00Z",approved_by:"manager458",approval_date:"2024-12-22T18:00:00Z",status:"pending",category:"Electrical",tags:["wiring","electrical","materials"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!1},front_end_elements:{highlighted:!1,background_color:"#f0f0f0",font_color:"#000000",display_order:3,editable:!0}},{id:"56789",title:"Plumbing Fixtures",cost_code:"050200",cost_type:"Labor",unit_cost:45,quantity:200,unit:"hours",total_cost:9e3,price:1500,markup:20,markup_type:"percentage",markup_value:1800,markup_amount:3600,unit_price:75,tax_rate:8,client_price:12000.9,total_price:10800,builder_cost:950,group_price:67890,grand_total:13200,total_markup:1234567,mark_as:"custom_item",description:"Installation of plumbing fixtures.",internal_notes:"Check water pressure before installation.",created_by:"user456",created_date:"2024-11-30T09:00:00Z",updated_by:"user456",updated_date:"2024-12-01T10:00:00Z",approved_by:"manager123",approval_date:"2024-12-01T15:00:00Z",status:"approved",category:"Plumbing",tags:["plumbing","fixtures","labor"],attachments:[],visibility:{admin:!0,internal_only:!0,shared_with_client:!1},front_end_elements:{highlighted:!0,background_color:"#ffffff",font_color:"#333333",display_order:1,editable:!1}},{id:"90123",title:"HVAC Installation",cost_code:"070300",cost_type:"Service",unit_cost:75,quantity:50,unit:"units",total_cost:3750,client_price:12000.9,price:850,markup:10,markup_type:"fixed",markup_value:850,markup_amount:1700,unit_price:95,tax_rate:6.5,total_price:4200,builder_cost:1025,group_price:56789,grand_total:15500,total_markup:654321,mark_as:"service_item",description:"HVAC system installation and setup.",internal_notes:"Ensure proper duct sealing.",created_by:"user789",created_date:"2024-12-10T14:00:00Z",updated_by:"user789",updated_date:"2024-12-15T11:30:00Z",approved_by:"manager567",approval_date:"2024-12-16T09:00:00Z",status:"completed",category:"HVAC",tags:["HVAC","installation","service"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!0},front_end_elements:{highlighted:!0,background_color:"#e6e6e6",font_color:"#111111",display_order:2,editable:!0}},{id:"34567",title:"Roofing Materials",cost_code:"080500",cost_type:"Material",unit_cost:30,quantity:1e3,unit:"sheets",total_cost:3e4,client_price:12000.9,price:1200,markup:25,markup_type:"percentage",markup_value:3e3,markup_amount:7500,unit_price:90,tax_rate:9,total_price:32700,builder_cost:1125,group_price:43210,grand_total:37500,total_markup:98765,mark_as:"material_item",description:"High-quality roofing materials.",internal_notes:"Ensure weather-resistant properties.",created_by:"user321",created_date:"2024-12-05T08:00:00Z",updated_by:"user321",updated_date:"2024-12-06T12:00:00Z",approved_by:"manager789",approval_date:"2024-12-07T14:00:00Z",status:"pending",category:"Roofing",tags:["roofing","materials","construction"],attachments:[],visibility:{admin:!1,internal_only:!0,shared_with_client:!0},front_end_elements:{highlighted:!1,background_color:"#dddddd",font_color:"#444444",display_order:4,editable:!1}}]),De=a({ItemNumber:"No#",Title:"Title",Unit:"Cost Code",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",UnitPrice:"Unit Price",Price:"Price",TotalPrice:"Total Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",ClientPrice:"Client Price",Profit:"Profit",Notes:"Internal Notes"}),Se=a({ItemNumber:"id",Title:"title",Unit:"cost_code",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",BuilderCost:"builder_cost",Markup:"markup",MarkupAmount:"markup_amount",UnitPrice:"unit_price",Price:"price",TotalPrice:"total_price",GroupPrice:"group_price",TotalCost:"total_cost",TotalMarkup:"total_markup",ClientPrice:"client_price",Profit:"profit",Notes:"internal_notes"}),Ne=T("useProposal",(()=>{const e=a(!0),l=R(),t=Q(),o=a("");a("");const s=a([]),i=a([]),n=a({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"}),u=a([{title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""}]);return{loading:e,proposalCostItems:u,leadProposalFormData:n,companyProposalsList:s,leadProposalsList:i,getLeadProposals:async a=>{try{a.value=a,e.value=!0;const l=await t.get(`/api/lead-proposal/by-job/${a.value}/`);i.value=l.data}catch(o){l.error(` ${o}, Lead`)}finally{e.value=!1}},getCompanyProposals:async()=>{try{e.value=!0;const l=await t.get("/api/lead-proposal/");s.value=l.data}catch(a){l.error(` ${a}, Lead`)}finally{e.value=!1}},getProposalCostItems:async function(e){try{o.value=e;const l=await t.get(`/api/cost/by-proposal/${e}/`);u.value=l.data}catch(l){console.log(l)}},clearProposalId:function(){o.value="",u.value=[]}}})),Oe={class:"columns is-multiline"},qe=r("div",{class:"column is-9"},[r("h1",{class:"title is-5 m-1 p-0"},"Preview Lead Proposal"),r("p",{class:"m-1"}," Below is a preview of the proposal that will be sent as a link to the email addresses on this client contact. The proposal can be accessed through the link while it is Released. ")],-1),Le={class:"column is-4"},je=r("h1",{class:"subtitle is-5 is-bold"},"Layout Options",-1),Ee=r("h1",{class:"subtitle is-6 mb-0"},"Header",-1),He=r("h1",{class:"subtitle is-6 mb-0"},"Body",-1),Be={class:"column is-4"},Qe=r("h1",{class:"subtitle is-5 is-bold"},"Customer Information",-1),Re={class:"column is-4"},Ze=r("h1",{class:"subtitle is-5 is-bold"},"Company Information",-1),Fe={class:"column is-12"},Ge={class:"invoice-wrapper"},ze=w('<div class="invoice-header"><div class="left"><h3>Proposal-ID PD-456-14</h3></div><div class="right"><div class="controls"><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:printer"></i></a><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:download-cloud"></i></a><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:mail"></i></a></div></div></div>',1),We={class:"invoice-body"},Je={class:"invoice-card"},$e={class:"invoice-section is-flex is-bordered"},Ke=r("div",{class:"meta"},null,-1),Xe=r("div",{class:"end"},[r("span",null,"PO Box 242"),r("span",null,"Evergreen, CO 80437-0242"),r("span",null,"Phone: 720 272-9061"),r("span",null,"Premium Trades for Premier Builders")],-1),Ye=r("div",{class:"invoice-section is-flex is-bordered"},[r("div",{class:"meta"},[r("h3",null,"Client Name"),r("span",null,"Client Phone"),r("span",null,"25724 Independence Trail Evergreen, CO 80439")]),r("div",{class:"end is-left"},[r("h3",null,"Friday Jan 17, 2025"),r("p",null," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quod equidem non reprehendo. ")])],-1),el={class:"invoice-section"},ll={class:"responsive-table"},al=["innerHTML"],tl={key:1},ol={class:"invoice-section is-flex mt-0 pt-0"},sl={class:"end is-left"},il={class:"text-right"},nl=r("p",null,"Mentioned price are final",-1),ul=e({__name:"ProposalPreview",props:{columnsToShow:{}},setup(e){const l=e,t=Ne(),o=a([{name:"Website Redesign",unit:"hrs",quantity:54,rate:24},{name:"Logo Design",unit:"hrs",quantity:12,rate:24},{name:"Custom Illustrations",unit:"hrs",quantity:7,rate:32}]);P((()=>{const e=o.value.reduce(((e,l)=>e+l.quantity*l.rate),0),l=.1*e;return[{label:"Subtotal",value:e},{label:"Taxes",value:l},{label:"Total",value:e+l}]}));const s=a(""),n=a(!0),c=a(!0),m=a(!0),f=a(!0),h=P((()=>Ae.value.reduce(((e,l)=>e+l.price*l.quantity),0)));return(e,a)=>{const o=W,g=E,k=j,C=z,T=G;return i(),_("div",Oe,[qe,r("div",Le,[je,Ee,d(k,null,{default:u((()=>[d(g,{class:"flex-columns"},{default:u((()=>[d(o,{modelValue:p(s),"onUpdate:modelValue":a[0]||(a[0]=e=>V(s)?s.value=e:null),value:"center",label:"Centralized",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),d(o,{modelValue:p(s),"onUpdate:modelValue":a[1]||(a[1]=e=>V(s)?s.value=e:null),value:"split",label:"Space between",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"])])),_:1})])),_:1}),He,d(k,null,{default:u((()=>[d(g,{class:"flex-columns"},{default:u((()=>[d(o,{modelValue:p(n),"onUpdate:modelValue":a[2]||(a[2]=e=>V(n)?n.value=e:null),value:"column",label:"Columns",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),d(o,{modelValue:p(n),"onUpdate:modelValue":a[3]||(a[3]=e=>V(n)?n.value=e:null),value:"multiline",label:"Multiline",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),d(o,{modelValue:p(n),"onUpdate:modelValue":a[4]||(a[4]=e=>V(n)?n.value=e:null),value:"none",label:"None",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Be,[Qe,d(k,{class:"flex-columns"},{default:u((()=>[d(g,{raw:"",subcontrol:""},{default:u((()=>[d(C,{class:"mt-2 p-0",modelValue:p(c),"onUpdate:modelValue":a[5]||(a[5]=e=>V(c)?c.value=e:null),label:"Show Client Contact and Phone",color:"info"},null,8,["modelValue"])])),_:1}),d(g,{raw:"",subcontrol:""},{default:u((()=>[d(C,{class:"mt-4 p-0",modelValue:p(m),"onUpdate:modelValue":a[6]||(a[6]=e=>V(m)?m.value=e:null),label:"Show Address"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Re,[Ze,d(k,{class:"flex-columns"},{default:u((()=>[d(g,{raw:"",subcontrol:""},{default:u((()=>[d(C,{class:"mt-2 p-0",modelValue:p(f),"onUpdate:modelValue":a[7]||(a[7]=e=>V(f)?f.value=e:null),label:"Show Company One Liner"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Fe,[r("div",Ge,[ze,r("div",We,[r("div",Je,[r("div",$e,[d(T,{size:"xl",picture:"/logos/IbexFavicon.png"}),Ke,Xe]),Ye,r("div",el,[r("table",ll,[r("thead",null,[(i(!0),_(v,null,b(l.columnsToShow,((e,l)=>(i(),_("th",{key:l},y(p(De)[e]),1)))),128))]),r("tbody",null,[(i(!0),_(v,null,b(p(t).proposalCostItems,((e,a)=>(i(),_("tr",{key:e.id},[(i(!0),_(v,null,b(l.columnsToShow,((l,a)=>(i(),_("td",{key:a},["Description"===l?(i(),_("div",{key:0,innerHTML:e[p(Se)[l]]},null,8,al)):(i(),_("span",tl,y(e[p(Se)[l]]),1))])))),128))])))),128))])])]),r("div",ol,[r("div",sl,[r("h3",il,"Total Price: $"+y(p(h)),1),nl])])])])])])])}}}),rl=e=>(I("data-v-56026fe8"),e=e(),M(),e),dl={class:"datatable-wrapper mt-0"},cl={class:"table-container"},pl={class:"table datatable-table is-fullwidth",id:"external-events"},ml=rl((()=>r("th",null,"Item#",-1))),_l=rl((()=>r("th",null,"Actions",-1))),vl=["data-event","onDragstart","onDrop"],bl=["innerHTML"],fl={key:1},yl=e({__name:"CostItemsTable",props:{columnsToShow:{},itemsList:{}},setup(e){const l=e;R(),a(42);const t=Ne();a(["ItemNumber","Description","Quantity","Unit","UnitCost","TotalPrice"]);const o=a({CostCode:"Cost Code",Title:"Title",Unit:"Unit",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",UnitPrice:"Unit Price",Price:"Price",TotalPrice:"Total Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",Profit:"Profit",Notes:"Internal Notes"}),n=a({CostCode:"cost_code",Title:"title",Unit:"unit",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",BuilderCost:"builder_cost",Markup:"markup",MarkupAmount:"markup_amount",UnitPrice:"unit_cost",Price:"price",TotalPrice:"total_price",GroupPrice:"group",TotalCost:"total_cost",TotalMarkup:"total_markup",Profit:"profit",Notes:"internal_notes"}),u=a(null),c=e=>{e.preventDefault()};return s((()=>{})),(e,a)=>{const s=J;return i(),_("div",dl,[r("div",cl,[r("table",pl,[r("thead",null,[ml,(i(!0),_(v,null,b(l.columnsToShow,((e,l)=>(i(),_("th",{key:l},y(p(o)[e]),1)))),128)),_l]),r("tbody",null,[p(t).proposalCostItems.length>0?(i(!0),_(v,{key:0},b(p(t).proposalCostItems,((e,a)=>(i(),_("tr",{class:"events",key:e.id,"data-event":JSON.stringify(e),draggable:"true",onDragstart:e=>(e=>{u.value=e})(a),onDrop:()=>(e=>{if(null!==u.value&&u.value!==e){const l=Ae.value[u.value];Ae.value.splice(u.value,1),Ae.value.splice(e,0,l)}u.value=null})(a),onDragover:c},[r("td",null,y(a+1),1),(i(!0),_(v,null,b(l.columnsToShow,((l,a)=>(i(),_("td",{key:a},["Description"===l?(i(),_("div",{key:0,innerHTML:e[p(n)[l]]},null,8,bl)):(i(),_("span",fl,y(e[p(n)[l]]),1))])))),128)),r("td",null,[d(s)])],40,vl)))),128)):h("",!0)])])])])}}}),hl=U(yl,[["__scopeId","data-v-56026fe8"]]),gl={class:"columns is-multiline"},kl={class:"column is-12 is-flex space-between"},Cl=r("div",null,[r("h1",{class:"title is-4"},"Proposal Worksheet")],-1),Tl={key:0,class:"column is-12"},Pl={class:"tabs-wrapper column is-12 m-0"},Vl={class:"tabs-inner mt-4"},wl={class:"tabs is-boxed"},Il=[r("span",null,"Worksheet",-1)],Ml=[r("span",null,"Format",-1)],Ul=[r("span",null,"Preview",-1)],xl={key:0,class:"column is-12"},Al={key:0,class:"column is-12"},Dl={class:"columns is-multiline"},Sl=r("div",{class:"column is-12",style:{"text-align":"center"}},[r("h1",{class:"title is-4"},"Connect your clients to their projects"),r("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),Nl={class:"column is-12"},Ol={key:0,class:"column is-12"},ql=e({__name:"WorksheetItems",props:{leadProposalModal:{type:Boolean},proposalId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:c}){const m=e,v=l();F(),R(),Q(),a(!1),a({});const b=Ne();a(!1);const y=a(["CostCode","Description","Quantity","Unit","UnitCost","TotalPrice"]),T=[{value:"ItemNumber",label:"Item Number"},{value:"Title",label:"Title"},{value:"Unit",label:"Unit"},{value:"Description",label:"Description"},{value:"CostType",label:"Cost Type"},{value:"Quantity",label:"Quantity"},{value:"UnitCost",label:"Unit Cost"},{value:"BuilderCost",label:"Builder Cost"},{value:"Markup",label:"Markup"},{value:"MarkupAmount",label:"Markup Amount"},{value:"UnitPrice",label:"Unit Price"},{value:"Price",label:"Price"},{value:"TotalPrice",label:"Total Price"},{value:"GroupPrice",label:"Group Price"},{value:"TotalCost",label:"Total Cost"},{value:"TotalMarkup",label:"Total Markup"},{value:"ClientPrice",label:"Client Price"},{value:"Profit",label:"Profit"},{value:"Notes",label:"Notes"}];a({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""}),a({title:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[]}),a([{value:"all",label:"All"},{value:"contact",label:"Contact Form"},{value:"google",label:"Google"},{value:"referral",label:"Referral"}]),a([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const P=a("worksheet");t((()=>o((()=>import("./ckeditor-50922a29.js").then((e=>e.c))),["assets/ckeditor-50922a29.js","assets/index-f5583d51.js","assets/index-1c8d8af6.css","assets/vue.runtime.esm-bundler-61fa7fd1.js"]).then((e=>e.default.component))));const w=a(!1),I=a(!1);a({id:"",type:"",total_price:0,cost_code:"",cost_type:"",builder_cost:0,internal_notes:"",mark_as:"",state:"",title:"",costType:"",description:"",quantity:0,unit:0,unit_cost:0,markup:0,clientPrice:0,costCode:"",builderCost:"",margin:0,profit:0,internalNotes:"",includeInCatalog:!1,markAs:"",group:"",proposal:""});const M=async()=>{try{b.getProposalCostItems(m.proposalId)}catch(e){console.log(e)}};return s((async()=>{v.value=await o((()=>import("./ckeditor-9eb11a96.js").then((e=>e.c))),["assets/ckeditor-9eb11a96.js","assets/index-f5583d51.js","assets/index-1c8d8af6.css"]).then((e=>e.default)),m.proposalId&&M()})),x((()=>{b.clearProposalId()})),(e,l)=>{const a=k,t=A("Multiselect"),o=E,s=j,c=hl,v=C,b=ul,U=xe;return i(),_("div",null,[r("div",gl,[r("div",kl,[Cl,r("div",null,[d(a,{size:"small",light:"",outlined:"",icon:"fas fa-cog",class:"mr-2",color:p(I)?"danger":"success",onClick:l[0]||(l[0]=e=>I.value=!p(I))},{default:u((()=>[f("Table")])),_:1},8,["color"]),d(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"info",onClick:l[1]||(l[1]=e=>w.value=!p(w))},{default:u((()=>[f("Import")])),_:1}),d(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"primary",onClick:l[2]||(l[2]=e=>w.value=!p(w))},{default:u((()=>[f("Add From")])),_:1}),d(a,{size:"small",light:"",outlined:"",color:"warning",onClick:l[3]||(l[3]=e=>w.value=!p(w))},{default:u((()=>[f("Add Item")])),_:1})])]),d(D,{class:"fade-slow",name:"fade-slow"},{default:u((()=>[p(I)?(i(),_("div",Tl,[d(s,{label:"Choose what to show to lead",class:"column is-12"},{default:u((({id:e})=>[d(o,null,{default:u((()=>[d(t,{modelValue:p(y),"onUpdate:modelValue":l[4]||(l[4]=e=>V(y)?y.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:T,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})])):h("",!0)])),_:1}),r("div",Pl,[r("div",Vl,[r("div",wl,[r("ul",null,[r("li",{class:S(["worksheet"===p(P)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:l[5]||(l[5]=N(g((e=>P.value="worksheet"),["prevent"]),["space"])),onClick:l[6]||(l[6]=e=>P.value="worksheet")},Il,32)],2),r("li",{class:S(["format"===p(P)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:l[7]||(l[7]=N(g((e=>P.value="format"),["prevent"]),["space"])),onClick:l[8]||(l[8]=e=>P.value="format")},Ml,32)],2),r("li",{class:S(["preview"===p(P)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:l[9]||(l[9]=N(g((e=>P.value="preview"),["prevent"]),["space"])),onClick:l[10]||(l[10]=e=>P.value="preview")},Ul,32)],2)])])])]),d(D,{class:"fade-slow",name:"slide-x"},{default:u((()=>["worksheet"===p(P)?(i(),_("div",xl,[d(c,{columnsToShow:p(y),proposalId:m.proposalId},null,8,["columnsToShow","proposalId"])])):h("",!0)])),_:1}),d(D,{class:"fade-slow",name:"slide-x"},{default:u((()=>["format"===p(P)?(i(),_("div",Al,[r("div",Dl,[d(s,{label:"Choose what to show to lead",class:"column is-12"},{default:u((({id:e})=>[d(o,null,{default:u((()=>[d(t,{modelValue:p(y),"onUpdate:modelValue":l[11]||(l[11]=e=>V(y)?y.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:T,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),d(v,{class:"columns is-multiline m-0"},{default:u((()=>[Sl,r("div",Nl,[d(c,{columnsToShow:p(y)},null,8,["columnsToShow"])])])),_:1})])):h("",!0)])),_:1}),d(D,{class:"fade-slow",name:"slide-x"},{default:u((()=>["preview"===p(P)?(i(),_("div",Ol,[d(b,{columnsToShow:p(y)},null,8,["columnsToShow"])])):h("",!0)])),_:1})]),p(w)?(i(),n(U,{key:0,costItemModal:p(w),proposalId:m.proposalId,"onUpdate:modalHandler":l[12]||(l[12]=e=>w.value=!1),"onUpdate:OnSuccess":M},null,8,["costItemModal","proposalId"])):h("",!0)])}}});export{ql as _,Ne as u};
