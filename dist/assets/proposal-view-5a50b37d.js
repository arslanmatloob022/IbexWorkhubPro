import{_ as e}from"./VAvatar.vue_vue_type_style_index_0_lang-df29e64b.js";import{e as l,x as s,r as a,Z as t,o as n,B as i,C as o,D as r,T as u,l as c,E as d,F as p,J as m,U as v,V as y,M as _,O as f}from"./index-19e874b3.js";import{u as g,c as h}from"./proposalItems-141eb10a.js";import{u as b}from"./useAPI-fc7260cf.js";import"./useNotyf-38a1015d.js";import"./notyf-1884a72b.js";import"./useThemeColors-e2d1205b.js";import"./userSession-7178c796.js";const x={class:"columns is-multiline"},T={class:"column is-12 mt-4"},q={class:"invoice-wrapper"},P={class:"invoice-header"},j={class:"left"},C={class:"right"},k={class:"controls"},w={class:"invoice-body"},I={class:"invoice-card"},$={class:"invoice-section is-flex is-bordered"},M=r("div",{class:"meta"},null,-1),O=r("div",{class:"end"},[r("span",null,"PO Box 242"),r("span",null,"Evergreen, CO 80437-0242"),r("span",null,"Phone: 720 272-9061"),r("span",null,"Premium Trades for Premier Builders")],-1),B=r("div",{class:"invoice-section is-flex is-bordered"},[r("div",{class:"meta"},[r("h3",null,"Client Name"),r("span",null,"Client Phone"),r("span",null,"25724 Independence Trail Evergreen, CO 80439")]),r("div",{class:"end is-left"},[r("h3",null,"Friday Jan 17, 2025"),r("p",null," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quod equidem non reprehendo. ")])],-1),L={key:0,class:"invoice-section"},z={class:"responsive-table"},D=r("br",null,null,-1),S=["innerHTML"],A={class:"invoice-section is-flex mt-0 pt-0"},E={class:"end is-left"},F={class:"text-right"},H=r("p",null,"Mentioned price are final",-1),J=l({__name:"proposal-view",props:{previewModal:{type:Boolean},columnsToShow:{default:!1},proposalId:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:J}){const N=s(),R=b();g();const U=a([{name:"Website Redesign",unit:"hrs",quantity:54,rate:24},{name:"Logo Design",unit:"hrs",quantity:12,rate:24},{name:"Custom Illustrations",unit:"hrs",quantity:7,rate:32}]);t((()=>{const e=U.value.reduce(((e,l)=>e+l.quantity*l.rate),0),l=.1*e;return[{label:"Subtotal",value:e},{label:"Taxes",value:l},{label:"Total",value:e+l}]}));const Z=["Item","Description","Unit Cost","Qty","Unit","Builder Cost","Markup","Total Price"],Q=t((()=>h.value.reduce(((e,l)=>e+l.price*l.quantity),0))),V=a(!1),K=a({id:"c897de41-609f-4a20-8d79-0537b6a873d6",title:"Test Lead's Proposal",approval_deadline:"2025-01-30",internal_notes:null,introductory_text:null,closing_text:null,payment_status:"Pending",type:"proposal",status:"pending",created_at:"2025-01-21T19:08:06.509861Z",updated_at:"2025-01-21T19:08:06.509875Z",job:"da0aa7c1-3744-4856-a637-e5a821f5ec7e"}),W=a([{id:"",index:0,title:"",description:"",type:"",quantity:0,unit:"",unit_cost:"",markup:"",total_price:"",cost_code:"",cost_type:"",builder_cost:"",margin:"",profit:"",internal_notes:"",mark_as:"",state:"",group_amount:"",status:null,created_at:"",proposal:""}]),G=async()=>{try{const e=await R.get(`api/cost/by-proposal/${N.query.proposal}/`);W.value=e.data}catch(e){console.log(e)}};return n((()=>{N.query.proposal&&(async()=>{try{V.value=!0;const e=await R.get(`/api/lead-proposal/${N.query.proposal}/`);K.value=e.data,G()}catch(e){console.log(e)}finally{V.value=!1}})()})),(l,s)=>{const a=f,t=e;return i(),o("div",x,[r("div",T,[r("div",q,[r("div",P,[r("div",j,[r("h3",null,"Proposal "+u(c(N).query.proposal?.slice(0,8)),1)]),r("div",C,[r("div",k,[d(a,{size:"xsmall",outlined:"",color:"primary"},{default:p((()=>[m("Accept")])),_:1}),d(a,{size:"xsmall",class:"ml-2",outlined:"",color:"info"},{default:p((()=>[m("Review")])),_:1}),d(a,{size:"xsmall",class:"ml-2",outlined:"",color:"danger"},{default:p((()=>[m("Reject")])),_:1})])])]),r("div",w,[r("div",I,[r("div",$,[d(t,{size:"xl",picture:"/logos/IbexFavicon.png"}),M,O]),B,c(W).length?(i(),o("div",L,[r("table",z,[r("thead",null,[(i(),o(v,null,y(Z,((e,l)=>r("th",{key:l},u(e),1))),64))]),r("tbody",null,[(i(!0),o(v,null,y(c(W),((e,l)=>(i(),o("tr",{key:e.id},[r("td",null,[r("span",null,u(e.title),1),D,r("span",null,u(e.cost_code),1)]),r("td",null,[r("span",{innerHTML:e.description},null,8,S)]),r("td",null,[r("span",null," $"+u(e.unit_cost),1)]),r("td",null,[r("span",null,u(e.quantity),1)]),r("td",null,[r("span",null,u(e.unit),1)]),r("td",null,[r("span",null," $"+u(e.builder_cost),1)]),r("td",null,[r("span",null," $"+u(e.markup),1)]),r("td",null,[r("span",null," $"+u(e.total_price),1)])])))),128))])])])):_("",!0),r("div",A,[r("div",E,[r("h3",F,"Total Price: $"+u(c(Q)),1),H])])])])])])])}}});export{J as default};
