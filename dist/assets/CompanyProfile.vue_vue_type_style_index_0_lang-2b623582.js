import{_ as e}from"./EditCompany.vue_vue_type_script_setup_true_lang-41aec66c.js";import{_ as t}from"./VTabs.vue_vue_type_script_setup_true_lang-c9f76750.js";import{_ as l}from"./TeamMembaresNetwork.vue_vue_type_style_index_0_lang-248b0723.js";import{_ as s}from"./VModal.vue_vue_type_style_index_0_lang-e44a152d.js";import{f as a,r as i,o as n,C as o,O as r,G as c,E as d,L as u,m as p,X as m,F as y,D as v,N as g,K as f,J as h,P as x,V as _,W as b,I as w,U as k,S as C,B as T,a4 as q,k as A,w as D,H as I,Q as z,R as S,s as O,y as j,$ as V}from"./index-ad60eb89.js";import{_ as M}from"./VField.vue_vue_type_script_setup_true_lang-33a8026b.js";import{_ as R}from"./VControl-51dce2e2.js";import{_ as E}from"./VRadio.vue_vue_type_style_index_0_lang-dd0324f8.js";import{u as N}from"./useAPI-7fa47a36.js";import{u as L}from"./useNotyf-49f4c377.js";import{u as U}from"./company-36f0a947.js";import{u as Q}from"./supportElements-b47eaad5.js";import{_ as $}from"./SweetAlert.vue_vue_type_style_index_0_lang-d8767172.js";import{_ as F}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-c2669f2b.js";import{_ as P}from"./VFlex.vue_vue_type_style_index_0_lang-997df615.js";import{_ as B}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-162c6ae5.js";import{_ as H}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-bb342b9b.js";import{_ as W}from"./VFlexItem.vue_vue_type_style_index_0_lang-6cb59d80.js";import{_ as Y}from"./VBlock.vue_vue_type_style_index_0_lang-deacaafc.js";import{_ as G}from"./VAvatar.vue_vue_type_style_index_0_lang-26d64bce.js";import{_ as J}from"./VDropdown.vue_vue_type_style_index_0_lang-a1ec1456.js";import{_ as K,a as Z}from"./search-4-dark-3664abd4.js";import{_ as X}from"./VTag.vue_vue_type_style_index_0_lang-0b121b87.js";import{_ as ee}from"./VTextarea.vue_vue_type_script_setup_true_lang-669c0d76.js";import{_ as te}from"./VIconButton-37db0687.js";import{_ as le}from"./VFilePond.vue_vue_type_script_lang-ea167aaf.js";import{a as se}from"./useSupportElement-a64a79fb.js";import{_ as ae}from"./VIconWrap.vue_vue_type_style_index_0_lang-47b99cb7.js";import{_ as ie}from"./VPeity.vue_vue_type_script_setup_true_lang-8ef5569a.js";import{A as ne}from"./vue3-apexcharts.common-feb9bc1e.js";import{u as oe}from"./useThemeColors-792e7afa.js";const re={class:"modal-form columns is-multiline"},ce={class:"field column is-12 mb-0"},de=d("label",null,"Questoin Title: *",-1),ue={class:"control"},pe={class:"field column is-12 mb-0"},me=d("label",null,"Answer type: *",-1),ye={key:0,class:"field column is-12 mb-0"},ve=d("label",null,"Correct Answer: *",-1),ge={class:"control"},fe=a({__name:"WorkerQuestion",props:{QuestionModalOpen:{type:Boolean},type:{},industryID:{},questionId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,a=U(),_=i(!1),b=L(),w=N(),k=i({id:0,title:"",type:"CheckBox",correctAnswer:"",questionFor:"",created_at:"",arezCompany:0,industry:0}),C=()=>{t("update:modalHandler",!1)},T=async()=>{try{const e={title:k.value.title,type:k.value.type,correctAnswer:k.value.correctAnswer,questionFor:l.type,arezCompany:a.loggedCompany.id,industry:l.industryID};if(l.questionId){const t=await w.patch(`/v3/api/partner/questions/${l.questionId}/`,e);console.log("question",t.data),b.success("Question updated succesfuly.")}else{const t=await w.post("/v3/api/partner/questions/",e);console.log("question",t.data),b.success("Question added succesfuly.")}t("update:OnSuccess",null)}catch(e){console.log(e)}};return n((()=>{l.questionId&&(async()=>{try{const e=await w.get(`/v3/api/partner/questions/${l.questionId}/`);k.value=e.data}catch(e){console.log(e)}})()})),(e,t)=>{const a=E,i=R,n=M,b=x,w=s;return o(),r(w,{is:"form",open:l.QuestionModalOpen,title:"Question",actions:"right",onSubmit:h(T,["prevent"]),onClose:C},{content:c((()=>[d("div",re,[d("div",ce,[de,d("div",ue,[u(d("input",{type:"text",name:"title","onUpdate:modelValue":t[0]||(t[0]=e=>p(k).title=e),class:"input is-primary-focus",placeholder:"Question Title"},null,512),[[m,p(k).title]])])]),d("div",pe,[me,y(n,{class:"is-flex"},{default:c((()=>[y(i,{raw:"",subcontrol:""},{default:c((()=>[y(a,{modelValue:p(k).type,"onUpdate:modelValue":t[1]||(t[1]=e=>p(k).type=e),value:"CheckBox",label:"Choice",color:"primary"},null,8,["modelValue"])])),_:1}),y(i,{raw:"",subcontrol:""},{default:c((()=>[y(a,{modelValue:p(k).type,"onUpdate:modelValue":t[2]||(t[2]=e=>p(k).type=e),value:"Input",label:"Text",color:"info"},null,8,["modelValue"])])),_:1})])),_:1})]),"CheckBox"==p(k).type?(o(),v("div",ye,[ve,d("div",ge,[y(n,{class:"is-flex"},{default:c((()=>[y(i,{raw:"",subcontrol:""},{default:c((()=>[y(a,{modelValue:p(k).correctAnswer,"onUpdate:modelValue":t[3]||(t[3]=e=>p(k).correctAnswer=e),value:"true",label:"Yes",color:"primary"},null,8,["modelValue"])])),_:1}),y(i,{raw:"",subcontrol:""},{default:c((()=>[y(a,{modelValue:p(k).correctAnswer,"onUpdate:modelValue":t[4]||(t[4]=e=>p(k).correctAnswer=e),value:"false",label:"NO",color:"info"},null,8,["modelValue"])])),_:1})])),_:1})])])):g("",!0)])])),action:c((()=>[y(b,{type:"submit",color:"primary",loading:p(_),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),he={style:{"z-index":"10000"}},xe={class:"modal-form columns is-multiline"},_e={class:"field column is-12 mb-0"},be={class:"indutryOptions"},we=["onClick","src"],ke=a({__name:"TemplateIcons",setup(e){const t=Q(),l=i(!1),a=i("");return n((()=>{t.loadIcons()})),(e,i)=>{const n=R,r=M,u=x,m=s;return o(),v("div",he,[y(m,{open:p(t).isOpenTemplateModal,title:"Select icon",size:"big",actions:"right",onClose:p(t).closeTemplateModal},{content:c((()=>[d("div",xe,[d("div",_e,[y(r,null,{default:c((()=>[y(n,null,{default:c((()=>[d("div",be,[(o(!0),v(_,null,b(p(t).templateIcons,((e,l)=>(o(),v("div",{class:"options",key:l},[d("img",{onClick:()=>{p(t).setIcon(e),a.value=e.id},class:w(p(a)==e.id?"cus-img":""),src:e.icon},null,10,we),d("p",null,k(e.title.length<8?e.title:`${e.title.slice(0,8)}... `),1)])))),128))])])),_:1})])),_:1}),y(r,{id:"interests",class:"p-0",label:""})])])])),action:c((()=>[y(u,{color:"primary",style:{display:"none"},loading:p(l),raised:""},{default:c((()=>[f(" Select")])),_:1},8,["loading"])])),cancel:c((()=>[y(u,{style:{display:"none"},onClick:p(t).closeTemplateModal,raised:""},{default:c((()=>[f("Close")])),_:1},8,["onClick"])])),_:1},8,["open","onClose"])])}}}),Ce=C(ke,[["__scopeId","data-v-cf66b438"]]),Te=d("h1",{class:"cus-stat-heading mb-3"}," Selecte industry to view related compliance template ",-1),qe={class:"tabs-inner"},Ae={class:"tabs is-boxed"},De=["id"],Ie=["onClick"],ze={key:0,style:{"background-color":"transparent",border:"none"},class:"list-widget is-straight mt-0 mb-4"},Se={class:"widget-head"},Oe={class:"dark-inverted"},je={class:"profile-body"},Ve={class:"tabs-wrapper is-flex space-between"},Me={class:"tabs-inner"},Re={class:"tabs"},Ee=["onClick"],Ne=["onClick"],Le={class:"is-flex cus-align-center"},Ue={key:2,style:{display:"flex",gap:"16px","align-items":"center"}},Qe=["onClick"],$e=["src"],Fe={class:"meta"},Pe={key:0,class:"tab-content is-active"},Be={class:"cus-stat-heading"},He={class:"light-text"},We={class:"mt-2 mb-2",style:{display:"flex","flex-wrap":"wrap"}},Ye=["onClick"],Ge=d("div",{class:"icon"},[d("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1),Je=d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Info")],-1),Ke=[Ge,Je],Ze=d("hr",{class:"dropdown-divider"},null,-1),Xe=["onClick"],et=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),tt=d("div",{class:"meta"},[d("span",null,"Archive"),d("span",null,"Remove from list")],-1),lt=[et,tt],st=d("a",{href:"#"},null,-1),at={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},it={class:"mt-1",href:"#",style:{color:"var(--light-text)","font-size":"12px"}},nt={class:"cus-align-center mt-2"},ot={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},rt={style:{color:"var(--light-text)","font-size":"12px"}},ct={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},dt={style:{color:"var(--light-text)","font-size":"12px"}},ut=d("hr",null,null,-1),pt=d("h2",{class:"cus-stat-heading"},"(Archived)",-1),mt={style:{display:"flex","flex-wrap":"wrap"}},yt=["onClick"],vt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),gt=d("div",{class:"meta"},[d("span",null,"Un-Archive"),d("span",null,"Remove from list")],-1),ft=[vt,gt],ht=d("a",{href:"#"},null,-1),xt={class:"is-flex mb-1",style:{display:"flex","justify-content":"space-between",width:"100%"}},_t={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},bt={class:"cus-align-center mt-2"},wt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},kt={style:{color:"var(--light-text)","font-size":"12px"}},Ct={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Tt={style:{color:"var(--light-text)","font-size":"12px"}},qt={key:0},At=d("p",{class:""},"No document added for this industry",-1),Dt=[At],It={key:1,class:"tab-content is-active"},zt={style:{display:"flex","flex-wrap":"wrap"}},St=["onClick"],Ot=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),jt=d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit question")],-1),Vt=[Ot,jt],Mt=["onClick"],Rt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),Et=d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete question")],-1),Nt=[Rt,Et],Lt=d("a",{href:"#"},null,-1),Ut={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},Qt={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},$t={key:0,class:"is-flex"},Ft=d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ",-1),Pt={key:1},Bt=[d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ------ ",-1)],Ht={key:0},Wt=[d("p",{class:""},"No question added for this industry",-1)],Yt={class:"widget-head"},Gt=d("h3",{class:"dark-inverted"},"Industry",-1),Jt={class:"tile-grid-item"},Kt={class:"tile-grid-item-inner placeload-wrap is-flex"},Zt=d("img",{class:"light-image",src:K,alt:""},null,-1),Xt=d("img",{class:"dark-image",src:Z,alt:""},null,-1),el={class:"cus-justify-center"},tl=d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1),ll={class:"modal-form columns is-multiline"},sl=d("div",{class:"field column is-12 mb-0"},[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"14px"}},[d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: "),f(" Introducing a new template document to our industry without affecting existing files. This action adds new documents and removes all other current ones. "),d("br")])])],-1),al={class:"field column is-12 mb-0"},il=d("label",null,[f("To assign, type: "),d("span",{style:{"font-weight":"500"}},"Assign This Template"),f(" below:")],-1),nl={class:"control"},ol=a({__name:"PertnerCompanyDocuments",props:{users:{default:()=>[]},id:{},companyInfo:{}},setup(e){const t=e,l=U();i(!1);const a=i(0),h=i(!1),C=N(),D=L();i(!1),i(!1),i(!1),i("update");const I=i(0);i({});const z=i(!1),S=i(0),O=i(!0),j=i(!1),V=i(""),M=i(0),R=i(0),E=i(!1),Q=i(""),K=i(0),Z=i(!1),X=i(0),ee=i(0),te=i(0),le=i([{industry_id:"",industry_name:"",industry_logo:"",doc_count:"",docs:[{id:0,documentTitle:"",icon:"",subTitle:"",arezCompany:"",industry:"",step:"",archived:!1,expiryDateRequired:!1}],questions:[{id:0,title:"Fifth Question",type:"Input",correctAnswer:"",questionFor:"partner",created_at:"2024-03-19T10:45:58.093663Z",arezCompany:0,industry:0}]}]),se=i([{id:1,title:"Limited Screening",subtitle:"Limited screening documents uploads are required during worker signup",step:"step_1"},{id:2,title:"Full Screening",subtitle:"Full screening documents may be uploaded after the worker's successful signup process",step:"step_2"}]),ae=i({title:"",alertIcon:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});i({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0});const ie=i([{id:0,title:"",created_at:"",doc_count:0,industry:{id:0,name:"",industryLogo:""}}]),ne=async()=>{try{Z.value=!1,E.value=!1,h.value=!0;const e=await C.get(`v3/api/partner/company_document/${t.id}/get_documents_of_a_company/`,{});Z.value=!1;const s=e.data.map((e=>{const t=l.loggedCompany.industry.find((t=>t.id===e.industry_id));return{...e,industry_logo:t?.industryLogo||null,industry_name:t?.name||e.industry_name,activeTab:t?.id==ee.value?"ques":"docs"}}));l.loggedCompany.industry.forEach((t=>{e.data.some((e=>e.industry_id===t.id))||s.push({industry_id:t.id,industry_name:t.name,industry_logo:t.industryLogo,doc_count:0,docs:[],activeTab:"docs"})})),console.log("result array",l.loggedCompany.industry),le.value=s,te.value=le.value.length>0?le.value[0].industry_id:0,h.value=!1,setTimeout((()=>{window.location.hash=M.value}),1e3)}catch(e){console.error("ok",e)}},oe=(e,t)=>{I.value=e,O.value=t,console.log("the id "+e),S.value=3,ae.value={title:"Archive this document?",alertIcon:"lnir lnir-alarm-2",subtitle:"This document will be archived, and it will be deleted  permanently after 30 days",btntext:"Yes, Archive it",isSweetAlertOpen:!0}},re=()=>{1==S.value?de():2==S.value?ce():3==S.value&&ue()},ce=async()=>{try{if("Assign This Template"!=V.value)return void D.error("Invalid Captcha Text");z.value=!0,ae.value.isSweetAlertOpen=!1;const e=await C.post("/v3/api/partner/compliance/template/assign-template-to-company/",{company:t.id,template:a.value});j.value=!1,D.success(e.data),ne()}catch(e){D.error("Server error while assigning the template")}finally{z.value=!1,V.value=""}},de=async()=>{try{ae.value.isSweetAlertOpen=!1;await C.delete(`/v3/api/partner/company_document/${I.value}/`,{});ne(),D.dismissAll(),D.success("Delete company document, Company Document")}catch(e){console.error("ok",e)}},ue=async()=>{try{ae.value.isSweetAlertOpen=!1;await C.patch(`/v3/api/partner/company_document/${I.value}/archive-company-document/`,{archived:O.value});ne(),D.warning("Document archived")}catch(e){console.log(e)}};return n((()=>{ne(),(async()=>{try{const e=await C.get(`/v3/api/partner/compliance/template/get-company-indutries-tmeplates/${t.id}/`);ie.value=e.data,console.log(e.data)}catch(e){console.log(e)}})()})),(e,t)=>{const l=x,i=J,n=G,h=Y,S=W,O=H,N=B,L=P,U=F,de=$,ue=s,pe=T("SupplierTemplateDocModal"),me=Ce,ye=fe;return o(),v(_,null,[y(L,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap",styl:"just"},{default:c((()=>[Te,d("div",qe,[d("div",Ae,[d("ul",null,[(o(!0),v(_,null,b(p(le),((e,t)=>(o(),v("li",{key:t,id:e.industry_id,class:w([e.industry_id===p(te)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:t=>{return l=e.industry_id,te.value=0,void(te.value=l);var l}},[d("span",null,k(e.industry_name),1)],8,Ie)],10,De)))),128))])])]),0!=p(le).length?(o(!0),v(_,{key:0},b(p(le),((t,s)=>(o(),r(S,{key:s,id:t.industry_id},{default:c((()=>[e.GetLoadinG||t.industry_id!=p(te)?g("",!0):(o(),v("div",ze,[d("div",Se,[d("h3",Oe,k(t.industry_name),1)]),d("div",je,[d("div",Ve,[d("div",Me,[d("div",Re,[d("ul",null,[d("li",{class:w(["docs"===t.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{t.activeTab="docs",ee.value=0}},[d("span",null,"Documents ("+k(t.doc_count)+")",1)],8,Ee)],2),d("li",{class:w(["ques"===t.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{t.activeTab="ques",ee.value=t.industry_id}},[d("span",null,"Questions ("+k(t.questions?t.questions.length:0)+")",1)],8,Ne)],2)])])]),d("div",Le,["ques"==t.activeTab?(o(),r(l,{key:0,light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{Q.value="partner",K.value=t.industry_id,Z.value=!0,X.value=0},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Question ")])),_:2},1032,["onClick"])):g("",!0),"docs"==t.activeTab?(o(),r(l,{key:1,class:"mr-4",light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{I.value=0,R.value=t.industry_id,E.value=!0,e.scrollToIndustry=t.industry_id},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Document ")])),_:2},1032,["onClick"])):g("",!0),"docs"==t.activeTab?(o(),v("div",Ue,[y(i,{title:"Compliance Template",color:"primary",right:"",spaced:""},{content:c((()=>[(o(!0),v(_,null,b(p(ie),(e=>(o(),v("div",{key:e.id},[e.industry.id===t.industry_id?(o(),v("a",{key:0,onClick:()=>{a.value=e.id,M.value=t.industry_id,j.value=!0},class:"dropdown-item is-media"},[d("img",{class:"item-img",src:e.industry.industryLogo,alt:""},null,8,$e),d("div",Fe,[d("span",null,k(e.title),1),d("span",null,k(e.industry.name)+" "+k(-e.doc_count?`(${e.doc_count})`:""),1)])],8,Qe)):g("",!0)])))),128))])),_:2},1024)])):g("",!0)])])]),"docs"==t.activeTab?(o(),v("div",Pe,[(o(!0),v(_,null,b(p(se),(l=>(o(),v("div",{key:l.id},[d("h2",Be,"("+k(l.title)+")",1),d("p",He,k(l.subtitle),1),d("div",We,[(o(!0),v(_,null,b(t.docs,((s,a)=>(o(),v("div",{key:s.id,class:""},[0==t.docs[a].archived&&t.docs[a].step==l.step?(o(),r(h,{key:0,center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px",border:"1px solid #89898930"}},{icon:c((()=>[y(n,{picture:s.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{I.value=s.id,E.value=!0,e.scrollToIndustry=t.industry_id}},Ke,8,Ye),Ze,d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(s.id,!0)},lt,8,Xe)])),_:2},1024)])),default:c((()=>[st,d("span",at,k(s.documentTitle),1),d("a",it,k(s.subTitle?s.subTitle.slice(0,190):"....")+" "+k(s.subTitle&&s.subTitle.length>190?"...":""),1),d("div",nt,[d("a",ot,[f("Expiry date: "),d("p",rt,k(s.expiryDateRequired?"Required":" Not required"),1)]),d("a",ct,[f("Document level: "),d("p",dt,k("step_1"==s.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))])])))),128)),ut,pt,d("div",mt,[(o(!0),v(_,null,b(t.docs,((e,l)=>(o(),v("div",{key:e.id,class:""},[1==t.docs[l].archived?(o(),r(h,{key:0,center:"",lighter:"",style:{margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px","background-color":"#fff",border:"1px solid rgba(110, 110, 110, 0.1)"}},{icon:c((()=>[y(n,{picture:e.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>oe(e.id,!1)},ft,8,yt)])),_:2},1024)])),default:c((()=>[ht,d("span",xt,k(e.documentTitle),1),d("a",_t,k(e.subTitle.slice(0,190))+" "+k(e.subTitle.length>190?"...":""),1),d("div",bt,[d("a",wt,[f("Expiry date: "),d("p",kt,k(e.expiryDateRequired?"Required":" Not required"),1)]),d("a",Ct,[f("Document level: "),d("p",Tt,k("step_1"==e.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))]),t.docs.length?g("",!0):(o(),v("div",qt,Dt))])):g("",!0),"ques"==t.activeTab?(o(),v("div",It,[d("div",zt,[(o(!0),v(_,null,b(t.questions,((e,l)=>(o(),v("div",{key:e.id,class:""},[y(h,{center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"400px","margin-left":"50px",border:"2px solid rgba(110, 110, 110, 0.247)"}},{action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{Q.value="worker",X.value=e.id,K.value=t.industry_id,Z.value=!0}},Vt,8,St),d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>(async e=>{try{await C.delete(`/v3/api/partner/questions/${e}/`),D.error("Question deleted successfuly"),ne()}catch(t){console.log(t)}})(e.id)},Nt,8,Mt)])),_:2},1024)])),default:c((()=>[Lt,d("span",Ut,k(e.title.slice(0,36)),1),d("a",Qt," Type: "+k(e.type),1),e.correctAnswer?(o(),v("div",$t,[Ft,d("a",{style:q([{"font-size":"13px"},{color:"true"==e.correctAnswer?"var(--primary)":"var(--danger)"}])},k("true"==e.correctAnswer?"Yes":"No"),5)])):(o(),v("div",Pt,Bt))])),_:2},1024)])))),128))]),t.docs.length?g("",!0):(o(),v("div",Ht,Wt))])):g("",!0)]))])),_:2},1032,["id"])))),128)):g("",!0),e.GetLoadinG?(o(),r(L,{key:1,"jusitfy-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap"},{default:c((()=>[(o(),v(_,null,b([0,1,2],(e=>d("div",{class:"list-widget is-straight",key:e},[d("div",Yt,[Gt,y(l,{color:"primary",icon:"fas fa-plus",rounded:"",style:{height:"27px","font-size":"10px"}},{default:c((()=>[f(" Document ")])),_:1})]),(o(),v(_,null,b(2,(e=>d("div",{key:e,class:"inner-list"},[d("div",Jt,[d("div",Kt,[y(O,{size:"medium"}),y(N,{width:"80%","last-line-width":"60%",class:"mx-2"})])])]))),64))]))),64))])),_:1})):g("",!0),0==p(le).length?(o(),r(U,{key:2,title:"No Industry added to this company yet !",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n    search terms you've entered. Please try different search terms or\n    criteria.",larger:""},{image:c((()=>[Zt,Xt])),_:1})):g("",!0)])),_:1}),p(ae).isSweetAlertOpen?(o(),r(de,{key:0,isSweetAlertOpen:p(ae).isSweetAlertOpen,title:p(ae).title,subtitle:p(ae).subtitle,btntext:p(ae).btntext,alertIcon:p(ae).alertIcon,onConfirm:re,onCancel:()=>p(ae).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","alertIcon","onCancel"])):g("",!0),y(ue,{open:p(j),title:"Assign Template",actions:"right",onClose:t[1]||(t[1]=e=>j.value=!1)},{content:c((()=>[d("div",el,[tl,d("div",ll,[sl,d("div",al,[il,d("div",nl,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>A(V)?V.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,p(V)]])])])])])])),cancel:c((()=>[y(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:c((()=>[f("Close")])),_:1})])),action:c((()=>[y(l,{type:"submit",onClick:ce,color:"primary",loading:p(z),raised:""},{default:c((()=>[f("Assign it ")])),_:1},8,["loading"])])),_:1},8,["open"]),p(E)?(o(),r(pe,{key:1,docID:p(I),industry:p(R),CompanyDocModalOpen:p(E),"onUpdate:modalHandler":t[2]||(t[2]=()=>{E.value=!p(E)}),"onUpdate:OnSuccess":t[3]||(t[3]=()=>{ne()})},null,8,["docID","industry","CompanyDocModalOpen"])):g("",!0),y(me),p(Z)?(o(),r(ye,{key:2,questionId:p(X),type:p(Q),industryID:p(K),QuestionModalOpen:p(Z),"onUpdate:modalHandler":t[4]||(t[4]=()=>{Z.value=!p(Z)}),"onUpdate:OnSuccess":ne},null,8,["questionId","type","industryID","QuestionModalOpen"])):g("",!0)],64)}}}),rl={class:"modal-form columns is-multiline cu-all-input"},cl={class:"field column is-12 mb-0",style:{display:"flex","justify-content":"center"}},dl={class:"field cu-align-center"},ul=d("label",{class:"light-weight"},"Icon:",-1),pl=[d("i",{style:{"font-size":"16px","font-weight":"500","margin-top":"5px"},"aria-hidden":"true",class:"iconify sidebar-svg","data-icon":"feather-plus"},null,-1)],ml={class:"control is-flex is-justify-content-center"},yl=["src"],vl={key:2},gl={class:"field column is-12 mb-0"},fl=d("label",{class:"light-weight"},"Document Title: *",-1),hl={class:"control"},xl={class:"column is-12"},_l={class:"columns mb-0"},bl={class:"field column is-12 mb-0"},wl=d("label",{class:"light-weight"},"Subtitle:",-1),kl={class:"field column is-12 mb-0"},Cl={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},Tl=d("label",{class:"light-weight"},"Document level:",-1),ql=[d("i",{style:{"font-size":"18px","font-weight":"500"},class:"iconify cu-pointer mt-1 ml-2","data-icon":"mingcute:question-fill"},null,-1)],Al={key:0,class:"field column is-12 mb-0"},Dl={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},Il=d("label",{class:"light-weight"},"Expiry Date Required:",-1),zl={key:1,class:"field column is-12 mb-0"},Sl=[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"12px"}},[d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Mandatory: "),f(" Mandatory document uploads are required during worker signup. "),d("br"),d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Optional: "),f(" Documents may be uploaded after the worker's successful signup process. ")])],-1)],Ol=a({__name:"WorkerTemplateDocModal",props:{CompanyDocModalOpen:{type:Boolean},industry:{},docID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,a=U(),b=i("update"),w=i(!0),k=i(!1),C=Q(),T=L(),A=N(),z=i(!1),S=i({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0,icon_url:"",template:0}),O=()=>{t("update:modalHandler",!1)},j=async()=>{try{console.log("tempppp",l.industry),k.value=!0,S.value.icon_url=C.selectedIcon.url;const e=se(S.value,["icon"]);if(l.docID){await A.patch(`/v3/api/company_document/${l.docID}/`,e)}else{e.append("industry",l.industry),e.append("arezCompany",a.loggedCompany.id);await A.post("/v3/api/company_document/",e)}t("update:OnSuccess",null),k.value=!1}catch(e){console.error(e),T.error("error accur ")}finally{k.value=!1}},V=(e,t)=>{const l=t.file;l&&(console.log(l),S.value={...S.value,icon:l})},E=(e,t)=>{S.value={...S.value,icon:null}};D(C,((e,t)=>{C.selectedIcon.url&&(S.value.icon=C.selectedIcon.url,console.log("add company",S.value),w.value=!1)}));const $=()=>{z.value=!z.value,console.log("calling")};return n((()=>{l.docID&&((async e=>{k.value=!0;const t=await A.get(`v3/api/company_document/${e}/`,{});S.value=t.data,console.log(t.data),k.value=!1})(l.docID),w.value=!1)})),(e,t)=>{const a=le,i=te,n=G,T=M,A=ee,D=R,N=X,L=x,U=s,Q=Ce;return o(),v(_,null,[y(U,{is:"form",open:l.CompanyDocModalOpen,title:"Compliance Document",actions:"right",onSubmit:h(j,["prevent"]),onClose:O},{content:c((()=>[d("div",rl,[d("div",cl,[y(T,{class:"column is-6"},{default:c((()=>[d("div",dl,[ul,d("a",{class:"search-link",tabindex:"0",role:"button",onClick:t[0]||(t[0]=()=>{p(C).openTemplateModal()})},pl)]),d("div",ml,[y(n,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:c((()=>[p(w)?(o(),r(a,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='fas fa-cloud-upload-alt' style='font-size:27px'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onAddfile:V,onRemovefile:E})):(o(),v("img",{key:0,class:"avatar",src:null==p(S).icon?"/images/avatars/placeholder.jpg":p(S).icon,alt:""},null,8,yl)),"update"==p(b)?(o(),v("span",vl,[p(w)?(o(),r(i,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:t[3]||(t[3]=I(h((e=>w.value=!1),["prevent"]),["space"])),onClick:t[4]||(t[4]=e=>w.value=!1)})):(o(),r(i,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:t[1]||(t[1]=I(h((e=>w.value=!0),["prevent"]),["space"])),onClick:t[2]||(t[2]=e=>w.value=!0)}))])):g("",!0)])),_:1})])])),_:1})]),d("div",gl,[fl,d("div",hl,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[5]||(t[5]=e=>p(S).documentTitle=e),required:"",class:"input is-primary-focus",placeholder:"Title"},null,512),[[m,p(S).documentTitle]])])]),d("div",xl,[d("div",_l,[d("div",bl,[wl,y(D,null,{default:c((()=>[y(A,{style:{"border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},modelValue:p(S).subTitle,"onUpdate:modelValue":t[6]||(t[6]=e=>p(S).subTitle=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])])]),d("div",kl,[d("div",Cl,[d("div",{class:"field cu-align-center"},[Tl,d("a",{class:"search-link light-text",tabindex:"0",role:"button",onClick:$},ql)]),y(D,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(N,{style:q([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_1"===p(S).step?"#2aac8e":"white",color:"step_1"===p(S).step?"white":""}]),label:"Mandatory",rounded:"",onClick:t[7]||(t[7]=()=>{p(S).step="step_1"})},null,8,["style"]),y(N,{style:q([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_2"===p(S).step?"#2aac8e":"white",color:"step_2"===p(S).step?"white":""}]),label:"Optional",rounded:"",onClick:t[8]||(t[8]=()=>{p(S).step="step_2"})},null,8,["style"])])),_:1})])]),p(z)?g("",!0):(o(),v("div",Al,[d("div",Dl,[Il,y(D,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(N,{style:q([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!1===p(S).expiryDateRequired?"#2aac8e":"white",color:!1===p(S).expiryDateRequired?"white":""}]),label:"No",rounded:"",onClick:t[9]||(t[9]=()=>{p(S).expiryDateRequired=!1})},null,8,["style"]),y(N,{style:q([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!0===p(S).expiryDateRequired?"#2aac8e":"white",color:!0===p(S).expiryDateRequired?"white":""}]),label:"Yes",rounded:"",onClick:t[10]||(t[10]=()=>{p(S).expiryDateRequired=!0})},null,8,["style"])])),_:1})])])),p(z)?(o(),v("div",zl,Sl)):g("",!0)])])),action:c((()=>[y(L,{type:"submit",color:"primary",light:"",loading:p(k),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"]),y(Q)],64)}}}),jl=e=>(z("data-v-f29f1c24"),e=e(),S(),e),Vl=jl((()=>d("h1",{class:"cus-stat-heading mb-3"}," Selecte industry to view related compliance template ",-1))),Ml={class:"tabs-inner"},Rl={class:"tabs is-boxed"},El=["id"],Nl=["onClick"],Ll={key:0,style:{"background-color":"transparent",border:"none"},class:"list-widget is-straight mt-0 mb-4"},Ul={class:"widget-head"},Ql={class:"dark-inverted"},$l={class:"profile-body"},Fl={class:"tabs-wrapper is-flex space-between"},Pl={class:"tabs-inner"},Bl={class:"tabs"},Hl=["onClick"],Wl=["onClick"],Yl={class:"is-flex cus-align-center"},Gl={key:2,style:{display:"flex",gap:"16px","align-items":"center"}},Jl=["onClick"],Kl=["src"],Zl={class:"meta"},Xl={key:0,class:"tab-content is-active"},es={class:"cus-stat-heading"},ts={class:"light-text"},ls={class:"mt-2 mb-2",style:{display:"flex","flex-wrap":"wrap"}},ss=["onClick"],as=[jl((()=>d("div",{class:"icon"},[d("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1))),jl((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Info")],-1)))],is=jl((()=>d("hr",{class:"dropdown-divider"},null,-1))),ns=["onClick"],os=[jl((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),jl((()=>d("div",{class:"meta"},[d("span",null,"Archive"),d("span",null,"Remove from list")],-1)))],rs=jl((()=>d("a",{href:"#"},null,-1))),cs={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},ds={class:"mt-1",href:"#",style:{color:"var(--light-text)","font-size":"12px"}},us={class:"cus-align-center mt-2"},ps={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ms={style:{color:"var(--light-text)","font-size":"12px"}},ys={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},vs={style:{color:"var(--light-text)","font-size":"12px"}},gs=jl((()=>d("hr",null,null,-1))),fs=jl((()=>d("h2",{class:"cus-stat-heading"},"(Archived)",-1))),hs={style:{display:"flex","flex-wrap":"wrap"}},xs=["onClick"],_s=[jl((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),jl((()=>d("div",{class:"meta"},[d("span",null,"Un-Archive"),d("span",null,"Remove from list")],-1)))],bs=jl((()=>d("a",{href:"#"},null,-1))),ws={class:"is-flex mb-1",style:{display:"flex","justify-content":"space-between",width:"100%"}},ks={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Cs={class:"cus-align-center mt-2"},Ts={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},qs={style:{color:"var(--light-text)","font-size":"12px"}},As={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Ds={style:{color:"var(--light-text)","font-size":"12px"}},Is={key:0},zs=[jl((()=>d("p",{class:""},"No document added for this industry",-1)))],Ss={key:1,class:"tab-content is-active"},Os={style:{display:"flex","flex-wrap":"wrap"}},js=["onClick"],Vs=[jl((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),jl((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit question")],-1)))],Ms=["onClick"],Rs=[jl((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),jl((()=>d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete question")],-1)))],Es=jl((()=>d("a",{href:"#"},null,-1))),Ns={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},Ls={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Us={key:0,class:"is-flex"},Qs=jl((()=>d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ",-1))),$s={key:1},Fs=[jl((()=>d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ------ ",-1)))],Ps={key:0},Bs=[jl((()=>d("p",{class:""},"No question added for this industry",-1)))],Hs={class:"widget-head"},Ws=jl((()=>d("h3",{class:"dark-inverted"},"Industry",-1))),Ys={class:"tile-grid-item"},Gs={class:"tile-grid-item-inner placeload-wrap is-flex"},Js=jl((()=>d("img",{class:"light-image",src:K,alt:""},null,-1))),Ks=jl((()=>d("img",{class:"dark-image",src:Z,alt:""},null,-1))),Zs={class:"cus-justify-center"},Xs=jl((()=>d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1))),ea={class:"modal-form columns is-multiline"},ta=jl((()=>d("div",{class:"field column is-12 mb-0"},[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"14px"}},[d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: "),f(" Introducing a new template document to our industry without affecting existing files. This action adds new documents and removes all other current ones. "),d("br")])])],-1))),la={class:"field column is-12 mb-0"},sa=jl((()=>d("label",null,[f("To assign, type: "),d("span",{style:{"font-weight":"500"}},"Assign This Template"),f(" below:")],-1))),aa={class:"control"},ia=C(a({__name:"CompanyDocuments",props:{users:{default:()=>[]},id:{},companyInfo:{}},setup(e){const t=e,l=U();i(!1);const a=i(!1),h=N(),C=L();i(!1);const T=i(0),D=i(!1),I=i(0),z=i(!0),S=i(!1),O=i(""),j=i(0),V=i(0),M=i(!1),R=i(""),E=i(0),Q=i(!1),K=i(0),Z=i(0),X=i(0),ee=i(0),te=i(0),le=i([{id:0,industry_id:"",industry_name:"",industry_logo:"",doc_count:"",docs:[{id:0,documentTitle:"",icon:"",subTitle:"",arezCompany:"",industry:"",step:"",archived:!1,expiryDateRequired:!1}],questions:[{id:0,title:"Fifth Question",type:"Input",correctAnswer:"",questionFor:"partner",created_at:"2024-03-19T10:45:58.093663Z",arezCompany:0,industry:0}]}]),se=i([{id:1,title:"Limited Screening",subtitle:"Limited screening documents uploads are required during worker signup",step:"step_1"},{id:2,title:"Full Screening",subtitle:"Full screening documents may be uploaded after the worker's successful signup process",step:"step_2"}]),ae=i({title:"",alertIcon:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});i({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0});const ie=i([{id:0,title:"",created_at:"",doc_count:0,industry:{id:0,name:"",industryLogo:""}}]),ne=async()=>{try{Q.value=!1,M.value=!1,a.value=!0;const e=await h.get(`v3/api/company_document/${t.id}/get_documents_of_a_company/`,{});Q.value=!1;const s=e.data.map((e=>{const t=l.loggedCompany.industry.find((t=>t.id===e.industry_id));return{...e,industry_logo:t?.industryLogo||null,industry_name:t?.name||e.industry_name,activeTab:t?.id==ee.value?"ques":"docs",currentSelectedIndustry:t?.id}}));l.loggedCompany.industry.forEach((t=>{e.data.some((e=>e.industry_id===t.id))||s.push({industry_id:t.id,industry_name:t.name,industry_logo:t.industryLogo,doc_count:0,docs:[],activeTab:"docs"})})),console.log("result array",l.loggedCompany.industry),le.value=s,te.value=le.value.length>0?le.value[0].industry_id:0,a.value=!1,setTimeout((()=>{window.location.hash=j.value}),1e3)}catch(e){console.error("ok",e)}},oe=(e,t)=>{T.value=e,z.value=t,console.log("the id "+e),I.value=3,ae.value={title:"Archive this document?",alertIcon:"lnir lnir-alarm-2",subtitle:"This document will be archived, and it will be deleted  permanently after 30 days",btntext:"Yes, Archive it",isSweetAlertOpen:!0}},re=()=>{1==I.value?de():2==I.value?ce():3==I.value&&ue()},ce=async()=>{try{if("Assign This Template"!=O.value)return void C.error("Invalid Captcha Text");D.value=!0,ae.value.isSweetAlertOpen=!1;const e=await h.post("/v3/api/compliance/template/assign-template-to-company/",{company:t.id,template:E.value});S.value=!1,C.success(e.data),ne()}catch(e){C.error("Server error while assigning the template")}finally{D.value=!1,O.value=""}},de=async()=>{try{ae.value.isSweetAlertOpen=!1;await h.delete(`/v3/api/company_document/${T.value}/`,{});ne(),C.dismissAll(),C.success("Delete company document, Company Document")}catch(e){console.error("ok",e)}},ue=async()=>{try{ae.value.isSweetAlertOpen=!1;await h.patch(`/v3/api/company_document/${T.value}/archive-company-document/`,{archived:z.value});ne(),C.warning("Document archived")}catch(e){console.log(e)}};return n((()=>{ne(),(async()=>{try{const e=await h.get(`/v3/api/compliance/template/get-company-indutries-tmeplates/${t.id}/`);ie.value=e.data,console.log(e.data)}catch(e){console.log(e)}})()})),(e,t)=>{const l=x,i=J,n=G,I=Y,z=W,N=H,L=B,U=P,de=F,ue=$,pe=s,me=Ol,ye=Ce,ve=fe;return o(),v(_,null,[y(U,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap",styl:"just"},{default:c((()=>[Vl,d("div",Ml,[d("div",Rl,[d("ul",null,[(o(!0),v(_,null,b(p(le),((e,t)=>(o(),v("li",{key:t,id:e.industry_id,class:w([e.industry_id===p(te)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:t=>{return l=e.industry_id,te.value=0,void(te.value=l);var l}},[d("span",null,k(e.industry_name),1)],8,Nl)],10,El)))),128))])])]),0!=p(le).length?(o(!0),v(_,{key:0},b(p(le),((e,t)=>(o(),r(z,{key:t,id:e.industry_id},{default:c((()=>[p(a)||e.industry_id!=p(te)?g("",!0):(o(),v("div",Ll,[d("div",Ul,[d("h3",Ql,k(e.industry_name),1)]),d("div",$l,[d("div",Fl,[d("div",Pl,[d("div",Bl,[d("ul",null,[d("li",{class:w(["docs"===e.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{e.activeTab="docs",ee.value=0}},[d("span",null,"Documents ("+k(e.doc_count)+")",1)],8,Hl)],2),d("li",{class:w(["ques"===e.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{e.activeTab="ques",ee.value=e.industry_id}},[d("span",null,"Questions ("+k(e.questions?e.questions.length:0)+")",1)],8,Wl)],2)])])]),d("div",Yl,["ques"==e.activeTab?(o(),r(l,{key:0,light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{R.value="worker",Z.value=e.industry_id,Q.value=!0,K.value=0},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Question ")])),_:2},1032,["onClick"])):g("",!0),"docs"==e.activeTab?(o(),r(l,{key:1,class:"mr-4",light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{T.value=0,V.value=e.industry_id,M.value=!0,X.value=e.industry_id},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Document ")])),_:2},1032,["onClick"])):g("",!0),"docs"==e.activeTab?(o(),v("div",Gl,[y(i,{title:"Compliance Template",color:"primary",right:"",spaced:""},{content:c((()=>[(o(!0),v(_,null,b(p(ie),(t=>(o(),v("div",{key:t.id},[t.industry.id===e.industry_id?(o(),v("a",{key:0,onClick:()=>{E.value=t.id,j.value=e.industry_id,S.value=!0},class:"dropdown-item is-media"},[d("img",{class:"item-img",src:t.industry.industryLogo,alt:""},null,8,Kl),d("div",Zl,[d("span",null,k(t.title),1),d("span",null,k(t.industry.name)+" "+k(-t.doc_count?`(${t.doc_count})`:""),1)])],8,Jl)):g("",!0)])))),128))])),_:2},1024)])):g("",!0)])])]),"docs"==e.activeTab?(o(),v("div",Xl,[(o(!0),v(_,null,b(p(se),(t=>(o(),v("div",{key:t.id},[d("h2",es,"("+k(t.title)+")",1),d("p",ts,k(t.subtitle),1),d("div",ls,[(o(!0),v(_,null,b(e.docs,((l,s)=>(o(),v("div",{key:l.id,class:""},[0==e.docs[s].archived&&e.docs[s].step==t.step?(o(),r(I,{key:0,center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px",border:"1px solid #89898930"}},{icon:c((()=>[y(n,{picture:l.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{T.value=l.id,M.value=!0,X.value=e.industry_id}},as,8,ss),is,d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(l.id,!0)},os,8,ns)])),_:2},1024)])),default:c((()=>[rs,d("span",cs,k(l.documentTitle),1),d("a",ds,k(l.subTitle?l.subTitle.slice(0,190):"....")+" "+k(l.subTitle&&l.subTitle.length>190?"...":""),1),d("div",us,[d("a",ps,[f("Expiry date: "),d("p",ms,k(l.expiryDateRequired?"Required":" Not required"),1)]),d("a",ys,[f("Document level: "),d("p",vs,k("step_1"==l.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))])])))),128)),gs,fs,d("div",hs,[(o(!0),v(_,null,b(e.docs,((t,l)=>(o(),v("div",{key:t.id,class:""},[1==e.docs[l].archived?(o(),r(I,{key:0,center:"",lighter:"",style:{margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px","background-color":"#fff",border:"1px solid rgba(110, 110, 110, 0.1)"}},{icon:c((()=>[y(n,{picture:t.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(t.id,!1)},_s,8,xs)])),_:2},1024)])),default:c((()=>[bs,d("span",ws,k(t.documentTitle),1),d("a",ks,k(t.subTitle.slice(0,190))+" "+k(t.subTitle.length>190?"...":""),1),d("div",Cs,[d("a",Ts,[f("Expiry date: "),d("p",qs,k(t.expiryDateRequired?"Required":" Not required"),1)]),d("a",As,[f("Document level: "),d("p",Ds,k("step_1"==t.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))]),e.docs.length?g("",!0):(o(),v("div",Is,zs))])):g("",!0),"ques"==e.activeTab?(o(),v("div",Ss,[d("div",Os,[(o(!0),v(_,null,b(e.questions,((t,l)=>(o(),v("div",{key:t.id,class:""},[y(I,{center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"400px","margin-left":"50px",border:"2px solid rgba(110, 110, 110, 0.247)"}},{action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{R.value="worker",K.value=t.id,Z.value=e.industry_id,Q.value=!0}},Vs,8,js),d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>(async e=>{try{await h.delete(`/v3/api/partner/questions/${e}/`),C.error("Question deleted successfuly"),ne()}catch(t){console.log(t)}})(t.id)},Rs,8,Ms)])),_:2},1024)])),default:c((()=>[Es,d("span",Ns,k(t.title.slice(0,36)),1),d("a",Ls," Type: "+k(t.type),1),t.correctAnswer?(o(),v("div",Us,[Qs,d("a",{style:q([{"font-size":"13px"},{color:"true"==t.correctAnswer?"var(--primary)":"var(--danger)"}])},k("true"==t.correctAnswer?"Yes":"No"),5)])):(o(),v("div",$s,Fs))])),_:2},1024)])))),128))]),e.docs.length?g("",!0):(o(),v("div",Ps,Bs))])):g("",!0)]))])),_:2},1032,["id"])))),128)):g("",!0),p(a)?(o(),r(U,{key:1,"jusitfy-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap"},{default:c((()=>[(o(),v(_,null,b([0,1,2],(e=>d("div",{class:"list-widget is-straight",key:e},[d("div",Hs,[Ws,y(l,{color:"primary",icon:"fas fa-plus",rounded:"",style:{height:"27px","font-size":"10px"}},{default:c((()=>[f(" Document ")])),_:1})]),(o(),v(_,null,b(2,(e=>d("div",{key:e,class:"inner-list"},[d("div",Ys,[d("div",Gs,[y(N,{size:"medium"}),y(L,{width:"80%","last-line-width":"60%",class:"mx-2"})])])]))),64))]))),64))])),_:1})):g("",!0),0==p(le).length?(o(),r(de,{key:2,title:"No Industry added to this company yet !",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n      search terms you've entered. Please try different search terms or\n      criteria.",larger:""},{image:c((()=>[Js,Ks])),_:1})):g("",!0)])),_:1}),p(ae).isSweetAlertOpen?(o(),r(ue,{key:0,isSweetAlertOpen:p(ae).isSweetAlertOpen,title:p(ae).title,subtitle:p(ae).subtitle,btntext:p(ae).btntext,alertIcon:p(ae).alertIcon,onConfirm:re,onCancel:()=>p(ae).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","alertIcon","onCancel"])):g("",!0),y(pe,{open:p(S),title:"Assign Template",actions:"right",onClose:t[1]||(t[1]=e=>S.value=!1)},{content:c((()=>[d("div",Zs,[Xs,d("div",ea,[ta,d("div",la,[sa,d("div",aa,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>A(O)?O.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,p(O)]])])])])])])),cancel:c((()=>[y(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:c((()=>[f("Close")])),_:1})])),action:c((()=>[y(l,{type:"submit",onClick:ce,color:"primary",loading:p(D),raised:""},{default:c((()=>[f("Assign it ")])),_:1},8,["loading"])])),_:1},8,["open"]),p(M)?(o(),r(me,{key:1,docID:p(T),industry:p(V),CompanyDocModalOpen:p(M),"onUpdate:modalHandler":t[2]||(t[2]=()=>{M.value=!p(M)}),"onUpdate:OnSuccess":t[3]||(t[3]=()=>{ne()})},null,8,["docID","industry","CompanyDocModalOpen"])):g("",!0),y(ye),p(Q)?(o(),r(ve,{key:2,questionId:p(K),type:p(R),industryID:p(Z),QuestionModalOpen:p(Q),"onUpdate:modalHandler":t[4]||(t[4]=()=>{Q.value=!p(Q)}),"onUpdate:OnSuccess":ne},null,8,["questionId","type","industryID","QuestionModalOpen"])):g("",!0)],64)}}}),[["__scopeId","data-v-f29f1c24"]]),na={class:"personal-dashboard personal-dashboard-v1"},oa={class:"dashboard-body"},ra={class:"columns is-multiline"},ca={class:"column is-12"},da={class:"dashboard-card"},ua=a({__name:"CompanyRegisterWorkerChart",setup(e){const t=oe(),l=O({series:[{name:"Registered",data:[20,34,40,50,60,80,20,46,56,80,25,60]}],chart:{height:285,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e},offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],position:"top",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{max:100,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1,formatter:function(e){return e}}},colors:[t.primary,t.secondary,t.orange],title:{text:"Registered Workers",align:"left"}});return(e,t)=>(o(),v("div",na,[d("div",oa,[d("div",ra,[d("div",ca,[d("div",da,[y(p(ne),{height:p(l).chart.height,type:p(l).chart.type,series:p(l).series,options:p(l)},null,8,["height","type","series","options"])])])])])]))}}),pa={class:"profile-wrapper"},ma={class:"is-flex"},ya=["src"],va={class:"title is-4 is-narrow ml-4 mt-4 mb-4"},ga={style:{display:"flex","padding-left":"10px","margin-left":"10px"}},fa={class:"mb-1 ml-0 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},ha={class:"profile-stat"},xa=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Name: ",-1),_a={style:{color:"var(--light-text)"}},ba={class:"profile-stat"},wa=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Email: ",-1),ka={style:{color:"var(--light-text)"}},Ca={class:"mb-1 ml-4 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},Ta={class:"profile-stat mr-2"},qa=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Status: ",-1),Aa={style:{color:"var(--light-text)"}},Da={class:"profile-stat mr-3"},Ia=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Phone: ",-1),za={style:{color:"var(--light-text)"}},Sa={class:"mb-1 ml-4 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},Oa={class:"profile-stat"},ja=d("span",{style:{color:"var(--primary)"}},"Licences: ",-1),Va={style:{color:"var(--light-text)"}},Ma={class:"profile-stat"},Ra=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Workers: ",-1),Ea={class:"profile-stat"},Na=d("span",{style:{color:"var(--primary)"}},"Check workers Sanctions: ",-1),La={key:0},Ua={class:"profile-body"},Qa={class:"columns"},$a={class:"column is-8"},Fa={class:"profile-card"},Pa={class:"profile-card-section"},Ba=d("div",{class:"columns"},[d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#e3ffe3"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"20"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}}," Active Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#ffe3e3"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"10"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}}," Not-active Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#6c31a34a"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"30"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}},"Total Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#42d04d78"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"100"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}},"Total Registered Workers")])])])])],-1),Ha={class:"column is-4"},Wa={class:"profile-card"},Ya={class:"profile-card-section no-padding"},Ga=d("div",{class:"section-title"},[d("h4",null,"Industries")],-1),Ja={class:"section-content"},Ka={class:"tools-wrapper"},Za={class:"tools-item"},Xa={class:"meta"},ei={class:"dark-inverted"},ti={key:1},li={key:2},si={key:3},ai=a({__name:"CompanyProfile",setup(s){const a=U(),u=N(),m=L(),h=j(),x=i(!1);i("about");const w=a.loggedCompany.id,C=i(!1);i({});const T=V((()=>h.query.tab?h.query.tab:"about")),A=async()=>{try{x.value=!0;const e=await u.post("/v3/api/worker/sanction/update-workers/",{company:w});console.log("sanctions",e),x.value=!1,m.success("Worker sanctions list updated successfuly")}catch(e){m.error(e)}finally{x.value=!1}};console.log("active value "+T.value);const D=async()=>{a.loadCompany(a.loggedCompany.id)};return n((()=>{})),(s,i)=>{const n=te,u=ua,m=ie,I=ae,z=ia,S=ol,O=l,j=t,V=e;return o(),v("div",pa,[d("div",{style:q([{backgroundImage:`linear-gradient(to right, ${p(a).loggedCompany.color}50, ${p(a).loggedCompany.color}30, ${p(a).loggedCompany.color}10)`},{padding:"20px 10px",display:"flex","margin-bottom":"12px",height:"180px","border-radius":"16px",border:"1px solid rgba(85, 85, 85, 0.164)"}])},[d("div",ma,[d("img",{class:"m-3",src:p(a).loggedCompany.compnayLogo?p(a).loggedCompany.compnayLogo:"/images/dummyShareProf/logo-placeholder.png",alt:"logo",style:{width:"120px",height:"auto","border-radius":"16px"}},null,8,ya),d("div",null,[d("h3",va,[f(k(p(a).loggedCompany.companyName&&p(a).loggedCompany.companyName)+" ",1),d("i",{onClick:i[0]||(i[0]=e=>{C.value=!0}),"aria-hidden":"true",class:"lnil lnil-pencil",style:{cursor:"pointer","font-size":"16px",color:"var(--primary)"}})]),d("div",ga,[d("div",fa,[d("div",ha,[xa,d("span",_a,k(p(a).loggedCompany.companyRegisteredName),1)]),d("div",ba,[wa,d("span",ka,k(p(a).loggedCompany.companyEmailAddress),1)])]),d("div",Ca,[d("div",Ta,[qa,d("span",Aa,k(p(a).loggedCompany.activationStatus?"Active":"In-Active"),1)]),d("div",Da,[Ia,d("span",za,k(p(a).loggedCompany.companyPhoneNumber),1)])]),d("div",Sa,[d("div",Oa,[ja,d("span",Va,k(p(a).loggedCompany.current_licence)+"+ ",1)]),d("div",Ma,[Ra,d("span",{onClick:i[1]||(i[1]=()=>{T.value="workers"}),style:{color:"var(--light-text)"}},k(p(a).loggedCompany.managed_workers)+" Workers",1)])]),d("div",Ea,[Na,y(n,{onClick:A,style:{padding:"2px",width:"22px",height:"22px","padding-top":"4px"},color:"primary",outlined:"",loading:p(x),circle:"",icon:"fas fa-sync-alt"},null,8,["loading"])])])])])],4),y(j,{selected:p(T),class:"mt-4",type:"toggle",tabs:[{label:"Home",value:"about",icon:"lnil lnil-home"},{label:"Worker Compliance",value:"docs",icon:"lnil lnil-licencse"},{label:"Partner Compliance",value:"partner-doc",icon:"fas fa-users"},{label:"Controllers",value:"team-members",icon:"lnil lnil-users"}]},{tab:c((({activeValue:e})=>["about"===e?(o(),v("div",La,[d("div",Ua,[d("div",Qa,[d("div",$a,[d("div",Fa,[d("div",Pa,[Ba,y(u)])])]),d("div",Ha,[d("div",Wa,[d("div",Ya,[Ga,d("div",Ja,[d("div",Ka,[(o(!0),v(_,null,b(p(a).loggedCompany.industry,(e=>(o(),v("div",Za,[e.id?(o(),r(I,{key:0,picture:e.industryLogo,alt:"img"},{after:c((()=>[y(m,{type:"pie",values:[100,100],fill:["var(--primary)","transparent"],height:50,"inner-radius":22,width:50},null,8,["fill"])])),_:2},1032,["picture"])):g("",!0),d("div",Xa,[d("span",ei,k(e.name),1)])])))),256))])])])])])])])])):g("",!0),"docs"!==e&&!p(h).query.compliance?g("",!0):(o(),v("div",ti,[y(z,{id:p(w)},null,8,["id"])])),"partner-doc"!==e&&!p(h).query.compliance?g("",!0):(o(),v("div",li,[y(S,{id:p(w)},null,8,["id"])])),"team-members"===e?(o(),v("div",si,[y(O)])):g("",!0)])),_:1},8,["selected"]),p(C)?(o(),r(V,{key:0,EditCompanyModalOpen:p(C),id:p(w),"onUpdate:handleUpdateEditCompanyModalOpen":i[2]||(i[2]=e=>C.value=e),"onUpdate:getAllCompanies":D},null,8,["EditCompanyModalOpen","id"])):g("",!0)])}}});export{ai as _};
