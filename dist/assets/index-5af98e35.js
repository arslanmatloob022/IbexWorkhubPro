import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-1dcd2a33.js";import{_ as a}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-2dd12cad.js";import{_ as l}from"./AddUpdateUser-d822a1e1.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-f8e5b132.js";import{_ as t}from"./VDropdown.vue_vue_type_style_index_0_lang-8cb5c7bf.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-99add723.js";import{_ as n}from"./VIcon.vue_vue_type_script_setup_true_lang-c83a38bd.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-0ea0cd86.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-0f3b8e88.js";import{f as u,r as d,x as p,$ as c,o as _,C as m,D as v,m as g,O as y,E as f,F as h,G as w,L as j,X as k,k as x,U as b,K as C,I as V,V as A,W as M,aS as P,N as S,P as O,A as I}from"./index-93ad3bc5.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-6194d01d.js";import{_ as E}from"./VControl-0eda132a.js";import{_ as T}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-3f415844.js";import{_ as D,a as F}from"./search-1-dark-61831a90.js";import{u as N}from"./useAPI-7a3548b0.js";import{u as L}from"./useNotyf-97a0c6d5.js";import{u as W}from"./viewWrapper-1cac9cdb.js";import{b as H}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-935e6878.js";import"./VInput.vue_vue_type_script_setup_true_lang-e4e597d5.js";import"./useVFieldContext-7406fd2c.js";import"./VLabel.vue_vue_type_script_setup_true_lang-19e69045.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-191c720a.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-c3c4a49e.js";import"./VFilePond.vue_vue_type_script_lang-86671b48.js";import"./useSupportElement-d3be6c86.js";import"./VFlex.vue_vue_type_style_index_0_lang-0b732777.js";import"./useDropdown-db1ad0c6.js";import"./VPlaceloadWrap-72927fe3.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-47b71d88.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-c1c55630.js";import"./notyf-f28b7705.js";import"./useThemeColors-8a9933d1.js";const R={key:1},Y={class:"list-view-toolbar"},$={class:"list-info"},G={key:0},K={key:1},z={class:"buttons"},B={class:"page-content-inner"},J={class:"list-view list-view-v1"},Q=f("img",{class:"light-image",src:D,alt:""},null,-1),X=f("img",{class:"dark-image",src:F,alt:""},null,-1),q={class:"list-view-inner"},Z={class:"list-view-item-inner"},ee=["onClick"],ae={class:"meta-right"},le={class:"tags"},se=["onClick"],te={class:"stat"},ie=f("span",null,"Email notify",-1),ne=f("div",{class:"separator"},null,-1),re=["onClick"],oe=f("span",null,"Status",-1),ue=["onClick"],de=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-user-alt"})],-1),f("div",{class:"meta"},[f("span",null,"Profile"),f("span",null,"View profile")],-1)],pe=["onClick"],ce=[f("div",{class:"icon"},[f("i",{class:"lnil lnil-pencil","aria-hidden":"true"})],-1),f("div",{class:"meta"},[f("span",null,"Edit"),f("span",null,"Edit Manager info")],-1)],_e=["onClick"],me=[f("div",{class:"icon"},[f("i",{class:"lnil lnil-code","aria-hidden":"true"})],-1),f("div",{class:"meta"},[f("span",null,"Password"),f("span",null,"Change user password")],-1)],ve=f("hr",{class:"dropdown-divider"},null,-1),ge=["onClick"],ye=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),f("div",{class:"meta"},[f("span",null,"Delete"),f("span",null,"Delete this user permanently")],-1)],fe=u({__name:"IbexManagers",setup(u){const I=L(),D=N(),F=d(!1),W=d(!1),H=d(""),fe=d(""),he=d(""),we=d(!1),je=p(),ke=d([{id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:null,is_active:!0,phoneNumber:"",username:"",last_name:"",is_sentMail:!1}]),xe=d({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),be=async()=>{try{W.value=!0;const e=await D.get("/api/users/by-role/manager/",{});ke.value=e.data,F.value=!1}catch(e){console.log(e)}finally{W.value=!1}},Ce=(e="")=>{H.value=e,F.value=!F.value},Ve=c((()=>he.value?ke.value.filter((e=>e.username.match(new RegExp(he.value,"i"))||e.email.match(new RegExp(he.value,"i")))):ke.value)),Ae=async()=>{try{W.value=!0;await D.delete(`/api/users/${H.value}/`);be(),xe.value.isSweetAlertOpen=!1,I.success("Manager deleted successfully")}catch(e){console.log(e)}finally{W.value=!1}},Me=e=>{je.push(`/sidebar/dashboard/managers/${e}`)};return _((()=>{be()})),(u,d)=>{const p=T,c=E,_=U,I=O,D=o,N=r,L=n,je=i,ke=t,Pe=s,Se=l,Oe=a,Ie=e;return m(),v(A,null,[g(W)?(m(),y(p,{key:0})):(m(),v("div",R,[f("div",Y,[h(_,null,{default:w((()=>[h(c,{icon:"feather:search"},{default:w((()=>[j(f("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>x(he)?he.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,g(he)]])])),_:1})])),_:1}),f("div",$,[1===g(Ve).length?(m(),v("span",G,"1 record found")):(m(),v("span",K,b(g(Ve).length)+" records found",1))]),f("div",z,[h(I,{onClick:d[1]||(d[1]=e=>Ce()),color:"primary",icon:"fas fa-plus",elevated:""},{default:w((()=>[C(" Manager ")])),_:1})])]),f("div",B,[f("div",J,[h(D,{class:V([0!==g(Ve).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[Q,X])),_:1},8,["class"]),f("div",q,[h(P,{name:"list-complete",tag:"div"},{default:w((()=>[(m(!0),v(A,null,M(g(Ve),((e,a)=>(m(),v("div",{key:a,class:"list-view-item"},[f("div",Z,[h(N,{onClick:a=>Me(e.id),picture:e.avatar,size:"large",class:"cu-pointer"},null,8,["onClick","picture"]),f("div",{onClick:a=>Me(e.id),class:"meta-left cu-pointer"},[f("h3",null,b(e.username)+" "+b(e.last_name?e.last_name:""),1),f("span",null,[f("span",null,[h(L,{icon:"lucide:mail"}),C(" "+b(e.email),1)])])],8,ee),f("div",ae,[f("div",le,[h(je,{label:e.role.replace(/^\w/,(e=>e.toUpperCase())),color:"warning",rounded:"",elevated:""},null,8,["label"])]),f("div",{onClick:a=>Me(e.id),class:"stats cu-pointer"},[f("div",te,[f("span",null,b(e.is_sentMail?"On ":"Off"),1),ie]),ne,f("div",{onClick:a=>Ce(e.id),class:"stat"},[f("span",null,b(e.is_active?"Active":"In-Active"),1),oe],8,re)],8,se),h(ke,{icon:"feather:more-vertical",spaced:"",right:""},{content:w((()=>[f("a",{role:"menuitem",onClick:a=>Me(e.id),class:"dropdown-item is-media"},de,8,ue),f("a",{role:"menuitem",onClick:()=>{F.value=!0,H.value=e.id},class:"dropdown-item is-media"},ce,8,pe),f("a",{onClick:a=>{return l=e.id,fe.value=l,void(we.value=!0);var l},role:"menuitem",class:"dropdown-item is-media"},me,8,_e),ve,f("a",{role:"menuitem",onClick:a=>{return l=e.id,H.value=l,void(xe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Manager again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l},class:"dropdown-item is-media"},ye,8,ge)])),_:2},1024)])])])))),128))])),_:1})])]),g(Ve).length>5?(m(),y(Pe,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):S("",!0)])])),g(F)?(m(),y(Se,{key:2,"is-modal-open":g(F),"user-role":"manager","user-id":g(H),"onUpdate:closeModalHandler":d[2]||(d[2]=e=>F.value=!1),"onUpdate:actionUpdateHandler":be},null,8,["is-modal-open","user-id"])):S("",!0),g(we)?(m(),y(Oe,{key:3,isModalOpen:g(we),userId:g(fe),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>we.value=!1)},null,8,["isModalOpen","userId"])):S("",!0),g(xe).isSweetAlertOpen?(m(),y(Ie,{key:4,isSweetAlertOpen:g(xe).isSweetAlertOpen,title:g(xe).title,loading:!1,subtitle:g(xe).subtitle,btntext:g(xe).btntext,onConfirm:Ae,onCancel:()=>g(xe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):S("",!0)],64)}}}),he=u({__name:"index",setup:e=>(W().setPageTitle("Managers"),I({title:"Managers"}),(e,a)=>{const l=fe;return m(),v("div",null,[h(l)])})});"function"==typeof H&&H(he);export{he as default};
