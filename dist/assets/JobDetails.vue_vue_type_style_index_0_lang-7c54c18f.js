import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-107bc108.js";import{_ as l,a as t}from"./ProjectFiles-9f7e6552.js";import{c as a,_ as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-7f6a629a.js";import{_ as i}from"./VIconWrap.vue_vue_type_style_index_0_lang-7539eb3f.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-f73859f4.js";import{_ as n}from"./VCheckbox.vue_vue_type_style_index_0_lang-48d15b2b.js";import{_ as d}from"./VTextarea.vue_vue_type_script_setup_true_lang-3e4dc1b5.js";import{_ as c}from"./VField.vue_vue_type_script_setup_true_lang-297c285d.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-b4671c37.js";import{_ as r}from"./VControl-e276bb0e.js";import{f as p,b as m,r as v,w as f,$ as h,o as _,av as y,C as b,D as g,E as k,F as w,G as x,K as j,U as C,L as V,X as U,N as T,aS as S,m as I,O as F,V as D,W as A,P,al as M,Q as O,R as E,S as K,B as R,J as $,I as B,x as N,H,k as z,aB as J,y as q}from"./index-49634c7f.js";import{_ as W,a as G}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-5e100760.js";import{u as Q}from"./useNotyf-e1706adf.js";import{_ as X}from"./ExcelFileEditor-8e26f6b6.js";import{b as Y,a as ee,C as le,f as te}from"./useSupportElement-d9e8ff7f.js";import{_ as ae}from"./VModal.vue_vue_type_style_index_0_lang-c8ca34b9.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-ce20bf5f.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-51817f66.js";import{u as oe,_ as ne,a as de}from"./groupedCircleCharts-db46c7b7.js";import{b as ce,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-2ab83525.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-8931ad6a.js";import{A as fe}from"./vue3-apexcharts.common-6fe24592.js";import{u as he}from"./salesSparksChart-b363c6f7.js";import{u as _e}from"./revenueAreaChart-c0cd3aad.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-366b5b81.js";import{h as be}from"./moment-1b9a430c.js";import{_ as ge}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-cc3d1f56.js";import{p as ke}from"./index-c1fc2d09.js";import{a as we}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-807cbf70.js";import{_ as xe}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-6acbb646.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-918be7a6.js";import{o as Ce}from"./via-placeholder-24645670.js";import{_ as Ve}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-f494f0e8.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-9b8b6f16.js";import{_ as Te}from"./VDropdown.vue_vue_type_style_index_0_lang-2d09fe81.js";import{_ as Se}from"./VPlyr.vue_vue_type_style_index_0_lang-ae1b9e98.js";import{_ as Ie}from"./VIconBox.vue_vue_type_style_index_0_lang-b125aa66.js";import{f as Fe}from"./index-5fa9b154.js";import{_ as De}from"./UIWidget.vue_vue_type_style_index_0_lang-2fdfed00.js";import{_ as Ae}from"./JobTodos.vue_vue_type_style_index_0_lang-efb7c331.js";import{_ as Pe}from"./UserCardDropdown-77dcdd92.js";import{_ as Me}from"./VTag.vue_vue_type_style_index_0_lang-e0bf2abb.js";import{_ as Oe}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-2c8b6686.js";const Ee=e=>(O("data-v-6b746c41"),e=e(),E(),e),Ke={class:"column is-12"},Re={class:"list-flex-toolbar is-reversed"},Le={class:"columns is-multiline"},$e={key:0,class:"column is-12 card p-4 curved mb-2"},Be={class:"columns is-multiline"},Ne={class:"column is-10"},He={class:"column is-2"},ze=Ee((()=>k("img",{class:"light-image",src:W,alt:""},null,-1))),Je=Ee((()=>k("img",{class:"dark-image",src:G,alt:""},null,-1))),qe={key:0,class:"column is-12 card p-4 curved mb-2"},We={class:"columns is-multiline"},Ge={class:"column is-10"},Ze={class:"column is-2"},Qe={class:"is-flex space-between mb-4 bottom-border"},Xe={class:"title is-5 m-0"},Ye={class:"content"},el={class:"is-flex"},ll={key:0,class:"columns is-multiline"},tl={class:"column is-6"},al={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},ol={class:"column is-2"},nl={class:"column is-2"},dl={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},rl={class:"column is-2"},pl={class:"is-flex columns is-multiline"},ml=p({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m();const t=Z(),p=Q(),O=v(!1),E={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},K=v(!1),R=v(!1),L=v(!1),$=v([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),B=v(""),N=v(""),H=v({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),z=v({title:"",is_template:!1,object:l.objectId??"",description:""}),J=v({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await t.get(`/api/calculation-section/?object=${l.objectId??""}&user_id=${l.userId??""}&is_template=${l.fetchTemplates??""}`);$.value=e.data}catch(e){console.error(e)}finally{O.value=!1}},W=async()=>{try{const e=z.value;await t.post("/api/calculation-section/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{O.value=!1}};f((()=>H.value.width),(()=>{let e=0;e=H.value.height*H.value.width,H.value.item_area=e.toFixed(2)})),f((()=>H.value.item_unit_price),(()=>{let e=0;e=H.value.item_area*H.value.item_unit_price,H.value.item_total_price=e.toFixed(2)})),f((()=>H.value.quantity),(()=>{let e=0;e=H.value.item_total_price*H.value.quantity,H.value.grand_total_price=e.toFixed(2)}));const G=async()=>{try{const e=H.value;e.section=B.value;await t.post("/api/calculation-section-items/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{O.value=!1}},X=h((()=>{if(N.value){const e=new RegExp(N.value,"i");return $.value.filter((l=>l.title?.match(e)))}return $.value})),ee=async e=>{try{await t.delete(`/api/calculation-section/${e}/`),p.success("Section deleted successfully!"),q()}catch(l){console.error(l),p.error("Failed to delete sheet.")}};return _((async()=>{await q(),await q()})),(e,l)=>{const t=P,p=M,m=r,v=u,f=c,h=d,_=n,O=o,$=i,q=a,Z=s,Q=y("tooltip");return b(),g("div",Ke,[k("div",Re,[w(p,null,{default:x((()=>[w(t,{icon:R.value?"fas fa-window-close":"fas fa-plus",color:R.value?"warning":"primary",class:"ml-2",raised:"",onClick:l[0]||(l[0]=e=>R.value=!R.value)},{default:x((()=>[j(C(R.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),w(t,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>R.value=!R.value)},{default:x((()=>[j("Import")])),_:1})])),_:1}),k("div",null,[w(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>N.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,N.value]])])),_:1})])]),k("div",Le,[w(S,{name:"translate-page-y"},{default:x((()=>[R.value?(b(),g("div",$e,[k("div",Be,[k("div",Ne,[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:z.value.title,"onUpdate:modelValue":l[3]||(l[3]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(h,{modelValue:z.value.description,"onUpdate:modelValue":l[4]||(l[4]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",He,[w(t,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:W},{default:x((()=>[j(" Add Section")])),_:1}),w(m,{raw:"",subcontrol:""},{default:x((()=>[w(_,{modelValue:z.value.is_template,"onUpdate:modelValue":l[5]||(l[5]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),I(X).length?T("",!0):(b(),F(O,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:x((()=>[ze,Je])),_:1})),w(S,{name:"translate-page-y"},{default:x((()=>[L.value?(b(),g("div",qe,[k("div",We,[k("div",Ge,[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:J.value.title,"onUpdate:modelValue":l[6]||(l[6]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(h,{modelValue:J.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",Ze,[w(t,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:W},{default:x((()=>[j(" Add Section")])),_:1}),w(m,{raw:"",subcontrol:""},{default:x((()=>[w(_,{modelValue:J.value.is_template,"onUpdate:modelValue":l[8]||(l[8]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),w(S,{name:"from-bottom"},{default:x((()=>[I(X).length?(b(!0),g(D,{key:0},A(I(X),((e,a)=>(b(),g("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[k("div",Qe,[k("div",null,[k("h4",Xe,C(e.title),1),k("div",Ye,[k("p",null,C(I(Y)(e.created_at)),1)])]),k("div",el,[w($,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),V(w($,{icon:"fas fa-plus",color:K.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{B.value=e,K.value=!K.value,0==K.value&&(H.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),V(w($,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),w($,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),K.value?(b(),g("div",ll,[k("div",tl,[w(f,{label:"Title"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.title,"onUpdate:modelValue":l[9]||(l[9]=e=>H.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",al,[w(f,{label:"Height"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.height,"onUpdate:modelValue":l[10]||(l[10]=e=>H.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",sl,[w(f,{label:"Width"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.width,"onUpdate:modelValue":l[11]||(l[11]=e=>H.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",il,[w(f,{label:"Area"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.item_area,"onUpdate:modelValue":l[12]||(l[12]=e=>H.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ol,[w(f,{label:"Unit"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.unit,"onUpdate:modelValue":l[13]||(l[13]=e=>H.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",nl,[w(f,{label:"Unit Price"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.item_unit_price,"onUpdate:modelValue":l[14]||(l[14]=e=>H.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",dl,[w(f,{label:"Total Price"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.item_total_price,"onUpdate:modelValue":l[15]||(l[15]=e=>H.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",cl,[w(f,{label:"Quantity"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.quantity,"onUpdate:modelValue":l[16]||(l[16]=e=>H.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ul,[w(f,{label:"Grand Total"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:H.value.grand_total_price,"onUpdate:modelValue":l[17]||(l[17]=e=>H.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",rl,[w(t,{light:"",fullwidth:"",onClick:G,color:"primary",outlined:"",class:"mt-5"},{default:x((()=>[j("Add Item")])),_:1})])])):T("",!0),k("div",pl,[e.items.length?(b(),F(Z,{key:0,class:"column is-12",data:e.items,columns:E,compact:""},{body:x((()=>[w(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:x((()=>[(b(!0),g(D,null,A(e.items,(e=>(b(),g("div",{key:e.id,class:"flex-table-item"},[w(q,{column:{grow:!0},"data-th":"Label"},{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,{column:{align:"end"}},{default:x((()=>[w($,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),w($,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):T("",!0)])])))),128)):T("",!0)])),_:1})])])}}}),vl=K(ml,[["__scopeId","data-v-6b746c41"]]),fl=e=>(O("data-v-ce90a5fa"),e=e(),E(),e),hl={key:1},_l={class:"columns is-multiline"},yl={class:"list-flex-toolbar is-reversed column is-12"},bl={class:"multiselect-single-label"},gl=["src"],kl=["src"],wl={class:"is-flex"},xl={class:"card p-4 curved is-flex space-between"},jl={class:"subtitle is-5 m-0"},Cl={class:"content"},Vl={class:"is-flex"},Ul={key:1},Tl=fl((()=>k("h1",{class:"title is-4"},"No File Uploaded",-1))),Sl=[Tl],Il={class:"modal-form columns is-multiline"},Fl={class:"file has-name"},Dl={class:"file-label"},Al=fl((()=>k("span",{class:"file-cta"},[k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})]),k("span",{class:"file-label"}," Choose a file… ")],-1))),Pl={class:"file-name light-text"},Ml=p({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m(),v(null);const t=Z(),a=Q(),s=v(!1);v([[""]]);const o=v([]),n=v([]),d=v(""),p=v(!1);v("");const y=v("");v("");const S=v(!1),O=v(0),E=v({file:"",title:"",object:l.objectId}),K=e=>{let l=e.target.files[0];E.value.file=l,y.value=l.name,E.value.title=l.name},L=v(""),B=v([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),N=async()=>{try{s.value=!0;const e=await t.get(`/api/excel-files/?object=${l.objectId}`);o.value=e.data}catch(e){console.error(e)}finally{s.value=!1}},H=(e="")=>{O.value=e,S.value=!0},z=v(!1),J=async()=>{try{z.value=!0;const e=ee(E.value,[""]);await t.post("/api/excel-files/upload-excel/",e);N(),a.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,p.value=!1}};f((()=>L.value),(e=>{e&&(async e=>{try{z.value=!0,await t.post(`/api/excel-files/create-from-template/${e}/`),a.success("Sheet create successfully"),N()}catch(l){console.error(l)}finally{z.value=!1,p.value=!1}})(e)}));v("excel");const q=h((()=>{if(d.value){const e=new RegExp(d.value,"i");return o.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return o.value.filter((e=>0==e.is_template))}));return h((()=>{if(d.value){const e=new RegExp(d.value,"i");return n.value.filter((l=>l.title?.match(e)))}return n.value})),_((async()=>{l.fetchAll&&await N(),l.userId&&(async()=>{try{s.value=!0;const e=await t.get(`/api/excel-files/by-user/${l.userId}/`);o.value=e.data}catch(e){console.error(e)}finally{s.value=!1}})(),(async()=>{try{s.value=!0;const e=await t.get("/api/excel-files/templates/");n.value=e.data,B.value=n.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{s.value=!1}})(),await N()})),(e,o)=>{const n=ie,m=R("Multiselect"),v=r,f=c,h=P,_=M,z=i,W=X,G=se,Z=u,Q=ae;return s.value?(b(),F(n,{key:0})):(b(),g("div",hl,[k("div",_l,[k("div",yl,[w(_,null,{default:x((()=>[w(f,{style:{width:"260px"}},{default:x((({id:e})=>[w(v,null,{default:x((()=>[w(m,{modelValue:L.value,"onUpdate:modelValue":o[0]||(o[0]=e=>L.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:B.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:x((({value:e})=>[k("div",bl,[k("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,gl),j(" "+C(e.name),1)])])),option:x((({option:e})=>[k("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,kl),j(" "+C(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),w(h,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:o[1]||(o[1]=e=>H())},{default:x((()=>[j("New Sheet")])),_:1}),w(h,{icon:"fas fa-upload",raised:"",light:"",onClick:o[2]||(o[2]=e=>p.value=!p.value),outlined:"",color:"primary"},{default:x((()=>[j(" File ")])),_:1})])),_:1}),k("div",wl,[w(v,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>d.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,d.value]])])),_:1})])]),I(q).length?(b(!0),g(D,{key:0},A(I(q),((e,l)=>(b(),g("div",{class:"column is-6",key:e.id},[k("div",xl,[k("div",null,[k("h4",jl,C(e.title),1),k("div",Cl,[k("p",null,C(I(Y)(e.created_at)),1)])]),k("div",Vl,[w(z,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>H(e.id),"has-background":""},null,8,["onClick"]),w(z,{onClick:l=>(async e=>{try{await t.delete(`/api/excel-files/${e}/`),a.success("Sheet deleted successfully!"),N()}catch(l){console.error(l),a.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(b(),g("div",Ul,Sl))]),S.value?(b(),F(W,{key:0,class:"fullscreen","excel-file-modal":S.value,fileId:O.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":o[4]||(o[4]=e=>{S.value=!1,N()})},null,8,["excel-file-modal","fileId","object-id"])):T("",!0),w(Q,{is:"form",open:p.value,title:"Upload Task File",size:"medium",actions:"right",onClose:o[7]||(o[7]=e=>p.value=!1),onSubmit:$(J,["prevent"])},{content:x((()=>[k("div",Il,[w(f,{class:"column is-12"},{default:x((()=>[w(G,null,{default:x((()=>[j("File Title")])),_:1}),w(v,null,{default:x((()=>[w(Z,{modelValue:E.value.title,"onUpdate:modelValue":o[5]||(o[5]=e=>E.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),w(f,{class:"column is-12",grouped:""},{default:x((()=>[w(v,null,{default:x((()=>[k("div",Fl,[k("label",Dl,[k("input",{onChange:K,class:"file-input",type:"file",name:"file",required:""},null,32),Al,k("span",Pl,C(y.value?y.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:x((()=>[w(h,{onClick:o[6]||(o[6]=e=>p.value=!1),raised:""},{default:x((()=>[j("Close")])),_:1})])),action:x((()=>[w(h,{type:"submit",color:"primary",raised:""},{default:x((()=>[j("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Ol=K(Ml,[["__scopeId","data-v-ce90a5fa"]]),El={class:"columns is-multiline"},Kl={class:"column is-3"},Rl={class:"column is-3"},Ll={class:"column is-3"},$l={class:"column is-3"},Bl={class:"column is-6"},Nl={class:"column is-6"},Hl={class:"column is-6"},zl={class:"column is-6"},Jl={class:"column is-6"},ql={class:"column is-6"},Wl=p({__name:"JobReport",setup(e){const{spark1:l,spark2:t,spark3:a,spark4:s}=he(),{revenueOptions:i}=_e(),{lineStatsChartOptions:o}=ce(),{flexRadialChartCircleOptions:n}=ue(),{flexRadialChartStripesOptions:d}=re(),{widgetGaugeGroup1Options:c,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=oe();return(e,f)=>{const h=ve,_=me,y=ne,j=de;return b(),g("div",El,[k("div",Kl,[w(h,{straight:""},{default:x((()=>[w(I(fe),{id:"widget-spark1",height:I(l).chart.height,type:I(l).chart.type,series:I(l).series,options:I(l)},null,8,["height","type","series","options"])])),_:1})]),k("div",Rl,[w(h,{straight:""},{default:x((()=>[w(I(fe),{id:"widget-spark2",height:I(t).chart.height,type:I(t).chart.type,series:I(t).series,options:I(t)},null,8,["height","type","series","options"])])),_:1})]),k("div",Ll,[w(h,{straight:""},{default:x((()=>[w(I(fe),{id:"widget-spark3",height:I(a).chart.height,type:I(a).chart.type,series:I(a).series,options:I(a)},null,8,["height","type","series","options"])])),_:1})]),k("div",$l,[w(h,{straight:""},{default:x((()=>[w(I(fe),{id:"widget-spark4",height:I(s).chart.height,type:I(s).chart.type,series:I(s).series,options:I(s)},null,8,["height","type","series","options"])])),_:1})]),k("div",Bl,[w(_,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:x((()=>[w(I(fe),{id:"line-stats-widget-chart",height:I(o).chart.height,type:I(o).chart.type,series:I(o).series,options:I(o)},null,8,["height","type","series","options"])])),_:1})]),k("div",Nl,[w(_,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:x((()=>[w(I(fe),{id:"line-stats-area-chart",height:I(i).chart.height,type:I(i).chart.type,series:I(i).series,options:I(i)},null,8,["height","type","series","options"])])),_:1})]),k("div",Hl,[w(y,{title:"Sales Revenue",straight:""},{default:x((()=>[w(I(fe),{id:"flex-stat-circle",height:I(n).chart.height,type:I(n).chart.type,series:I(n).series,options:I(n)},null,8,["height","type","series","options"])])),_:1})]),k("div",zl,[w(y,{title:"Sales Revenue",straight:""},{default:x((()=>[w(I(fe),{id:"flex-stat-radial",height:I(d).chart.height,type:I(d).chart.type,series:I(d).series,options:I(d)},null,8,["height","type","series","options"])])),_:1})]),k("div",Jl,[w(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:x((()=>[w(I(fe),{id:"group-radial-1",height:I(p).chart.height,type:I(p).chart.type,series:I(p).series,options:I(p)},null,8,["height","type","series","options"])])),chart2:x((()=>[w(I(fe),{id:"group-radial-2",height:I(m).chart.height,type:I(m).chart.type,series:I(m).series,options:I(m)},null,8,["height","type","series","options"])])),chart3:x((()=>[w(I(fe),{id:"group-radial-3",height:I(v).chart.height,type:I(v).chart.type,series:I(v).series,options:I(v)},null,8,["height","type","series","options"])])),_:1})]),k("div",ql,[w(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:x((()=>[w(I(fe),{id:"group-gauge-1",height:I(c).chart.height,type:I(c).chart.type,series:I(c).series,options:I(c)},null,8,["height","type","series","options"])])),chart2:x((()=>[w(I(fe),{id:"group-gauge-2",height:I(u).chart.height,type:I(u).chart.type,series:I(u).series,options:I(u)},null,8,["height","type","series","options"])])),chart3:x((()=>[w(I(fe),{id:"group-gauge-3",height:I(r).chart.height,type:I(r).chart.type,series:I(r).series,options:I(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Gl=e=>(O("data-v-1f68036b"),e=e(),E(),e),Zl={class:"timeline-wrapper"},Ql=Gl((()=>k("div",{class:"timeline-header"},null,-1))),Xl={class:"timeline-wrapper-inner"},Yl={class:"timeline-container"},et={class:"timeline-item is-unread"},lt={class:"date"},tt={class:"content-wrap"},at={class:"content-box"},st=Gl((()=>k("div",{class:"status"},null,-1))),it={class:"box-text"},ot={class:"meta-text"},nt=["innerHTML"],dt=p({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,t=Z(),a=v([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return _((()=>{(async()=>{try{const e=await t.get(`/api/activity-logs/?object_id=${l.object_id}`);a.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const t=ye;return b(),g("div",Zl,[Ql,k("div",Xl,[k("div",Yl,[(b(!0),g(D,null,A(I(a),(e=>(b(),g("div",et,[k("div",lt,[k("span",null,C(I(be)(e.timestamp).format("ddd, mm yyyy")),1)]),k("div",{class:B(["dot",s[e.action]])},null,2),k("div",tt,[k("div",at,[st,w(t,{picture:e.actor_info?.avatar},null,8,["picture"]),k("div",it,[k("div",ot,[k("p",null,[k("span",null,C(e.actor_info?.username??"N/A")+" "+C(e.actor_info?.last_name??"N/A"),1),k("span",{class:"log-message",innerHTML:e.message},null,8,nt)]),k("span",null,C(I(be)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),ct=K(dt,[["__scopeId","data-v-1f68036b"]]),ut={class:"table is-striped is-fullwidth"},rt=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Job"),k("th",{scope:"col"},"ID"),k("th",{scope:"col"},"Title"),k("th",{scope:"col"},"Status"),k("th",{scope:"col"},"Total Price"),k("th",{scope:"col"},"Total Tax"),k("th",{scope:"col"},"Amount Paid"),k("th",{scope:"col"},"Balance"),k("th",{scope:"col"},"Deadline"),k("th",{scope:"col"},"Date Paid"),k("th",{scope:"col"},"Files"),k("th",{scope:"col",class:"is-end"},"Actions")])],-1),pt=k("td",null,"Tina",-1),mt=k("td",null,"Bergmann",-1),vt=k("td",null,"Sales",-1),ft=k("td",null,"Tina",-1),ht=k("td",null,"Bergmann",-1),_t=k("td",null,"Sales",-1),yt=k("td",null,"Tina",-1),bt=k("td",null,"Bergmann",-1),gt=k("td",null,"Sales",-1),kt=k("td",null,"Bergmann",-1),wt=k("td",null,"Sales",-1),xt={class:"is-end"},jt={class:"is-flex is-justify-content-flex-end"},Ct=k("td",null,"Tina",-1),Vt=k("td",null,"Bergmann",-1),Ut=k("td",null,"Sales",-1),Tt=k("td",null,"Tina",-1),St=k("td",null,"Bergmann",-1),It=k("td",null,"Sales",-1),Ft=k("td",null,"Tina",-1),Dt=k("td",null,"Bergmann",-1),At=k("td",null,"Sales",-1),Pt=k("td",null,"Bergmann",-1),Mt=k("td",null,"Sales",-1),Ot={class:"is-end"},Et={class:"is-flex is-justify-content-flex-end"},Kt=k("td",null,"Tina",-1),Rt=k("td",null,"Bergmann",-1),Lt=k("td",null,"Sales",-1),$t=k("td",null,"Tina",-1),Bt=k("td",null,"Bergmann",-1),Nt=k("td",null,"Sales",-1),Ht=k("td",null,"Tina",-1),zt=k("td",null,"Bergmann",-1),Jt=k("td",null,"Sales",-1),qt=k("td",null,"Bergmann",-1),Wt=k("td",null,"Sales",-1),Gt={class:"is-end"},Zt={class:"is-flex is-justify-content-flex-end"},Qt=k("td",null,"Tina",-1),Xt=k("td",null,"Bergmann",-1),Yt=k("td",null,"Sales",-1),ea=k("td",null,"Tina",-1),la=k("td",null,"Bergmann",-1),ta=k("td",null,"Sales",-1),aa=k("td",null,"Tina",-1),sa=k("td",null,"Bergmann",-1),ia=k("td",null,"Sales",-1),oa=k("td",null,"Bergmann",-1),na=k("td",null,"Sales",-1),da={class:"is-end"},ca={class:"is-flex is-justify-content-flex-end"},ua=p({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,t=ke;N();const a=v("");return v(l.activeTab),h((()=>{if(a.value){const e=new RegExp(a.value,"i");return t.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return t})),(e,l)=>{const t=ge;return b(),g("table",ut,[rt,k("tbody",null,[k("tr",null,[pt,mt,vt,ft,ht,_t,yt,bt,gt,kt,wt,k("td",xt,[k("div",jt,[w(t)])])]),k("tr",null,[Ct,Vt,Ut,Tt,St,It,Ft,Dt,At,Pt,Mt,k("td",Ot,[k("div",Et,[w(t)])])]),k("tr",null,[Kt,Rt,Lt,$t,Bt,Nt,Ht,zt,Jt,qt,Wt,k("td",Gt,[k("div",Zt,[w(t)])])]),k("tr",null,[Qt,Xt,Yt,ea,la,ta,aa,sa,ia,oa,na,k("td",da,[k("div",ca,[w(t)])])])])])}}}),ra={class:"table is-striped is-fullwidth"},pa=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"First Name"),k("th",{scope:"col"},"Last Name"),k("th",{scope:"col"},"Position"),k("th",{scope:"col",class:"is-end"},[k("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ma=k("td",null,"Tina",-1),va=k("td",null,"Bergmann",-1),fa=k("td",null,"Head of Sales",-1),ha={class:"is-end"},_a={class:"is-flex is-justify-content-flex-end"},ya=k("td",null,"John",-1),ba=k("td",null,"Wistmus",-1),ga=k("td",null,"Senior Executive",-1),ka={class:"is-end"},wa={class:"is-flex is-justify-content-flex-end"},xa=k("td",null,"Sam",-1),ja=k("td",null,"Watson",-1),Ca=k("td",null,"Software Engineer",-1),Va={class:"is-end"},Ua={class:"is-flex is-justify-content-flex-end"},Ta=k("td",null,"Jolaine",-1),Sa=k("td",null,"Joestar",-1),Ia=k("td",null,"HR Manager",-1),Fa={class:"is-end"},Da={class:"is-flex is-justify-content-flex-end"},Aa=k("td",null,"Anders",-1),Pa=k("td",null,"Jensen",-1),Ma=k("td",null,"Accountant",-1),Oa={class:"is-end"},Ea={class:"is-flex is-justify-content-flex-end"},Ka=p({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,t=ke;N();const a=v("");return v(l.activeTab),h((()=>{if(a.value){const e=new RegExp(a.value,"i");return t.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return t})),(e,l)=>{const t=ge;return b(),g("table",ra,[pa,k("tbody",null,[k("tr",null,[ma,va,fa,k("td",ha,[k("div",_a,[w(t)])])]),k("tr",null,[ya,ba,ga,k("td",ka,[k("div",wa,[w(t)])])]),k("tr",null,[xa,ja,Ca,k("td",Va,[k("div",Ua,[w(t)])])]),k("tr",null,[Ta,Sa,Ia,k("td",Fa,[k("div",Da,[w(t)])])]),k("tr",null,[Aa,Pa,Ma,k("td",Oa,[k("div",Ea,[w(t)])])])])])}}}),Ra={class:"columns is-multiline"},La={class:"column is-12"},$a={class:"toolbar"},Ba={class:"tabs-inner"},Na={class:"tabs"},Ha=k("span",null,"Estimate",-1),za=[Ha],Ja=k("span",null,"Budget",-1),qa=[Ja],Wa=k("span",null,"Owner Invoice",-1),Ga=[Wa],Za=k("li",{class:"tab-naver"},null,-1),Qa={key:0,class:"column is-12"},Xa={key:1,class:"column is-12"},Ya={key:2,class:"column is-12"},es=p({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;N();const t=v("estimate"),a=v("");return h((()=>{if(a.value){const e=new RegExp(a.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const a=Ka,s=ua;return b(),g("div",Ra,[k("div",La,[k("div",$a,[k("div",Ba,[k("div",Na,[k("ul",null,[k("li",{class:B(["estimate"===I(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>t.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>t.value="estimate")},za,32)],2),k("li",{class:B(["budget"===I(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H($((e=>t.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>t.value="budget")},qa,32)],2),k("li",{class:B(["invoice"===I(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H($((e=>t.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>t.value="invoice")},Ga,32)],2),Za])])])])]),"estimate"===I(t)?(b(),g("div",Qa,[w(a)])):T("",!0),"budget"===I(t)?(b(),g("div",Xa)):T("",!0),"invoice"===I(t)?(b(),g("div",Ya,[w(s)])):T("",!0)])}}}),ls={class:"user-grid-toolbar"},ts=k("span",{class:"icon"},[k("i",{class:"fas fa-plus"})],-1),as=k("span",null,"Progress",-1),ss={class:"user-grid user-grid-v1"},is={class:"columns is-multiline"},os={class:"grid-item"},ns={class:"is-flex"},ds=p({__name:"JobProgressLoader",setup(e){const l=v(""),t=v(0),a=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=r,o=R("Multiselect"),n=c,d=P,u=M,p=J,m=je,v=xe;return b(),g("div",null,[k("div",ls,[w(i,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>z(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,I(l)]])])),_:1}),w(u,null,{default:x((()=>[w(n,{class:"h-hidden-mobile"},{default:x((()=>[w(i,null,{default:x((()=>[w(o,{modelValue:I(t),"onUpdate:modelValue":s[1]||(s[1]=e=>z(t)?t.value=e:null),options:a,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(d,null,{default:x((()=>[ts,as])),_:1})])),_:1})]),k("div",ss,[k("div",is,[(b(),g(D,null,A(20,(e=>k("div",{key:e,class:"column is-3"},[k("div",os,[w(p,{height:"160px",centered:"",class:"mb-2"}),w(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),k("div",ns,[w(v,{size:"small",class:"mx-1"}),w(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),cs={key:1},us={class:"card-grid-toolbar"},rs={class:"buttons"},ps=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ms=k("span",null,"Progress",-1),vs={class:"card-grid card-grid-v4"},fs=k("img",{class:"light-image",src:W,alt:""},null,-1),hs=k("img",{class:"dark-image",src:G,alt:""},null,-1),_s=["href","title"],ys=["src","alt"],bs={class:"card-grid-item-content"},gs={class:"dark-inverted"},ks={key:0},ws=k("summary",null,"Read More",-1),xs={key:0,class:"card-grid-item-footer"},js={class:"meta"},Cs={class:"dark-inverted"},Vs=p({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,t=Z(),a=v(""),s=v(!1),i=v(!1),n=v(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],u=v([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),p=async()=>{try{s.value=!0;const e=await t.get(`/api/job-progress/by-job/${l.object}/`);u.value=e.data}catch(e){console.log(e)}finally{s.value=!1}};h((()=>u.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const m=h((()=>{if(a.value){const e=new RegExp(a.value,"i");return console.log(e),u.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return u.value}));return _((()=>{"job"===l.type&&p()})),(e,t)=>{const u=ds,v=r,f=R("Multiselect"),h=c,_=P,y=o,M=ye,O=we;return I(s)?(b(),F(u,{key:0})):(b(),g("div",cs,[k("div",us,[w(v,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>z(a)?a.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,I(a)]])])),_:1}),k("div",rs,[w(h,{class:"h-hidden-mobile"},{default:x((()=>[w(v,null,{default:x((()=>[w(f,{modelValue:I(n),"onUpdate:modelValue":t[1]||(t[1]=e=>z(n)?n.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(_,{onClick:t[2]||(t[2]=e=>i.value=!I(i)),color:"primary",raised:""},{default:x((()=>[ps,ms])),_:1})])]),k("div",vs,[w(y,{class:B([0!==I(m).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[fs,hs])),_:1},8,["class"]),w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(I(m),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[k("img",{src:e.file,alt:e.title,onErrorOnce:t[3]||(t[3]=e=>I(Ce)(400,300))},null,40,ys),k("div",bs,[k("h3",gs,C(e.title?e.title:"No Title"),1),k("p",null,[j(C(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(b(),g("details",ks,[ws,j(" "+C(e.description?e.description:""),1)])):T("",!0)])]),e.uploaded_by_info?(b(),g("div",xs,[w(M,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),k("div",js,[k("span",Cs,C(e.uploaded_by_info.username??"N/A")+" "+C(e.uploaded_by_info.last_name??""),1),k("span",null,C(I(Y)(e.created_at)),1)])])):T("",!0)],8,_s)])))),128))])),_:1})]),I(i)?(b(),F(O,{key:0,job:l.object,openProgressModal:I(i),"onUpdate:OnSuccess":p,"onClose:ModalHandler":t[4]||(t[4]=e=>i.value=!1)},null,8,["job","openProgressModal"])):T("",!0)]))}}}),Us={class:"modal-form columns is-multiline"},Ts={class:"column is-full"},Ss={class:"field"},Is=k("label",{class:"label"},"Title ",-1),Fs={class:"control"},Ds={class:"field column is-half"},As={class:"file"},Ps={class:"file-label"},Ms={class:"file-cta"},Os=k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})],-1),Es={class:"file-label"},Ks=p({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e;v(null);const a=Z(),s=Q(),i=v(!1),o=m(),n=()=>{l("close:ModalHandler",!1)},d=v({type:t.type,object:t.object,title:"",uploaded_by:o.user.id,file:null}),u=async()=>{try{i.value=!0;const e=ee(d.value,["file"]);await a.post("/api/attachment/",e);le({object_type:"files",object_id:t.object,action:"CREATE",message:`Uploaded new file named <b>${d.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),n()}catch(e){console.log(e)}finally{i.value=!1}},p=v(""),f=e=>{const l=e.target,t=l.files?.[0];l.value="",t&&(d.value.file=t,p.value=t.name)};return _((()=>{})),(e,l)=>{const a=r,s=c,o=P,m=ae;return b(),F(m,{is:"form",open:t.openFileModal,title:"Add Progress",size:"medium",actions:"right",onSubmit:$(u,["prevent"]),onClose:n},{content:x((()=>[k("div",Us,[k("div",Ts,[k("div",Ss,[Is,k("div",Fs,[V(k("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>I(d).title=e)},null,512),[[U,I(d).title]])])])]),k("div",Ds,[w(s,{grouped:""},{default:x((()=>[w(a,null,{default:x((()=>[k("div",As,[k("label",Ps,[k("input",{onChange:f,class:"file-input",type:"file",name:"resume"},null,32),k("span",Ms,[Os,k("span",Es,C(I(p)?I(p):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:x((()=>[w(o,{type:"submit",color:"primary",loading:I(i),raised:""},{default:x((()=>[j(" Save")])),_:1},8,["loading"])])),cancel:x((()=>[w(o,{color:"light",onClick:n,raised:""},{default:x((()=>[j("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Rs={key:0,class:"modal-form"},Ls=["src"],$s=["src"],Bs=["src"],Ns=["src"],Hs={key:1,class:"modal-form"},zs=k("h1",{class:"title is-5"},"No media file attached",-1),Js=[zs],qs=p({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return _((async()=>{console.log("picture",t.document)})),(e,l)=>{const i=Se,o=P,n=ae;return b(),F(n,{is:"form",open:t.openDocViewModal,title:t.title?t.title:"Attached Document",size:"xl",actions:"right",onClose:a},{content:x((()=>[t.document?(b(),g("div",Rs,[t.document?.includes(".pdf")?(b(),g("iframe",{key:0,src:`${t.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ls)):t.document?.toLowerCase().includes(".doc")||t.document?.toLowerCase().includes(".docx")?(b(),g("iframe",{key:1,src:s(t.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,$s)):t.document?.toLowerCase().includes(".xls")||t.document?.toLowerCase().includes(".xlsx")?(b(),g("iframe",{key:2,src:s(t.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Bs)):T("",!0),t.document?.includes(".mp4")?(b(),F(i,{key:3,ratio:"4by3",source:t.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(b(),g("img",{key:4,src:t.document,alt:""},null,8,Ns))])):(b(),g("div",Hs,Js))])),cancel:x((()=>[w(o,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:x((()=>[j("Close")])),_:1})])),_:1},8,["open","title"])}}}),Ws={class:"tile-grid-item"},Gs={class:"tile-grid-item-inner"},Zs=["src"],Qs={class:"meta"},Xs={class:"dark-inverted"},Ys=k("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),ei=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),li=k("div",{class:"meta"},[k("span",null,"Download"),k("span",null,"Download this file")],-1),ti=[ei,li],ai=k("hr",{class:"dropdown-divider"},null,-1),si=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),ii=k("div",{class:"meta"},[k("span",null,"Delete"),k("span",null,"Delete this file")],-1),oi=[si,ii],ni=p({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const t=e,a=v(""),s=v(!1),i=v(""),o={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},n=v("");return(e,d)=>{const c=Te;return b(),g("div",null,[k("div",Ws,[k("div",Gs,[k("img",{onClick:d[0]||(d[0]=e=>{return l=t.document,a.value=l.file_info?.url,n.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:o[t.document?.file_info?.type]},null,8,Zs),k("div",Qs,[k("span",Xs,C(t.document.title??"N/A"),1),k("span",null,[k("span",null,C(t.document?.file_info?.size??0)+" MB",1),Ys,k("span",null,"At:"+C(I(te)(t.document.created_at)),1)])]),w(c,{icon:"feather:more-vertical",spaced:"",right:""},{content:x((()=>[k("a",{role:"menuitem",onClick:d[1]||(d[1]=e=>(async(e,l)=>{try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");const a=await t.blob(),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(t){console.error("Download failed:",t)}})(t.document.file,t.document.title)),class:"dropdown-item is-media"},ti),ai,k("a",{role:"menuitem",onClick:d[2]||(d[2]=e=>{return a=t.document.id,void l("deleteSelectedFile",a);var a}),class:"dropdown-item is-media"},oi)])),_:1})])]),I(s)?(b(),F(qs,{key:0,openDocViewModal:I(s),document:I(a),DocumentType:I(n),title:I(i),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):T("",!0)])}}}),di={key:1},ci={class:"tile-grid-toolbar"},ui={class:"buttons"},ri=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),pi=k("span",null,"File",-1),mi=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),vi=k("span",null,"Folder",-1),fi={class:"tile-grid tile-grid-v2"},hi=k("img",{class:"light-image",src:W,alt:""},null,-1),_i=k("img",{class:"dark-image",src:G,alt:""},null,-1),yi=p({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const t=e,a=Q(),s=Z(),i=v(""),n=v(0),d=v(""),u=v(!1),p=v(!1),m=v([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),f=["All Files","Recently Updated","My Files","Team Files","Deprecated"];v("");const y=v({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),j=()=>{y.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},C=async()=>{try{const e=await s.delete(`/api/media-folder/${t.folderId}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),a.purple("Folder Deleted Successfully"),y.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},M=async(e="proposal_formats")=>{try{u.value=!0;const e=await s.get(`/api/attachment/by-object/${t.objectId}/?type=${t.docType}`);m.value=e.data}catch(l){console.log(l)}finally{u.value=!1}},O=async e=>{try{const l=await s.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),a.purple("File Deleted Successfully"),M()}catch(l){console.log(l)}},E=h((()=>i.value?m.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):m.value));return _((()=>{M()})),(e,l)=>{const a=ie,s=r,m=R("Multiselect"),v=c,h=P,_=o,K=ni,L=Ue,$=Ks;return b(),g("div",null,[I(u)?(b(),F(a,{key:0,rows:4})):(b(),g("div",di,[k("div",ci,[w(s,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>z(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,I(i)]])])),_:1}),k("div",ui,[w(v,{class:"h-hidden-mobile"},{default:x((()=>[w(s,null,{default:x((()=>[w(m,{modelValue:I(n),"onUpdate:modelValue":l[1]||(l[1]=e=>z(n)?n.value=e:null),options:f,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(h,{onClick:l[2]||(l[2]=e=>(d.value=t.docType,void(p.value=!p.value))),color:"primary",raised:""},{default:x((()=>[ri,pi])),_:1}),w(h,{onClick:j,color:"danger",raised:""},{default:x((()=>[mi,vi])),_:1})])]),k("div",fi,[0!=I(E).length||I(u)?T("",!0):(b(),F(_,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[hi,_i])),_:1})),k("div",null,[w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(I(E),(e=>(b(),g("div",{key:e.id,class:"column is-4"},[w(K,{document:e,onDeleteSelectedFile:O},null,8,["document"])])))),128))])),_:1})])]),I(y).isSweetAlertOpen?(b(),F(L,{key:0,isSweetAlertOpen:I(y).isSweetAlertOpen,title:I(y).title,subtitle:I(y).subtitle,btntext:I(y).btntext,onConfirm:C,onCancel:()=>I(y).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):T("",!0),I(p)?(b(),F($,{key:1,openFileModal:I(p),object:t.objectId,type:I(d),"onClose:ModalHandler":l[3]||(l[3]=e=>p.value=!1),"onUpdate:OnSuccess":M},null,8,["openFileModal","object","type"])):T("",!0)]))])}}}),bi={class:"columns is-multiline"},gi={class:"column is-12"},ki={class:"column is-12"},wi=p({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},folderId:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=v(!1),s=Z(),i=Q(),o=()=>{l("update:modalHandler",!1)},n=v({id:"",type:t.type,object:t.object,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),p=async()=>{try{a.value=!0;const e=ee(n.value,[""]);await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),o()}catch(e){console.log(e)}finally{a.value=!1}};return _((()=>{(async()=>{try{a.value=!0;const e=ee(n.value,[""]);await s.post(`/api/attachment/${t.folderId}/`,e),i.success("File Uploaded successfully")}catch(e){console.log(e)}finally{a.value=!1}})()})),(e,l)=>{const s=u,i=r,m=c,v=d,f=P,h=ae;return b(),F(h,{is:"form",open:t.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:$(p,["prevent"]),onClose:l[2]||(l[2]=e=>o())},{content:x((()=>[k("div",bi,[k("div",gi,[w(m,{label:"Title *"},{default:x((()=>[w(i,null,{default:x((()=>[w(s,{modelValue:I(n).title,"onUpdate:modelValue":l[0]||(l[0]=e=>I(n).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ki,[w(m,{label:"Description (Optional)"},{default:x((()=>[w(i,null,{default:x((()=>[w(v,{modelValue:I(n).description,"onUpdate:modelValue":l[1]||(l[1]=e=>I(n).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:x((()=>[w(f,{loading:I(a),type:"submit",color:"warning",raised:""},{default:x((()=>[j("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),xi={class:"modal-form columns is-multiline"},ji={class:"column is-12 is-flex"},Ci={class:"file"},Vi=["onClick"],Ui={class:"file-cta"},Ti=k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})],-1),Si={class:"file-label"},Ii=k("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Fi={class:"column is-full"},Di=k("p",null,"Selected Photos",-1),Ai=k("br",null,null,-1),Pi=p({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=Z(),s=Q(),i=v(!1),o=m(),n=v(""),d=v(null),u=v(!1),p=()=>l("close:ModalHandler",!1),f=v({type:t.type,object:t.object,title:"",uploaded_by:o.user.id,file:null}),h=async()=>{if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const e=ee(f.value,["file"]);await a.post("/api/attachment/",e);le({object_type:"files",object_id:t.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),p()}catch(e){console.error(e)}finally{i.value=!1}},_=()=>{u.value=!0,d.value&&(d.value.accept="image/*",d.value.setAttribute("capture","environment"),d.value.removeAttribute("multiple"),d.value.click())},y=()=>{u.value=!1,d.value&&(d.value.accept="image/*",d.value.removeAttribute("capture"),d.value.setAttribute("multiple","true"),d.value.click())},V=v([]),U=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,V.value=e.map((e=>e.name)),n.value=e.length>1?`${e.length} photos selected`:e[0].name,u.value&&(f.value.title=e[0].name,await h())}d.value&&(d.value.value="")};return(e,l)=>{const a=r,s=c,o=Ie,u=P,m=ae;return b(),F(m,{is:"form",open:t.openFileModal,title:"Add Photos",size:"medium",actions:"right",onSubmit:$(h,["prevent"]),onClose:p},{content:x((()=>[k("div",xi,[k("input",{ref_key:"fileInput",ref:d,onChange:U,class:"file-input",type:"file",style:{display:"none"}},null,544),k("div",ji,[w(s,{grouped:""},{default:x((()=>[w(a,null,{default:x((()=>[k("div",Ci,[k("label",{class:"file-label",onClick:$(y,["prevent"])},[k("span",Ui,[Ti,k("span",Si,C(I(n)?I(n):"Choose photo(s)"),1)])],8,Vi)])])),_:1})])),_:1}),w(o,{class:"ml-2",onClick:_,size:"small",color:"info",bordered:""},{default:x((()=>[Ii])),_:1})]),k("div",Fi,[Di,(b(!0),g(D,null,A(I(V),(e=>(b(),g("span",null,[j(C(e)+" ",1),Ai])))),256))])])])),action:x((()=>[w(u,{type:"submit",color:"primary",loading:I(i),raised:""},{default:x((()=>[j(" Save ")])),_:1},8,["loading"])])),cancel:x((()=>[w(u,{color:"light",onClick:p,raised:""},{default:x((()=>[j("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Mi={key:1},Oi={class:"card-grid-toolbar"},Ei={class:"buttons"},Ki=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Ri=k("span",null,"Photos",-1),Li=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),$i=k("span",null,"Folder",-1),Bi={class:"card-grid card-grid-v4"},Ni=k("img",{class:"light-image",src:W,alt:""},null,-1),Hi=k("img",{class:"dark-image",src:G,alt:""},null,-1),zi=["onClick"],Ji=["src"],qi={class:"card-grid-item-footer"},Wi={class:"meta"},Gi={class:"dark-inverted"},Zi=p({__name:"ObjectPhotosCard",props:{objectId:{},docType:{},folderId:{},showFolderDeleteBtn:{type:Boolean}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const t=e,a=Q(),s=Z(),i=v(""),n=v(0),d=v(""),u=v(!1),p=v(!1),m=v([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),f=["All Files","Recently Updated","My Files","Team Files","Deprecated"];v("");const y=v({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),j=()=>{y.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},M=async()=>{try{const e=await s.delete(`/api/media-folder/${t.folderId}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),a.purple("Folder Deleted Successfully"),y.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},O=async(e="proposal_formats")=>{try{u.value=!0;const e=await s.get(`/api/attachment/by-object/${t.objectId}/?type=${t.docType}`);m.value=e.data}catch(l){console.log(l)}finally{u.value=!1}},E=v(""),K=v(!1),L=v(!1),$=v(!1),B=h((()=>i.value?m.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):m.value));return _((()=>{O()})),(e,l)=>{const a=ie,s=r,m=R("Multiselect"),v=c,h=P,_=o,N=ye,H=Ue,J=Pi,q=qs;return b(),g("div",null,[I(u)?(b(),F(a,{key:0,rows:4})):(b(),g("div",Mi,[k("div",Oi,[w(s,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>z(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,I(i)]])])),_:1}),k("div",Ei,[w(v,{class:"h-hidden-mobile"},{default:x((()=>[w(s,null,{default:x((()=>[w(m,{modelValue:I(n),"onUpdate:modelValue":l[1]||(l[1]=e=>z(n)?n.value=e:null),options:f,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(h,{onClick:l[2]||(l[2]=e=>(d.value=t.docType,void(p.value=!p.value))),color:"primary",raised:""},{default:x((()=>[Ki,Ri])),_:1}),t.showFolderDeleteBtn?(b(),F(h,{key:0,onClick:j,color:"danger",raised:""},{default:x((()=>[Li,$i])),_:1})):T("",!0)])]),k("div",Bi,[0!=I(B).length||I(u)?T("",!0):(b(),F(_,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[Ni,Hi])),_:1})),k("div",null,[w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(I(B),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{onClick:l=>{return t=e,K.value=t.file_info?.url,E.value=t.file_info?.type,L.value=t.title,void($.value=!$.value);var t},class:"card-grid-item"},[k("img",{src:e.file,alt:"",onErrorOnce:l[3]||(l[3]=e=>I(Ce)(400,300))},null,40,Ji),k("div",qi,[w(N,{picture:e.uploaded_by_info?.avatar,size:"small"},null,8,["picture"]),k("div",Wi,[k("span",Gi,C(e.uploaded_by_info.username),1),k("span",null,C(I(Y)(e.created_at)),1)])])],8,zi)])))),128))])),_:1})])]),I(y).isSweetAlertOpen?(b(),F(H,{key:0,isSweetAlertOpen:I(y).isSweetAlertOpen,title:I(y).title,subtitle:I(y).subtitle,btntext:I(y).btntext,onConfirm:M,onCancel:()=>I(y).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):T("",!0),I(p)?(b(),F(J,{key:1,openFileModal:I(p),object:t.objectId,type:I(d),"onClose:ModalHandler":l[4]||(l[4]=e=>p.value=!1),"onUpdate:OnSuccess":O},null,8,["openFileModal","object","type"])):T("",!0),I($)?(b(),F(q,{key:2,openDocViewModal:I($),document:I(K),DocumentType:I(E),title:I(L),"onUpdate:closeModalHandler":l[5]||(l[5]=e=>$.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):T("",!0)]))])}}}),Qi={class:"toolbar-header toolbar is-flex space-between"},Xi={class:"tabs-inner"},Yi={class:"tabs is-boxed"},eo=[k("span",null,"Documents",-1)],lo=[k("span",null,"Photos",-1)],to=[k("span",null,"Videos",-1)],ao=k("li",{class:"tab-naver"},null,-1),so={key:0},io={class:"toolbar-header toolbar is-flex space-between"},oo={class:"tabs-inner"},no={class:"tabs"},co=[k("span",null,"Contracts",-1)],uo=[k("span",null,"Customer Estimates",-1)],ro=[k("span",null,"Job Scope",-1)],po=[k("span",null,"Asbestos & Lead Report",-1)],mo=[k("span",null,"Permits",-1)],vo=[k("span",null,"Bids & Material",-1)],fo=[k("span",null,"Miscellaneous",-1)],ho=[k("span",null,"Uploaded Files",-1)],_o=[k("span",null,"Calculations",-1)],yo=["onKeydown","onClick"],bo={class:"is-cus-active"},go=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],ko=k("li",{class:"tab-naver"},null,-1),wo={class:"tile-grid tile-grid-v2"},xo=k("img",{class:"light-image",src:W,alt:""},null,-1),jo=k("img",{class:"dark-image",src:G,alt:""},null,-1),Co={key:0},Vo={key:1},Uo={key:2},To={key:3},So={key:4},Io={key:5},Fo={key:6},Do={key:7},Ao={key:8},Po={key:9},Mo={key:0},Oo={key:1},Eo={class:"tabs-inner"},Ko={class:"tabs"},Ro=[k("span",null,"Site Visit Photos",-1)],Lo=[k("span",null,"Inspiration Photos",-1)],$o=[k("span",null,"Trade Photos",-1)],Bo=[k("span",null,"Design Approval Photos",-1)],No=["onKeydown","onClick"],Ho={class:"is-cus-active"},zo=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],Jo=k("li",{class:"tab-naver"},null,-1),qo={class:"tile-grid tile-grid-v2"},Wo=k("img",{class:"light-image",src:W,alt:""},null,-1),Go=k("img",{class:"dark-image",src:G,alt:""},null,-1),Zo={key:0},Qo={key:1},Xo={key:2},Yo={key:3},en={key:0},ln={key:2},tn={class:"tabs-inner"},an={class:"tabs"},sn=[k("span",null,"Job videos",-1)],on=[k("span",null,"Other videos",-1)],nn=["onKeydown","onClick"],dn={class:"is-cus-active"},cn=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],un=k("li",{class:"tab-naver"},null,-1),rn={class:"tile-grid tile-grid-v2"},pn=k("img",{class:"light-image",src:W,alt:""},null,-1),mn=k("img",{class:"dark-image",src:G,alt:""},null,-1),vn={key:0},fn={key:1},hn={key:0},_n=p({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo"],setup(e,{emit:t}){const a=e;Q();const s=Z(),i=v("");v(0);const n=v(""),d=v("contracts"),c=v(!1),u=v([]),r=v("documents"),p=v("site_visits"),m=v("job_videos"),f=h((()=>i.value?Fe.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Fe)),y=()=>{t("getProjectInfo",null)},j=async(e="contracts")=>{try{d.value=e;const l=await s.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},V=v(""),U=v(!1),S=v([]),P=v([]),M=v([]),O=(e="")=>{V.value=e,U.value=!U.value},E=async(e="")=>{try{const l=await s.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?S.value=l.data:"photos"===e?P.value=l.data:"videos"===e&&(M.value=l.data)}catch(l){console.log(l)}},K=(e="documents")=>{"documents"===e?E("documents"):"photos"===e?E("photos"):"videos"===e&&E("videos")};return _((()=>{j(),K("documents")})),(e,t)=>{const s=o,i=yi,u=l,v=Ol,h=Zi,_=Ks,E=wi;return b(),g("div",null,[k("div",Qi,[k("div",Xi,[k("div",Yi,[k("ul",null,[k("li",{class:B(["documents"===I(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=H($((e=>r.value="documents"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>{r.value="documents",K("documents")})},eo,32)],2),k("li",{class:B(["photos"===I(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=H($((e=>r.value="photos"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>{r.value="photos",K("photos")})},lo,32)],2),k("li",{class:B(["videos"===I(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=H($((e=>r.value="videos"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>{r.value="videos",K("videos")})},to,32)],2),ao])])])]),"documents"==I(r)?(b(),g("div",so,[k("div",io,[k("div",oo,[k("div",no,[k("ul",null,[k("li",{class:B(["contracts"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=H($((e=>j("contracts")),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>j("contracts"))},co,32)],2),k("li",{class:B(["estimates"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=H($((e=>j("estimates")),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>j("estimates"))},uo,32)],2),k("li",{class:B(["job_scope"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=H($((e=>d.value="job_scope"),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>d.value="job_scope")},ro,32)],2),k("li",{class:B(["asbestos"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=H($((e=>d.value="asbestos"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>d.value="asbestos")},po,32)],2),k("li",{class:B(["permits"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=H($((e=>d.value="permits"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>d.value="permits")},mo,32)],2),k("li",{class:B(["material"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[16]||(t[16]=H($((e=>d.value="material"),["prevent"]),["space"])),onClick:t[17]||(t[17]=e=>d.value="material")},vo,32)],2),k("li",{class:B(["miscellaneous"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[18]||(t[18]=H($((e=>d.value="miscellaneous"),["prevent"]),["space"])),onClick:t[19]||(t[19]=e=>d.value="miscellaneous")},fo,32)],2),k("li",{class:B(["files"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[20]||(t[20]=H($((e=>j("files")),["prevent"]),["space"])),onClick:t[21]||(t[21]=e=>j("files"))},ho,32)],2),k("li",{class:B(["calculations"===I(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[22]||(t[22]=H($((e=>j("calculations")),["prevent"]),["space"])),onClick:t[23]||(t[23]=e=>j("calculations"))},_o,32)],2),(b(!0),g(D,null,A(I(S),(e=>(b(),g("li",{key:e.id,class:B([I(d)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>j(e.title)},[k("span",null,C(e.title),1)],40,yo)],2)))),128)),k("li",bo,[k("a",{tabindex:"0",role:"button",onKeydown:t[24]||(t[24]=H($((e=>O("documents")),["prevent"]),["space"])),onClick:t[25]||(t[25]=e=>O("documents"))},go,32)]),ko])])])]),k("div",wo,[w(s,{class:B([0!==I(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[xo,jo])),_:1},8,["class"]),"contracts"==I(d)?(b(),g("div",Co,[w(i,{onDeleteFolderUpdate:t[26]||(t[26]=e=>K("documents")),"doc-type":"contracts","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"estimates"==I(d)?(b(),g("div",Vo,[w(i,{onDeleteFolderUpdate:t[27]||(t[27]=e=>K("documents")),"doc-type":"estimates","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"proposal_formats"==I(d)?(b(),g("div",Uo,[w(i,{onDeleteFolderUpdate:t[28]||(t[28]=e=>K("documents")),"doc-type":"proposal_formats","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"job_scope"==I(d)?(b(),g("div",To,[w(i,{onDeleteFolderUpdate:t[29]||(t[29]=e=>K("documents")),"doc-type":"job_scope","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"asbestos"==I(d)?(b(),g("div",So,[w(i,{onDeleteFolderUpdate:t[30]||(t[30]=e=>K("documents")),"doc-type":"asbestos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"permits"==I(d)?(b(),g("div",Io,[w(i,{onDeleteFolderUpdate:t[31]||(t[31]=e=>K("documents")),"doc-type":"permits","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"material"==I(d)?(b(),g("div",Fo,[w(i,{onDeleteFolderUpdate:t[32]||(t[32]=e=>K("documents")),"doc-type":"material","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"miscellaneous"==I(d)?(b(),g("div",Do,[w(i,{onDeleteFolderUpdate:t[33]||(t[33]=e=>K("documents")),"doc-type":"miscellaneous","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"files"==I(d)?(b(),g("div",Ao,[w(u,{projectId:a.leadId,files:a.uploaded_files,"onUpdate:onUploadFile":y},null,8,["projectId","files"])])):T("",!0),"calculations"==I(d)?(b(),g("div",Po,[w(v)])):T("",!0),(b(!0),g(D,null,A(I(S),(e=>(b(),g("div",{key:e.id},[I(d)==e.title?(b(),g("div",Mo,[w(i,{onDeleteFolderUpdate:t[34]||(t[34]=e=>K("documents")),"doc-type":e.title,"object-id":a.leadId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),"photos"==I(r)?(b(),g("div",Oo,[k("div",Eo,[k("div",Ko,[k("ul",null,[k("li",{class:B(["site_visits"===I(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[35]||(t[35]=H($((e=>j("site_visits")),["prevent"]),["space"])),onClick:t[36]||(t[36]=e=>{j("site_visits"),p.value="site_visits"})},Ro,32)],2),k("li",{class:B(["inspiration_photos"===I(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[37]||(t[37]=H($((e=>j("inspiration_photos")),["prevent"]),["space"])),onClick:t[38]||(t[38]=e=>{j("inspiration_photos"),p.value="inspiration_photos"})},Lo,32)],2),k("li",{class:B(["trade_photos"===I(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[39]||(t[39]=H($((e=>j("trade_photos")),["prevent"]),["space"])),onClick:t[40]||(t[40]=e=>{j("trade_photos"),p.value="trade_photos"})},$o,32)],2),k("li",{class:B(["design_approval"===I(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[41]||(t[41]=H($((e=>j("design_approval")),["prevent"]),["space"])),onClick:t[42]||(t[42]=e=>{j("design_approval"),p.value="design_approval"})},Bo,32)],2),(b(!0),g(D,null,A(I(P),(e=>(b(),g("li",{key:e.id,class:B([I(p)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),p.value=e.title}},[k("span",null,C(e.title),1)],40,No)],2)))),128)),k("li",Ho,[k("a",{tabindex:"0",role:"button",onKeydown:t[43]||(t[43]=H($((e=>O("photos")),["prevent"]),["space"])),onClick:t[44]||(t[44]=e=>O("photos"))},zo,32)]),Jo])])]),k("div",qo,[w(s,{class:B([0!==I(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[Wo,Go])),_:1},8,["class"]),"site_visits"==I(p)?(b(),g("div",Zo,[w(h,{onDeleteFolderUpdate:t[45]||(t[45]=e=>K("photos")),"doc-type":"site_visits","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"inspiration_photos"==I(p)?(b(),g("div",Qo,[w(h,{onDeleteFolderUpdate:t[46]||(t[46]=e=>K("photos")),"doc-type":"inspiration_photos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"trade_photos"==I(p)?(b(),g("div",Xo,[w(h,{onDeleteFolderUpdate:t[47]||(t[47]=e=>K("photos")),"doc-type":"trade_photos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"design_approval"==I(p)?(b(),g("div",Yo,[w(h,{onDeleteFolderUpdate:t[48]||(t[48]=e=>K("photos")),"doc-type":"design_approval","object-id":a.leadId},null,8,["object-id"])])):T("",!0),(b(!0),g(D,null,A(I(P),(e=>(b(),g("div",{key:e.id},[I(p)==e.title?(b(),g("div",en,[w(h,{onDeleteFolderUpdate:t[49]||(t[49]=e=>K("photos")),"doc-type":e.title,"object-id":a.leadId,folderId:e.id,showFolderDeleteBtn:!0},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),"videos"==I(r)?(b(),g("div",ln,[k("div",tn,[k("div",an,[k("ul",null,[k("li",{class:B(["job_videos"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[50]||(t[50]=H($((e=>j("job_videos")),["prevent"]),["space"])),onClick:t[51]||(t[51]=e=>{m.value="job_videos",j("job_videos")})},sn,32)],2),k("li",{class:B(["other_videos"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[52]||(t[52]=H($((e=>j("other_videos")),["prevent"]),["space"])),onClick:t[53]||(t[53]=e=>{m.value="other_videos",j("other_videos")})},on,32)],2),(b(!0),g(D,null,A(I(M),(e=>(b(),g("li",{key:e.id,class:B([I(m)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),m.value=e.title}},[k("span",null,C(e.title),1)],40,nn)],2)))),128)),k("li",dn,[k("a",{tabindex:"0",role:"button",onKeydown:t[54]||(t[54]=H($((e=>O("videos")),["prevent"]),["space"])),onClick:t[55]||(t[55]=e=>O("videos"))},cn,32)]),un])])]),k("div",rn,[w(s,{class:B([0!==I(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[pn,mn])),_:1},8,["class"]),"job_videos"==I(m)?(b(),g("div",vn,[w(i,{onDeleteFolderUpdate:t[56]||(t[56]=e=>K("videos")),"doc-type":"job_videos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"other_videos"==I(m)?(b(),g("div",fn,[w(i,{"doc-type":"other_videos","object-id":a.leadId,onDeleteFolderUpdate:t[57]||(t[57]=e=>K("videos"))},null,8,["object-id"])])):T("",!0),(b(!0),g(D,null,A(I(M),(e=>(b(),g("div",{key:e.id},[I(m)==e.title?(b(),g("div",hn,[w(i,{"doc-type":e.title,"object-id":a.leadId,folderId:e.id,onDeleteFolderUpdate:t[58]||(t[58]=e=>K("videos"))},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),I(c)?(b(),F(_,{key:3,openFileModal:I(c),object:a.leadId,type:I(n),"onClose:ModalHandler":t[59]||(t[59]=e=>c.value=!1),"onUpdate:OnSuccess":j},null,8,["openFileModal","object","type"])):T("",!0),I(U)?(b(),F(E,{key:4,"open-create-folder-modal":I(U),type:I(V),object:a.leadId,"onUpdate:modalHandler":t[60]||(t[60]=e=>U.value=!1),"onUpdate:onSuccess":t[61]||(t[61]=e=>K(I(V)))},null,8,["open-create-folder-modal","type","object"])):T("",!0)])}}}),yn={class:"business-dashboard hr-dashboard"},bn={class:"columns is-multiline"},gn={class:"column is-12"},kn={class:"columns is-multiline"},wn={class:"column is-12"},xn={class:"block-header"},jn={class:"left"},Cn={class:"current-user"},Vn={class:"center"},Un=k("h4",{class:"block-heading"},"Address",-1),Tn={class:"block-text"},Sn=k("br",null,null,-1),In=k("br",null,null,-1),Fn={class:"right"},Dn=k("h4",{class:"block-heading"},"Managers",-1),An={class:"candidates"},Pn=k("button",null,[k("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),Mn={class:"column is-12"},On={class:"toolbar"},En={class:"tabs-inner"},Kn={class:"tabs is-boxed"},Rn=[k("span",null,"Job Management",-1)],Ln=[k("span",null,"Documents/Files",-1)],$n=[k("span",null,"Proposals",-1)],Bn=[k("span",null,"Tasks",-1)],Nn=[k("span",null,"Activities",-1)],Hn=[k("span",null,"Job progress",-1)],zn=[k("span",null,"Calculations",-1)],Jn=[k("span",null,"Finance",-1)],qn=[k("span",null,"Report",-1)],Wn=k("li",{class:"tab-naver"},null,-1),Gn={key:0,class:"column is-12"},Zn={class:"columns is-multiline"},Qn={class:"column is-8"},Xn={class:"columns is-multiline"},Yn={class:"column is-12"},ed={class:"feed-settings"},ld=k("h3",{class:"dark-inverted"},"Job feeds",-1),td={class:"buttons"},ad={class:"column is-4"},sd={class:"side-text"},id=k("h3",{class:"dark-inverted"},"Job Description",-1),od=["innerHTML"],nd=k("a",{class:"action-link",tabindex:"0"},"Read More",-1),dd={class:"column is-7 is-offset-1"},cd={class:"incoming"},ud=k("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),rd=k("div",null,[k("span",{class:"item-name dark-inverted"},"Messages"),k("span",{class:"item-meta"},[k("span",null,"Inbox messages")])],-1),pd=k("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),md=k("div",null,[k("span",{class:"item-name dark-inverted"},"Tasks"),k("span",{class:"item-meta"},[k("span",null,"Pending tasks")])],-1),vd={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},fd={key:4,class:"light-text"},hd={class:"column is-12"},_d={class:"recent-rookies"},yd=k("div",{class:"recent-rookies-header"},[k("h3",{class:"dark-inverted"},"Internal Users"),k("a",{class:"action-link",tabindex:"0"},"View All")],-1),bd={class:"columns is-multiline user-grid user-grid-v4"},gd={class:"column is-4"},kd={class:"grid-item"},wd={class:"dark-inverted"},xd={class:"capitalized"},jd={class:"button-wrap has-text-centered"},Cd={class:"column is-4"},Vd={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},Ud=k("div",{class:"widget-toolbar"},[k("div",{class:"left"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),k("div",{class:"center"},[k("h3",null,"October 2020")]),k("div",{class:"right"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),Td=k("table",{class:"calendar"},[k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Mon"),k("th",{scope:"col"},"Tue"),k("th",{scope:"col"},"Wed"),k("th",{scope:"col"},"Thu"),k("th",{scope:"col"},"Fri"),k("th",{scope:"col"},"Sat"),k("th",{scope:"col"},"Sun")])]),k("tbody",null,[k("tr",null,[k("td",{class:"prev-month"},"29"),k("td",{class:"prev-month"},"30"),k("td",{class:"prev-month"},"31"),k("td",null,"1"),k("td",null,"2"),k("td",null,"3"),k("td",null,"4")]),k("tr",null,[k("td",null,"5"),k("td",null,"6"),k("td",null,"7"),k("td",null,"8"),k("td",null,"9"),k("td",null,"10"),k("td",null,"11")]),k("tr",null,[k("td",null,"12"),k("td",null,"13"),k("td",null,"14"),k("td",null,"15"),k("td",null,"16"),k("td",null,"17"),k("td",{class:"current-day"},"18")]),k("tr",null,[k("td",null,"19"),k("td",null,"20"),k("td",null,"21"),k("td",null,"22"),k("td",null,"23"),k("td",null,"24"),k("td",null,"25")]),k("tr",null,[k("td",null,"26"),k("td",null,"27"),k("td",null,"28"),k("td",null,"29"),k("td",null,"30"),k("td",null,"31"),k("td",{class:"next-month"},"1")])])],-1),Sd={key:1,class:"column is-12"},Id={key:2,class:"column is-12"},Fd={class:"tabs-inner"},Dd={class:"tabs is-boxed"},Ad=[k("span",null,"Proposals",-1)],Pd=[k("span",null,"Grouped Proposals",-1)],Md={key:0},Od={key:1},Ed={key:3,class:"column is-12"},Kd={key:4,class:"column is-12"},Rd={key:5,class:"column is-12"},Ld={key:6,class:"column is-12"},$d={key:7,class:"column is-12"},Bd={key:8,class:"column is-12"},Nd={key:9,class:"column is-12"},Hd={class:"tabs-inner"},zd={class:"tabs is-boxed"},Jd=[k("span",null,"Excel Sheets",-1)],qd=[k("span",null,"Custom Calculations",-1)],Wd={key:0},Gd={key:1},Zd={key:10},Qd=p({__name:"JobDetails",setup(a){const i=q();N();const o=Z(),n=Q(),d=v(!1),c=v(""),u=v(!1);v(null),v("Untitled"),v({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const r=v({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),p=v("excel"),m=v("management"),f=v("childProposals"),h=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],U={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let S;const O=async()=>{try{d.value=!0;const e=await o.get(`/api/project/${i.params.id}/detail/`);r.value=e.data,e.data.latitude&&((e,l)=>{if(S&&S.remove(),S=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(S),e&&l){const t=[e,l];L.marker(t).addTo(S),S.setView(t,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{d.value=!1}},E=v([]),K=v(!1),R=async()=>{try{K.value=!0;await o.patch(`/api/project/${i.params.id}/`,{status:"completed"});n.success("Jobs Completed Successfully."),O()}catch(Error){console.log(Error)}finally{K.value=!1}};return _((()=>{O()})),(a,n)=>{const d=ye,v=Me,_=P,S=M,K=Ie,L=s,N=Pe,z=Ae,J=De,q=_n,W=yi,G=Ve,Z=Vs,Q=es,X=ct,Y=Wl,ee=t,le=Ol,te=vl,ae=l,se=e,ie=y("tooltip");return b(),g("div",yn,[k("div",bn,[k("div",gn,[k("div",kn,[k("div",wn,[k("div",xn,[k("div",jn,[k("div",Cn,[w(d,{size:"large",picture:"lead"==I(r).current_state?"/icons/lead-shield-96.png":"/icons/job-sheild.png",squared:""},null,8,["picture"]),k("h3",null,[j(C(I(r).title?I(r).title:"No Title")+" ",1),k("sup",null,[w(v,{rounded:"",size:"tiny",color:"info"},{default:x((()=>[j(C(I(r).status),1)])),_:1})])])])]),k("div",Vn,[Un,k("p",Tn,[j(C(I(r).address?I(r).address:"No Address Added")+" ",1),Sn,j(" "+C(I(r).city?I(r).city:"No City Added")+", "+C(I(r).state?I(r).state:"No State Added")+" ",1),In,j(" "+C(I(r).zip_code?I(r).zip_code:"No Zip Code Added"),1)])]),k("div",Fn,[Dn,k("div",An,[(b(!0),g(D,null,A(I(r).managers_list,(e=>V((b(),F(d,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[ie,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),Pn]),w(S,null,{default:x((()=>[w(_,{class:"mt-1",onClick:n[0]||(n[0]=e=>{return l=I(i).params.id,c.value=l,void(u.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:x((()=>[j(" Update "+C("lead"==I(r).current_state?"lead":"job"),1)])),_:1}),"lead"!=I(r).current_state?(b(),F(_,{key:0,class:"mt-1",onClick:R,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:x((()=>[j(" Mark As Done ")])),_:1})):T("",!0)])),_:1})])])]),k("div",Mn,[k("div",On,[k("div",En,[k("div",Kn,[k("ul",null,[k("li",{class:B(["management"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=H($((e=>m.value="management"),["prevent"]),["space"])),onClick:n[2]||(n[2]=e=>m.value="management")},Rn,32)],2),k("li",{class:B(["documents"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=H($((e=>m.value="documents"),["prevent"]),["space"])),onClick:n[4]||(n[4]=e=>m.value="documents")},Ln,32)],2),k("li",{class:B(["proposals"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=H($((e=>m.value="proposals"),["prevent"]),["space"])),onClick:n[6]||(n[6]=e=>m.value="proposals")},$n,32)],2),k("li",{class:B(["tasks"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=H($((e=>m.value="tasks"),["prevent"]),["space"])),onClick:n[8]||(n[8]=e=>m.value="tasks")},Bn,32)],2),k("li",{class:B(["activities"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[9]||(n[9]=H($((e=>m.value="activities"),["prevent"]),["space"])),onClick:n[10]||(n[10]=e=>m.value="activities")},Nn,32)],2),k("li",{class:B(["progress"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[11]||(n[11]=H($((e=>m.value="progress"),["prevent"]),["space"])),onClick:n[12]||(n[12]=e=>m.value="progress")},Hn,32)],2),k("li",{class:B(["calculations"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[13]||(n[13]=H($((e=>m.value="calculations"),["prevent"]),["space"])),onClick:n[14]||(n[14]=e=>m.value="calculations")},zn,32)],2),k("li",{class:B(["finance"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[15]||(n[15]=H($((e=>m.value="finance"),["prevent"]),["space"])),onClick:n[16]||(n[16]=e=>m.value="finance")},Jn,32)],2),k("li",{class:B(["report"===I(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[17]||(n[17]=H($((e=>m.value="report"),["prevent"]),["space"])),onClick:n[18]||(n[18]=e=>m.value="report")},qn,32)],2),Wn])])])])]),"management"===I(m)?(b(),g("div",Gn,[k("div",Zn,[k("div",Qn,[k("div",Xn,[k("div",Yn,[k("div",ed,[ld,k("div",td,[(b(!0),g(D,null,A(I(r).tags,((e,l)=>(b(),g("button",{key:l,class:"button is-selected is-light is-dark-outlined"},C(e),1)))),128))])])]),k("div",ad,[k("div",sd,[id,k("div",{innerHTML:I(r).notes},null,8,od),nd])]),k("div",dd,[k("div",cd,[w(L,{rounded:"",data:h,columns:U},{"body-cell":x((({row:e,column:l,value:t})=>["type"===l.key&&"messages"===e.type?(b(),g(D,{key:0},[w(K,{color:"green"},{default:x((()=>[ud])),_:1}),rd],64)):"type"===l.key&&"tasks"===e.type?(b(),g(D,{key:1},[w(K,{color:"orange"},{default:x((()=>[pd])),_:1}),md],64)):"status"===l.key?(b(),g(D,{key:2},["new"===e.status?(b(),F(v,{key:0,rounded:"",color:"success",label:"New"})):(b(),F(v,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(b(),g("a",vd,"Open")):(b(),g("span",fd,C(t),1))])),_:1})])]),k("div",hd,[k("div",_d,[yd,k("div",bd,[(b(!0),g(D,null,A(I(r).sales_people_info,(e=>(b(),g("div",gd,[k("div",kd,[w(N),w(d,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),k("h3",wd,C(e.username??"N/A")+" "+C(e.last_name??""),1),k("p",xd,C(e.role),1),k("div",jd,[w(_,{color:"primary",raised:""},{default:x((()=>[j(" View Profile ")])),_:1})])])])))),256))])])])])]),k("div",Cd,["management"===I(m)?(b(),g("div",Vd)):T("",!0),w(z,{project:I(i).params.id},null,8,["project"]),w(J,{class:"picker-widget"},{header:x((()=>[Ud])),body:x((()=>[Td])),_:1})])])])):T("",!0),"documents"===I(m)?(b(),g("div",Sd,[w(q,{leadId:I(i).params.id,uploaded_files:I(r).uploaded_files,getProjectInfo:O},null,8,["leadId","uploaded_files"])])):T("",!0),"proposals"===I(m)?(b(),g("div",Id,[k("div",Fd,[k("div",Dd,[k("ul",null,[k("li",{class:B(["childProposals"===I(f)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[19]||(n[19]=H($((e=>f.value="childProposals"),["prevent"]),["space"])),onClick:n[20]||(n[20]=e=>f.value="childProposals")},Ad,32)],2),k("li",{class:B(["groupedProposals"===I(f)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[21]||(n[21]=H($((e=>f.value="groupedProposals"),["prevent"]),["space"])),onClick:n[22]||(n[22]=e=>{f.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await o.get(`/api/attachment/by-object/${i.params.id}/?type=${e}`);E.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},Pd,32)],2)])])]),"childProposals"==I(f)?(b(),g("div",Md,[w(Oe,{"lead-id":I(i).params.id,onUpdateCompany:O},null,8,["lead-id"])])):T("",!0),"groupedProposals"==I(f)?(b(),g("div",Od,[w(W,{"doc-type":"proposal_formats","object-id":I(i).params.id},null,8,["object-id"])])):T("",!0)])):T("",!0),"activities"===I(m)?(b(),g("div",Ed,[w(G,{jobId:I(i).params.id},null,8,["jobId"])])):T("",!0),"progress"===I(m)?(b(),g("div",Kd,[w(Z,{object:I(i).params.id,type:"job"},null,8,["object"])])):T("",!0),"finance"===I(m)?(b(),g("div",Rd,[w(Q)])):T("",!0),"activityLogs"===I(m)?(b(),g("div",Ld,[w(X,{object_id:I(i).params.id||I(r).id,object_type:"lead"},null,8,["object_id"])])):T("",!0),"report"===I(m)?(b(),g("div",$d,[w(Y)])):T("",!0),"tasks"===I(m)?(b(),g("div",Bd,[w(ee,{projectID:I(i).params.id},null,8,["projectID"])])):T("",!0),"calculations"===I(m)?(b(),g("div",Nd,[k("div",Hd,[k("div",zd,[k("ul",null,[k("li",{class:B(["excel"===I(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[23]||(n[23]=H($((e=>p.value="excel"),["prevent"]),["space"])),onClick:n[24]||(n[24]=e=>p.value="excel")},Jd,32)],2),k("li",{class:B(["custom"===I(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[25]||(n[25]=H($((e=>p.value="custom"),["prevent"]),["space"])),onClick:n[26]||(n[26]=e=>p.value="custom")},qd,32)],2)])])]),"excel"==I(p)?(b(),g("div",Wd,[w(le,{objectId:I(i).params.id},null,8,["objectId"])])):T("",!0),"custom"==I(p)?(b(),g("div",Gd,[w(te,{objectId:I(i).params.id},null,8,["objectId"])])):T("",!0)])):T("",!0),"files"==I(m)?(b(),g("div",Zd,[w(ae,{projectId:I(i).params.id,files:I(r).uploaded_files,"onUpdate:onUploadFile":O},null,8,["projectId","files"])])):T("",!0)])])]),I(u)?(b(),F(se,{key:0,addUpdateLeadModal:I(u),leadId:I(c),"onUpdate:modalHandler":n[27]||(n[27]=e=>u.value=!1),"onUpdate:OnSuccess":O},null,8,["addUpdateLeadModal","leadId"])):T("",!0)])}}});export{Qd as _};
