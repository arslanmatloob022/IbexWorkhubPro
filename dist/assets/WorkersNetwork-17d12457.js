import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import{_ as a}from"./BScertificate-012bce6c.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-776f3a3f.js";import{_ as t,a as s,b as i,c as n}from"./view-48-84efbbfe.js";import{e as o,r,o as d,v as u,F as p,z as c,A as m,y as v,l as y,x as g,O as f,G as h,I as b,j as _,R as w,S as k,B as x,P as C,Q as A,H as S,C as N,M as V,L as I,Z as j,s as U,w as M,br as O,K as $,av as z,N as W,Y as L,aR as q,a3 as P,V as R,W as D,J as E}from"./index-a3511ab8.js";import{_ as T,a as B}from"./VOption.vue_vue_type_style_index_0_lang-787ebf49.js";import{_ as Y}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as F}from"./VControl-f6dba4dd.js";import{_ as H}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{_ as K}from"./VIconButton-87810f23.js";import{u as G,a as X}from"./useAPI-2f913358.js";import{u as Z}from"./useNotyf-bee6672a.js";import{u as J}from"./company-ca9a809c.js";import{m as Q}from"./upload-3-734dffd5.js";import{a as ee,C as ae,b as le}from"./useSupportElement-ec851bb5.js";import{u as te}from"./userSession-1e35e5f3.js";import{_ as se}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-19353aec.js";import{_ as ie,c as ne}from"./VFlexTable.vue_vue_type_style_index_0_lang-ab11cfa6.js";import{_ as oe}from"./VDropdown.vue_vue_type_style_index_0_lang-dab44eb0.js";import{_ as re}from"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import{_ as de}from"./VRangeRating-2d2972dd.js";import{_ as ue}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{_ as pe}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-203bc318.js";import{_ as ce,a as me}from"./search-4-dark-2b5b440c.js";import{A as ve}from"./vue3-apexcharts.common-763b2026.js";import{u as ye}from"./useThemeColors-9cb1eefd.js";import{u as ge}from"./viewWrapper-a34f2b5b.js";const fe={class:"modal-form columns cu-all-input is-multiline"},he={class:"column is-12"},be={class:"columns mb-0 p-0"},_e=m("label",null,"Profile Image:",-1),we=["src"],ke={key:1},xe={class:"column is-6 mb-0 p-0"},Ce={class:"field column is-12 mb-0"},Ae=m("label",null,"First Name: *",-1),Se={class:"control"},Ne={class:"field column is-12 mb-0"},Ve=m("label",null,"Last Name: ",-1),Ie={class:"control"},je={class:"field column is-6 mb-0"},Ue=m("label",null,"Email Address: *",-1),Me={class:"control"},Oe={class:"field column is-6 mb-0"},$e=m("label",null,"Phone Number: ",-1),ze={class:"control"},We={class:"field column is-6 mb-0"},Le=m("label",null,"Post Code: ",-1),qe={class:"control"},Pe={class:"field column is-6 mb-0"},Re=m("label",null,"Home Address: ",-1),De={class:"control"},Ee={class:"field column is-6 mb-0"},Te=m("label",null,"Line Manager:",-1),Be={class:"control"},Ye={class:"field column is-6 mb-0"},Fe=m("label",null,"Supplier: ",-1),He={class:"field column is-6 mb-0"},Ke=m("label",null,"External ID: ",-1),Ge={class:"control"},Xe={class:"field column is-6 mb-0"},Ze=m("label",null,"Industry: * ",-1),Je=o({__name:"AddWorker",props:{AddCompanyModalOpen:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:l}){const t=a,s=te(),i=Z(),n=G(),o=r(!1),V=J(),I=r(!1),j=r("update"),U=r(!1),M=r(""),O=r({id:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:"",lineManager:"",homeAddress:"",profileImageURL:null,externalID:"",industry:"",arezCompany:"",postCode:"",latitude:0,longitude:0,supplier:""}),$=V.suppliers?V.suppliers:[],z=V.loggedCompany.industry?V.loggedCompany.industry:[],W=async()=>{try{o.value=!0;const e=ee(O.value,["profileImageURL"]);e.append("arezCompany",V.loggedCompany.id);await n.post("/v3/api/worker/",e);q(),i.dismissAll(),i.success("New worker added, New Worker"),l("update:OnSuccess",null)}catch(e){let a=e.response.data??{};Object.values(a).forEach((e=>{e.forEach((e=>{i.error(` ${e}, New Worker`)}))}))}finally{o.value=!1}},L=e=>{console.log(e.target.name),O.value={...O.value,[e.target.name]:e.target.value}},q=()=>{l("update:modalHandler",!1),console.log("modal closed"),O.value={id:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:"",lineManager:"",homeAddress:"",profileImageURL:null,externalID:" ",industry:"",latitude:0,longitude:0,arezCompany:""}},P=async()=>{try{const e=await X.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${O.value.postCode}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);"OK"===e.data.status?(O.value.homeAddress=e.data.results[0].formatted_address,O.value.latitude=e.data.results[0].geometry.location.lat,O.value.longitude=e.data.results[0].geometry.location.lng,i.success("Address Added")):"ZERO_RESULTS"===e.data.status&&i.error("Invalid Post-Code")}catch(e){i.error("Invalid Post-Code"),console.error(e)}},R=e=>{const a=function(e){const a=e.split(","),l=a[0].indexOf("base64")>=0?atob(a[1]):decodeURI(a[1]),t=a[0].split(":")[1].split(";")[0],s=new Uint8Array(l.length);for(let i=0;i<l.length;i++)s[i]=l.charCodeAt(i);return new Blob([s],{type:t})}(e);O.value.profileImageURL=a,M.value=e,console.log("Image URl:",e)};return d((()=>{"partner"==s.user.role&&(O.value.supplier=s.user.partner)})),(a,l)=>{const i=K,n=H,r=F,d=Y,V=T,D=B,E=N,G=e;return u(),p(G,{is:"form",open:t.AddCompanyModalOpen,title:"New Worker",size:"big",actions:"right",onSubmit:b(W,["prevent"]),onClose:q,noclose:""},{content:c((()=>[m("div",fe,[m("div",he,[m("div",be,[v(d,{class:"column is-6"},{default:c((()=>[_e,v(r,{class:"is-flex is-justify-content-center mt-5"},{default:c((()=>[v(n,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:c((()=>[y(I)?f("",!0):(u(),g("img",{key:0,class:"avatar",src:y(M)?y(M):"/images/avatars/placeholder.jpg",alt:"",style:{border:"1px solid #111"}},null,8,we)),"update"==y(j)?(u(),g("span",ke,[y(I)?(u(),p(i,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:l[2]||(l[2]=h(b((e=>I.value=!1),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>I.value=!1)})):(u(),p(i,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:l[0]||(l[0]=h(b((e=>I.value=!0),["prevent"]),["space"])),onClick:l[1]||(l[1]=()=>{U.value=!y(U)})}))])):f("",!0)])),_:1})])),_:1}),v(y(Q),{field:"img",onCropSuccess:R,modelValue:y(U),"onUpdate:modelValue":l[4]||(l[4]=e=>_(U)?U.value=e:null),noRotate:!1,noSquare:!1,langType:"en","img-format":"png/jpg"},null,8,["modelValue"])])),_:1}),m("div",xe,[m("div",Ce,[Ae,m("div",Se,[w(m("input",{type:"text",name:"firstName","onUpdate:modelValue":l[5]||(l[5]=e=>y(O).firstName=e),onChange:l[6]||(l[6]=e=>L(e)),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"First Name"},null,544),[[k,y(O).firstName]])])]),m("div",Ne,[Ve,m("div",Ie,[w(m("input",{type:"text",name:"lastName","onUpdate:modelValue":l[7]||(l[7]=e=>y(O).lastName=e),onChange:l[8]||(l[8]=e=>L(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Last Name"},null,544),[[k,y(O).lastName]])])])])])]),m("div",je,[Ue,m("div",Me,[w(m("input",{type:"email",name:"emailAddress","onUpdate:modelValue":l[9]||(l[9]=e=>y(O).emailAddress=e),onChange:l[10]||(l[10]=e=>L(e)),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Email Address"},null,544),[[k,y(O).emailAddress]])])]),m("div",Oe,[$e,m("div",ze,[w(m("input",{type:"tel",name:"phoneNumber","onUpdate:modelValue":l[11]||(l[11]=e=>y(O).phoneNumber=e),onChange:l[12]||(l[12]=e=>L(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Phone Number"},null,544),[[k,y(O).phoneNumber]])])]),m("div",We,[Le,m("div",qe,[w(m("input",{type:"text",name:"postCode","onUpdate:modelValue":l[13]||(l[13]=e=>y(O).postCode=e),onBlur:P,onChange:l[14]||(l[14]=e=>L(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Post code"},null,544),[[k,y(O).postCode]])])]),m("div",Pe,[Re,m("div",De,[w(m("input",{type:"text",name:"homeAddress","onUpdate:modelValue":l[15]||(l[15]=e=>y(O).homeAddress=e),onChange:l[16]||(l[16]=e=>L(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Home Address"},null,544),[[k,y(O).homeAddress]])])]),m("div",Ee,[Te,m("div",Be,[w(m("input",{type:"text",name:"lineManager","onUpdate:modelValue":l[17]||(l[17]=e=>y(O).lineManager=e),onChange:l[18]||(l[18]=e=>L(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Line Manager"},null,544),[[k,y(O).lineManager]])])]),m("div",Ye,[Fe,v(d,null,{default:c((()=>[v(r,null,{default:c((()=>[v(D,{disabled:"partner"==y(s).user.role,modelValue:y(O).supplier,"onUpdate:modelValue":l[19]||(l[19]=e=>y(O).supplier=e),onInput:l[20]||(l[20]=e=>L({name:"supplier",value:e.target.value})),name:"industry",class:"is-rounded"},{default:c((()=>[v(V,{value:""},{default:c((()=>[x("Select Supplier")])),_:1}),(u(!0),g(C,null,A(y($),((e,a)=>(u(),p(V,{value:e.id,key:a},{default:c((()=>[x(S(e.supplierName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1}),v(d,{id:"interests",class:"pb-4",label:""})]),m("div",He,[Ke,m("div",Ge,[w(m("input",{type:"text",name:"externalID","onUpdate:modelValue":l[21]||(l[21]=e=>y(O).externalID=e),onChange:l[22]||(l[22]=e=>L(e)),class:"input is-primary-focus is-primary-focus",placeholder:"External ID"},null,544),[[k,y(O).externalID]])])]),m("div",Xe,[Ze,v(d,null,{default:c((()=>[v(r,null,{default:c((()=>[v(D,{modelValue:y(O).industry,"onUpdate:modelValue":l[23]||(l[23]=e=>y(O).industry=e),name:"industry",required:"",class:"is-rounded"},{default:c((()=>[v(V,{value:""},{default:c((()=>[x("Select Industry")])),_:1}),(u(!0),g(C,null,A(y(z),((e,a)=>(u(),p(V,{key:a,value:e.id},{default:c((()=>[x(S(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(d,{id:"interests",class:"p-0",label:""})])])])),action:c((()=>[v(E,{loading:y(o),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:c((()=>[x("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Qe=[m("div",{id:"myMap",style:{height:"650px",width:"80vw","border-radius":"10px"}},null,-1)],ea=o({__name:"WorkersMapLocation",props:{industry:{}},setup(e){te(),V(),I();const a=J(),l=G();let t={};const s=Z(),i=e=>{var a=new google.maps.InfoWindow;t=new google.maps.Map(document.getElementById("myMap"),{center:{lat:51.4497984,lng:-.3464489},scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:5}),e.forEach(((e,l)=>{const s=new google.maps.Marker({position:{lat:e.latitude?e.latitude:0,lng:e.longitude?e.longitude:0},map:t,title:"Worker",icon:{url:"/images/marker_new.png",scaledSize:new google.maps.Size(20,30)}});s.addListener("click",(()=>{var l=`<a href="/sidebar/company/workers/${e.id}"  target="_blank" >\n    <div style="display:flex; gap:16px" >\n      <div style="display:flex; flex-direction:column; justify-content:center; gap:6px">\n        <img src="${e.profileImageURL}" style="width:34px; height:34px; border-radius:50%" />\n        <h4 style="color:#898989; font-size:10px">${e.postCode}</h4>\n      </div>\n      <div>\n        <h6 style="color:#010101; font-weight:500">${e.firstName+" "+e.lastName}</h6>\n        <div style="display:flex; align-items:center; gap:6px; color:#898989; font-size:12px; margin-top:6px">\n          <i style="font-size:10px" class="fa fa-envelope-open"></i>\n          <h4 style="color:#898989; font-size:12px">${e.emailAddress}</h4>\n        </div>\n        <div style="display:flex; align-items:center; gap:6px; color:#898989; font-size:12px; margin-top:4px">\n          <i style="font-size:10px" class="fa fa-phone"></i>\n          <h4 style="color:#898989; font-size:12px">${e.phoneNumber}</h4>\n        </div>\n      </div>\n    </div>\n  </a>`;a.setContent(l),a.open(t,s)}))}))};return d((()=>{(async()=>{try{const e=await l.get(`/v3/api/worker/${a.loggedCompany.id}/worker-short-info/`);i(e.data)}catch{s.error("Invalid data")}})()})),(e,a)=>(u(),g("div",null,Qe))}}),aa=e=>(R("data-v-3ba41aca"),e=e(),D(),e),la={class:"tabs-wrapper"},ta={class:"tabs-inner mt-2"},sa={class:"tabs is-toggle"},ia=[aa((()=>m("span",null,"List view",-1)))],na=[aa((()=>m("span",null,"Map view",-1)))],oa={class:"list-flex-toolbar is-reversed"},ra={class:"buttons"},da={key:0},ua={class:"multiselect-single-label"},pa=["src"],ca=["src"],ma={key:1,class:"flex-list-wrapper flex-list-v2"},va=aa((()=>m("img",{class:"light-image",src:ce,alt:""},null,-1))),ya=aa((()=>m("img",{class:"dark-image",src:me,alt:""},null,-1))),ga={key:1,class:"tab-content is-active"},fa={key:0,style:{position:"absolute",bottom:"10px","margin-left":"32px","background-color":"#fff","border-radius":"50%","z-index":"1",width:"20px"},src:i},ha={key:1,style:{position:"absolute",top:"1px","margin-left":"32px","background-color":"#fff","border-radius":"50%","z-index":"1",width:"24px",height:"auto"},src:"/images/warning-48.png"},ba={class:"user-meta"},_a={class:"item-name dark-inverted",style:{"margin-bottom":"6px !important"}},wa={class:"item-meta"},ka=aa((()=>m("i",{style:{width:"10px"},class:"iconify","data-icon":"feather:phone","aria-hidden":"true"},null,-1))),xa={class:"item-meta"},Ca=aa((()=>m("i",{style:{width:"10px"},class:"iconify","data-icon":"feather:mail","aria-hidden":"true"},null,-1))),Aa={class:"item-meta"},Sa=aa((()=>m("i",{style:{width:"10px"},class:"iconify","data-icon":"feather:map-pin","aria-hidden":"true"},null,-1))),Na={class:"content"},Va=aa((()=>m("h6",{style:{"text-align":"center"},class:"mt-4"}," Compliance Documents ",-1))),Ia={key:0,style:{width:"160px !important"},type:"1"},ja={key:0,style:{height:"18px",width:"18px",float:"right"},src:"/images/photo/greenshield.png"},Ua={key:1,style:{height:"18px",width:"18px",float:"right"},src:"/images/photo/defence.png"},Ma={key:2,style:{height:"18px",width:"18px",float:"right"},src:"/images/photo/redsshield.png"},Oa=["src"],$a={class:"justify-center"},za=["src"],Wa=["onClick"],La={key:0,class:"fas fa-times-circle",style:{color:"var(--danger)","font-size":"20px"},"aria-hidden":"true"},qa=["onClick"],Pa=[aa((()=>m("img",{class:"cu-pointer",style:{height:"24px",width:"auto"},src:n},null,-1)))],Ra=aa((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-user-alt"})],-1))),Da=aa((()=>m("div",{class:"meta"},[m("span",null,"Profile"),m("span",null,"View worker profile")],-1))),Ea=aa((()=>m("a",{role:"menuitem",href:"#",class:"dropdown-item is-media"},[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-bubble"})]),m("div",{class:"meta"},[m("span",null,"Message"),m("span",null,"Send Message")])],-1))),Ta=["onClick"],Ba=[aa((()=>m("div",{class:"icon"},[m("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1))),aa((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit worker Info")],-1)))],Ya=aa((()=>m("hr",{class:"dropdown-divider"},null,-1))),Fa=["onClick"],Ha=[aa((()=>m("div",{class:"icon"},[m("i",{class:"lnir lnir-archive","aria-hidden":"true"})],-1))),aa((()=>m("div",{class:"meta"},[m("span",null,"Unarchive"),m("span",null,"Move to primary list")],-1)))],Ka=["onClick"],Ga=[aa((()=>m("div",{class:"icon"},[m("i",{class:"lnir lnir-archive","aria-hidden":"true"})],-1))),aa((()=>m("div",{class:"meta"},[m("span",null,"Archive"),m("span",null,"Remove from list")],-1)))],Xa=["onClick"],Za=[aa((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),aa((()=>m("div",{class:"meta"},[m("span",null,"Delete"),m("span",null,"Delete worker permanently")],-1)))],Ja={class:"content-box"},Qa=E(o({__name:"WorkersNetwork",props:{partnerID:{}},setup(i){const n=i,o=ge(),R=te(),D=ye(),E=J(),T=V(),B=I(),K=r(!1),X=r(!1),Q=Z(),ee=G(),ce=r(!1),me=r(0),fe=r(0),he=r(!1),be=r("active"),_e=r(!1),we=r(""),ke=r(0),xe=r(!1);let Ce;const Ae=r("listView"),Se=j((()=>T.query.search||""));we.value=Se.value;const Ne=r({});r([{id:4992,firstName:"Toby",lastName:"O'Connor",latitude:58.92893167510288,longitude:-.11729476478785372,postCode:"E40 4XY",phoneNumber:"+443069990606",emailAddress:"barrettmartyn@example.org"}]);const Ve=[],Ie=r(3),je=r(10),Ue=r(0),Me=j((()=>Number(T.query.page)||1)),Oe=le((()=>{B.push({query:{...T.query,page:1,search:we.value}})}),500),$e=async()=>{await(async e=>{try{ce.value=!0,Ve.length=0;const a=await ee.get(`/v3/api/worker/company-workers/${E.loggedCompany.id}/?industry=${T.query.type&&"All"!==T.query.type?T.query.type:""}${T.query.archive?"&archive=true":""}&page=${e}&page_size=${je.value}&search=${Se.value}&partner=${Fe.value||n.partnerID||"partner"==R.user.role?Fe.value||n.partnerID||R.user.partner:""}`,{});Ue.value=a.data.count,Ve.push(...a.data.results)}catch(a){console.error("Error loading page",a)}finally{ce.value=!1}})(Me.value),Ee()},ze=U({series:[0],chart:{height:100,type:"radialBar",toolbar:{show:!1}},colors:[D.accent],plotOptions:{radialBar:{hollow:{size:"40%"},dataLabels:{show:!0,name:{show:!0,fontSize:"9px",fontWeight:500,offsetY:-10,color:D.lightText},value:{show:!0,fontWeight:600,color:D.purple,fontSize:"10px",offsetY:-11}}}},labels:[""]}),We=r({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});let Le={profileImageURL:{label:"Worker",grow:!0,media:!0},profileCompeletion:{label:"Profile Completion",align:"center"},rating:{label:"Rating",align:"end"},activationCode:{label:"Activation Code",align:"end"},transport:{label:"Transport",align:"end"},industry:{align:"center",label:"Industry",cellClass:"h-hidden-tablet-p"},sanctions:{align:"center",label:"Sanctions list"},BSevenCode:{align:"center",label:"BS7858"},actions:{label:"Actions",align:"end"}};const qe=e=>{K.value=e},Pe=()=>{1==ke.value?Re():2==ke.value&&De()},Re=async()=>{try{We.value.isSweetAlertOpen=!1;await ee.patch(`/v3/api/worker/${me.value}/`,{archive:!he.value});$e(),ae({message:`moved to <b>${he.value?"Active list":"Archive"}</b>`,objectId:me.value,method:"patch"}),Q.dismissAll(),Q.warning("Worker removed from the list"),me.value=0}catch(e){console.error("ok",e)}},De=async()=>{try{We.value.isSweetAlertOpen=!1;await ee.delete(`/v3/api/worker/${me.value}/`);$e(),Q.dismissAll(),Q.error("Worker deleted permanently."),me.value=0}catch(e){return e}},Ee=()=>{if("Security"===T.query.type){const{actions:e,...a}=Le;Le={...a,BSevenCode:{align:"center",label:"BS7858"},actions:{label:"Actions",align:"end"}},console.log(Le)}else{const{BSevenCode:e,...a}=Le;Le=a}};M((()=>T.fullPath),(async(e,a)=>{Ee(),he.value="true"===T.query.archive,await $e()}));let Te="Workers";r([{name:"archive",count:0},{name:"All",count:0},{name:"care",count:0}]);M((()=>Ue.value),(async(e,a)=>{Te="Workers",T.query.type?Te=`Workers: ${T.query.type} - ${Ue.value}`:T.query.archive&&(Te=`Workers: Archive - ${Ue.value}`),o.setPageTitle(Te)}));const Be=()=>{window.open(`/worker-certificate?name=${Ce}`,"_blank")},Ye=E.suppliers?E.suppliers:[];console.log("company supplier",Ye);const Fe=r(""),He=Ye.map((e=>({value:e.id.toString(),name:e.supplierName,icon:e.partnerLogo?e.partnerLogo:"/default/icon.png"})));He.unshift({value:"",name:"All",icon:E.loggedCompany.compnayLogo}),M(Fe,((e,a)=>{$e()})),T.query.type?Te=`(${T.query.type})`:T.query.archive&&(Te="Workers (Archived)"),o.setPageTitle(Te);return O((async()=>{await $e(),Ee()})),d((async()=>{await $e(),Ee()})),(i,o)=>{const r=N,d=F,V=$("Multiselect"),I=Y,j=pe,U=ue,M=H,O=ne,D=$("Tippy"),E=de,G=re,Z=$("RouterLink"),J=oe,ee=ie,ae=se,le=ea,te=t,ye=Je,ge=s,Se=l,Re=a,De=e,Ee=z("tooltip");return u(),g(C,null,[m("div",null,[m("div",la,[m("div",ta,[m("div",sa,[m("ul",null,[m("li",{class:W(["listView"===y(Ae)?"is-active":"not-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:o[0]||(o[0]=h(b((e=>Ae.value="listView"),["prevent"]),["space"])),onClick:o[1]||(o[1]=e=>Ae.value="listView")},ia,32)],2),m("li",{class:W(["mapView"===y(Ae)?"is-active":"not-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:o[2]||(o[2]=h(b((e=>Ae.value="mapView"),["prevent"]),["space"])),onClick:o[3]||(o[3]=e=>Ae.value="mapView")},na,32)],2)])])])]),w(m("div",null,[m("div",null,[m("div",oa,[m("div",ra,[v(r,{color:"primary",icon:"fas fa-plus",elevated:"",onClick:o[4]||(o[4]=e=>K.value=!0)},{default:c((()=>[x(" Worker ")])),_:1}),v(d,{icon:"feather:search"},{default:c((()=>[w(m("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>_(we)?we.value=e:null),onInput:o[6]||(o[6]=(...e)=>y(Oe)&&y(Oe)(...e)),class:"input custom-text-filter",placeholder:"Search..."},null,544),[[k,y(we)]])])),_:1}),"partner"!=y(R).user.role?(u(),g("div",da,[n.partnerID?f("",!0):(u(),p(I,{key:0,class:"pl-2"},{default:c((({id:e})=>[v(d,null,{default:c((()=>[v(V,{style:{width:"220px"},modelValue:y(Fe),"onUpdate:modelValue":o[7]||(o[7]=e=>_(Fe)?Fe.value=e:null),attrs:{id:e},placeholder:"Select a service partner",label:"name",options:y(He),searchable:!0,"track-by":"name",height:300},{singlelabel:c((({value:e})=>[m("div",ua,[m("img",{style:{width:"30px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,pa),x(" "+S(e.name),1)])])),option:c((({option:e})=>[m("img",{style:{width:"40px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,ca),x(" "+S(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}))])):f("",!0)])]),y(ce)?(u(),p(j,{key:0})):(u(),g("div",ma,["active"===y(be)&&0===Ve.length?(u(),p(U,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n                  search terms you've entered. Please try different search terms or\n                  criteria.",larger:""},{image:c((()=>[va,ya])),_:1})):f("",!0),"active"===y(be)?(u(),g("div",ga,[Ve.length?(u(),p(ee,{key:0,data:Ve,columns:y(Le),rounded:""},{body:c((()=>[v(q,{name:"list",tag:"div",class:"flex-list-inner"},{default:c((()=>[(u(),g(C,null,A(Ve,(e=>m("div",{key:e.id,class:"flex-table-item",style:{cursor:"pointer"}},[v(O,{column:{media:!0,grow:!0},onClick:a=>{return l=e.id,void("partner"==R.user.role?B.push({name:"/sidebar/partner/workers/[id]",params:{id:l}}):B.push({name:"/sidebar/company/workers/[id]",params:{id:l}}));var l}},{default:c((()=>[v(M,{size:"medium",style:{position:"relative"},picture:e.profileImageURL?e.profileImageURL:"/images/avatars/placeholder.jpg"},null,8,["picture"]),"approved"==e.veriffStatus?(u(),g("img",fa)):f("",!0),e.warning?(u(),g("img",ha)):f("",!0),m("div",ba,[m("span",_a,S(e.firstName)+" "+S(e.lastName),1),m("span",wa,[m("span",null,[ka,x(" "+S(e.phoneNumber),1)])]),m("span",xa,[m("span",null,[Ca,x(" "+S(e.emailAddress),1)])]),m("span",Aa,[m("span",null,[Sa,x(" "+S(e.postCode?e.postCode:"-----"),1)])])])])),_:2},1032,["onClick"]),v(O,{column:{align:"start"}},{default:c((()=>[v(D,null,{content:c((()=>[m("div",Na,[Va,e.profileStat?(u(),g("ol",Ia,[(u(!0),g(C,null,A(e.profileStat.emptyFields,((e,a)=>(u(),g("li",{key:a,style:P([{"font-weight":"500 !important"},{color:e.is_uploaded?e.status?"#0AA209":"#FEA208":"#FD2D2C"}])},[x(S(e.doc.length<17?e.doc:`${e.doc.slice(0,17)} ...`)+" ",1),e.status?(u(),g("img",ja)):e.is_uploaded?(u(),g("img",Ua)):(u(),g("img",Ma))],4)))),128))])):f("",!0)])])),default:c((()=>[v(y(ve),{id:"radial-circle",class:"circle-chart-wrapper",height:y(ze).chart.height,type:y(ze).chart.type,series:[e.profileStat?e.profileStat.percentage:0],options:y(ze)},null,8,["height","type","series","options"])])),_:2},1024)])),_:2},1024),v(O,{columns:{align:"end"}},{default:c((()=>[v(I,{class:"ml-6"},{default:c((()=>[v(d,null,{default:c((()=>[v(E,{"model-value":e.rating,readonly:!0},null,8,["model-value"])])),_:2},1024)])),_:2},1024)])),_:2},1024),v(O,{column:{align:"center"}},{default:c((()=>[w(v(G,{onClick:a=>{return l=e.activationCode,navigator.clipboard.writeText(l),void Q.success("Code Copied");var l},color:"info",label:e.activationCode?e.activationCode:"No Activation Code!",rounded:""},null,8,["onClick","label"]),[[Ee,"Click to copy",void 0,{info:!0,rounded:!0}]])])),_:2},1024),v(O,{column:{align:"center"}},{default:c((()=>[v(G,{color:e.transport?"primary":"",label:e.transport?e.transport:"Not Available!",rounded:""},null,8,["color","label"])])),_:2},1024),v(O,{column:{align:"center"}},{default:c((()=>[m("img",{class:"cus-small-industry",src:e.industry.industryLogo?e.industry.industryLogo:"/images/avatars/placeholder.jpg"},null,8,Oa)])),_:2},1024),v(O,{column:{align:"center"}},{default:c((()=>[m("div",$a,[m("img",{style:{height:"auto",width:"28px"},class:"cus-small-industry",src:e.sanctionStatus?"/images/warning-48.png":"/images/cleared.png"},null,8,za),e.sanctionStatus?(u(),g("p",{key:0,class:"is-small-bold is-underline",onClick:a=>{return l=e,Ne.value=l,void(xe.value=!0);var l},style:{color:"var(--danger)"}}," Not Cleared ",8,Wa)):f("",!0)])])),_:2},1024),"Security"===y(T).query.type?(u(),p(O,{key:0,column:{align:"center"}},{default:c((()=>[e.bs7858?f("",!0):(u(),g("i",La)),e.bs7858?(u(),g("span",{key:1,onClick:a=>{return l=e.firstName,t=e.lastName,B.push({query:{...T.query,name:`${l} ${t}`}}),Ce=`${l} ${t}`,void(_e.value=!_e.value);var l,t}},Pa,8,qa)):f("",!0)])),_:2},1024)):f("",!0),v(O,{column:{align:"end"}},{default:c((()=>[v(J,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[v(Z,{role:"menuitem",class:"dropdown-item is-media",to:{name:"/sidebar/company/workers/[id]",params:{id:e.id}}},{default:c((()=>[Ra,Da])),_:2},1032,["to"]),Ea,m("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{fe.value=e.id,X.value=!0}},Ba,8,Ta),Ya,y(he)?(u(),g("a",{key:0,role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:a=>{return l=e.id,ke.value=1,me.value=l,void(We.value={title:"Are you sure?",subtitle:"Worker will be move to primary list, and remove from the archives!",btntext:"Yes, Unarchive",isSweetAlertOpen:!0});var l}},Ha,8,Fa)):(u(),g("a",{key:1,role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:a=>{return l=e.id,ke.value=1,me.value=l,void(We.value={title:"Are you sure?",subtitle:"You will not be able to recover this Worker!",btntext:"Yes, Archive it",isSweetAlertOpen:!0});var l}},Ga,8,Ka)),m("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:a=>{return l=e.id,ke.value=2,me.value=l,void(We.value={title:"Are you sure?",subtitle:"The worker will be permanently deleted, along with all associated documents.",btntext:"Yes, delete",isSweetAlertOpen:!0});var l}},Za,8,Xa)])),_:2},1024)])),_:2},1024)]))),64))])),_:1})])),_:1},8,["columns"])):f("",!0),y(Ue)>y(je)?(u(),p(ae,{key:1,"item-per-page":y(je),modelValue:y(Me),"onUpdate:modelValue":o[8]||(o[8]=e=>_(Me)?Me.value=e:null),"total-items":y(Ue),"current-page":y(Me),"max-links-displayed":y(Ie)},null,8,["item-per-page","modelValue","total-items","current-page","max-links-displayed"])):f("",!0)])):f("",!0)]))])],512),[[L,"listView"==y(Ae)]]),w(m("div",null,[m("div",Ja,[v(le)])],512),[[L,"mapView"==y(Ae)]]),y(xe)?(u(),p(te,{key:0,firstName:y(Ne).firstName,lastName:y(Ne).lastName,openSanctionModal:y(xe),"onUpdate:openSanctionModal":o[9]||(o[9]=e=>xe.value=e)},null,8,["firstName","lastName","openSanctionModal"])):f("",!0),v(ye,{AddCompanyModalOpen:y(K),"onUpdate:modalHandler":qe,"onUpdate:OnSuccess":$e},null,8,["AddCompanyModalOpen"]),y(X)?(u(),p(ge,{key:1,EditCompanyModalOpen:y(X),id:y(fe),getAllWorkers:$e,"onUpdate:modalHandler":o[10]||(o[10]=e=>X.value=e),"onUpdate:OnSuccess":$e},null,8,["EditCompanyModalOpen","id"])):f("",!0),y(We).isSweetAlertOpen?(u(),p(Se,{key:2,isSweetAlertOpen:y(We).isSweetAlertOpen,title:y(We).title,subtitle:y(We).subtitle,btntext:y(We).btntext,onConfirm:Pe,onCancel:()=>y(We).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):f("",!0)]),v(De,{is:"form",open:y(_e),title:"BS7858",size:"big",actions:"right",onClose:o[11]||(o[11]=e=>_e.value=!1)},{content:c((()=>[v(Re)])),action:c((()=>[v(r,{color:"primary",onClick:Be,raised:""},{default:c((()=>[x("Print")])),_:1})])),_:1},8,["open"])],64)}}}),[["__scopeId","data-v-3ba41aca"]]);export{Qa as _};
