import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-9ab82dd2.js";import{e as a,r as t,o as l,y as o,z as s,A as i,B as n,C as d,D as r,J as c,S as u,j as m,T as p,l as v,a0 as f,E as g,W as y,X as h,L as b,w as _,M as w,H as x,K as k,t as I,P as S,Q as C,a4 as V,a3 as M}from"./index-c78e54b8.js";import{u as R}from"./useNotyf-de91ba34.js";import{_ as T}from"./VCollapse.vue_vue_type_style_index_0_lang-d2b678bb.js";import{_ as j}from"./VInput.vue_vue_type_script_setup_true_lang-cc4a4eb1.js";import{_ as D}from"./VLabel.vue_vue_type_script_setup_true_lang-5a94995e.js";import{_ as N}from"./VField.vue_vue_type_script_setup_true_lang-8a368f10.js";import{_ as A}from"./VControl-2ad9d835.js";import{u as U}from"./useAPI-843a3f99.js";import{u as L}from"./company-2460bdf3.js";import{_ as P,i as O,a as z}from"./index-05b4406f.js";import{_ as E}from"./VTag.vue_vue_type_style_index_0_lang-90fe76a9.js";import{_ as H}from"./VAvatar.vue_vue_type_style_index_0_lang-0ec4a275.js";import{i as $,F as q}from"./index-79b35e20.js";import{i as B}from"./index-3b4c1b1a.js";const G=e=>(y("data-v-c4615761"),e=e(),h(),e),F={class:"cus-justify-center"},W=G((()=>d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1))),J={class:"modal-form columns is-multiline"},K={class:"field column is-12 mb-0"},X={class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},Q={style:{"font-size":"14px"}},Y=G((()=>d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: ",-1))),Z=G((()=>d("br",null,null,-1))),ee={class:"field column is-12 mb-0"},ae={style:{"font-weight":"500",color:"var(--danger)"}},te={class:"control"},le=b(a({__name:"ActionsVerificationModal",props:{actionVerificationModal:{type:Boolean},message:{},captionText:{},btnText:{}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:y}){const h=a,b=t(""),_=R(),w=()=>{b.value==h.captionText?(console.log("consoliingg"),y("update:OnSuccess",null),y("update:modalHandler",!1)):_.error("Your entered text does not match.")};return l((()=>{})),(a,t)=>{const l=g,y=e;return o(),s("template",null,[i(f,{name:"fade-slow"},{default:n((()=>[i(y,{open:a.actionVerificationModal,title:"Action Alert",actions:"right",onClose:t[1]||(t[1]=e=>a.actionVerificationModal=!1)},{content:n((()=>[d("div",F,[W,d("div",J,[d("div",K,[d("div",X,[d("p",Q,[Y,r(" "+c(h.message)+" ",1),Z])])]),d("div",ee,[d("label",null,[r("To perform this action, type: "),d("span",ae,c(h.captionText),1),r(" below:")]),d("div",te,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>m(b)?b.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[p,v(b)]])])])])])])),cancel:n((()=>[i(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:n((()=>[r("Close")])),_:1})])),action:n((()=>[i(l,{type:"submit",onClick:w,color:"primary",raised:""},{default:n((()=>[r(c(h.btnText?h.btnText:"Confirm"),1)])),_:1})])),_:1},8,["open"])])),_:1})])}}}),[["__scopeId","data-v-c4615761"]]),oe=e=>(y("data-v-0615def8"),e=e(),h(),e),se={class:"modal-form columns is-multiline",id:"addRota"},ie={class:"field column is-12 mb-0"},ne={class:"columns is-multiline mb-3"},de={class:"field column is-6 mb-0"},re=oe((()=>d("label",null,"Select customer company*",-1))),ce={class:"multiselect-single-label"},ue=["src"],me=["src"],pe={class:"field column is-6 mb-0"},ve=oe((()=>d("label",null,"Select Site *",-1))),fe={class:"multiselect-single-label"},ge={class:"field column is-6 mb-0"},ye=oe((()=>d("label",{class:"mb-2"},"Select Worker *",-1))),he={class:"multiselect-single-label"},be=["src"],_e=["src"],we={class:"field column is-3 mb-0"},xe={class:"field column is-3 mb-0"},ke=oe((()=>d("div",{class:"head-info"},[d("div",{class:"head-progress"})],-1))),Ie={class:"body-inner-content"},Se={class:"field columns is-multiline mb-0"},Ce={class:"column is-12"},Ve={class:"columns is-multiline space-around"},Me={class:"field column is-5 mb-0"},Re=oe((()=>d("label",null,"Charge Rate",-1))),Te={class:"control"},je={class:"field column is-5 mb-0"},De=oe((()=>d("label",null,"Charge Hours",-1))),Ne={class:"control"},Ae={class:"field column is-11 mb-0"},Ue=oe((()=>d("label",null,"Notes",-1))),Le={class:"control"},Pe=b(a({__name:"editRotaModal",props:{editRotaModalOpen:{type:Boolean},rotaId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:s}){const m=a,f=L(),y=t(!1),h=R(),b=U(),I=t("");t("");let S=t([]);const C=t("");let V=t([]);t("");let M=t([]);t([{id:0,firstName:"",lastName:"",profileImageURL:""}]);const P=[{title:"Additional Information",content:"Add additional information about rota, rate or worker"}],O=t({dates:[],id:0,start:"",end:"",hours:0,shift:"",hourlyRate:0,notes:"",createdBy:"",UpdatedAt:"",updatedBy:"",company:"",site:"",worker:"",customerCompany:"",job:""}),z=()=>{s("update:modalHandler",!1)},E=async()=>{y.value=!0;try{O.value.shift="day";const e=await b.patch(`/v3/api/rota/${m.rotaId}/`,O.value);console.log("rota resopmse",e.data),s("update:OnSuccess",null),h.success("Rota Added Successfuly"),y.value=!1,z()}catch(e){console.log(e),y.value=!1}},H=async e=>{try{const a=await b.get(`/v3/api/site/customer-company/${e||C.value}/`);S.value=a.data.map((e=>({value:e.id.toString(),name:e.name})))}catch(a){console.log(a)}},$=e=>{H(e)};_(C,((e,a)=>{H(e)}));return l((()=>{(async()=>{try{const e=await b.get(`/v3/api/rota/${m.rotaId}/`);O.value=e.data}catch(e){console.log(e)}})(),(async()=>{try{const e=await b.get(`/v3/api/worker/${f.loggedCompany.id}/worker-short-info/`);M.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL}))),I.value=m.workerId}catch{h.error("Invalid data")}finally{y.value=!1}})(),(async()=>{y.value=!0;const e=await b.get(`/v3/api/customer-company/company/${f.loggedCompany.id}`);V.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png"}))),e.data&&(C.value=e.data[0].id),y.value=!1})()})),(a,t)=>{const l=w("Multiselect"),s=A,f=N,h=D,b=j,_=T,I=g,C=e;return o(),x(C,{is:"form",size:"xl",open:m.editRotaModalOpen,title:"Edit Rota",actions:"right",onSubmit:k(E,["prevent"]),onClose:z},{content:n((()=>[d("div",se,[d("div",ie,[d("div",ne,[d("div",de,[re,i(f,{class:"pl-2"},{default:n((({id:e})=>[i(s,null,{default:n((()=>[i(l,{required:"",modelValue:v(O).customerCompany,"onUpdate:modelValue":t[0]||(t[0]=e=>v(O).customerCompany=e),attrs:{id:e},placeholder:"Select customer company",label:"name",options:v(V),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect",onInput:$},{singlelabel:n((({value:e})=>[d("div",ce,[d("img",{style:{width:"30px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,ue),r(" "+c(e.name),1)])])),option:n((({option:e})=>[d("img",{style:{width:"40px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,me),r(" "+c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),d("div",pe,[ve,i(f,{class:"pl-2"},{default:n((({id:e})=>[i(s,null,{default:n((()=>[i(l,{required:"",modelValue:v(O).site,"onUpdate:modelValue":t[1]||(t[1]=e=>v(O).site=e),attrs:{id:e},placeholder:"Select a site",label:"name",options:v(S),searchable:!0,"track-by":"name",height:400},{singlelabel:n((({value:e})=>[d("div",fe,c(e.name),1)])),option:n((({option:e})=>[r(c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),d("div",ge,[ye,i(f,{class:""},{default:n((({id:e})=>[i(s,null,{default:n((()=>[i(l,{required:"",modelValue:v(O).worker,"onUpdate:modelValue":t[2]||(t[2]=e=>v(O).worker=e),attrs:{id:e},placeholder:"Select worker",label:"name",options:v(M),searchable:!0,"track-by":"name",height:400},{singlelabel:n((({value:e})=>[d("div",he,[d("img",{style:{width:"24px",height:"24px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,be),r(" "+c(e.name),1)])])),option:n((({option:e})=>[d("img",{style:{width:"30px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,_e),r(" "+c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),d("div",we,[i(f,null,{default:n((()=>[i(h,null,{default:n((()=>[r("Start Time *")])),_:1}),i(s,null,{default:n((()=>[i(b,{required:"",modelValue:v(O).start,"onUpdate:modelValue":t[3]||(t[3]=e=>v(O).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",xe,[i(f,null,{default:n((()=>[i(h,null,{default:n((()=>[r("End Time *")])),_:1}),i(s,null,{default:n((()=>[i(b,{required:"",modelValue:v(O).end,"onUpdate:modelValue":t[4]||(t[4]=e=>v(O).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])]),i(_,{items:P,"with-chevron":"",style:{"border-radius":"14px"}},{"collapse-item-head":n((e=>[ke])),"collapse-item-content":n((e=>[d("div",Ie,[d("div",Se,[d("div",Ce,[d("div",Ve,[d("div",Me,[Re,d("div",Te,[u(d("input",{type:"number",name:"rate","onUpdate:modelValue":t[5]||(t[5]=e=>v(O).hourlyRate=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[p,v(O).hourlyRate]])])]),d("div",je,[De,d("div",Ne,[u(d("input",{type:"number",name:"rate","onUpdate:modelValue":t[6]||(t[6]=e=>v(O).hours=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[p,v(O).hours]])])]),d("div",Ae,[Ue,d("div",Le,[u(d("input",{type:"text",name:"note","onUpdate:modelValue":t[7]||(t[7]=e=>v(O).notes=e),class:"input is-primary-focus",placeholder:"Enter Note"},null,512),[[p,v(O).notes]])])])])])])])])),_:1})])])])),action:n((()=>[i(I,{type:"submit",color:"primary",loading:v(y),raised:""},{default:n((()=>[r("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),[["__scopeId","data-v-0615def8"]]),Oe={class:"row"},ze={class:"columns is-multiline"},Ee={class:"column is-6"},He={class:"columns is-multiline"},$e={class:"column is-12"},qe={class:"columns is-multiline"},Be={class:"column is-3"},Ge={class:"column is-9"},Fe={class:"is-flex space-between"},We={style:{width:"120px","white-space":"nowrap"},class:"title is-5 mb-2"},Je=[d("i",{class:"lnir lnir-apple","aria-hidden":"true"},null,-1),d("i",{class:"iconify ml-3 cu-pointer pointer","data-icon":"feather:external-link"},null,-1)],Ke={class:"is-flex cus-align-center mb-1"},Xe=d("i",{class:"iconify text-light","data-icon":"feather:phone","aria-hidden":"true"},null,-1),Qe={class:"is-bold"},Ye={class:"is-flex cus-align-center mb-1"},Ze=d("i",{class:"iconify","data-icon":"feather:mail","aria-hidden":"true"},null,-1),ea={class:"is-bold"},aa={class:"is-flex cus-align-center mb-1 text-light"},ta=d("i",{class:"iconify","data-icon":"feather:map-pin","aria-hidden":"true"},null,-1),la={class:"is-bold"},oa={class:"column is-12"},sa={class:"columns is-multiline"},ia={class:"column is-5"},na={class:"columns is-multiline"},da={class:"column is-12"},ra=d("h3",{class:"title is-5 mb-2"},"Site Name",-1),ca={class:"is-bold"},ua={class:"column is-12"},ma=d("h3",{class:"title is-5 mb-2"},"Site Addreess",-1),pa={class:"is-bold"},va={class:"column is-5"},fa={class:"columns is-multiline"},ga={class:"column is-12"},ya=d("h3",{class:"title is-5 mb-2"},"Date",-1),ha={class:"is-bold"},ba={class:"column is-12"},_a=d("h3",{class:"title is-5 mb-2"},"Shift Time",-1),wa={class:"is-bold"},xa={class:"column is-2"},ka={class:"columns is-multiline"},Ia={class:"column is-12"},Sa={class:"column is-12"},Ca=d("div",{class:"column is-6"},[d("div",{id:"myMap",style:{height:"324px",width:"100%","border-radius":"10px"}})],-1),Va={class:"column is-12"},Ma={class:"p-2 is-flex",style:{}},Ra=d("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"white",display:"flex","align-items":"center"}},null,-1),Ta={class:"item-name dark-inverted",style:{"font-weight":"500"}},ja={style:{"font-weight":"500","margin-bottom":"0px","padding-left":"5px",color:"white"}},Da=d("button",{style:{display:"none"}},"close",-1),Na=a({__name:"rotaDetailModal",props:{timeSheetDetailModal:{type:Boolean},timesheetId:{},rotaId:{},getRota:{type:Function}},emits:["update:modalHandler"],setup(a,{emit:r}){const u=a;let m,p,f;const g=t([]),y=I(),h=R(),b=U(),_=t(!1),w=t(!1);t(0);const k=t({id:0,siteInfo:{id:5,name:"",address:"",postcode:"",city:"",inchargeName:"",color:"",latitude:0,longitude:0,geofence:{},comments:""},wokrkerInfo:{id:0,firstName:"",lastName:"",latitude:0,longitude:0,postCode:" ",phoneNumber:"",emailAddress:"",profileImageURL:""},customerCompanyInfo:{id:36,name:"",trade_name:"",email:"",phone_number:"",logo:"",postcode:"",latitude:0,longitude:0,business_details:"",reg_no:"",business_type:"",covered_distance:75,vat_no:null,address:"",color:"",created_at:"",company:0,industry:0},date:"",start:"",end:"",shift:"",hourlyRate:0,notes:"",createdAt:"",createdBy:"",UpdatedAt:null,updatedBy:"",company:0,site:0,worker:0,customerCompany:0,job:null,jobsList:[{id:"",end:"",start:"",jobName:"",resourceId:""}]}),M=()=>{r("update:modalHandler",!1),u.getRota()},T=async()=>{try{const e=await b.get(`/v3/api/rota/${u.rotaId}/detail/`);k.value=e.data,g.value=e.data.jobsList.map((e=>({...e,title:e.jobName}))),N()}catch(e){console.log(e)}},j=async()=>{try{await b.delete(`/v3/api/rota/${u.rotaId}/`);M(),h.error("Job deleted successfuly")}catch(e){console.log(e)}},D=()=>{y.push({name:"/sidebar/company/workers/[id]",params:{id:k.value.wokrkerInfo.id}}),console.log("clickingg")},N=()=>{A.value.resources=g.value,A.value.events=g.value},A=t({plugins:[$],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineDay",height:"auto",resourceAreaWidth:"10%",selectable:!0,now:"2024-04-23",headerToolbar:{left:"",center:"",right:""},droppable:!0,editable:!0,views:{resourceTimelineDay:{type:"timeline",duration:{days:2},slotDuration:"00:30:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}},resourceAreaHeaderContent:"Jobs",eventClick:e=>{console.log("clicking on",e.event.id)}});return l((async()=>{await T(),((e,a,t,l)=>{const o=new google.maps.LatLng(e,a),s=new google.maps.LatLng(t,l);m=new google.maps.Map(document.getElementById("myMap"),{center:o,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:7}),p=new google.maps.DirectionsService,f=new google.maps.DirectionsRenderer,f.setMap(m);const i={origin:o,destination:s,travelMode:google.maps.TravelMode.DRIVING};p.route(i,(function(e,a){a===google.maps.DirectionsStatus.OK?f.setDirections(e):console.error("Error fetching directions: "+a)})),new google.maps.Marker({position:o,map:m,title:"Worker Location"}),new google.maps.Marker({position:s,map:m,title:"Site Location"})})(k.value.wokrkerInfo.latitude,k.value.wokrkerInfo.longitude,k.value.siteInfo.latitude,k.value.siteInfo.longitude)})),(a,t)=>{const l=H,r=V,m=E,p=P,f=e,g=Pe,y=le;return o(),s(C,null,[i(f,{open:u.timeSheetDetailModal,title:"Rota Detail",size:"xl",actions:"right",onClose:M},{content:n((()=>[d("div",Oe,[d("div",ze,[d("div",Ee,[d("div",He,[d("i",{style:{position:"absolute",top:"44px",left:"166px"},class:"fas fa-pencil-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:t[0]||(t[0]=e=>_.value=!0)}),d("i",{style:{position:"absolute",top:"44px",left:"190px",color:"var(--danger)"},class:"fas fa-trash-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:t[1]||(t[1]=()=>{w.value=!w.value})}),d("div",$e,[i(r,{radius:"large",elevated:""},{default:n((()=>[d("div",qe,[d("div",Be,[i(l,{onClick:D,picture:k.value.wokrkerInfo.profileImageURL,size:"big",squared:""},null,8,["picture"])]),d("div",Ge,[d("div",Fe,[d("div",null,[d("h3",We,c(k.value.wokrkerInfo?k.value.wokrkerInfo.firstName:"------")+" "+c(k.value.wokrkerInfo?k.value.wokrkerInfo.lastName:"------"),1)]),d("div",{onClick:D,class:"is-flex cus-align-center"},Je)]),d("div",Ke,[Xe,d("p",Qe,c(k.value.wokrkerInfo?k.value.wokrkerInfo.phoneNumber:"------"),1)]),d("div",Ye,[Ze,d("p",ea,c(k.value.wokrkerInfo?k.value.wokrkerInfo.emailAddress:"------"),1)]),d("div",aa,[ta,d("p",la,c(k.value.wokrkerInfo?k.value.wokrkerInfo.postCode:"------"),1)])])])])),_:1})]),d("div",oa,[i(r,{radius:"large",elevated:""},{default:n((()=>[d("div",sa,[d("div",ia,[d("div",na,[d("div",da,[ra,d("p",ca,c(k.value.siteInfo?k.value.siteInfo.name:"------"),1)]),d("div",ua,[ma,d("p",pa,c(k.value.siteInfo?k.value.siteInfo.address:"------"),1)])])]),d("div",va,[d("div",fa,[d("div",ga,[ya,d("p",ha,c(k.value?k.value.date:"------"),1)]),d("div",ba,[_a,d("p",wa,c(k.value?k.value.start:"-- --")+" "+c(k.value?k.value.end:"-- --"),1)])])]),d("div",xa,[d("div",ka,[d("div",Ia,[i(l,{picture:k.value.customerCompanyInfo?k.value.customerCompanyInfo.logo:"/images/logoplaceholder.png",size:"medium",rounded:""},null,8,["picture"])]),d("div",Sa,[i(l,{picture:"day"==k.value.shift?"/images/dayTime.png":"/images/nightTime.png",size:"medium",rounded:""},null,8,["picture"])])])])])])),_:1})])])]),Ca,d("div",Va,[i(v(q),{options:A.value},{eventContent:n((e=>[d("div",Ma,[Ra,e.event.id?(o(),x(m,{key:0,light:"",color:"info",class:"mr-5"},{default:n((()=>[d("span",Ta,"Job-00"+c(e.event.id),1)])),_:2},1024)):S("",!0),d("p",ja,c(e.event.extendedProps.jobName),1)])])),_:1},8,["options"])])])]),i(r,{class:"mt-3",radius:"large",elevated:""},{default:n((()=>[i(p,{timesheetId:u.timesheetId},null,8,["timesheetId"])])),_:1})])),action:n((()=>[])),cancel:n((()=>[Da])),_:1},8,["open"]),_.value?(o(),x(g,{key:0,editRotaModalOpen:_.value,rotaId:k.value.id,"onUpdate:modalHandler":t[2]||(t[2]=e=>_.value=!1),"onUpdate:OnSuccess":T},null,8,["editRotaModalOpen","rotaId"])):S("",!0),w.value?(o(),x(y,{key:1,actionVerificationModal:w.value,captionText:"delete job",message:"Are you sure you want to delete this job permanentaly, if you do so then you won't be able to recover it again?","onUpdate:OnSuccess":j},null,8,["actionVerificationModal"])):S("",!0)],64)}}}),Aa={id:"rota-celender"},Ua={class:"columns is-multiline"},La=(e=>(y("data-v-07129a90"),e=e(),h(),e))((()=>d("div",{class:"column is-7 is-flex space-between"},[d("h6",{style:{"white-space":"nowrap"},class:"cus-main-heading mr-3 ml-1 mt-5"}," Rota View ")],-1))),Pa={class:"column is-5 mt-4"},Oa={class:"list-flex-toolbar is-reversed"},za={class:"buttons"},Ea={class:"is-flex space-between mb-2"},Ha={key:0,style:{color:"#f89216","font-size":"16px"},class:"fas fa-sun","aria-hidden":"true"},$a={key:1,class:"fas fa-moon",style:{color:"#3f72c8","font-size":"16px"},"aria-hidden":"true"},qa={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},Ba={class:"is-flex mb-1"},Ga={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},Fa={class:"is-flex"},Wa={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#666"}},Ja={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#666"}},Ka=a({__name:"RotaView",props:{id:{type:String,default:"0"},workerId:{type:Number,default:0},siteID:{type:Number,default:0},calendarView:{type:String,default:"dayGridMonth"}},setup(e){const a=e,u=t(""),m=t(""),p=L(),f=U(),y=t(!1),h=t(!1),b=t([]);t([]);const w=t("3773"),k=t(0);const I=t({plugins:[O,B],initialView:a.calendarView,height:"auto",selectable:!0,eventClick:function(e){y.value=!y.value,k.value=e.event.id},eventColor:"transparent",themeSystem:"bootstrap5",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},views:{dayGridMonth:{eventLimit:3},dayGridWeek:{eventLimit:50},dayGridDay:{eventLimit:50}},eventLimitClick:"popover",droppable:!0,editable:!0,dayCellDidMount:function(e){!function(e){var a=e.el;a.style.background="#fff",a.style.borderRadius="16px"}(e)},events:[],dateClick:function(e){(e=>{const a=b.value.indexOf(e.dateStr);-1!==a?(b.value.splice(a,1),e.dayEl.style.backgroundColor="#fff"):(b.value.push(e.dateStr),e.dayEl.style.backgroundColor="#C0DEFF")})(e)},datesSet:function(e){u.value=e.startStr.substring(0,10),m.value=e.endStr.substring(0,10)}}),V=()=>{b.value=[];const e=document.querySelector("#rota-celender");e&&e.querySelectorAll("td").forEach((function(e){e.removeAttribute("style")}))},R=e=>{b.value.splice(e,1)},T=async()=>{let e={company:p.loggedCompany.id,start_date:u.value,end_date:m.value};console.log("props",a.workerId),0===a.workerId?delete e.worker:0!==a.workerId&&(e.worker=a.workerId),0===a.siteID?delete e.site:0!==a.siteID&&(e.site=a.siteID);const{data:t}=await f.post("/v3/api/rota/date-range/",e);var l;I.value.events=((l=t).forEach((e=>{const a=e.start,t=e.end;e.startedTime=a,e.endedTime=t,e.start=e.date})),l),console.log("rota data",t),V()};return _([()=>u.value,()=>m.value],(([e,a],[t,l])=>{T()})),l((()=>{T()})),_((()=>a.workerId),((e,a)=>{T()})),(e,t)=>{const l=g,u=z,m=Na;return o(),s(C,null,[d("div",Aa,[d("div",Ua,[La,d("div",Pa,[d("div",Oa,[d("div",za,[i(l,{disabled:!b.value.length,color:"info",onClick:V,elevated:""},{default:n((()=>[r(" Clear Selection ("+c(b.value.length)+") ",1)])),_:1},8,["disabled"]),i(l,{disabled:!b.value.length,color:"primary",onClick:t[0]||(t[0]=e=>h.value=!h.value),elevated:""},{default:n((()=>[r(" Add Rota - Days ("+c(b.value.length)+") ",1)])),_:1},8,["disabled"])])])])]),i(v(q),{options:I.value},{eventContent:n((e=>[d("div",{class:"p-2 flex-columns event-content",style:M([{backgroundColor:"day"==e.event.extendedProps.shift?"#effaec":"#eae9f1"},{display:"flex","justify-content":"space-between",height:"90px",width:"100%","border-radius":"12px"}])},[d("div",Ea,["day"==e.event.extendedProps.shift?(o(),s("i",Ha)):(o(),s("i",$a)),d("p",qa,c(e.event.extendedProps.startedTime?e.event.extendedProps.startedTime:"-- : --")+" - "+c(e.event.extendedProps.endedTime?e.event.extendedProps.endedTime:"----"),1)]),d("div",null,[d("div",Ba,[d("p",Ga,c(e.event.extendedProps.worker?`${e.event.extendedProps.worker.firstName}\n              ${e.event.extendedProps.worker.lastName}`:"Not Added"),1)]),d("div",Fa,[d("p",Wa,c(e.event.extendedProps.companyName?e.event.extendedProps.companyName:"----"),1)]),d("p",Ja,c(e.event.extendedProps.siteName?e.event.extendedProps.siteName.slice(0,28):"-- -- --"),1)])],4)])),_:1},8,["options"])]),h.value?(o(),x(u,{key:0,"onUpdate:modalHandler":t[1]||(t[1]=()=>{h.value=!h.value,V()}),"onUpdate:OnSuccess":T,AddRotaModalOpen:h.value,selectedDatesArray:b.value,workerId:a.workerId,onRemoveDate:R},null,8,["AddRotaModalOpen","selectedDatesArray","workerId"])):S("",!0),y.value?(o(),x(m,{key:1,timeSheetDetailModal:y.value,timesheetId:w.value,rotaId:k.value,"onUpdate:modalHandler":t[2]||(t[2]=()=>{y.value=!1}),getRota:T},null,8,["timeSheetDetailModal","timesheetId","rotaId"])):S("",!0)],64)}}}),Xa=b(Ka,[["__scopeId","data-v-07129a90"]]);export{le as _,Xa as a};
