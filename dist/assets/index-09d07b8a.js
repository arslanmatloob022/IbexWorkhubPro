import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-b71d291e.js";import{_ as t,c as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-b11822ee.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-c764e7af.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-e11c4349.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-43496444.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-f84a75aa.js";import{_ as r}from"./VControl-50ace612.js";import{_ as o}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-248a49cf.js";import{e as u,r as c,v as d,Z as p,o as _,l as m,B as v,N as y,C as f,D as g,E as b,F as h,K as x,W as k,j as w,M as j,U as A,V as C,aR as P,H as S,T as V,J as T,P as O,Q as L,R as z,S as F,z as I}from"./index-ac2ce057.js";import{_ as W,a as q}from"./search-4-dark-2b5b440c.js";import{u as E}from"./useAPI-bf5dc094.js";import{f as N}from"./useSupportElement-d4562a45.js";import{u as $}from"./useNotyf-8c8a5656.js";import{u as D}from"./viewWrapper-28de576a.js";import"./via-placeholder-24645670.js";import"./VLabel.vue_vue_type_script_setup_true_lang-1eca0d5e.js";import"./useVFieldContext-305ea4e2.js";import"./VPlaceloadWrap-80777f46.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-1532aaa1.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-44876e7f.js";import"./VField.vue_vue_type_script_setup_true_lang-b3f6550d.js";import"./userSession-e09834e5.js";import"./notyf-bda3d7b4.js";import"./useThemeColors-68a54569.js";const M=e=>(O("data-v-d2adac47"),e=e(),L(),e),R={key:1,class:"is-relative tabs-wrapper is-slider is-squared"},U={class:"page-content-inner"},B={class:"list-flex-toolbar is-reversed"},H={class:"flex-list-v2"},K=M((()=>g("img",{class:"light-image",src:W,alt:""},null,-1))),Y=M((()=>g("img",{class:"dark-image",src:q,alt:""},null,-1))),Z={key:1,class:"tab-content is-active"},J=["onClick"],Q=["onClick"],G=M((()=>g("i",{style:{color:"var(--info)"},class:"fas fa-copy cu-pointer","aria-hidden":"true"},null,-1))),X={class:"item-name dark-inverted"},ee={class:"item-meta"},te={class:"light-text mt-2"},ae={class:"",style:{"font-size":"18px"}},se={class:"item-name dark-inverted"},le={class:"item-meta"},ie={style:{"font-size":"1rem","font-weight":"600","text-transform":"uppercase"}},ne=z(u({__name:"IbexPaymentsList",setup(u){const O=c(""),L=c(!1),z=$(),F=E();d();const I=c(!1),W=c([{id:"",client_info:{id:"",username:"",email:"",role:"",avatar:""},description:"",checkoutLink:"",type:"",created_by_info:{id:"",username:"",email:"",role:"",avatar:""},amount:0,status:"",created_at:"",created_by:"",client:null}]),q=c(""),D=c("paid"),M={description:{label:"Description",grow:!0,media:!0},picture:{label:"Created by",grow:!0,media:!0},amount:{label:"Amount",align:"center"},client:{label:"Client",align:"center",grow:!0},status:"Status",team:{label:"Method"},actions:{label:"Actions",align:"end"}},ne=p((()=>{if(q.value){const e=new RegExp(q.value,"i");return W.value.filter((t=>t.id.match(e)||t.created_by_info.username.match(e)||t.type.match(e)||t.description.match(e)))}return W.value})),re=async()=>{try{I.value=!0;const e=await F.get("/api/paypal/");W.value=e.data}catch(e){console.log(e)}finally{I.value=!1}},oe=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ue=async()=>{try{L.value=!0;await F.delete(`/api/paypal/${O.value}/`);oe.value.isSweetAlertOpen=!1,z.success("Payment deleted successfully"),re()}catch(e){console.log(e)}finally{L.value=!1}};return _((()=>{re()})),(u,c)=>{const d=o,p=r,_=n,L=a,F=i,W=l,E=s,$=t,re=e;return m(I)?(v(),y(d,{key:0})):(v(),f("div",R,[g("div",U,[g("div",B,[b(p,{icon:"feather:search"},{default:h((()=>[x(g("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>w(q)?q.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,m(q)]])])),_:1})]),g("div",H,[0===m(ne).length?(v(),y(_,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[K,Y])),_:1})):j("",!0),"paid"===m(D)?(v(),f("div",Z,[m(ne).length?(v(),y($,{key:0,data:m(ne),columns:M,rounded:""},{body:h((()=>[b(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),f(A,null,C(m(ne),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[b(L,null,{default:h((()=>[g("div",null,[g("p",{class:S(["light-text text-overflow","succeeded"===e.status?"is-link":""]),onClick:t=>(e=>{if("succeeded"===e.status){const t=`https://dashboard.stripe.com/test/payments/${e.response?.id}`;window.open(t,"_blank")}})(e)},V(e.description),11,J),g("p",{class:"mt-2",onClick:t=>{var a;(a=e.checkoutLink)?navigator.clipboard.writeText(a).then((()=>{z.success("Link copied to clipboard!")})).catch((e=>{z.error("Failed to copy the link: ",e)})):z.error("No link to copy!")}},[T(" Checkout link "),G],8,Q)])])),_:2},1024),b(L,{column:{media:!0,grow:!0}},{default:h((()=>[g("div",null,[g("span",X,V(e?.created_by_info?.username),1),g("span",ee,[g("span",null,V(e.created_by_info?.email),1)]),g("span",te,"At: "+V(m(N)(e.created_at)),1)])])),_:2},1024),b(L,null,{default:h((()=>[g("span",ae,"$"+V(e.amount),1)])),_:2},1024),b(L,null,{default:h((()=>[g("div",null,[g("span",se,V(e?.client_info?.username?e?.client_info?.username:"N/A"),1),g("span",le,[g("span",null,V(e.client_info?.email),1)])])])),_:2},1024),b(L,null,{default:h((()=>[b(F,null,{default:h((()=>[g("p",ie,V(e.status),1)])),_:2},1024)])),_:2},1024),b(L,null,{default:h((()=>["Stripe"==e.type?(v(),y(W,{key:0,picture:"/icons/stripe-48.png",squared:"",size:"medium"})):(v(),y(W,{key:1,picture:"/icons/paypal-48.png",squared:"",size:"medium"}))])),_:2},1024),b(L,{column:{align:"end"}},{default:h((()=>[b(E,{onClick:t=>{return a=e.id,O.value=a,void(oe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Payment again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a},color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):j("",!0)])):j("",!0)])]),m(oe).isSweetAlertOpen?(v(),y(re,{key:0,isSweetAlertOpen:m(oe).isSweetAlertOpen,title:m(oe).title,loading:!1,subtitle:m(oe).subtitle,btntext:m(oe).btntext,onConfirm:ue,onCancel:()=>m(oe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0)]))}}}),[["__scopeId","data-v-d2adac47"]]),re={class:"page-content-inner"},oe=u({__name:"index",setup(e){F();return D().setPageTitle("Payments"),I((()=>({title:"Payments"}))),(e,t)=>{const a=ne;return v(),f("div",re,[b(a)])}}});export{oe as default};
