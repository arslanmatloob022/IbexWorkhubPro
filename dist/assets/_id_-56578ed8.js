import{_ as e}from"./AddUpdateUser-16ffcf18.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-10f34447.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-2319c3ea.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-15847dda.js";import{_ as t}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-1b84b9f0.js";import{e as i,r,Z as n,o,B as u,C as p,l as c,N as d,D as _,E as v,F as m,K as y,j as g,W as f,T as k,J as h,H as j,U as b,V as x,aR as w,M as V,O as T,x as I,G as P,I as A,z as C}from"./index-65ab8135.js";import{_ as S}from"./VField.vue_vue_type_script_setup_true_lang-a28ace1f.js";import{_ as M}from"./VControl-203dd9c0.js";import{_ as W}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-77431c7d.js";import{_ as L,a as N}from"./search-1-dark-61831a90.js";import{u as U}from"./useAPI-008c05f7.js";import{u as E}from"./useNotyf-493e68e7.js";import{_ as F}from"./WorkerTasks-2c7ced50.js";import{i as O}from"./index-f52ed8ce.js";import{u as D}from"./personalScoreGauge-251e2798.js";import{u as H}from"./viewWrapper-80a16a8e.js";import"./VModal.vue_vue_type_style_index_0_lang-aaafd911.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-7949df44.js";import"./VLabel.vue_vue_type_script_setup_true_lang-aba2fa88.js";import"./useVFieldContext-a0c14723.js";import"./VIcon.vue_vue_type_script_setup_true_lang-69ba5e53.js";import"./VFilePond.vue_vue_type_script_lang-da332a67.js";import"./VInput.vue_vue_type_script_setup_true_lang-89d8b740.js";import"./useSupportElement-92e76e72.js";import"./userSession-325772ef.js";import"./VFlex.vue_vue_type_style_index_0_lang-e2c3356a.js";import"./VPlaceloadWrap-cc349d2c.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-b3d438d1.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-3b9b5462.js";import"./notyf-e6b1364d.js";import"./useThemeColors-e89e9c7b.js";import"./UpdateTask.vue_vue_type_script_setup_true_lang-ac60149b.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-14fce819.js";import"./VOption.vue_vue_type_style_index_0_lang-700eee4a.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-d97b35a0.js";import"./VDropdown.vue_vue_type_style_index_0_lang-0f117635.js";import"./useDropdown-245a5f90.js";import"./projects-dark-4a371d8a.js";import"./billboard-5857d5e1.js";const K={key:1},R={class:"list-view-toolbar"},z={class:"list-info"},B={key:0},Z={key:1},q={class:"buttons"},G={class:"page-content-inner"},J={class:"list-view list-view-v1"},Y=_("img",{class:"light-image",src:L,alt:""},null,-1),$=_("img",{class:"dark-image",src:N,alt:""},null,-1),X={class:"list-view-inner"},Q={class:"list-view-item-inner"},ee={class:"meta-left"},se=_("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),ae={class:"meta-right"},le={class:"tags"},te={class:"stats"},ie={class:"stat"},re=_("span",null,"Status",-1),ne=_("div",{class:"separator"},null,-1),oe={class:"stat"},ue=_("span",null,"Active tasks",-1),pe=_("div",{class:"separator"},null,-1),ce={class:"stat"},de=_("span",null,"Pending tasks",-1),_e=i({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(i){const I=i,P=U();E();const A=r(!1),C=r({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),L=r(""),N=n((()=>L.value?C.value.filter((e=>e.username.match(new RegExp(L.value,"i"))||e.email.match(new RegExp(L.value,"i")))):C.value));console.log(N.value);const F=r(!1),O=()=>{F.value=!0},D=async()=>{try{A.value=!0;const e=await P.get(`/api/users/workers/?supplier=${I.supplierId}`);C.value=e.data}catch(e){console.log(e)}finally{A.value=!1}};return o((()=>{D()})),(i,r)=>{const n=W,o=M,P=S,C=T,U=t,E=l,H=a,_e=s,ve=e;return u(),p(b,null,[c(A)?(u(),d(n,{key:0})):(u(),p("div",K,[_("div",R,[v(P,null,{default:m((()=>[v(o,{icon:"feather:search"},{default:m((()=>[y(_("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>g(L)?L.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(L)]])])),_:1})])),_:1}),_("div",z,[1===c(N).length?(u(),p("span",B,"1 record found")):(u(),p("span",Z,k(c(N).length)+" records found",1))]),_("div",q,[v(C,{color:"primary",onClick:O,icon:"fas fa-plus",elevated:""},{default:m((()=>[h(" Worker ")])),_:1})])]),_("div",G,[_("div",J,[v(U,{class:j([0!==c(N).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:m((()=>[Y,$])),_:1},8,["class"]),_("div",X,[v(w,{name:"list-complete",tag:"div"},{default:m((()=>[(u(!0),p(b,null,x(c(N),((e,s)=>(u(),p("div",{key:s,class:"list-view-item"},[_("div",Q,[v(E,{picture:e.avatar,size:"large"},null,8,["picture"]),_("div",ee,[_("h3",null,k(e.username),1),_("span",null,[se,_("span",null,k(e.email),1)])]),_("div",ae,[_("div",le,[v(H,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),_("div",te,[_("div",ie,[_("span",null,k(e.is_active?"Active":"In-Active"),1),re]),ne,_("div",oe,[_("span",null,k(e.active_tasks),1),ue]),pe,_("div",ce,[_("span",null,k(e.pending_tasks),1),de])])])])])))),128))])),_:1})])]),c(N).length>5?(u(),d(_e,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):V("",!0)])])),c(F)?(u(),d(ve,{key:2,isModalOpen:c(F),supplierId:I.supplierId,userRole:"worker","onUpdate:closeModalHandler":r[1]||(r[1]=e=>F.value=!1),"onUpdate:actionUpdateHandler":D},null,8,["isModalOpen","supplierId"])):V("",!0)],64)}}}),ve={class:"lifestyle-dashboard lifestyle-dashboard-v3"},me={class:"illustration-header"},ye={class:"p-4"},ge={class:"header-meta"},fe={class:"summary-stats"},ke={class:"summary-stat"},he=_("span",null,"Role",-1),je={class:"summary-stat"},be=_("span",null,"Status",-1),xe={class:"summary-stat"},we=_("span",null,"Phone",-1),Ve={class:"summary-stat"},Te=_("span",null,"Email",-1),Ie={class:"summary-stat h-hidden-tablet-p"},Pe=_("span",null,"Email Notification",-1),Ae={class:"columns is-multiline is-flex-tablet-p"},Ce={class:"list-flex-toolbar is-reversed"},Se={class:"tabs-inner"},Me={class:"tabs is-boxed"},We=[_("span",null,"Tasks",-1)],Le=[_("span",null,"Workers",-1)],Ne=_("li",{class:"tab-naver"},null,-1),Ue={key:0,class:"column is-12"},Ee={key:1,class:"column is-12"},Fe=i({__name:"SubContractorProfile",setup(e){E();const s=U(),a=I();r([]),D();const t=r({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});r(!1),r("all");const i=r(!1),n=r("tasks");r([]),r([]),r([]),r([]),r({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),r({plugins:[O],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]});return r({}),o((async()=>{await(async()=>{try{i.value=!0;const e=await s.get(`/api/users/${a.params.id}`);t.value=e.data}catch(e){console.log(e)}finally{i.value=!1}})()})),(e,s)=>{const r=l,o=F,d=_e;return u(),p("div",ve,[_("div",me,[_("div",ye,[v(r,{size:"xl",squared:"",picture:c(t).avatar,alt:""},null,8,["picture"])]),_("div",ge,[_("h3",null,k(c(i)?"Loading...":c(t)?.username),1),_("div",fe,[_("div",ke,[_("span",null,k(c(i)?"Loading...":c(t)?.role),1),he]),_("div",je,[_("span",null,k(c(i)?"Loading...":c(t)?.is_active?"Active":" In-Active"),1),be]),_("div",xe,[_("span",null,k(c(i)?"Loading...":c(t)?.phoneNumber?c(t)?.phoneNumber:"N/A"),1),we]),_("div",Ve,[_("span",null,k(c(i)?"Loading...":c(t)?.email),1),Te]),_("div",Ie,[_("span",null,k(c(i)?"Loading...":c(t).is_sentMail?"On":"Off"),1),Pe])])])]),_("div",Ae,[_("div",Ce,[_("div",Se,[_("div",Me,[_("ul",null,[_("li",{class:j(["tasks"===c(n)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:s[0]||(s[0]=P(A((e=>n.value="tasks"),["prevent"]),["space"])),onClick:s[1]||(s[1]=e=>n.value="tasks")},We,32)],2),_("li",{class:j(["workers"===c(n)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:s[2]||(s[2]=P(A((e=>n.value="workers"),["prevent"]),["space"])),onClick:s[3]||(s[3]=e=>n.value="workers")},Le,32)],2),Ne])])])]),"tasks"==c(n)?(u(),p("div",Ue,[v(o,{workerId:c(a).params.id},null,8,["workerId"])])):V("",!0),"workers"==c(n)?(u(),p("div",Ee,[v(d,{"supplier-id":c(a).params.id},null,8,["supplier-id"])])):V("",!0)])])}}}),Oe={class:""},De=i({__name:"[id]",setup:e=>(H().setPageTitle("Sub-Contractor Info"),C({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Fe;return u(),p("div",Oe,[v(a)])})});export{De as default};
