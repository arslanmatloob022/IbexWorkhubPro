import{_ as e}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-c9a1df3d.js";import{_ as s}from"./JobTodos.vue_vue_type_style_index_0_lang-6f4801fa.js";import{_ as a}from"./UserProfileInfo-8246c95f.js";import{_ as l}from"./AddUpdateUser-a463893a.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-5165b287.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-7b3d0b6b.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-8c7c80b6.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-c4090017.js";import{f as o,r as u,$ as p,o as _,C as c,D as d,m as v,O as m,E as y,F as k,G as g,L as f,k as j,X as b,U as x,K as h,I as w,V,W as C,aS as I,N as P,P as T,y as S,H as A,J as K,A as M}from"./index-c9b38830.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-f85fce88.js";import{_ as F}from"./VControl-437df329.js";import{_ as L}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-500d6066.js";import{_ as W,a as E}from"./search-1-dark-38157aae.js";import{u as O}from"./useAPI-cef796ff.js";import{u as B}from"./useNotyf-1cb82e82.js";import{_ as N,a as H}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-7c306709.js";import{_ as R}from"./WorkerCalendar-081fc509.js";import{u as D}from"./viewWrapper-abe0b8be.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-d9d91d44.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-2af101f5.js";import"./VModal.vue_vue_type_style_index_0_lang-94b2761c.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-3b919938.js";import"./useVFieldContext-28771520.js";import"./VInput.vue_vue_type_script_setup_true_lang-bf7be950.js";import"./VOption.vue_vue_type_style_index_0_lang-6946ed39.js";import"./useSupportElement-212653a8.js";import"./estimatesScripts-ed04da35.js";import"./VIcon.vue_vue_type_script_setup_true_lang-0d953bbc.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-d98089b6.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-987e26dd.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-ecdf6750.js";import"./search-3-dark-b5ef2271.js";import"./VBlock.vue_vue_type_style_index_0_lang-d514481a.js";import"./VIconButton-3a09acb5.js";import"./having-coffee-dark-d6099ea4.js";import"./moment-bad41465.js";import"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-15958e0d.js";import"./VLabel.vue_vue_type_script_setup_true_lang-04a12366.js";import"./VIconBox.vue_vue_type_style_index_0_lang-8b07af89.js";import"./route-block-83d24a4e.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-76513dbd.js";import"./VFilePond.vue_vue_type_script_lang-d787632a.js";import"./VFlex.vue_vue_type_style_index_0_lang-17d00bfe.js";import"./VPlaceloadWrap-69d5897d.js";import"./notyf-8e1c5b5d.js";import"./useThemeColors-aca31bef.js";import"./TaskInfoModal.vue_vue_type_script_setup_true_lang-1c3e8644.js";import"./search-6-dark-e5727ba1.js";import"./via-placeholder-24645670.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-c610dc2b.js";import"./UpdateTask.vue_vue_type_script_setup_true_lang-c1ff1e09.js";import"./VDropdown.vue_vue_type_style_index_0_lang-b401a2df.js";import"./useDropdown-74697b1b.js";import"./projects-dark-c06ab099.js";import"./VFlexTable.vue_vue_type_style_index_0_lang-96776e54.js";import"./search-4-dark-3664abd4.js";import"./index-c1fc2d09.js";import"./FullCalendar-8d4896d2.js";import"./index-37bedc79.js";import"./index-04e05ac8.js";const J={key:1},X={class:"list-view-toolbar"},$={class:"list-info"},z={key:0},q={key:1},G={class:"buttons"},Z={class:"page-content-inner"},Q={class:"list-view list-view-v1"},Y=y("img",{class:"light-image",src:W,alt:""},null,-1),ee=y("img",{class:"dark-image",src:E,alt:""},null,-1),se={class:"list-view-inner"},ae={class:"list-view-item-inner"},le={class:"meta-left"},te=y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),ie={class:"meta-right"},ne={class:"tags"},re={class:"stats"},oe={class:"stat"},ue=y("span",null,"Status",-1),pe=y("div",{class:"separator"},null,-1),_e={class:"stat"},ce=y("span",null,"Active tasks",-1),de=y("div",{class:"separator"},null,-1),ve={class:"stat"},me=y("span",null,"Pending tasks",-1),ye=o({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(e){const s=e,a=O();B();const o=u(!1),S=u({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),A=u(""),K=p((()=>A.value?S.value.filter((e=>e.username.match(new RegExp(A.value,"i"))||e.email.match(new RegExp(A.value,"i")))):S.value));console.log(K.value);const M=u(!1),W=()=>{M.value=!0},E=async()=>{try{o.value=!0;const e=await a.get(`/api/users/workers/?supplier=${s.supplierId}`);S.value=e.data}catch(e){console.log(e)}finally{o.value=!1}};return _((()=>{E()})),(e,a)=>{const u=L,p=F,_=U,S=T,O=r,B=n,N=i,H=t,R=l;return c(),d(V,null,[v(o)?(c(),m(u,{key:0})):(c(),d("div",J,[y("div",X,[k(_,null,{default:g((()=>[k(p,{icon:"feather:search"},{default:g((()=>[f(y("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>j(A)?A.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,v(A)]])])),_:1})])),_:1}),y("div",$,[1===v(K).length?(c(),d("span",z,"1 record found")):(c(),d("span",q,x(v(K).length)+" records found",1))]),y("div",G,[k(S,{color:"primary",onClick:W,icon:"fas fa-plus",elevated:""},{default:g((()=>[h(" Worker ")])),_:1})])]),y("div",Z,[y("div",Q,[k(O,{class:w([0!==v(K).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[Y,ee])),_:1},8,["class"]),y("div",se,[k(I,{name:"list-complete",tag:"div"},{default:g((()=>[(c(!0),d(V,null,C(v(K),((e,s)=>(c(),d("div",{key:s,class:"list-view-item"},[y("div",ae,[k(B,{picture:e.avatar,size:"large"},null,8,["picture"]),y("div",le,[y("h3",null,x(e.username),1),y("span",null,[te,y("span",null,x(e.email),1)])]),y("div",ie,[y("div",ne,[k(N,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),y("div",re,[y("div",oe,[y("span",null,x(e.is_active?"Active":"In-Active"),1),ue]),pe,y("div",_e,[y("span",null,x(e.active_tasks),1),ce]),de,y("div",ve,[y("span",null,x(e.pending_tasks),1),me])])])])])))),128))])),_:1})])]),v(K).length>5?(c(),m(H,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):P("",!0)])])),v(M)?(c(),m(R,{key:2,isModalOpen:v(M),supplierId:s.supplierId,userRole:"worker","onUpdate:closeModalHandler":a[1]||(a[1]=e=>M.value=!1),"onUpdate:actionUpdateHandler":E},null,8,["isModalOpen","supplierId"])):P("",!0)],64)}}}),ke={class:"lifestyle-dashboard lifestyle-dashboard-v3"},ge={class:"illustration-header"},fe={class:"p-4"},je={class:"header-meta"},be={class:"summary-stats"},xe={class:"summary-stat"},he=y("span",null,"Role",-1),we={class:"summary-stat"},Ve=y("span",null,"Email",-1),Ce={class:"tabs-wrapper"},Ie={class:"tabs-inner"},Pe={class:"tabs is-boxed",slider:""},Te=[y("span",null,"Tasks",-1)],Se=[y("span",null,"Workers",-1)],Ae=[y("span",null,"Profile Info",-1)],Ke=[y("span",null,"Todos",-1)],Me=[y("span",null,"Activities",-1)],Ue=y("li",{class:"tab-naver"},null,-1),Fe={key:0,class:"columns is-multiline is-flex-tablet-p"},Le={class:"list-flex-toolbar is-reversed"},We={class:"tabs-inner"},Ee={class:"tabs is-boxed"},Oe=[y("span",null,"Tasks Calendar",-1)],Be=[y("span",null,"Chronic View",-1)],Ne=[y("span",null,"Tasks",-1)],He=y("li",{class:"tab-naver"},null,-1),Re={key:0,class:"column is-12"},De={key:1,class:"column is-12"},Je={key:2,class:"column is-12"},Xe={key:1,class:"columns is-multiline is-flex-tablet-p"},$e={class:"column is-12"},ze={key:2,class:"columns is-multiline is-flex-tablet-p"},qe={class:"column is-12"},Ge={key:3,class:"columns is-multiline is-flex-tablet-p"},Ze={class:"column is-12"},Qe={key:4,class:"column is-12"},Ye=o({__name:"SubContractorProfile",setup(l){const t=O(),i=S(),r=u(!1),o=u("tasks"),p=u("calendar"),m=u({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});return _((async()=>{await(async()=>{try{r.value=!0;const e=await t.get(`/api/users/${i.params.id}`);m.value=e.data}catch(e){console.log(e)}finally{r.value=!1}})()})),(l,t)=>{const u=n,_=R,g=N,f=H,j=ye,b=a,h=s,V=e;return c(),d("div",ke,[y("div",ge,[y("div",fe,[k(u,{size:"xl",squared:"",picture:v(m).avatar,alt:""},null,8,["picture"])]),y("div",je,[y("h3",null,x(v(r)?"Loading...":v(m)?.username)+" "+x(v(m).last_name?v(m).last_name:""),1),y("div",be,[y("div",xe,[y("span",null,x(v(r)?"Loading...":"Subcontractor"),1),he]),y("div",we,[y("span",null,x(v(r)?"Loading...":v(m)?.email),1),Ve])])])]),y("div",Ce,[y("div",Ie,[y("div",Pe,[y("ul",null,[y("li",{class:w(["tasks"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=A(K((e=>o.value="tasks"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>o.value="tasks")},Te,32)],2),y("li",{class:w(["workers"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=A(K((e=>o.value="workers"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>o.value="workers")},Se,32)],2),y("li",{class:w(["profile"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=A(K((e=>o.value="profile"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>o.value="profile")},Ae,32)],2),y("li",{class:w(["todos"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=A(K((e=>o.value="todos"),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>o.value="todos")},Ke,32)],2),y("li",{class:w(["activities"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=A(K((e=>o.value="activities"),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>o.value="activities")},Me,32)],2),Ue])])])]),"tasks"==v(o)?(c(),d("div",Fe,[y("div",Le,[y("div",We,[y("div",Ee,[y("ul",null,[y("li",{class:w(["calendar"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=A(K((e=>p.value="calendar"),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>p.value="calendar")},Oe,32)],2),y("li",{class:w(["chronic"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=A(K((e=>p.value="chronic"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>p.value="chronic")},Be,32)],2),y("li",{class:w(["tasks"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=A(K((e=>p.value="tasks"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>p.value="tasks")},Ne,32)],2),He])])])]),"calendar"==v(p)?(c(),d("div",Re,[k(_,{"worker-id":v(i).params.id},null,8,["worker-id"])])):P("",!0),"chronic"==v(p)?(c(),d("div",De,[k(g,{userId:v(i).params.id},null,8,["userId"])])):P("",!0),"tasks"==v(p)?(c(),d("div",Je,[k(f,{workerId:v(i).params.id},null,8,["workerId"])])):P("",!0)])):P("",!0),"workers"==v(o)?(c(),d("div",Xe,[y("div",$e,[k(j,{"supplier-id":v(i).params.id},null,8,["supplier-id"])])])):P("",!0),"profile"==v(o)?(c(),d("div",ze,[y("div",qe,[k(b,{"user-data":v(m)},null,8,["user-data"])])])):P("",!0),"todos"==v(o)?(c(),d("div",Ge,[y("div",Ze,[k(h,{user:v(i).params.id},null,8,["user"])])])):P("",!0),"activities"===v(o)?(c(),d("div",Qe,[k(V,{user:v(i).params.id},null,8,["user"])])):P("",!0)])}}}),es={class:""},ss=o({__name:"[id]",setup:e=>(D().setPageTitle("Sub-Contractor Info"),M({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ye;return c(),d("div",es,[k(a)])})});export{ss as default};
