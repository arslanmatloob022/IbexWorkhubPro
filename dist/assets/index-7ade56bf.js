import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-2b61dc34.js";import{_ as t,c as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-6348c351.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-bca56fa4.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-93141465.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-85072513.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75de59d2.js";import{_ as r}from"./VControl-615e3926.js";import{_ as o}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-34bfc061.js";import{e as u,r as c,t as d,Z as p,o as _,l as m,y as v,H as y,z as f,C as g,A as b,B as h,S as x,T as k,j as w,P as j,Q as A,R as C,aR as P,O as S,J as V,D as O,W as T,X as L,L as z,G as W,v as F}from"./index-545c24a3.js";import{_ as I,a as N}from"./search-4-dark-2b5b440c.js";import{u as q}from"./useAPI-beeef5ad.js";import{f as D}from"./useSupportElement-288b92c0.js";import{u as R}from"./useNotyf-5e436df4.js";import{u as $}from"./viewWrapper-9b657cf3.js";import"./via-placeholder-24645670.js";import"./VLabel.vue_vue_type_script_setup_true_lang-6ad63607.js";import"./useVFieldContext-a9933322.js";import"./VPlaceloadWrap-dfd6fc1c.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-b22b82ea.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-bc94ed15.js";import"./VField.vue_vue_type_script_setup_true_lang-c6f8e5fc.js";import"./userSession-2695ecb7.js";import"./notyf-1b3f5f29.js";import"./useThemeColors-209b32c4.js";const B=e=>(T("data-v-d2adac47"),e=e(),L(),e),E={key:1,class:"is-relative tabs-wrapper is-slider is-squared"},G={class:"page-content-inner"},M={class:"list-flex-toolbar is-reversed"},Q={class:"flex-list-v2"},U=B((()=>g("img",{class:"light-image",src:I,alt:""},null,-1))),Y=B((()=>g("img",{class:"dark-image",src:N,alt:""},null,-1))),H={key:1,class:"tab-content is-active"},J=["onClick"],X=["onClick"],Z=B((()=>g("i",{style:{color:"var(--info)"},class:"fas fa-copy cu-pointer","aria-hidden":"true"},null,-1))),K={class:"item-name dark-inverted"},ee={class:"item-meta"},te={class:"light-text mt-2"},ae={class:"",style:{"font-size":"18px"}},se={class:"item-name dark-inverted"},le={class:"item-meta"},ie={style:{"font-size":"1rem","font-weight":"600","text-transform":"uppercase"}},ne=z(u({__name:"IbexPaymentsList",setup(u){const T=c(""),L=c(!1),z=R(),W=q();d();const F=c(!1),I=c([{id:"",client_info:{id:"",username:"",email:"",role:"",avatar:""},description:"",checkoutLink:"",type:"",created_by_info:{id:"",username:"",email:"",role:"",avatar:""},amount:0,status:"",created_at:"",created_by:"",client:null}]),N=c(""),$=c("paid"),B={description:{label:"Description",grow:!0,media:!0},picture:{label:"Created by",grow:!0,media:!0},amount:{label:"Amount",align:"center"},client:{label:"Client",align:"center",grow:!0},status:"Status",team:{label:"Method"},actions:{label:"Actions",align:"end"}},ne=p((()=>{if(N.value){const e=new RegExp(N.value,"i");return I.value.filter((t=>t.id.match(e)||t.created_by_info.username.match(e)||t.type.match(e)||t.description.match(e)))}return I.value})),re=async()=>{try{F.value=!0;const e=await W.get("/api/paypal/");I.value=e.data}catch(e){console.log(e)}finally{F.value=!1}},oe=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ue=async()=>{try{L.value=!0;await W.delete(`/api/paypal/${T.value}/`);oe.value.isSweetAlertOpen=!1,z.success("Payment deleted successfully"),re()}catch(e){console.log(e)}finally{L.value=!1}};return _((()=>{re()})),(u,c)=>{const d=o,p=r,_=n,L=a,W=i,I=l,q=s,R=t,re=e;return m(F)?(v(),y(d,{key:0})):(v(),f("div",E,[g("div",G,[g("div",M,[b(p,{icon:"feather:search"},{default:h((()=>[x(g("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>w(N)?N.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,m(N)]])])),_:1})]),g("div",Q,[0===m(ne).length?(v(),y(_,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[U,Y])),_:1})):j("",!0),"paid"===m($)?(v(),f("div",H,[m(ne).length?(v(),y(R,{key:0,data:m(ne),columns:B,rounded:""},{body:h((()=>[b(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),f(A,null,C(m(ne),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[b(L,null,{default:h((()=>[g("div",null,[g("p",{class:S(["light-text text-overflow","succeeded"===e.status?"is-link":""]),onClick:t=>(e=>{if("succeeded"===e.status){const t=`https://dashboard.stripe.com/test/payments/${e.response?.id}`;window.open(t,"_blank")}})(e)},V(e.description),11,J),g("p",{class:"mt-2",onClick:t=>{var a;(a=e.checkoutLink)?navigator.clipboard.writeText(a).then((()=>{z.success("Link copied to clipboard!")})).catch((e=>{z.error("Failed to copy the link: ",e)})):z.error("No link to copy!")}},[O(" Checkout link "),Z],8,X)])])),_:2},1024),b(L,{column:{media:!0,grow:!0}},{default:h((()=>[g("div",null,[g("span",K,V(e?.created_by_info?.username),1),g("span",ee,[g("span",null,V(e.created_by_info?.email),1)]),g("span",te,"At: "+V(m(D)(e.created_at)),1)])])),_:2},1024),b(L,null,{default:h((()=>[g("span",ae,"$"+V(e.amount),1)])),_:2},1024),b(L,null,{default:h((()=>[g("div",null,[g("span",se,V(e?.client_info?.username?e?.client_info?.username:"N/A"),1),g("span",le,[g("span",null,V(e.client_info?.email),1)])])])),_:2},1024),b(L,null,{default:h((()=>[b(W,null,{default:h((()=>[g("p",ie,V(e.status),1)])),_:2},1024)])),_:2},1024),b(L,null,{default:h((()=>["Stripe"==e.type?(v(),y(I,{key:0,picture:"/icons/stripe-48.png",squared:"",size:"medium"})):(v(),y(I,{key:1,picture:"/icons/paypal-48.png",squared:"",size:"medium"}))])),_:2},1024),b(L,{column:{align:"end"}},{default:h((()=>[b(q,{onClick:t=>{return a=e.id,T.value=a,void(oe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Payment again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a},color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):j("",!0)])):j("",!0)])]),m(oe).isSweetAlertOpen?(v(),y(re,{key:0,isSweetAlertOpen:m(oe).isSweetAlertOpen,title:m(oe).title,loading:!1,subtitle:m(oe).subtitle,btntext:m(oe).btntext,onConfirm:ue,onCancel:()=>m(oe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0)]))}}}),[["__scopeId","data-v-d2adac47"]]),re={class:"page-content-inner"},oe=u({__name:"index",setup(e){W();return $().setPageTitle("Payments"),F((()=>({title:"Payments"}))),(e,t)=>{const a=ne;return v(),f("div",re,[b(a)])}}});export{oe as default};
