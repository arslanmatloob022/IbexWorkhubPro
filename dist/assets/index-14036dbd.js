import{s as e}from"./index-ffc6f090.js";import{b as t}from"./index-8023ccec.js";const r=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],a={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...r,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...r],h2:[["className","sr-only"]],img:[...r,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...r,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...r],table:[...r],ul:[...r,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},s={}.hasOwnProperty;function o(e,t){if(t&&"object"==typeof t){const r=t;switch("string"==typeof r.type?r.type:""){case"comment":return function(e,t){if(e.schema.allowComments){const e="string"==typeof t.value?t.value:"",r=e.indexOf("--\x3e"),a={type:"comment",value:r<0?e:e.slice(0,r)};return l(a,t),a}}(e,r);case"doctype":return function(e,t){if(e.schema.allowDoctypes){const e={type:"doctype"};return l(e,t),e}}(e,r);case"element":return function(e,t){const r="string"==typeof t.tagName?t.tagName:"";e.stack.push(r);const a=n(e,t.children),o=function(e,t){const r=e.stack[e.stack.length-1],a=e.schema.attributes,o=e.schema.required,n=a&&s.call(a,r)?a[r]:void 0,i=a&&s.call(a,"*")?a["*"]:void 0,l=t&&"object"==typeof t?t:{},u={};let f;for(f in l)if(s.call(l,f)){const t=l[f];let r=c(e,p(n,f),f,t);null==r&&(r=c(e,p(i,f),f,t)),null!=r&&(u[f]=r)}if(o&&s.call(o,r)){const e=o[r];for(f in e)s.call(e,f)&&!s.call(u,f)&&(u[f]=e[f])}return u}(e,t.properties);e.stack.pop();let i=!1;if(r&&"*"!==r&&(!e.schema.tagNames||e.schema.tagNames.includes(r))&&(i=!0,e.schema.ancestors&&s.call(e.schema.ancestors,r))){const t=e.schema.ancestors[r];let a=-1;for(i=!1;++a<t.length;)e.stack.includes(t[a])&&(i=!0)}if(!i)return e.schema.strip&&!e.schema.strip.includes(r)?a:void 0;const u={type:"element",tagName:r,properties:o,children:a};return l(u,t),u}(e,r);case"root":return function(e,t){const r=n(e,t.children),a={type:"root",children:r};return l(a,t),a}(e,r);case"text":return function(e,t){const r="string"==typeof t.value?t.value:"",a={type:"text",value:r};return l(a,t),a}(0,r)}}}function n(e,t){const r=[];if(Array.isArray(t)){const a=t;let s=-1;for(;++s<a.length;){const t=o(e,a[s]);t&&(Array.isArray(t)?r.push(...t):r.push(t))}}return r}function c(e,t,r,a){return t?Array.isArray(a)?function(e,t,r,a){let s=-1;const o=[];for(;++s<a.length;){const n=i(e,t,r,a[s]);"number"!=typeof n&&"string"!=typeof n||o.push(n)}return o}(e,t,r,a):i(e,t,r,a):void 0}function i(e,t,r,a){if(("boolean"==typeof a||"number"==typeof a||"string"==typeof a)&&function(e,t,r){const a=e.schema.protocols&&s.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!a||0===a.length)return!0;const o=String(r),n=o.indexOf(":"),c=o.indexOf("?"),i=o.indexOf("#"),l=o.indexOf("/");if(n<0||l>-1&&n>l||c>-1&&n>c||i>-1&&n>i)return!0;let p=-1;for(;++p<a.length;){const e=a[p];if(n===e.length&&o.slice(0,e.length)===e)return!0}return!1}(e,r,a)){if("object"==typeof t&&t.length>1){let e=!1,r=0;for(;++r<t.length;){const s=t[r];if(s&&"object"==typeof s&&"flags"in s){if(s.test(String(a))){e=!0;break}}else if(s===a){e=!0;break}}if(!e)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(r)?e.schema.clobberPrefix+a:a}}function l(r,a){const s=t(a);a.data&&(r.data=e(a.data)),s&&(r.position=s)}function p(e,t){let r,a=-1;if(e)for(;++a<e.length;){const s=e[a],o="string"==typeof s?s:s[0];if(o===t)return s;"data*"===o&&(r=s)}if(t.length>4&&"data"===t.slice(0,4).toLowerCase())return r}function u(e){return function(t){const r=function(e,t){let r={type:"root",children:[]};const s=o({schema:t?{...a,...t}:a,stack:[]},e);return s&&(Array.isArray(s)?1===s.length?r=s[0]:r.children=s:r=s),r}(t,e);return r}}export{u as default,a as defaultSchema};
