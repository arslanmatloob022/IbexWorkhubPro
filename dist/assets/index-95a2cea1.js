import{_ as e}from"./VInput.vue_vue_type_script_setup_true_lang-bb0429cf.js";import{e as a,r as s,o as l,M as t,y as i,z as n,C as o,K as c,A as r,B as u,l as d,J as p,S as m,T as v,D as _,j as f,P as y,E as b,v as h,H as g,ak as k}from"./index-57283339.js";import{_ as x}from"./VTextarea.vue_vue_type_script_setup_true_lang-a1c9577b.js";import{_ as V}from"./VField.vue_vue_type_script_setup_true_lang-a5be644c.js";import{_ as j}from"./VControl-f243fcbb.js";import{_ as w}from"./VAvatar.vue_vue_type_style_index_0_lang-9a36d6a0.js";import{u as C}from"./useAPI-3d1b2833.js";import{u as P}from"./useNotyf-989627b5.js";import{u as S}from"./viewWrapper-4b9321e5.js";import{b as A}from"./route-block-83d24a4e.js";import"./useVFieldContext-f1f52f20.js";import"./VLabel.vue_vue_type_script_setup_true_lang-e37ada5c.js";import"./userSession-a3dc25ef.js";import"./notyf-47ab21bb.js";import"./useThemeColors-73dd3c67.js";const z={class:"banking-dashboard banking-dashboard-v1"},I={class:"columns is-multiline"},T={class:"column is-12"},U={class:"columns is-multiline"},q={class:"column is-6"},N={class:"dashboard-card is-contacts"},D=o("div",{class:"title-wrap"},[o("h3",{class:"dark-inverted"},"Create link")],-1),F=["onSubmit"],M={class:"transfer-form"},L=o("label",{for:""}," Client",-1),B={class:"multiselect-single-label"},E={class:"select-label-text"},H={class:"select-label-text"},J={class:"field column is-12"},K=o("label",null,"Amount *",-1),O={class:"field has-addons"},Q={class:"field-addon-body"},W=o("div",{class:"control"},[o("span",{class:"select currency-select"},[o("select",null,[o("option",null,"$")])])],-1),$={class:"control is-expanded"},G={class:"field"},R=o("label",null,"Description *",-1),X={class:"submit-wrap mt-5"},Y={class:"column is-6"},Z={class:"dashboard-card"},ee=o("div",{class:"title-wrap"},[o("h3",{class:"dark-inverted"},"Payment links")],-1),ae={key:0,class:"context-text"},se=a({__name:"IbexPaymentModule",setup(a){const h=C(),g=P(),k=s({amount:"",description:"",client:"",type:"Stripe"});s(!1),s({payments:[],count:0});const S=s(""),A=s([]),se=s(!1),le=s(!1),te=async()=>{try{le.value=!0;const e=await h.post("/api/paypal/stripe-session/",{amount:k.value.amount,description:k.value.description,client:k.value.client});S.value=e.data.url,g.success("link Created")}catch(e){g.success("Something went wrong")}finally{le.value=!1}};return l((()=>{(async()=>{try{se.value=!0;const e=await h.get("/api/users/by-role/client/",{});A.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{se.value=!1}})()})),(a,s)=>{const l=w,h=t("Multiselect"),C=j,P=V,se=x,ie=b,ne=e;return i(),n("div",z,[o("div",I,[o("div",T,[o("div",U,[o("div",q,[o("div",N,[D,o("form",{action:"",onSubmit:c(te,["prevent"])},[o("div",M,[r(P,{class:"is-image-select has-curved-images"},{default:u((()=>[L,r(C,null,{default:u((()=>[r(h,{modelValue:d(k).client,"onUpdate:modelValue":s[0]||(s[0]=e=>d(k).client=e),placeholder:"Select a client",label:"name","max-height":145,options:d(A)},{singlelabel:u((({value:e})=>[o("div",B,[r(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),o("span",E,p(e.name),1)])])),option:u((({option:e})=>[r(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),o("span",H,p(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),o("div",J,[K,o("div",O,[o("div",Q,[W,o("div",$,[m(o("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>d(k).amount=e),required:"",min:"2",class:"input",type:"number",placeholder:"Amount of money"},null,512),[[v,d(k).amount]])])])])]),o("div",G,[R,r(P,null,{default:u((()=>[r(C,null,{default:u((()=>[r(se,{required:"",modelValue:d(k).description,"onUpdate:modelValue":s[2]||(s[2]=e=>d(k).description=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})]),o("div",X,[r(ie,{type:"submit",color:"info",size:"big",fullwidth:"",loading:d(le),raised:"",bold:""},{default:u((()=>[_(" Create Payment link ")])),_:1},8,["loading"])])])],40,F)])]),o("div",Y,[o("div",Z,[ee,r(P,{label:"Checkout link",addons:""},{default:u((()=>[r(C,{expanded:""},{default:u((()=>[r(ne,{type:"text",modelValue:d(S),"onUpdate:modelValue":s[3]||(s[3]=e=>f(S)?S.value=e:null),class:"input",placeholder:"link..."},null,8,["modelValue"])])),_:1}),r(C,null,{default:u((()=>[r(ie,{icon:"fas fa-copy",onClick:s[4]||(s[4]=e=>{var a;(a=d(S))?navigator.clipboard.writeText(a).then((()=>{g.success("Link copied to clipboard!")})).catch((e=>{g.error("Failed to copy the link: ",e)})):g.error("No link to copy!")}),class:"cu-pointer",color:"primary"},{default:u((()=>[_(" Copy ")])),_:1})])),_:1})])),_:1}),d(S)?(i(),n("p",ae," payment link has been successfully created ")):y("",!0)])])])])])])}}}),le={class:"page-content-inner"},te=o("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),ie=a({__name:"index",setup:e=>(S().setPageTitle("Ibex Payment"),h({title:"Ibex Payment"}),(e,a)=>{const s=se;return i(),n("div",le,[(i(),g(k,{to:"[data-teleport-bg]"},[te])),r(s,{class:"has-navbar-spacing"})])})});"function"==typeof A&&A(ie);export{ie as default};
