import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-96b91895.js";import{_ as l}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-1988f306.js";import{e as a,s,r as t,o as i,B as o,N as n,F as d,D as c,E as u,K as r,l as m,W as p,J as v,I as f,a4 as y,O as b,b as g,_,A as h,C as V,ab as C,aE as U,M as S,a0 as x,aF as k,j as A,T as j,H as w,G as N,U as T,V as I}from"./index-e0cd5955.js";import{_ as M}from"./VControl-f6e54973.js";import{_ as L}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-cf1ae48e.js";import{u as H,a as P}from"./useAPI-1ca2c210.js";import{u as E}from"./useNotyf-8e789831.js";import{a as O}from"./useSupportElement-0a987e1f.js";import{u as R}from"./userSession-6cd011ad.js";import{_ as D}from"./VField.vue_vue_type_script_setup_true_lang-fd16b076.js";import{_ as z,a as F}from"./VOption.vue_vue_type_style_index_0_lang-42913ab0.js";import{C as W}from"./ckeditor-433e508c.js";import{C as $}from"./ckeditor-805cd633.js";const K={class:"modal-form columns is-multiline"},B={class:"column is-12 m-0"},q=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Contact Information")],-1),G={class:"field column is-6 mb-0"},J=c("label",null,"First Name *",-1),Z={class:"control"},Y={class:"field column is-6 mb-0"},X=c("label",null,"Last Name ",-1),Q={class:"control"},ee={class:"field column is-6 mb-0"},le=c("label",null,"Display Name * ",-1),ae={class:"control"},se={class:"field column is-6 mb-0"},te=c("label",null,"Primary Email ",-1),ie={class:"control"},oe={class:"field column is-12 mb-0"},ne=c("label",null,"Street Address ",-1),de={class:"control"},ce={class:"field column is-6 mb-0"},ue=c("label",null,"City: ",-1),re={class:"control"},me={class:"field column is-3 mb-0"},pe=c("label",null,"State: ",-1),ve={class:"control"},fe={class:"field column is-3 mb-0"},ye=c("label",null,"Zip Code: ",-1),be={class:"control"},ge={class:"field column is-6 mb-0"},_e=c("label",null,"Phone ",-1),he={class:"control"},Ve={class:"field column is-6 mb-0"},Ce=c("label",null,"Cell Phone ",-1),Ue={class:"control"},Se=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Security & Login")],-1),xe={class:"field column is-3 mb-0"},ke={class:"field column is-3 mb-0"},Ae=a({__name:"AddUpdateContactModal",props:{addUpdateContactModal:{type:Boolean},userId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:a}){const g=l;s(),R();const _=E(),h=H(),V=t(!1),C=t({}),U=t({firstName:"",lastName:"",displayName:"",address:"",city:"",state:"",zipCode:"",phone:"",cellPhone:"",email:"",latitude:"",longitude:"",loginAllowed:!1,inviteLogin:!1}),S=async()=>{try{V.value=!0;const e=O(C.value,["profileImageURL"]);await h.post("/v3/api/worker/",e);x(),_.dismissAll(),_.success("New worker added, New Worker")}catch(e){_.error(` ${e}, New Worker`)}finally{V.value=!1}},x=()=>{a("update:modalHandler",!1)},k=async()=>{try{const e=await P.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${C.value.postCode}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);"OK"===e.data.status?(U.value.address=e.data.results[0].formatted_address,U.value.latitude=e.data.results[0].geometry.location.lat,U.value.longitude=e.data.results[0].geometry.location.lng,_.success("Address Added")):"ZERO_RESULTS"===e.data.status&&_.error("Invalid Post-Code")}catch(e){_.error("Invalid Post-Code"),console.error(e)}};return i((()=>{})),(l,a)=>{const s=y,t=L,i=M,_=b,h=e;return o(),n(h,{is:"form",open:g.addUpdateContactModal,title:"Contact Person",size:"big",actions:"right",onSubmit:f(S,["prevent"]),onClose:x},{content:d((()=>[c("div",K,[c("div",B,[u(s,{class:"columns is-multiline"},{default:d((()=>[q,c("div",G,[J,c("div",Z,[r(c("input",{type:"text",name:"firstName","onUpdate:modelValue":a[0]||(a[0]=e=>m(U).firstName=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"First Name"},null,512),[[p,m(U).firstName]])])]),c("div",Y,[X,c("div",Q,[r(c("input",{type:"text",name:"lastName","onUpdate:modelValue":a[1]||(a[1]=e=>m(U).lastName=e),class:"input is-primary-focus is-primary-focus",placeholder:"Last Name"},null,512),[[p,m(U).lastName]])])]),c("div",ee,[le,c("div",ae,[r(c("input",{required:"",type:"text",name:"disName","onUpdate:modelValue":a[2]||(a[2]=e=>m(U).lastName=e),class:"input is-primary-focus is-primary-focus",placeholder:"Display Name"},null,512),[[p,m(U).lastName]])])]),c("div",se,[te,c("div",ie,[r(c("input",{type:"email",name:"email","onUpdate:modelValue":a[3]||(a[3]=e=>m(U).email=e),class:"input is-primary-focus is-primary-focus",placeholder:"Contact email"},null,512),[[p,m(U).email]])])]),c("div",oe,[ne,c("div",de,[r(c("input",{required:"",type:"text",name:"address","onUpdate:modelValue":a[4]||(a[4]=e=>m(U).lastName=e),class:"input is-primary-focus is-primary-focus",placeholder:"Street Address"},null,512),[[p,m(U).lastName]])])]),c("div",ce,[ue,c("div",re,[r(c("input",{type:"text",name:"city","onUpdate:modelValue":a[5]||(a[5]=e=>m(U).city=e),class:"input is-primary-focus is-primary-focus",placeholder:"City"},null,512),[[p,m(U).city]])])]),c("div",me,[pe,c("div",ve,[r(c("input",{type:"text",name:"state","onUpdate:modelValue":a[6]||(a[6]=e=>m(U).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"State"},null,512),[[p,m(U).state]])])]),c("div",fe,[ye,c("div",be,[r(c("input",{type:"tel",name:"zipCode",onBlur:k,"onUpdate:modelValue":a[7]||(a[7]=e=>m(U).zipCode=e),class:"input is-primary-focus is-primary-focus",placeholder:"Zip code"},null,544),[[p,m(U).zipCode]])])]),c("div",ge,[_e,c("div",he,[r(c("input",{type:"tel",name:"phone","onUpdate:modelValue":a[8]||(a[8]=e=>m(U).phone=e),class:"input is-primary-focus is-primary-focus",placeholder:"Phone Number"},null,512),[[p,m(U).phone]])])]),c("div",Ve,[Ce,c("div",Ue,[r(c("input",{type:"tel",name:"phone","onUpdate:modelValue":a[9]||(a[9]=e=>m(U).cellPhone=e),class:"input is-primary-focus is-primary-focus",placeholder:"Cell Phone"},null,512),[[p,m(U).cellPhone]])])])])),_:1}),u(s,{class:"columns is-multiline mt-3"},{default:d((()=>[Se,c("div",xe,[u(i,{subcontrol:""},{default:d((()=>[u(t,{thin:"",color:"primary",modelValue:m(U).loginAllowed,"onUpdate:modelValue":a[10]||(a[10]=e=>m(U).loginAllowed=e),label:"Allow login"},null,8,["modelValue"])])),_:1})]),c("div",ke,[u(i,{subcontrol:""},{default:d((()=>[u(t,{thin:"",color:"primary",modelValue:m(U).inviteLogin,"onUpdate:modelValue":a[11]||(a[11]=e=>m(U).inviteLogin=e),label:"Send invite"},null,8,["modelValue"])])),_:1})])])),_:1})])])])),action:d((()=>[u(_,{loading:m(V),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:d((()=>[v("Add Contact")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),je={class:"modal-form columns is-multiline"},we={class:"field column is-full"},Ne=c("label",{class:"label"},"Schedule Mail ",-1),Te=["value"],Ie={class:"column is-full"},Me={class:"field"},Le=c("label",{class:"label"},"To ",-1),He={class:"control"},Pe={class:"column is-full"},Ee={class:"field"},Oe=c("label",{class:"label"},"Subject ",-1),Re={class:"control"},De={class:"field column is-full mt-5"},ze=c("label",{class:"label"},null,-1),Fe=c("i",{class:"feather:mail"},null,-1),We=a({__name:"GenericEmailSender",props:{mailSenderModal:{type:Boolean},subject:{}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:a}){const y=l,A=H(),j=t(!1),w=E(),N=t(!1),T=t(""),I=s(),L=()=>{a("update:modalHandler",!1)};T.value="<b> Hi  <br />\nIbex Management <br />\n</b>";const P=t({scheduleAt:"",sendToGroup:[],sendTo:"",subject:"",message:"<b>Hi  <br />\n  Here you can enter your message that you want to deliver your recipient.\n\n  <br />\n  <br />\n  Best Regards:\n  <br />\n\nIbex Team <br />\n</b>"}),O=async()=>{try{N.value=!0;await A.post("",{sendTo:P.value.sendTo,subject:P.value.subject,message:P.value.message,scheduleAt:P.value.scheduleAt});w.success("Email sent to worker successfully"),L()}catch(e){console.log(e)}finally{N.value=!1}},R=g((()=>_((()=>import("./ckeditor-433e508c.js").then((e=>e.c))),["assets/ckeditor-433e508c.js","assets/index-e0cd5955.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-bfbcc68a.js"]).then((e=>e.default.component)))),z={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return i((async()=>{I.value=await _((()=>import("./ckeditor-805cd633.js").then((e=>e.c))),["assets/ckeditor-805cd633.js","assets/index-e0cd5955.js","assets/index-ce8747cd.css"]).then((e=>e.default))})),(l,a)=>{const s=M,t=D,i=h("VDatePicker"),g=k,_=b,A=e;return o(),V("div",null,[u(x,{name:"fade-slow"},{default:d((()=>[u(A,{is:"form",open:y.mailSenderModal,title:"Schedule Email",size:"large",actions:"right",onSubmit:f(O,["prevent"]),onClose:L},{content:d((()=>[c("div",je,[c("div",we,[Ne,u(g,null,{default:d((()=>[u(i,{modelValue:m(P).scheduleAt,"onUpdate:modelValue":a[0]||(a[0]=e=>m(P).scheduleAt=e),mode:"dateTime"},{default:d((({inputValue:e,inputEvents:l})=>[u(t,null,{default:d((()=>[u(s,{icon:"lucide:calendar"},{default:d((()=>[c("input",C({class:"input v-input",type:"text",value:e},U(l,!0)),null,16,Te)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue"])])),_:1})]),c("div",Ie,[c("div",Me,[Le,c("div",He,[r(c("input",{type:"email",required:"",class:"input",placeholder:"Enter Mail","onUpdate:modelValue":a[1]||(a[1]=e=>m(P).sendTo=e)},null,512),[[p,m(P).sendTo]])])])]),c("div",Pe,[c("div",Ee,[Oe,c("div",Re,[r(c("input",{type:"text",required:"",class:"input",placeholder:"Enter mail subject","onUpdate:modelValue":a[2]||(a[2]=e=>m(P).subject=e)},null,512),[[p,m(P).subject]])])])]),c("div",De,[ze,m(I)?(o(),n(m(R),{key:0,modelValue:m(P).message,"onUpdate:modelValue":a[3]||(a[3]=e=>m(P).message=e),editor:m(I),config:z},null,8,["modelValue","editor"])):S("",!0)])])])),action:d((()=>[u(_,{onClick:O,color:"primary",loading:m(j),raised:""},{default:d((()=>[Fe,v(" Schedule Mail")])),_:1},8,["loading"])])),cancel:d((()=>[u(_,{color:"light",onClick:L,raised:""},{default:d((()=>[v("Close ")])),_:1})])),_:1},8,["open","onSubmit"])])),_:1})])}}}),$e={class:"modal-form columns is-multiline"},Ke={class:"column is-12"},Be=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Activity Information")],-1),qe={class:"field column is-6 mb-0"},Ge=c("label",null,"Activity Type *",-1),Je={class:"control"},Ze={class:"field column is-6 mb-0"},Ye=c("label",null,"Color ",-1),Xe={class:"control"},Qe={class:"field column is-6 mb-0"},el=c("label",null,"Activity Date * ",-1),ll={class:"control"},al={class:"field column is-6 mb-0"},sl=c("label",null,"Reminder: ",-1),tl={class:"field column is-6 mb-0"},il=c("label",null,"Start Time ",-1),ol={class:"control"},nl={class:"field column is-6 mb-0"},dl=c("label",null,"End Time ",-1),cl={class:"control"},ul={class:"field column is-12 mb-0"},rl=c("label",null,"Assigned User * ",-1),ml={class:"multiselect-tag is-user"},pl=["src"],vl=["onMousedown"],fl={class:"field column is-12 mb-0"},yl=c("label",null,"Attendees: ",-1),bl={class:"control"},gl=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Location")],-1),_l={class:"field column is-12 mb-0"},hl=c("label",null,"Street Address",-1),Vl={class:"control"},Cl={class:"field column is-4 mb-0"},Ul=c("label",null,"City ",-1),Sl={class:"control"},xl={class:"field column is-4 mb-0"},kl=c("label",null,"State ",-1),Al={class:"control"},jl={class:"field column is-4 mb-0"},wl=c("label",null,"Zip Code ",-1),Nl={class:"control"},Tl={class:"field column is-12 mb-0"},Il=c("label",null,"Description ",-1),Ml={class:"control"},Ll=a({__name:"LeadActivityModal",props:{addUpdateContactModal:{type:Boolean},userId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:a}){const g=l;s(),R();const _=E(),C=H(),U=t(!1),x=t({});t("general");const k=t([]),w=[{value:"alice",name:"Alice Carasca",image:"https://media.cssninja.io/content/avatars/7.jpg"},{value:"erik",name:"Erik Kovalsky",image:"/images/avatars/svg/vuero-1.svg"},{value:"melany",name:"melany Wallace",image:"https://media.cssninja.io/content/avatars/25.jpg"},{value:"tara",name:"Tara Svenson",image:"https://media.cssninja.io/content/avatars/13.jpg"},{value:"mary",name:"Mary Lebowski",image:"https://media.cssninja.io/content/avatars/5.jpg"},{value:"irina",name:"Irina Vierbovsky",image:"https://media.cssninja.io/content/avatars/23.jpg"},{value:"jonathan",name:"Jonathan Krugger",image:"https://media.cssninja.io/content/avatars/32.jpg"}],N=t({type:"",color:"",status:"",activityDate:"",startTime:"",endTime:"",reminderTime:"",assignedUser:"",attendees:[],initiatedBy:"",address:"",city:"",state:"",zipCode:"",description:""}),T=async()=>{try{U.value=!0;const e=O(x.value,["profileImageURL"]);await C.post("/v3/api/worker/",e);I(),_.dismissAll(),_.success("New worker added, New Worker")}catch(e){_.error(` ${e}, New Worker`)}finally{U.value=!1}},I=()=>{a("update:modalHandler",!1)};return i((()=>{})),(l,a)=>{const s=z,t=F,i=M,_=D,C=h("Multiselect"),x=y,L=b,H=e;return o(),n(H,{is:"form",open:g.addUpdateContactModal,title:"Lead Activity",size:"large",actions:"right",onSubmit:f(T,["prevent"]),onClose:I},{content:d((()=>[c("div",$e,[c("div",Ke,[u(x,{class:"columns is-multiline"},{default:d((()=>[Be,c("div",qe,[Ge,c("div",Je,[r(c("input",{type:"text",name:"firstName","onUpdate:modelValue":a[0]||(a[0]=e=>m(N).type=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Activity Type"},null,512),[[p,m(N).type]])])]),c("div",Ze,[Ye,c("div",Xe,[r(c("input",{type:"text",name:"color","onUpdate:modelValue":a[1]||(a[1]=e=>m(N).color=e),class:"input is-primary-focus is-primary-focus",placeholder:"Color"},null,512),[[p,m(N).color]])])]),c("div",Qe,[el,c("div",ll,[r(c("input",{required:"",type:"date",name:"date","onUpdate:modelValue":a[2]||(a[2]=e=>m(N).activityDate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Activity Date"},null,512),[[p,m(N).activityDate]])])]),c("div",al,[sl,u(_,null,{default:d((()=>[u(i,null,{default:d((()=>[u(t,{modelValue:m(N).reminder,"onUpdate:modelValue":a[3]||(a[3]=e=>m(N).reminder=e)},{default:d((()=>[u(s,{value:""},{default:d((()=>[v(" Select a time ")])),_:1}),u(s,{value:"1"},{default:d((()=>[v(" 1 Hrs ")])),_:1}),u(s,{value:"2"},{default:d((()=>[v(" 2 Hrs ")])),_:1}),u(s,{value:"4"},{default:d((()=>[v(" 4 Hrs ")])),_:1}),u(s,{value:"6"},{default:d((()=>[v(" 6 Hrs ")])),_:1}),u(s,{value:"8"},{default:d((()=>[v(" 8 Hrs ")])),_:1}),u(s,{value:"12"},{default:d((()=>[v("12 Hrs ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),c("div",tl,[il,c("div",ol,[r(c("input",{type:"time",name:"starttime","onUpdate:modelValue":a[4]||(a[4]=e=>m(N).startTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"Start Time"},null,512),[[p,m(N).startTime]])])]),c("div",nl,[dl,c("div",cl,[r(c("input",{required:"",type:"time",name:"endtime","onUpdate:modelValue":a[5]||(a[5]=e=>m(N).endTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"End Time"},null,512),[[p,m(N).endTime]])])]),c("div",ul,[rl,u(_,{class:"is-image-tags"},{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(C,{modelValue:m(k),"onUpdate:modelValue":a[7]||(a[7]=e=>A(k)?k.value=e:null),attrs:{id:e},mode:"tags",placeholder:"Select a user","track-by":"name",label:"name",search:!0,options:w,"max-height":145},{tag:d((({option:e,remove:l,disabled:s})=>[c("div",ml,[c("img",{src:e.image,alt:""},null,8,pl),v(" "+j(e.name)+" ",1),s?S("",!0):(o(),V("i",{key:0,role:"button",tabindex:"0",onClick:a[6]||(a[6]=f((()=>{}),["prevent"])),onMousedown:f((a=>l(e)),["prevent","stop"])},null,40,vl))])])),_:2},1032,["modelValue","attrs"])])),_:2},1024)])),_:1})]),c("div",fl,[yl,c("div",bl,[r(c("input",{type:"text",name:"phone","onUpdate:modelValue":a[8]||(a[8]=e=>m(N).attendees=e),class:"input is-primary-focus is-primary-focus",placeholder:"Activity attendees"},null,512),[[p,m(N).attendees]])])])])),_:1}),u(x,{class:"columns is-multiline mt-3"},{default:d((()=>[gl,c("div",_l,[hl,c("div",Vl,[r(c("input",{type:"tel",name:"phone","onUpdate:modelValue":a[9]||(a[9]=e=>m(N).address=e),class:"input is-primary-focus is-primary-focus",placeholder:"Street Address"},null,512),[[p,m(N).address]])])]),c("div",Cl,[Ul,c("div",Sl,[r(c("input",{type:"text",name:"city","onUpdate:modelValue":a[10]||(a[10]=e=>m(N).city=e),class:"input is-primary-focus is-primary-focus",placeholder:"City"},null,512),[[p,m(N).city]])])]),c("div",xl,[kl,c("div",Al,[r(c("input",{type:"text",name:"state","onUpdate:modelValue":a[11]||(a[11]=e=>m(N).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"State"},null,512),[[p,m(N).state]])])]),c("div",jl,[wl,c("div",Nl,[r(c("input",{type:"text",name:"state","onUpdate:modelValue":a[12]||(a[12]=e=>m(N).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"Zip Code"},null,512),[[p,m(N).state]])])]),c("div",Tl,[Il,c("div",Ml,[r(c("input",{type:"text",name:"state","onUpdate:modelValue":a[13]||(a[13]=e=>m(N).description=e),class:"input is-primary-focus is-primary-focus",placeholder:"Description"},null,512),[[p,m(N).description]])])])])),_:1})])])])),action:d((()=>[u(L,{loading:m(U),type:"submit",color:"primary",raised:""},{default:d((()=>[v("Create Activity")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Hl={class:"modal-form columns is-multiline",style:{height:"80dvh"}},Pl={class:"tabs-wrapper column is-12 m-0"},El={class:"tabs-inner"},Ol={class:"tabs is-boxed"},Rl=[c("span",null,"General",-1)],Dl=[c("span",null,"Activities",-1)],zl=[c("span",null,"Proposals",-1)],Fl={key:0,class:"column is-12"},Wl=c("h3",{class:"title is-6 mb-2"},"General Information",-1),$l={class:"columns is-multiline"},Kl={class:"field column is-12 mb-0"},Bl=c("label",null,"Opportunity Title: *",-1),ql={class:"control"},Gl={class:"field column is-3 mb-0"},Jl=c("label",null,"Zip Code: without slash ",-1),Zl={class:"control"},Yl={class:"field column is-3 mb-0"},Xl=c("label",null,"City: ",-1),Ql={class:"control"},ea={class:"field column is-6 mb-0"},la=c("label",null,"State: ",-1),aa={class:"control"},sa={class:"field column is-6 mb-0"},ta=c("label",null,"Address: ",-1),ia={class:"control"},oa={class:"field column is-6 mb-0"},na=c("label",null,"Confidence ",-1),da={class:"control"},ca={class:"field column is-6 mb-0"},ua=c("label",null,"Projected Sale Date: ",-1),ra={class:"control"},ma={class:"field column is-6 mb-0"},pa=c("label",null,"Project Type ",-1),va={class:"field column is-12 mb-0"},fa={class:"multiselect-single-label"},ya=["src"],ba={class:"select-label-text"},ga=["src"],_a={class:"select-label-text"},ha={class:"field column is-3 mb-0"},Va={class:"multiselect-single-label"},Ca=["src"],Ua={class:"select-label-text"},Sa=["src"],xa={class:"select-label-text"},ka={class:"field column is-3 mb-0"},Aa={class:"multiselect-single-label"},ja=["src"],wa={class:"select-label-text"},Na=["src"],Ta={class:"select-label-text"},Ia={class:"field column is-6 mb-0"},Ma={class:"multiselect-single-label"},La=["src"],Ha={class:"select-label-text"},Pa=["src"],Ea={class:"select-label-text"},Oa={class:"field column is-3 mb-0"},Ra=c("label",null,"Estimated Revenue: ",-1),Da={class:"control"},za={class:"field column is-3 mb-0"},Fa=c("label",null,"To",-1),Wa={class:"control"},$a={class:"field column is-6 mb-0"},Ka=c("label",null,"Tags ",-1),Ba={class:"field column is-6 mb-0"},qa=c("label",null,"Sources ",-1),Ga={class:"field column is-6 mb-0"},Ja=c("label",null,"Status ",-1),Za=c("h3",{class:"title is-6 mb-2"},"Notes",-1),Ya={class:"field column is-12 mb-0"},Xa=c("h3",{class:"title is-6 mb-2"},"Attach Documents",-1),Qa={class:"field column is-12 mb-0"},es=c("label",null,"Attachments ",-1),ls=c("div",{class:"file"},[c("label",{class:"file-label"},[c("input",{class:"file-input",type:"file",name:"resume"}),c("span",{class:"file-cta"},[c("span",{class:"file-icon"},[c("i",{class:"fas fa-cloud-upload-alt"})]),c("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),as={key:1,class:"column is-12"},ss=c("div",{class:"column is-12",style:{"text-align":"center"}},[c("h1",{class:"title is-4"},"Connect your clients to their projects"),c("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),ts={class:"column is-6"},is={class:"column is-6"},os=c("div",{class:"column is-3"},null,-1),ns=c("div",{class:"column is-6 text-align-center"},[c("i",{class:"fas fa-phone-alt fa-5x primary-text text-primary mb-3","aria-hidden":"true"}),c("h1",{class:"title is-4"},"Engage your leads with activities"),c("h1",{class:"title is-6"}," Track calls, emails, and meeting notes for leads in one place. ")],-1),ds=c("div",{class:"column is-3"},null,-1),cs=c("div",{class:"column is-3"},null,-1),us={class:"column is-6 text-align-center"},rs=c("div",{class:"column is-3"},null,-1),ms={key:2,class:"column is-12"},ps={class:"column is-12"},vs=a({__name:"LeadAddUpdateModal",props:{addUpdateLeadModal:{type:Boolean},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:g}){const _=a;s();const C=R(),U=E(),x=H(),k=t(!1);t({});const L=t(!1);t(!1);const K=t(!1),B=t(!1),q=t([]),G=t([]),J=()=>{g("update:modalHandler",!1)},Z=t("general"),Y=t([]),X=[{id:1,value:"Lead",label:"Lead"},{id:2,value:"Home",label:"Home"},{id:3,value:"Floor Work",label:"Floor Work"},{id:4,value:"Tile Work",label:"Tile Work"},{id:5,value:"Carpenter",label:"Carpenter"},{id:6,value:"Complete Renovation",label:"Complete Renovation"},{id:7,value:"Painting",label:"Painting"},{id:8,value:"Plumbing",label:"Plumbing"},{id:9,value:"New Construction",label:"New Construction"},{id:10,value:"Carpenter",label:"Carpenter"},{id:11,value:"Carpenter",label:"Carpenter"},{id:12,value:"Carpenter",label:"Carpenter"}];t([]);const Q=[{value:"all",label:"All"},{value:"Contact Form",label:"Contact Form"},{value:"Social Media",label:"Social Media"},{value:"Referral",label:"Referral"},{value:"Company Website",label:"Company Website"}],ee=t({id:"",title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:0,sale_date:"",sales_people:[],tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attachments:[],attach_mail:"",created_by:C.user.id,managers:[],client:"",latitude:0,longitude:0}),le=t([{value:"Open",label:"Open"},{value:"OnHold",label:"On Hold"},{value:"Lost",label:"Lost"},{value:"Sold",label:"Sold"}]),ae=t([{value:"Residential",label:"Residential"},{value:"Commercial",label:"Commercial"},{value:"Government",label:"Government"},{value:"Business Site",label:"Business Site"},{value:"Company/Factories",label:"Company/Factories"}]),se=async()=>{try{k.value=!0,ee.value.tags=JSON.stringify(Y.value);const e=O(ee.value,[]);if(_.leadId||ee.value.id){const l=await x.patch(`/api/job/${_.leadId?_.leadId:ee.value.id}/`,e);ee.value=l.data}else{const l=await x.post("/api/job/",e);ee.value=l.data}U.success(`Lead ${_.leadId||ee.value.id?"updated":"created"} successfully`)}catch(e){U.error(` ${e}, Lead`)}finally{k.value=!1}},te=async()=>{try{k.value=!0;const e=await x.get("/api/users/by-role/admin/");e&&e.data?(G.value=e.data.map((e=>({value:e.id,name:`${e.username||""} ${e.lastName||""}`.trim(),icon:e.avatar||""}))),ee.value?.sales_people?.length&&(q.value=ee.value?.sales_people)):U.error("Failed to fetch admin data.")}catch(e){console.error("Error fetching admin data:",e),U.error("An error occurred while fetching admins.")}finally{k.value=!1}},ie=t(""),oe=t([{value:"",name:"",icon:""}]),ne=async()=>{try{k.value=!0;const e=await x.get("/api/users/by-role/contractor/",{});oe.value=e.data.map((e=>({value:e.id,name:`${e.username?e.username:""+e.lastName?e.lastName:""}`,icon:e.avatar}))),ee.value?.client&&(ie.value=ee.value?.client)}catch(e){console.log(e)}finally{k.value=!1}},de=t(""),ce=t([{value:"",name:"",icon:""}]),ue=async()=>{try{k.value=!0;const e=await x.get("/api/users/by-role/client/",{});ce.value=e.data.map((e=>({value:e.id,name:`${e.username?e.username:""+e.lastName?e.lastName:""}`,icon:e.avatar}))),ee.value?.client&&(de.value=ee.value?.client)}catch(e){console.log(e)}finally{k.value=!1}},re=t(""),me=t([{value:"",name:"",icon:""}]),pe=W.component;t("<h2>Your HTML Content</h2>");const ve={fontFamily:{options:['"Montserrat Variable", sans-serif','"Roboto Flex Variable", sans-serif']}},fe=async()=>{try{const e=await P.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${ee.value.zip_code}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);"OK"===e.data.status?(ee.value.address=e.data.results[0].formatted_address,ee.value.latitude=e.data.results[0].geometry.location.lat,ee.value.longitude=e.data.results[0].geometry.location.lng,ee.value.city=e.data.results[0].address_components[1].long_name,ee.value.state=e.data.results[0].address_components[3].long_name,U.success("Address Added")):"ZERO_RESULTS"===e.data.status&&U.error("Invalid Post-Code")}catch(e){U.error("Invalid Post-Code"),console.error(e)}};return i((async()=>{_.leadId&&(async()=>{try{k.value=!0;const e=await x.get(`/api/job/${_.leadId}/`);ee.value=e.data,Y.value=e.data.tags,te(),ne(),ue()}catch(e){U.error(` ${e}, Lead`)}finally{k.value=!1}})(),(async()=>{try{k.value=!0;const e=await x.get("/api/users/by-role/manager/",{});me.value=e.data.map((e=>({value:e.id,name:`${e.username?e.username:""+e.lastName?e.lastName:""}`,icon:e.avatar}))),re.value=ee.value.manager}catch(e){console.log(e)}finally{k.value=!1}})()})),(a,s)=>{const t=h("Slider"),i=M,g=D,C=z,U=F,x=h("Multiselect"),H=y,P=b,E=We,O=Ae,R=l,W=e;return o(),n(W,{is:"form",open:_.addUpdateLeadModal,title:"Lead Information",size:"xl",actions:"right",onSubmit:f(se,["prevent"]),onClose:J},{content:d((()=>[c("div",Hl,[c("div",Pl,[c("div",El,[c("div",Ol,[c("ul",null,[c("li",{class:w(["general"===m(Z)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[0]||(s[0]=N(f((e=>Z.value="general"),["prevent"]),["space"])),onClick:s[1]||(s[1]=e=>Z.value="general")},Rl,32)],2),c("li",{class:w(["activities"===m(Z)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[2]||(s[2]=N(f((e=>Z.value="activities"),["prevent"]),["space"])),onClick:s[3]||(s[3]=e=>Z.value="activities")},Dl,32)],2),c("li",{class:w(["proposals"===m(Z)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[4]||(s[4]=N(f((e=>Z.value="proposals"),["prevent"]),["space"])),onClick:s[5]||(s[5]=e=>Z.value="proposals")},zl,32)],2)])])])]),"general"===m(Z)?(o(),V("div",Fl,[u(H,{class:"columns is-multiline"},{default:d((()=>[Wl,c("div",$l,[c("div",Kl,[Bl,c("div",ql,[r(c("input",{type:"text",name:"title","onUpdate:modelValue":s[6]||(s[6]=e=>m(ee).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Opportunity Title"},null,512),[[p,m(ee).title]])])]),c("div",Gl,[Jl,c("div",Zl,[r(c("input",{onBlur:fe,type:"text",name:"zipCode","onUpdate:modelValue":s[7]||(s[7]=e=>m(ee).zip_code=e),class:"input is-primary-focus is-primary-focus",placeholder:"Zip code"},null,544),[[p,m(ee).zip_code]])])]),c("div",Yl,[Xl,c("div",Ql,[r(c("input",{type:"text",name:"city","onUpdate:modelValue":s[8]||(s[8]=e=>m(ee).city=e),class:"input is-primary-focus is-primary-focus",placeholder:"City"},null,512),[[p,m(ee).city]])])]),c("div",ea,[la,c("div",aa,[r(c("input",{type:"text",name:"state","onUpdate:modelValue":s[9]||(s[9]=e=>m(ee).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"State"},null,512),[[p,m(ee).state]])])]),c("div",sa,[ta,c("div",ia,[r(c("input",{type:"text",name:"address","onUpdate:modelValue":s[10]||(s[10]=e=>m(ee).address=e),class:"input is-primary-focus is-primary-focus",placeholder:"Street Address"},null,512),[[p,m(ee).address]])])]),c("div",oa,[na,c("div",da,[u(g,{class:"has-rounded-tooltip is-slider-info"},{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(t,{id:e,modelValue:m(ee).confidence,"onUpdate:modelValue":s[11]||(s[11]=e=>m(ee).confidence=e)},null,8,["id","modelValue"])])),_:2},1024)])),_:1})])]),c("div",ca,[ua,c("div",ra,[r(c("input",{type:"date",name:"saleDate","onUpdate:modelValue":s[12]||(s[12]=e=>m(ee).sale_date=e),class:"input is-primary-focus is-primary-focus",placeholder:"Post code"},null,512),[[p,m(ee).sale_date]])])]),c("div",ma,[pa,u(g,null,{default:d((()=>[u(i,null,{default:d((()=>[u(U,{modelValue:m(ee).project_type,"onUpdate:modelValue":s[13]||(s[13]=e=>m(ee).project_type=e)},{default:d((()=>[(o(!0),V(T,null,I(m(ae),((e,l)=>(o(),n(C,{key:l,value:e.value},{default:d((()=>[v(j(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])]),c("div",va,[u(g,{class:"is-image-select",label:"Sales people"},{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(x,{modelValue:m(ee).sales_people,"onUpdate:modelValue":s[14]||(s[14]=e=>m(ee).sales_people=e),attrs:{id:e},placeholder:"Sales people",label:"name",track:"value",mode:"tags",options:m(G)},{singlelabel:d((({value:e})=>[c("div",fa,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,ya),c("span",ba,j(e.name),1)])])),option:d((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,ga),c("span",_a,j(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",ha,[u(g,{class:"is-image-select",label:"Contractors"},{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(x,{modelValue:m(ee).client,"onUpdate:modelValue":s[15]||(s[15]=e=>m(ee).client=e),attrs:{id:e},placeholder:"Select a contractor",label:"name",options:m(oe)},{singlelabel:d((({value:e})=>[c("div",Va,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,Ca),c("span",Ua,j(e.name),1)])])),option:d((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,Sa),c("span",xa,j(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",ka,[u(g,{class:"is-image-select",label:"Client"},{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(x,{modelValue:m(ee).client,"onUpdate:modelValue":s[16]||(s[16]=e=>m(ee).client=e),attrs:{id:e},placeholder:"Select a client",label:"name",options:m(ce)},{singlelabel:d((({value:e})=>[c("div",Aa,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,ja),c("span",wa,j(e.name),1)])])),option:d((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,Na),c("span",Ta,j(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",Ia,[u(g,{class:"is-image-select",label:"Manager"},{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(x,{modelValue:m(ee).managers,"onUpdate:modelValue":s[17]||(s[17]=e=>m(ee).managers=e),attrs:{id:e},placeholder:"Select managers",label:"name",track:"value",mode:"tags",options:m(me)},{singlelabel:d((({value:e})=>[c("div",Ma,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,La),c("span",Ha,j(e.name),1)])])),option:d((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,Pa),c("span",Ea,j(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",Oa,[Ra,c("div",Da,[r(c("input",{type:"text",name:"externalID","onUpdate:modelValue":s[18]||(s[18]=e=>m(ee).estimated_from=e),class:"input is-primary-focus is-primary-focus",placeholder:"From"},null,512),[[p,m(ee).estimated_from]])])]),c("div",za,[Fa,c("div",Wa,[r(c("input",{type:"text",name:"externalID","onUpdate:modelValue":s[19]||(s[19]=e=>m(ee).estimated_to=e),class:"input is-primary-focus is-primary-focus",placeholder:"To"},null,512),[[p,m(ee).estimated_to]])])]),c("div",$a,[Ka,u(g,null,{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(x,{modelValue:m(Y),"onUpdate:modelValue":s[20]||(s[20]=e=>A(Y)?Y.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:X,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),c("div",Ba,[qa,u(g,null,{default:d((({id:e})=>[u(i,null,{default:d((()=>[u(x,{modelValue:m(ee).sources,"onUpdate:modelValue":s[21]||(s[21]=e=>m(ee).sources=e),attrs:{id:e},"create-tag":!0,options:Q,placeholder:"Sources"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),c("div",Ga,[Ja,u(g,null,{default:d((()=>[u(i,null,{default:d((()=>[u(U,{modelValue:m(ee).status,"onUpdate:modelValue":s[22]||(s[22]=e=>m(ee).status=e)},{default:d((()=>[(o(!0),V(T,null,I(m(le),((e,l)=>(o(),n(C,{key:l,value:e.value},{default:d((()=>[v(j(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])])),_:1}),u(H,{class:"columns is-multiline mt-3"},{default:d((()=>[Za,c("div",Ya,[u(m(pe),{modelValue:m(ee).notes,"onUpdate:modelValue":s[23]||(s[23]=e=>m(ee).notes=e),editor:m($),config:ve},null,8,["modelValue","editor"])])])),_:1}),u(H,{class:"columns is-multiline mt-3"},{default:d((()=>[Xa,c("div",Qa,[es,u(g,{grouped:""},{default:d((()=>[u(i,null,{default:d((()=>[ls])),_:1})])),_:1})])])),_:1})])):S("",!0),"activities"===m(Z)?(o(),V("div",as,[u(H,{class:"columns is-multiline"},{default:d((()=>[ss,c("div",ts,[u(P,{onClick:s[24]||(s[24]=e=>L.value=!m(L)),color:"info",class:"p-5",icon:"fas fa-plus",fullwidth:"",bold:""},{default:d((()=>[v(" Add New ")])),_:1})]),c("div",is,[u(P,{class:"p-5",color:"primary",icon:"fas fa-sign-in-alt",fullwidth:"",bold:""},{default:d((()=>[v(" Import existing one ")])),_:1})])])),_:1}),u(H,{class:"columns is-multiline mt-1"},{default:d((()=>[os,ns,ds,cs,c("div",us,[u(P,{onClick:s[25]||(s[25]=e=>K.value=!m(K)),color:"warning",icon:"fas fa-exchange-alt"},{default:d((()=>[v(" Create Activity ")])),_:1}),u(P,{onClick:s[26]||(s[26]=e=>B.value=!m(B)),color:"success",class:"ml-2",icon:"fas fa-envelope"},{default:d((()=>[v(" Schedule Email ")])),_:1})]),rs])),_:1}),m(K)?(o(),n(Ll,{key:0,addUpdateContactModal:m(K),"onUpdate:modalHandler":s[27]||(s[27]=e=>K.value=!1)},null,8,["addUpdateContactModal"])):S("",!0),m(B)?(o(),n(E,{key:1,mailSenderModal:m(B),"onUpdate:modalHandler":s[28]||(s[28]=e=>B.value=!1)},null,8,["mailSenderModal"])):S("",!0),m(L)?(o(),n(O,{key:2,"add-update-contact-modal":m(L),"onUpdate:modalHandler":s[29]||(s[29]=e=>L.value=!1)},null,8,["add-update-contact-modal"])):S("",!0)])):S("",!0),"proposals"===m(Z)?(o(),V("div",ms,[u(H,{class:"columns is-multiline"},{default:d((()=>[c("div",ps,[u(R,{leadId:(m(ee).id,_.leadId)},null,8,["leadId"])])])),_:1})])):S("",!0)])])),action:d((()=>[u(P,{loading:m(k),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:d((()=>[v("Create Lead")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{vs as _};
