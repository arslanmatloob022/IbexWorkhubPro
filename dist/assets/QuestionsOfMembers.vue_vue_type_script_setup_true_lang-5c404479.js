import{_ as e}from"./VFlex.vue_vue_type_style_index_0_lang-3d28ad31.js";import{_ as s}from"./VField.vue_vue_type_script_setup_true_lang-7ffe74ec.js";import{_ as l}from"./VControl-48568c4a.js";import{_ as t}from"./VTextarea.vue_vue_type_script_setup_true_lang-3bb654ed.js";import{_ as r}from"./VBlock.vue_vue_type_style_index_0_lang-3957c872.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-e0e424bb.js";import{u as i}from"./useAPI-bc0008ee.js";import{u as n}from"./useNotyf-d45cea71.js";import{u as o}from"./company-883d4b6a.js";import{e as d,r as p,o as u,y as c,H as m,B as f,C as y,z as _,Q as w,R as x,l as g,J as b,A as v,P as h}from"./index-236e42c8.js";const A={class:"list-widget is-straight mt-1 mb-3"},j={style:{display:"flex","flex-wrap":"wrap"}},k={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},V={style:{width:"100%"},class:"field space-between column is-12 is-flex cu-align-center mb-0"},C={class:"field is-flex cu-align-center mb-0"},B=y("label",null,"Answer :",-1),I={style:{display:"flex","flex-wrap":"wrap"}},q={class:"is-flex mb-2",style:{display:"flex","justify-content":"space-between",width:"100%"}},F={class:"cu-all-input",style:{width:"560px"}},O=d({__name:"QuestionsOfMembers",props:{type:{},memberId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(d,{emit:O}){const P=d;o(),p(!1);const Q=n(),$=i(),z=p([{id:0,title:"",type:"CheckBox",correctAnswer:"",questionFor:"",created_at:"",filledAnswer:"",arezCompany:0,industry:0}]),H=(e,s,l)=>{console.log("ans",e,s),N(e,s,l)},N=async(e,s,l)=>{try{let t={filledAnswer:e};if(console.log("old ans",l),t[P.type]=P.memberId,l){await $.patch(`/v3/api/partner/member-questions/${s}/`,t);Q.success("Answer updated.")}else if(!l){t.companyQuestion=s;await $.post("/v3/api/partner/member-questions/",t);Q.success("Answer marked.")}T()}catch(t){console.log(t)}},T=async()=>{try{const e=await $.get(`/v3/api/partner/member-questions/${P.memberId}/questions_of_member/?member=${P.type}`);z.value=e.data.map((e=>{const s=!!e.hasOwnProperty("filledAnswer");return{...e,oldAnswer:s}}))}catch(e){console.log(e)}};return u((()=>{P.memberId&&T()})),(i,n)=>{const o=a,d=r,p=t,u=l,O=s,P=e;return c(),m(P,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"10px","row-gap":"10px","flex-wrap":"wrap",styl:"just"},{default:f((()=>[y("div",A,[y("div",j,[(c(!0),_(w,null,x(g(z),((e,s)=>(c(),_("div",{key:e.id,class:""},["CheckBox"==e.type?(c(),m(d,{key:0,center:"",lighter:"",style:{margin:"6px","border-radius":"8px",padding:"12px",display:"flex","justify-content":"space-between",width:"360px",border:"1px solid rgba(110, 110, 110, 0.011)"}},{default:f((()=>[y("h3",k,b(e.title),1),y("div",V,[y("div",C,[B,v(o,{onClick:s=>{H("true",e.id,e.filledAnswer)},color:e.filledAnswer?"primary":"light",rounded:"",label:"Yes",outlined:"false"==e.filledAnswer,class:"mr-3 ml-3 cu-pointer"},null,8,["onClick","color","outlined"]),v(o,{onClick:s=>{H("false",e.id,e.filledAnswer)},color:e.filledAnswer?"info":"light",rounded:"",label:"No",outlined:"true"==e.filledAnswer,class:"mr-3 cu-pointer"},null,8,["onClick","color","outlined"])])])])),_:2},1024)):h("",!0)])))),128))]),y("div",I,[(c(!0),_(w,null,x(g(z),((e,s)=>(c(),_("div",{key:e.id},["Input"==e.type?(c(),m(d,{key:0,center:"",lighter:"",style:{margin:"8px","border-radius":"8px",padding:"12px",width:"600px",border:"1px solid rgba(110, 110, 110, 0.017)"}},{default:f((()=>[y("h3",q,b(e.title),1),y("div",F,[v(O,null,{default:f((()=>[v(u,null,{default:f((()=>[v(p,{modelValue:e.filledAnswer,"onUpdate:modelValue":s=>e.filledAnswer=s,onBlur:s=>{var l,t,r;l=s,t=e.id,r=e.oldAnswer,console.log("ans",l.target.value,t),N(l.target.value,t,r)},style:{width:"100%","border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},class:"is-primary-focus",rows:"2",placeholder:"Answer..."},null,8,["modelValue","onUpdate:modelValue","onBlur"])])),_:2},1024)])),_:2},1024)])])),_:2},1024)):h("",!0)])))),128))])])])),_:1})}}});export{O as _};
