import{e,r as t,s as a,N as l,o as s,b as i,_ as n,y as o,H as r,B as c,S as d,C as u,l as p,T as m,D as v,a3 as y,z as g,Q as f,R as h,P as w,Y as _,A as b,K as x,aB as C,E as k,W as S,X as I,L as z,J as A,O,I as D,w as j}from"./index-d0587793.js";import{_ as E}from"./VModal.vue_vue_type_style_index_0_lang-7843cbbf.js";import{u as N}from"./useAPI-3dc6ab81.js";import{u as V}from"./useNotyf-3c9fc6ad.js";import{u as L}from"./company-e1565a33.js";import{m as P,a as $}from"./useSupportElement-605d4965.js";import{_ as M,a as T}from"./SiteJobs-b3af4656.js";import{_ as H}from"./SweetAlert.vue_vue_type_style_index_0_lang-ba4226f4.js";import{_ as R}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-7bf8b13a.js";import{_ as U}from"./VDropdown.vue_vue_type_style_index_0_lang-6b6654ac.js";import{_ as q}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-6b709a76.js";import{_ as B,a as F}from"./search-4-dark-2b5b440c.js";const Y=e=>(S("data-v-10d78a0b"),e=e(),I(),e),G={class:""},K={class:""},W={class:"modal-form columns cu-all-input is-multiline"},J={class:"column is-12",style:{"margin-top":"-1rem"}},Q={class:"column is-12 mb-0 p-0",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},X={class:"field column is-4 mb-0"},Z=Y((()=>u("label",null,[v("Contract Name "),u("span",{style:{color:"red"}},"*")],-1))),ee={class:"control"},te={class:"field column is-4 mb-0"},ae=Y((()=>u("label",null,[v("From Date "),u("span",{style:{color:"red"}},"*")],-1))),le={class:"control"},se={class:"field column is-4 mb-0"},ie=Y((()=>u("label",null,[v("To Date "),u("span",{style:{color:"red"}},"*")],-1))),ne={class:"control"},oe={class:"field column is-3 mb-0"},re=Y((()=>u("label",null,[v("Total Hours: "),u("span",null,"(Optional)")],-1))),ce={class:"control"},de={class:"field column is-3 mb-0"},ue=Y((()=>u("label",null,[v("Charge Rate (£) "),u("span",{style:{color:"red"}},"*")],-1))),pe={class:"control"},me={class:"field column is-3 mb-0"},ve=Y((()=>u("label",null,"Overtime Rate (£)",-1))),ye={class:"control"},ge={class:"field column is-2 mt-3",style:{position:"relative","margin-left":".4rem",cursor:"pointer",display:"flex","align-items":"center","flex-direction":"row"}},fe=Y((()=>u("i",{style:{color:"var(--primary)","margin-left":"10px",size:"3rem"},class:"fas fa-paint-brush","aria-hidden":"true"},null,-1))),he={class:"column is-4 pb-4"},we={key:0,style:{position:"absolute",top:"1rem","background-color":"white",width:"350px",right:"4rem","z-index":"999"}},_e={class:"colorContainer"},be={class:"close-btn"},xe=["onClick"],Ce={key:0,class:"fas fa-check","aria-hidden":"true"},ke=Y((()=>u("div",{class:"column is-12 mb-2",style:{"margin-top":"1rem"}},[u("h2",{class:"section-heading",style:{"font-size":"1.3rem","font-weight":"500"}}," Contact Person Details ")],-1))),Se={class:"field column is-4 mb-0"},Ie=Y((()=>u("label",null,[v("Name "),u("span",{style:{color:"red"}},"*")],-1))),ze={class:"control"},Ae={class:"field column is-4 mb-0"},Oe=Y((()=>u("label",null,[v("Phone no "),u("span",{style:{color:"red"}},"*")],-1))),De={class:"control"},je={class:"field column is-4 mb-0"},Ee=Y((()=>u("label",null,[v("Email "),u("span",{style:{color:"red"}},"*")],-1))),Ne={class:"control"},Ve={class:"field column is-12 mb-0"},Le=Y((()=>u("label",{style:{"margin-bottom":".5rem"}},"Description",-1))),Pe={class:"page-content-inner"},$e={class:"columns is-multiline"},Me={class:"column is-12"},Te={class:"columns"},He={class:"column is-12 content",style:{}},Re=z(e({__name:"ContractModal",props:{openCustomCompany:{type:Boolean},id:{},customerCompanyId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:S}){const I=e,z=V(),A=N(),O=t(!1),D=L(),j=a(),M=l(),T=t(!1),H=t({id:0,hexCode:""}),R=t({step:1,stepTitle:"Contact Info",data:{}}),U=t({id:"",charge_rate:0,total_hours:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",over_rate:0,description:"",color:"#D875C7",company:"",customer_company:0,name:""}),q=async()=>{try{U.value.company=D.loggedCompany.id,U.value.customer_company=I.customerCompanyId||M.params.id,O.value=!0;const e=$(U.value,["logo"]);if(e.append("arezCompany",D.loggedCompany.id),U.value.id){await A.patch(`/v3/api/contract/${U.value.id}/`,e);z.success("Contract edit succesfully."),B()}else{await A.post("/v3/api/contract/",e);B(),z.dismissAll(),z.success("New contract added")}S("update:OnSuccess",null)}catch(e){z.error(" Something went wrong!");let t=e.response.data??{};Object.values(t).forEach((e=>{e.forEach((e=>{z.error(` ${e}, New Contract`)}))}))}finally{O.value=!1}},B=()=>{S("update:modalHandler",!1),console.log("modal closed"),U.value={charge_rate:0,total_hours:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",over_rate:0,description:"",color:"",company:0,customer_company:0,name:""}},F=()=>{T.value=!T.value};s((async()=>{I.id&&await(async()=>{const e=await A.get(`/v3/api/contract/${I.id}/`);U.value=e.data})()}));const Y=i((()=>n((()=>import("./ckeditor-101397fd.js").then((e=>e.c))),["assets/ckeditor-101397fd.js","assets/index-d0587793.js","assets/index-03be73ef.css","assets/vue.runtime.esm-bundler-2e9ea43d.js"]).then((e=>e.default.component)))),Re={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return s((async()=>{j.value=await n((()=>import("./ckeditor-2e4895d5.js").then((e=>e.c))),["assets/ckeditor-2e4895d5.js","assets/index-d0587793.js","assets/index-03be73ef.css"]).then((e=>e.default))})),(e,t)=>{const a=C,l=k,s=E;return o(),r(s,{is:"form",open:I.openCustomCompany,title:p(U).id?"Edit Contract":"Contract Details",size:"xl",actions:"right",onSubmit:x(q,["prevent"]),onClose:B,noclose:""},{content:c((()=>[d(u("div",G,[d(u("div",K,[u("div",W,[u("div",J,[u("div",Q,[u("div",X,[Z,u("div",ee,[d(u("input",{type:"text",name:"name","onUpdate:modelValue":t[0]||(t[0]=e=>p(U).name=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Contract Name",style:{width:"100%"}},null,512),[[m,p(U).name]])])]),u("div",te,[ae,u("div",le,[d(u("input",{type:"date",name:"fromDate","onUpdate:modelValue":t[1]||(t[1]=e=>p(U).start_date=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"From Date",style:{width:"100%"}},null,512),[[m,p(U).start_date]])])]),u("div",se,[ie,u("div",ne,[d(u("input",{type:"date",name:"toDate","onUpdate:modelValue":t[2]||(t[2]=e=>p(U).end_date=e),class:"input is-primary-focus is-primary-focus",placeholder:"To date"},null,512),[[m,p(U).end_date]])])]),u("div",oe,[re,u("div",ce,[d(u("input",{type:"text",name:"totalHours","onUpdate:modelValue":t[3]||(t[3]=e=>p(U).total_hours=e),class:"input is-primary-focus is-primary-focus",placeholder:"Total Hours"},null,512),[[m,p(U).total_hours]])])]),u("div",de,[ue,u("div",pe,[d(u("input",{type:"text",name:"changeRate","onUpdate:modelValue":t[4]||(t[4]=e=>p(U).charge_rate=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Charge Rate (£)"},null,512),[[m,p(U).charge_rate]])])]),u("div",me,[ve,u("div",ye,[d(u("input",{type:"text",name:"overtime","onUpdate:modelValue":t[5]||(t[5]=e=>p(U).over_rate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Overtime Rate (£)"},null,512),[[m,p(U).over_rate]])])]),u("div",ge,[u("div",{class:"column is-4 pb-4 cus-input-label",style:{display:"flex","align-items":"center",gap:".5rem",color:"#bbb","font-weight":"500",width:"100%"},onClick:F},[v(" Color "),fe]),u("div",he,[u("div",null,[u("div",{onClick:F,class:"color-pellate"},[u("div",{class:"current-color-div",style:y({backgroundColor:p(U).color})},null,4)])])]),p(T)?(o(),g("div",we,[u("div",_e,[u("div",be,[u("i",{onClick:t[6]||(t[6]=e=>T.value=!1),class:"lnir lnir-close","aria-hidden":"true"})]),(o(!0),g(f,null,h(p(P),((e,t)=>(o(),g("div",{key:e.id,onClick:t=>(e=>{H.value=e,T.value=!1,U.value={...U.value,color:e.hexCode}})(e),style:y({backgroundColor:e.hexCode}),class:"colorDiv"},[p(H)==e?(o(),g("i",Ce)):w("",!0)],12,xe)))),128))])])):w("",!0)]),ke,u("div",Se,[Ie,u("div",ze,[d(u("input",{type:"text",name:"registeredCompanyName","onUpdate:modelValue":t[7]||(t[7]=e=>p(U).incharge_name=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Full Name",style:{width:"100%"}},null,512),[[m,p(U).incharge_name]])])]),u("div",Ae,[Oe,u("div",De,[d(u("input",{type:"tel",name:"phone_number","onUpdate:modelValue":t[8]||(t[8]=e=>p(U).incharge_phone=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Phone number",style:{width:"100%"}},null,512),[[m,p(U).incharge_phone]])])]),u("div",je,[Ee,u("div",Ne,[d(u("input",{type:"email",name:"email","onUpdate:modelValue":t[9]||(t[9]=e=>p(U).incharge_email=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"email",style:{width:"100%"}},null,512),[[m,p(U).incharge_email]])])]),u("div",Ve,[Le,u("div",Pe,[u("div",$e,[u("div",Me,[u("div",Te,[u("div",He,[p(j)?(o(),r(p(Y),{key:0,modelValue:p(U).description,"onUpdate:modelValue":t[10]||(t[10]=e=>p(U).description=e),editor:p(j),config:Re,style:{color:"#fff"}},null,8,["modelValue","editor"])):(o(),r(a,{key:1,height:"500px"}))])])])])])])])])])],512),[[_,1===p(R).step]])],512),[[_,1===p(R).step]])])),cancel:c((()=>[b(l,{loading:p(O),type:"button",color:"primary",light:"",style:{float:"right",border:"1xp solid #ccc",display:"none"}},{default:c((()=>[v("Previous")])),_:1},8,["loading"])])),action:c((()=>[b(l,{loading:p(O),type:"submit",color:"primary",raised:"",style:{float:"right"},onChick:t[11]||(t[11]=()=>{})},{default:c((()=>[v("Save & close")])),_:1},8,["loading"])])),_:1},8,["open","title","onSubmit"])}}}),[["__scopeId","data-v-10d78a0b"]]),Ue=[u("div",{id:"myMap",style:{height:"650px",width:"80vw","border-radius":"10px"}},null,-1)],qe=e({__name:"SiteMapLocation",props:{companyId:{},sites:{}},setup(e){const t=e;let a={};return s((()=>{var e,l;e=t.sites,l=new google.maps.InfoWindow,a=new google.maps.Map(document.getElementById("myMap"),{center:{lat:51.4497984,lng:-.3464489},scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:8}),e.forEach(((e,t)=>{const s=new google.maps.Marker({position:{lat:e.latitude,lng:e.longitude},map:a,title:"Worker",icon:{url:"/images/marker_new.png",scaledSize:new google.maps.Size(20,30)}});s.addListener("click",(()=>{var t=`<div style="display:flex; flex-direction: column;  gap:16px">\n                <div>\n                <h3 style="color:#010101; font-size:20px font-weight:500">${e.name}</h3>\n                </div>\n                <div style="display:flex; flex-direction:column; justify-content:center;  gap:6px">\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Post Code: ${e.postcode}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Latitude: ${e.latitude}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Longitude: ${e.longitude}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Manager: ${e.inchargeName}</h4>\n                    <h4 style="color:#898989; font-size:14px font-weight:500 "> Phone No: ${e.inchargePhoneNo}</h4>\n                </div>\n            \n            </div>`;l.setContent(t),l.open(a,s)}))}))})),(e,t)=>(o(),g("div",null,Ue))}}),Be=e=>(S("data-v-ca209147"),e=e(),I(),e),Fe={class:"contract-wrapper"},Ye={key:0,class:"contract-wrapper"},Ge={class:"contract-header"},Ke={class:"header-left",style:{display:"flex","flex-direction":"column"}},We={style:{"font-size":"1.1rem","font-weight":"500",color:"#111","margin-top":"1rem",display:"flex","align-items":"center"}},Je=Be((()=>u("i",{class:"iconify","data-icon":"feather:arrow-left","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1))),Qe={style:{"font-size":"1.7rem","font-weight":"500",color:"#111"}},Xe={class:"",style:{display:"flex","align-items":"center",gap:"0.6rem"}},Ze={style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},et={style:{"font-size":"1rem","font-weight":"400",color:"#333"}},tt=Be((()=>u("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),at=Be((()=>u("span",{style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},[v("Slots Available: "),u("span",{style:{"font-size":"1rem","font-weight":"400",color:"#333"}},"0/15")],-1))),lt=Be((()=>u("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),st={style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},it={style:{"font-size":"1rem","font-weight":"400",color:"#333"}},nt={class:"header-right",style:{display:"flex","align-items":"center",gap:"1rem","margin-top":"6rem"}},ot=Be((()=>u("i",{class:"iconify","data-icon":"feather:plus","aria-hidden":"true"},null,-1))),rt={class:"",style:{display:"flex","flex-direction":"column",gap:"1rem","margin-top":"1rem"}},ct={class:"tabs-inner"},dt={class:"tabs is-toggle"},ut=[Be((()=>u("span",null,"List View",-1)))],pt=[Be((()=>u("span",null,"Map View",-1)))],mt={class:"contracts-section1"},vt={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},yt={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"0.5rem",color:"#333"}},gt=Be((()=>u("i",{class:"fas fa-map-marker-alt","aria-hidden":"true"},null,-1))),ft=["onClick"],ht=[Be((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Be((()=>u("div",{class:"meta"},[u("span",null,"Edit"),u("span",null,"Edit site details")],-1)))],wt=Be((()=>u("hr",{class:"dropdown-divider"},null,-1))),_t=["onClick"],bt=[Be((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),Be((()=>u("div",{class:"meta"},[u("span",null,"Delete"),u("span",null,"Delete from list")],-1)))],xt=["onClick"],Ct={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"0.6rem"}},kt={class:"Genevieve-Hodges-Copy",style:{"font-size":"13px","margin-top":"0.5rem","font-weight":"500",color:"#333"}},St={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},It={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},zt={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"0.2rem"}},At=Be((()=>u("b",{style:{"font-weight":"500",color:"#222"}},"City:",-1))),Ot={style:{color:"#333"}},Dt={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"0.2rem"}},jt=Be((()=>u("b",{style:{"font-weight":"500",color:"#222"}},"Site Manager Name:",-1))),Et={style:{color:"#333"}},Nt=Be((()=>u("img",{class:"light-image",src:B,alt:""},null,-1))),Vt=Be((()=>u("img",{class:"dark-image",src:F,alt:""},null,-1))),Lt={key:0,class:"contracts-section1"},Pt={key:1,class:"contract-wrapper"},$t=z(e({__name:"ContractDetails",props:{contractId:{type:String},getContract:Function,colors:String},setup(e){const a=e,i=N();l();const n=V();t(!1);const p=t(""),m=t(""),C=t(0),S=t(0),I=t(!1);t([]);const z=t(!1),j=t(""),E=t(""),L=t("listview"),P=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),$=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),B=t([{id:"",sites:[],charge_rate:0,total_hours:"",name:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",color:"",over_rate:0,description:"",company:"",customer_company:""}]);t({id:null,name:"",address:"",postcode:"",latitude:null,longitude:null,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{}}),t([]);const F=(e=0)=>{p.value=e,I.value=!0},Y=async()=>{j.value="",z.value=!0,console.log(a.contractId);const e=await i.get(`/v3/api/site/contract/${a.contractId}/`);B.value=e.data,console.log("All Sites:",e.data),E.value=e.data.customer_company,C.value=e.data.sites.length,z.value=!1,console.log("Sites List:",B.value),console.log("Contract Id :",E.value)},G=async()=>{try{z.value=!0,$.value.isSweetAlertOpen=!1;await i.delete(`/v3/api/site/${S.value}/`);Y(),n.dismissAll(),n.success("Site Delete"),z.value=!1}catch(e){console.error("ok",e),z.value=!1}};s((()=>{Y()}));const K=async()=>{P.value.isSweetAlertOpen=!1;try{const{data:e}=await i.post("/v3/api/contract/assign-site/",{contract:a.contractId,site:m.value});e&&(Y(),n.success("Site added"))}catch(e){console.log(e),n.error("This Site is already assigned.")}};return(e,t)=>{const l=k,s=q,i=U,n=R,m=qe,N=H,V=M,W=T;return o(),g("div",Fe,[j.value?w("",!0):(o(),g("div",Ye,[u("div",Ge,[u("div",Ke,[u("div",{style:y([{backgroundImage:`linear-gradient(-175deg, white 65%, ${B.value.color}30)`},{display:"flex","flex-direction":"column",padding:"1rem","border-radius":"1rem",border:"1px solid #eee"}])},[u("span",We,[b(l,{color:"primary",outlined:"",class:"mr-2",onClick:a.getContract,style:{width:"3rem","border-radius":"12px",padding:"2px 4px"}},{default:c((()=>[Je])),_:1},8,["onClick"]),v(" Contract_"+A(a.contractId),1)]),u("h1",Qe,A(B.value.name),1),u("div",Xe,[u("span",Ze,[v("Total Sites: "),u("span",et,A(C.value<10&&C.value>0?"0"+C.value:C.value),1)]),tt,at,lt,u("span",st,[v("Contact Person: "),u("span",it,A(B.value.incharge_name),1)])])],4)]),u("div",nt,[b(l,{color:"primary",style:{"border-radius":"1.5rem",display:"flex","align-items":"center",gap:"0.5rem"},onClick:t[0]||(t[0]=()=>{p.value="",I.value=!I.value})},{default:c((()=>[ot,v(" Add New Site ")])),_:1})])]),u("div",rt,[u("div",ct,[u("div",dt,[u("ul",null,[u("li",{class:O(["listview"===L.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:t[1]||(t[1]=D(x((e=>L.value="listview"),["prevent"]),["space"])),onClick:t[2]||(t[2]=e=>L.value="listview")},ut,32)],2),u("li",{class:O(["mapview"===L.value?"is-active":"not-active"])},[u("a",{tabindex:"0",role:"button",onKeydown:t[3]||(t[3]=D(x((e=>L.value="mapview"),["prevent"]),["space"])),onClick:t[4]||(t[4]=e=>L.value="mapview")},pt,32)],2)])])]),d(u("div",mt,[z.value?(o(),r(s,{key:0})):w("",!0),(o(!0),g(f,null,h(B.value.sites,((e,t)=>(o(),g("div",{class:"contracts-section",key:e.id},[u("div",{class:"contracts-list",style:y({backgroundImage:`linear-gradient(-175deg, white 40%, ${e.color}45)`})},[u("div",vt,[u("span",yt,[gt,v(A(e.postcode),1)]),b(i,{style:{position:"relative"},class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>F(e.id)},ht,8,ft),wt,u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return a=e.id,S.value=a,void($.value={title:"Are you sure?",subtitle:"You will not be able to recover this site!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a}},bt,8,_t)])),_:2},1024)]),u("div",{class:"",style:{display:"flex","flex-direction":"column",gap:"0.5rem"},onClick:t=>j.value=e.id},[u("div",Ct,[u("span",kt,A(e.name),1)]),u("div",St,[u("span",It,A(e.address),1)]),u("div",zt,[At,u("span",Ot,A(e.city),1)]),u("div",Dt,[jt,u("span",Et,A(e.inchargeName),1)])],8,xt)],4)])))),128)),B.value.sites&&0===B.value.sites.length?(o(),r(n,{key:1,title:"No Sites is added for this Contract.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n\t\t\t\t\t\tsearch terms you've entered. Please try different search terms or\n\t\t\t\t\t\tcriteria.",larger:""},{image:c((()=>[Nt,Vt])),_:1})):w("",!0)],512),[[_,"listview"==L.value]]),"mapview"==L.value?(o(),g("div",Lt,[b(m,{sites:B.value.sites,companyId:E.value},null,8,["sites","companyId"])])):w("",!0),$.value.isSweetAlertOpen?(o(),r(N,{key:1,isSweetAlertOpen:$.value.isSweetAlertOpen,title:$.value.title,subtitle:$.value.subtitle,btntext:$.value.btntext,onConfirm:G,onCancel:()=>$.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):w("",!0),P.value.isSweetAlertOpen?(o(),r(N,{key:2,isSweetAlertOpen:P.value.isSweetAlertOpen,title:P.value.title,subtitle:P.value.subtitle,btntext:P.value.btntext,onConfirm:K,onCancel:()=>P.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):w("",!0)])])),j.value?(o(),g("div",Pt,[b(V,{getSites:Y,siteID:j.value,editSiteModal:F,siteLength:C.value},null,8,["siteID","siteLength"])])):w("",!0),I.value?(o(),r(W,{key:2,contractId:a.contractId,EditSiteID:p.value,"onUpdate:modalHandler":t[5]||(t[5]=()=>{I.value=!I.value}),AddSiteModalOpen:I.value,"onUpdate:OnSuccess":Y},null,8,["contractId","EditSiteID","AddSiteModalOpen"])):w("",!0)])}}}),[["__scopeId","data-v-ca209147"]]),Mt=e=>(S("data-v-b338ead2"),e=e(),I(),e),Tt={class:"contract-wrapper",style:{"margin-top":"-1.5rem"}},Ht={key:0,style:{display:"flex","flex-direction":"column",gap:"1rem","margin-top":"3rem"}},Rt={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ut={class:"",style:{display:"flex","align-items":"center",gap:"0.7rem"}},qt=Mt((()=>u("h3",{style:{"font-size":"1.4rem","font-weight":"500"}},"Contract",-1))),Bt={style:{padding:"0.4rem 0.5rem","border-radius":"0.8rem",background:"#000",color:"#fff","font-size":"1.1rem"}},Ft={class:"header-right"},Yt=Mt((()=>u("i",{class:"iconify","data-icon":"feather:plus","aria-hidden":"true"},null,-1))),Gt={class:"contracts-section1"},Kt={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},Wt={style:{"font-size":"1rem","font-weight":"500",display:"flex","align-items":"center",gap:"0.4rem",color:"#111"}},Jt=["src"],Qt=["onClick"],Xt=[Mt((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Mt((()=>u("div",{class:"meta"},[u("span",null,"Edit"),u("span",null,"Edit contract details")],-1)))],Zt=Mt((()=>u("hr",{class:"dropdown-divider"},null,-1))),ea=["onClick"],ta=[Mt((()=>u("div",{class:"icon"},[u("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),Mt((()=>u("div",{class:"meta"},[u("span",null,"Delete"),u("span",null,"Delete from list")],-1)))],aa={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},la={style:{"font-size":"1rem","font-weight":"500",display:"flex","align-items":"center",gap:"0.4rem",color:"#444"}},sa=["onClick"],ia={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},na={class:"Genevieve-Hodges-Copy",style:{"font-size":"13px","margin-top":"0.5rem","font-weight":"400",color:"#666"}},oa=Mt((()=>u("b",{style:{"font-weight":"500"}},"Total Hours:",-1))),ra={class:"Genevieve-Hodges-Copy",style:{"font-size":"13px","margin-top":"0.5rem","font-weight":"400",color:"#666"}},ca=Mt((()=>u("b",{style:{"font-weight":"500"}},"Total Sites:",-1))),da={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between"}},ua={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},pa=Mt((()=>u("b",{style:{"font-weight":"500"}},"Change Rate:",-1))),ma={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},va=Mt((()=>u("b",{style:{"font-weight":"500"}},"Overtime Rate:",-1))),ya={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center",gap:"1rem"}},ga=Mt((()=>u("b",{style:{"font-weight":"500",color:"#666"}},"From Date:",-1))),fa=Mt((()=>u("b",{style:{"font-weight":"500",color:"#666"}},"End Date:",-1))),ha=Mt((()=>u("img",{class:"light-image",src:B,alt:""},null,-1))),wa=Mt((()=>u("img",{class:"dark-image",src:F,alt:""},null,-1))),_a={key:1},ba={style:{"margin-top":"0.5rem"}},xa=z(e({__name:"CompanyContract",props:{customerCompanyId:String,companyLogo:null,companyName:String},setup(e){const a=e,i=N(),n=l(),d=V(),p=t(!1),m=t(""),_=t(0),x=t(0),C=t(!1),S=t({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),I=t("");t(!1);const z=t(""),O=t([{id:"",charge_rate:0,total_hours:"",start_date:"",end_date:"",incharge_name:"",incharge_phone:"",incharge_email:"",over_rate:0,description:"",color:"",company:0,customer_company:0,name:""}]),D=(e=0)=>{m.value=e,p.value=!0},E=async()=>{C.value=!0,I.value="";const e=await i.get(`/v3/api/contract/customer-company/${a.customerCompanyId||n.params.id}/`);O.value=e.data,_.value=e.data.length,C.value=!1},L=async()=>{try{S.value.isSweetAlertOpen=!1;await i.delete(`/v3/api/contract/${x.value}/`,{});E(),d.dismissAll(),d.success("Contract Delete")}catch(e){console.error("ok",e)}};return j(a,((e,t)=>{E()})),s((()=>{E()})),(e,t)=>{const l=k,s=q,i=U,n=R,d=H,j=$t,N=Re;return o(),g("div",Tt,[I.value?w("",!0):(o(),g("div",Ht,[u("div",Rt,[u("div",Ut,[qt,u("span",Bt,A(_.value<10&&_.value>0?"0"+_.value:_.value),1)]),u("div",Ft,[b(l,{color:"primary",style:{"border-radius":"1.5rem",display:"flex","align-items":"center",gap:"0.5rem"},onClick:D},{default:c((()=>[Yt,v(" Add New Contract ")])),_:1})])]),u("div",Gt,[C.value?(o(),r(s,{key:0})):w("",!0),(o(!0),g(f,null,h(O.value,((e,t)=>(o(),g("div",{class:"contracts-section",key:e.id},[u("div",{class:"contracts-list",style:y({backgroundImage:`linear-gradient(-175deg, white 60%, ${e.color}30)`})},[u("div",Kt,[u("span",Wt,[u("img",{src:a.companyLogo?a.companyLogo:"/demo/placeholder.jpg",alt:"",style:{position:"relative",width:"3rem",height:"3rem","border-radius":"50%",border:"2px solid #25b190"}},null,8,Jt),v(" "+A(a.companyName),1)]),b(i,{style:{position:"relative"},class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>D(e.id)},Xt,8,Qt),Zt,u("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return a=e.id,x.value=a,void(S.value={title:"Are you sure?",subtitle:"You will not be able to recover this contract!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a}},ta,8,ea)])),_:2},1024)]),u("div",aa,[u("span",la,A(e.name),1)]),u("div",{class:"",style:{display:"flex","flex-direction":"column",gap:"0.8rem",color:"#444"},onClick:t=>I.value=e.id},[u("div",ia,[u("span",na,[oa,v(" "+A(e.total_hours)+" Hours",1)]),u("span",ra,[ca,u("span",{style:y([{backgroundImage:`url('${e.color}')`},{"margin-left":"0.3rem",padding:"0.3rem 0.6rem","border-radius":"0.6rem",background:"#444",color:"#fff","font-size":"1rem"}])},A(e.sitesCount),5)])]),u("div",da,[u("span",ua,[pa,v(" "+A(e.charge_rate)+" (£)",1)]),u("span",ma,[va,v(" "+A(e.over_rate)+" (£)",1)])]),u("div",ya,[u("span",null,[ga,v(" "+A(e.start_date),1)]),u("span",null,[fa,v(" "+A(e.end_date),1)])])],8,sa)],4)])))),128)),0==O.value.length?(o(),r(n,{key:1,title:"No Contract is added for this Business.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n\t\t\t\t\t\tsearch terms you've entered. Please try different search terms or\n\t\t\t\t\t\tcriteria.",larger:""},{image:c((()=>[ha,wa])),_:1})):w("",!0)]),S.value.isSweetAlertOpen?(o(),r(d,{key:0,isSweetAlertOpen:S.value.isSweetAlertOpen,title:S.value.title,subtitle:S.value.subtitle,btntext:S.value.btntext,onConfirm:L,onCancel:()=>S.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):w("",!0)])),I.value?(o(),g("div",_a,[u("div",ba,[b(j,{contractId:I.value,getContract:E,colors:O.value.color,customerCompanyId:z.value},null,8,["contractId","colors","customerCompanyId"])])])):w("",!0),p.value?(o(),r(N,{key:2,id:m.value,customerCompanyId:a.customerCompanyId,openCustomCompany:p.value,"onUpdate:modalHandler":t[0]||(t[0]=e=>p.value=e),"onUpdate:OnSuccess":E},null,8,["id","customerCompanyId","openCustomCompany"])):w("",!0)])}}}),[["__scopeId","data-v-b338ead2"]]);export{xa as _};
