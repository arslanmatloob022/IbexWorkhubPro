import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-2923841c.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-fceb34f1.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-83cc36bf.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-8917749c.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-f01c7ac6.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-f2ecb97f.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-61ae696e.js";import{_ as c}from"./VInput.vue_vue_type_script_setup_true_lang-59c63bcd.js";import{_ as d}from"./VControl-2632b23a.js";import{f as u,b as r,r as p,w as m,$ as v,o as f,av as h,C as _,D as g,E as y,F as b,G as k,K as w,U as x,L as j,X as C,N as V,aS as S,m as T,O as U,V as I,W as A,P as F,al as D,Q as P,R as O,S as M,B as E,J as $,I as R,x as N,H as B,k as H,aB as z,Z as J,s as K,y as q}from"./index-24255b4c.js";import{_ as G,a as W}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-a1a17f6a.js";import{u as Q}from"./useNotyf-22e02897.js";import{_ as Y}from"./ExcelFileEditor-5427cfca.js";import{f as X,a as ee,C as le,d as ae}from"./useSupportElement-9b414d68.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang-238d6b97.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-55d4ce9e.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-ccef05ca.js";import{_ as ne,a as oe}from"./ProjectFiles-b8c94a03.js";import{u as ce,_ as de,a as ue}from"./groupedCircleCharts-17f66a55.js";import{b as re,u as pe,a as me,c as ve,_ as fe}from"./groupedRadialCharts-b9efc040.js";import{_ as he}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-a321316c.js";import{A as _e}from"./vue3-apexcharts.common-8ddc3f84.js";import{u as ge}from"./salesSparksChart-9ec37744.js";import{u as ye}from"./revenueAreaChart-81d27f33.js";import{_ as be}from"./VAvatar.vue_vue_type_style_index_0_lang-5975838a.js";import{h as ke}from"./moment-bad41465.js";import{_ as we}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-5ef51783.js";import{p as xe}from"./index-c1fc2d09.js";import{a as je}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-3cc6b53d.js";import{_ as Ce}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-2c4b6ebd.js";import{_ as Ve}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-eb3fadd1.js";import{o as Se}from"./via-placeholder-24645670.js";import{_ as Te}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-5efaa727.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-68ff31aa.js";import{_ as Ie}from"./VDropdown.vue_vue_type_style_index_0_lang-c5d5baeb.js";import{_ as Ae}from"./VPlyr.vue_vue_type_style_index_0_lang-21be3d90.js";import{_ as Fe}from"./VIconBox.vue_vue_type_style_index_0_lang-cfb82acf.js";import{f as De}from"./index-5fa9b154.js";import{_ as Pe}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-2e0881c2.js";import{_ as Oe}from"./JobTodos.vue_vue_type_style_index_0_lang-df9492fd.js";import{_ as Me}from"./UserCardDropdown-7c033134.js";import{u as Ee}from"./useThemeColors-6451b85b.js";import{_ as $e}from"./VTag.vue_vue_type_style_index_0_lang-046e156b.js";import{_ as Le}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-b50875aa.js";const Re=e=>(P("data-v-6b746c41"),e=e(),O(),e),Ne={class:"column is-12"},Be={class:"list-flex-toolbar is-reversed"},He={class:"columns is-multiline"},ze={key:0,class:"column is-12 card p-4 curved mb-2"},Je={class:"columns is-multiline"},Ke={class:"column is-10"},qe={class:"column is-2"},Ge=Re((()=>y("img",{class:"light-image",src:G,alt:""},null,-1))),We=Re((()=>y("img",{class:"dark-image",src:W,alt:""},null,-1))),Ze={key:0,class:"column is-12 card p-4 curved mb-2"},Qe={class:"columns is-multiline"},Ye={class:"column is-10"},Xe={class:"column is-2"},el={class:"is-flex space-between mb-4 bottom-border"},ll={class:"title is-5 m-0"},al={class:"content"},tl={class:"is-flex"},sl={key:0,class:"columns is-multiline"},il={class:"column is-6"},nl={class:"column is-2"},ol={class:"column is-2"},cl={class:"column is-2"},dl={class:"column is-2"},ul={class:"column is-2"},rl={class:"column is-2"},pl={class:"column is-2"},ml={class:"column is-2"},vl={class:"column is-2"},fl={class:"is-flex columns is-multiline"},hl=u({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const u=e;r();const P=Z(),O=Q(),M=p(!1),E={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},$=p(!1),L=p(!1),R=p(!1),N=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),B=p(""),H=p(""),z=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),J=p({title:"",is_template:!1,object:u.objectId??"",description:""}),K=p({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await P.get(`/api/calculation-section/?object=${u.objectId??""}&user_id=${u.userId??""}&is_template=${u.fetchTemplates??""}`);N.value=e.data}catch(e){console.error(e)}finally{M.value=!1}},G=async()=>{try{const e=J.value;await P.post("/api/calculation-section/",e);O.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{M.value=!1}};m((()=>z.value.width),(()=>{let e=0;e=z.value.height*z.value.width,z.value.item_area=e.toFixed(2)})),m((()=>z.value.item_unit_price),(()=>{let e=0;e=z.value.item_area*z.value.item_unit_price,z.value.item_total_price=e.toFixed(2)})),m((()=>z.value.quantity),(()=>{let e=0;e=z.value.item_total_price*z.value.quantity,z.value.grand_total_price=e.toFixed(2)}));const W=async()=>{try{const e=z.value;e.section=B.value;await P.post("/api/calculation-section-items/",e);O.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{M.value=!1}},Y=v((()=>{if(H.value){const e=new RegExp(H.value,"i");return N.value.filter((l=>l.title?.match(e)))}return N.value})),ee=async e=>{try{await P.delete(`/api/calculation-section/${e}/`),O.success("Section deleted successfully!"),q()}catch(l){console.error(l),O.error("Failed to delete sheet.")}};return f((async()=>{await q(),await q()})),(e,u)=>{const r=F,p=D,m=d,v=c,f=o,P=n,O=i,M=s,N=t,q=l,Z=a,Q=h("tooltip");return _(),g("div",Ne,[y("div",Be,[b(p,null,{default:k((()=>[b(r,{icon:L.value?"fas fa-window-close":"fas fa-plus",color:L.value?"warning":"primary",class:"ml-2",raised:"",onClick:u[0]||(u[0]=e=>L.value=!L.value)},{default:k((()=>[w(x(L.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:u[1]||(u[1]=e=>L.value=!L.value)},{default:k((()=>[w("Import")])),_:1})])),_:1}),y("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(y("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>H.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,H.value]])])),_:1})])]),y("div",He,[b(S,{name:"translate-page-y"},{default:k((()=>[L.value?(_(),g("div",ze,[y("div",Je,[y("div",Ke,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":u[3]||(u[3]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(P,{modelValue:J.value.description,"onUpdate:modelValue":u[4]||(u[4]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",qe,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(O,{modelValue:J.value.is_template,"onUpdate:modelValue":u[5]||(u[5]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),T(Y).length?V("",!0):(_(),U(M,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[Ge,We])),_:1})),b(S,{name:"translate-page-y"},{default:k((()=>[R.value?(_(),g("div",Ze,[y("div",Qe,[y("div",Ye,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:K.value.title,"onUpdate:modelValue":u[6]||(u[6]=e=>K.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(P,{modelValue:K.value.description,"onUpdate:modelValue":u[7]||(u[7]=e=>K.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",Xe,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(O,{modelValue:K.value.is_template,"onUpdate:modelValue":u[8]||(u[8]=e=>K.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),b(S,{name:"from-bottom"},{default:k((()=>[T(Y).length?(_(!0),g(I,{key:0},A(T(Y),((e,l)=>(_(),g("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[y("div",el,[y("div",null,[y("h4",ll,x(e.title),1),y("div",al,[y("p",null,x(T(X)(e.created_at)),1)])]),y("div",tl,[b(N,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),j(b(N,{icon:"fas fa-plus",color:$.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{B.value=e,$.value=!$.value,0==$.value&&(z.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),j(b(N,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(N,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),$.value?(_(),g("div",sl,[y("div",il,[b(f,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":u[9]||(u[9]=e=>z.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",nl,[b(f,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.height,"onUpdate:modelValue":u[10]||(u[10]=e=>z.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",ol,[b(f,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.width,"onUpdate:modelValue":u[11]||(u[11]=e=>z.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",cl,[b(f,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.item_area,"onUpdate:modelValue":u[12]||(u[12]=e=>z.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",dl,[b(f,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.unit,"onUpdate:modelValue":u[13]||(u[13]=e=>z.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",ul,[b(f,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.item_unit_price,"onUpdate:modelValue":u[14]||(u[14]=e=>z.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",rl,[b(f,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.item_total_price,"onUpdate:modelValue":u[15]||(u[15]=e=>z.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",pl,[b(f,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.quantity,"onUpdate:modelValue":u[16]||(u[16]=e=>z.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",ml,[b(f,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.grand_total_price,"onUpdate:modelValue":u[17]||(u[17]=e=>z.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",vl,[b(r,{light:"",fullwidth:"",onClick:W,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[w("Add Item")])),_:1})])])):V("",!0),y("div",fl,[e.items.length?(_(),U(Z,{key:0,class:"column is-12",data:e.items,columns:E,compact:""},{body:k((()=>[b(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(_(!0),g(I,null,A(e.items,(e=>(_(),g("div",{key:e.id,class:"flex-table-item"},[b(q,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,{column:{align:"end"}},{default:k((()=>[b(N,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(N,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):V("",!0)])])))),128)):V("",!0)])),_:1})])])}}}),_l=M(hl,[["__scopeId","data-v-6b746c41"]]),gl=e=>(P("data-v-ce90a5fa"),e=e(),O(),e),yl={key:1},bl={class:"columns is-multiline"},kl={class:"list-flex-toolbar is-reversed column is-12"},wl={class:"multiselect-single-label"},xl=["src"],jl=["src"],Cl={class:"is-flex"},Vl={class:"card p-4 curved is-flex space-between"},Sl={class:"subtitle is-5 m-0"},Tl={class:"content"},Ul={class:"is-flex"},Il={key:1},Al=gl((()=>y("h1",{class:"title is-4"},"No File Uploaded",-1))),Fl=[Al],Dl={class:"modal-form columns is-multiline"},Pl={class:"file has-name"},Ol={class:"file-label"},Ml=gl((()=>y("span",{class:"file-cta"},[y("span",{class:"file-icon"},[y("i",{class:"fas fa-cloud-upload-alt"})]),y("span",{class:"file-label"}," Choose a file… ")],-1))),El={class:"file-name light-text"},$l=u({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;r(),p(null);const a=Z(),s=Q(),i=p(!1);p([[""]]);const n=p([]),u=p([]),h=p(""),S=p(!1);p("");const P=p("");p("");const O=p(!1),M=p(0),L=p({file:"",title:"",object:l.objectId}),R=e=>{let l=e.target.files[0];L.value.file=l,P.value=l.name,L.value.title=l.name},N=p(""),B=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),H=async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/?object=${l.objectId}`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}},z=(e="")=>{M.value=e,O.value=!0},J=p(!1),K=async()=>{try{J.value=!0;const e=ee(L.value,[""]);await a.post("/api/excel-files/upload-excel/",e);H(),s.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{J.value=!1,S.value=!1}};m((()=>N.value),(e=>{e&&(async e=>{try{J.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),s.success("Sheet create successfully"),H()}catch(l){console.error(l)}finally{J.value=!1,S.value=!1}})(e)}));p("excel");const q=v((()=>{if(h.value){const e=new RegExp(h.value,"i");return n.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return n.value.filter((e=>0==e.is_template))}));return v((()=>{if(h.value){const e=new RegExp(h.value,"i");return u.value.filter((l=>l.title?.match(e)))}return u.value})),f((async()=>{l.fetchAll&&await H(),l.userId&&(async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}})(),(async()=>{try{i.value=!0;const e=await a.get("/api/excel-files/templates/");u.value=e.data,B.value=u.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{i.value=!1}})(),await H()})),(e,n)=>{const u=ie,r=E("Multiselect"),p=d,m=o,v=F,f=D,J=t,G=Y,W=se,Z=c,Q=te;return i.value?(_(),U(u,{key:0})):(_(),g("div",yl,[y("div",bl,[y("div",kl,[b(f,null,{default:k((()=>[b(m,{style:{width:"260px"}},{default:k((({id:e})=>[b(p,null,{default:k((()=>[b(r,{modelValue:N.value,"onUpdate:modelValue":n[0]||(n[0]=e=>N.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:B.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[y("div",wl,[y("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,xl),w(" "+x(e.name),1)])])),option:k((({option:e})=>[y("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,jl),w(" "+x(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(v,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:n[1]||(n[1]=e=>z())},{default:k((()=>[w("New Sheet")])),_:1}),b(v,{icon:"fas fa-upload",raised:"",light:"",onClick:n[2]||(n[2]=e=>S.value=!S.value),outlined:"",color:"primary"},{default:k((()=>[w(" File ")])),_:1})])),_:1}),y("div",Cl,[b(p,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(y("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>h.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,h.value]])])),_:1})])]),T(q).length?(_(!0),g(I,{key:0},A(T(q),((e,l)=>(_(),g("div",{class:"column is-6",key:e.id},[y("div",Vl,[y("div",null,[y("h4",Sl,x(e.title),1),y("div",Tl,[y("p",null,x(T(X)(e.created_at)),1)])]),y("div",Ul,[b(J,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>z(e.id),"has-background":""},null,8,["onClick"]),b(J,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),s.success("Sheet deleted successfully!"),H()}catch(l){console.error(l),s.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(_(),g("div",Il,Fl))]),O.value?(_(),U(G,{key:0,class:"fullscreen","excel-file-modal":O.value,fileId:M.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":n[4]||(n[4]=e=>{O.value=!1,H()})},null,8,["excel-file-modal","fileId","object-id"])):V("",!0),b(Q,{is:"form",open:S.value,title:"Upload Task File",size:"medium",actions:"right",onClose:n[7]||(n[7]=e=>S.value=!1),onSubmit:$(K,["prevent"])},{content:k((()=>[y("div",Dl,[b(m,{class:"column is-12"},{default:k((()=>[b(W,null,{default:k((()=>[w("File Title")])),_:1}),b(p,null,{default:k((()=>[b(Z,{modelValue:L.value.title,"onUpdate:modelValue":n[5]||(n[5]=e=>L.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(m,{class:"column is-12",grouped:""},{default:k((()=>[b(p,null,{default:k((()=>[y("div",Pl,[y("label",Ol,[y("input",{onChange:R,class:"file-input",type:"file",name:"file",required:""},null,32),Ml,y("span",El,x(P.value?P.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(v,{onClick:n[6]||(n[6]=e=>S.value=!1),raised:""},{default:k((()=>[w("Close")])),_:1})])),action:k((()=>[b(v,{type:"submit",color:"primary",raised:""},{default:k((()=>[w("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Ll=M($l,[["__scopeId","data-v-ce90a5fa"]]),Rl={class:"columns is-multiline"},Nl={class:"column is-3"},Bl={class:"column is-3"},Hl={class:"column is-3"},zl={class:"column is-3"},Jl={class:"column is-6"},Kl={class:"column is-6"},ql={class:"column is-6"},Gl={class:"column is-6"},Wl={class:"column is-6"},Zl={class:"column is-6"},Ql=u({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=ge(),{revenueOptions:i}=ye(),{lineStatsChartOptions:n}=re(),{flexRadialChartCircleOptions:o}=pe(),{flexRadialChartStripesOptions:c}=me(),{widgetGaugeGroup1Options:d,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=ve(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ce();return(e,f)=>{const h=he,w=fe,x=de,j=ue;return _(),g("div",Rl,[y("div",Nl,[b(h,{straight:""},{default:k((()=>[b(T(_e),{id:"widget-spark1",height:T(l).chart.height,type:T(l).chart.type,series:T(l).series,options:T(l)},null,8,["height","type","series","options"])])),_:1})]),y("div",Bl,[b(h,{straight:""},{default:k((()=>[b(T(_e),{id:"widget-spark2",height:T(a).chart.height,type:T(a).chart.type,series:T(a).series,options:T(a)},null,8,["height","type","series","options"])])),_:1})]),y("div",Hl,[b(h,{straight:""},{default:k((()=>[b(T(_e),{id:"widget-spark3",height:T(t).chart.height,type:T(t).chart.type,series:T(t).series,options:T(t)},null,8,["height","type","series","options"])])),_:1})]),y("div",zl,[b(h,{straight:""},{default:k((()=>[b(T(_e),{id:"widget-spark4",height:T(s).chart.height,type:T(s).chart.type,series:T(s).series,options:T(s)},null,8,["height","type","series","options"])])),_:1})]),y("div",Jl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(T(_e),{id:"line-stats-widget-chart",height:T(n).chart.height,type:T(n).chart.type,series:T(n).series,options:T(n)},null,8,["height","type","series","options"])])),_:1})]),y("div",Kl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(T(_e),{id:"line-stats-area-chart",height:T(i).chart.height,type:T(i).chart.type,series:T(i).series,options:T(i)},null,8,["height","type","series","options"])])),_:1})]),y("div",ql,[b(x,{title:"Sales Revenue",straight:""},{default:k((()=>[b(T(_e),{id:"flex-stat-circle",height:T(o).chart.height,type:T(o).chart.type,series:T(o).series,options:T(o)},null,8,["height","type","series","options"])])),_:1})]),y("div",Gl,[b(x,{title:"Sales Revenue",straight:""},{default:k((()=>[b(T(_e),{id:"flex-stat-radial",height:T(c).chart.height,type:T(c).chart.type,series:T(c).series,options:T(c)},null,8,["height","type","series","options"])])),_:1})]),y("div",Wl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(T(_e),{id:"group-radial-1",height:T(p).chart.height,type:T(p).chart.type,series:T(p).series,options:T(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(T(_e),{id:"group-radial-2",height:T(m).chart.height,type:T(m).chart.type,series:T(m).series,options:T(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(T(_e),{id:"group-radial-3",height:T(v).chart.height,type:T(v).chart.type,series:T(v).series,options:T(v)},null,8,["height","type","series","options"])])),_:1})]),y("div",Zl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(T(_e),{id:"group-gauge-1",height:T(d).chart.height,type:T(d).chart.type,series:T(d).series,options:T(d)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(T(_e),{id:"group-gauge-2",height:T(u).chart.height,type:T(u).chart.type,series:T(u).series,options:T(u)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(T(_e),{id:"group-gauge-3",height:T(r).chart.height,type:T(r).chart.type,series:T(r).series,options:T(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Yl=e=>(P("data-v-1f68036b"),e=e(),O(),e),Xl={class:"timeline-wrapper"},ea=Yl((()=>y("div",{class:"timeline-header"},null,-1))),la={class:"timeline-wrapper-inner"},aa={class:"timeline-container"},ta={class:"timeline-item is-unread"},sa={class:"date"},ia={class:"content-wrap"},na={class:"content-box"},oa=Yl((()=>y("div",{class:"status"},null,-1))),ca={class:"box-text"},da={class:"meta-text"},ua=["innerHTML"],ra=u({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=Z(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=be;return _(),g("div",Xl,[ea,y("div",la,[y("div",aa,[(_(!0),g(I,null,A(T(t),(e=>(_(),g("div",ta,[y("div",sa,[y("span",null,x(T(ke)(e.timestamp).format("ddd, mm yyyy")),1)]),y("div",{class:R(["dot",s[e.action]])},null,2),y("div",ia,[y("div",na,[oa,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),y("div",ca,[y("div",da,[y("p",null,[y("span",null,x(e.actor_info?.username??"N/A")+" "+x(e.actor_info?.last_name??"N/A"),1),y("span",{class:"log-message",innerHTML:e.message},null,8,ua)]),y("span",null,x(T(ke)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),pa=M(ra,[["__scopeId","data-v-1f68036b"]]),ma={class:"table is-striped is-fullwidth"},va=y("thead",null,[y("tr",null,[y("th",{scope:"col"},"Job"),y("th",{scope:"col"},"ID"),y("th",{scope:"col"},"Title"),y("th",{scope:"col"},"Status"),y("th",{scope:"col"},"Total Price"),y("th",{scope:"col"},"Total Tax"),y("th",{scope:"col"},"Amount Paid"),y("th",{scope:"col"},"Balance"),y("th",{scope:"col"},"Deadline"),y("th",{scope:"col"},"Date Paid"),y("th",{scope:"col"},"Files"),y("th",{scope:"col",class:"is-end"},"Actions")])],-1),fa=y("td",null,"Tina",-1),ha=y("td",null,"Bergmann",-1),_a=y("td",null,"Sales",-1),ga=y("td",null,"Tina",-1),ya=y("td",null,"Bergmann",-1),ba=y("td",null,"Sales",-1),ka=y("td",null,"Tina",-1),wa=y("td",null,"Bergmann",-1),xa=y("td",null,"Sales",-1),ja=y("td",null,"Bergmann",-1),Ca=y("td",null,"Sales",-1),Va={class:"is-end"},Sa={class:"is-flex is-justify-content-flex-end"},Ta=y("td",null,"Tina",-1),Ua=y("td",null,"Bergmann",-1),Ia=y("td",null,"Sales",-1),Aa=y("td",null,"Tina",-1),Fa=y("td",null,"Bergmann",-1),Da=y("td",null,"Sales",-1),Pa=y("td",null,"Tina",-1),Oa=y("td",null,"Bergmann",-1),Ma=y("td",null,"Sales",-1),Ea=y("td",null,"Bergmann",-1),$a=y("td",null,"Sales",-1),La={class:"is-end"},Ra={class:"is-flex is-justify-content-flex-end"},Na=y("td",null,"Tina",-1),Ba=y("td",null,"Bergmann",-1),Ha=y("td",null,"Sales",-1),za=y("td",null,"Tina",-1),Ja=y("td",null,"Bergmann",-1),Ka=y("td",null,"Sales",-1),qa=y("td",null,"Tina",-1),Ga=y("td",null,"Bergmann",-1),Wa=y("td",null,"Sales",-1),Za=y("td",null,"Bergmann",-1),Qa=y("td",null,"Sales",-1),Ya={class:"is-end"},Xa={class:"is-flex is-justify-content-flex-end"},et=y("td",null,"Tina",-1),lt=y("td",null,"Bergmann",-1),at=y("td",null,"Sales",-1),tt=y("td",null,"Tina",-1),st=y("td",null,"Bergmann",-1),it=y("td",null,"Sales",-1),nt=y("td",null,"Tina",-1),ot=y("td",null,"Bergmann",-1),ct=y("td",null,"Sales",-1),dt=y("td",null,"Bergmann",-1),ut=y("td",null,"Sales",-1),rt={class:"is-end"},pt={class:"is-flex is-justify-content-flex-end"},mt=u({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=xe;N();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),g("table",ma,[va,y("tbody",null,[y("tr",null,[fa,ha,_a,ga,ya,ba,ka,wa,xa,ja,Ca,y("td",Va,[y("div",Sa,[b(a)])])]),y("tr",null,[Ta,Ua,Ia,Aa,Fa,Da,Pa,Oa,Ma,Ea,$a,y("td",La,[y("div",Ra,[b(a)])])]),y("tr",null,[Na,Ba,Ha,za,Ja,Ka,qa,Ga,Wa,Za,Qa,y("td",Ya,[y("div",Xa,[b(a)])])]),y("tr",null,[et,lt,at,tt,st,it,nt,ot,ct,dt,ut,y("td",rt,[y("div",pt,[b(a)])])])])])}}}),vt={class:"table is-striped is-fullwidth"},ft=y("thead",null,[y("tr",null,[y("th",{scope:"col"},"First Name"),y("th",{scope:"col"},"Last Name"),y("th",{scope:"col"},"Position"),y("th",{scope:"col",class:"is-end"},[y("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ht=y("td",null,"Tina",-1),_t=y("td",null,"Bergmann",-1),gt=y("td",null,"Head of Sales",-1),yt={class:"is-end"},bt={class:"is-flex is-justify-content-flex-end"},kt=y("td",null,"John",-1),wt=y("td",null,"Wistmus",-1),xt=y("td",null,"Senior Executive",-1),jt={class:"is-end"},Ct={class:"is-flex is-justify-content-flex-end"},Vt=y("td",null,"Sam",-1),St=y("td",null,"Watson",-1),Tt=y("td",null,"Software Engineer",-1),Ut={class:"is-end"},It={class:"is-flex is-justify-content-flex-end"},At=y("td",null,"Jolaine",-1),Ft=y("td",null,"Joestar",-1),Dt=y("td",null,"HR Manager",-1),Pt={class:"is-end"},Ot={class:"is-flex is-justify-content-flex-end"},Mt=y("td",null,"Anders",-1),Et=y("td",null,"Jensen",-1),$t=y("td",null,"Accountant",-1),Lt={class:"is-end"},Rt={class:"is-flex is-justify-content-flex-end"},Nt=u({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=xe;N();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),g("table",vt,[ft,y("tbody",null,[y("tr",null,[ht,_t,gt,y("td",yt,[y("div",bt,[b(a)])])]),y("tr",null,[kt,wt,xt,y("td",jt,[y("div",Ct,[b(a)])])]),y("tr",null,[Vt,St,Tt,y("td",Ut,[y("div",It,[b(a)])])]),y("tr",null,[At,Ft,Dt,y("td",Pt,[y("div",Ot,[b(a)])])]),y("tr",null,[Mt,Et,$t,y("td",Lt,[y("div",Rt,[b(a)])])])])])}}}),Bt={class:"columns is-multiline"},Ht={class:"column is-12"},zt={class:"toolbar"},Jt={class:"tabs-inner"},Kt={class:"tabs"},qt=y("span",null,"Estimate",-1),Gt=[qt],Wt=y("span",null,"Budget",-1),Zt=[Wt],Qt=y("span",null,"Owner Invoice",-1),Yt=[Qt],Xt=y("li",{class:"tab-naver"},null,-1),es={key:0,class:"column is-12"},ls={key:1,class:"column is-12"},as={key:2,class:"column is-12"},ts=u({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=xe;N();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Nt,s=mt;return _(),g("div",Bt,[y("div",Ht,[y("div",zt,[y("div",Jt,[y("div",Kt,[y("ul",null,[y("li",{class:R(["estimate"===T(a)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=B($((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},Gt,32)],2),y("li",{class:R(["budget"===T(a)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=B($((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},Zt,32)],2),y("li",{class:R(["invoice"===T(a)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=B($((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Yt,32)],2),Xt])])])])]),"estimate"===T(a)?(_(),g("div",es,[b(t)])):V("",!0),"budget"===T(a)?(_(),g("div",ls)):V("",!0),"invoice"===T(a)?(_(),g("div",as,[b(s)])):V("",!0)])}}}),ss={class:"user-grid-toolbar"},is=y("span",{class:"icon"},[y("i",{class:"fas fa-plus"})],-1),ns=y("span",null,"Progress",-1),os={class:"user-grid user-grid-v1"},cs={class:"columns is-multiline"},ds={class:"grid-item"},us={class:"is-flex"},rs=u({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=d,n=E("Multiselect"),c=o,u=F,r=D,p=z,m=Ve,v=Ce;return _(),g("div",null,[y("div",ss,[b(i,{icon:"feather:search"},{default:k((()=>[j(y("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>H(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(l)]])])),_:1}),b(r,null,{default:k((()=>[b(c,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:T(a),"onUpdate:modelValue":s[1]||(s[1]=e=>H(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,null,{default:k((()=>[is,ns])),_:1})])),_:1})]),y("div",os,[y("div",cs,[(_(),g(I,null,A(20,(e=>y("div",{key:e,class:"column is-3"},[y("div",ds,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),y("div",us,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ps={key:1},ms={class:"card-grid-toolbar"},vs={class:"buttons"},fs=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),hs=y("span",null,"Progress",-1),_s={class:"card-grid card-grid-v4"},gs=y("img",{class:"light-image",src:G,alt:""},null,-1),ys=y("img",{class:"dark-image",src:W,alt:""},null,-1),bs=["href","title"],ks=["src","alt"],ws={class:"card-grid-item-content"},xs={class:"dark-inverted"},js={key:0},Cs=y("summary",null,"Read More",-1),Vs={key:0,class:"card-grid-item-footer"},Ss={class:"meta"},Ts={class:"dark-inverted"},Us=u({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=Z(),t=p(""),i=p(!1),n=p(!1),c=p(0),u=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const h=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return f((()=>{"job"===l.type&&m()})),(e,a)=>{const r=rs,p=d,v=E("Multiselect"),f=o,D=F,P=s,O=be,M=je;return T(i)?(_(),U(r,{key:0})):(_(),g("div",ps,[y("div",ms,[b(p,{icon:"feather:search"},{default:k((()=>[j(y("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>H(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(t)]])])),_:1}),y("div",vs,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:T(c),"onUpdate:modelValue":a[1]||(a[1]=e=>H(c)?c.value=e:null),options:u,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(D,{onClick:a[2]||(a[2]=e=>n.value=!T(n)),color:"primary",raised:""},{default:k((()=>[fs,hs])),_:1})])]),y("div",_s,[b(P,{class:R([0!==T(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[gs,ys])),_:1},8,["class"]),b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),g(I,null,A(T(h),(e=>(_(),g("div",{key:e.id,class:"column is-3"},[y("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[y("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>T(Se)(400,300))},null,40,ks),y("div",ws,[y("h3",xs,x(e.title?e.title:"No Title"),1),y("p",null,[w(x(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(_(),g("details",js,[Cs,w(" "+x(e.description?e.description:""),1)])):V("",!0)])]),e.uploaded_by_info?(_(),g("div",Vs,[b(O,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),y("div",Ss,[y("span",Ts,x(e.uploaded_by_info.username??"N/A")+" "+x(e.uploaded_by_info.last_name??""),1),y("span",null,x(T(X)(e.created_at)),1)])])):V("",!0)],8,bs)])))),128))])),_:1})]),T(n)?(_(),U(M,{key:0,job:l.object,openProgressModal:T(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):V("",!0)]))}}}),Is={class:"columns is-multiline"},As={class:"column is-12"},Fs={class:"column is-12"},Ds=u({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},parent:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(!1),s=Z(),i=Q(),u=()=>{l("update:modalHandler",!1)},r=p({id:"",type:a.type,object:a.object,parent:a.parent,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),m=async()=>{try{t.value=!0;const e=ee(r.value,[""]);e.append("value",r.value.title.replaceAll(" ","").toLocaleLowerCase());await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),u()}catch(e){console.log(e)}finally{t.value=!1}};return f((()=>{})),(e,l)=>{const s=c,i=d,p=o,v=n,f=F,h=te;return _(),U(h,{is:"form",open:a.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:$(m,["prevent"]),onClose:l[2]||(l[2]=e=>u())},{content:k((()=>[y("div",Is,[y("div",As,[b(p,{label:"Title *"},{default:k((()=>[b(i,null,{default:k((()=>[b(s,{modelValue:T(r).title,"onUpdate:modelValue":l[0]||(l[0]=e=>T(r).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),y("div",Fs,[b(p,{label:"Description (Optional)"},{default:k((()=>[b(i,null,{default:k((()=>[b(v,{modelValue:T(r).description,"onUpdate:modelValue":l[1]||(l[1]=e=>T(r).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:k((()=>[b(f,{loading:T(t),type:"submit",color:"warning",raised:""},{default:k((()=>[w("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Ps={class:"modal-form columns is-multiline"},Os={class:"column is-full"},Ms={class:"field"},Es=y("label",{class:"label"},"Title ",-1),$s={class:"control"},Ls={class:"field column is-half"},Rs={class:"file"},Ns={class:"file-label"},Bs={class:"file-cta"},Hs=y("span",{class:"file-icon"},[y("i",{class:"fas fa-cloud-upload-alt"})],-1),zs={class:"file-label"},Js=u({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;p(null);const t=Z(),s=Q(),i=p(!1),n=r(),c=()=>{l("close:ModalHandler",!1)},u=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),m=async()=>{try{i.value=!0;const e=ee(u.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${u.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),c()}catch(e){console.log(e)}finally{i.value=!1}},v=p(""),h=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(u.value.file=a,v.value=a.name)};return f((()=>{})),(e,l)=>{const t=d,s=o,n=F,r=te;return _(),U(r,{is:"form",open:a.openFileModal,title:"Add Attachment",size:"medium",actions:"right",onSubmit:$(m,["prevent"]),onClose:c},{content:k((()=>[y("div",Ps,[y("div",Os,[y("div",Ms,[Es,y("div",$s,[j(y("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>T(u).title=e)},null,512),[[C,T(u).title]])])])]),y("div",Ls,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[y("div",Rs,[y("label",Ns,[y("input",{onChange:h,class:"file-input",type:"file",name:"resume"},null,32),y("span",Bs,[Hs,y("span",zs,x(T(v)?T(v):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:k((()=>[b(n,{type:"submit",color:"primary",loading:T(i),raised:""},{default:k((()=>[w(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(n,{color:"light",onClick:c,raised:""},{default:k((()=>[w("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Ks={key:0,class:"modal-form"},qs=["src"],Gs=["src"],Ws=["src"],Zs=["src"],Qs={key:1,class:"modal-form"},Ys=y("h1",{class:"title is-5"},"No media file attached",-1),Xs=[Ys],ei=u({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Ae,n=F,o=te;return _(),U(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(_(),g("div",Ks,[a.document?.includes(".pdf")?(_(),g("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,qs)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(_(),g("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Gs)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(_(),g("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ws)):V("",!0),a.document?.includes(".mp4")?(_(),U(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(_(),g("img",{key:4,src:a.document,alt:""},null,8,Zs))])):(_(),g("div",Qs,Xs))])),cancel:k((()=>[b(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","title"])}}}),li={class:"tile-grid-item"},ai={class:"tile-grid-item-inner"},ti=["src"],si={class:"meta"},ii={class:"dark-inverted"},ni=y("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),oi=y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),ci=y("div",{class:"meta"},[y("span",null,"Download"),y("span",null,"Download this file")],-1),di=[oi,ci],ui=y("hr",{class:"dropdown-divider"},null,-1),ri=y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),pi=y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete this file")],-1),mi=[ri,pi],vi=u({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",webp:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=p("");return(e,c)=>{const d=Ie;return _(),g("div",null,[y("div",li,[y("div",ai,[y("img",{onClick:c[0]||(c[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,ti),y("div",si,[y("span",ii,x(a.document.title??"N/A"),1),y("span",null,[y("span",null,x(a.document?.file_info?.size??0)+" MB",1),ni,y("span",null,"At:"+x(T(ae)(a.document.created_at)),1)])]),b(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[y("a",{role:"menuitem",onClick:c[1]||(c[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},di),ui,y("a",{role:"menuitem",onClick:c[2]||(c[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},mi)])),_:1})])]),T(s)?(_(),U(ei,{key:0,openDocViewModal:T(s),document:T(t),DocumentType:T(o),title:T(i),"onUpdate:closeModalHandler":c[3]||(c[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0)])}}}),fi={key:1},hi={key:0},_i={class:"tabs-wrapper"},gi={class:"tabs-inner"},yi={class:"tabs"},bi=[y("span",null,"Recent",-1)],ki=["onKeydown","onClick"],wi={key:0},xi={key:0},ji={class:"tile-grid-toolbar"},Ci={class:"buttons"},Vi=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Si=y("span",null,"File",-1),Ti=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Ui=y("span",null,"Folder",-1),Ii=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Ai=y("span",null,"Folder",-1),Fi={key:1},Di={class:"tile-grid-toolbar"},Pi={class:"buttons"},Oi=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Mi=y("span",null,"File",-1),Ei=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),$i=y("span",null,"Folder",-1),Li=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Ri=y("span",null,"Folder",-1),Ni={class:"tile-grid tile-grid-v2"},Bi=y("img",{class:"light-image",src:G,alt:""},null,-1),Hi=y("img",{class:"dark-image",src:W,alt:""},null,-1),zi=u({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=Q(),i=Z(),n=p(!1),c=p([]),u=p(""),r=p(0),m=p(!1),h=p(""),w=p(""),D=p(""),P=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),O=["All Files","Recently Updated","My Files","Team Files","Deprecated"],M=()=>{u.value=a.docType,n.value=!n.value};p("");const L=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),N=()=>{L.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},z=async()=>{try{const e=await i.delete(`/api/media-folder/${a.folderId}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),L.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},J=async()=>{try{m.value=!0;const e=await i.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);P.value=e.data}catch(e){console.log(e)}finally{m.value=!1}},K=async()=>{try{const e=await i.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);c.value=e.data,D.value="recent"}catch(e){console.log(e)}},q=async e=>{try{const l=await i.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),t.purple("File Deleted Successfully"),J()}catch(l){console.log(l)}},G=p(!1),W=(e="")=>{h.value=e,G.value=!G.value},Y=v((()=>w.value?P.value.filter((e=>e.title.match(new RegExp(w.value,"i"))||e.file_info?.name?.match(new RegExp(w.value,"i"))||e.created_at.match(new RegExp(w.value,"i")))):P.value));return f((()=>{J(),K()})),(e,l)=>{const t=ie,i=E("ObjectDocumentsTiles",!0),p=d,v=E("Multiselect"),f=o,h=F,P=vi,Z=s,Q=Ue,X=Js,ee=Ds;return _(),g("div",null,[T(m)?(_(),U(t,{key:0,rows:4})):(_(),g("div",fi,[T(c).length?(_(),g("div",hi,[y("div",_i,[y("div",gi,[y("div",yi,[y("ul",null,[y("li",{class:R(["recent"===T(D)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=B($((e=>D.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>D.value="recent")},bi,32)],2),(_(!0),g(I,null,A(T(c),(e=>(_(),g("li",{class:R([T(D)===e.value&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:B($((l=>D.value=e.value),["prevent"]),["space"]),onClick:l=>D.value=e.value},[y("span",null,x(e.title),1)],40,ki)],2)))),256))])])])]),(_(!0),g(I,null,A(T(c),(e=>(_(),g("div",{key:e.id},[T(D)==e.value?(_(),g("div",wi,[b(i,{onDeleteFolderUpdate:l[2]||(l[2]=e=>K()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):V("",!0)])))),128)),"recent"===T(D)?(_(),g("div",xi,[y("div",ji,[b(p,{icon:"feather:search"},{default:k((()=>[j(y("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>H(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(w)]])])),_:1}),y("div",Ci,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:T(r),"onUpdate:modelValue":l[4]||(l[4]=e=>H(r)?r.value=e:null),options:O,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[5]||(l[5]=e=>M()),color:"primary",raised:""},{default:k((()=>[Vi,Si])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[Ti,Ui])),_:1}),b(h,{onClick:N,color:"danger",raised:""},{default:k((()=>[Ii,Ai])),_:1})])]),b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),g(I,null,A(T(Y),(e=>(_(),g("div",{key:e.id,class:"column is-4"},[b(P,{document:e,onDeleteSelectedFile:q},null,8,["document"])])))),128))])),_:1})])):V("",!0)])):(_(),g("div",Fi,[y("div",Di,[b(p,{icon:"feather:search"},{default:k((()=>[j(y("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>H(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(w)]])])),_:1}),y("div",Pi,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:T(r),"onUpdate:modelValue":l[7]||(l[7]=e=>H(r)?r.value=e:null),options:O,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[8]||(l[8]=e=>M()),color:"primary",raised:""},{default:k((()=>[Oi,Mi])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[Ei,$i])),_:1}),b(h,{onClick:N,color:"danger",raised:""},{default:k((()=>[Li,Ri])),_:1})])]),y("div",Ni,[0!=T(Y).length||T(m)?V("",!0):(_(),U(Z,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Bi,Hi])),_:1})),y("div",null,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),g(I,null,A(T(Y),(e=>(_(),g("div",{key:e.id,class:"column is-4"},[b(P,{document:e,onDeleteSelectedFile:q},null,8,["document"])])))),128))])),_:1})])])])),T(L).isSweetAlertOpen?(_(),U(Q,{key:2,isSweetAlertOpen:T(L).isSweetAlertOpen,title:T(L).title,subtitle:T(L).subtitle,btntext:T(L).btntext,onConfirm:z,onCancel:()=>T(L).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):V("",!0),T(n)?(_(),U(X,{key:3,openFileModal:T(n),object:a.objectId,type:T(u),"onClose:ModalHandler":l[9]||(l[9]=e=>n.value=!1),"onUpdate:OnSuccess":J},null,8,["openFileModal","object","type"])):V("",!0),T(G)?(_(),U(ee,{key:4,"open-create-folder-modal":T(G),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[10]||(l[10]=e=>G.value=!1),"onUpdate:onSuccess":l[11]||(l[11]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)]))])}}}),Ji={class:"modal-form columns is-multiline"},Ki={class:"column is-12 is-flex"},qi={class:"file"},Gi=["onClick"],Wi={class:"file-cta"},Zi=y("span",{class:"file-icon"},[y("i",{class:"fas fa-cloud-upload-alt"})],-1),Qi={class:"file-label"},Yi=y("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Xi={class:"column is-full"},en=y("p",null,"Selected Photos",-1),ln=y("br",null,null,-1),an=u({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=Z(),s=Q(),i=p(!1),n=r(),c=p(""),u=p(null),m=p(!1),v=()=>l("close:ModalHandler",!1),f=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const e=ee(f.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),v()}catch(e){console.error(e)}finally{i.value=!1}},j=()=>{m.value=!0,u.value&&(u.value.accept="image/*",u.value.setAttribute("capture","environment"),u.value.removeAttribute("multiple"),u.value.click())},C=()=>{m.value=!1,u.value&&(u.value.accept="image/*",u.value.removeAttribute("capture"),u.value.setAttribute("multiple","true"),u.value.click())},V=p([]),S=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,V.value=e.map((e=>e.name)),c.value=e.length>1?`${e.length} photos selected`:e[0].name,m.value&&(f.value.title=e[0].name,await h())}u.value&&(u.value.value="")};return(e,l)=>{const t=d,s=o,n=Fe,r=F,p=te;return _(),U(p,{is:"form",open:a.openFileModal,title:"Add Photos",size:"medium",actions:"right",onSubmit:$(h,["prevent"]),onClose:v},{content:k((()=>[y("div",Ji,[y("input",{ref_key:"fileInput",ref:u,onChange:S,class:"file-input",type:"file",style:{display:"none"}},null,544),y("div",Ki,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[y("div",qi,[y("label",{class:"file-label",onClick:$(C,["prevent"])},[y("span",Wi,[Zi,y("span",Qi,x(T(c)?T(c):"Choose photo(s)"),1)])],8,Gi)])])),_:1})])),_:1}),b(n,{class:"ml-2",onClick:j,size:"small",color:"info",bordered:""},{default:k((()=>[Yi])),_:1})]),y("div",Xi,[en,(_(!0),g(I,null,A(T(V),(e=>(_(),g("span",null,[w(x(e)+" ",1),ln])))),256))])])])),action:k((()=>[b(r,{type:"submit",color:"primary",loading:T(i),raised:""},{default:k((()=>[w(" Save ")])),_:1},8,["loading"])])),cancel:k((()=>[b(r,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),tn={class:"column is-2"},sn={class:"card-grid-item is-relative"},nn=["src","alt"],on=["src","alt"],cn={class:"card-grid-item-content is-flex is-align-items-center space-between"},dn=u({__name:"NewDocumentViewer",props:{file:{}},emits:["updateOnSuccess"],setup(e,{emit:l}){const a=e,s=Z(),i=Q(),n=p("");p([]);const o=p(""),c=p(!1),d=p(""),u=p(""),r=e=>{o.value=e.file_info?.url,u.value=e.file_info?.type,d.value=e.title,c.value=!c.value},m={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},v=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",icon:""}),h=async()=>{try{await s.delete(`/api/attachment/${n.value}/`),l("updateOnSuccess",null),v.value.isSweetAlertOpen=!1,i.success("File deleted successfully")}catch(e){console.error("Error deleting file:",e)}};return f((()=>{})),(e,l)=>{const s=t,i=ei,p=Ue;return _(),g("div",tn,[y("a",sn,["png"===a.file?.file_info?.type||"jpg"===a.file?.file_info?.type||"webp"===a.file?.file_info?.type||"jpeg"===a.file?.file_info?.type?(_(),g("img",{key:0,src:a.file?.file_info?.url,alt:a.file?.title,onClick:l[0]||(l[0]=e=>r(a.file))},null,8,nn)):(_(),g("img",{key:1,src:m[a.file?.file_info?.type],alt:a.file?.title,onClick:l[1]||(l[1]=e=>r(a.file))},null,8,on)),y("div",cn,[y("h3",{onClick:l[2]||(l[2]=e=>r(a.file)),class:"dark-inverted"},x(a.file?.title),1),y("span",null,[y("span",null,x(a.file?.file_info?.size?a.file?.file_info?.size:0)+" MB",1)]),b(s,{style:{position:"absolute",top:"1%",right:"1%"},onClick:l[3]||(l[3]=e=>{return l=a.file?.id,n.value=l,void(v.value={title:" Delete this file?",subtitle:"This file will be deleted permanently.",isSweetAlertOpen:!0,btntext:"Delete",icon:"fas fa-bell"});var l}),icon:"fas fa-trash",color:"danger"})])]),T(c)?(_(),U(i,{key:0,openDocViewModal:T(c),document:T(o),DocumentType:T(u),title:T(d),"onUpdate:closeModalHandler":l[4]||(l[4]=e=>c.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0),T(v).isSweetAlertOpen?(_(),U(p,{key:1,title:T(v).title,subtitle:T(v).subtitle,btntext:T(v).btntext,icon:T(v).icon,onCancel:()=>{T(v).isSweetAlertOpen=!1},onConfirm:h},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0)])}}}),un={class:"card-grid-toolbar"},rn={class:"buttons"},pn=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),mn=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),vn=y("span",null,"Folder",-1),fn=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),hn=y("span",null,"Folder",-1),_n={key:0,class:"card-grid card-grid-v4"},gn={class:"columns is-multiline"},yn={class:"card-grid-item"},bn={class:"card-grid card-grid-v4"},kn=["onClick"],wn=y("img",{src:"/icons/folders.png",alt:"item.title"},null,-1),xn={class:"card-grid-item-content"},jn={class:"dark-inverted"},Cn={key:1,class:"card-grid card-grid-v4"},Vn=y("div",{class:"column is-2"},[y("div",{class:"card-grid-item"},[y("img",{class:"light-image",src:G,alt:""}),y("img",{class:"dark-image",src:W,alt:""}),y("div",{class:"card-grid-item-content"},[y("h3",{class:"dark-inverted"},"No Item Found")])])],-1),Sn=u({__name:"NewJobFolders",props:{objectId:String,type:{type:String,required:!0}},setup(e){const l=e,a=Q(),t=Z(),s=p(""),i=p(!1),n=p(!1),o=p([]),c=p([]),d=p([]),u=p(!1),r=p(""),m=v((()=>o.value[o.value.length-1]||null)),h=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",Icon:""}),j=async()=>{u.value=!0;try{const e=await t.get(`/api/media-folder/?object=${l.objectId}&type=${l.type}`);c.value=e.data.filter((e=>null===e.parent)),d.value=[]}catch(e){console.error("Error fetching top folders:",e)}finally{u.value=!1}},C=async e=>{u.value=!0;try{const a=await t.get(`/api/media-folder/${e}/sub-folders/`);c.value=a.data;const s=await t.get(`/api/attachment/by-object/${e}/?type=${l.type}`);d.value=s.data}catch(a){console.error("Error fetching folder contents:",a)}finally{u.value=!1}},T=async()=>{o.value.pop();const e=m.value;e?await C(e.id):await j()},D=p(!1),P=p(""),O=p(""),M=async()=>{m.value?P.value=m.value?m.value.id:"":O.value=l.objectId,D.value=!0},E=async()=>{P.value?await C(P.value):await j()},$=async()=>{s.value=m.value?m.value.id:l.objectId,"photos"===l.type?n.value=!0:i.value=!0},L=async()=>{try{h.value.isSweetAlertOpen=!1,await t.delete(`/api/media-folder/${r.value}/`),T(),m.value?await C(m.value.id):await j(),a.success("Folder deleted successfully")}catch(e){console.error("Error deleting folder:",e)}},R=async()=>{m.value&&await C(m.value.id)};return f((()=>{j()})),(e,a)=>{const t=F,p=z,v=dn,f=Js,j=an,N=Ue,B=Ds;return _(),g("div",null,[y("div",un,[o.value.length?(_(),U(t,{key:0,color:"warning",light:"",class:"mr-1",size:"medium",outlined:"",onClick:T,icon:"fas fa-chevron-left"})):V("",!0),y("div",null,[m.value?(_(),U(t,{key:1,color:"warning",light:"",bold:"",fullwidth:"",icon:"fas fa-folder-open"},{default:k((()=>[w(x(m.value.title),1)])),_:1})):(_(),U(t,{key:0,icon:"fas fa-folder",color:"warning",light:"",bold:"",fullwidth:""},{default:k((()=>[w("Main Folders")])),_:1}))]),y("div",rn,[m.value?(_(),U(t,{key:0,onClick:$,color:"primary",light:"",outlined:"",raised:""},{default:k((()=>[pn,y("span",null,x("photos"==l.type?"Photos":"File"),1)])),_:1})):V("",!0),b(t,{onClick:M,color:"info",outlined:"",raised:""},{default:k((()=>[mn,vn])),_:1}),m.value?(_(),U(t,{key:1,onClick:a[0]||(a[0]=e=>((e="")=>{r.value=e.id,h.value={title:`Delete ${e.title} folder?`,subtitle:"Once deleted, you will not be able to recover this folder and the content in it.",isSweetAlertOpen:!0,btntext:"Delete",Icon:"fas fa-bell"}})(m.value)),color:"danger",raised:"",outlined:""},{default:k((()=>[fn,hn])),_:1})):V("",!0)])]),y("div",null,[u.value?(_(),g("div",_n,[y("div",gn,[(_(),g(I,null,A(18,(e=>y("div",{key:e,class:"column is-2"},[y("div",yn,[b(p,{height:"160px"})])]))),64))])])):V("",!0),y("div",bn,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[c.value.length?(_(!0),g(I,{key:0},A(c.value,(e=>(_(),g("div",{key:e.id,class:"column is-2"},[y("a",{onClick:l=>(async e=>{o.value.push(e),await C(e.id)})(e),class:"card-grid-item"},[wn,y("div",xn,[y("h3",jn,x(e.title),1)])],8,kn)])))),128)):V("",!0),d.value.length?(_(!0),g(I,{key:1},A(d.value,(e=>(_(),U(v,{key:e.id,file:e,onUpdateOnSuccess:R},null,8,["file"])))),128)):V("",!0)])),_:1})]),c.value.length||d.value.length||u.value?V("",!0):(_(),g("div",Cn,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[Vn])),_:1})])),i.value?(_(),U(f,{key:2,openFileModal:i.value,object:s.value,type:l.type,"onClose:ModalHandler":a[1]||(a[1]=e=>i.value=!1),"onUpdate:OnSuccess":a[2]||(a[2]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),n.value?(_(),U(j,{key:3,openFileModal:n.value,object:s.value,type:l.type,"onClose:ModalHandler":a[3]||(a[3]=e=>n.value=!1),"onUpdate:OnSuccess":a[4]||(a[4]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),h.value.isSweetAlertOpen?(_(),U(N,{key:4,title:h.value.title,subtitle:h.value.subtitle,btntext:h.value.btntext,icon:h.value.Icon,onCancel:()=>{h.value.isSweetAlertOpen=!1},onConfirm:L},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0),D.value?(_(),U(B,{key:5,"open-create-folder-modal":D.value,type:l.type,object:O.value,parent:P.value,"onUpdate:modalHandler":a[5]||(a[5]=e=>D.value=!1),"onUpdate:OnSuccess":E},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)])])}}}),Tn={class:"tabs-wrapper"},Un={class:"tabs-inner"},In={class:"tabs is-boxed"},An=[y("span",null,"Documents",-1)],Fn=[y("span",null,"Photos",-1)],Dn=[y("span",null,"Videos",-1)],Pn=y("li",{class:"tab-naver"},null,-1),On={key:0},Mn={class:"tile-grid tile-grid-v2"},En=y("img",{class:"light-image",src:G,alt:""},null,-1),$n=y("img",{class:"dark-image",src:W,alt:""},null,-1),Ln={key:1},Rn={key:2},Nn=u({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo","updateOnSuccess"],setup(e,{emit:l}){const a=e;Q();const t=Z(),i=p("");p(0);const n=p(""),o=p("contracts"),c=p(!1),d=p([]),u=p("documents");p("site_visits"),p("job_videos");const r=v((()=>i.value?De.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):De)),m=async(e="contracts")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);d.value=l.data}catch(l){console.log(l)}},h=p(""),w=p(!1),x=p([]),j=p([]),C=p([]),S=async(e="")=>{try{const l=await t.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?x.value=l.data:"photos"===e?j.value=l.data:"videos"===e&&(C.value=l.data)}catch(l){console.log(l)}},I=(e="documents")=>{"documents"===e?S("documents"):"photos"===e?S("photos"):"videos"===e&&S("videos")};return f((()=>{m(),I("documents")})),(e,l)=>{const t=Sn,i=s,o=Js,d=Ds;return _(),g("div",null,[y("div",Tn,[y("div",Un,[y("div",In,[y("ul",null,[y("li",{class:R(["documents"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=B($((e=>u.value="documents"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>{u.value="documents",I("documents")})},An,32)],2),y("li",{class:R(["photos"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=B($((e=>u.value="photos"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>{u.value="photos",I("photos")})},Fn,32)],2),y("li",{class:R(["videos"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=B($((e=>u.value="videos"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>{u.value="videos",I("videos")})},Dn,32)],2),Pn])])])]),"documents"==T(u)?(_(),g("div",On,[b(t,{type:"documents",objectId:a.leadId},null,8,["objectId"]),y("div",Mn,[b(i,{class:R([0!==T(r).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[En,$n])),_:1},8,["class"])])])):V("",!0),"photos"==T(u)?(_(),g("div",Ln,[b(t,{type:"photos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),"videos"==T(u)?(_(),g("div",Rn,[b(t,{type:"videos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),T(c)?(_(),U(o,{key:3,openFileModal:T(c),object:a.leadId,type:T(n),"onClose:ModalHandler":l[6]||(l[6]=e=>c.value=!1),"onUpdate:OnSuccess":m},null,8,["openFileModal","object","type"])):V("",!0),T(w)?(_(),U(d,{key:4,"open-create-folder-modal":T(w),type:T(h),object:a.leadId,"onUpdate:modalHandler":l[7]||(l[7]=e=>w.value=!1),"onUpdate:onSuccess":l[8]||(l[8]=e=>I(T(h)))},null,8,["open-create-folder-modal","type","object"])):V("",!0)])}}}),Bn={class:"stat-widget flex-stat-widget is-straight"},Hn={class:"chart-media"},zn={class:"meta"},Jn={class:"dark-inverted"},Kn={class:"is-dark-primary"},qn={class:"chart-container"},Gn=u({__name:"ProgressWidget",props:{title:{default:"Widget Title"},value:{default:"8,641.26"},text:{default:""}},setup(e){const l=e;return(e,a)=>(_(),g("div",Bn,[y("div",Hn,[y("div",zn,[y("h4",Jn,x(l.title),1),y("span",Kn,x(l.value),1),y("p",null,x(l.text),1)]),y("div",qn,[J(e.$slots,"default")])])]))}}),Wn=u({__name:"TasksProgressGageChart",props:{percentCount:{type:Number,required:!0,default:0}},setup(e){const l=e,a=Ee(),t=K({series:[l.percentCount],chart:{height:190,type:"radialBar",offsetX:-15,offsetY:-10,toolbar:{show:!1}},colors:[a.info,a.secondary],plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"13px",fontWeight:"600",color:a.lightText,show:!1},value:{offsetY:5,fontSize:"16px",fontFamily:"Roboto, sans-serif",fontWeight:"500",color:void 0,formatter:function(e){return e+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:4},labels:["(30 days)"]});return(e,l)=>(_(),U(T(_e),{id:"flex-stat-radial",height:T(t).chart.height,type:T(t).chart.type,series:T(t).series,options:T(t)},null,8,["height","type","series","options"]))}}),Zn=u({__name:"CircularChart",props:{percentCount:{type:Number,required:!0,default:0},id:{type:String,required:!0,default:""},color:{type:String,required:!0,default:""}},setup(e){const l=e;Ee();const a=K({series:[l.percentCount],chart:{height:102,type:"radialBar",offsetY:-10,toolbar:{show:!1}},colors:[l.color],plotOptions:{radialBar:{hollow:{size:"35%"},dataLabels:{show:!1}}},labels:[""]});return(e,t)=>(_(),U(T(_e),{id:l.id,height:T(a).chart.height,type:T(a).chart.type,series:T(a).series,options:T(a)},null,8,["id","height","type","series","options"]))}}),Qn={key:0,class:"columns is-multiline"},Yn={class:"column is-6"},Xn={class:"column is-6"},eo=u({__name:"ProjectTasksStats",props:{project:{type:String,required:!0}},setup(e){const l=e,a=Ee(),t=Z(),s=p(!1),i=p({stats:{active:0,pending:0,completed:0,cancelled:0},tasks_progress:0,pending_tasks:0,total_tasks:0,status_percentage:{active:0,pending:0,completed:0,cancelled:0}});return f((()=>{(async()=>{try{s.value=!0;const e=await t.get(`/api/task/project-wise-stats/${l.project}/`);i.value=e.data}catch(e){console.log(e)}finally{s.value=!1}})()})),(e,l)=>{const t=Gn,n=ue;return T(s)?V("",!0):(_(),g("div",Qn,[y("div",Yn,[b(t,{title:"Job Progress",value:`${T(i).total_tasks} Total Tasks`,text:"This is the total progress on job base on tasks that have been completed.",straight:""},{default:k((()=>[b(Wn,{percentCount:T(i).tasks_progress},null,8,["percentCount"])])),_:1},8,["value"])]),y("div",Xn,[b(n,{title:"Tasks Stats",values:[T(i).stats.active,T(i).stats.pending,T(i).stats.cancelled],labels:["Active Tasks","Pending Tasks","Cancelled Tasks"]},{chart1:k((()=>[T(i).status_percentage?(_(),U(Zn,{key:0,id:"group-radial-1",color:T(a).info,percentCount:T(i).status_percentage.active},null,8,["color","percentCount"])):V("",!0)])),chart2:k((()=>[T(i).status_percentage?(_(),U(Zn,{key:0,color:T(a).warning,id:"group-radial-2",percentCount:T(i).status_percentage.pending},null,8,["color","percentCount"])):V("",!0)])),chart3:k((()=>[T(i).status_percentage?(_(),U(Zn,{key:0,color:T(a).danger,id:"group-radial-3",percentCount:T(i).status_percentage.cancelled},null,8,["color","percentCount"])):V("",!0)])),_:1},8,["values"])])]))}}}),lo={class:"business-dashboard hr-dashboard"},ao={class:"columns is-multiline"},to={class:"column is-12"},so={class:"columns is-multiline"},io={class:"column is-12"},no={class:"block-header"},oo={class:"left"},co={class:"current-user"},uo={class:"center"},ro=y("h4",{class:"block-heading"},"Current State",-1),po=y("h4",{class:"block-heading"},"Address",-1),mo={class:"block-text"},vo=y("br",null,null,-1),fo=y("br",null,null,-1),ho={class:"right"},_o=y("h4",{class:"block-heading"},"Managers",-1),go={class:"candidates"},yo=y("button",null,[y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),bo={class:"column is-12"},ko={class:"tabs-wrapper"},wo={class:"tabs-inner"},xo={class:"tabs is-toggle"},jo=[y("span",null,"Job Management",-1)],Co=[y("span",null,"Documents/Files",-1)],Vo=[y("span",null,"Old Estimates",-1)],So=[y("span",null,"Proposals",-1)],To=[y("span",null,"Tasks",-1)],Uo=[y("span",null,"Activities",-1)],Io=[y("span",null,"Job progress",-1)],Ao=[y("span",null,"Calculations",-1)],Fo=[y("span",null,"Finance",-1)],Do=[y("span",null,"Report",-1)],Po=y("li",{class:"tab-naver"},null,-1),Oo={key:0,class:"column is-12"},Mo={class:"columns is-multiline"},Eo={class:"column is-8"},$o={class:"columns is-multiline"},Lo={class:"column is-12"},Ro={class:"feed-settings"},No=y("h3",{class:"dark-inverted"},null,-1),Bo={class:"buttons"},Ho={class:"column is-12"},zo={class:"side-text mt-0"},Jo=y("h3",{class:"dark-inverted"},"Job Description",-1),Ko=["innerHTML"],qo={class:"column is-12"},Go={class:"column is-12"},Wo={class:"recent-rookies"},Zo=y("div",{class:"recent-rookies-header"},[y("h3",{class:"dark-inverted"},"Internal Users")],-1),Qo={class:"columns is-multiline user-grid user-grid-v4"},Yo={class:"column is-4"},Xo={class:"grid-item"},ec={class:"dark-inverted"},lc={class:"capitalized"},ac={class:"button-wrap has-text-centered"},tc={class:"column is-4"},sc={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},ic={key:1,class:"column is-12"},nc={key:2,class:"column is-12"},oc={key:3,class:"column is-12"},cc={class:"tabs-inner"},dc={class:"tabs is-boxed"},uc=[y("span",null,"Proposals",-1)],rc=[y("span",null,"Grouped Proposals",-1)],pc={key:0},mc={key:1},vc={key:4,class:"column is-12"},fc={key:5,class:"column is-12"},hc={key:6,class:"column is-12"},_c={key:7,class:"column is-12"},gc={key:8,class:"column is-12"},yc={key:9,class:"column is-12"},bc={key:10,class:"column is-12"},kc={class:"tabs-inner"},wc={class:"tabs is-boxed"},xc=[y("span",null,"Excel Sheets",-1)],jc=[y("span",null,"Custom Calculations",-1)],Cc={key:0},Vc={key:1},Sc=u({__name:"JobDetails",setup(l){pe();const a=q();N();const t=Z(),s=Q(),i=p(!1),n=p(""),o=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const c=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),d=p("excel"),u=p("management"),r=p("childProposals");let m;const v=async()=>{try{i.value=!0;const e=await t.get(`/api/project/${a.params.id}/detail/`);c.value=e.data,e.data.latitude&&((e,l)=>{if(m&&m.remove(),m=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(m),e&&l){const a=[e,l];L.marker(a).addTo(m),m.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{i.value=!1}},C=p([]),S=p(!1),P=async()=>{try{S.value=!0;await t.patch(`/api/project/${a.params.id}/`,{status:"completed"});s.success("Jobs Completed Successfully."),v()}catch(Error){console.log(Error)}finally{S.value=!1}};return f((()=>{v()})),(l,s)=>{const i=be,p=$e,m=F,f=D,S=eo,O=Me,M=Oe,E=Pe,L=ne,N=Nn,H=zi,z=Te,J=Us,K=ts,q=pa,G=Ql,W=oe,Z=Ll,Q=_l,Y=e,X=h("tooltip");return _(),g("div",lo,[y("div",ao,[y("div",to,[y("div",so,[y("div",io,[y("div",no,[y("div",oo,[y("div",co,[b(i,{size:"large",picture:T(c).image,squared:""},null,8,["picture"]),y("h3",null,[w(x(T(c).title?T(c).title:"No Title")+" ",1),y("sup",null,[b(p,{rounded:"",size:"tiny",color:"info"},{default:k((()=>[w(x(T(c).status),1)])),_:1})])])])]),y("div",uo,[ro,y("p",null,[b(p,{rounded:"",color:"warning"},{default:k((()=>[w(x("lead"==T(c).current_state?"Is Lead":"Is Job"),1)])),_:1})]),po,y("p",mo,[w(x(T(c).address?T(c).address:"No Address Added")+" ",1),vo,w(" "+x(T(c).city?T(c).city:"No City Added")+", "+x(T(c).state?T(c).state:"No State Added")+" ",1),fo,w(" "+x(T(c).zip_code?T(c).zip_code:"No Zip Code Added"),1)])]),y("div",ho,[_o,y("div",go,[(_(!0),g(I,null,A(T(c).managers_list,(e=>j((_(),U(i,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[X,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),yo]),b(f,null,{default:k((()=>[b(m,{class:"mt-1",onClick:s[0]||(s[0]=e=>{return l=T(a).params.id,n.value=l,void(o.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:k((()=>[w(" Update "+x("lead"==T(c).current_state?"Lead":"Job"),1)])),_:1}),"lead"!=T(c).current_state?(_(),U(m,{key:0,class:"mt-1",onClick:P,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:k((()=>[w(" Mark As Done ")])),_:1})):V("",!0)])),_:1})])])]),y("div",bo,[y("div",ko,[y("div",wo,[y("div",xo,[y("ul",null,[y("li",{class:R(["management"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[1]||(s[1]=B($((e=>u.value="management"),["prevent"]),["space"])),onClick:s[2]||(s[2]=e=>u.value="management")},jo,32)],2),y("li",{class:R(["documents"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[3]||(s[3]=B($((e=>u.value="documents"),["prevent"]),["space"])),onClick:s[4]||(s[4]=e=>u.value="documents")},Co,32)],2),y("li",{class:R(["files"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[5]||(s[5]=B($((e=>u.value="files"),["prevent"]),["space"])),onClick:s[6]||(s[6]=e=>u.value="files")},Vo,32)],2),y("li",{class:R(["proposals"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[7]||(s[7]=B($((e=>u.value="proposals"),["prevent"]),["space"])),onClick:s[8]||(s[8]=e=>u.value="proposals")},So,32)],2),y("li",{class:R(["tasks"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[9]||(s[9]=B($((e=>u.value="tasks"),["prevent"]),["space"])),onClick:s[10]||(s[10]=e=>u.value="tasks")},To,32)],2),y("li",{class:R(["activities"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[11]||(s[11]=B($((e=>u.value="activities"),["prevent"]),["space"])),onClick:s[12]||(s[12]=e=>u.value="activities")},Uo,32)],2),y("li",{class:R(["progress"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[13]||(s[13]=B($((e=>u.value="progress"),["prevent"]),["space"])),onClick:s[14]||(s[14]=e=>u.value="progress")},Io,32)],2),y("li",{class:R(["calculations"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[15]||(s[15]=B($((e=>u.value="calculations"),["prevent"]),["space"])),onClick:s[16]||(s[16]=e=>u.value="calculations")},Ao,32)],2),y("li",{class:R(["finance"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[17]||(s[17]=B($((e=>u.value="finance"),["prevent"]),["space"])),onClick:s[18]||(s[18]=e=>u.value="finance")},Fo,32)],2),y("li",{class:R(["report"===T(u)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[19]||(s[19]=B($((e=>u.value="report"),["prevent"]),["space"])),onClick:s[20]||(s[20]=e=>u.value="report")},Do,32)],2),Po])])])])]),"management"===T(u)?(_(),g("div",Oo,[y("div",Mo,[y("div",Eo,[y("div",$o,[y("div",Lo,[y("div",Ro,[No,y("div",Bo,[(_(!0),g(I,null,A(T(c).tags,((e,l)=>(_(),g("button",{key:l,class:"button is-selected is-light is-dark-outlined"},x(e),1)))),128))])])]),y("div",Ho,[y("div",zo,[Jo,y("div",{innerHTML:T(c).notes},null,8,Ko)])]),y("div",qo,[b(S,{project:T(a).params.id},null,8,["project"])]),y("div",Go,[y("div",Wo,[Zo,y("div",Qo,[(_(!0),g(I,null,A(T(c).sales_people_info,(e=>(_(),g("div",Yo,[y("div",Xo,[b(O),b(i,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),y("h3",ec,x(e.username??"N/A")+" "+x(e.last_name??""),1),y("p",lc,x(e.role),1),y("div",ac,[b(m,{color:"primary",raised:""},{default:k((()=>[w(" View Profile ")])),_:1})])])])))),256))])])])])]),y("div",tc,["management"===T(u)?(_(),g("div",sc)):V("",!0),b(M,{project:T(a).params.id},null,8,["project"]),b(E,{projectId:T(a).params.id},null,8,["projectId"])])])])):V("",!0),"files"==T(u)?(_(),g("div",ic,[b(L,{projectId:T(a).params.id,files:T(c).uploaded_files,"onUpdate:onUploadFile":v},null,8,["projectId","files"])])):V("",!0),"documents"===T(u)?(_(),g("div",nc,[b(N,{leadId:T(a).params.id,uploaded_files:T(c).uploaded_files,getProjectInfo:v},null,8,["leadId","uploaded_files"])])):V("",!0),"proposals"===T(u)?(_(),g("div",oc,[y("div",cc,[y("div",dc,[y("ul",null,[y("li",{class:R(["childProposals"===T(r)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[21]||(s[21]=B($((e=>r.value="childProposals"),["prevent"]),["space"])),onClick:s[22]||(s[22]=e=>r.value="childProposals")},uc,32)],2),y("li",{class:R(["groupedProposals"===T(r)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[23]||(s[23]=B($((e=>r.value="groupedProposals"),["prevent"]),["space"])),onClick:s[24]||(s[24]=e=>{r.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await t.get(`/api/attachment/by-object/${a.params.id}/?type=${e}`);C.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},rc,32)],2)])])]),"childProposals"==T(r)?(_(),g("div",pc,[b(Le,{"lead-id":T(a).params.id,onUpdateCompany:v},null,8,["lead-id"])])):V("",!0),"groupedProposals"==T(r)?(_(),g("div",mc,[b(H,{"doc-type":"proposal_formats","object-id":T(a).params.id},null,8,["object-id"])])):V("",!0)])):V("",!0),"activities"===T(u)?(_(),g("div",vc,[b(z,{jobId:T(a).params.id},null,8,["jobId"])])):V("",!0),"progress"===T(u)?(_(),g("div",fc,[b(J,{object:T(a).params.id,type:"job"},null,8,["object"])])):V("",!0),"finance"===T(u)?(_(),g("div",hc,[b(K)])):V("",!0),"activityLogs"===T(u)?(_(),g("div",_c,[b(q,{object_id:T(a).params.id||T(c).id,object_type:"lead"},null,8,["object_id"])])):V("",!0),"report"===T(u)?(_(),g("div",gc,[b(G)])):V("",!0),"tasks"===T(u)?(_(),g("div",yc,[b(W,{projectID:T(a).params.id},null,8,["projectID"])])):V("",!0),"calculations"===T(u)?(_(),g("div",bc,[y("div",kc,[y("div",wc,[y("ul",null,[y("li",{class:R(["excel"===T(d)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[25]||(s[25]=B($((e=>d.value="excel"),["prevent"]),["space"])),onClick:s[26]||(s[26]=e=>d.value="excel")},xc,32)],2),y("li",{class:R(["custom"===T(d)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:s[27]||(s[27]=B($((e=>d.value="custom"),["prevent"]),["space"])),onClick:s[28]||(s[28]=e=>d.value="custom")},jc,32)],2)])])]),"excel"==T(d)?(_(),g("div",Cc,[b(Z,{objectId:T(a).params.id},null,8,["objectId"])])):V("",!0),"custom"==T(d)?(_(),g("div",Vc,[b(Q,{objectId:T(a).params.id},null,8,["objectId"])])):V("",!0)])):V("",!0)])])]),T(o)?(_(),U(Y,{key:0,addUpdateLeadModal:T(o),leadId:T(n),"onUpdate:modalHandler":s[29]||(s[29]=e=>o.value=!1),"onUpdate:OnSuccess":v},null,8,["addUpdateLeadModal","leadId"])):V("",!0)])}}});export{Sc as _};
