import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-3f69639c.js";import{_ as a}from"./AddUpdateUser-ec463e09.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-fb687bfd.js";import{_ as l}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-d4747cf4.js";import{_ as t}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-aecadf5e.js";import{_ as i,a as r}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-91905996.js";import{_ as n}from"./VIconBox.vue_vue_type_style_index_0_lang-2559b615.js";import{u as o}from"./useAPI-181c0830.js";import{u as d}from"./useNotyf-d9865db3.js";import{f as c,b as u,y as p,r as v,o as m,C as f,D as y,E as k,F as _,G as h,U as b,m as g,Q as w,R as x,S as T,A as j,T as I,B as C,K as D,N as M,O as A,P,x as U,I as H,H as N,V as K,J as O}from"./index-d591590e.js";import{_ as V}from"./JobTodos.vue_vue_type_style_index_0_lang-3c7beb4d.js";import{u as W}from"./viewWrapper-29e6a588.js";import{b as L}from"./route-block-83d24a4e.js";import{_ as S}from"./VAvatar.vue_vue_type_style_index_0_lang-67084f5f.js";import{F as q}from"./FullCalendar-d3e9d71e.js";import{i as R}from"./index-60d43df9.js";const z=e=>(w("data-v-68b0ea5a"),e=e(),x(),e),F={class:"lifestyle-dashboard lifestyle-dashboard-v3"},$={class:"columns is-multiline is-flex-tablet-p"},E={class:"column is-12"},J={class:"health-tile"},Q={class:"tile-head"},B=z((()=>k("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1))),X=z((()=>k("h4",null,null,-1))),Z={class:"dark-inverted"},G=z((()=>k("p",null,"Tasks assigned within 30 Days duration",-1))),Y={class:"column is-12"},ee={class:"health-tile"},ae={class:"tile-head"},se=z((()=>k("i",{class:"fas fa-calendar-day","aria-hidden":"true"},null,-1))),le={class:"dark-inverted"},te=z((()=>k("p",null,"Tasks are currently active and worker notified",-1))),ie={class:"column is-12"},re={class:"health-tile"},ne={class:"tile-head"},oe=z((()=>k("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1))),de=z((()=>k("h4",null,null,-1))),ce={class:"dark-inverted"},ue=z((()=>k("p",null,"Tasks pending and worker need to done.",-1))),pe={class:"column is-12"},ve={class:"health-tile"},me={class:"tile-head"},fe=z((()=>k("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1))),ye=z((()=>k("h4",null,null,-1))),ke={class:"dark-inverted"},_e=z((()=>k("p",null,"The manager confirmed tasks are completed by worker.",-1))),he=T(c({__name:"WorkerTasksStats",props:{user:{type:String,required:!0}},setup(e){const a=e,s=u(),l=d(),t=o();p(),v({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"});const i=v({}),r=async(e=!1,a="")=>{try{const s=await t.get(`/api/task/worker-today/${a}/`);i.value=s.data,e&&l.green("Tasks list Refreshed")}catch(s){console.log(s)}};return m((()=>{a.user?r(!1,a.user):r(!1,s.user.id)})),(e,a)=>{const s=n;return f(),y("div",F,[k("div",$,[k("div",E,[k("div",J,[k("div",Q,[_(s,{color:"primary"},{default:h((()=>[B])),_:1}),X]),k("div",null,[k("h3",Z," Total Tasks ("+b(g(i)?.stats?.pending+g(i)?.stats?.active+g(i)?.stats?.completed)+") ",1),G])])]),k("div",Y,[k("div",ee,[k("div",ae,[_(s,{color:"primary"},{default:h((()=>[se])),_:1})]),k("div",null,[k("h3",le," Active Tasks ("+b(g(i)?.stats?.active?g(i)?.stats?.active:0)+") ",1),te])])]),k("div",ie,[k("div",re,[k("div",ne,[_(s,{color:"primary"},{default:h((()=>[oe])),_:1}),de]),k("div",null,[k("h3",ce," Pending Tasks ("+b(g(i)?.stats?.pending?g(i)?.stats?.pending:0)+") ",1),ue])])]),k("div",pe,[k("div",ve,[k("div",me,[_(s,{color:"primary"},{default:h((()=>[fe])),_:1}),ye]),k("div",null,[k("h3",ke," Completed Tasks ("+b(g(i)?.stats?.completed?g(i)?.stats?.completed:0)+") ",1),_e])])])])])}}}),[["__scopeId","data-v-68b0ea5a"]]),be={class:"profile-wrapper"},ge={class:"profile-body"},we={class:"columns is-multiline"},xe={key:0,class:"column is-12"},Te={class:"columns is-multiline"},je={class:"column is-8"},Ie={class:"profile-card"},Ce={class:"profile-card-section"},De={class:"section-title"},Me=k("h4",null,"About",-1),Ae=k("i",{"aria-hidden":"true",class:"lnil lnil-pencil"},null,-1),Pe=k("div",{class:"section-content"},[k("p",{class:"description"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Falli igitur possumus. Praeteritis, inquit, gaudeo. Duo Reges: constructio interrete. Idemne, quod iucunde? Quis enim redargueret? Non semper, inquam; Quid nunc honeste dicit? Eam tum adesse, cum dolor omnis absit; Negat enim summo bono afferre incrementum diem. ")],-1),Ue={class:"profile-card-section"},He={class:"section-title"},Ne=k("h4",null,"Details",-1),Ke=k("i",{"aria-hidden":"true",class:"lnil lnil-pencil"},null,-1),Oe={class:"section-content"},Ve={class:"experience-wrapper"},We={class:"experience-item"},Le=k("i",{class:"fas fa-envelope","aria-hidden":"true"},null,-1),Se={class:"meta"},qe=k("span",{class:"dark-inverted"},"Email",-1),Re={class:"experience-item"},ze=k("i",{class:"fas fa-phone-alt","aria-hidden":"true"},null,-1),Fe={class:"meta"},$e=k("span",{class:"dark-inverted"},"Phone",-1),Ee={class:"experience-item"},Je=k("i",{class:"fas fa-home","aria-hidden":"true"},null,-1),Qe={class:"meta"},Be=k("span",{class:"dark-inverted"},"Address",-1),Xe={class:"experience-item"},Ze=k("i",{class:"fas fa-map-marker","aria-hidden":"true"},null,-1),Ge={class:"meta"},Ye=k("span",{class:"dark-inverted"},"City",-1),ea={class:"more-button has-text-centered"},aa={class:"column is-4"},sa={class:"profile-card"},la=k("div",{class:"profile-card-section no-padding"},[k("div",{class:"section-title"},[k("h4",null,"Tasks Stats")])],-1),ta={key:1,class:"column is-12"},ia={key:2,class:"column is-12"},ra=c({__name:"WorkerProfileInfo",props:{userId:{}},emits:["update:close-modal-handler","update:action-update-handler"],setup(e,{emit:t}){const i=e;W().setPageTitle("Profile"),j((()=>({title:"Profile Ibex User  "}))),I();const r=o(),d=u(),c=v(!1),p=v(!1),w=v(""),x=v(!1),T=v("personal"),U=v({username:"",email:"",password:"",is_sentMail:!1,status:"",role:"",phoneNumber:"",avatar:"",supplier:"",address:"",city:"",country:"",postalCode:"",latitude:"",longitude:""}),H=async()=>{try{x.value=!0;const e=await r.get(`/api/users/${i.userId?i.userId:d.user.id}/`);U.value=e.data}catch(e){console.error(e)}finally{x.value=!1}};return m((()=>{console.log("user data ",d.user),d.user.id&&H()})),(e,t)=>{const r=C("RouterLink"),o=n,u=P,v=V,m=he,x=l,j=a,I=s;return f(),y("div",be,[k("div",ge,[k("div",we,["personal"==g(T)?(f(),y("div",xe,[k("div",Te,[k("div",je,[k("div",Ie,[k("div",Ce,[k("div",De,[Me,_(r,{to:"/sidebar/layouts/profile-edit"},{default:h((()=>[Ae])),_:1})]),Pe]),k("div",Ue,[k("div",He,[Ne,_(r,{to:"/sidebar/layouts/profile-edit-experience"},{default:h((()=>[Ke])),_:1})]),k("div",Oe,[k("div",Ve,[k("div",We,[_(o,{size:"medium",color:"blue",rounded:""},{default:h((()=>[Le])),_:1}),k("div",Se,[qe,k("span",null,b(g(U).email),1)])]),k("div",Re,[_(o,{size:"medium",color:"blue",rounded:""},{default:h((()=>[ze])),_:1}),k("div",Fe,[$e,k("span",null,b(g(U).phoneNumber),1)])]),k("div",Ee,[_(o,{size:"medium",color:"blue",rounded:""},{default:h((()=>[Je])),_:1}),k("div",Qe,[Be,k("span",null,b(g(U).address??"N/A"),1)])]),k("div",Xe,[_(o,{size:"medium",color:"blue",rounded:""},{default:h((()=>[Ze])),_:1}),k("div",Ge,[Ye,k("span",null,b(g(U).city??"N/A"),1)])])]),k("div",ea,[_(u,{light:""},{default:h((()=>[D(" View More ")])),_:1})])])])])]),k("div",aa,[_(v,{user:i.userId},null,8,["user"]),k("div",sa,[la,_(m,{user:i.userId},null,8,["user"])])])])])):M("",!0),"activities"==g(T)?(f(),y("div",ta,[_(x,{"get-user-activities":!0})])):M("",!0),"todo"==g(T)?(f(),y("div",ia,[_(v,{user:i.userId},null,8,["user"])])):M("",!0)])]),g(c)?(f(),A(j,{key:0,"is-modal-open":g(c),"user-role":"admin","user-id":g(d).user.id,"onUpdate:closeModalHandler":t[0]||(t[0]=e=>c.value=!1),"onUpdate:actionUpdateHandler":H},null,8,["is-modal-open","user-id"])):M("",!0),g(p)?(f(),A(I,{key:1,isModalOpen:g(p),userId:g(w),"onUpdate:closeModalHandler":t[1]||(t[1]=e=>p.value=!1),"onUpdate:actionUpdateHandler":H},null,8,["isModalOpen","userId"])):M("",!0)])}}});"function"==typeof L&&L(ra);const na={class:"lifestyle-dashboard lifestyle-dashboard-v3"},oa={class:"illustration-header"},da={class:"p-4"},ca={class:"header-meta"},ua={class:"summary-stats"},pa={class:"summary-stat"},va=k("span",null,"Status",-1),ma={class:"summary-stat"},fa=k("span",null,"Email",-1),ya={class:"summary-stat h-hidden-tablet-p"},ka=k("span",null,"Mail notify ",-1),_a={class:"summary-stat h-hidden-tablet-p"},ha=k("span",null,"Password ",-1),ba={class:"columns is-multiline"},ga={class:"tabs-wrapper column is-12"},wa={class:"tabs-inner"},xa={class:"tabs is-toggle"},Ta=[k("span",null,"Profile",-1)],ja=[k("span",null,"Tasks",-1)],Ia=[k("span",null,"Activities",-1)],Ca=k("li",{class:"tab-naver"},null,-1),Da={key:0,class:"columns is-multiline"},Ma={key:1,class:"columns is-multiline"},Aa={class:"tabs-wrapper"},Pa={class:"tabs-inner"},Ua={class:"tabs is-boxed"},Ha=[k("span",null,"Calendar View",-1)],Na=[k("span",null,"Cards View",-1)],Ka=[k("span",null,"Today Tasks",-1)],Oa=[k("span",null,"Chronic View",-1)],Va=k("li",{class:"tab-naver"},null,-1),Wa={key:0,class:"column is-12"},La={key:1,class:"column is-12"},Sa={key:2,class:"column is-12"},qa=["onClick"],Ra={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},za={style:{"padding-right":"10px",color:"#f1f1f1"}},Fa={key:3,class:"column is-12"},$a={key:2,class:"columns is-multiline"},Ea={class:"column is-12"},Ja=c({__name:"IbexWorkerProfile",setup(n){const c=u(),w=d(),x=o(),T=p(),j=v([]);U();const I=v(""),C=v(!1),P=v("calendar"),V=v("profile"),W=v(""),L=v(!1),z=v({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});v(!1),v("all"),v("");const F=v(!1),$=v([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),E=v([]),J=v([]),Q=v([]),B=v({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),X=v({plugins:[R],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),Z=async()=>{try{F.value=!0;const e=await x.get(`/api/users/${T.params.id?T.params.id:c.user.id}/`);z.value=e.data,F.value=!1}catch(e){console.log(e)}},G=v({}),Y=v(!1),ee=v({});return m((async()=>{await Z(),await(async()=>{try{const e=await x.get(`/api/task/${T.params.id?T.params.id:c.user.id}/worker-tasks/`);$.value=e.data,console.log("worker tasks",$.value)}catch(e){$.value=[]}})(),(async(e=!1)=>{try{const a=await x.get(`/api/task/worker-today/${T.params.id?T.params.id:c.user.id}/`);ee.value=a.data,e&&w.green("Tasks list Refreshed")}catch(a){console.log(a)}})(),j.value=$.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:B[e.status],status:e.status,project:e.project}))),Q.value=$.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:B[e.project.status]}))),E.value=Q.value,J.value=j.value,X.value={...X.value,resources:E.value,events:J.value},console.log("tasks",X.value.events,"resources",X.value.resources)})),(n,o)=>{const d=S,c=ra,u=i,p=r,v=t,m=l,w=s,x=a,j=e;return f(),y(K,null,[k("div",na,[k("div",oa,[k("div",da,[_(d,{size:"xl",squared:"",picture:g(z).avatar,alt:""},null,8,["picture"])]),k("div",ca,[k("h3",null,[D(b(g(z)?.username)+" ",1),k("i",{onClick:o[0]||(o[0]=e=>((e="")=>{I.value=e,C.value=!0})(g(z).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),k("div",ua,[k("div",pa,[va,k("span",null,b(g(z)?.is_active?"Active":" In-Active"),1)]),k("div",ma,[fa,k("span",null,b(g(z)?.email),1)]),k("div",ya,[ka,k("span",null,b(g(z).is_sentMail?"On":"Off"),1)]),k("div",_a,[ha,k("span",null,[k("i",{onClick:o[1]||(o[1]=e=>{return a=g(z).id,W.value=a,void(L.value=!0);var a}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),k("div",ba,[k("div",ga,[k("div",wa,[k("div",xa,[k("ul",null,[k("li",{class:H(["profile"===g(V)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[2]||(o[2]=N(O((e=>V.value="profile"),["prevent"]),["space"])),onClick:o[3]||(o[3]=e=>V.value="profile")},Ta,32)],2),k("li",{class:H(["tasks"===g(V)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[4]||(o[4]=N(O((e=>V.value="tasks"),["prevent"]),["space"])),onClick:o[5]||(o[5]=e=>V.value="tasks")},ja,32)],2),k("li",{class:H(["activities"===g(V)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[6]||(o[6]=N(O((e=>V.value="activities"),["prevent"]),["space"])),onClick:o[7]||(o[7]=e=>V.value="activities")},Ia,32)],2),Ca])])])])]),"profile"==g(V)?(f(),y("div",Da,[_(c,{userId:g(T).params.id},null,8,["userId"])])):M("",!0),"tasks"==g(V)?(f(),y("div",Ma,[k("div",Aa,[k("div",Pa,[k("div",Ua,[k("ul",null,[k("li",{class:H(["calendar"===g(P)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[8]||(o[8]=N(O((e=>P.value="calendar"),["prevent"]),["space"])),onClick:o[9]||(o[9]=e=>P.value="calendar")},Ha,32)],2),k("li",{class:H(["cards"===g(P)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[10]||(o[10]=N(O((e=>P.value="cards"),["prevent"]),["space"])),onClick:o[11]||(o[11]=e=>P.value="cards")},Na,32)],2),k("li",{class:H(["today"===g(P)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[12]||(o[12]=N(O((e=>P.value="today"),["prevent"]),["space"])),onClick:o[13]||(o[13]=e=>P.value="today")},Ka,32)],2),k("li",{class:H(["chronic"===g(P)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[14]||(o[14]=N(O((e=>P.value="chronic"),["prevent"]),["space"])),onClick:o[15]||(o[15]=e=>P.value="chronic")},Oa,32)],2),Va])])])]),"chronic"==g(P)?(f(),y("div",Wa,[_(u,{userId:g(T).params.id},null,8,["userId"])])):M("",!0),"cards"==g(P)?(f(),y("div",La,[_(p,{workerId:g(T).params.id},null,8,["workerId"])])):M("",!0),"calendar"==g(P)?(f(),y("div",Sa,[_(g(q),{options:g(X)},{eventContent:h((e=>[k("div",{onClick:a=>{return s=e.event.extendedProps,G.value=s,console.log("dataa",s),void(Y.value=!0);var s},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},[k("p",Ra,b(e.event.title),1),k("p",za,b(new Date(e.event.start).toDateString())+" to "+b(new Date(e.event.end).toDateString()),1)],8,qa)])),_:1},8,["options"])])):M("",!0),"today"==g(P)?(f(),y("div",Fa,[_(v,{workerId:g(T).params.id},null,8,["workerId"])])):M("",!0)])):M("",!0),"activities"==g(V)?(f(),y("div",$a,[k("div",Ea,[_(m,{user:g(T).params.id},null,8,["user"])])])):M("",!0),g(L)?(f(),A(w,{key:3,isModalOpen:g(L),userId:g(W),"onUpdate:closeModalHandler":o[16]||(o[16]=e=>L.value=!1)},null,8,["isModalOpen","userId"])):M("",!0),g(C)?(f(),A(x,{key:4,isModalOpen:g(C),userId:g(I),userRole:"worker","onUpdate:closeModalHandler":o[17]||(o[17]=e=>C.value=!1),"onUpdate:actionUpdateHandler":Z},null,8,["isModalOpen","userId"])):M("",!0)]),g(Y)?(f(),A(j,{key:0,taskDetailModal:g(Y),taskData:g(G),"onUpdate:modalHandler":o[18]||(o[18]=e=>Y.value=!1)},null,8,["taskDetailModal","taskData"])):M("",!0)],64)}}});export{Ja as _};
