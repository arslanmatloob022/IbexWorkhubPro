import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-4f8941c5.js";import{_ as a}from"./AddUpdateUser-5ad4d323.js";import{_ as s}from"./SweetAlert.vue_vue_type_style_index_0_lang-be4f1016.js";import{_ as l}from"./VDropdown.vue_vue_type_style_index_0_lang-f86fb457.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-e8ba677f.js";import{_ as i}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-9f4d4498.js";import{f as r,b as n,r as o,$ as u,o as d,C as c,D as p,E as m,F as v,G as _,L as f,X as y,m as h,k as g,I as w,V as b,W as j,aS as k,O as x,N as C,P as U,U as A,A as V,T as S}from"./index-a193ae10.js";import{_ as O}from"./VControl-06fd39be.js";import{_ as M,a as P}from"./search-6-dark-6c9b195a.js";import{u as I}from"./useAPI-8f659b88.js";import{u as H}from"./useNotyf-d6803850.js";import{u as D}from"./viewWrapper-52eb63df.js";import{b as E}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-ecce19e3.js";import"./VIcon.vue_vue_type_script_setup_true_lang-8d8bf880.js";import"./VField.vue_vue_type_script_setup_true_lang-2474e8b7.js";import"./VLabel.vue_vue_type_script_setup_true_lang-9a196888.js";import"./useVFieldContext-e29f0047.js";import"./VInput.vue_vue_type_script_setup_true_lang-f887b322.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-db49ec50.js";import"./VFilePond.vue_vue_type_script_lang-42795dbf.js";import"./useSupportElement-d48da84e.js";import"./useDropdown-35affd87.js";import"./notyf-aa8db5be.js";import"./useThemeColors-b129a6a1.js";const N={class:"tile-grid-toolbar"},L={class:"buttons"},T=m("span",{class:"icon"},[m("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),z=m("span",null,"Admin",-1),F={class:"tile-grid tile-grid-v1"},$=m("img",{class:"light-image",src:M,alt:""},null,-1),W=m("img",{class:"dark-image",src:P,alt:""},null,-1),X={class:"tile-grid-item"},R={class:"tile-grid-item-inner"},B={class:"meta"},G={class:"dark-inverted"},J={style:{"text-transform":"capitalize"}},q=["onClick"],K=[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-lock"})],-1),m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit user")],-1)],Q=["onClick"],Y=[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-share"})],-1),m("div",{class:"meta"},[m("span",null,"Password"),m("span",null,"Change password")],-1)],Z=m("hr",{class:"dropdown-divider"},null,-1),ee=["onClick"],ae=[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),m("div",{class:"meta"},[m("span",null,"Delete"),m("span",null,"Delete from list")],-1)],se=r({__name:"AdminsList",setup(r){const V=I(),S=H();n();const M=o(""),P=o(!1),D=o(""),E=o(""),se=o(!1),le=o({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),te=o([{username:"",last_name:"",email:"",password:"",status:"",role:"admin",phoneNumber:"",avatar:null}]),ie=u((()=>M.value?te.value.filter((e=>e.username.match(new RegExp(M.value,"i"))||e.email.match(new RegExp(M.value,"i")))):te.value));o(0);const re=async()=>{try{P.value=!0;const e=await V.get("/api/users/by-role/admin/",{});te.value=e.data}catch(e){console.log(e)}finally{P.value=!1}},ne=async()=>{try{P.value=!0;await V.delete(`/api/users/${E.value}/`,{});re(),S.success("Admin deleted successfully")}catch(e){console.error(e),S.error("Error while deleting")}finally{le.value.isSweetAlertOpen=!1,P.value=!1}},oe=(e="")=>{D.value=e,se.value=!se.value},ue=o(!1);return d((()=>{re()})),(r,n)=>{const o=O,u=U,d=i,V=t,S=l,I=a,H=s;return c(),p("div",null,[m("div",N,[v(o,{icon:"feather:search"},{default:_((()=>[f(m("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>g(M)?M.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[y,h(M)]])])),_:1}),m("div",L,[v(u,{onClick:n[1]||(n[1]=e=>oe()),color:"primary",raised:""},{default:_((()=>[T,z])),_:1})])]),m("div",F,[v(d,{class:w([0!==h(ie).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:_((()=>[$,W])),_:1},8,["class"]),v(k,{name:"list",tag:"div",class:"columns is-multiline"},{default:_((()=>[(c(!0),p(b,null,j(h(ie),((e,a)=>(c(),p("div",{key:a,class:"column is-6"},[m("div",X,[m("div",R,[v(V,{picture:e.avatar,color:"primary",initials:e.username.slice(0,2),size:"medium"},null,8,["picture","initials"]),m("div",B,[m("span",G,A(e.username)+" "+A(e.last_name?e.last_name:""),1),m("span",J,A(e.role),1)]),v(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:_((()=>[m("a",{onClick:a=>oe(e.id),role:"menuitem",class:"dropdown-item is-media"},K,8,q),m("a",{onClick:a=>{return s=e.id,D.value=s,void(ue.value=!0);var s},role:"menuitem",class:"dropdown-item is-media"},Y,8,Q),Z,m("a",{onClick:a=>{return s=e,E.value=s.id,void(le.value={title:`Delete ${s.username}?`,subtitle:"After deleting this admin you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var s},role:"menuitem",class:"dropdown-item is-media"},ae,8,ee)])),_:2},1024)])])])))),128))])),_:1})]),h(se)?(c(),x(I,{key:0,"is-modal-open":h(se),"user-role":"admin","user-id":h(D),"onUpdate:closeModalHandler":n[2]||(n[2]=e=>se.value=!1),"onUpdate:actionUpdateHandler":re},null,8,["is-modal-open","user-id"])):C("",!0),h(le).isSweetAlertOpen?(c(),x(H,{key:1,loading:h(P),isSweetAlertOpen:h(le).isSweetAlertOpen,title:h(le).title,subtitle:h(le).subtitle,btntext:h(le).btntext,onConfirm:ne,onCancel:()=>h(le).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0),h(ue)?(c(),x(e,{key:2,isModalOpen:h(ue),userId:h(D),"onUpdate:closeModalHandler":n[3]||(n[3]=e=>ue.value=!1),"onUpdate:actionUpdateHandler":re},null,8,["isModalOpen","userId"])):C("",!0)])}}}),le={class:"profile-wrapper"},te={class:"profile-header has-text-centered"},ie={class:"title is-4 is-narrow is-thin"},re={class:"light-text"},ne={class:"profile-stats"},oe={class:"profile-stat"},ue={style:{"text-transform":"capitalize"}},de=m("div",{class:"separator"},null,-1),ce={class:"profile-stat"},pe=m("i",{"aria-hidden":"true",class:"lnil lnil-phone"},null,-1),me=m("div",{class:"separator"},null,-1),ve={class:"socials"},_e=[m("i",{"aria-hidden":"true",class:"fas fa-edit"},null,-1)],fe=[m("i",{"aria-hidden":"true",class:"fas fa-lock"},null,-1)],ye={class:"profile-body"},he={class:"columns"},ge={key:0,class:"column is-12"},we=r({__name:"profile",setup(s){D().setPageTitle("Profile"),V((()=>({title:"Profile Ibex-User  "}))),S();const l=I(),i=n(),r=o(!1),u=o(!1),_=o(""),f=o(!1),y=o({username:"",email:"",password:"",is_sentMail:!1,status:"",role:"",phoneNumber:"",avatar:"",supplier:""}),g=async()=>{try{f.value=!0;const e=await l.get(`/api/users/${i.user.id}/`);y.value=e.data}catch(e){console.error(e)}finally{f.value=!1}};return d((()=>{console.log("user data ",i.user),i.user.id&&g()})),(s,l)=>{const n=t,o=se,d=a,f=e;return c(),p("div",le,[m("div",te,[v(n,{size:"xl",picture:h(y).avatar},null,8,["picture"]),m("h3",ie,A(h(y)?.username),1),m("p",re,A(h(y)?.email?h(y)?.email:""),1),m("div",ne,[m("div",oe,[m("span",ue,A(h(y)?.role),1)]),de,m("div",ce,[pe,m("span",null,A(h(y)?.phoneNumber),1)]),me,m("div",ve,[m("a",{onClick:l[0]||(l[0]=e=>r.value=!h(r))},_e),m("a",{onClick:l[1]||(l[1]=e=>{return a=h(y).id,_.value=a,void(u.value=!0);var a})},fe)])])]),m("div",ye,[m("div",he,["admin"==h(i).user.role?(c(),p("div",ge,[v(o,{class:"mb-3"})])):C("",!0)])]),h(r)?(c(),x(d,{key:0,"is-modal-open":h(r),"user-role":"admin","user-id":h(i).user.id,"onUpdate:closeModalHandler":l[2]||(l[2]=e=>r.value=!1),"onUpdate:actionUpdateHandler":g},null,8,["is-modal-open","user-id"])):C("",!0),h(u)?(c(),x(f,{key:1,isModalOpen:h(u),userId:h(_),"onUpdate:closeModalHandler":l[3]||(l[3]=e=>u.value=!1),"onUpdate:actionUpdateHandler":g},null,8,["isModalOpen","userId"])):C("",!0)])}}});"function"==typeof E&&E(we);export{we as default};
