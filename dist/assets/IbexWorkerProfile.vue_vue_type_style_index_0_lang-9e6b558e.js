import{_ as a}from"./AddUpdateUser-b4c2c949.js";import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-dcd886aa.js";import{_ as s}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-c028091c.js";import{_ as t}from"./WorkerTasks-953eeb23.js";import{_ as l}from"./VIconBox.vue_vue_type_style_index_0_lang-ed4d0825.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-c1d7da00.js";import{e as i,N as n,r as o,t as d,o as c,y as u,z as p,C as v,A as m,l as h,D as y,J as k,B as f,O as _,I as b,S as w,Y as g,P as j,H as x,K as T}from"./index-1c9998f2.js";import{F as C}from"./FullCalendar-8f8b2ef4.js";import{i as I}from"./index-f52ed8ce.js";import{u as M}from"./useAPI-a1408a11.js";import{u as A}from"./useNotyf-431b7a11.js";import{u as D}from"./userSession-b81fab96.js";const P={class:"lifestyle-dashboard lifestyle-dashboard-v3"},N={class:"illustration-header"},O={class:"p-4"},U={class:"header-meta"},H={class:"summary-stats"},K={class:"summary-stat"},S=v("span",null,"Role",-1),V={class:"summary-stat"},W=v("span",null,"Status",-1),F={class:"summary-stat"},R=v("span",null,"Phone",-1),$={class:"summary-stat"},q=v("span",null,"Email",-1),z={class:"summary-stat h-hidden-tablet-p"},B=v("span",null,"Mail notify ",-1),L={class:"summary-stat h-hidden-tablet-p"},Y=v("span",null,"Password ",-1),E={class:"columns is-multiline is-flex-tablet-p"},J={class:"column is-3"},G={class:"health-tile"},Q={class:"tile-head"},X=v("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1),Z={class:"dark-inverted"},aa=v("h3",{class:"dark-inverted"},"Total Tasks",-1),ea=v("p",null,"Number of tasks assigned within 30 Days duration",-1),sa={class:"column is-3"},ta={class:"health-tile"},la={class:"tile-head"},ra=v("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ia={class:"dark-inverted"},na=v("h3",{class:"dark-inverted"},"Active Tasks",-1),oa=v("p",null,"Tasks are currently active and worker notified",-1),da={class:"column is-3"},ca={class:"health-tile"},ua={class:"tile-head"},pa=v("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1),va={class:"dark-inverted"},ma=v("h3",{class:"dark-inverted"},"Pending Tasks",-1),ha=v("p",null,"Tasks that are pending and worker need to done.",-1),ya={class:"column is-3"},ka={class:"health-tile"},fa={class:"tile-head"},_a=v("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1),ba={class:"dark-inverted"},wa=v("h3",{class:"dark-inverted"},"Completed Tasks",-1),ga=v("p",null," The worker has done his job on these tasks and assure by the manager ",-1),ja={class:"columns is-multiline"},xa={class:"list-flex-toolbar is-reversed"},Ta={class:"tabs-inner"},Ca={class:"tabs is-boxed"},Ia=[v("span",null,"Cards View",-1)],Ma=[v("span",null,"Calendar View",-1)],Aa=[v("span",null,"Today Tasks",-1)],Da=v("li",{class:"tab-naver"},null,-1),Pa={class:"column is-12"},Na={key:0,class:"column is-12"},Oa={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},Ua={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},Ha={style:{"margin-top":"8px","padding-right":"10px"}},Ka={key:1,class:"column is-12"},Sa=i({__name:"IbexWorkerProfile",setup(i){const Sa=D(),Va=A(),Wa=M(),Fa=n(),Ra=o([]);d();const $a=o(""),qa=o(!1),za=o("cards"),Ba=o(""),La=o(!1),Ya=o({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});o(!1),o("all"),o("");const Ea=o(!1),Ja=o([]),Ga=o([]),Qa=o([]),Xa=o([]),Za=o({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),ae=o({plugins:[I],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),ee=async()=>{try{Ea.value=!0;const a=await Wa.get(`/api/users/${Fa.params.id?Fa.params.id:Sa.user.id}`);Ya.value=a.data,Ea.value=!1}catch(a){console.log(a)}},se=o({});return c((async()=>{await ee(),await(async()=>{try{const a=await Wa.get(`/api/task/${Fa.params.id?Fa.params.id:Sa.user.id}/worker-tasks/`);Ja.value=a.data,console.log("worker tasks",Ja.value)}catch(a){Ja.value=[]}})(),(async(a=!1)=>{try{const e=await Wa.get(`/api/task/worker-today/${Fa.params.id?Fa.params.id:Sa.user.id}/`);se.value=e.data,a&&Va.green("Tasks list Refreshed")}catch(e){console.log(e)}})(),Ra.value=Ja.value.map((a=>({id:a.id,resourceId:a.project.id,start:a.startDate,end:a.endDate,title:a.title,color:a.color,description:a.description,workers:a.workers,borderColor:Za[a.status],status:a.status}))),Xa.value=Ja.value.map((a=>({id:a.project.id,start:a.project.startDate,end:a.project.endDate,title:a.project.title,address:a.project.address,status:a.project.status,color:Za[a.project.status]}))),Ga.value=Xa.value,Qa.value=Ra.value,ae.value={...ae.value,resources:Ga.value,events:Qa.value},console.log("tasks",ae.value.events,"resources",ae.value.resources)})),(i,n)=>{const o=r,d=l,c=t,I=s,M=e,A=a;return u(),p("div",P,[v("div",N,[v("div",O,[m(o,{size:"xl",squared:"",picture:h(Ya).avatar,alt:""},null,8,["picture"])]),v("div",U,[v("h3",null,[y(k(h(Ya)?.username)+" ",1),v("i",{onClick:n[0]||(n[0]=a=>((a="")=>{$a.value=a,qa.value=!0})(h(Ya).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),v("div",H,[v("div",K,[S,v("span",null,k(h(Ya)?.role),1)]),v("div",V,[W,v("span",null,k(h(Ya)?.is_active?"Active":" In-Active"),1)]),v("div",F,[R,v("span",null,k(h(Ya)?.phoneNumber?h(Ya)?.phoneNumber:"N/A"),1)]),v("div",$,[q,v("span",null,k(h(Ya)?.email),1)]),v("div",z,[B,v("span",null,k(h(Ya).is_sentMail?"On":"Off"),1)]),v("div",L,[Y,v("span",null,[v("i",{onClick:n[1]||(n[1]=a=>{return e=h(Ya).id,Ba.value=e,void(La.value=!0);var e}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),v("div",E,[v("div",J,[v("div",G,[v("div",Q,[m(d,{color:"primary"},{default:f((()=>[X])),_:1}),v("h4",null,[v("span",Z,k(h(se)?.stats?.pending+h(se)?.stats?.active+h(se)?.stats?.active),1)])]),aa,ea])]),v("div",sa,[v("div",ta,[v("div",la,[m(d,{color:"primary"},{default:f((()=>[ra])),_:1}),v("h4",null,[v("span",ia,k(h(se)?.stats?.active?h(se)?.stats?.active:0),1)])]),na,oa])]),v("div",da,[v("div",ca,[v("div",ua,[m(d,{color:"primary"},{default:f((()=>[pa])),_:1}),v("h4",null,[v("span",va,k(h(se)?.stats?.pending?h(se)?.stats?.pending:0),1)])]),ma,ha])]),v("div",ya,[v("div",ka,[v("div",fa,[m(d,{color:"primary"},{default:f((()=>[_a])),_:1}),v("h4",null,[v("span",ba,k(h(se)?.stats?.completed?h(se)?.stats?.completed:0),1)])]),wa,ga])])]),v("div",ja,[v("div",xa,[v("div",Ta,[v("div",Ca,[v("ul",null,[v("li",{class:_(["cards"===h(za)&&"is-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:n[2]||(n[2]=b(T((a=>za.value="cards"),["prevent"]),["space"])),onClick:n[3]||(n[3]=a=>za.value="cards")},Ia,32)],2),v("li",{class:_(["calendar"===h(za)&&"is-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:n[4]||(n[4]=b(T((a=>za.value="calendar"),["prevent"]),["space"])),onClick:n[5]||(n[5]=a=>za.value="calendar")},Ma,32)],2),v("li",{class:_(["today"===h(za)&&"is-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:n[6]||(n[6]=b(T((a=>za.value="today"),["prevent"]),["space"])),onClick:n[7]||(n[7]=a=>za.value="today")},Aa,32)],2),Da])])])]),w(v("div",Pa,[m(c,{workerId:h(Fa).params.id},null,8,["workerId"])],512),[[g,"cards"==h(za)]]),"calendar"==h(za)?(u(),p("div",Na,[m(h(C),{options:h(ae)},{eventContent:f((a=>[v("div",Oa,[v("p",Ua,k(a.event.title),1),v("div",null,[v("p",Ha,k(new Date(a.event.start).toDateString())+" to "+k(new Date(a.event.end).toDateString()),1)])])])),_:1},8,["options"])])):j("",!0),"today"==h(za)?(u(),p("div",Ka,[m(I,{workerId:h(Fa).params.id},null,8,["workerId"])])):j("",!0)]),h(La)?(u(),x(M,{key:0,isModalOpen:h(La),userId:h(Ba),"onUpdate:closeModalHandler":n[8]||(n[8]=a=>La.value=!1)},null,8,["isModalOpen","userId"])):j("",!0),h(qa)?(u(),x(A,{key:1,isModalOpen:h(qa),userId:h($a),userRole:"worker","onUpdate:closeModalHandler":n[9]||(n[9]=a=>qa.value=!1),"onUpdate:actionUpdateHandler":ee},null,8,["isModalOpen","userId"])):j("",!0)])}}});export{Sa as _};
