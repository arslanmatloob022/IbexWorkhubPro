import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-686f82b4.js";import{e as a,x as s,r as l,v as t,o as r,B as i,C as n,D as o,E as d,l as u,J as c,T as p,F as v,H as m,G as h,K as y,L as k,M as f,N as _,U as w,V as b,O as g,I as j}from"./index-9365d313.js";import{_ as x}from"./AddUpdateUser-925ad78b.js";import{_ as T}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-a7127d8d.js";import{_ as C}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-6799751e.js";import{_ as I}from"./WorkerTasks-8fc4dac8.js";import{_ as A}from"./VIconBox.vue_vue_type_style_index_0_lang-ee32d8c0.js";import{_ as M}from"./VAvatar.vue_vue_type_style_index_0_lang-ca94a31e.js";import{F as D}from"./FullCalendar-e05e7002.js";import{i as N}from"./index-f52ed8ce.js";import{u as P}from"./useAPI-3d65d3b0.js";import{u as U}from"./useNotyf-d77ff2b5.js";import{u as O}from"./userSession-69eb21ea.js";const V={class:"lifestyle-dashboard lifestyle-dashboard-v3"},S={class:"illustration-header"},W={class:"p-4"},H={class:"header-meta"},K={class:"summary-stats"},F={class:"summary-stat"},R=o("span",null,"Role",-1),L={class:"summary-stat"},$=o("span",null,"Status",-1),B={class:"summary-stat"},E=o("span",null,"Phone",-1),Y={class:"summary-stat"},q=o("span",null,"Email",-1),z={class:"summary-stat h-hidden-tablet-p"},G=o("span",null,"Mail notify ",-1),J={class:"summary-stat h-hidden-tablet-p"},Z=o("span",null,"Password ",-1),Q={class:"columns is-multiline is-flex-tablet-p"},X={class:"column is-3"},ee={class:"health-tile"},ae={class:"tile-head"},se=o("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1),le={class:"dark-inverted"},te=o("h3",{class:"dark-inverted"},"Total Tasks",-1),re=o("p",null,"Number of tasks assigned within 30 Days duration",-1),ie={class:"column is-3"},ne={class:"health-tile"},oe={class:"tile-head"},de=o("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ue={class:"dark-inverted"},ce=o("h3",{class:"dark-inverted"},"Active Tasks",-1),pe=o("p",null,"Tasks are currently active and worker notified",-1),ve={class:"column is-3"},me={class:"health-tile"},he={class:"tile-head"},ye=o("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1),ke={class:"dark-inverted"},fe=o("h3",{class:"dark-inverted"},"Pending Tasks",-1),_e=o("p",null,"Tasks that are pending and worker need to done.",-1),we={class:"column is-3"},be={class:"health-tile"},ge={class:"tile-head"},je=o("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1),xe={class:"dark-inverted"},Te=o("h3",{class:"dark-inverted"},"Completed Tasks",-1),Ce=o("p",null," The worker has done his job on these tasks and assure by the manager ",-1),Ie={class:"columns is-multiline"},Ae={class:"list-flex-toolbar is-reversed"},Me={class:"tabs-inner"},De={class:"tabs is-boxed"},Ne=[o("span",null,"Cards View",-1)],Pe=[o("span",null,"Calendar View",-1)],Ue=[o("span",null,"Today Tasks",-1)],Oe=o("li",{class:"tab-naver"},null,-1),Ve={class:"column is-12"},Se={key:0,class:"column is-12"},We={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},He=["onClick"],Ke={style:{"padding-right":"10px",color:"#f1f1f1"}},Fe={key:1,class:"column is-12"},Re=a({__name:"IbexWorkerProfile",setup(a){const Re=O(),Le=U(),$e=P(),Be=s(),Ee=l([]);t();const Ye=l(""),qe=l(!1),ze=l("cards"),Ge=l(""),Je=l(!1),Ze=l({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});l(!1),l("all"),l("");const Qe=l(!1),Xe=l([]),ea=l([]),aa=l([]),sa=l([]),la=l({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),ta=l({plugins:[N],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),ra=async()=>{try{Qe.value=!0;const e=await $e.get(`/api/users/${Be.params.id?Be.params.id:Re.user.id}`);Ze.value=e.data,Qe.value=!1}catch(e){console.log(e)}},ia=l({}),na=l(!1),oa=l({});return r((async()=>{await ra(),await(async()=>{try{const e=await $e.get(`/api/task/${Be.params.id?Be.params.id:Re.user.id}/worker-tasks/`);Xe.value=e.data,console.log("worker tasks",Xe.value)}catch(e){Xe.value=[]}})(),(async(e=!1)=>{try{const a=await $e.get(`/api/task/worker-today/${Be.params.id?Be.params.id:Re.user.id}/`);oa.value=a.data,e&&Le.green("Tasks list Refreshed")}catch(a){console.log(a)}})(),Ee.value=Xe.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:la[e.status],status:e.status}))),sa.value=Xe.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:la[e.project.status]}))),ea.value=sa.value,aa.value=Ee.value,ta.value={...ta.value,resources:ea.value,events:aa.value},console.log("tasks",ta.value.events,"resources",ta.value.resources)})),(a,s)=>{const l=M,t=A,r=I,N=C,P=T,U=x,O=g,Re=e;return i(),n(w,null,[o("div",V,[o("div",S,[o("div",W,[d(l,{size:"xl",squared:"",picture:u(Ze).avatar,alt:""},null,8,["picture"])]),o("div",H,[o("h3",null,[c(p(u(Ze)?.username)+" ",1),o("i",{onClick:s[0]||(s[0]=e=>((e="")=>{Ye.value=e,qe.value=!0})(u(Ze).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),o("div",K,[o("div",F,[R,o("span",null,p(u(Ze)?.role),1)]),o("div",L,[$,o("span",null,p(u(Ze)?.is_active?"Active":" In-Active"),1)]),o("div",B,[E,o("span",null,p(u(Ze)?.phoneNumber?u(Ze)?.phoneNumber:"N/A"),1)]),o("div",Y,[q,o("span",null,p(u(Ze)?.email),1)]),o("div",z,[G,o("span",null,p(u(Ze).is_sentMail?"On":"Off"),1)]),o("div",J,[Z,o("span",null,[o("i",{onClick:s[1]||(s[1]=e=>{return a=u(Ze).id,Ge.value=a,void(Je.value=!0);var a}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),o("div",Q,[o("div",X,[o("div",ee,[o("div",ae,[d(t,{color:"primary"},{default:v((()=>[se])),_:1}),o("h4",null,[o("span",le,p(u(oa)?.stats?.pending+u(oa)?.stats?.active+u(oa)?.stats?.active),1)])]),te,re])]),o("div",ie,[o("div",ne,[o("div",oe,[d(t,{color:"primary"},{default:v((()=>[de])),_:1}),o("h4",null,[o("span",ue,p(u(oa)?.stats?.active?u(oa)?.stats?.active:0),1)])]),ce,pe])]),o("div",ve,[o("div",me,[o("div",he,[d(t,{color:"primary"},{default:v((()=>[ye])),_:1}),o("h4",null,[o("span",ke,p(u(oa)?.stats?.pending?u(oa)?.stats?.pending:0),1)])]),fe,_e])]),o("div",we,[o("div",be,[o("div",ge,[d(t,{color:"primary"},{default:v((()=>[je])),_:1}),o("h4",null,[o("span",xe,p(u(oa)?.stats?.completed?u(oa)?.stats?.completed:0),1)])]),Te,Ce])])]),o("div",Ie,[o("div",Ae,[o("div",Me,[o("div",De,[o("ul",null,[o("li",{class:m(["cards"===u(ze)&&"is-active"])},[o("a",{tabindex:"0",role:"button",onKeydown:s[2]||(s[2]=h(j((e=>ze.value="cards"),["prevent"]),["space"])),onClick:s[3]||(s[3]=e=>ze.value="cards")},Ne,32)],2),o("li",{class:m(["calendar"===u(ze)&&"is-active"])},[o("a",{tabindex:"0",role:"button",onKeydown:s[4]||(s[4]=h(j((e=>ze.value="calendar"),["prevent"]),["space"])),onClick:s[5]||(s[5]=e=>ze.value="calendar")},Pe,32)],2),o("li",{class:m(["today"===u(ze)&&"is-active"])},[o("a",{tabindex:"0",role:"button",onKeydown:s[6]||(s[6]=h(j((e=>ze.value="today"),["prevent"]),["space"])),onClick:s[7]||(s[7]=e=>ze.value="today")},Ue,32)],2),Oe])])])]),y(o("div",Ve,[d(r,{workerId:u(Be).params.id},null,8,["workerId"])],512),[[k,"cards"==u(ze)]]),"calendar"==u(ze)?(i(),n("div",Se,[d(u(D),{options:u(ta)},{eventContent:v((e=>[o("div",We,[o("p",{onClick:a=>{return s=e.event.extendedProps,ia.value=s,void(na.value=!0);var s},style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},p(e.event.title),9,He),o("p",Ke,p(new Date(e.event.start).toDateString())+" to "+p(new Date(e.event.end).toDateString()),1)])])),_:1},8,["options"])])):f("",!0),"today"==u(ze)?(i(),n("div",Fe,[d(N,{workerId:u(Be).params.id},null,8,["workerId"])])):f("",!0)]),u(Je)?(i(),_(P,{key:0,isModalOpen:u(Je),userId:u(Ge),"onUpdate:closeModalHandler":s[8]||(s[8]=e=>Je.value=!1)},null,8,["isModalOpen","userId"])):f("",!0),u(qe)?(i(),_(U,{key:1,isModalOpen:u(qe),userId:u(Ye),userRole:"worker","onUpdate:closeModalHandler":s[9]||(s[9]=e=>qe.value=!1),"onUpdate:actionUpdateHandler":ra},null,8,["isModalOpen","userId"])):f("",!0)]),u(na)?(i(),_(Re,{key:0,open:u(na),title:"Task Info",actions:"center",onClose:s[11]||(s[11]=e=>na.value=!1)},{content:v((()=>[o("p",null,[c(" Workers:"),u(ia)?.workers?.length?(i(!0),n(w,{key:0},b(u(ia)?.workers,(e=>(i(),n("span",null,p(e.username),1)))),256)):f("",!0)]),o("p",null," Description :"+p(u(ia)?.description?u(ia)?.description:"N/A"),1),o("p",null,"Unit :"+p(u(ia)?.unit?u(ia)?.unit:"N/A"),1),o("p",null,"Status :"+p(u(ia)?.status?u(ia)?.status:"N/A"),1),o("p",null,"Note :"+p(u(ia)?.note?u(ia)?.note:"N/A"),1)])),action:v((()=>[d(O,{style:{display:"none"},color:"primary",raised:""},{default:v((()=>[c(" Confirm ")])),_:1})])),cancel:v((()=>[d(O,{onClick:s[10]||(s[10]=e=>na.value=!1),raised:""},{default:v((()=>[c(" Close ")])),_:1})])),_:1},8,["open"])):f("",!0)],64)}}});export{Re as _};
