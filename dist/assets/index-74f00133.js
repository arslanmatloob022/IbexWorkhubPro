import{_ as e,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-ab11cfa6.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{_ as l}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{_ as i}from"./VProgress.vue_vue_type_style_index_0_lang-bb7098c8.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as n}from"./VControl-f6dba4dd.js";import{_ as r,a as c}from"./VOption.vue_vue_type_style_index_0_lang-787ebf49.js";import{e as d,r as p,L as u,s as m,o as f,v as g,x as y,A as v,B as h,H as x,l as b,P as _,Q as w,y as k,z as j,F as C,O as A,aR as S,T as P,N as z,V as I,W as V,J as N,E as T,t as R}from"./index-a3511ab8.js";import{_ as E,a as L}from"./search-4-dark-2b5b440c.js";import{u as U}from"./useAPI-2f913358.js";import{u as D}from"./useThemeColors-9cb1eefd.js";import{A as W}from"./vue3-apexcharts.common-763b2026.js";import{u as F}from"./company-ca9a809c.js";import{u as $}from"./viewWrapper-a34f2b5b.js";import"./VLabel.vue_vue_type_script_setup_true_lang-dfa6e2cd.js";import"./useVFieldContext-f66aca7a.js";import"./userSession-1e35e5f3.js";import"./useNotyf-bee6672a.js";import"./notyf-bdcd12d6.js";import"./vue.runtime.esm-bundler-7473b242.js";import"./useSupportElement-ec851bb5.js";const J="/images/record.png",M=e=>(I("data-v-51d096d3"),e=e(),V(),e),Y={class:"business-dashboard company-dashboard"},O={class:"columns is-multiline"},q={class:"column is-5"},B={class:"cu-text-primary",style:{transform:"translateY(-20px)","margin-left":"12px"}},G={class:"cus-black-heading",style:{color:"#090909"}},H=M((()=>v("div",{class:"column is-5 ml-6"},[v("h1",{class:"cu-text-primary md-bold",style:{transform:"translateY(2px)","font-size":"17px","margin-left":"50px"}}," Compliance Anomalies ")],-1))),K={class:"is-flex",style:{gap:"20px","margin-bottom":"16px","align-items":"stretch"}},Q={style:{color:"#1a1a1a !important","font-size":"20px"},class:"title mb-0"},X=M((()=>v("p",{class:"",style:{color:"#3b4b4ca1 !important","font-size":"16px","font-weight":"500"}}," Worker Profiles ",-1))),Z={style:{height:"max-content"}},ee={style:{color:"#1a1a1a !important","font-size":"20px","margin-bottom":"17px"},class:"title"},se=M((()=>v("p",{style:{color:"#3b4b4ca1 !important","font-size":"16px","font-weight":"500"}}," Service Partners ",-1))),ae={class:"is-flex",style:{"justify-content":"space-between"}},te={class:""},le={style:{color:"#32b064 !important","font-size":"20px"},class:"title mb-0"},ie=M((()=>v("p",{class:"",style:{color:"#32b064 !important","font-size":"16px","font-weight":"500"}}," Customers ",-1))),oe={style:{color:"#e85f21 !important","font-size":"20px"},class:"title mb-0"},ne=M((()=>v("p",{style:{color:"#eb6c32c4 !important","font-size":"16px","font-weight":"500"}}," Pending References ",-1))),re=M((()=>v("div",{class:"",style:{"background-color":"lightgrey",height:"42px",width:"7px","border-radius":"10px"}},null,-1))),ce={style:{color:"#5887ff !important","font-size":"20px"},class:"title mb-0"},de=M((()=>v("p",{class:"",style:{color:"#5887ff !important","font-size":"16px","font-weight":"500"}}," Not Uploaded ",-1))),pe={style:{color:"#e54b4b !important","font-size":"20px"},class:"title mb-0"},ue=M((()=>v("p",{class:"",style:{color:"#e54b4b !important","font-size":"16px","font-weight":"500"}}," Expired ",-1))),me={class:"is-flex",style:{"justify-content":"space-between"}},fe={class:""},ge={style:{color:"#c449c2 !important","font-size":"20px"},class:"title mb-0"},ye=M((()=>v("div",{class:""},[v("img",{src:J,alt:"",srcset:"",style:{width:"19px"}})],-1))),ve=M((()=>v("p",{class:"",style:{"font-size":"16px","font-weight":"500",color:"#c449c2"}}," Expire in 14-Days ",-1))),he={class:"is-flex",style:{"justify-content":"space-between"}},xe={class:""},be={style:{color:"#ff8e72 !important","font-size":"20px"},class:"title mb-0"},_e=M((()=>v("div",{class:""},[v("img",{src:J,alt:"",srcset:"",style:{width:"19px"}})],-1))),we=M((()=>v("p",{class:"",style:{"font-size":"16px","font-weight":"500",color:"#ff8e72"}}," Date Missing ",-1))),ke={class:"is-flex space-between cu-align-center"},je=M((()=>v("h1",{class:"subtitle weighted"},"Compliance Industries",-1))),Ce={class:"is-flex justify-content-end",style:{"justify-content":"end"}},Ae={class:"industry-worker",style:{display:"inline-block","margin-bottom":"0"}},Se={class:"industry-block"},Pe=["onClick"],ze={class:""},Ie={class:"is-block"},Ve=["src"],Ne={class:"titile is-6 pl-2",style:{"font-weight":"500"}},Te={class:"cus-stat-heading"},Re=M((()=>v("p",null,null,-1))),Ee={key:0,class:"vr-line"},Le={class:"columns is-multiline"},Ue={class:"column is-6"},De={class:"dashboard-card is-base-chart",style:{"background-color":"transparent","box-shadow":"none"}},We={class:"content-box pl-0",style:{"padding-bottom":"10px"}},Fe={class:"revenue-stats is-dark-bordered-12 is-flex is-justify-content-space-between is-align-items-center",style:{"border-bottom":"none"}},$e=M((()=>v("div",{class:"revenue-stat",style:{"border-bottom":"none"}},[v("h1",{style:{color:"#000000a4"},class:"title is-5 is-flex"},[v("p",{class:"vr-line-main"}),v("div",{class:"ml-3"},"Profile Registration")])],-1))),Je={style:{width:"200px"}},Me={class:"column is-6"},Ye=P('<div class="content-box mb-4" data-v-51d096d3><div class="revenue-stat" style="padding:30px 30px 30px 0px;" data-v-51d096d3><h1 style="color:#000000a4;" class="title is-5 is-flex" data-v-51d096d3><p class="vr-line-main" data-v-51d096d3></p><div class="ml-3" data-v-51d096d3>Compliance Analytics</div></h1></div></div>',1),Oe={style:{display:"flex","justify-content":"space-between",gap:"10px"}},qe=M((()=>v("span",{class:"cus-stat-heading"},"SIA Verified",-1))),Be=M((()=>v("div",{class:"is-flex mb-2"},[v("div",{class:"analytic-report-btn",style:{"background-color":"#05d69e",color:"white"}},[h("   "),v("i",{class:"fa fa-angle-right"}),v("span",{class:"detail"},"   8 Verified worker ")])],-1))),Ge={style:{display:"flex","justify-content":"space-between",gap:"10px"}},He=M((()=>v("span",{class:"cus-stat-heading"},"SIA Unverified",-1))),Ke=M((()=>v("div",{class:"is-flex mb-2"},[v("div",{class:"analytic-report-btn",style:{"background-color":"#e62864",color:"white"}},[h("   "),v("i",{class:"fa fa-angle-right"}),v("span",{class:"detail"},"   4 Unverified worker ")])],-1))),Qe={style:{display:"flex","justify-content":"space-between",gap:"10px"}},Xe=M((()=>v("span",{class:"cus-stat-heading"},"About To Expiry",-1))),Ze=M((()=>v("div",{class:"is-flex mb-2"},[v("div",{class:"analytic-report-btn",style:{"background-color":"#faad42",color:"white"}},[h("   "),v("i",{class:"fa fa-angle-right"}),v("span",{class:"detail"},"   8 About To Expiry ")])],-1))),es={style:{display:"flex","justify-content":"space-between",gap:"10px"}},ss=M((()=>v("span",{class:"cus-stat-heading"},"UK right to work",-1))),as=M((()=>v("div",{class:"is-flex mb-2"},[v("div",{class:"analytic-report-btn",style:{"background-color":"#05d69e",color:"white"}},[h("   "),v("i",{class:"fa fa-angle-right"}),v("span",{class:"detail"},"   9 Right to work ")])],-1))),ts={style:{display:"flex","justify-content":"space-between",gap:"10px"}},ls=M((()=>v("span",{class:"cus-stat-heading"},"Anomalies Profile",-1))),is=M((()=>v("div",{class:"is-flex mb-2"},[v("div",{class:"analytic-report-btn",style:{"background-color":"#0398e2",color:"white"}},[h("   "),v("i",{class:"fa fa-angle-right"}),v("span",{class:"detail"},"   7 Anomalies Profile ")])],-1))),os={style:{display:"flex","justify-content":"space-between",gap:"10px"}},ns=M((()=>v("span",{class:"cus-stat-heading"},"Profile Approved",-1))),rs=M((()=>v("div",{class:"is-flex mb-2"},[v("div",{class:"analytic-report-btn",style:{"background-color":"#2aac8e",color:"white"}},[h("   "),v("i",{class:"fa fa-angle-right"}),v("span",{class:"detail"},"   6 Profile Approved ")])],-1))),cs={class:"column is-12"},ds={class:"columns mt-5"},ps={class:"column is-8 is-flex is-align-items-center"},us={style:{color:"#000000a4"},class:"title is-5 is-flex"},ms=M((()=>v("p",{class:"vr-line-main"},null,-1))),fs={class:"ml-3"},gs={class:"custom-badge"},ys={class:"profiles-anomaly"},vs=M((()=>v("div",{class:"list-flex-toolbar is-reversed"},null,-1))),hs={class:"flex-list-wrapper flex-list-v2"},xs=M((()=>v("img",{class:"light-image",src:E,alt:""},null,-1))),bs=M((()=>v("img",{class:"dark-image",src:L,alt:""},null,-1))),_s=["onClick"],ws={class:"item-name dark-inverted ml-3"},ks={class:"item-meta"},js=M((()=>v("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:mail"},null,-1))),Cs={class:"item-meta"},As=M((()=>v("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:phone"},null,-1))),Ss=M((()=>v("br",null,null,-1))),Ps=["data-icon"],zs=["data-icon"],Is=M((()=>v("span",{class:"light-text"},"Security Clearance Issue",-1))),Vs=N(d({__name:"CompanyProfileDashboard",setup(d){const P=U(),I=F(),V=D();p(""),p("");const N=u(),T=p([0,305,200,350,250,100,250,400,300,100,50]),R=m({series:[{name:"Profiles",data:[]}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[V.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},tooltip:{y:{formatter:function(e){return e}}}});p("2023"),m({height:295,type:"pie",series:[5672,832,1297,4515],options:{colors:["#00d0ff","#fd2d2c","#C449C2","#00d457"],labels:["Profiles","SIA Expired","Completed Profiles","Valid SIA"],responsive:[{breakpoint:480,options:{chart:{width:315,toolbar:{show:!1}},legend:{position:"top"}}}],legend:{position:"bottom",horizontalAlign:"center"}}});const E=p({total_workers:0,workers_by_month:[],sanction_last_update:null,bs7858:0,partners:0,warningProfiles:0,approvedReferences:0,refCount:0,customers:0,pendingReferences:0}),L=p(!0),$=async(e="2024")=>{try{L.value=!1;const s=await P.post(`v3/api/company/dashboard/${I.loggedCompany.id}/`,{year:e});E.value=s.data,R.value.series[0].data=T.value,L.value=!0}catch(s){console.error("ok",s)}},J=p({all:0,archived:0,industries:[]}),M=p([{id:"",colleagueImage:"",name:"",contactNumber:"",email:"",status:"",Sia:!0,profileAnomaly:""}]),Vs={colleague:"Name",email:{label:"Email",align:"left"},phoneno:{label:"Phone Number",align:"left"},siaStatus:{label:"SIA Status",align:"center"},status:{label:"Status",align:"center"},profileAnomaly:"Profile Anomaly"},Ns=p({not_uploaded:0,expired:0,date_missing:0,expire_within_14_days:0}),Ts=e=>{window.sessionStorage.setItem(`anomalieFilters${I.loggedCompany.id}`,JSON.stringify({industry:[],documents:[],limitedScreening:!1,currentStatType:e})),N.push("company/anomalies?page=1")};return f((()=>{$(),(async()=>{const e=await P.get(`/v3/api/worker/company-workers/${I.loggedCompany.id}/`,{});M.value=e.data.results})(),(async()=>{try{const e=await P.get(`/v3/api/company/${I.loggedCompany.id}/get_company_industry_workers_count/`);J.value=e.data,console.log("counts",e.data)}catch(e){console.log(e)}})(),(async()=>{try{const e=await P.get(`/v3/api/worker/anomalies/${I.loggedCompany.id}/anomalies-stats/`);Ns.value=e.data}catch(e){console.log(e)}})()})),(d,p)=>{const u=r,m=c,f=n,P=o,I=i,V=l,T=t,U=s,D=a,F=e;return g(),y("div",Y,[v("div",O,[v("div",q,[v("h1",B,[h(" Sanction updated at: "),v("span",G,x((Rs=E.value.sanction_last_update,new Date(Rs).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}))),1)])]),H]),v("div",K,[v("div",null,[v("div",{class:"card",style:{"background-color":"#ffffff70","text-align":"left",height:"110px"},onClick:p[0]||(p[0]=()=>{b(N).push("company/workers?type=All")})},[v("p",Q,x(E.value.total_workers),1),X])]),v("div",Z,[v("div",{class:"card",style:{"background-color":"#ffffff70",display:"flex","flex-direction":"column",gap:"2px","text-align":"left",height:"110px"},onClick:p[1]||(p[1]=()=>{b(N).push("company/anomalies?page=1")})},[v("p",ee,x(E.value.partners),1),se])]),v("div",null,[v("div",{class:"card",style:{"background-color":"#41d5784f","text-align":"left",height:"110px"},onClick:p[2]||(p[2]=()=>{b(N).push("company/anomalies?page=1")})},[v("div",ae,[v("div",te,[v("p",le,x(E.value.customers),1)])]),ie])]),v("div",null,[v("div",{class:"card",style:{"background-color":"#fcefe8","text-align":"left",height:"110px"},onClick:p[3]||(p[3]=()=>{b(N).push("company/anomalies?page=1")})},[v("p",oe,x(E.value.pendingReferences),1),ne])]),re,v("div",null,[v("div",{class:"card",style:{"background-color":"#5887ff30","text-align":"left",height:"110px"},onClick:p[4]||(p[4]=e=>Ts("not_uploaded"))},[v("p",ce,x(Ns.value.not_uploaded),1),de])]),v("div",null,[v("div",{class:"card",style:{"background-color":"#e54b4b30","text-align":"left",height:"110px"},onClick:p[5]||(p[5]=e=>Ts("expired"))},[v("p",pe,x(Ns.value.expired),1),ue])]),v("div",null,[v("div",{class:"card",style:{"background-color":"#c449c230","text-align":"left",height:"110px"},onClick:p[6]||(p[6]=e=>Ts("expire_within_14_days"))},[v("div",me,[v("div",fe,[v("p",ge,x(Ns.value.expire_within_14_days),1)]),ye]),ve])]),v("div",null,[v("div",{class:"card",style:{"background-color":"#ff8e7230","text-align":"left",height:"110px"},onClick:p[7]||(p[7]=e=>Ts("date_missing"))},[v("div",he,[v("div",xe,[v("p",be,x(Ns.value.date_missing),1)]),_e]),we])])]),v("div",ke,[je,v("div",Ce,[v("div",Ae,[v("div",Se,[(g(!0),y(_,null,w(J.value.industries,((e,s)=>(g(),y("div",{class:"industry-block cu-pointer",onClick:()=>{b(N).push(`/sidebar/company/workers?type=${e.name}`)}},[v("div",ze,[v("div",Ie,[v("img",{src:e.industryLogo,alt:"",srcset:"",style:{width:"22px"}},null,8,Ve),v("h6",Ne,[h(x(e.name)+" ",1),v("span",Te,"("+x(e.count)+")",1)])]),Re]),s!==J.value.industries.length-1?(g(),y("div",Ee)):A("",!0)],8,Pe)))),256))])])])]),v("div",Le,[v("div",Ue,[v("div",De,[v("div",We,[v("div",Fe,[$e,v("div",Je,[k(P,null,{default:j((()=>[k(f,{class:"has-icons-left",icon:"fas fa-globe"},{default:j((()=>[k(m,{onInput:p[8]||(p[8]=e=>{$(e.target.value)})},{default:j((()=>[k(u,{value:""},{default:j((()=>[h("Select Year")])),_:1}),k(u,{value:"2020"},{default:j((()=>[h("2020")])),_:1}),k(u,{value:"2021"},{default:j((()=>[h("2021")])),_:1}),k(u,{value:"2022"},{default:j((()=>[h("2022")])),_:1}),k(u,{value:"2023"},{default:j((()=>[h("2023")])),_:1}),k(u,{value:"2024"},{default:j((()=>[h("2024")])),_:1}),k(u,{value:"2025"},{default:j((()=>[h("2025")])),_:1})])),_:1})])),_:1})])),_:1})])])]),L.value?(g(),C(b(W),{key:0,id:"line-stats-widget-chart",height:R.value.chart.height,type:R.value.chart.type,series:R.value.series,options:R.value},null,8,["height","type","series","options"])):A("",!0)])]),v("div",Me,[Ye,v("div",Oe,[qe,k(I,{style:{height:"24px"},color:"success",value:60}),h(" 8 "),Be]),v("div",Ge,[He,k(I,{style:{height:"24px"},color:"danger",value:55}),h(" 4 "),Ke]),v("div",Qe,[Xe,k(I,{style:{height:"24px"},color:"warning",value:60}),h(" 8 "),Ze]),v("div",es,[ss,k(I,{style:{height:"24px"},color:"success",value:55}),h(" 9 "),as]),v("div",ts,[ls,k(I,{style:{height:"24px"},color:"info",value:45}),h(" 7 "),is]),v("div",os,[ns,k(I,{style:{height:"24px"},color:"primary",value:38}),h(" 6 "),rs])]),v("div",cs,[v("div",ds,[v("div",ps,[v("h1",us,[ms,v("div",fs,[h(" Profile Anomaly Detection   "),v("span",gs,x(M.value.length),1)])])])]),v("div",ys,[vs,v("div",hs,[0===M.value.length?(g(),C(V,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n                search terms you've entered. Please try different search terms or\n                criteria.",larger:""},{image:j((()=>[xs,bs])),_:1})):A("",!0),M.value.length?(g(),C(F,{key:1,data:M.value,columns:Vs,rounded:""},{body:j((()=>[k(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(g(!0),y(_,null,w(M.value,((e,s)=>(g(),y("div",{onClick:s=>b(N).push({name:"/sidebar/company/workers/[id]",params:{id:e.id}}),key:e.id,class:z(["flex-table-item cu-pointer",s%2==0?"even-row":"odd-row"])},[k(U,null,{default:j((()=>[k(T,{picture:e.profileImageURL?e.profileImageURL:"/images/avatars/placeholder.jpg"},null,8,["picture"]),v("div",null,[v("span",ws,x(e.firstName)+" "+x(e.lastName),1)])])),_:2},1024),k(U,{column:{media:!0}},{default:j((()=>[v("div",null,[v("span",ks,[v("span",null,[js,h(x(e.emailAddress),1)])])])])),_:2},1024),k(U,{column:{media:!0}},{default:j((()=>[v("div",null,[v("span",Cs,[v("span",null,[As,h(x(e.phoneNumber),1)]),Ss])])])),_:2},1024),k(U,{column:{align:"center"}},{default:j((()=>[k(D,{color:e.Sia?"success":"danger",rounded:""},{default:j((()=>[v("i",{class:"iconify","data-icon":e.Sia?"feather:check":"feather:x","aria-hidden":"true"},null,8,Ps),h(" "+x(e.Sia?"SIA Valid":"SIA Invalid"),1)])),_:2},1032,["color"])])),_:2},1024),k(U,{column:{align:"center"}},{default:j((()=>[k(D,{color:e.status?"success":"danger",rounded:""},{default:j((()=>[v("i",{class:"iconify","data-icon":e.status?"feather:check":"feather:x","aria-hidden":"true",style:{"font-size":"18px !important"}},null,8,zs)])),_:2},1032,["color"])])),_:2},1024),k(U,{column:{align:"left"}},{default:j((()=>[Is])),_:1})],10,_s)))),128))])),_:1})])),_:1},8,["data"])):A("",!0)])])])])]);var Rs}}}),[["__scopeId","data-v-51d096d3"]]),Ns={class:"page-content-inner"},Ts=d({__name:"index",setup(e){T();return $().setPageTitle("Worker Compliance Management"),R((()=>({title:"Worker Compliance Management"}))),(e,s)=>{const a=Vs;return g(),y("div",Ns,[k(a)])}}});export{Ts as default};
