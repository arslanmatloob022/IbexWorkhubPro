import{r as e,a6 as l,e as a,s as t,Z as o,b as s,_ as i,o as n,B as u,N as r,F as d,D as c,E as p,K as m,l as _,W as v,C as b,U as f,V as y,J as h,T as g,M as k,j as C,I as T,O as V,a4 as P,X as w,P as I,Q as M,R as U,i as x,A,aR as S,H as D,G as N}from"./index-5ef4b004.js";import{_ as O}from"./VModal.vue_vue_type_style_index_0_lang-d2bfe783.js";import{_ as q}from"./VInput.vue_vue_type_script_setup_true_lang-3549edee.js";import{_ as L}from"./VTextarea.vue_vue_type_script_setup_true_lang-282e7ede.js";import{_ as j}from"./VField.vue_vue_type_script_setup_true_lang-3b3b84f8.js";import{_ as E}from"./VControl-b58d2761.js";import{_ as H,a as B}from"./VOption.vue_vue_type_style_index_0_lang-b5916063.js";import{u as R}from"./useAPI-9ed6129f.js";import{u as Q}from"./useNotyf-25049f18.js";import{a as Z}from"./useSupportElement-5a413a4a.js";import{u as F}from"./userSession-03919bcf.js";import{_ as G}from"./VAvatar.vue_vue_type_style_index_0_lang-17f6d66a.js";import{_ as z}from"./VCheckbox.vue_vue_type_style_index_0_lang-a9caf393.js";import{_ as W}from"./VRadio.vue_vue_type_style_index_0_lang-4471a8b9.js";import{_ as J}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-588cc70d.js";const $=e([{id:"12347",title:"Electrical Wiring",cost_code:"040100",cost_type:"Material",unit_cost:20,quantity:500,unit:"meters",total_cost:1e4,price:750,markup:15,markup_type:"percentage",markup_value:1500,markup_amount:3e3,unit_price:50,tax_rate:7.5,client_price:12000.9,total_price:9e3,builder_cost:825,group_price:78987,grand_total:12325,total_markup:9874567,mark_as:"catalogue_item",description:"Electrical wiring and related materials.",internal_notes:"Include wiring for backup generator.",created_by:"user125",created_date:"2024-12-22T12:00:00Z",updated_by:"user125",updated_date:"2024-12-22T13:00:00Z",approved_by:"manager458",approval_date:"2024-12-22T18:00:00Z",status:"pending",category:"Electrical",tags:["wiring","electrical","materials"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!1},front_end_elements:{highlighted:!1,background_color:"#f0f0f0",font_color:"#000000",display_order:3,editable:!0}},{id:"56789",title:"Plumbing Fixtures",cost_code:"050200",cost_type:"Labor",unit_cost:45,quantity:200,unit:"hours",total_cost:9e3,price:1500,markup:20,markup_type:"percentage",markup_value:1800,markup_amount:3600,unit_price:75,tax_rate:8,client_price:12000.9,total_price:10800,builder_cost:950,group_price:67890,grand_total:13200,total_markup:1234567,mark_as:"custom_item",description:"Installation of plumbing fixtures.",internal_notes:"Check water pressure before installation.",created_by:"user456",created_date:"2024-11-30T09:00:00Z",updated_by:"user456",updated_date:"2024-12-01T10:00:00Z",approved_by:"manager123",approval_date:"2024-12-01T15:00:00Z",status:"approved",category:"Plumbing",tags:["plumbing","fixtures","labor"],attachments:[],visibility:{admin:!0,internal_only:!0,shared_with_client:!1},front_end_elements:{highlighted:!0,background_color:"#ffffff",font_color:"#333333",display_order:1,editable:!1}},{id:"90123",title:"HVAC Installation",cost_code:"070300",cost_type:"Service",unit_cost:75,quantity:50,unit:"units",total_cost:3750,client_price:12000.9,price:850,markup:10,markup_type:"fixed",markup_value:850,markup_amount:1700,unit_price:95,tax_rate:6.5,total_price:4200,builder_cost:1025,group_price:56789,grand_total:15500,total_markup:654321,mark_as:"service_item",description:"HVAC system installation and setup.",internal_notes:"Ensure proper duct sealing.",created_by:"user789",created_date:"2024-12-10T14:00:00Z",updated_by:"user789",updated_date:"2024-12-15T11:30:00Z",approved_by:"manager567",approval_date:"2024-12-16T09:00:00Z",status:"completed",category:"HVAC",tags:["HVAC","installation","service"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!0},front_end_elements:{highlighted:!0,background_color:"#e6e6e6",font_color:"#111111",display_order:2,editable:!0}},{id:"34567",title:"Roofing Materials",cost_code:"080500",cost_type:"Material",unit_cost:30,quantity:1e3,unit:"sheets",total_cost:3e4,client_price:12000.9,price:1200,markup:25,markup_type:"percentage",markup_value:3e3,markup_amount:7500,unit_price:90,tax_rate:9,total_price:32700,builder_cost:1125,group_price:43210,grand_total:37500,total_markup:98765,mark_as:"material_item",description:"High-quality roofing materials.",internal_notes:"Ensure weather-resistant properties.",created_by:"user321",created_date:"2024-12-05T08:00:00Z",updated_by:"user321",updated_date:"2024-12-06T12:00:00Z",approved_by:"manager789",approval_date:"2024-12-07T14:00:00Z",status:"pending",category:"Roofing",tags:["roofing","materials","construction"],attachments:[],visibility:{admin:!1,internal_only:!0,shared_with_client:!0},front_end_elements:{highlighted:!1,background_color:"#dddddd",font_color:"#444444",display_order:4,editable:!1}}]),K=e({ItemNumber:"No#",Title:"Title",Unit:"Cost Code",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",UnitPrice:"Unit Price",Price:"Price",TotalPrice:"Total Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",ClientPrice:"Client Price",Profit:"Profit",Notes:"Internal Notes"}),X=e({ItemNumber:"id",Title:"title",Unit:"cost_code",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",BuilderCost:"builder_cost",Markup:"markup",MarkupAmount:"markup_amount",UnitPrice:"unit_price",Price:"price",TotalPrice:"total_price",GroupPrice:"group_price",TotalCost:"total_cost",TotalMarkup:"total_markup",ClientPrice:"client_price",Profit:"profit",Notes:"internal_notes"}),Y=l("useProposal",(()=>{const l=e(!0),a=Q(),t=R(),o=e("");e("");const s=e([]),i=e([]),n=e({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"}),u=e([{title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""}]);return{loading:l,proposalCostItems:u,leadProposalFormData:n,companyProposalsList:s,leadProposalsList:i,getLeadProposals:async e=>{try{e.value=e,l.value=!0;const a=await t.get(`/api/lead-proposal/by-job/${e.value}/`);i.value=a.data}catch(o){a.error(` ${o}, Lead`)}finally{l.value=!1}},getCompanyProposals:async()=>{try{l.value=!0;const e=await t.get("/api/lead-proposal/");s.value=e.data}catch(e){a.error(` ${e}, Lead`)}finally{l.value=!1}},getProposalCostItems:async function(e){try{o.value=e;const l=await t.get(`/api/cost/by-proposal/${e}/`);u.value=l.data}catch(l){console.log(l)}},clearProposalId:function(){o.value="",u.value=[]}}})),ee={class:"modal-form columns is-multiline"},le={class:"columns is-multiline"},ae={class:"field column is-12 mb-0"},te=c("label",null,"Title: ",-1),oe={class:"control"},se={class:"field column is-6"},ie=c("label",{for:""},"Cost Type",-1),ne={class:"field column is-6"},ue=c("label",{for:""},"Catalog",-1),re={class:"field column is-6"},de=c("label",{for:""},"Mark As",-1),ce={class:"field column is-6"},pe=c("label",{for:""},"Cost Code *",-1),me={class:"field column is-6"},_e=c("label",{for:""},"Group Cost",-1),ve={class:"field column is-12 mb-0"},be=c("label",{for:"",class:"label"},"Description",-1),fe={class:"field column is-12 mb-0"},ye=c("label",{for:"",class:"label"},"Internal Notes",-1),he={class:"columns is-multiline"},ge={class:"field column is-6"},ke=c("label",null,"Unit Cost",-1),Ce={class:"field column is-6"},Te=c("label",null,"Quantity",-1),Ve={class:"field column is-6"},Pe=c("label",null,"Unit",-1),we={class:"field column is-6"},Ie=c("label",null,"Builder Cost",-1),Me={class:"field column is-6"},Ue=c("label",null,"Markup (%)",-1),xe={class:"field column is-6"},Ae=c("label",null,"Client Price",-1),Se={class:"field column is-6"},De=c("label",null,"Margin (%)",-1),Ne=a({__name:"EstimateCostItemModal",props:{costItemModal:{type:Boolean},proposalId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:a}){const w=l,I=t();F();const M=Q(),U=R(),x=e(!1);e([]),e([]);const A=e({id:"",type:"",total_price:0,cost_code:"",cost_type:"",builder_cost:0,internal_notes:"",mark_as:"",state:"",title:"",description:"",quantity:0,unit:"",unit_cost:0,markup:0,margin:0,profit:0,group:"",proposal:w.proposalId}),S=e([{value:"labour",label:"Labour"},{value:"material",label:"Material"},{value:"equipment",label:"Equipment"},{value:"subcontractor",label:"Subcontractor"},{value:"other",label:"Others"}]),D=e([{value:"11011",label:"Labour"},{value:"11012",label:"Material"},{value:"11013",label:"Equipment"},{value:"11014",label:"Subcontractor"},{value:"11015",label:"Others"}]),N=e([{value:"Tiling",label:"Tiling"},{value:"Material",label:"Material"},{value:"Paint",label:"Paint"},{value:"Carpenter",label:"Carpenter"}]),G=e([{value:"bid",label:"Bid"},{value:"allowance",label:"Allowance"}]);e([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const z=async()=>{try{x.value=!0;const e=Z(A.value,[""]);await U.post("/api/cost/",e);W(),J(),M.success("Item added successfully.")}catch(e){M.error(` ${e}, New Worker`)}finally{x.value=!1}},W=()=>{a("update:modalHandler",!1)},J=()=>{a("update:OnSuccess",null)};e(0),e(0);const $=o((()=>A.value.unit_cost*A.value.quantity));e(0),e(0);const K=o((()=>A.value.markup>0?$.value+$.value*A.value.markup/100:A.value.margin>0?$.value/(1-A.value.margin/100):$.value));o((()=>(K.value-$.value)/$.value*100)),o((()=>(K.value-$.value)/K.value*100));const X=s((()=>i((()=>import("./ckeditor-085bee9e.js").then((e=>e.c))),["assets/ckeditor-085bee9e.js","assets/index-5ef4b004.js","assets/index-1c8d8af6.css","assets/vue.runtime.esm-bundler-5a41c0a5.js"]).then((e=>e.default.component)))),Y={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return n((async()=>{I.value=await i((()=>import("./ckeditor-bbd34669.js").then((e=>e.c))),["assets/ckeditor-bbd34669.js","assets/index-5ef4b004.js","assets/index-1c8d8af6.css"]).then((e=>e.default))})),(e,l)=>{const a=H,t=B,o=E,s=j,i=V,n=L,M=P,U=q,R=O;return u(),r(R,{is:"form",open:w.costItemModal,title:"Cost Item ",size:"xl",actions:"right",onSubmit:T(z,["prevent"]),onClose:W},{content:d((()=>[c("div",ee,[p(M,{class:"column is-12"},{default:d((()=>[c("div",le,[c("div",ae,[te,c("div",oe,[m(c("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>_(A).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[v,_(A).title]])])]),c("div",se,[ie,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(t,{modelValue:_(A).cost_type,"onUpdate:modelValue":l[1]||(l[1]=e=>_(A).cost_type=e)},{default:d((()=>[(u(!0),b(f,null,y(_(S),((e,l)=>(u(),r(a,{value:e.value},{default:d((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),c("div",ne,[ue,c("div",null,[p(i,{size:"small"},{default:d((()=>[h("Add in Catalog")])),_:1})])]),c("div",re,[de,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(t,{modelValue:_(A).mark_as,"onUpdate:modelValue":l[2]||(l[2]=e=>_(A).mark_as=e)},{default:d((()=>[(u(!0),b(f,null,y(_(G),((e,l)=>(u(),r(a,{value:e.value},{default:d((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),c("div",ce,[pe,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(t,{modelValue:_(A).cost_code,"onUpdate:modelValue":l[3]||(l[3]=e=>_(A).cost_code=e)},{default:d((()=>[(u(!0),b(f,null,y(_(D),((e,l)=>(u(),r(a,{value:e.value},{default:d((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),c("div",me,[_e,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(t,{modelValue:_(A).group,"onUpdate:modelValue":l[4]||(l[4]=e=>_(A).group=e)},{default:d((()=>[(u(!0),b(f,null,y(_(N),((e,l)=>(u(),r(a,{value:e.value},{default:d((()=>[h(g(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),c("div",ve,[be,_(I)?(u(),r(_(X),{key:0,modelValue:_(A).description,"onUpdate:modelValue":l[5]||(l[5]=e=>_(A).description=e),editor:_(I),config:Y},null,8,["modelValue","editor"])):k("",!0)]),c("div",fe,[ye,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(n,{modelValue:_(A).internal_notes,"onUpdate:modelValue":l[6]||(l[6]=e=>_(A).internal_notes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1}),p(M,{class:"column is-12 mt-3"},{default:d((()=>[c("div",he,[c("div",ge,[ke,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_(A).unit_cost,"onUpdate:modelValue":l[7]||(l[7]=e=>_(A).unit_cost=e),type:"number",name:"unitCost",placeholder:"Unit cost"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Ce,[Te,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_(A).quantity,"onUpdate:modelValue":l[8]||(l[8]=e=>_(A).quantity=e),type:"number",name:"quantity",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Ve,[Pe,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_(A).unit,"onUpdate:modelValue":l[9]||(l[9]=e=>_(A).unit=e),type:"text",name:"unit",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",we,[Ie,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_($),"onUpdate:modelValue":l[10]||(l[10]=e=>C($)?$.value=e:null),type:"number",name:"builderCost",placeholder:"Builder cost"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Me,[Ue,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_(A).markup,"onUpdate:modelValue":l[11]||(l[11]=e=>_(A).markup=e),type:"number",name:"markup",placeholder:"Markup"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",xe,[Ae,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_(K),"onUpdate:modelValue":l[12]||(l[12]=e=>C(K)?K.value=e:null),type:"number",name:"markup",placeholder:"Total Price"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Se,[De,p(s,null,{default:d((()=>[p(o,null,{default:d((()=>[p(U,{modelValue:_(A).margin,"onUpdate:modelValue":l[13]||(l[13]=e=>_(A).margin=e),type:"number",name:"markup",placeholder:"Margin"},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1})])])),action:d((()=>[p(i,{loading:_(x),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:d((()=>[h("Add Item")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Oe={class:"columns is-multiline"},qe=c("div",{class:"column is-9"},[c("h1",{class:"title is-5 m-1 p-0"},"Preview Lead Proposal"),c("p",{class:"m-1"}," Below is a preview of the proposal that will be sent as a link to the email addresses on this client contact. The proposal can be accessed through the link while it is Released. ")],-1),Le={class:"column is-4"},je=c("h1",{class:"subtitle is-5 is-bold"},"Layout Options",-1),Ee=c("h1",{class:"subtitle is-6 mb-0"},"Header",-1),He=c("h1",{class:"subtitle is-6 mb-0"},"Body",-1),Be={class:"column is-4"},Re=c("h1",{class:"subtitle is-5 is-bold"},"Customer Information",-1),Qe={class:"column is-4"},Ze=c("h1",{class:"subtitle is-5 is-bold"},"Company Information",-1),Fe={class:"column is-12"},Ge={class:"invoice-wrapper"},ze=w('<div class="invoice-header"><div class="left"><h3>Proposal-ID PD-456-14</h3></div><div class="right"><div class="controls"><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:printer"></i></a><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:download-cloud"></i></a><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:mail"></i></a></div></div></div>',1),We={class:"invoice-body"},Je={class:"invoice-card"},$e={class:"invoice-section is-flex is-bordered"},Ke=c("div",{class:"meta"},null,-1),Xe=c("div",{class:"end"},[c("span",null,"PO Box 242"),c("span",null,"Evergreen, CO 80437-0242"),c("span",null,"Phone: 720 272-9061"),c("span",null,"Premium Trades for Premier Builders")],-1),Ye=c("div",{class:"invoice-section is-flex is-bordered"},[c("div",{class:"meta"},[c("h3",null,"Client Name"),c("span",null,"Client Phone"),c("span",null,"25724 Independence Trail Evergreen, CO 80439")]),c("div",{class:"end is-left"},[c("h3",null,"Friday Jan 17, 2025"),c("p",null," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quod equidem non reprehendo. ")])],-1),el={class:"invoice-section"},ll={class:"responsive-table"},al=["innerHTML"],tl={key:1},ol={class:"invoice-section is-flex mt-0 pt-0"},sl={class:"end is-left"},il={class:"text-right"},nl=c("p",null,"Mentioned price are final",-1),ul=a({__name:"ProposalPreview",props:{columnsToShow:{}},setup(l){const a=l,t=Y(),s=e([{name:"Website Redesign",unit:"hrs",quantity:54,rate:24},{name:"Logo Design",unit:"hrs",quantity:12,rate:24},{name:"Custom Illustrations",unit:"hrs",quantity:7,rate:32}]);o((()=>{const e=s.value.reduce(((e,l)=>e+l.quantity*l.rate),0),l=.1*e;return[{label:"Subtotal",value:e},{label:"Taxes",value:l},{label:"Total",value:e+l}]}));const i=e(""),n=e(!0),r=e(!0),m=e(!0),v=e(!0),h=o((()=>$.value.reduce(((e,l)=>e+l.price*l.quantity),0)));return(e,l)=>{const o=W,s=E,k=j,T=z,V=G;return u(),b("div",Oe,[qe,c("div",Le,[je,Ee,p(k,null,{default:d((()=>[p(s,{class:"flex-columns"},{default:d((()=>[p(o,{modelValue:_(i),"onUpdate:modelValue":l[0]||(l[0]=e=>C(i)?i.value=e:null),value:"center",label:"Centralized",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),p(o,{modelValue:_(i),"onUpdate:modelValue":l[1]||(l[1]=e=>C(i)?i.value=e:null),value:"split",label:"Space between",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"])])),_:1})])),_:1}),He,p(k,null,{default:d((()=>[p(s,{class:"flex-columns"},{default:d((()=>[p(o,{modelValue:_(n),"onUpdate:modelValue":l[2]||(l[2]=e=>C(n)?n.value=e:null),value:"column",label:"Columns",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),p(o,{modelValue:_(n),"onUpdate:modelValue":l[3]||(l[3]=e=>C(n)?n.value=e:null),value:"multiline",label:"Multiline",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),p(o,{modelValue:_(n),"onUpdate:modelValue":l[4]||(l[4]=e=>C(n)?n.value=e:null),value:"none",label:"None",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Be,[Re,p(k,{class:"flex-columns"},{default:d((()=>[p(s,{raw:"",subcontrol:""},{default:d((()=>[p(T,{class:"mt-2 p-0",modelValue:_(r),"onUpdate:modelValue":l[5]||(l[5]=e=>C(r)?r.value=e:null),label:"Show Client Contact and Phone",color:"info"},null,8,["modelValue"])])),_:1}),p(s,{raw:"",subcontrol:""},{default:d((()=>[p(T,{class:"mt-4 p-0",modelValue:_(m),"onUpdate:modelValue":l[6]||(l[6]=e=>C(m)?m.value=e:null),label:"Show Address"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Qe,[Ze,p(k,{class:"flex-columns"},{default:d((()=>[p(s,{raw:"",subcontrol:""},{default:d((()=>[p(T,{class:"mt-2 p-0",modelValue:_(v),"onUpdate:modelValue":l[7]||(l[7]=e=>C(v)?v.value=e:null),label:"Show Company One Liner"},null,8,["modelValue"])])),_:1})])),_:1})]),c("div",Fe,[c("div",Ge,[ze,c("div",We,[c("div",Je,[c("div",$e,[p(V,{size:"xl",picture:"/logos/IbexFavicon.png"}),Ke,Xe]),Ye,c("div",el,[c("table",ll,[c("thead",null,[(u(!0),b(f,null,y(a.columnsToShow,((e,l)=>(u(),b("th",{key:l},g(_(K)[e]),1)))),128))]),c("tbody",null,[(u(!0),b(f,null,y(_(t).proposalCostItems,((e,l)=>(u(),b("tr",{key:e.id},[(u(!0),b(f,null,y(a.columnsToShow,((l,a)=>(u(),b("td",{key:a},["Description"===l?(u(),b("div",{key:0,innerHTML:e[_(X)[l]]},null,8,al)):(u(),b("span",tl,g(e[_(X)[l]]),1))])))),128))])))),128))])])]),c("div",ol,[c("div",sl,[c("h3",il,"Total Price: $"+g(_(h)),1),nl])])])])])])])}}}),rl=e=>(I("data-v-75c612e6"),e=e(),M(),e),dl={class:"datatable-wrapper mt-0"},cl={class:"table-container"},pl={class:"table datatable-table is-fullwidth",id:"external-events"},ml=rl((()=>c("th",null,"Item#",-1))),_l=rl((()=>c("th",null,"Actions",-1))),vl=["data-event","onDragstart","onDrop"],bl=["innerHTML"],fl={key:1},yl=a({__name:"CostItemsTable",props:{columnsToShow:{},itemsList:{}},setup(l){const a=l,t=Y(),o=e({CostCode:"Cost Code",Title:"Title",Unit:"Unit",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",Status:"Status",ClientPrice:"Client Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",Profit:"Profit",Notes:"Internal Notes",State:"State"}),s=e({CostCode:"cost_code",Title:"title",Unit:"unit",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",ClientPrice:"total_price",BuilderCost:"builder_cost",Markup:"markup",Status:"status",GroupPrice:"group_amount",TotalMarkup:"total_markup",Profit:"profit",Notes:"internal_notes",MarkupAmount:"markup_amount"}),i=e(null),r=e=>{e.preventDefault()};return n((()=>{})),(e,l)=>{const n=J;return u(),b("div",dl,[c("div",cl,[c("table",pl,[c("thead",null,[ml,(u(!0),b(f,null,y(a.columnsToShow,((e,l)=>(u(),b("th",{key:l},g(_(o)[e]),1)))),128)),_l]),c("tbody",null,[_(t).proposalCostItems.length>0?(u(!0),b(f,{key:0},y(_(t).proposalCostItems,((e,l)=>(u(),b("tr",{class:"events",key:e.id,"data-event":JSON.stringify(e),draggable:"true",onDragstart:e=>(e=>{i.value=e})(l),onDrop:()=>(e=>{if(null!==i.value&&i.value!==e){const l=$.value[i.value];$.value.splice(i.value,1),$.value.splice(e,0,l)}i.value=null})(l),onDragover:r},[c("td",null,g(l+1),1),(u(!0),b(f,null,y(a.columnsToShow,((l,a)=>(u(),b("td",{key:a},["Description"===l?(u(),b("div",{key:0,innerHTML:e[_(s)[l]]},null,8,bl)):(u(),b("span",fl,g(e[_(s)[l]]),1))])))),128)),c("td",null,[p(n)])],40,vl)))),128)):k("",!0)])])])])}}}),hl=U(yl,[["__scopeId","data-v-75c612e6"]]),gl={class:"columns is-multiline"},kl={class:"column is-12 is-flex space-between"},Cl=c("div",null,[c("h1",{class:"title is-4"},"Proposal Worksheet")],-1),Tl={key:0,class:"column is-12"},Vl={class:"tabs-wrapper column is-12 m-0"},Pl={class:"tabs-inner mt-4"},wl={class:"tabs is-boxed"},Il=[c("span",null,"Worksheet",-1)],Ml=[c("span",null,"Format",-1)],Ul=[c("span",null,"Preview",-1)],xl={key:0,class:"column is-12"},Al={key:0,class:"column is-12"},Sl={class:"columns is-multiline"},Dl=c("div",{class:"column is-12",style:{"text-align":"center"}},[c("h1",{class:"title is-4"},"Connect your clients to their projects"),c("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),Nl={class:"column is-12"},Ol={key:0,class:"column is-12"},ql=a({__name:"WorksheetItems",props:{leadProposalModal:{type:Boolean},proposalId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:a}){const o=l,m=t();F(),Q(),R(),e(!1),e({});const v=Y();e(!1);const f=e(["Title","CostCode","Description","Quantity","UnitCost","Unit","ClientPrice"]),y=[{value:"ItemNumber",label:"Item Number"},{value:"Title",label:"Title"},{value:"CostCode",label:"Cost Code"},{value:"Description",label:"Description"},{value:"Quantity",label:"Quantity"},{value:"UnitCost",label:"Unit Cost"},{value:"Unit",label:"Unit"},{value:"BuilderCost",label:"Builder Cost"},{value:"Markup",label:"Markup"},{value:"ClientPrice",label:"Client Price"},{value:"CostType",label:"Cost Type"},{value:"GroupPrice",label:"Group Price"},{value:"TotalMarkup",label:"Total Markup"},{value:"MarkupAmount",label:"Markup Amount"},{value:"Profit",label:"Profit"},{value:"Notes",label:"Notes"}];e({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""}),e({title:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[]}),e([{value:"all",label:"All"},{value:"contact",label:"Contact Form"},{value:"google",label:"Google"},{value:"referral",label:"Referral"}]),e([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const g=e("worksheet");s((()=>i((()=>import("./ckeditor-085bee9e.js").then((e=>e.c))),["assets/ckeditor-085bee9e.js","assets/index-5ef4b004.js","assets/index-1c8d8af6.css","assets/vue.runtime.esm-bundler-5a41c0a5.js"]).then((e=>e.default.component))));const w=e(!1),I=e(!1);e({id:"",type:"",total_price:0,cost_code:"",cost_type:"",builder_cost:0,internal_notes:"",mark_as:"",state:"",title:"",costType:"",description:"",quantity:0,unit:0,unit_cost:0,markup:0,clientPrice:0,costCode:"",builderCost:"",margin:0,profit:0,internalNotes:"",includeInCatalog:!1,markAs:"",group:"",proposal:""});const M=async()=>{try{v.getProposalCostItems(o.proposalId)}catch(e){console.log(e)}};return n((async()=>{m.value=await i((()=>import("./ckeditor-bbd34669.js").then((e=>e.c))),["assets/ckeditor-bbd34669.js","assets/index-5ef4b004.js","assets/index-1c8d8af6.css"]).then((e=>e.default)),o.proposalId&&M()})),x((()=>{v.clearProposalId()})),(e,l)=>{const a=V,t=A("Multiselect"),s=E,i=j,n=hl,m=P,v=ul,U=Ne;return u(),b("div",null,[c("div",gl,[c("div",kl,[Cl,c("div",null,[p(a,{size:"small",light:"",outlined:"",icon:"fas fa-cog",class:"mr-2",color:_(I)?"danger":"success",onClick:l[0]||(l[0]=e=>I.value=!_(I))},{default:d((()=>[h("Table")])),_:1},8,["color"]),p(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"info",onClick:l[1]||(l[1]=e=>w.value=!_(w))},{default:d((()=>[h("Import")])),_:1}),p(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"primary",onClick:l[2]||(l[2]=e=>w.value=!_(w))},{default:d((()=>[h("Add From")])),_:1}),p(a,{size:"small",light:"",outlined:"",color:"warning",onClick:l[3]||(l[3]=e=>w.value=!_(w))},{default:d((()=>[h("Add Item")])),_:1})])]),p(S,{class:"fade-slow",name:"fade-slow"},{default:d((()=>[_(I)?(u(),b("div",Tl,[p(i,{label:"Choose what to show to lead",class:"column is-12"},{default:d((({id:e})=>[p(s,null,{default:d((()=>[p(t,{modelValue:_(f),"onUpdate:modelValue":l[4]||(l[4]=e=>C(f)?f.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:y,placeholder:"Add columns"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})])):k("",!0)])),_:1}),c("div",Vl,[c("div",Pl,[c("div",wl,[c("ul",null,[c("li",{class:D(["worksheet"===_(g)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:l[5]||(l[5]=N(T((e=>g.value="worksheet"),["prevent"]),["space"])),onClick:l[6]||(l[6]=e=>g.value="worksheet")},Il,32)],2),c("li",{class:D(["format"===_(g)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:l[7]||(l[7]=N(T((e=>g.value="format"),["prevent"]),["space"])),onClick:l[8]||(l[8]=e=>g.value="format")},Ml,32)],2),c("li",{class:D(["preview"===_(g)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:l[9]||(l[9]=N(T((e=>g.value="preview"),["prevent"]),["space"])),onClick:l[10]||(l[10]=e=>g.value="preview")},Ul,32)],2)])])])]),p(S,{class:"fade-slow",name:"slide-x"},{default:d((()=>["worksheet"===_(g)?(u(),b("div",xl,[p(n,{columnsToShow:_(f),proposalId:o.proposalId},null,8,["columnsToShow","proposalId"])])):k("",!0)])),_:1}),p(S,{class:"fade-slow",name:"slide-x"},{default:d((()=>["format"===_(g)?(u(),b("div",Al,[c("div",Sl,[p(i,{label:"Choose what to show to lead",class:"column is-12"},{default:d((({id:e})=>[p(s,null,{default:d((()=>[p(t,{modelValue:_(f),"onUpdate:modelValue":l[11]||(l[11]=e=>C(f)?f.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:y,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),p(m,{class:"columns is-multiline m-0"},{default:d((()=>[Dl,c("div",Nl,[p(n,{columnsToShow:_(f)},null,8,["columnsToShow"])])])),_:1})])):k("",!0)])),_:1}),p(S,{class:"fade-slow",name:"slide-x"},{default:d((()=>["preview"===_(g)?(u(),b("div",Ol,[p(v,{columnsToShow:_(f)},null,8,["columnsToShow"])])):k("",!0)])),_:1})]),_(w)?(u(),r(U,{key:0,costItemModal:_(w),proposalId:o.proposalId,"onUpdate:modalHandler":l[12]||(l[12]=e=>w.value=!1),"onUpdate:OnSuccess":M},null,8,["costItemModal","proposalId"])):k("",!0)])}}});export{ql as _,$ as c,Y as u};
