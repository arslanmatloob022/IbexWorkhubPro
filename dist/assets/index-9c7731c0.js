import{_ as e,a as l,b as a}from"./ProposalViewModal.vue_vue_type_style_index_0_lang-8692c692.js";import{_ as t}from"./SweetAlert.vue_vue_type_style_index_0_lang-d2e67747.js";import{b as s,c as o}from"./CreateProposalTasksModal-da0d1627.js";import{_ as i}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-c7a10a0b.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-cc0e0f70.js";import{_ as r,c as p}from"./VFlexTable.vue_vue_type_style_index_0_lang-2e756945.js";import{_ as d}from"./VDropdown.vue_vue_type_style_index_0_lang-32355ab6.js";import{_ as u}from"./VTag.vue_vue_type_style_index_0_lang-a4c61571.js";import{_ as c}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-dbf0ab88.js";import{_}from"./VControl-cd7a06dd.js";import{e as m,v,x as y,r as g,Z as b,o as x,B as k,C as f,D as h,E as w,F as j,K as C,W as P,l as T,j as V,N as A,U as I,V as S,aR as O,M,T as D,z as U,H as L,G as H,I as $}from"./index-6ec76f2c.js";import{_ as E,a as F}from"./search-4-dark-2b5b440c.js";import{u as N}from"./useAPI-75ddec04.js";import{u as W}from"./useNotyf-f5a64182.js";import{e as B,g as K}from"./useSupportElement-51074a9f.js";import{u as R}from"./viewWrapper-442db619.js";import"./VModal.vue_vue_type_style_index_0_lang-4619ed61.js";import"./VRadio.vue_vue_type_style_index_0_lang-49fb15a5.js";import"./VLabel.vue_vue_type_script_setup_true_lang-890769c0.js";import"./useVFieldContext-9f8928d8.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-0ddcd2a4.js";import"./VField.vue_vue_type_script_setup_true_lang-12cdb0f5.js";import"./userSession-d90803bf.js";import"./costItems-cc57c928.js";import"./VInput.vue_vue_type_script_setup_true_lang-94e4ee6c.js";import"./V-Snack.vue_vue_type_style_index_0_lang-ff52b2f2.js";import"./VIcon.vue_vue_type_script_setup_true_lang-94f24f7b.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-a79f9266.js";import"./VAvatar.vue_vue_type_style_index_0_lang-8252aa84.js";import"./VOption.vue_vue_type_style_index_0_lang-84b07de9.js";import"./VIconButton-79dc9d51.js";import"./VFlex.vue_vue_type_style_index_0_lang-b3c54b82.js";import"./useDropdown-ca6d335e.js";import"./VPlaceloadWrap-8c7451bd.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-47df2e29.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-72130ba3.js";import"./notyf-0decad19.js";import"./useThemeColors-610dce37.js";const Y={class:"flex-toolbar is-reversed is-flex space-between my-4"},z=h("div",null,null,-1),G={key:0},J={key:1,class:"flex-list-wrapper flex-list-v2"},Q={class:"item-name dark-inverted"},Z={class:"item-meta"},q=["innerHTML"],X={class:"light-text"},ee={class:"item-name dark-inverted"},le={class:"light-text"},ae={class:"item-name dark-inverted"},te={class:"light-text"},se=["onClick"],oe=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Proposal Details")],-1)],ie=["onClick"],ne=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),h("div",{class:"meta"},[h("span",null,"Preview"),h("span",null,"Preview proposal detail")],-1)],re=h("hr",{class:"dropdown-divider"},null,-1),pe=["onClick"],de=[h("div",{class:"icon"},[h("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Mark Approved"),h("span",null,"Mark Proposal As Approved")],-1)],ue=["onClick"],ce=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),h("div",{class:"meta"},[h("span",null,"Delete"),h("span",null,"Delete from list")],-1)],_e=h("img",{class:"light-image",src:E,alt:""},null,-1),me=h("img",{class:"dark-image",src:F,alt:""},null,-1),ve=m({__name:"TemplatePropsalsList",props:{activeTab:{default:"active"},leadId:{default:""},allProposal:{type:Boolean,default:!1}},setup(m){const U=m,L=v();y();const H=N(),$=W(),E=g(!1),F=g([]),R=g(!1),ve=g(""),ye=g(!1),ge=g(!1),be=g(""),xe=g("");g(U.activeTab);const ke=g({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),fe=g({title:"",subtitle:"",isSweetAlertOpen:!1,btntext:""}),he=async()=>{try{E.value=!0;await H.delete(`/api/lead-proposal/${xe.value}/`);$.success("Proposal delete successfully"),Ie()}catch(e){$.error(` ${e}, Proposal`),$.error("Something went wrong please try later")}finally{E.value=!1,ke.value.isSweetAlertOpen=!1}},we={picture:{label:"Proposal",grow:!0,media:!0},deadline:"Cost Items",amount:{label:"Total Amount",media:!0},customer:"Created At",actions:{label:"Actions",align:"end"}},je=b((()=>{if(be.value){const e=new RegExp(be.value,"i");return F.value.filter((l=>l.title.match(e)||l.approval_deadline.match(e)))}return F.value})),Ce=g(!1),Pe=g(!1),Te=g(!1),Ve=g(""),Ae=e=>{L.push(`/sidebar/dashboard/proposals/${e}`)},Ie=()=>{(async()=>{try{E.value=!0;const e=await H.get("/api/lead-proposal/templates/");F.value=e.data}catch(e){$.error(` ${e}, Lead`)}finally{E.value=!1}})()};return x((()=>{Ie()})),(m,v)=>{const y=_,g=c,b=p,x=u,L=d,N=r,W=n,Se=i,Oe=s,Me=e,De=l,Ue=o,Le=t,He=a;return k(),f("div",null,[h("div",Y,[w(y,{icon:"feather:search"},{default:j((()=>[C(h("input",{"onUpdate:modelValue":v[0]||(v[0]=e=>V(be)?be.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[P,T(be)]])])),_:1}),z]),T(E)?(k(),f("div",G,[w(g)])):(k(),f("div",J,[T(je).length>0&&T(F).length>0?(k(),A(N,{key:0,data:T(je),columns:we,rounded:""},{body:j((()=>[w(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(k(!0),f(I,null,S(T(je),(e=>(k(),f("div",{key:e.id,class:"flex-table-item"},[w(b,{column:{media:!0,grow:!0},class:"cu-pointer",onClick:l=>Ae(e.id)},{default:j((()=>[h("div",null,[h("span",Q,D(e.title),1),h("span",Z,[h("span",{innerHTML:e.introductory_text},null,8,q)])])])),_:2},1032,["onClick"]),w(b,{class:"cu-pointer",onClick:l=>Ae(e.id)},{default:j((()=>[h("span",X,D(),1),w(x,{rounded:"",color:"primary",label:e.cost_items},null,8,["label"])])),_:2},1032,["onClick"]),w(b,{class:"cu-pointer",onClick:l=>Ae(e.id),column:{media:!0}},{default:j((()=>[h("div",null,[h("span",ee,"$"+D(e.proposalAmount),1),h("span",le,D(e.payment_status),1)])])),_:2},1032,["onClick"]),w(b,{column:{media:!0},class:"cu-pointer",onClick:l=>Ae(e.id)},{default:j((()=>[h("div",null,[h("span",ae,D(T(B)(e.created_at)),1),h("span",te,D(T(K)(e.created_at)),1)])])),_:2},1032,["onClick"]),w(b,{column:{align:"end"}},{default:j((()=>[w(L,{class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:j((()=>[h("a",{role:"menuitem",onClick:l=>{return a=e.id,ve.value=a,void(R.value=!0);var a},class:"dropdown-item is-media"},oe,8,se),h("a",{disabled:"",role:"menuitem",onClick:l=>{return a=e.id,Pe.value=a,void(Ce.value=!Ce.value);var a},class:"dropdown-item is-media"},ne,8,ie),re,h("a",{role:"menuitem",onClick:l=>(async(e,l)=>{try{await H.patch(`/api/lead-proposal/${l}/`,{status:e}),$.success(`You have ${e} this proposal.`),Ie()}catch(a){console.log(a)}})("approved",e.id),class:"dropdown-item is-media"},de,8,pe),h("a",{role:"menuitem",onClick:l=>{return a=e.id,xe.value=a,void(ke.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a},class:"dropdown-item is-media"},ce,8,ue)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):M("",!0),T(F).length<1&&0==T(je).length?(k(),A(W,{key:1,title:"There is no proposal created on this lead!",subtitle:"Too bad. Looks like we couldn't created any proposal on this Lead, please create proposal and release to the client",larger:""},{image:j((()=>[_e,me])),_:1})):M("",!0),T(je).length>5?(k(),A(Se,{key:2,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":7})):M("",!0)])),T(ye)?(k(),A(Oe,{key:2,createProposalTasksModal:T(ye),proposalId:T(ve),onCloseModalHandler:v[1]||(v[1]=e=>ye.value=!1),"onUpdate:OnSuccess":Ie},null,8,["createProposalTasksModal","proposalId"])):M("",!0),T(R)?(k(),A(Me,{key:3,leadId:U.leadId,proposalId:T(ve),leadProposalModal:T(R),"onUpdate:modalHandler":v[2]||(v[2]=e=>R.value=!1),"onUpdate:OnSuccess":Ie,onClearProposalId:v[3]||(v[3]=e=>ve.value="")},null,8,["leadId","proposalId","leadProposalModal"])):M("",!0),T(Ce)?(k(),A(De,{key:4,"preview-modal":T(Ce),proposalId:T(Pe),"onUpdate:modalHandler":v[4]||(v[4]=e=>Ce.value=!1)},null,8,["preview-modal","proposalId"])):M("",!0),T(Te)?(k(),A(Ue,{key:5,costItemModal:T(Te),proposalId:T(Ve),"onUpdate:modalHandler":v[5]||(v[5]=e=>Te.value=!1),"onUpdate:OnSuccess":Ie},null,8,["costItemModal","proposalId"])):M("",!0),T(ke).isSweetAlertOpen?(k(),A(Le,{key:6,isSweetAlertOpen:T(ke).isSweetAlertOpen,title:T(ke).title,subtitle:T(ke).subtitle,btntext:T(ke).btntext,onConfirm:he,onCancel:()=>T(ke).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):M("",!0),T(fe).isSweetAlertOpen?(k(),A(Le,{key:7,isSweetAlertOpen:T(fe).isSweetAlertOpen,title:T(fe).title,subtitle:T(fe).subtitle,btntext:T(fe).btntext,onConfirm:he,onCancel:()=>T(fe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):M("",!0),T(ge)?(k(),A(He,{key:8,leadProposalListModal:T(ge),leadID:U.leadId,"group-proposal-modal":T(ge),"onUpdate:modalHandler":v[6]||(v[6]=e=>ge.value=!1)},null,8,["leadProposalListModal","leadID","group-proposal-modal"])):M("",!0)])}}}),ye={class:"tabs-wrapper"},ge={class:"tabs-inner"},be={class:"tabs"},xe=[h("span",null,"Templates",-1)],ke=[h("span",null,"Catalog",-1)],fe={key:0,class:""},he=m({__name:"index",setup(e){const l=R(),a=g("proposalsTemplates");return l.setPageTitle("Proposals Templates"),U({title:"Proposals Templates - Ibex"}),(e,l)=>{const t=ve;return k(),f("div",null,[h("div",ye,[h("div",ge,[h("div",be,[h("ul",null,[h("li",{class:L(["proposalsTemplates"===T(a)?"is-active":"not-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>a.value="proposalsTemplates"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="proposalsTemplates")},xe,32)],2),h("li",{class:L(["catalog"===T(a)?"is-active":"not-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H($((e=>a.value="catalog"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="catalog")},ke,32)],2)])])])]),"proposalsTemplates"===T(a)?(k(),f("div",fe,[w(t)])):M("",!0)])}}});export{he as default};
