import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-f8652ad2.js";import{_ as l,a as t}from"./ProjectFiles-db9bd660.js";import{c as a,_ as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-89460929.js";import{_ as i}from"./VIconWrap.vue_vue_type_style_index_0_lang-29a5a1d7.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-13d7f09c.js";import{_ as o}from"./VCheckbox.vue_vue_type_style_index_0_lang-81b853c2.js";import{_ as d}from"./VTextarea.vue_vue_type_script_setup_true_lang-9ed598ab.js";import{_ as c}from"./VField.vue_vue_type_script_setup_true_lang-3ca21be8.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-9e422e68.js";import{_ as r}from"./VControl-9dd15a88.js";import{f as p,b as m,r as v,w as _,$ as h,o as f,av as y,C as b,D as g,E as k,F as x,G as w,K as j,U as C,L as V,X as U,N as T,aS as I,m as S,O as D,V as F,W as P,P as A,al as M,Q as E,R as O,S as K,B as R,J as $,I as N,x as B,H,k as J,aB as z,y as q}from"./index-83c2f084.js";import{_ as G,a as W}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-ebd2af88.js";import{u as Q}from"./useNotyf-47058c98.js";import{_ as X}from"./ExcelFileEditor-383e688a.js";import{b as Y,a as ee,C as le,f as te}from"./useSupportElement-a6730bec.js";import{_ as ae}from"./VModal.vue_vue_type_style_index_0_lang-1c7a01c7.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-f4679df3.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-581b6406.js";import{u as ne,_ as oe,a as de}from"./groupedCircleCharts-6afe0bcc.js";import{b as ce,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-135bb78e.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-c2d75a90.js";import{A as _e}from"./vue3-apexcharts.common-a8b44db6.js";import{u as he}from"./salesSparksChart-5891b259.js";import{u as fe}from"./revenueAreaChart-2d957fc5.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-3fdfebac.js";import{h as be}from"./moment-1b9a430c.js";import{_ as ge}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-b612b29d.js";import{p as ke}from"./index-c1fc2d09.js";import{a as xe}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-b6568d3d.js";import{_ as we}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-09def615.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-d1b33f67.js";import{o as Ce}from"./via-placeholder-24645670.js";import{_ as Ve}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-6dbeb71d.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-6e3880c7.js";import{_ as Te}from"./VDropdown.vue_vue_type_style_index_0_lang-aa3f61f4.js";import{_ as Ie}from"./VPlyr.vue_vue_type_style_index_0_lang-612e8333.js";import{f as Se}from"./index-5fa9b154.js";import{_ as De}from"./UIWidget.vue_vue_type_style_index_0_lang-7ad6560a.js";import{_ as Fe}from"./JobTodos.vue_vue_type_style_index_0_lang-c3bcc38b.js";import{_ as Pe}from"./UserCardDropdown-b95286be.js";import{_ as Ae}from"./VTag.vue_vue_type_style_index_0_lang-26e994f6.js";import{_ as Me}from"./VIconBox.vue_vue_type_style_index_0_lang-f61bd65b.js";import{_ as Ee}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-e504b0b1.js";const Oe=e=>(E("data-v-6b746c41"),e=e(),O(),e),Ke={class:"column is-12"},Le={class:"list-flex-toolbar is-reversed"},Re={class:"columns is-multiline"},$e={key:0,class:"column is-12 card p-4 curved mb-2"},Ne={class:"columns is-multiline"},Be={class:"column is-10"},He={class:"column is-2"},Je=Oe((()=>k("img",{class:"light-image",src:G,alt:""},null,-1))),ze=Oe((()=>k("img",{class:"dark-image",src:W,alt:""},null,-1))),qe={key:0,class:"column is-12 card p-4 curved mb-2"},Ge={class:"columns is-multiline"},We={class:"column is-10"},Ze={class:"column is-2"},Qe={class:"is-flex space-between mb-4 bottom-border"},Xe={class:"title is-5 m-0"},Ye={class:"content"},el={class:"is-flex"},ll={key:0,class:"columns is-multiline"},tl={class:"column is-6"},al={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},nl={class:"column is-2"},ol={class:"column is-2"},dl={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},rl={class:"column is-2"},pl={class:"is-flex columns is-multiline"},ml=p({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m();const t=Z(),p=Q(),E=v(!1),O={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},K=v(!1),L=v(!1),R=v(!1),$=v([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),N=v(""),B=v(""),H=v({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),J=v({title:"",is_template:!1,object:l.objectId??"",description:""}),z=v({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await t.get(`/api/calculation-section/?object=${l.objectId??""}&user_id=${l.userId??""}&is_template=${l.fetchTemplates??""}`);$.value=e.data}catch(e){console.error(e)}finally{E.value=!1}},G=async()=>{try{const e=J.value;await t.post("/api/calculation-section/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{E.value=!1}};_((()=>H.value.width),(()=>{let e=0;e=H.value.height*H.value.width,H.value.item_area=e.toFixed(2)})),_((()=>H.value.item_unit_price),(()=>{let e=0;e=H.value.item_area*H.value.item_unit_price,H.value.item_total_price=e.toFixed(2)})),_((()=>H.value.quantity),(()=>{let e=0;e=H.value.item_total_price*H.value.quantity,H.value.grand_total_price=e.toFixed(2)}));const W=async()=>{try{const e=H.value;e.section=N.value;await t.post("/api/calculation-section-items/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{E.value=!1}},X=h((()=>{if(B.value){const e=new RegExp(B.value,"i");return $.value.filter((l=>l.title?.match(e)))}return $.value})),ee=async e=>{try{await t.delete(`/api/calculation-section/${e}/`),p.success("Section deleted successfully!"),q()}catch(l){console.error(l),p.error("Failed to delete sheet.")}};return f((async()=>{await q(),await q()})),(e,l)=>{const t=A,p=M,m=r,v=u,_=c,h=d,f=o,E=n,$=i,q=a,Z=s,Q=y("tooltip");return b(),g("div",Ke,[k("div",Le,[x(p,null,{default:w((()=>[x(t,{icon:L.value?"fas fa-window-close":"fas fa-plus",color:L.value?"warning":"primary",class:"ml-2",raised:"",onClick:l[0]||(l[0]=e=>L.value=!L.value)},{default:w((()=>[j(C(L.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),x(t,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>L.value=!L.value)},{default:w((()=>[j("Import")])),_:1})])),_:1}),k("div",null,[x(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>B.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,B.value]])])),_:1})])]),k("div",Re,[x(I,{name:"translate-page-y"},{default:w((()=>[L.value?(b(),g("div",$e,[k("div",Ne,[k("div",Be,[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:J.value.title,"onUpdate:modelValue":l[3]||(l[3]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(h,{modelValue:J.value.description,"onUpdate:modelValue":l[4]||(l[4]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",He,[x(t,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:w((()=>[j(" Add Section")])),_:1}),x(m,{raw:"",subcontrol:""},{default:w((()=>[x(f,{modelValue:J.value.is_template,"onUpdate:modelValue":l[5]||(l[5]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),S(X).length?T("",!0):(b(),D(E,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:w((()=>[Je,ze])),_:1})),x(I,{name:"translate-page-y"},{default:w((()=>[R.value?(b(),g("div",qe,[k("div",Ge,[k("div",We,[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:z.value.title,"onUpdate:modelValue":l[6]||(l[6]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(h,{modelValue:z.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",Ze,[x(t,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:w((()=>[j(" Add Section")])),_:1}),x(m,{raw:"",subcontrol:""},{default:w((()=>[x(f,{modelValue:z.value.is_template,"onUpdate:modelValue":l[8]||(l[8]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),x(I,{name:"from-bottom"},{default:w((()=>[S(X).length?(b(!0),g(F,{key:0},P(S(X),((e,a)=>(b(),g("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[k("div",Qe,[k("div",null,[k("h4",Xe,C(e.title),1),k("div",Ye,[k("p",null,C(S(Y)(e.created_at)),1)])]),k("div",el,[x($,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),V(x($,{icon:"fas fa-plus",color:K.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{N.value=e,K.value=!K.value,0==K.value&&(H.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),V(x($,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),x($,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),K.value?(b(),g("div",ll,[k("div",tl,[x(_,{label:"Title"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.title,"onUpdate:modelValue":l[9]||(l[9]=e=>H.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",al,[x(_,{label:"Height"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.height,"onUpdate:modelValue":l[10]||(l[10]=e=>H.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",sl,[x(_,{label:"Width"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.width,"onUpdate:modelValue":l[11]||(l[11]=e=>H.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",il,[x(_,{label:"Area"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.item_area,"onUpdate:modelValue":l[12]||(l[12]=e=>H.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",nl,[x(_,{label:"Unit"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.unit,"onUpdate:modelValue":l[13]||(l[13]=e=>H.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ol,[x(_,{label:"Unit Price"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.item_unit_price,"onUpdate:modelValue":l[14]||(l[14]=e=>H.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",dl,[x(_,{label:"Total Price"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.item_total_price,"onUpdate:modelValue":l[15]||(l[15]=e=>H.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",cl,[x(_,{label:"Quantity"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.quantity,"onUpdate:modelValue":l[16]||(l[16]=e=>H.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ul,[x(_,{label:"Grand Total"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.grand_total_price,"onUpdate:modelValue":l[17]||(l[17]=e=>H.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",rl,[x(t,{light:"",fullwidth:"",onClick:W,color:"primary",outlined:"",class:"mt-5"},{default:w((()=>[j("Add Item")])),_:1})])])):T("",!0),k("div",pl,[e.items.length?(b(),D(Z,{key:0,class:"column is-12",data:e.items,columns:O,compact:""},{body:w((()=>[x(I,{name:"list",tag:"div",class:"flex-list-inner"},{default:w((()=>[(b(!0),g(F,null,P(e.items,(e=>(b(),g("div",{key:e.id,class:"flex-table-item"},[x(q,{column:{grow:!0},"data-th":"Label"},{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,{column:{align:"end"}},{default:w((()=>[x($,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),x($,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):T("",!0)])])))),128)):T("",!0)])),_:1})])])}}}),vl=K(ml,[["__scopeId","data-v-6b746c41"]]),_l=e=>(E("data-v-00dd0426"),e=e(),O(),e),hl={key:1},fl={class:"columns is-multiline"},yl={class:"list-flex-toolbar is-reversed column is-12"},bl={class:"multiselect-single-label"},gl=["src"],kl=["src"],xl={class:"is-flex"},wl={class:"card p-4 curved is-flex space-between"},jl={class:"subtitle is-5 m-0"},Cl={class:"content"},Vl={class:"is-flex"},Ul={class:"modal-form columns is-multiline"},Tl={class:"file has-name"},Il={class:"file-label"},Sl=_l((()=>k("span",{class:"file-cta"},[k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})]),k("span",{class:"file-label"}," Choose a file… ")],-1))),Dl={class:"file-name light-text"},Fl=p({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e,t=m();v(null);const a=Z(),s=Q(),n=v(!1);v([[""]]);const o=v([]),d=v([]),p=v(""),y=v(!1);v("");const I=v("");v("");const E=v(!1),O=v(0),K=v({file:"",title:"",user_id:t.user.id,object_id:l.objectId}),L=e=>{let l=e.target.files[0];K.value.file=l,I.value=l.name,K.value.title=l.name},N=v(""),B=v([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),H=async()=>{try{n.value=!0;const e=await a.get("/api/excel-files/");o.value=e.data}catch(e){console.error(e)}finally{n.value=!1}},J=(e="")=>{O.value=e,E.value=!0},z=v(!1),q=async()=>{try{z.value=!0;const e=ee(K.value,[""]);await a.post("/api/excel-files/upload-excel/",e);H(),s.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,y.value=!1}};_((()=>N.value),(e=>{e&&(async e=>{try{z.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),s.success("Sheet create successfully"),H()}catch(l){console.error(l)}finally{z.value=!1,y.value=!1}})(e)}));v("excel");const G=h((()=>{if(p.value){const e=new RegExp(p.value,"i");return o.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return o.value.filter((e=>0==e.is_template))}));return h((()=>{if(p.value){const e=new RegExp(p.value,"i");return d.value.filter((l=>l.title?.match(e)))}return d.value})),f((async()=>{l.fetchAll&&await H(),l.userId&&(async()=>{try{n.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);o.value=e.data}catch(e){console.error(e)}finally{n.value=!1}})(),(async()=>{try{n.value=!0;const e=await a.get("/api/excel-files/templates/");d.value=e.data,B.value=d.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{n.value=!1}})(),await H()})),(e,l)=>{const t=ie,o=R("Multiselect"),d=r,m=c,v=A,_=M,h=i,f=X,z=se,W=u,Z=ae;return n.value?(b(),D(t,{key:0})):(b(),g("div",hl,[k("div",fl,[k("div",yl,[x(_,null,{default:w((()=>[x(m,{style:{width:"260px"}},{default:w((({id:e})=>[x(d,null,{default:w((()=>[x(o,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:B.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:w((({value:e})=>[k("div",bl,[k("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,gl),j(" "+C(e.name),1)])])),option:w((({option:e})=>[k("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,kl),j(" "+C(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),x(v,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>J())},{default:w((()=>[j("New Sheet")])),_:1}),x(v,{icon:"fas fa-upload",raised:"",light:"",onClick:l[2]||(l[2]=e=>y.value=!y.value),outlined:"",color:"primary"},{default:w((()=>[j(" File ")])),_:1})])),_:1}),k("div",xl,[x(d,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,p.value]])])),_:1})])]),(b(!0),g(F,null,P(S(G),((e,l)=>(b(),g("div",{class:"column is-6",key:e.id},[k("div",wl,[k("div",null,[k("h4",jl,C(e.title),1),k("div",Cl,[k("p",null,C(S(Y)(e.created_at)),1)])]),k("div",Vl,[x(h,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>J(e.id),"has-background":""},null,8,["onClick"]),x(h,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),s.success("Sheet deleted successfully!"),H()}catch(l){console.error(l),s.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128))]),E.value?(b(),D(f,{key:0,class:"fullscreen","excel-file-modal":E.value,fileId:O.value,isTemplate:!1,"onUpdate:modalHandler":l[4]||(l[4]=e=>{E.value=!1,H()})},null,8,["excel-file-modal","fileId"])):T("",!0),x(Z,{is:"form",open:y.value,title:"Upload Task File",size:"medium",actions:"right",onClose:l[7]||(l[7]=e=>y.value=!1),onSubmit:$(q,["prevent"])},{content:w((()=>[k("div",Ul,[x(m,{class:"column is-12"},{default:w((()=>[x(z,null,{default:w((()=>[j("File Title")])),_:1}),x(d,null,{default:w((()=>[x(W,{modelValue:K.value.title,"onUpdate:modelValue":l[5]||(l[5]=e=>K.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),x(m,{class:"column is-12",grouped:""},{default:w((()=>[x(d,null,{default:w((()=>[k("div",Tl,[k("label",Il,[k("input",{onChange:L,class:"file-input",type:"file",name:"file",required:""},null,32),Sl,k("span",Dl,C(I.value?I.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:w((()=>[x(v,{onClick:l[6]||(l[6]=e=>y.value=!1),raised:""},{default:w((()=>[j("Close")])),_:1})])),action:w((()=>[x(v,{type:"submit",color:"primary",raised:""},{default:w((()=>[j("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Pl=K(Fl,[["__scopeId","data-v-00dd0426"]]),Al={class:"columns is-multiline"},Ml={class:"column is-3"},El={class:"column is-3"},Ol={class:"column is-3"},Kl={class:"column is-3"},Ll={class:"column is-6"},Rl={class:"column is-6"},$l={class:"column is-6"},Nl={class:"column is-6"},Bl={class:"column is-6"},Hl={class:"column is-6"},Jl=p({__name:"JobReport",setup(e){const{spark1:l,spark2:t,spark3:a,spark4:s}=he(),{revenueOptions:i}=fe(),{lineStatsChartOptions:n}=ce(),{flexRadialChartCircleOptions:o}=ue(),{flexRadialChartStripesOptions:d}=re(),{widgetGaugeGroup1Options:c,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ne();return(e,_)=>{const h=ve,f=me,y=oe,j=de;return b(),g("div",Al,[k("div",Ml,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark1",height:S(l).chart.height,type:S(l).chart.type,series:S(l).series,options:S(l)},null,8,["height","type","series","options"])])),_:1})]),k("div",El,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark2",height:S(t).chart.height,type:S(t).chart.type,series:S(t).series,options:S(t)},null,8,["height","type","series","options"])])),_:1})]),k("div",Ol,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark3",height:S(a).chart.height,type:S(a).chart.type,series:S(a).series,options:S(a)},null,8,["height","type","series","options"])])),_:1})]),k("div",Kl,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark4",height:S(s).chart.height,type:S(s).chart.type,series:S(s).series,options:S(s)},null,8,["height","type","series","options"])])),_:1})]),k("div",Ll,[x(f,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:w((()=>[x(S(_e),{id:"line-stats-widget-chart",height:S(n).chart.height,type:S(n).chart.type,series:S(n).series,options:S(n)},null,8,["height","type","series","options"])])),_:1})]),k("div",Rl,[x(f,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:w((()=>[x(S(_e),{id:"line-stats-area-chart",height:S(i).chart.height,type:S(i).chart.type,series:S(i).series,options:S(i)},null,8,["height","type","series","options"])])),_:1})]),k("div",$l,[x(y,{title:"Sales Revenue",straight:""},{default:w((()=>[x(S(_e),{id:"flex-stat-circle",height:S(o).chart.height,type:S(o).chart.type,series:S(o).series,options:S(o)},null,8,["height","type","series","options"])])),_:1})]),k("div",Nl,[x(y,{title:"Sales Revenue",straight:""},{default:w((()=>[x(S(_e),{id:"flex-stat-radial",height:S(d).chart.height,type:S(d).chart.type,series:S(d).series,options:S(d)},null,8,["height","type","series","options"])])),_:1})]),k("div",Bl,[x(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:w((()=>[x(S(_e),{id:"group-radial-1",height:S(p).chart.height,type:S(p).chart.type,series:S(p).series,options:S(p)},null,8,["height","type","series","options"])])),chart2:w((()=>[x(S(_e),{id:"group-radial-2",height:S(m).chart.height,type:S(m).chart.type,series:S(m).series,options:S(m)},null,8,["height","type","series","options"])])),chart3:w((()=>[x(S(_e),{id:"group-radial-3",height:S(v).chart.height,type:S(v).chart.type,series:S(v).series,options:S(v)},null,8,["height","type","series","options"])])),_:1})]),k("div",Hl,[x(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:w((()=>[x(S(_e),{id:"group-gauge-1",height:S(c).chart.height,type:S(c).chart.type,series:S(c).series,options:S(c)},null,8,["height","type","series","options"])])),chart2:w((()=>[x(S(_e),{id:"group-gauge-2",height:S(u).chart.height,type:S(u).chart.type,series:S(u).series,options:S(u)},null,8,["height","type","series","options"])])),chart3:w((()=>[x(S(_e),{id:"group-gauge-3",height:S(r).chart.height,type:S(r).chart.type,series:S(r).series,options:S(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),zl=e=>(E("data-v-1f68036b"),e=e(),O(),e),ql={class:"timeline-wrapper"},Gl=zl((()=>k("div",{class:"timeline-header"},null,-1))),Wl={class:"timeline-wrapper-inner"},Zl={class:"timeline-container"},Ql={class:"timeline-item is-unread"},Xl={class:"date"},Yl={class:"content-wrap"},et={class:"content-box"},lt=zl((()=>k("div",{class:"status"},null,-1))),tt={class:"box-text"},at={class:"meta-text"},st=["innerHTML"],it=p({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,t=Z(),a=v([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await t.get(`/api/activity-logs/?object_id=${l.object_id}`);a.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const t=ye;return b(),g("div",ql,[Gl,k("div",Wl,[k("div",Zl,[(b(!0),g(F,null,P(S(a),(e=>(b(),g("div",Ql,[k("div",Xl,[k("span",null,C(S(be)(e.timestamp).format("ddd, mm yyyy")),1)]),k("div",{class:N(["dot",s[e.action]])},null,2),k("div",Yl,[k("div",et,[lt,x(t,{picture:e.actor_info?.avatar},null,8,["picture"]),k("div",tt,[k("div",at,[k("p",null,[k("span",null,C(e.actor_info?.username??"N/A")+" "+C(e.actor_info?.last_name??"N/A"),1),k("span",{class:"log-message",innerHTML:e.message},null,8,st)]),k("span",null,C(S(be)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),nt=K(it,[["__scopeId","data-v-1f68036b"]]),ot={class:"table is-striped is-fullwidth"},dt=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Job"),k("th",{scope:"col"},"ID"),k("th",{scope:"col"},"Title"),k("th",{scope:"col"},"Status"),k("th",{scope:"col"},"Total Price"),k("th",{scope:"col"},"Total Tax"),k("th",{scope:"col"},"Amount Paid"),k("th",{scope:"col"},"Balance"),k("th",{scope:"col"},"Deadline"),k("th",{scope:"col"},"Date Paid"),k("th",{scope:"col"},"Files"),k("th",{scope:"col",class:"is-end"},"Actions")])],-1),ct=k("td",null,"Tina",-1),ut=k("td",null,"Bergmann",-1),rt=k("td",null,"Sales",-1),pt=k("td",null,"Tina",-1),mt=k("td",null,"Bergmann",-1),vt=k("td",null,"Sales",-1),_t=k("td",null,"Tina",-1),ht=k("td",null,"Bergmann",-1),ft=k("td",null,"Sales",-1),yt=k("td",null,"Bergmann",-1),bt=k("td",null,"Sales",-1),gt={class:"is-end"},kt={class:"is-flex is-justify-content-flex-end"},xt=k("td",null,"Tina",-1),wt=k("td",null,"Bergmann",-1),jt=k("td",null,"Sales",-1),Ct=k("td",null,"Tina",-1),Vt=k("td",null,"Bergmann",-1),Ut=k("td",null,"Sales",-1),Tt=k("td",null,"Tina",-1),It=k("td",null,"Bergmann",-1),St=k("td",null,"Sales",-1),Dt=k("td",null,"Bergmann",-1),Ft=k("td",null,"Sales",-1),Pt={class:"is-end"},At={class:"is-flex is-justify-content-flex-end"},Mt=k("td",null,"Tina",-1),Et=k("td",null,"Bergmann",-1),Ot=k("td",null,"Sales",-1),Kt=k("td",null,"Tina",-1),Lt=k("td",null,"Bergmann",-1),Rt=k("td",null,"Sales",-1),$t=k("td",null,"Tina",-1),Nt=k("td",null,"Bergmann",-1),Bt=k("td",null,"Sales",-1),Ht=k("td",null,"Bergmann",-1),Jt=k("td",null,"Sales",-1),zt={class:"is-end"},qt={class:"is-flex is-justify-content-flex-end"},Gt=k("td",null,"Tina",-1),Wt=k("td",null,"Bergmann",-1),Zt=k("td",null,"Sales",-1),Qt=k("td",null,"Tina",-1),Xt=k("td",null,"Bergmann",-1),Yt=k("td",null,"Sales",-1),ea=k("td",null,"Tina",-1),la=k("td",null,"Bergmann",-1),ta=k("td",null,"Sales",-1),aa=k("td",null,"Bergmann",-1),sa=k("td",null,"Sales",-1),ia={class:"is-end"},na={class:"is-flex is-justify-content-flex-end"},oa=p({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,t=ke;B();const a=v("");return v(l.activeTab),h((()=>{if(a.value){const e=new RegExp(a.value,"i");return t.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return t})),(e,l)=>{const t=ge;return b(),g("table",ot,[dt,k("tbody",null,[k("tr",null,[ct,ut,rt,pt,mt,vt,_t,ht,ft,yt,bt,k("td",gt,[k("div",kt,[x(t)])])]),k("tr",null,[xt,wt,jt,Ct,Vt,Ut,Tt,It,St,Dt,Ft,k("td",Pt,[k("div",At,[x(t)])])]),k("tr",null,[Mt,Et,Ot,Kt,Lt,Rt,$t,Nt,Bt,Ht,Jt,k("td",zt,[k("div",qt,[x(t)])])]),k("tr",null,[Gt,Wt,Zt,Qt,Xt,Yt,ea,la,ta,aa,sa,k("td",ia,[k("div",na,[x(t)])])])])])}}}),da={class:"table is-striped is-fullwidth"},ca=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"First Name"),k("th",{scope:"col"},"Last Name"),k("th",{scope:"col"},"Position"),k("th",{scope:"col",class:"is-end"},[k("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ua=k("td",null,"Tina",-1),ra=k("td",null,"Bergmann",-1),pa=k("td",null,"Head of Sales",-1),ma={class:"is-end"},va={class:"is-flex is-justify-content-flex-end"},_a=k("td",null,"John",-1),ha=k("td",null,"Wistmus",-1),fa=k("td",null,"Senior Executive",-1),ya={class:"is-end"},ba={class:"is-flex is-justify-content-flex-end"},ga=k("td",null,"Sam",-1),ka=k("td",null,"Watson",-1),xa=k("td",null,"Software Engineer",-1),wa={class:"is-end"},ja={class:"is-flex is-justify-content-flex-end"},Ca=k("td",null,"Jolaine",-1),Va=k("td",null,"Joestar",-1),Ua=k("td",null,"HR Manager",-1),Ta={class:"is-end"},Ia={class:"is-flex is-justify-content-flex-end"},Sa=k("td",null,"Anders",-1),Da=k("td",null,"Jensen",-1),Fa=k("td",null,"Accountant",-1),Pa={class:"is-end"},Aa={class:"is-flex is-justify-content-flex-end"},Ma=p({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,t=ke;B();const a=v("");return v(l.activeTab),h((()=>{if(a.value){const e=new RegExp(a.value,"i");return t.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return t})),(e,l)=>{const t=ge;return b(),g("table",da,[ca,k("tbody",null,[k("tr",null,[ua,ra,pa,k("td",ma,[k("div",va,[x(t)])])]),k("tr",null,[_a,ha,fa,k("td",ya,[k("div",ba,[x(t)])])]),k("tr",null,[ga,ka,xa,k("td",wa,[k("div",ja,[x(t)])])]),k("tr",null,[Ca,Va,Ua,k("td",Ta,[k("div",Ia,[x(t)])])]),k("tr",null,[Sa,Da,Fa,k("td",Pa,[k("div",Aa,[x(t)])])])])])}}}),Ea={class:"columns is-multiline"},Oa={class:"column is-12"},Ka={class:"toolbar"},La={class:"tabs-inner"},Ra={class:"tabs"},$a=k("span",null,"Estimate",-1),Na=[$a],Ba=k("span",null,"Budget",-1),Ha=[Ba],Ja=k("span",null,"Owner Invoice",-1),za=[Ja],qa=k("li",{class:"tab-naver"},null,-1),Ga={key:0,class:"column is-12"},Wa={key:1,class:"column is-12"},Za={key:2,class:"column is-12"},Qa=p({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;B();const t=v("estimate"),a=v("");return h((()=>{if(a.value){const e=new RegExp(a.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const a=Ma,s=oa;return b(),g("div",Ea,[k("div",Oa,[k("div",Ka,[k("div",La,[k("div",Ra,[k("ul",null,[k("li",{class:N(["estimate"===S(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>t.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>t.value="estimate")},Na,32)],2),k("li",{class:N(["budget"===S(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H($((e=>t.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>t.value="budget")},Ha,32)],2),k("li",{class:N(["invoice"===S(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H($((e=>t.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>t.value="invoice")},za,32)],2),qa])])])])]),"estimate"===S(t)?(b(),g("div",Ga,[x(a)])):T("",!0),"budget"===S(t)?(b(),g("div",Wa)):T("",!0),"invoice"===S(t)?(b(),g("div",Za,[x(s)])):T("",!0)])}}}),Xa={class:"user-grid-toolbar"},Ya=k("span",{class:"icon"},[k("i",{class:"fas fa-plus"})],-1),es=k("span",null,"Progress",-1),ls={class:"user-grid user-grid-v1"},ts={class:"columns is-multiline"},as={class:"grid-item"},ss={class:"is-flex"},is=p({__name:"JobProgressLoader",setup(e){const l=v(""),t=v(0),a=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=r,n=R("Multiselect"),o=c,d=A,u=M,p=z,m=je,v=we;return b(),g("div",null,[k("div",Xa,[x(i,{icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>J(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,S(l)]])])),_:1}),x(u,null,{default:w((()=>[x(o,{class:"h-hidden-mobile"},{default:w((()=>[x(i,null,{default:w((()=>[x(n,{modelValue:S(t),"onUpdate:modelValue":s[1]||(s[1]=e=>J(t)?t.value=e:null),options:a,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),x(d,null,{default:w((()=>[Ya,es])),_:1})])),_:1})]),k("div",ls,[k("div",ts,[(b(),g(F,null,P(20,(e=>k("div",{key:e,class:"column is-3"},[k("div",as,[x(p,{height:"160px",centered:"",class:"mb-2"}),x(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),k("div",ss,[x(v,{size:"small",class:"mx-1"}),x(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ns={key:1},os={class:"card-grid-toolbar"},ds={class:"buttons"},cs=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),us=k("span",null,"Progress",-1),rs={class:"card-grid card-grid-v4"},ps=k("img",{class:"light-image",src:G,alt:""},null,-1),ms=k("img",{class:"dark-image",src:W,alt:""},null,-1),vs=["href","title"],_s=["src","alt"],hs={class:"card-grid-item-content"},fs={class:"dark-inverted"},ys={key:0},bs=k("summary",null,"Read More",-1),gs={key:0,class:"card-grid-item-footer"},ks={class:"meta"},xs={class:"dark-inverted"},ws=p({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,t=Z(),a=v(""),s=v(!1),i=v(!1),o=v(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],u=v([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),p=async()=>{try{s.value=!0;const e=await t.get(`/api/job-progress/by-job/${l.object}/`);u.value=e.data}catch(e){console.log(e)}finally{s.value=!1}};h((()=>u.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const m=h((()=>{if(a.value){const e=new RegExp(a.value,"i");return console.log(e),u.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return u.value}));return f((()=>{"job"===l.type&&p()})),(e,t)=>{const u=is,v=r,_=R("Multiselect"),h=c,f=A,y=n,M=ye,E=xe;return S(s)?(b(),D(u,{key:0})):(b(),g("div",ns,[k("div",os,[x(v,{icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>J(a)?a.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,S(a)]])])),_:1}),k("div",ds,[x(h,{class:"h-hidden-mobile"},{default:w((()=>[x(v,null,{default:w((()=>[x(_,{modelValue:S(o),"onUpdate:modelValue":t[1]||(t[1]=e=>J(o)?o.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),x(f,{onClick:t[2]||(t[2]=e=>i.value=!S(i)),color:"primary",raised:""},{default:w((()=>[cs,us])),_:1})])]),k("div",rs,[x(y,{class:N([0!==S(m).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[ps,ms])),_:1},8,["class"]),x(I,{name:"list",tag:"div",class:"columns is-multiline"},{default:w((()=>[(b(!0),g(F,null,P(S(m),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[k("img",{src:e.file,alt:e.title,onErrorOnce:t[3]||(t[3]=e=>S(Ce)(400,300))},null,40,_s),k("div",hs,[k("h3",fs,C(e.title?e.title:"No Title"),1),k("p",null,[j(C(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(b(),g("details",ys,[bs,j(" "+C(e.description?e.description:""),1)])):T("",!0)])]),e.uploaded_by_info?(b(),g("div",gs,[x(M,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),k("div",ks,[k("span",xs,C(e.uploaded_by_info.username??"N/A")+" "+C(e.uploaded_by_info.last_name??""),1),k("span",null,C(S(Y)(e.created_at)),1)])])):T("",!0)],8,vs)])))),128))])),_:1})]),S(i)?(b(),D(E,{key:0,job:l.object,openProgressModal:S(i),"onUpdate:OnSuccess":p,"onClose:ModalHandler":t[4]||(t[4]=e=>i.value=!1)},null,8,["job","openProgressModal"])):T("",!0)]))}}}),js={class:"modal-form columns is-multiline"},Cs={class:"column is-full"},Vs={class:"field"},Us=k("label",{class:"label"},"Title ",-1),Ts={class:"control"},Is={class:"field column is-half"},Ss={class:"file"},Ds={class:"file-label"},Fs={class:"file-cta"},Ps=k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})],-1),As={class:"file-label"},Ms=p({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e;v(null);const a=Z(),s=Q(),i=v(!1),n=m(),o=()=>{l("close:ModalHandler",!1)},d=v({type:t.type,object:t.object,title:"",uploaded_by:n.user.id,file:null}),u=async()=>{try{i.value=!0;const e=ee(d.value,["file"]);await a.post("/api/attachment/",e);le({object_type:"files",object_id:t.object,action:"CREATE",message:`Uploaded new file named <b>${d.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),o()}catch(e){console.log(e)}finally{i.value=!1}},p=v(""),_=e=>{const l=e.target,t=l.files?.[0];l.value="",t&&(d.value.file=t,p.value=t.name)};return f((()=>{})),(e,l)=>{const a=r,s=c,n=A,m=ae;return b(),D(m,{is:"form",open:t.openFileModal,title:"Add Progress",size:"medium",actions:"right",onSubmit:$(u,["prevent"]),onClose:o},{content:w((()=>[k("div",js,[k("div",Cs,[k("div",Vs,[Us,k("div",Ts,[V(k("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>S(d).title=e)},null,512),[[U,S(d).title]])])])]),k("div",Is,[x(s,{grouped:""},{default:w((()=>[x(a,null,{default:w((()=>[k("div",Ss,[k("label",Ds,[k("input",{onChange:_,class:"file-input",type:"file",name:"resume"},null,32),k("span",Fs,[Ps,k("span",As,C(S(p)?S(p):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:w((()=>[x(n,{type:"submit",color:"primary",loading:S(i),raised:""},{default:w((()=>[j(" Save")])),_:1},8,["loading"])])),cancel:w((()=>[x(n,{color:"light",onClick:o,raised:""},{default:w((()=>[j("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Es={key:0,class:"modal-form"},Os=["src"],Ks=["src"],Ls=["src"],Rs=["src"],$s={key:1,class:"modal-form"},Ns=k("h1",{class:"title is-5"},"No media file attached",-1),Bs=[Ns],Hs=p({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",t.document)})),(e,l)=>{const i=Ie,n=A,o=ae;return b(),D(o,{is:"form",open:t.openDocViewModal,title:t.title?t.title:"Attached Document",size:"xl",actions:"right",onClose:a},{content:w((()=>[t.document?(b(),g("div",Es,[t.document?.includes(".pdf")?(b(),g("iframe",{key:0,src:`${t.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Os)):t.document?.toLowerCase().includes(".doc")||t.document?.toLowerCase().includes(".docx")?(b(),g("iframe",{key:1,src:s(t.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ks)):t.document?.toLowerCase().includes(".xls")||t.document?.toLowerCase().includes(".xlsx")?(b(),g("iframe",{key:2,src:s(t.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ls)):T("",!0),t.document?.includes(".mp4")?(b(),D(i,{key:3,ratio:"4by3",source:t.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(b(),g("img",{key:4,src:t.document,alt:""},null,8,Rs))])):(b(),g("div",$s,Bs))])),cancel:w((()=>[x(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:w((()=>[j("Close")])),_:1})])),_:1},8,["open","title"])}}}),Js={class:"tile-grid-item"},zs={class:"tile-grid-item-inner"},qs=["src"],Gs={class:"meta"},Ws={class:"dark-inverted"},Zs=k("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),Qs=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),Xs=k("div",{class:"meta"},[k("span",null,"Download"),k("span",null,"Download this file")],-1),Ys=[Qs,Xs],ei=k("hr",{class:"dropdown-divider"},null,-1),li=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),ti=k("div",{class:"meta"},[k("span",null,"Delete"),k("span",null,"Delete this file")],-1),ai=[li,ti],si=p({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const t=e,a=v(""),s=v(!1),i=v(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=v("");return(e,d)=>{const c=Te;return b(),g("div",null,[k("div",Js,[k("div",zs,[k("img",{onClick:d[0]||(d[0]=e=>{return l=t.document,a.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[t.document?.file_info?.type]},null,8,qs),k("div",Gs,[k("span",Ws,C(t.document.title??"N/A"),1),k("span",null,[k("span",null,C(t.document?.file_info?.size??0)+" MB",1),Zs,k("span",null,"At:"+C(S(te)(t.document.created_at)),1)])]),x(c,{icon:"feather:more-vertical",spaced:"",right:""},{content:w((()=>[k("a",{role:"menuitem",onClick:d[1]||(d[1]=e=>(async(e,l)=>{try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");const a=await t.blob(),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(t){console.error("Download failed:",t)}})(t.document.file,t.document.title)),class:"dropdown-item is-media"},Ys),ei,k("a",{role:"menuitem",onClick:d[2]||(d[2]=e=>{return a=t.document.id,void l("deleteSelectedFile",a);var a}),class:"dropdown-item is-media"},ai)])),_:1})])]),S(s)?(b(),D(Hs,{key:0,openDocViewModal:S(s),document:S(a),DocumentType:S(o),title:S(i),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):T("",!0)])}}}),ii={key:1},ni={class:"tile-grid-toolbar"},oi={class:"buttons"},di=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ci=k("span",null,"File",-1),ui=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),ri=k("span",null,"Delete Folder",-1),pi={class:"tile-grid tile-grid-v2"},mi=k("img",{class:"light-image",src:G,alt:""},null,-1),vi=k("img",{class:"dark-image",src:W,alt:""},null,-1),_i=p({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const t=e,a=Q(),s=Z(),i=v(""),o=v(0),d=v(""),u=v(!1),p=v(!1),m=v([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),_=["All Files","Recently Updated","My Files","Team Files","Deprecated"];v("");const y=v({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),j=()=>{y.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},C=async()=>{try{const e=await s.delete(`/api/media-folder/${t.folderId}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),a.purple("Folder Deleted Successfully"),y.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},M=async(e="proposal_formats")=>{try{u.value=!0;const e=await s.get(`/api/attachment/by-object/${t.objectId}/?type=${t.docType}`);m.value=e.data}catch(l){console.log(l)}finally{u.value=!1}},E=async e=>{try{const l=await s.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),a.purple("File Deleted Successfully"),M()}catch(l){console.log(l)}},O=h((()=>i.value?m.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):m.value));return f((()=>{M()})),(e,l)=>{const a=ie,s=r,m=R("Multiselect"),v=c,h=A,f=n,K=si,L=Ue,$=Ms;return b(),g("div",null,[S(u)?(b(),D(a,{key:0,rows:4})):(b(),g("div",ii,[k("div",ni,[x(s,{icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>J(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,S(i)]])])),_:1}),k("div",oi,[x(v,{class:"h-hidden-mobile"},{default:w((()=>[x(s,null,{default:w((()=>[x(m,{modelValue:S(o),"onUpdate:modelValue":l[1]||(l[1]=e=>J(o)?o.value=e:null),options:_,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),x(h,{onClick:l[2]||(l[2]=e=>(d.value=t.docType,void(p.value=!p.value))),color:"primary",raised:""},{default:w((()=>[di,ci])),_:1}),x(h,{onClick:j,color:"danger",raised:""},{default:w((()=>[ui,ri])),_:1})])]),k("div",pi,[0!=S(O).length||S(u)?T("",!0):(b(),D(f,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[mi,vi])),_:1})),k("div",null,[x(I,{name:"list",tag:"div",class:"columns is-multiline"},{default:w((()=>[(b(!0),g(F,null,P(S(O),(e=>(b(),g("div",{key:e.id,class:"column is-4"},[x(K,{document:e,onDeleteSelectedFile:E},null,8,["document"])])))),128))])),_:1})])]),S(y).isSweetAlertOpen?(b(),D(L,{key:0,isSweetAlertOpen:S(y).isSweetAlertOpen,title:S(y).title,subtitle:S(y).subtitle,btntext:S(y).btntext,onConfirm:C,onCancel:()=>S(y).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):T("",!0),S(p)?(b(),D($,{key:1,openFileModal:S(p),object:t.objectId,type:S(d),"onClose:ModalHandler":l[3]||(l[3]=e=>p.value=!1),"onUpdate:OnSuccess":M},null,8,["openFileModal","object","type"])):T("",!0)]))])}}}),hi={class:"columns is-multiline"},fi={class:"column is-12"},yi={class:"column is-12"},bi=p({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},folderId:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=v(!1),s=Z(),i=Q(),n=()=>{l("update:modalHandler",!1)},o=v({id:"",type:t.type,object:t.object,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),p=async()=>{try{a.value=!0;const e=ee(o.value,[""]);await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),n()}catch(e){console.log(e)}finally{a.value=!1}};return f((()=>{(async()=>{try{a.value=!0;const e=ee(o.value,[""]);await s.post(`/api/attachment/${t.folderId}/`,e),i.success("File Uploaded successfully")}catch(e){console.log(e)}finally{a.value=!1}})()})),(e,l)=>{const s=u,i=r,m=c,v=d,_=A,h=ae;return b(),D(h,{is:"form",open:t.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:$(p,["prevent"]),onClose:l[2]||(l[2]=e=>n())},{content:w((()=>[k("div",hi,[k("div",fi,[x(m,{label:"Title *"},{default:w((()=>[x(i,null,{default:w((()=>[x(s,{modelValue:S(o).title,"onUpdate:modelValue":l[0]||(l[0]=e=>S(o).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",yi,[x(m,{label:"Description (Optional)"},{default:w((()=>[x(i,null,{default:w((()=>[x(v,{modelValue:S(o).description,"onUpdate:modelValue":l[1]||(l[1]=e=>S(o).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:w((()=>[x(_,{loading:S(a),type:"submit",color:"warning",raised:""},{default:w((()=>[j("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),gi={class:"toolbar-header toolbar is-flex space-between"},ki={class:"tabs-inner"},xi={class:"tabs is-boxed"},wi=[k("span",null,"Documents",-1)],ji=[k("span",null,"Photos",-1)],Ci=[k("span",null,"Videos",-1)],Vi=k("li",{class:"tab-naver"},null,-1),Ui={key:0},Ti={class:"toolbar-header toolbar is-flex space-between"},Ii={class:"tabs-inner"},Si={class:"tabs"},Di=[k("span",null,"Contracts",-1)],Fi=[k("span",null,"Customer Estimates",-1)],Pi=[k("span",null,"Job Scope",-1)],Ai=[k("span",null,"Asbestos & Lead Report",-1)],Mi=[k("span",null,"Permits",-1)],Ei=[k("span",null,"Bids & Material",-1)],Oi=[k("span",null,"Miscellaneous",-1)],Ki=[k("span",null,"Uploaded Files",-1)],Li=[k("span",null,"Calculations",-1)],Ri=["onKeydown","onClick"],$i={class:"is-cus-active"},Ni=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],Bi=k("li",{class:"tab-naver"},null,-1),Hi={class:"tile-grid tile-grid-v2"},Ji=k("img",{class:"light-image",src:G,alt:""},null,-1),zi=k("img",{class:"dark-image",src:W,alt:""},null,-1),qi={key:0},Gi={key:1},Wi={key:2},Zi={key:3},Qi={key:4},Xi={key:5},Yi={key:6},en={key:7},ln={key:8},tn={key:0},an={key:1},sn={class:"tabs-inner"},nn={class:"tabs"},on=[k("span",null,"Site Visit Photos",-1)],dn=[k("span",null,"Inspiration Photos",-1)],cn=[k("span",null,"Trade Photos",-1)],un=[k("span",null,"Design Approval Photos",-1)],rn=["onKeydown","onClick"],pn={class:"is-cus-active"},mn=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],vn=k("li",{class:"tab-naver"},null,-1),_n={class:"tile-grid tile-grid-v2"},hn=k("img",{class:"light-image",src:G,alt:""},null,-1),fn=k("img",{class:"dark-image",src:W,alt:""},null,-1),yn={key:0},bn={key:1},gn={key:2},kn={key:3},xn={key:0},wn={key:2},jn={class:"tabs-inner"},Cn={class:"tabs"},Vn=[k("span",null,"Job videos",-1)],Un=[k("span",null,"Other videos",-1)],Tn=["onKeydown","onClick"],In={class:"is-cus-active"},Sn=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],Dn=k("li",{class:"tab-naver"},null,-1),Fn={class:"tile-grid tile-grid-v2"},Pn=k("img",{class:"light-image",src:G,alt:""},null,-1),An=k("img",{class:"dark-image",src:W,alt:""},null,-1),Mn={key:0},En={key:1},On={key:0},Kn=p({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo"],setup(e,{emit:t}){const a=e;Q();const s=Z(),i=v("");v(0);const o=v(""),d=v("contracts"),c=v(!1),u=v([]),r=v("documents"),p=v("site_visits"),m=v("job_videos"),_=h((()=>i.value?Se.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Se)),y=()=>{t("getProjectInfo",null)},j=async(e="contracts")=>{try{d.value=e;const l=await s.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},V=v(""),U=v(!1),I=v([]),A=v([]),M=v([]),E=(e="")=>{V.value=e,U.value=!U.value},O=async(e="")=>{try{const l=await s.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?I.value=l.data:"photos"===e?A.value=l.data:"videos"===e&&(M.value=l.data)}catch(l){console.log(l)}},K=(e="documents")=>{"documents"===e?O("documents"):"photos"===e?O("photos"):"videos"===e&&O("videos")};return f((()=>{j(),K("documents")})),(e,t)=>{const s=n,i=_i,u=l,v=Pl,h=Ms,f=bi;return b(),g("div",null,[k("div",gi,[k("div",ki,[k("div",xi,[k("ul",null,[k("li",{class:N(["documents"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=H($((e=>r.value="documents"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>{r.value="documents",K("documents")})},wi,32)],2),k("li",{class:N(["photos"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=H($((e=>r.value="photos"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>{r.value="photos",K("photos")})},ji,32)],2),k("li",{class:N(["videos"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=H($((e=>r.value="videos"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>{r.value="videos",K("videos")})},Ci,32)],2),Vi])])])]),"documents"==S(r)?(b(),g("div",Ui,[k("div",Ti,[k("div",Ii,[k("div",Si,[k("ul",null,[k("li",{class:N(["contracts"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=H($((e=>j("contracts")),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>j("contracts"))},Di,32)],2),k("li",{class:N(["estimates"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=H($((e=>j("estimates")),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>j("estimates"))},Fi,32)],2),k("li",{class:N(["job_scope"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=H($((e=>d.value="job_scope"),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>d.value="job_scope")},Pi,32)],2),k("li",{class:N(["asbestos"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=H($((e=>d.value="asbestos"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>d.value="asbestos")},Ai,32)],2),k("li",{class:N(["permits"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=H($((e=>d.value="permits"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>d.value="permits")},Mi,32)],2),k("li",{class:N(["material"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[16]||(t[16]=H($((e=>d.value="material"),["prevent"]),["space"])),onClick:t[17]||(t[17]=e=>d.value="material")},Ei,32)],2),k("li",{class:N(["miscellaneous"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[18]||(t[18]=H($((e=>d.value="miscellaneous"),["prevent"]),["space"])),onClick:t[19]||(t[19]=e=>d.value="miscellaneous")},Oi,32)],2),k("li",{class:N(["files"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[20]||(t[20]=H($((e=>j("files")),["prevent"]),["space"])),onClick:t[21]||(t[21]=e=>j("files"))},Ki,32)],2),k("li",{class:N(["calculations"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[22]||(t[22]=H($((e=>j("calculations")),["prevent"]),["space"])),onClick:t[23]||(t[23]=e=>j("calculations"))},Li,32)],2),(b(!0),g(F,null,P(S(I),(e=>(b(),g("li",{key:e.id,class:N([S(d)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>j(e.title)},[k("span",null,C(e.title),1)],40,Ri)],2)))),128)),k("li",$i,[k("a",{tabindex:"0",role:"button",onKeydown:t[24]||(t[24]=H($((e=>E("documents")),["prevent"]),["space"])),onClick:t[25]||(t[25]=e=>E("documents"))},Ni,32)]),Bi])])])]),k("div",Hi,[x(s,{class:N([0!==S(_).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[Ji,zi])),_:1},8,["class"]),"contracts"==S(d)?(b(),g("div",qi,[x(i,{onDeleteFolderUpdate:t[26]||(t[26]=e=>K("documents")),"doc-type":"contracts","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"estimates"==S(d)?(b(),g("div",Gi,[x(i,{onDeleteFolderUpdate:t[27]||(t[27]=e=>K("documents")),"doc-type":"estimates","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"job_scope"==S(d)?(b(),g("div",Wi,[x(i,{onDeleteFolderUpdate:t[28]||(t[28]=e=>K("documents")),"doc-type":"job_scope","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"asbestos"==S(d)?(b(),g("div",Zi,[x(i,{onDeleteFolderUpdate:t[29]||(t[29]=e=>K("documents")),"doc-type":"asbestos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"permits"==S(d)?(b(),g("div",Qi,[x(i,{onDeleteFolderUpdate:t[30]||(t[30]=e=>K("documents")),"doc-type":"permits","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"material"==S(d)?(b(),g("div",Xi,[x(i,{onDeleteFolderUpdate:t[31]||(t[31]=e=>K("documents")),"doc-type":"material","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"miscellaneous"==S(d)?(b(),g("div",Yi,[x(i,{onDeleteFolderUpdate:t[32]||(t[32]=e=>K("documents")),"doc-type":"miscellaneous","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"files"==S(d)?(b(),g("div",en,[x(u,{projectId:a.leadId,files:a.uploaded_files,"onUpdate:onUploadFile":y},null,8,["projectId","files"])])):T("",!0),"calculations"==S(d)?(b(),g("div",ln,[x(v)])):T("",!0),(b(!0),g(F,null,P(S(I),(e=>(b(),g("div",{key:e.id},[S(d)==e.title?(b(),g("div",tn,[x(i,{onDeleteFolderUpdate:t[33]||(t[33]=e=>K("documents")),"doc-type":e.title,"object-id":a.leadId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),"photos"==S(r)?(b(),g("div",an,[k("div",sn,[k("div",nn,[k("ul",null,[k("li",{class:N(["site_visits"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[34]||(t[34]=H($((e=>j("site_visits")),["prevent"]),["space"])),onClick:t[35]||(t[35]=e=>{j("site_visits"),p.value="site_visits"})},on,32)],2),k("li",{class:N(["inspiration_photos"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[36]||(t[36]=H($((e=>j("inspiration_photos")),["prevent"]),["space"])),onClick:t[37]||(t[37]=e=>{j("inspiration_photos"),p.value="inspiration_photos"})},dn,32)],2),k("li",{class:N(["trade_photos"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[38]||(t[38]=H($((e=>j("trade_photos")),["prevent"]),["space"])),onClick:t[39]||(t[39]=e=>{j("trade_photos"),p.value="trade_photos"})},cn,32)],2),k("li",{class:N(["design_approval"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[40]||(t[40]=H($((e=>j("design_approval")),["prevent"]),["space"])),onClick:t[41]||(t[41]=e=>{j("design_approval"),p.value="design_approval"})},un,32)],2),(b(!0),g(F,null,P(S(A),(e=>(b(),g("li",{key:e.id,class:N([S(p)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),p.value=e.title}},[k("span",null,C(e.title),1)],40,rn)],2)))),128)),k("li",pn,[k("a",{tabindex:"0",role:"button",onKeydown:t[42]||(t[42]=H($((e=>E("photos")),["prevent"]),["space"])),onClick:t[43]||(t[43]=e=>E("photos"))},mn,32)]),vn])])]),k("div",_n,[x(s,{class:N([0!==S(_).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[hn,fn])),_:1},8,["class"]),"site_visits"==S(p)?(b(),g("div",yn,[x(i,{onDeleteFolderUpdate:t[44]||(t[44]=e=>K("photos")),"doc-type":"site_visits","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"inspiration_photos"==S(p)?(b(),g("div",bn,[x(i,{onDeleteFolderUpdate:t[45]||(t[45]=e=>K("photos")),"doc-type":"inspiration_photos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"trade_photos"==S(p)?(b(),g("div",gn,[x(i,{onDeleteFolderUpdate:t[46]||(t[46]=e=>K("photos")),"doc-type":"trade_photos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"design_approval"==S(p)?(b(),g("div",kn,[x(i,{onDeleteFolderUpdate:t[47]||(t[47]=e=>K("photos")),"doc-type":"design_approval","object-id":a.leadId},null,8,["object-id"])])):T("",!0),(b(!0),g(F,null,P(S(A),(e=>(b(),g("div",{key:e.id},[S(p)==e.title?(b(),g("div",xn,[x(i,{onDeleteFolderUpdate:t[48]||(t[48]=e=>K("photos")),"doc-type":e.title,"object-id":a.leadId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),"videos"==S(r)?(b(),g("div",wn,[k("div",jn,[k("div",Cn,[k("ul",null,[k("li",{class:N(["job_videos"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[49]||(t[49]=H($((e=>j("job_videos")),["prevent"]),["space"])),onClick:t[50]||(t[50]=e=>{m.value="job_videos",j("job_videos")})},Vn,32)],2),k("li",{class:N(["other_videos"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[51]||(t[51]=H($((e=>j("other_videos")),["prevent"]),["space"])),onClick:t[52]||(t[52]=e=>{m.value="other_videos",j("other_videos")})},Un,32)],2),(b(!0),g(F,null,P(S(M),(e=>(b(),g("li",{key:e.id,class:N([S(m)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),m.value=e.title}},[k("span",null,C(e.title),1)],40,Tn)],2)))),128)),k("li",In,[k("a",{tabindex:"0",role:"button",onKeydown:t[53]||(t[53]=H($((e=>E("videos")),["prevent"]),["space"])),onClick:t[54]||(t[54]=e=>E("videos"))},Sn,32)]),Dn])])]),k("div",Fn,[x(s,{class:N([0!==S(_).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[Pn,An])),_:1},8,["class"]),"job_videos"==S(m)?(b(),g("div",Mn,[x(i,{onDeleteFolderUpdate:t[55]||(t[55]=e=>K("videos")),"doc-type":"job_videos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"other_videos"==S(m)?(b(),g("div",En,[x(i,{"doc-type":"other_videos","object-id":a.leadId,onDeleteFolderUpdate:t[56]||(t[56]=e=>K("videos"))},null,8,["object-id"])])):T("",!0),(b(!0),g(F,null,P(S(M),(e=>(b(),g("div",{key:e.id},[S(m)==e.title?(b(),g("div",On,[x(i,{"doc-type":e.title,"object-id":a.leadId,folderId:e.id,onDeleteFolderUpdate:t[57]||(t[57]=e=>K("videos"))},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),S(c)?(b(),D(h,{key:3,openFileModal:S(c),object:a.leadId,type:S(o),"onClose:ModalHandler":t[58]||(t[58]=e=>c.value=!1),"onUpdate:OnSuccess":j},null,8,["openFileModal","object","type"])):T("",!0),S(U)?(b(),D(f,{key:4,"open-create-folder-modal":S(U),type:S(V),object:a.leadId,"onUpdate:modalHandler":t[59]||(t[59]=e=>U.value=!1),"onUpdate:onSuccess":t[60]||(t[60]=e=>K(S(V)))},null,8,["open-create-folder-modal","type","object"])):T("",!0)])}}}),Ln={class:"business-dashboard hr-dashboard"},Rn={class:"columns is-multiline"},$n={class:"column is-12"},Nn={class:"columns is-multiline"},Bn={class:"column is-12"},Hn={class:"block-header"},Jn={class:"left"},zn={class:"current-user"},qn={class:"center"},Gn=k("h4",{class:"block-heading"},"Address",-1),Wn={class:"block-text"},Zn=k("br",null,null,-1),Qn=k("br",null,null,-1),Xn={class:"right"},Yn=k("h4",{class:"block-heading"},"Managers",-1),eo={class:"candidates"},lo=k("button",null,[k("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),to={class:"column is-12"},ao={class:"toolbar"},so={class:"tabs-inner"},io={class:"tabs is-boxed"},no=[k("span",null,"Job Management",-1)],oo=[k("span",null,"Documents/Files",-1)],co=[k("span",null,"Proposals",-1)],uo=[k("span",null,"Tasks",-1)],ro=[k("span",null,"Activities",-1)],po=[k("span",null,"Job progress",-1)],mo=[k("span",null,"Calculations",-1)],vo=[k("span",null,"Finance",-1)],_o=[k("span",null,"Report",-1)],ho=k("li",{class:"tab-naver"},null,-1),fo={key:0,class:"column is-12"},yo={class:"columns is-multiline"},bo={class:"column is-8"},go={class:"columns is-multiline"},ko={class:"column is-12"},xo={class:"feed-settings"},wo=k("h3",{class:"dark-inverted"},"Job feeds",-1),jo={class:"buttons"},Co={class:"column is-4"},Vo={class:"side-text"},Uo=k("h3",{class:"dark-inverted"},"Job Description",-1),To=["innerHTML"],Io=k("a",{class:"action-link",tabindex:"0"},"Read More",-1),So={class:"column is-7 is-offset-1"},Do={class:"incoming"},Fo=k("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),Po=k("div",null,[k("span",{class:"item-name dark-inverted"},"Messages"),k("span",{class:"item-meta"},[k("span",null,"Inbox messages")])],-1),Ao=k("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),Mo=k("div",null,[k("span",{class:"item-name dark-inverted"},"Tasks"),k("span",{class:"item-meta"},[k("span",null,"Pending tasks")])],-1),Eo={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},Oo={key:4,class:"light-text"},Ko={class:"column is-12"},Lo={class:"recent-rookies"},Ro=k("div",{class:"recent-rookies-header"},[k("h3",{class:"dark-inverted"},"Internal Users"),k("a",{class:"action-link",tabindex:"0"},"View All")],-1),$o={class:"columns is-multiline user-grid user-grid-v4"},No={class:"column is-4"},Bo={class:"grid-item"},Ho={class:"dark-inverted"},Jo={class:"capitalized"},zo={class:"button-wrap has-text-centered"},qo={class:"column is-4"},Go={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},Wo=k("div",{class:"widget-toolbar"},[k("div",{class:"left"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),k("div",{class:"center"},[k("h3",null,"October 2020")]),k("div",{class:"right"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),Zo=k("table",{class:"calendar"},[k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Mon"),k("th",{scope:"col"},"Tue"),k("th",{scope:"col"},"Wed"),k("th",{scope:"col"},"Thu"),k("th",{scope:"col"},"Fri"),k("th",{scope:"col"},"Sat"),k("th",{scope:"col"},"Sun")])]),k("tbody",null,[k("tr",null,[k("td",{class:"prev-month"},"29"),k("td",{class:"prev-month"},"30"),k("td",{class:"prev-month"},"31"),k("td",null,"1"),k("td",null,"2"),k("td",null,"3"),k("td",null,"4")]),k("tr",null,[k("td",null,"5"),k("td",null,"6"),k("td",null,"7"),k("td",null,"8"),k("td",null,"9"),k("td",null,"10"),k("td",null,"11")]),k("tr",null,[k("td",null,"12"),k("td",null,"13"),k("td",null,"14"),k("td",null,"15"),k("td",null,"16"),k("td",null,"17"),k("td",{class:"current-day"},"18")]),k("tr",null,[k("td",null,"19"),k("td",null,"20"),k("td",null,"21"),k("td",null,"22"),k("td",null,"23"),k("td",null,"24"),k("td",null,"25")]),k("tr",null,[k("td",null,"26"),k("td",null,"27"),k("td",null,"28"),k("td",null,"29"),k("td",null,"30"),k("td",null,"31"),k("td",{class:"next-month"},"1")])])],-1),Qo={key:1,class:"column is-12"},Xo={key:2,class:"column is-12"},Yo={class:"tabs-inner"},ed={class:"tabs is-boxed"},ld=[k("span",null,"Proposals",-1)],td=[k("span",null,"Grouped Proposals",-1)],ad={key:0},sd={key:1},id={key:3,class:"column is-12"},nd={key:4,class:"column is-12"},od={key:5,class:"column is-12"},dd={key:6,class:"column is-12"},cd={key:7,class:"column is-12"},ud={key:8,class:"column is-12"},rd={key:9,class:"column is-12"},pd={class:"tabs-inner"},md={class:"tabs is-boxed"},vd=[k("span",null,"Excel Sheets",-1)],_d=[k("span",null,"Custom Calculations",-1)],hd={key:0},fd={key:1},yd={key:10},bd=p({__name:"JobDetails",setup(a){const i=q();B();const n=Z();Q();const o=v(!1),d=v(""),c=v(!1);v(null),v("Untitled"),v({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const u=v({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),r=v("excel"),p=v("management"),m=v("childProposals"),_=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],h={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let U;const I=async()=>{try{o.value=!0;const e=await n.get(`/api/project/${i.params.id}/detail/`);u.value=e.data,e.data.latitude&&((e,l)=>{if(U&&U.remove(),U=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(U),e&&l){const t=[e,l];L.marker(t).addTo(U),U.setView(t,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{o.value=!1}},M=v([]);return f((()=>{I()})),(a,o)=>{const v=ye,f=A,U=Me,E=Ae,O=s,K=Pe,L=Fe,R=De,B=Kn,J=_i,z=Ve,q=ws,G=Qa,W=nt,Z=Jl,Q=t,X=Pl,Y=vl,ee=l,le=e,te=y("tooltip");return b(),g("div",Ln,[k("div",Rn,[k("div",$n,[k("div",Nn,[k("div",Bn,[k("div",Hn,[k("div",Jn,[k("div",zn,[x(v,{size:"large",picture:"lead"==S(u).current_state?"/icons/lead-shield-96.png":"/icons/job-sheild.png",squared:""},null,8,["picture"]),k("h3",null,C(S(u).title?S(u).title:"No Title"),1)])]),k("div",qn,[Gn,k("p",Wn,[j(C(S(u).address?S(u).address:"No Address Added")+" ",1),Zn,j(" "+C(S(u).city?S(u).city:"No City Added")+", "+C(S(u).state?S(u).state:"No State Added")+" ",1),Qn,j(" "+C(S(u).zip_code?S(u).zip_code:"No Zip Code Added"),1)])]),k("div",Xn,[Yn,k("div",eo,[(b(!0),g(F,null,P(S(u).managers_list,(e=>V((b(),D(v,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[te,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),lo]),x(f,{class:"mt-1",onClick:o[0]||(o[0]=e=>{return l=S(i).params.id,d.value=l,void(c.value=!0);var l}),bold:"",fullwidth:"","dark-outlined":""},{default:w((()=>[j(" Update "+C("lead"==S(u).current_state?"lead":"job"),1)])),_:1})])])]),k("div",to,[k("div",ao,[k("div",so,[k("div",io,[k("ul",null,[k("li",{class:N(["management"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[1]||(o[1]=H($((e=>p.value="management"),["prevent"]),["space"])),onClick:o[2]||(o[2]=e=>p.value="management")},no,32)],2),k("li",{class:N(["documents"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[3]||(o[3]=H($((e=>p.value="documents"),["prevent"]),["space"])),onClick:o[4]||(o[4]=e=>p.value="documents")},oo,32)],2),k("li",{class:N(["proposals"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[5]||(o[5]=H($((e=>p.value="proposals"),["prevent"]),["space"])),onClick:o[6]||(o[6]=e=>p.value="proposals")},co,32)],2),k("li",{class:N(["tasks"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[7]||(o[7]=H($((e=>p.value="tasks"),["prevent"]),["space"])),onClick:o[8]||(o[8]=e=>p.value="tasks")},uo,32)],2),k("li",{class:N(["activities"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[9]||(o[9]=H($((e=>p.value="activities"),["prevent"]),["space"])),onClick:o[10]||(o[10]=e=>p.value="activities")},ro,32)],2),k("li",{class:N(["progress"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[11]||(o[11]=H($((e=>p.value="progress"),["prevent"]),["space"])),onClick:o[12]||(o[12]=e=>p.value="progress")},po,32)],2),k("li",{class:N(["calculations"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[13]||(o[13]=H($((e=>p.value="calculations"),["prevent"]),["space"])),onClick:o[14]||(o[14]=e=>p.value="calculations")},mo,32)],2),k("li",{class:N(["finance"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[15]||(o[15]=H($((e=>p.value="finance"),["prevent"]),["space"])),onClick:o[16]||(o[16]=e=>p.value="finance")},vo,32)],2),k("li",{class:N(["report"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[17]||(o[17]=H($((e=>p.value="report"),["prevent"]),["space"])),onClick:o[18]||(o[18]=e=>p.value="report")},_o,32)],2),ho])])])])]),"management"===S(p)?(b(),g("div",fo,[k("div",yo,[k("div",bo,[k("div",go,[k("div",ko,[k("div",xo,[wo,k("div",jo,[(b(!0),g(F,null,P(S(u).tags,((e,l)=>(b(),g("button",{key:l,class:"button is-selected is-light is-dark-outlined"},C(e),1)))),128))])])]),k("div",Co,[k("div",Vo,[Uo,k("div",{innerHTML:S(u).notes},null,8,To),Io])]),k("div",So,[k("div",Do,[x(O,{rounded:"",data:_,columns:h},{"body-cell":w((({row:e,column:l,value:t})=>["type"===l.key&&"messages"===e.type?(b(),g(F,{key:0},[x(U,{color:"green"},{default:w((()=>[Fo])),_:1}),Po],64)):"type"===l.key&&"tasks"===e.type?(b(),g(F,{key:1},[x(U,{color:"orange"},{default:w((()=>[Ao])),_:1}),Mo],64)):"status"===l.key?(b(),g(F,{key:2},["new"===e.status?(b(),D(E,{key:0,rounded:"",color:"success",label:"New"})):(b(),D(E,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(b(),g("a",Eo,"Open")):(b(),g("span",Oo,C(t),1))])),_:1})])]),k("div",Ko,[k("div",Lo,[Ro,k("div",$o,[(b(!0),g(F,null,P(S(u).sales_people_info,(e=>(b(),g("div",No,[k("div",Bo,[x(K),x(v,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),k("h3",Ho,C(e.username??"N/A")+" "+C(e.last_name??""),1),k("p",Jo,C(e.role),1),k("div",zo,[x(f,{color:"primary",raised:""},{default:w((()=>[j(" View Profile ")])),_:1})])])])))),256))])])])])]),k("div",qo,["management"===S(p)?(b(),g("div",Go)):T("",!0),x(L,{project:S(i).params.id},null,8,["project"]),x(R,{class:"picker-widget"},{header:w((()=>[Wo])),body:w((()=>[Zo])),_:1})])])])):T("",!0),"documents"===S(p)?(b(),g("div",Qo,[x(B,{leadId:S(i).params.id,uploaded_files:S(u).uploaded_files,getProjectInfo:I},null,8,["leadId","uploaded_files"])])):T("",!0),"proposals"===S(p)?(b(),g("div",Xo,[k("div",Yo,[k("div",ed,[k("ul",null,[k("li",{class:N(["childProposals"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[19]||(o[19]=H($((e=>m.value="childProposals"),["prevent"]),["space"])),onClick:o[20]||(o[20]=e=>m.value="childProposals")},ld,32)],2),k("li",{class:N(["groupedProposals"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[21]||(o[21]=H($((e=>m.value="groupedProposals"),["prevent"]),["space"])),onClick:o[22]||(o[22]=e=>{m.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await n.get(`/api/attachment/by-object/${i.params.id}/?type=${e}`);M.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},td,32)],2)])])]),"childProposals"==S(m)?(b(),g("div",ad,[x(Ee,{"lead-id":S(i).params.id,onUpdateCompany:I},null,8,["lead-id"])])):T("",!0),"groupedProposals"==S(m)?(b(),g("div",sd,[x(J,{"doc-type":"proposal_formats","object-id":S(i).params.id},null,8,["object-id"])])):T("",!0)])):T("",!0),"activities"===S(p)?(b(),g("div",id,[x(z,{jobId:S(i).params.id},null,8,["jobId"])])):T("",!0),"progress"===S(p)?(b(),g("div",nd,[x(q,{object:S(i).params.id,type:"job"},null,8,["object"])])):T("",!0),"finance"===S(p)?(b(),g("div",od,[x(G)])):T("",!0),"activityLogs"===S(p)?(b(),g("div",dd,[x(W,{object_id:S(i).params.id||S(u).id,object_type:"lead"},null,8,["object_id"])])):T("",!0),"report"===S(p)?(b(),g("div",cd,[x(Z)])):T("",!0),"tasks"===S(p)?(b(),g("div",ud,[x(Q,{projectID:S(i).params.id},null,8,["projectID"])])):T("",!0),"calculations"===S(p)?(b(),g("div",rd,[k("div",pd,[k("div",md,[k("ul",null,[k("li",{class:N(["excel"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[23]||(o[23]=H($((e=>r.value="excel"),["prevent"]),["space"])),onClick:o[24]||(o[24]=e=>r.value="excel")},vd,32)],2),k("li",{class:N(["custom"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[25]||(o[25]=H($((e=>r.value="custom"),["prevent"]),["space"])),onClick:o[26]||(o[26]=e=>r.value="custom")},_d,32)],2)])])]),"excel"==S(r)?(b(),g("div",hd,[x(X)])):T("",!0),"custom"==S(r)?(b(),g("div",fd,[x(Y,{objectId:S(i).params.id},null,8,["objectId"])])):T("",!0)])):T("",!0),"files"==S(p)?(b(),g("div",yd,[x(ee,{projectId:S(i).params.id,files:S(u).uploaded_files,"onUpdate:onUploadFile":I},null,8,["projectId","files"])])):T("",!0)])])]),S(c)?(b(),D(le,{key:0,addUpdateLeadModal:S(c),leadId:S(d),"onUpdate:modalHandler":o[27]||(o[27]=e=>c.value=!1),"onUpdate:OnSuccess":I},null,8,["addUpdateLeadModal","leadId"])):T("",!0)])}}});export{bd as _};
