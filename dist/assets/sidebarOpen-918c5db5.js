import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-4766c849.js";import{f as l,b as a,T as s,r as t,o as i,C as o,D as n,F as r,G as u,J as d,E as c,m as p,V as m,W as v,K as y,k as _,N as f,O as g,a1 as h,P as k,I as b,U as x,Q as w,R as C,S as V,y as S,x as I,L as j,X as L,H as N,$ as U,Z as $}from"./index-d6399491.js";import{_ as M}from"./VInput.vue_vue_type_script_setup_true_lang-5d2459aa.js";import{_ as O,a as P}from"./VOption.vue_vue_type_style_index_0_lang-e3b6bfb0.js";import{_ as z}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-1fab287f.js";import{_ as E}from"./VField.vue_vue_type_script_setup_true_lang-13bf7235.js";import{_ as K}from"./VControl-0d1ed219.js";import{u as W}from"./useNotyf-30f01fc2.js";import{u as B}from"./company-78c86252.js";import{u as F}from"./useAPI-364638b3.js";import{_ as H}from"./VAvatar.vue_vue_type_style_index_0_lang-98d47a02.js";import{_ as T}from"./whatsapp-93d30726.js";import{s as A,d as R}from"./useSupportElement-57e4fa0f.js";const q={class:"modal-form columns is-multiline"},D={key:0,class:"field column is-12 mb-0"},G=(e=>(w("data-v-1596d713"),e=e(),C(),e))((()=>c("label",{class:"light-text",style:{"font-size":"16px"}},"Sector ",-1))),J={class:"indutryOptions"},Q=["onClick"],X=["src"],Y={style:{"font-size":"12px"}},Z={class:"colums is-multiline cu-all-input",style:{"margin-bottom":"40px"}},ee={class:"column is-12 light-text pl-0 is-flex cus-align-center",style:{"font-size":"16px"}},le={key:1,class:"mb-3 is-reversed",style:{width:"100%"}},ae=V(l({__name:"InvitationLink",props:{invitationModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:w}){const C=l,V=a();s();const S=F(),I=t(!1),j=W(),L=B(),N=t(""),U=t(""),$=t(""),H=t(!1),T=t(!1),A=t(""),R=t(""),ae=t(!1);t(!1);const se=()=>{w("update:modalHandler",!1)},te=L.suppliers?L.suppliers:[];return i((()=>{"partner"==V.user.role&&($.value=V.user.partner),U.value=L.loggedCompany.industry?L.loggedCompany.industry[0].id:""})),(l,a)=>{const s=K,t=E,i=z,w=O,W=P,B=M,F=k,ie=e;return o(),n("template",null,[r(h,{name:"fade-slow"},{default:u((()=>[r(ie,{is:"form",open:C.invitationModal,title:"Worker Signup Link",size:"small",actions:"right",onSubmit:a[8]||(a[8]=d((e=>(async()=>{try{if(console.log(L.loggedCompany.id),!U.value)return void j.error("Please select industry first");I.value=!0;const e=await S.post("/v3/api/worker/worker_invitation/create-worker-invitation/",{company:L.loggedCompany.id,industry:$.value}),l=window.location.origin;N.value=`${l}/worker-signup/`+e.data.token,I.value=!1}catch(e){console.error("ok",e),I.value=!1}})()),["prevent"])),onClose:se,class:"crete-link-modal"},{content:u((()=>[c("div",q,[p(N)?f("",!0):(o(),n("div",D,[r(t,{class:""},{default:u((()=>[G,r(s,null,{default:u((()=>[c("div",J,[(o(!0),n(m,null,v(p(L).loggedCompany.industry,((e,l)=>(o(),n("div",{style:{"margin-bottom":"20px"},key:l,class:b(p(U)==e.id?"cus-selected":"options"),onClick:l=>U.value=e.id},[c("img",{src:e.industryLogo},null,8,X),c("p",Y,x(e.name),1)],10,Q)))),128))])])),_:1})])),_:1}),c("div",Z,[c("label",ee,[y("Work through business partner ? "),c("span",null,[r(t,null,{default:u((()=>[r(s,null,{default:u((()=>[r(i,{disabled:"partner"==p(V).user.role,modelValue:p(ae),"onUpdate:modelValue":a[0]||(a[0]=e=>_(ae)?ae.value=e:null),label:"Yes"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])]),r(t,null,{default:u((()=>[r(s,null,{default:u((()=>[r(W,{disabled:!p(ae),modelValue:p($),"onUpdate:modelValue":a[1]||(a[1]=e=>_($)?$.value=e:null),rounded:"",name:"industry",class:"is-rounded"},{default:u((()=>[r(w,{disabled:"",value:""},{default:u((()=>[y("Select Partner")])),_:1}),(o(!0),n(m,null,v(p(te),((e,l)=>(o(),g(w,{value:p(ae)?"":e.id,key:l},{default:u((()=>[y(x(e.supplierName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1})])])),p(N)?(o(),n("div",le,[r(t,{addons:""},{default:u((()=>[r(s,{expanded:""},{default:u((()=>[r(B,{modelValue:p(N),"onUpdate:modelValue":a[2]||(a[2]=e=>_(N)?N.value=e:null),type:"text",class:"input",placeholder:"Find a repository"},null,8,["modelValue"])])),_:1}),r(s,null,{default:u((()=>[r(F,{icon:"fas fa-copy",onClick:a[3]||(a[3]=e=>{return l=p(N),navigator.clipboard.writeText(l),void j.success("Link Copied");var l}),color:"primary"},{default:u((()=>[y(" Link ")])),_:1})])),_:1})])),_:1}),c("div",null,[c("form",{onSubmit:a[5]||(a[5]=d((e=>(async()=>{try{H.value=!0,await S.post("/v3/api/worker/worker_invitation/send-worker-signup-invitation/",{link:N.value,email:A.value}),j.success("Invitation Email sent successfully"),A.value=""}catch{j.error("Invalid email address")}finally{H.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[r(t,{style:{width:"100%"},addons:""},{default:u((()=>[r(s,{expanded:""},{default:u((()=>[r(B,{modelValue:p(A),"onUpdate:modelValue":a[4]||(a[4]=e=>_(A)?A.value=e:null),type:"email",class:"input",placeholder:"example@gmail.com"},null,8,["modelValue"])])),_:1}),r(s,null,{default:u((()=>[r(F,{type:"submit",icon:"feather:mail",loading:p(H),color:"primary"},{default:u((()=>[y(" Mail ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)]),c("div",null,[c("form",{onSubmit:a[7]||(a[7]=d((e=>(async()=>{try{T.value=!0,await S.post("/v3/api/worker/worker_invitation/send-invitation-sms/",{message:N.value,phone:R.value}),j.success("Invitation SMS sent successfully"),R.value=""}catch{j.error("Invalid phone number")}finally{T.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[r(t,{style:{width:"100%"},addons:""},{default:u((()=>[r(s,{expanded:""},{default:u((()=>[r(B,{modelValue:p(R),"onUpdate:modelValue":a[6]||(a[6]=e=>_(R)?R.value=e:null),pattern:"^\\+44\\d{10}$",type:"phone",class:"input",required:"",placeholder:"+4400000000"},null,8,["modelValue"])])),_:1}),r(s,null,{default:u((()=>[r(F,{type:"submit",icon:"feather:message-circle",loading:p(H),color:"primary"},{default:u((()=>[y(" SMS ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)])])):f("",!0)])])),action:u((()=>[p(N)?f("",!0):(o(),g(F,{key:0,type:"submit",color:"primary",rounded:"",loading:p(I),icon:"fas fa-link",raised:""},{default:u((()=>[y(" Create")])),_:1},8,["loading"]))])),cancel:u((()=>[r(F,{style:{display:"none"},rounded:"",color:"light",onClick:se,raised:""},{default:u((()=>[y("Close ")])),_:1})])),_:1},8,["open"])])),_:1})])}}}),[["__scopeId","data-v-1596d713"]]),se={key:0,class:"is-active search-results has-slimscroll"},te={class:"ml-2",style:{display:"flex","flex-direction":"column","text-align":"left"}},ie=["onClick"],oe=["src","onClick"],ne=["onClick"],re=c("img",{src:T,style:{width:"12px",height:"12px","margin-top":"3px","margin-right":"2px"}},null,-1),ue={key:1,class:"is-active search-results has-slimscroll"},de=[c("h1",{class:"p-4 light-text"},"No result found",-1)],ce=["onKeydown"],pe=[c("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:x"},null,-1)],me=l({__name:"SearchWorkerInput",setup(e){const l=F();S();const a=t(!1),s=B(),i=t(""),h=I(),k=t([]),b=R((()=>{i.value?w():k.value=[]}),500),w=async()=>{try{a.value=!0;const e=await l.get(`/v3/api/worker/workers-for-options/${s.loggedCompany.id}/?search=${i.value}`,{});k.value=e.data}catch(e){console.error("Error while searching",e)}finally{a.value=!1}},C=e=>{h.push(`/sidebar/company/workers/${e}`),V()},V=()=>{i.value="",k.value=[]};return(e,l)=>{const s=H,t=K,h=E;return o(),g(h,{class:"mt-4"},{default:u((()=>[r(t,{icon:p(a)?"feather:loader":"feather:search"},{extra:u((()=>[p(k).length>0?(o(),n("div",se,[(o(!0),n(m,null,v(p(k),(e=>(o(),n("div",{key:e.id,class:"search-result cu-pointer"},[r(s,{class:"cus-pointer",picture:e.profileImageURL,onClick:l=>C(e.id)},null,8,["picture","onClick"]),c("div",te,[c("span",{class:"item-name dark-inverted",style:{"margin-bottom":"2px !important","font-weight":"500"},onClick:l=>C(e.id)},[y(x(e.firstName)+" "+x(e.lastName)+" ",1),c("img",{style:{width:"20px",height:"20px"},src:e.industry.industryLogo,onClick:l=>C(e.id)},null,8,oe)],8,ie),c("div",{onClick:l=>p(A)(e.phoneNumber),style:{color:"var(--light-text)",display:"flex",gap:"4px","algin-items":"center"}},[re,y(" "+x(e.phoneNumber),1)],8,ne)])])))),128))])):f("",!0),p(k).length||!p(i)||p(a)?f("",!0):(o(),n("div",ue,de))])),default:u((()=>[j(c("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>_(i)?i.value=e:null),type:"text",class:"input is-rounded search-input cus-searchInput",placeholder:"Search...",onInput:l[1]||(l[1]=(...e)=>p(b)&&p(b)(...e))},null,544),[[L,p(i)]]),p(i)?(o(),n("div",{key:0,class:"form-icon is-right",tabindex:"0",role:"button",onKeydown:N(d(V,["prevent"]),["space"]),onClick:V},pe,40,ce)):f("",!0)])),_:1},8,["icon"])])),_:1})}}}),ve={class:"sidebar-block-header"},ye={class:"sidebar-block-inner"},_e={class:"sidebar-block-footer"},fe=l({__name:"Sideblock",props:{theme:{default:"default"},isOpen:{type:Boolean}},setup(e){const l=e,a=U((()=>{switch(l.theme){case"color":return"is-colored";case"curved":return"is-curved";case"color-curved":return"is-colored is-curved";default:return""}}));return(e,l)=>(o(),n("div",{class:b(["sidebar-block is-active",[p(a)]])},[c("div",ve,[$(e.$slots,"header")]),c("div",ye,[c("ul",null,[$(e.$slots,"links")])]),c("div",_e,[$(e.$slots,"bottom-links")])],2))}}),ge="/logos/ibexwhite.png",he="/images/icons/sidebarclose.png",ke="/images/icons/sidebarOpen.png";export{ge as _,fe as a,me as b,ae as c,he as d,ke as e};
