import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-2f6d3c89.js";import{_ as t,c as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-68787503.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-112752df.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-c1d7da00.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-1598f1d1.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-29fbd14b.js";import{_ as r}from"./VControl-d9c5d1bd.js";import{_ as o}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-c711243f.js";import{e as u,r as c,t as d,Z as p,o as _,l as m,y as v,H as y,z as f,C as g,A as b,B as h,S as x,T as k,j as w,P as j,Q as A,R as C,aR as P,O as S,J as V,D as O,W as T,X as L,L as W,G as z,v as q}from"./index-1c9998f2.js";import{_ as F,a as I}from"./search-4-dark-2b5b440c.js";import{u as N}from"./useAPI-a1408a11.js";import{f as R}from"./useSupportElement-5b7eeae1.js";import{u as D}from"./useNotyf-431b7a11.js";import{u as $}from"./viewWrapper-5cfdb7bc.js";import"./via-placeholder-24645670.js";import"./VLabel.vue_vue_type_script_setup_true_lang-802eeb4e.js";import"./useVFieldContext-ca37e9ed.js";import"./VPlaceloadWrap-8d4cee10.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-cf21e824.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-b691e2ed.js";import"./VField.vue_vue_type_script_setup_true_lang-d32c83cb.js";import"./userSession-b81fab96.js";import"./notyf-be42da4a.js";import"./useThemeColors-a418b894.js";const B=e=>(T("data-v-d2adac47"),e=e(),L(),e),E={key:1,class:"is-relative tabs-wrapper is-slider is-squared"},H={class:"page-content-inner"},X={class:"list-flex-toolbar is-reversed"},Y={class:"flex-list-v2"},G=B((()=>g("img",{class:"light-image",src:F,alt:""},null,-1))),J=B((()=>g("img",{class:"dark-image",src:I,alt:""},null,-1))),M={key:1,class:"tab-content is-active"},Q=["onClick"],U=["onClick"],Z=B((()=>g("i",{style:{color:"var(--info)"},class:"fas fa-copy cu-pointer","aria-hidden":"true"},null,-1))),K={class:"item-name dark-inverted"},ee={class:"item-meta"},te={class:"light-text mt-2"},ae={class:"",style:{"font-size":"18px"}},se={class:"item-name dark-inverted"},le={class:"item-meta"},ie={style:{"font-size":"1rem","font-weight":"600","text-transform":"uppercase"}},ne=W(u({__name:"IbexPaymentsList",setup(u){const T=c(""),L=c(!1),W=D(),z=N();d();const q=c(!1),F=c([{id:"",client_info:{id:"",username:"",email:"",role:"",avatar:""},description:"",checkoutLink:"",type:"",created_by_info:{id:"",username:"",email:"",role:"",avatar:""},amount:0,status:"",created_at:"",created_by:"",client:null}]),I=c(""),$=c("paid"),B={description:{label:"Description",grow:!0,media:!0},picture:{label:"Created by",grow:!0,media:!0},amount:{label:"Amount",align:"center"},client:{label:"Client",align:"center",grow:!0},status:"Status",team:{label:"Method"},actions:{label:"Actions",align:"end"}},ne=p((()=>{if(I.value){const e=new RegExp(I.value,"i");return F.value.filter((t=>t.id.match(e)||t.created_by_info.username.match(e)||t.type.match(e)||t.description.match(e)))}return F.value})),re=async()=>{try{q.value=!0;const e=await z.get("/api/paypal/");F.value=e.data}catch(e){console.log(e)}finally{q.value=!1}},oe=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ue=async()=>{try{L.value=!0;await z.delete(`/api/paypal/${T.value}/`);oe.value.isSweetAlertOpen=!1,W.success("Payment deleted successfully"),re()}catch(e){console.log(e)}finally{L.value=!1}};return _((()=>{re()})),(u,c)=>{const d=o,p=r,_=n,L=a,z=i,F=l,N=s,D=t,re=e;return m(q)?(v(),y(d,{key:0})):(v(),f("div",E,[g("div",H,[g("div",X,[b(p,{icon:"feather:search"},{default:h((()=>[x(g("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>w(I)?I.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,m(I)]])])),_:1})]),g("div",Y,[0===m(ne).length?(v(),y(_,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[G,J])),_:1})):j("",!0),"paid"===m($)?(v(),f("div",M,[m(ne).length?(v(),y(D,{key:0,data:m(ne),columns:B,rounded:""},{body:h((()=>[b(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),f(A,null,C(m(ne),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[b(L,null,{default:h((()=>[g("div",null,[g("p",{class:S(["light-text text-overflow","succeeded"===e.status?"is-link":""]),onClick:t=>(e=>{if("succeeded"===e.status){const t=`https://dashboard.stripe.com/test/payments/${e.response?.id}`;window.open(t,"_blank")}})(e)},V(e.description),11,Q),g("p",{class:"mt-2",onClick:t=>{var a;(a=e.checkoutLink)?navigator.clipboard.writeText(a).then((()=>{W.success("Link copied to clipboard!")})).catch((e=>{W.error("Failed to copy the link: ",e)})):W.error("No link to copy!")}},[O(" Checkout link "),Z],8,U)])])),_:2},1024),b(L,{column:{media:!0,grow:!0}},{default:h((()=>[g("div",null,[g("span",K,V(e?.created_by_info?.username),1),g("span",ee,[g("span",null,V(e.created_by_info?.email),1)]),g("span",te,"At: "+V(m(R)(e.created_at)),1)])])),_:2},1024),b(L,null,{default:h((()=>[g("span",ae,"$"+V(e.amount),1)])),_:2},1024),b(L,null,{default:h((()=>[g("div",null,[g("span",se,V(e?.client_info?.username?e?.client_info?.username:"N/A"),1),g("span",le,[g("span",null,V(e.client_info?.email),1)])])])),_:2},1024),b(L,null,{default:h((()=>[b(z,null,{default:h((()=>[g("p",ie,V(e.status),1)])),_:2},1024)])),_:2},1024),b(L,null,{default:h((()=>["Stripe"==e.type?(v(),y(F,{key:0,picture:"/icons/stripe-48.png",squared:"",size:"medium"})):(v(),y(F,{key:1,picture:"/icons/paypal-48.png",squared:"",size:"medium"}))])),_:2},1024),b(L,{column:{align:"end"}},{default:h((()=>[b(N,{onClick:t=>{return a=e.id,T.value=a,void(oe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Payment again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a},color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):j("",!0)])):j("",!0)])]),m(oe).isSweetAlertOpen?(v(),y(re,{key:0,isSweetAlertOpen:m(oe).isSweetAlertOpen,title:m(oe).title,loading:!1,subtitle:m(oe).subtitle,btntext:m(oe).btntext,onConfirm:ue,onCancel:()=>m(oe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0)]))}}}),[["__scopeId","data-v-d2adac47"]]),re={class:"page-content-inner"},oe=u({__name:"index",setup(e){z();return $().setPageTitle("Payments"),q((()=>({title:"Payments"}))),(e,t)=>{const a=ne;return v(),f("div",re,[b(a)])}}});export{oe as default};
