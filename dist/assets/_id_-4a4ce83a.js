import{e,s as l,x as a,v as s,r as t,b as o,_ as i,o as r,B as n,C as p,D as u,K as d,W as _,l as m,E as c,F as f,N as v,M as y,z as V}from"./index-f3f4d694.js";import{u as b,_ as g}from"./WorksheetItems.vue_vue_type_script_setup_true_lang-f130dbde.js";import{_ as j}from"./VCollapse.vue_vue_type_style_index_0_lang-857beeed.js";import{_ as x}from"./VTextarea.vue_vue_type_script_setup_true_lang-e8c2fb9b.js";import{_ as h}from"./VField.vue_vue_type_script_setup_true_lang-c9bb6834.js";import{_ as I}from"./VControl-97faf42d.js";import{_ as T}from"./VRadio.vue_vue_type_style_index_0_lang-9ed5adfc.js";import{u as C}from"./useAPI-8c8e74af.js";import{u as P}from"./useNotyf-154cdbb2.js";import"./useSupportElement-72dbe297.js";import{u as w}from"./userSession-256ee40e.js";import{u as k}from"./viewWrapper-7a753c4f.js";import"./VModal.vue_vue_type_style_index_0_lang-c62a44dd.js";import"./VInput.vue_vue_type_script_setup_true_lang-ea8d2d50.js";import"./useVFieldContext-b87bbaf5.js";import"./VOption.vue_vue_type_style_index_0_lang-534a2689.js";import"./VAvatar.vue_vue_type_style_index_0_lang-614f3eee.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-59c34ef9.js";import"./VLabel.vue_vue_type_script_setup_true_lang-910d9ba8.js";import"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-ce620b21.js";import"./VDropdown.vue_vue_type_style_index_0_lang-7bf06366.js";import"./VIcon.vue_vue_type_script_setup_true_lang-4fd13ed9.js";import"./useDropdown-74c4feaf.js";import"./notyf-901e4592.js";import"./useThemeColors-209c0507.js";const D={class:"modal-form columns is-multiline"},N={class:"field column is-6 mb-0"},q=u("label",null,"Title: *",-1),U={class:"control"},A={class:"column is-6"},E={class:"field column is-6"},O=u("label",null,"Approval Deadline *",-1),F={class:"control"},L={class:"field column is-6"},M=u("label",null,"Attachments",-1),R=u("div",{class:"file"},[u("label",{class:"file-label"},[u("input",{class:"file-input",type:"file",name:"resume"}),u("span",{class:"file-cta"},[u("span",{class:"file-icon"},[u("i",{class:"fas fa-cloud-upload-alt"})]),u("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),S={class:"body-inner-content"},W={class:"field columns is-multiline mb-0"},H={class:"field column is-12 mb-0"},J=u("label",{for:"",class:"label"},"Internal Notes",-1),z={class:"field column is-12 mb-0"},B=u("label",{for:"",class:"label"},"Introductory Text",-1),K={class:"field column is-12 mb-0"},Y=u("label",{for:"",class:"label"},"Closing Text",-1),$=e({__name:"ProposalDetailComponent",props:{proposalId:{},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:V}){const k=e,$=l(),G=b();w(),P();const Q=C(),X=a();s(),t({}),t(!1);const Z=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];t({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const ee=t({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});t("worksheet");const le=o((()=>i((()=>import("./ckeditor-178c5f59.js").then((e=>e.c))),["assets/ckeditor-178c5f59.js","assets/index-f3f4d694.js","assets/index-1c8d8af6.css","assets/vue.runtime.esm-bundler-3ca3fc2c.js"]).then((e=>e.default.component)))),ae={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return r((async()=>{$.value=await i((()=>import("./ckeditor-023962a0.js").then((e=>e.c))),["assets/ckeditor-023962a0.js","assets/index-f3f4d694.js","assets/index-1c8d8af6.css"]).then((e=>e.default)),(k.proposalId||X.params.id)&&(async()=>{try{const e=await Q.get(`/api/lead-proposal/${X.params.id}/`);ee.value=e.data,G.getProposalCostItems(X.params.id)}catch(e){console.log(e)}})()})),(e,l)=>{const a=T,s=I,t=h,o=x,i=j,r=g;return n(),p("div",D,[u("div",N,[q,u("div",U,[d(u("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>m(ee).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[_,m(ee).title]])])]),u("div",A,[c(t,{class:"m-0 p-0",label:"Type"},{default:f((()=>[c(s,null,{default:f((()=>[c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[1]||(l[1]=e=>m(ee).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[2]||(l[2]=e=>m(ee).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[3]||(l[3]=e=>m(ee).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",E,[O,u("div",F,[d(u("input",{type:"date",name:"firstName","onUpdate:modelValue":l[4]||(l[4]=e=>m(ee).approval_deadline=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Approval deadline"},null,512),[[_,m(ee).approval_deadline]])])]),u("div",L,[M,c(t,{grouped:""},{default:f((()=>[c(s,null,{default:f((()=>[R])),_:1})])),_:1})]),c(i,{items:Z,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":f((e=>[u("div",S,[u("div",W,[u("div",H,[J,c(t,null,{default:f((()=>[c(s,null,{default:f((()=>[c(o,{modelValue:m(ee).internalNotes,"onUpdate:modelValue":l[5]||(l[5]=e=>m(ee).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",z,[B,m($)?(n(),v(m(le),{key:0,modelValue:m(ee).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>m(ee).introductoryText=e),editor:m($),config:ae},null,8,["modelValue","editor"])):y("",!0)]),u("div",K,[Y,m($)?(n(),v(m(le),{key:0,modelValue:m(ee).closingText,"onUpdate:modelValue":l[7]||(l[7]=e=>m(ee).closingText=e),editor:m($),config:ae},null,8,["modelValue","editor"])):y("",!0)])])])])),_:1}),c(r,{proposalId:m(ee).id},null,8,["proposalId"])])}}}),G=e({__name:"[id]",setup:e=>(k().setPageTitle("Lead Proposals"),V({title:"Lead Proposals - Ibex"}),(e,l)=>(n(),p("div",null,[c($)])))});export{G as default};
