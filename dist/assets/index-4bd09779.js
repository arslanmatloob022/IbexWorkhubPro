import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-e2c7c1dd.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_script_setup_true_lang-15d3a4c3.js";import{_ as a}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-e7fdf57b.js";import{_ as t,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-52661005.js";import{_ as n}from"./VDropdown.vue_vue_type_style_index_0_lang-ee12b32f.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-dac16305.js";import{_ as o}from"./VTag.vue_vue_type_style_index_0_lang-70a903f2.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-937d0701.js";import{e as u,v as d,r as _,Z as p,o as c,au as m,B as v,C as f,l as y,N as g,D as b,E as h,F as j,K as x,W as w,j as k,J as V,U as C,V as A,M as P,aR as S,O as I,ak as L,T as O,I as U,z as T}from"./index-e0cd5955.js";import{_ as $,a as D}from"./VOption.vue_vue_type_style_index_0_lang-42913ab0.js";import{_ as N}from"./VField.vue_vue_type_script_setup_true_lang-fd16b076.js";import{_ as F}from"./VControl-f6e54973.js";import{_ as M}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-57c0045e.js";import{_ as W,a as E}from"./search-4-dark-2b5b440c.js";import{u as J}from"./useAPI-1ca2c210.js";import{u as R}from"./useNotyf-8e789831.js";import{e as Z,g as z}from"./useSupportElement-0a987e1f.js";import{g as B}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-1988f306.js";import{u as K}from"./viewWrapper-9193d714.js";import{b as H}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-96b91895.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-cf1ae48e.js";import"./VLabel.vue_vue_type_script_setup_true_lang-a1bc2ec8.js";import"./useVFieldContext-63556070.js";import"./userSession-6cd011ad.js";import"./ckeditor-433e508c.js";import"./vue.runtime.esm-bundler-bfbcc68a.js";import"./ckeditor-805cd633.js";import"./VFlex.vue_vue_type_style_index_0_lang-7f4266ee.js";import"./VIcon.vue_vue_type_script_setup_true_lang-52c529c4.js";import"./useDropdown-410d9a2a.js";import"./VPlaceloadWrap-14620541.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-ee133967.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-bc12a7e5.js";import"./notyf-e86eacdd.js";import"./useThemeColors-421d414c.js";import"./WorksheetItems.vue_vue_type_script_setup_true_lang-5c48f053.js";import"./VInput.vue_vue_type_script_setup_true_lang-b40a410d.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-0804d4ce.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-5ffb66ef.js";import"./VRadio.vue_vue_type_style_index_0_lang-69e127d9.js";import"./proposalItems-b5d6355d.js";import"./VCollapse.vue_vue_type_style_index_0_lang-3010764a.js";const q={key:1},Q={class:"list-flex-toolbar flex-list-v1"},X={class:"page-content-inner"},Y={class:"flex-list-wrapper flex-list-v1"},G=b("img",{class:"light-image",src:W,alt:""},null,-1),ee=b("img",{class:"dark-image",src:E,alt:""},null,-1),le={class:"show-text-200"},ae={class:"item-name"},te={class:"item-meta"},se=["onClick"],ne={class:"item-name dark-inverted show-text-200"},ie={class:"item-meta show-text-200"},oe=["onClick"],re={class:"item-name"},ue={class:"item-meta"},de=["onClick"],_e=["onClick"],pe=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),b("div",{class:"meta"},[b("span",null,"View"),b("span",null,"View user details")],-1)],ce=b("a",{role:"menuitem",class:"dropdown-item is-media"},[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-briefcase"})]),b("div",{class:"meta"},[b("span",null,"Proposals"),b("span",null,"View proposal of lead")])],-1),me=["onClick"],ve=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),b("div",{class:"meta"},[b("span",null,"Edit"),b("span",null,"Update Lead Info")],-1)],fe=b("hr",{class:"dropdown-divider"},null,-1),ye=["onClick"],ge=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),b("div",{class:"meta"},[b("span",null,"Delete"),b("span",null,"Delete Proposal Permanently")],-1)],be=u({__name:"LeadsList",setup(u){const T=d(),W=R(),E=J(),K=_(),H=_({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),be=_(42),he=_(!1),je=_([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]),xe={username:{label:"Contractor/Client",grow:!0},location:{label:"Job",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},we=async()=>{try{K.value=!0;const e=await E.get("/api/job/leads/");H.value=e.data}catch(e){W.error(` ${e}, Lead`)}finally{K.value=!1}},ke=_(""),Ve=e=>{ke.value=e,he.value=!0},Ce=_({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Ae=async()=>{try{K.value=!0;await E.delete(`/api/job/${ke.value}/`);W.success("Proposal delete successfully"),we()}catch(e){W.error(` ${e}, Proposal`),W.error("Something went wrong please try later")}finally{K.value=!1,Ce.value.isSweetAlertOpen=!1}},Pe=_(""),Se=_(""),Ie=p((()=>{if(Pe.value){const e=new RegExp(Pe.value,"i");return H.value.filter((l=>l.title?.match(e)||l.address?.match(e)||l.clientInfo?.username?.match(e)||l.clientInfo?.last_name?.match(e)||l.clientInfo?.username?.match(e)||l.city?.match(e)||l.created_at?.match(e)))}return H.value})),Le=p((()=>Se.value?Ie.value?.filter((e=>e.status==Se.value)):Ie.value));return c((()=>{we()})),(u,d)=>{const _=M,p=F,c=N,W=$,E=D,J=I,R=L,H=r,Ie=s,Oe=o,Ue=i,Te=n,$e=t,De=a,Ne=l,Fe=e,Me=m("tooltip");return v(),f("div",null,[y(K)?(v(),g(_,{key:0})):(v(),f("div",q,[b("div",Q,[h(c,null,{default:j((()=>[h(p,{icon:"feather:search"},{default:j((()=>[x(b("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>k(Pe)?Pe.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,y(Pe)]])])),_:1})])),_:1}),h(c,null,{default:j((()=>[h(p,{class:"has-icons-left",icon:"fas fa-globe"},{default:j((()=>[h(E,{modelValue:y(Se),"onUpdate:modelValue":d[1]||(d[1]=e=>k(Se)?Se.value=e:null)},{default:j((()=>[h(W,{value:""},{default:j((()=>[V(" All ")])),_:1}),(v(!0),f(C,null,A(y(je),(e=>(v(),g(W,{value:e.value},{default:j((()=>[V(O(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1}),h(R,null,{default:j((()=>[h(J,{onClick:d[2]||(d[2]=e=>Ve("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:j((()=>[V(" Lead Opportunity ")])),_:1})])),_:1})]),b("div",X,[b("div",Y,[y(Le)?.length?P("",!0):(v(),g(H,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:j((()=>[G,ee])),_:1})),y(Le)?.length?(v(),g($e,{key:1,data:y(Le),columns:xe,compact:""},{body:j((()=>[h(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(v(!0),f(C,null,A(y(Le),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[h(Ie,{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[b("div",le,[b("span",ae,O(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),b("span",te,[b("span",null,O(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])])),_:2},1032,["onClick"]),h(Ie,{column:{media:!0,grow:!0}},{default:j((()=>[b("div",{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},[b("span",ne,O(e.title?e.title:"N/A"),1),b("span",ie,[b("span",null,O(e.address?e.address:"N/A"),1)])],8,se)])),_:2},1024),h(Ie,{column:{media:!0}},{default:j((()=>[b("div",{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},[b("span",re,O(y(Z)(e.created_at)),1),b("span",ue,[b("span",null,"At:"+O(y(z)(e.created_at)),1)])],8,oe)])),_:2},1024),h(Ie,null,{default:j((()=>[h(Oe,{color:y(B)[e.status],rounded:""},{default:j((()=>[V(O(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1024),h(Ie,{column:{media:!0}},{default:j((()=>[b("div",{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},[(v(!0),f(C,null,A(e.managers_list,(e=>x((v(),g(Ue,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Me,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))],8,de)])),_:2},1024),h(Ie,{column:{align:"end"}},{default:j((()=>[h(Te,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:j((({close:l})=>[b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)}},pe,8,_e),ce,b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((l=>Ve(e.id)),["prevent"])},ve,8,me),fe,b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((l=>{return a=e.id,ke.value=a,void(Ce.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a}),["prevent"])},ge,8,ye)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):P("",!0),y(Le)?.length>5?(v(),g(De,{key:2,"current-page":y(be),"onUpdate:currentPage":d[3]||(d[3]=e=>k(be)?be.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):P("",!0)])])])),y(he)?(v(),g(Ne,{key:2,addUpdateLeadModal:y(he),leadId:y(ke),"onUpdate:modalHandler":d[4]||(d[4]=e=>he.value=!1),"onUpdate:OnSuccess":we},null,8,["addUpdateLeadModal","leadId"])):P("",!0),y(Ce).isSweetAlertOpen?(v(),g(Fe,{key:3,isSweetAlertOpen:y(Ce).isSweetAlertOpen,title:y(Ce).title,subtitle:y(Ce).subtitle,loading:y(K),btntext:y(Ce).btntext,onConfirm:Ae,onCancel:()=>y(Ce).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):P("",!0)])}}}),he=u({__name:"index",setup:e=>(K().setPageTitle("Leads"),T({title:"Leads - Ibex"}),(e,l)=>{const a=be;return v(),f("div",null,[h(a)])})});"function"==typeof H&&H(he);export{he as default};
