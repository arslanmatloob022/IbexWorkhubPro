import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-a6aa8da5.js";import{_ as a}from"./AddUpdateUser-63c3b789.js";import{_ as s}from"./SweetAlert.vue_vue_type_style_index_0_lang-f3d061b8.js";import{_ as l}from"./VDropdown.vue_vue_type_style_index_0_lang-84ec431f.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-a2584e4d.js";import{_ as i}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-eb854823.js";import{e as r,r as n,Z as o,o as u,B as d,C as c,D as p,E as m,F as v,K as _,W as f,l as y,j as h,H as g,U as w,V as b,aR as j,N as k,M as x,O as C,T as U,z as A,S as V}from"./index-b2cddf6b.js";import{_ as O}from"./VControl-ad68365b.js";import{_ as S,a as M}from"./search-6-dark-6c9b195a.js";import{u as P}from"./useAPI-f754fb36.js";import{u as H}from"./useNotyf-80ed00ef.js";import{u as D}from"./userSession-3c9c0bc9.js";import{u as I}from"./viewWrapper-cfce9e13.js";import{b as E}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-c64f2af6.js";import"./VIcon.vue_vue_type_script_setup_true_lang-3d98dc45.js";import"./VField.vue_vue_type_script_setup_true_lang-56a507fe.js";import"./VLabel.vue_vue_type_script_setup_true_lang-02bc38b6.js";import"./useVFieldContext-17d599ff.js";import"./VInput.vue_vue_type_script_setup_true_lang-50eb6df5.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-972ef6e0.js";import"./VFilePond.vue_vue_type_script_lang-34763408.js";import"./useSupportElement-bcd3e66c.js";import"./useDropdown-6f7fbb01.js";import"./notyf-d56312f2.js";import"./useThemeColors-e036bb85.js";const N={class:"tile-grid-toolbar"},z={class:"buttons"},F=p("span",{class:"icon"},[p("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),T=p("span",null,"Admin",-1),W={class:"tile-grid tile-grid-v1"},L=p("img",{class:"light-image",src:S,alt:""},null,-1),R=p("img",{class:"dark-image",src:M,alt:""},null,-1),$={class:"tile-grid-item"},B={class:"tile-grid-item-inner"},K={class:"meta"},Z={class:"dark-inverted"},J={style:{"text-transform":"capitalize"}},X=["onClick"],q=[p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-lock"})],-1),p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit user")],-1)],G=["onClick"],Q=[p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-share"})],-1),p("div",{class:"meta"},[p("span",null,"Password"),p("span",null,"Change password")],-1)],Y=p("hr",{class:"dropdown-divider"},null,-1),ee=["onClick"],ae=[p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),p("div",{class:"meta"},[p("span",null,"Delete"),p("span",null,"Delete from list")],-1)],se=r({__name:"AdminsList",setup(r){const A=P(),V=H();D();const S=n(""),M=n(!1),I=n(""),E=n(""),se=n(!1),le=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),te=n([{username:"",last_name:"",email:"",password:"",status:"",role:"admin",phoneNumber:"",avatar:null}]),ie=o((()=>S.value?te.value.filter((e=>e.username.match(new RegExp(S.value,"i"))||e.email.match(new RegExp(S.value,"i")))):te.value));n(0);const re=async()=>{try{M.value=!0;const e=await A.get("/api/users/by-role/admin/",{});te.value=e.data}catch(e){console.log(e)}finally{M.value=!1}},ne=async()=>{try{M.value=!0;await A.delete(`/api/users/${E.value}/`,{});re(),V.success("Admin deleted successfully")}catch(e){console.error(e),V.error("Error while deleting")}finally{le.value.isSweetAlertOpen=!1,M.value=!1}},oe=(e="")=>{I.value=e,se.value=!se.value},ue=n(!1);return u((()=>{re()})),(r,n)=>{const o=O,u=C,A=i,V=t,P=l,H=a,D=s;return d(),c("div",null,[p("div",N,[m(o,{icon:"feather:search"},{default:v((()=>[_(p("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>h(S)?S.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,y(S)]])])),_:1}),p("div",z,[m(u,{onClick:n[1]||(n[1]=e=>oe()),color:"primary",raised:""},{default:v((()=>[F,T])),_:1})])]),p("div",W,[m(A,{class:g([0!==y(ie).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[L,R])),_:1},8,["class"]),m(j,{name:"list",tag:"div",class:"columns is-multiline"},{default:v((()=>[(d(!0),c(w,null,b(y(ie),((e,a)=>(d(),c("div",{key:a,class:"column is-6"},[p("div",$,[p("div",B,[m(V,{picture:e.avatar,color:"primary",initials:e.username.slice(0,2),size:"medium"},null,8,["picture","initials"]),p("div",K,[p("span",Z,U(e.username)+" "+U(e.last_name?e.last_name:""),1),p("span",J,U(e.role),1)]),m(P,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:a=>oe(e.id),role:"menuitem",class:"dropdown-item is-media"},q,8,X),p("a",{onClick:a=>{return s=e.id,I.value=s,void(ue.value=!0);var s},role:"menuitem",class:"dropdown-item is-media"},Q,8,G),Y,p("a",{onClick:a=>{return s=e,E.value=s.id,void(le.value={title:`Delete ${s.username}?`,subtitle:"After deleting this admin you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var s},role:"menuitem",class:"dropdown-item is-media"},ae,8,ee)])),_:2},1024)])])])))),128))])),_:1})]),y(se)?(d(),k(H,{key:0,"is-modal-open":y(se),"user-role":"admin","user-id":y(I),"onUpdate:closeModalHandler":n[2]||(n[2]=e=>se.value=!1),"onUpdate:actionUpdateHandler":re},null,8,["is-modal-open","user-id"])):x("",!0),y(le).isSweetAlertOpen?(d(),k(D,{key:1,loading:y(M),isSweetAlertOpen:y(le).isSweetAlertOpen,title:y(le).title,subtitle:y(le).subtitle,btntext:y(le).btntext,onConfirm:ne,onCancel:()=>y(le).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):x("",!0),y(ue)?(d(),k(e,{key:2,isModalOpen:y(ue),userId:y(I),"onUpdate:closeModalHandler":n[3]||(n[3]=e=>ue.value=!1),"onUpdate:actionUpdateHandler":re},null,8,["isModalOpen","userId"])):x("",!0)])}}}),le={class:"profile-wrapper"},te={class:"profile-header has-text-centered"},ie={class:"title is-4 is-narrow is-thin"},re={class:"light-text"},ne={class:"profile-stats"},oe={class:"profile-stat"},ue={style:{"text-transform":"capitalize"}},de=p("div",{class:"separator"},null,-1),ce={class:"profile-stat"},pe=p("i",{"aria-hidden":"true",class:"lnil lnil-phone"},null,-1),me=p("div",{class:"separator"},null,-1),ve={class:"socials"},_e=[p("i",{"aria-hidden":"true",class:"fas fa-edit"},null,-1)],fe=[p("i",{"aria-hidden":"true",class:"fas fa-lock"},null,-1)],ye={class:"profile-body"},he={class:"columns"},ge={key:0,class:"column is-12"},we=r({__name:"profile",setup(s){I().setPageTitle("Profile"),A((()=>({title:"Profile Ibex-User  "}))),V();const l=P(),i=D(),r=n(!1),o=n(!1),v=n(""),_=n(!1),f=n({username:"",email:"",password:"",is_sentMail:!1,status:"",role:"",phoneNumber:"",avatar:"",supplier:""}),h=async()=>{try{_.value=!0;const e=await l.get(`/api/users/${i.user.id}/`);f.value=e.data}catch(e){console.error(e)}finally{_.value=!1}};return u((()=>{console.log("user data ",i.user),i.user.id&&h()})),(s,l)=>{const n=t,u=se,_=a,g=e;return d(),c("div",le,[p("div",te,[m(n,{size:"xl",picture:y(f).avatar},null,8,["picture"]),p("h3",ie,U(y(f)?.username),1),p("p",re,U(y(f)?.email?y(f)?.email:""),1),p("div",ne,[p("div",oe,[p("span",ue,U(y(f)?.role),1)]),de,p("div",ce,[pe,p("span",null,U(y(f)?.phoneNumber),1)]),me,p("div",ve,[p("a",{onClick:l[0]||(l[0]=e=>r.value=!y(r))},_e),p("a",{onClick:l[1]||(l[1]=e=>{return a=y(f).id,v.value=a,void(o.value=!0);var a})},fe)])])]),p("div",ye,[p("div",he,["admin"==y(i).user.role?(d(),c("div",ge,[m(u,{class:"mb-3"})])):x("",!0)])]),y(r)?(d(),k(_,{key:0,"is-modal-open":y(r),"user-role":"admin","user-id":y(i).user.id,"onUpdate:closeModalHandler":l[2]||(l[2]=e=>r.value=!1),"onUpdate:actionUpdateHandler":h},null,8,["is-modal-open","user-id"])):x("",!0),y(o)?(d(),k(g,{key:1,isModalOpen:y(o),userId:y(v),"onUpdate:closeModalHandler":l[3]||(l[3]=e=>o.value=!1),"onUpdate:actionUpdateHandler":h},null,8,["isModalOpen","userId"])):x("",!0)])}}});"function"==typeof E&&E(we);export{we as default};
