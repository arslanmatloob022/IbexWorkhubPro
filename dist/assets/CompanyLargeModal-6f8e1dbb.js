import{e,r as l,s as a,o as s,b as t,_ as i,y as o,z as n,K as r,C as d,O as u,l as c,D as m,S as p,Y as v,T as y,A as f,B as g,P as b,H as _,I as h,j as x,Q as C,R as k,J as w,at as V,a3 as A,E as S,aB as I,W as j,X as R,L as N}from"./index-879cc21e.js";import{_ as O}from"./SweetAlert.vue_vue_type_style_index_0_lang-df2b83f3.js";import{_ as T,a as U}from"./VOption.vue_vue_type_style_index_0_lang-6cc7e380.js";import{_ as P}from"./VField.vue_vue_type_script_setup_true_lang-8fda54d1.js";import{_ as L}from"./VControl-3a0d7b90.js";import{_ as B}from"./VAvatar.vue_vue_type_style_index_0_lang-560ded64.js";import{_ as E}from"./VIconButton-a16d14d0.js";import{u as z,a as D}from"./useAPI-bba6ff57.js";import{m as M}from"./upload-3-63902ba9.js";import{u as $}from"./company-5bfaee0a.js";import{u as q}from"./useNotyf-953388fb.js";import{m as H,a as W}from"./useSupportElement-23fcf6e3.js";const Y=e=>(j("data-v-5d80bfc6"),e=e(),R(),e),K=["onSubmit"],F={class:"cus-sidebar"},G=Y((()=>d("li",null,null,-1))),J=Y((()=>d("div",null,null,-1))),X={class:"form-content"},Z={class:""},Q={class:"modal-form columns cu-all-input is-multiline"},ee=Y((()=>d("div",{class:"column is-12 mb-6"},[d("h2",{class:"section-heading"},[d("i",{style:{"margin-right":"10px"},class:"fas fa-building","aria-hidden":"true"}),m(" Contact Infomation ")])],-1))),le={class:"column is-12"},ae={class:"columns mb-0 p-0"},se={class:"column is-6 mb-0 p-0"},te={class:"field column is-12 mb-0"},ie=Y((()=>d("label",null,"Registered Company Name: *",-1))),oe={class:"control"},ne={class:"field column is-12 mb-0"},re=Y((()=>d("label",null,"Company Registration Number:",-1))),de={class:"control"},ue={class:"field column is-12 mb-0"},ce=Y((()=>d("label",null,"Trade Name: ",-1))),me={class:"control"},pe=Y((()=>d("label",null,"Company Logo:",-1))),ve=["src"],ye={key:1},fe={class:"field column is-6 mb-0"},ge=Y((()=>d("label",null,"Email Address: *",-1))),be={class:"control"},_e={class:"field column is-6 mb-0"},he=Y((()=>d("label",null,"Phone Number:",-1))),xe={class:"control"},Ce={class:"column is-12 pb-4",style:{display:"flex","align-items":"center","justify-content":"flex-end","margin-top":"2rem"}},ke={class:""},we={class:"modal-form columns cu-all-input is-multiline"},Ve=Y((()=>d("div",{class:"column is-12 mb-6"},[d("h2",{class:"section-heading"},[d("i",{class:"lnil lnil-graph-alt-3","aria-hidden":"true"}),m(" Business Information ")])],-1))),Ae={class:"field column is-4 mb-0",style:{display:"flex","flex-direction":"column",gap:"0.2rem"}},Se=Y((()=>d("label",null,"Business Type: ",-1))),Ie={class:"field column is-4 mb-0",style:{display:"flex","flex-direction":"column",gap:"0.2rem"}},je=Y((()=>d("label",null,"Max Working Distance: ",-1))),Re={class:"field column is-6 mb-0"},Ne=Y((()=>d("label",null,"Are you VAT registered?: ",-1))),Oe={class:"control",style:{display:"flex","align-items":"center",gap:"0.7rem","margin-top":"1rem"}},Te={for:"notVatRegistered",style:{display:"flex","align-items":"center",gap:"0.5rem"}},Ue=Y((()=>d("b",null,"No",-1))),Pe={for:"vatRegistered",style:{display:"flex","align-items":"center",gap:"0.5rem"}},Le=Y((()=>d("b",null,"Yes",-1))),Be={key:0,class:"field column is-6 mb-0"},Ee=Y((()=>d("label",null,"Your VAT Number: ",-1))),ze={class:"control"},De={class:"field column is-12 mb-0"},Me=Y((()=>d("label",{style:{"margin-bottom":"0.5rem"}},"Business Details",-1))),$e={class:"page-content-inner"},qe={class:"columns is-multiline"},He={class:"column is-12"},We={class:"columns"},Ye={class:"column is-12 content",style:{position:"relative"}},Ke=Y((()=>d("i",{class:"fas fa-robot","aria-hidden":"true",style:{"font-size":"1.5rem",cursor:"pointer"}},null,-1))),Fe={class:"column is-12 pb-4",style:{display:"flex","align-items":"center","justify-content":"flex-end","margin-top":"2rem"}},Ge={class:"content-box"},Je=Y((()=>d("div",{class:"column is-12 mb-6"},[d("h2",{class:"section-heading"},[d("i",{class:"iconify","data-icon":"feather:map-pin","aria-hidden":"true"}),m(" Location Information ")])],-1))),Xe={class:""},Ze={class:"modal-form columns cu-all-input is-multiline"},Qe={class:"field column is-6 mb-0"},el=Y((()=>d("label",null,"Postcode: *",-1))),ll={class:"control",style:{position:"relative"}},al=Y((()=>d("i",{class:"iconify","data-icon":"feather:search","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1))),sl=["loading"],tl={class:"field column is-6 mb-0"},il=Y((()=>d("label",null,"Business Address: ",-1))),ol={class:"control"},nl={class:"columns mb-4 p-0",style:{position:"relative","margin-left":"-2rem",cursor:"pointer"}},rl=Y((()=>d("i",{style:{color:"var(--primary)","margin-left":"10px",size:"3rem"},class:"fas fa-paint-brush","aria-hidden":"true"},null,-1))),dl={class:"column is-6 pb-4"},ul={key:0,style:{position:"absolute",bottom:"-2rem","background-color":"white",width:"350px",left:"6rem","z-index":"999"}},cl={class:"colorContainer"},ml={class:"close-btn"},pl=["onClick"],vl={key:0,class:"fas fa-check","aria-hidden":"true"},yl=Y((()=>d("div",{class:"column is-12 pb-2",style:{"margin-top":"0.3rem"}},[d("div",{class:"revenue-stat"},[d("div",{id:"partnerMap",style:{height:"250px",width:"100%","border-radius":"1rem"}})])],-1))),fl=N(e({__name:"CompanyLargeModal",props:{openCustomCompany:{type:Boolean},id:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:j}){const R=e,N=z(),Y=q(),fl=$(),gl=l(1);l(!1);const bl=l(""),_l=l(""),hl=l(!1),xl=l(!1),Cl=l(!1),kl=l(!1),wl=l(!1),Vl=l("update");l(!1),l(0);const Al=l(""),Sl=l(!1),Il=l(""),jl=a(),Rl=l(""),Nl=l({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Ol=l({id:0,hexCode:""}),Tl=()=>{j("update:modalHandler",!1),console.log("modal closed"),Pl.value={name:"",trade_name:"",email:"",phone_number:"",postcode:"",latitude:"",longitude:"",logo:null,business_details:"",reg_no:"",business_type:"",covered_distance:"",vat_no:"",address:"",industry:""}},Ul=e=>{gl.value=e};!fl.loggedCompany.industry||fl.loggedCompany.industry;const Pl=l({id:"",name:"",trade_name:"",email:"",phone_number:"",postcode:"",latitude:"",longitude:"",logo:null,business_details:"",reg_no:"",business_type:"",covered_distance:"",vat_no:"",address:"",industry:"",company:fl.loggedCompany.id,color:"#D875C7"}),Ll=()=>{Pl.value.name&&Pl.value.email&&(Pl.value.id||(gl.value=2))},Bl=async()=>{try{const e=W(Pl.value,["logo"]);if(!Pl.value.company)return Y.error("Company is required!.");let l={};if(Pl.value.id){await N.patch(`/v3/api/customer-company/${Pl.value.id}/`,e);Y.success("Data Added Succesfully."),j("update:OnSuccess",null),4==gl.value&&Tl()}else{await N.post("/v3/api/customer-company/",e);Tl(),Y.dismissAll(),Y.success("New company added"),j("update:OnSuccess",null)}if(hl.value){const e=window.location.origin;bl.value=e+"/partner-signup?token="+l.data.token,_l.value=l.data.password}else gl.value>3?Tl():gl.value+=1;4==gl.value&&Tl()}catch(e){Y.error(e)}},El=()=>{xl.value=!xl.value},zl=(e,l)=>{let a=new google.maps.Map(document.getElementById("partnerMap"),{center:{lat:e,lng:l},scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:7});new google.maps.Marker({position:{lat:e,lng:l},map:a,title:"Supplier Location"}),console.log(Pl.value.latitude)},Dl=async()=>{try{const e=await D.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${Pl.value.postcode}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);if("OK"===e.data.status){Pl.value.address=e.data.results[0].formatted_address;const l=e.data.results[0].geometry.location.lat;Pl.value.latitude=l;const a=e.data.results[0].geometry.location.lng;Pl.value.longitude=a,zl(l,a),Y.success("Address Added")}else"ZERO_RESULTS"===e.data.status&&Y.error("Invalid Post-Code")}catch(e){Y.error("Invalid Post-Code"),console.error(e)}},Ml=()=>{kl.value=!1},$l=async()=>{Cl.value=!0;try{const{data:e}=await N.post("v3/api/scripts/generate-content/",{prompt:`Write description in correct format related to this company ${Pl.value.name}. Which business type is ${Pl.value.business_type}.  `}),l=(e=>{const l=e.split("**"),a=[];for(let s=0;s<l.length;s++)""!==l[s]&&(s%2==0?a.push({type:"title",content:l[s].trim()}):a.push({type:"content",content:l[s].trim()}));return a})(e),a=(e=>{let l="";for(const a of e)"content"===a.type?l+=`<h3>${a.content}</h3>\n`:l+=`<p>${a.content}</p>\n`;return l})(l);console.log("formattedDescription:",l),Pl.value.business_details=a,Cl.value=!1,console.log("AI Response:",Rl.value)}catch(e){console.log(e),Y.error("Something went wrong!"),Cl.value=!1}};s((async()=>{R.id&&await(async()=>{const e=await N.get(`/v3/api/customer-company/${R.id}/`);e.data.business_details||(e.data.business_details=""),Pl.value=e.data,Al.value=e.data.logo,zl(e.data.latitude,e.data.longitude)})()}));const ql=e=>{const l=function(e){const l=e.split(","),a=l[0].indexOf("base64")>=0?atob(l[1]):decodeURI(l[1]),s=l[0].split(":")[1].split(";")[0],t=new Uint8Array(a.length);for(let i=0;i<a.length;i++)t[i]=a.charCodeAt(i);return new Blob([t],{type:s})}(e);Pl.value.logo=l,Al.value=e,console.log("Image URl:",e)};const Hl=["Self-employed / Sole Trader","Limited Company","Public Limited Company","Ordinary Partnership","Limited Partnership"],Wl=[5,10,15,20,25,50,75,100],Yl=t((()=>i((()=>import("./ckeditor-3dae14a5.js").then((e=>e.c))),["assets/ckeditor-3dae14a5.js","assets/index-879cc21e.js","assets/index-ad000b34.css","assets/vue.runtime.esm-bundler-9944127c.js"]).then((e=>e.default.component)))),Kl={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return s((async()=>{jl.value=await i((()=>import("./ckeditor-0b616cdc.js").then((e=>e.c))),["assets/ckeditor-0b616cdc.js","assets/index-879cc21e.js","assets/index-ad000b34.css"]).then((e=>e.default))})),(e,l)=>{const a=E,s=B,t=L,i=P,j=S,N=T,z=U,D=I,$=O;return o(),n(C,null,[R.openCustomCompany?(o(),n("form",{key:0,class:"parent-div",onSubmit:r(Bl,["prevent"]),onClose:Tl},[d("i",{class:"lnir lnir-close close-icon","aria-hidden":"true",onClick:Tl,color:"primary",elevated:""}),d("div",F,[d("ul",null,[d("li",null,[d("div",{onClick:l[0]||(l[0]=e=>Ul(1)),class:u([{active:1===c(gl)},"cus-single-link cu-pointer"])},[d("span",{class:u(["cus-icon",{active:1===c(gl)}])}," 1 ",2),m(" Contact Infomation ")],2)]),d("li",null,[d("div",{onClick:l[1]||(l[1]=e=>Ul(2)),class:u([{active:2===c(gl)},"cus-single-link cu-pointer"])},[d("span",{class:u(["cus-icon",{active:2===c(gl)}])}," 2 ",2),m(" Businesss Information ")],2)]),d("li",null,[d("div",{onClick:l[2]||(l[2]=e=>Ul(3)),class:u([{active:3===c(gl)},"cus-single-link cu-pointer"])},[d("span",{class:u(["cus-icon",{active:3===c(gl)}])}," 3 ",2),m(" Location Information ")],2)]),G]),J]),d("div",X,[p(d("div",{class:"content-box",onClick:Ml},[p(d("div",Z,[d("div",Q,[ee,d("div",le,[d("div",ae,[d("div",se,[d("div",te,[ie,d("div",oe,[p(d("input",{type:"text",name:"registeredCompanyName","onUpdate:modelValue":l[3]||(l[3]=e=>c(Pl).name=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Registered Company Name"},null,512),[[y,c(Pl).name]])])]),d("div",ne,[re,d("div",de,[p(d("input",{type:"text",name:"companyRegistrationNumber","onUpdate:modelValue":l[4]||(l[4]=e=>c(Pl).reg_no=e),class:"input is-primary-focus is-primary-focus",placeholder:"Company Registration Number"},null,512),[[y,c(Pl).reg_no]])])]),d("div",ue,[ce,d("div",me,[p(d("input",{type:"text",name:"tradename","onUpdate:modelValue":l[5]||(l[5]=e=>c(Pl).trade_name=e),class:"input is-primary-focus is-primary-focus",placeholder:"Trade Name"},null,512),[[y,c(Pl).trade_name]])])])]),f(i,{class:"column is-6"},{default:g((()=>[pe,f(t,{class:"is-flex is-justify-content-center mt-5"},{default:g((()=>[f(s,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:g((()=>[c(wl)?b("",!0):(o(),n("img",{key:0,class:"avatar",src:c(Al)?c(Al):"/images/avatars/placeholder.jpg",alt:""},null,8,ve)),"update"==c(Vl)?(o(),n("span",ye,[c(wl)?(o(),_(a,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:l[8]||(l[8]=h(r((e=>wl.value=!1),["prevent"]),["space"])),onClick:l[9]||(l[9]=e=>wl.value=!1)})):(o(),_(a,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:l[6]||(l[6]=h(r((e=>wl.value=!0),["prevent"]),["space"])),onClick:l[7]||(l[7]=()=>{Sl.value=!c(Sl)})}))])):b("",!0)])),_:1})])),_:1}),f(c(M),{field:"img",onCropSuccess:ql,modelValue:c(Sl),"onUpdate:modelValue":l[10]||(l[10]=e=>x(Sl)?Sl.value=e:null),noRotate:!1,noSquare:!1,langType:"en","img-format":"png/jpg"},null,8,["modelValue"])])),_:1})])]),d("div",fe,[ge,d("div",be,[p(d("input",{type:"email",name:"emailAddress","onUpdate:modelValue":l[11]||(l[11]=e=>c(Pl).email=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Email Address"},null,512),[[y,c(Pl).email]])])]),d("div",_e,[he,d("div",xe,[p(d("input",{type:"tel",name:"phoneNumber","onUpdate:modelValue":l[12]||(l[12]=e=>c(Pl).phone_number=e),class:"input is-primary-focus is-primary-focus",placeholder:"Phone Number"},null,512),[[y,c(Pl).phone_number]])])]),d("div",Ce,[f(j,{type:"submit",onClick:Ll,class:"next-tag",style:{width:"6rem"}},{default:g((()=>[m(" Next ")])),_:1})])])],512),[[v,1===c(gl)]])],512),[[v,1===c(gl)]]),p(d("div",ke,[d("div",we,[Ve,d("div",Ae,[Se,f(i,null,{default:g((()=>[f(t,null,{default:g((()=>[f(z,{modelValue:c(Pl).business_type,"onUpdate:modelValue":l[13]||(l[13]=e=>c(Pl).business_type=e),name:"business_type",class:"is-rounded"},{default:g((()=>[f(N,{value:""},{default:g((()=>[m("Please select")])),_:1}),(o(),n(C,null,k(Hl,((e,l)=>f(N,{value:e,key:l},{default:g((()=>[m(w(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{id:"interests",class:"pb-4",label:""})]),d("div",Ie,[je,f(i,null,{default:g((()=>[f(t,null,{default:g((()=>[f(z,{modelValue:c(Pl).covered_distance,"onUpdate:modelValue":l[14]||(l[14]=e=>c(Pl).covered_distance=e),name:"covered_distance",class:"is-rounded"},{default:g((()=>[f(N,{value:""},{default:g((()=>[m("Please select")])),_:1}),(o(),n(C,null,k(Wl,((e,l)=>f(N,{value:e,key:l},{default:g((()=>[m(w(e)+" miles ",1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),f(i,{id:"interests",class:"pb-4",label:""})]),d("div",Re,[Ne,d("div",Oe,[d("label",Te,[p(d("input",{id:"notVatRegistered",type:"radio",name:"vat","onUpdate:modelValue":l[15]||(l[15]=e=>x(Il)?Il.value=e:null),value:"No",style:{},placeholder:"VAT number"},null,512),[[V,c(Il)]]),Ue,m(" I'm not VAT registered ")]),d("label",Pe,[p(d("input",{id:"vatRegistered",type:"radio",name:"vat","onUpdate:modelValue":l[16]||(l[16]=e=>x(Il)?Il.value=e:null),value:"Yes",style:{},placeholder:"VAT number"},null,512),[[V,c(Il)]]),Le,m(" I'm VAT registered ")])])]),"Yes"===c(Il)?(o(),n("div",Be,[Ee,d("div",ze,[p(d("input",{type:"text",name:"vatnumber","onUpdate:modelValue":l[17]||(l[17]=e=>c(Pl).vat_no=e),class:"input is-primary-focus is-primary-focus",placeholder:"VAT Number"},null,512),[[y,c(Pl).vat_no]])])])):b("",!0)]),d("div",De,[Me,d("div",$e,[d("div",qe,[d("div",He,[d("div",We,[d("div",Ye,[f(j,{color:"primary",raised:"",loading:c(Cl),style:{position:"absolute","z-index":"50",top:"0.9rem",right:"2rem",width:"2rem"},title:"Write description with AI.",onClick:$l},{default:g((()=>[Ke])),_:1},8,["loading"]),c(jl)?(o(),_(c(Yl),{key:0,modelValue:c(Pl).business_details,"onUpdate:modelValue":l[18]||(l[18]=e=>c(Pl).business_details=e),editor:c(jl),config:Kl},null,8,["modelValue","editor"])):(o(),_(D,{key:1,height:"500px"}))])])])])])]),d("div",Fe,[f(j,{type:"button",onClick:l[19]||(l[19]=()=>{c(Pl).id?Bl():gl.value=3}),class:"next-tag",style:{width:"6rem"}},{default:g((()=>[m(" Next ")])),_:1})])],512),[[v,2===c(gl)]]),p(d("div",Ge,[Je,d("div",Xe,[d("div",Ze,[d("div",Qe,[el,d("div",ll,[f(j,{color:"primary",light:"",style:{position:"absolute",right:"0.2rem",top:"0.3rem","z-index":"10",width:"3rem","border-radius":"2rem"},onClick:Dl},{default:g((()=>[al])),_:1}),p(d("input",{type:"text",name:"postCode",autocomplete:"off",required:"",loading:c(Cl),"onUpdate:modelValue":l[20]||(l[20]=e=>c(Pl).postcode=e),class:"mb-2 input is-primary-focus is-primary-focus",placeholder:"Enter post code "},null,8,sl),[[y,c(Pl).postcode]])])]),d("div",tl,[il,d("div",ol,[p(d("input",{type:"text",name:"businessAdress","onUpdate:modelValue":l[21]||(l[21]=e=>c(Pl).address=e),class:"input is-primary-focus is-primary-focus",placeholder:"Business Address"},null,512),[[y,c(Pl).address]])])]),d("div",nl,[d("div",{class:"column is-6 pb-4 cus-input-label",style:{display:"flex","align-items":"center",gap:"0.5rem",color:"#bbb","font-weight":"500",width:"100%"},onClick:El},[m(" Color "),rl]),d("div",dl,[d("div",null,[d("div",{onClick:El,class:"color-pellate"},[d("div",{class:"current-color-div",style:A({backgroundColor:c(Pl).color})},null,4)])])]),c(xl)?(o(),n("div",ul,[d("div",cl,[d("div",ml,[d("i",{onClick:l[22]||(l[22]=e=>xl.value=!1),class:"lnir lnir-close","aria-hidden":"true"})]),(o(!0),n(C,null,k(c(H),((e,l)=>(o(),n("div",{key:e.id,onClick:l=>(e=>{Ol.value=e,xl.value=!1,Pl.value={...Pl.value,color:e.hexCode}})(e),style:A({backgroundColor:e.hexCode}),class:"colorDiv"},[c(Ol)==e?(o(),n("i",vl)):b("",!0)],12,pl)))),128))])])):b("",!0)]),yl]),f(j,{loading:c(Cl),type:"submit",color:"primary",raised:"",style:{float:"right"}},{default:g((()=>[m("Save & close")])),_:1},8,["loading"])])],512),[[v,3===c(gl)]])])],40,K)):b("",!0),c(Nl).isSweetAlertOpen?(o(),_($,{key:1,isSweetAlertOpen:c(Nl).isSweetAlertOpen,title:c(Nl).title,subtitle:c(Nl).subtitle,btntext:c(Nl).btntext,onCancel:()=>c(Nl).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0)],64)}}}),[["__scopeId","data-v-5d80bfc6"]]);export{fl as _};
