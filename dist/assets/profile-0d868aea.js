import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-208da950.js";import{_ as a}from"./AddUpdateUser-9c89d4c0.js";import{_ as s}from"./JobTodos.vue_vue_type_style_index_0_lang-7192b96f.js";import{_ as l}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-af8e572e.js";import{_ as t}from"./UserProfileInfo-52b4a750.js";import{_ as i}from"./SweetAlert.vue_vue_type_style_index_0_lang-ac12b538.js";import{_ as n}from"./VDropdown.vue_vue_type_style_index_0_lang-603277da.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-7635cdbe.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-6b5de0e3.js";import{f as u,b as d,r as p,$ as c,o as _,C as m,D as v,E as y,F as f,G as g,L as h,X as b,m as j,k as x,I as k,V as w,W as C,aS as V,O as A,N as U,P,U as S,A as O,T as I,H as M,J as H}from"./index-06a6340e.js";import{_ as T}from"./VControl-80863ea8.js";import{_ as E,a as D}from"./search-6-dark-6c9b195a.js";import{u as L}from"./useAPI-72ff1024.js";import{u as N}from"./useNotyf-c9f6b0c8.js";import{u as B}from"./viewWrapper-a9272aa8.js";import{b as K}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-59a6261b.js";import"./VIcon.vue_vue_type_script_setup_true_lang-fdf2963e.js";import"./VField.vue_vue_type_script_setup_true_lang-0800893a.js";import"./VLabel.vue_vue_type_script_setup_true_lang-7677c52d.js";import"./useVFieldContext-48d76d9e.js";import"./VInput.vue_vue_type_script_setup_true_lang-056f7702.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-915151fa.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-7098ce2e.js";import"./VFilePond.vue_vue_type_script_lang-14f0e780.js";import"./useSupportElement-a352115c.js";import"./VBlock.vue_vue_type_style_index_0_lang-bec8de88.js";import"./VTag.vue_vue_type_style_index_0_lang-b57192d1.js";import"./VIconButton-76597ce9.js";import"./having-coffee-dark-69a7d2f6.js";import"./moment-bad41465.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-24e05e91.js";import"./VOption.vue_vue_type_style_index_0_lang-15c7244f.js";import"./estimatesScripts-9cb324f2.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-5d9815b4.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-df82a9cd.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-eb48c931.js";import"./search-3-dark-1eb6ae2e.js";import"./VIconBox.vue_vue_type_style_index_0_lang-f04a6af5.js";import"./useDropdown-c043854f.js";import"./notyf-839862c2.js";import"./useThemeColors-68cf17bb.js";const z={class:"tile-grid-toolbar"},F={class:"buttons"},$=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),J=y("span",null,"Admin",-1),W={class:"tile-grid tile-grid-v1"},X=y("img",{class:"light-image",src:E,alt:""},null,-1),R=y("img",{class:"dark-image",src:D,alt:""},null,-1),q={class:"tile-grid-item"},G={class:"tile-grid-item-inner"},Z={class:"meta"},Q={class:"dark-inverted"},Y={style:{"text-transform":"capitalize"}},ee=["onClick"],ae=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-lock"})],-1),y("div",{class:"meta"},[y("span",null,"Edit"),y("span",null,"Edit user")],-1)],se=["onClick"],le=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-share"})],-1),y("div",{class:"meta"},[y("span",null,"Password"),y("span",null,"Change password")],-1)],te=y("hr",{class:"dropdown-divider"},null,-1),ie=["onClick"],ne=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete from list")],-1)],re=u({__name:"AdminsList",setup(s){const l=L(),t=N();d();const u=p(""),O=p(!1),I=p(""),M=p(""),H=p(!1),E=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),D=p([{username:"",last_name:"",email:"",password:"",status:"",role:"admin",phoneNumber:"",avatar:null}]),B=c((()=>u.value?D.value.filter((e=>e.username.match(new RegExp(u.value,"i"))||e.email.match(new RegExp(u.value,"i")))):D.value));p(0);const K=async()=>{try{O.value=!0;const e=await l.get("/api/users/by-role/admin/",{});D.value=e.data}catch(e){console.log(e)}finally{O.value=!1}},re=async()=>{try{O.value=!0;await l.delete(`/api/users/${M.value}/`,{});K(),t.success("Admin deleted successfully")}catch(e){console.error(e),t.error("Error while deleting")}finally{E.value.isSweetAlertOpen=!1,O.value=!1}},oe=(e="")=>{I.value=e,H.value=!H.value},ue=p(!1);return _((()=>{K()})),(s,l)=>{const t=T,d=P,p=o,c=r,_=n,D=a,L=i;return m(),v("div",null,[y("div",z,[f(t,{icon:"feather:search"},{default:g((()=>[h(y("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>x(u)?u.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,j(u)]])])),_:1}),y("div",F,[f(d,{onClick:l[1]||(l[1]=e=>oe()),color:"primary",raised:""},{default:g((()=>[$,J])),_:1})])]),y("div",W,[f(p,{class:k([0!==j(B).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[X,R])),_:1},8,["class"]),f(V,{name:"list",tag:"div",class:"columns is-multiline"},{default:g((()=>[(m(!0),v(w,null,C(j(B),((e,a)=>(m(),v("div",{key:a,class:"column is-6"},[y("div",q,[y("div",G,[f(c,{picture:e.avatar,color:"primary",initials:e.username.slice(0,2),size:"medium"},null,8,["picture","initials"]),y("div",Z,[y("span",Q,S(e.username)+" "+S(e.last_name?e.last_name:""),1),y("span",Y,S(e.role),1)]),f(_,{icon:"feather:more-vertical",spaced:"",right:""},{content:g((()=>[y("a",{onClick:a=>oe(e.id),role:"menuitem",class:"dropdown-item is-media"},ae,8,ee),y("a",{onClick:a=>{return s=e.id,I.value=s,void(ue.value=!0);var s},role:"menuitem",class:"dropdown-item is-media"},le,8,se),te,y("a",{onClick:a=>{return s=e,M.value=s.id,void(E.value={title:`Delete ${s.username}?`,subtitle:"After deleting this admin you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var s},role:"menuitem",class:"dropdown-item is-media"},ne,8,ie)])),_:2},1024)])])])))),128))])),_:1})]),j(H)?(m(),A(D,{key:0,"is-modal-open":j(H),"user-role":"admin","user-id":j(I),"onUpdate:closeModalHandler":l[2]||(l[2]=e=>H.value=!1),"onUpdate:actionUpdateHandler":K},null,8,["is-modal-open","user-id"])):U("",!0),j(E).isSweetAlertOpen?(m(),A(L,{key:1,loading:j(O),isSweetAlertOpen:j(E).isSweetAlertOpen,title:j(E).title,subtitle:j(E).subtitle,btntext:j(E).btntext,onConfirm:re,onCancel:()=>j(E).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):U("",!0),j(ue)?(m(),A(e,{key:2,isModalOpen:j(ue),userId:j(I),"onUpdate:closeModalHandler":l[3]||(l[3]=e=>ue.value=!1),"onUpdate:actionUpdateHandler":K},null,8,["isModalOpen","userId"])):U("",!0)])}}}),oe={class:"profile-wrapper"},ue={class:"profile-header has-text-centered"},de={class:"title is-4 is-narrow is-thin"},pe={class:"light-text"},ce={class:"profile-stats"},_e={class:"profile-stat"},me={style:{"text-transform":"capitalize"}},ve=y("div",{class:"separator"},null,-1),ye={class:"profile-stat"},fe=y("i",{"aria-hidden":"true",class:"lnil lnil-phone"},null,-1),ge=y("div",{class:"separator"},null,-1),he={class:"socials"},be=[y("i",{"aria-hidden":"true",class:"fas fa-edit"},null,-1)],je=[y("i",{"aria-hidden":"true",class:"fas fa-lock"},null,-1)],xe={class:"profile-body"},ke={class:"columns is-multiline"},we={class:"column is-12"},Ce={class:"toolbar"},Ve={class:"tabs-inner"},Ae={class:"tabs is-boxed"},Ue=[y("span",null,"Personal Info",-1)],Pe=[y("span",null,"Admins",-1)],Se=[y("span",null,"Activities",-1)],Oe=[y("span",null,"Todos",-1)],Ie={key:0,class:"column is-12"},Me={key:1,class:"column is-12"},He={key:2,class:"column is-12"},Te={key:3,class:"column is-12"},Ee=u({__name:"profile",setup(i){B().setPageTitle("Profile"),O((()=>({title:"Profile Ibex-User  "}))),I();const n=L(),o=d(),u=p(!1),c=p(!1),g=p(""),h=p(!1),b=p("personal"),x=p({username:"",email:"",password:"",is_sentMail:!1,status:"",role:"",phoneNumber:"",avatar:"",supplier:""}),w=async()=>{try{h.value=!0;const e=await n.get(`/api/users/${o.user.id}/`);x.value=e.data}catch(e){console.error(e)}finally{h.value=!1}};return _((()=>{console.log("user data ",o.user),o.user.id&&w()})),(i,n)=>{const d=r,p=re,_=t,h=l,C=s,V=a,P=e;return m(),v("div",oe,[y("div",ue,[f(d,{size:"xl",picture:j(x).avatar},null,8,["picture"]),y("h3",de,S(j(x)?.username),1),y("p",pe,S(j(x)?.email?j(x)?.email:""),1),y("div",ce,[y("div",_e,[y("span",me,S(j(x)?.role),1)]),ve,y("div",ye,[fe,y("span",null,S(j(x)?.phoneNumber),1)]),ge,y("div",he,[y("a",{onClick:n[0]||(n[0]=e=>u.value=!j(u))},be),y("a",{onClick:n[1]||(n[1]=e=>{return a=j(x).id,g.value=a,void(c.value=!0);var a})},je)])])]),y("div",xe,[y("div",ke,[y("div",we,[y("div",Ce,[y("div",Ve,[y("div",Ae,[y("ul",null,[y("li",{class:k(["personal"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[2]||(n[2]=M(H((e=>b.value="personal"),["prevent"]),["space"])),onClick:n[3]||(n[3]=e=>b.value="personal")},Ue,32)],2),"admin"==j(o).user.role?(m(),v("li",{key:0,class:k(["admins"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[4]||(n[4]=M(H((e=>b.value="admins"),["prevent"]),["space"])),onClick:n[5]||(n[5]=e=>b.value="admins")},Pe,32)],2)):U("",!0),y("li",{class:k(["activities"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[6]||(n[6]=M(H((e=>b.value="activities"),["prevent"]),["space"])),onClick:n[7]||(n[7]=e=>b.value="activities")},Se,32)],2),y("li",{class:k(["todo"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[8]||(n[8]=M(H((e=>b.value="todo"),["prevent"]),["space"])),onClick:n[9]||(n[9]=e=>b.value="todo")},Oe,32)],2)])])])])]),"admins"==j(b)?(m(),v("div",Ie,[f(p,{class:"mb-3"})])):U("",!0),"personal"==j(b)?(m(),v("div",Me,[f(_,{"user-data":j(x)},null,8,["user-data"])])):U("",!0),"activities"==j(b)?(m(),v("div",He,[f(h,{"get-user-activities":!0})])):U("",!0),"todo"==j(b)?(m(),v("div",Te,[f(C,{"get-user-todo":!0})])):U("",!0)])]),j(u)?(m(),A(V,{key:0,"is-modal-open":j(u),"user-role":"admin","user-id":j(o).user.id,"onUpdate:closeModalHandler":n[10]||(n[10]=e=>u.value=!1),"onUpdate:actionUpdateHandler":w},null,8,["is-modal-open","user-id"])):U("",!0),j(c)?(m(),A(P,{key:1,isModalOpen:j(c),userId:j(g),"onUpdate:closeModalHandler":n[11]||(n[11]=e=>c.value=!1),"onUpdate:actionUpdateHandler":w},null,8,["isModalOpen","userId"])):U("",!0)])}}});"function"==typeof K&&K(Ee);export{Ee as default};
