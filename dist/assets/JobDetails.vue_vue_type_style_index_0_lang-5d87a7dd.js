import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-f14ff3ec.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-acc49533.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-e12a21ae.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-b09384ab.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-e35d9154.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-8a1a778e.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-88afe542.js";import{_ as c}from"./VInput.vue_vue_type_script_setup_true_lang-b86e2a7b.js";import{_ as u}from"./VControl-99928d1c.js";import{f as d,b as r,r as p,w as m,$ as v,o as f,av as h,C as _,D as y,E as g,F as b,G as k,K as w,U as j,L as x,X as C,N as V,aS as T,m as S,O as U,V as I,W as A,P,al as F,Q as D,R as M,S as O,B as q,J as E,I as $,x as R,H as N,k as H,aB as B,Z as z,s as J,y as K}from"./index-5437c3ff.js";import{_ as G,a as W}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-15ad727f.js";import{u as Q}from"./useNotyf-19e6534b.js";import{_ as Y}from"./ExcelFileEditor-8f063c7a.js";import{f as X,a as ee,C as le,d as ae}from"./useSupportElement-64af5555.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang-201942aa.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-2653a3df.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-58f63b63.js";import{_ as ne,a as oe}from"./ProjectFiles-5ee9f8a4.js";import{u as ce,_ as ue,a as de}from"./groupedCircleCharts-04a5e9ef.js";import{b as re,u as pe,a as me,c as ve,_ as fe}from"./groupedRadialCharts-969cf187.js";import{_ as he}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-471ddbd3.js";import{A as _e}from"./vue3-apexcharts.common-a964da4b.js";import{u as ye}from"./salesSparksChart-20680bc9.js";import{u as ge}from"./revenueAreaChart-dfe4fd87.js";import{_ as be}from"./VAvatar.vue_vue_type_style_index_0_lang-84b318a5.js";import{h as ke}from"./moment-bad41465.js";import{_ as we}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-6478a946.js";import{p as je}from"./index-c1fc2d09.js";import{a as xe}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-0903294b.js";import{_ as Ce}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-fbdbf402.js";import{_ as Ve}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-bf550a46.js";import{o as Te}from"./via-placeholder-24645670.js";import{_ as Se}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-b6876710.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-e23a966f.js";import{_ as Ie}from"./VDropdown.vue_vue_type_style_index_0_lang-ef4ac719.js";import{_ as Ae}from"./VPlyr.vue_vue_type_style_index_0_lang-15dfe622.js";import{_ as Pe}from"./VIconBox.vue_vue_type_style_index_0_lang-723dd652.js";import{f as Fe}from"./index-5fa9b154.js";import{_ as De}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-e3d46910.js";import{_ as Me}from"./JobTodos.vue_vue_type_style_index_0_lang-9e3c1947.js";import{_ as Oe}from"./UserCardDropdown-b807fd02.js";import{u as qe}from"./useThemeColors-fa4464c7.js";import{_ as Ee}from"./VTag.vue_vue_type_style_index_0_lang-55de786d.js";import{_ as $e}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-2f7e5bbf.js";const Le=e=>(D("data-v-6b746c41"),e=e(),M(),e),Re={class:"column is-12"},Ne={class:"list-flex-toolbar is-reversed"},He={class:"columns is-multiline"},Be={key:0,class:"column is-12 card p-4 curved mb-2"},ze={class:"columns is-multiline"},Je={class:"column is-10"},Ke={class:"column is-2"},Ge=Le((()=>g("img",{class:"light-image",src:G,alt:""},null,-1))),We=Le((()=>g("img",{class:"dark-image",src:W,alt:""},null,-1))),Ze={key:0,class:"column is-12 card p-4 curved mb-2"},Qe={class:"columns is-multiline"},Ye={class:"column is-10"},Xe={class:"column is-2"},el={class:"is-flex space-between mb-4 bottom-border"},ll={class:"title is-5 m-0"},al={class:"content"},tl={class:"is-flex"},sl={key:0,class:"columns is-multiline"},il={class:"column is-6"},nl={class:"column is-2"},ol={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},dl={class:"column is-2"},rl={class:"column is-2"},pl={class:"column is-2"},ml={class:"column is-2"},vl={class:"column is-2"},fl={class:"is-flex columns is-multiline"},hl=d({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const d=e;r();const D=Z(),M=Q(),O=p(!1),q={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},E=p(!1),$=p(!1),L=p(!1),R=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),N=p(""),H=p(""),B=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),z=p({title:"",is_template:!1,object:d.objectId??"",description:""}),J=p({title:"",is_template:!1,description:""}),K=async()=>{try{const e=await D.get(`/api/calculation-section/?object=${d.objectId??""}&user_id=${d.userId??""}&is_template=${d.fetchTemplates??""}`);R.value=e.data}catch(e){console.error(e)}finally{O.value=!1}},G=async()=>{try{const e=z.value;await D.post("/api/calculation-section/",e);M.success("Section created successfully!"),K()}catch(e){console.error(e)}finally{O.value=!1}};m((()=>B.value.width),(()=>{let e=0;e=B.value.height*B.value.width,B.value.item_area=e.toFixed(2)})),m((()=>B.value.item_unit_price),(()=>{let e=0;e=B.value.item_area*B.value.item_unit_price,B.value.item_total_price=e.toFixed(2)})),m((()=>B.value.quantity),(()=>{let e=0;e=B.value.item_total_price*B.value.quantity,B.value.grand_total_price=e.toFixed(2)}));const W=async()=>{try{const e=B.value;e.section=N.value;await D.post("/api/calculation-section-items/",e);M.success("Section created successfully!"),K()}catch(e){console.error(e)}finally{O.value=!1}},Y=v((()=>{if(H.value){const e=new RegExp(H.value,"i");return R.value.filter((l=>l.title?.match(e)))}return R.value})),ee=async e=>{try{await D.delete(`/api/calculation-section/${e}/`),M.success("Section deleted successfully!"),K()}catch(l){console.error(l),M.error("Failed to delete sheet.")}};return f((async()=>{await K(),await K()})),(e,d)=>{const r=P,p=F,m=u,v=c,f=o,D=n,M=i,O=s,R=t,K=l,Z=a,Q=h("tooltip");return _(),y("div",Re,[g("div",Ne,[b(p,null,{default:k((()=>[b(r,{icon:$.value?"fas fa-window-close":"fas fa-plus",color:$.value?"warning":"primary",class:"ml-2",raised:"",onClick:d[0]||(d[0]=e=>$.value=!$.value)},{default:k((()=>[w(j($.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:d[1]||(d[1]=e=>$.value=!$.value)},{default:k((()=>[w("Import")])),_:1})])),_:1}),g("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>H.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,H.value]])])),_:1})])]),g("div",He,[b(T,{name:"translate-page-y"},{default:k((()=>[$.value?(_(),y("div",Be,[g("div",ze,[g("div",Je,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":d[3]||(d[3]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(D,{modelValue:z.value.description,"onUpdate:modelValue":d[4]||(d[4]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ke,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(M,{modelValue:z.value.is_template,"onUpdate:modelValue":d[5]||(d[5]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),S(Y).length?V("",!0):(_(),U(O,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[Ge,We])),_:1})),b(T,{name:"translate-page-y"},{default:k((()=>[L.value?(_(),y("div",Ze,[g("div",Qe,[g("div",Ye,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":d[6]||(d[6]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(D,{modelValue:J.value.description,"onUpdate:modelValue":d[7]||(d[7]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Xe,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(M,{modelValue:J.value.is_template,"onUpdate:modelValue":d[8]||(d[8]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),b(T,{name:"from-bottom"},{default:k((()=>[S(Y).length?(_(!0),y(I,{key:0},A(S(Y),((e,l)=>(_(),y("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[g("div",el,[g("div",null,[g("h4",ll,j(e.title),1),g("div",al,[g("p",null,j(S(X)(e.created_at)),1)])]),g("div",tl,[b(R,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),x(b(R,{icon:"fas fa-plus",color:E.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{N.value=e,E.value=!E.value,0==E.value&&(B.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),x(b(R,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(R,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),E.value?(_(),y("div",sl,[g("div",il,[b(f,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.title,"onUpdate:modelValue":d[9]||(d[9]=e=>B.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",nl,[b(f,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.height,"onUpdate:modelValue":d[10]||(d[10]=e=>B.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ol,[b(f,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.width,"onUpdate:modelValue":d[11]||(d[11]=e=>B.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",cl,[b(f,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_area,"onUpdate:modelValue":d[12]||(d[12]=e=>B.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ul,[b(f,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.unit,"onUpdate:modelValue":d[13]||(d[13]=e=>B.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",dl,[b(f,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_unit_price,"onUpdate:modelValue":d[14]||(d[14]=e=>B.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",rl,[b(f,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_total_price,"onUpdate:modelValue":d[15]||(d[15]=e=>B.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",pl,[b(f,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.quantity,"onUpdate:modelValue":d[16]||(d[16]=e=>B.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ml,[b(f,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.grand_total_price,"onUpdate:modelValue":d[17]||(d[17]=e=>B.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",vl,[b(r,{light:"",fullwidth:"",onClick:W,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[w("Add Item")])),_:1})])])):V("",!0),g("div",fl,[e.items.length?(_(),U(Z,{key:0,class:"column is-12",data:e.items,columns:q,compact:""},{body:k((()=>[b(T,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(_(!0),y(I,null,A(e.items,(e=>(_(),y("div",{key:e.id,class:"flex-table-item"},[b(K,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,{column:{align:"end"}},{default:k((()=>[b(R,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(R,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):V("",!0)])])))),128)):V("",!0)])),_:1})])])}}}),_l=O(hl,[["__scopeId","data-v-6b746c41"]]),yl=e=>(D("data-v-ce90a5fa"),e=e(),M(),e),gl={key:1},bl={class:"columns is-multiline"},kl={class:"list-flex-toolbar is-reversed column is-12"},wl={class:"multiselect-single-label"},jl=["src"],xl=["src"],Cl={class:"is-flex"},Vl={class:"card p-4 curved is-flex space-between"},Tl={class:"subtitle is-5 m-0"},Sl={class:"content"},Ul={class:"is-flex"},Il={key:1},Al=yl((()=>g("h1",{class:"title is-4"},"No File Uploaded",-1))),Pl=[Al],Fl={class:"modal-form columns is-multiline"},Dl={class:"file has-name"},Ml={class:"file-label"},Ol=yl((()=>g("span",{class:"file-cta"},[g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})]),g("span",{class:"file-label"}," Choose a file… ")],-1))),ql={class:"file-name light-text"},El=d({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;r(),p(null);const a=Z(),s=Q(),i=p(!1);p([[""]]);const n=p([]),d=p([]),h=p(""),T=p(!1);p("");const D=p("");p("");const M=p(!1),O=p(0),$=p({file:"",title:"",object:l.objectId}),L=e=>{let l=e.target.files[0];$.value.file=l,D.value=l.name,$.value.title=l.name},R=p(""),N=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),H=async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/?object=${l.objectId}`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}},B=(e="")=>{O.value=e,M.value=!0},z=p(!1),J=async()=>{try{z.value=!0;const e=ee($.value,[""]);await a.post("/api/excel-files/upload-excel/",e);H(),s.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,T.value=!1}};m((()=>R.value),(e=>{e&&(async e=>{try{z.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),s.success("Sheet create successfully"),H()}catch(l){console.error(l)}finally{z.value=!1,T.value=!1}})(e)}));p("excel");const K=v((()=>{if(h.value){const e=new RegExp(h.value,"i");return n.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return n.value.filter((e=>0==e.is_template))}));return v((()=>{if(h.value){const e=new RegExp(h.value,"i");return d.value.filter((l=>l.title?.match(e)))}return d.value})),f((async()=>{l.fetchAll&&await H(),l.userId&&(async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}})(),(async()=>{try{i.value=!0;const e=await a.get("/api/excel-files/templates/");d.value=e.data,N.value=d.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{i.value=!1}})(),await H()})),(e,n)=>{const d=ie,r=q("Multiselect"),p=u,m=o,v=P,f=F,z=t,G=Y,W=se,Z=c,Q=te;return i.value?(_(),U(d,{key:0})):(_(),y("div",gl,[g("div",bl,[g("div",kl,[b(f,null,{default:k((()=>[b(m,{style:{width:"260px"}},{default:k((({id:e})=>[b(p,null,{default:k((()=>[b(r,{modelValue:R.value,"onUpdate:modelValue":n[0]||(n[0]=e=>R.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:N.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[g("div",wl,[g("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,jl),w(" "+j(e.name),1)])])),option:k((({option:e})=>[g("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,xl),w(" "+j(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(v,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:n[1]||(n[1]=e=>B())},{default:k((()=>[w("New Sheet")])),_:1}),b(v,{icon:"fas fa-upload",raised:"",light:"",onClick:n[2]||(n[2]=e=>T.value=!T.value),outlined:"",color:"primary"},{default:k((()=>[w(" File ")])),_:1})])),_:1}),g("div",Cl,[b(p,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>h.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,h.value]])])),_:1})])]),S(K).length?(_(!0),y(I,{key:0},A(S(K),((e,l)=>(_(),y("div",{class:"column is-6",key:e.id},[g("div",Vl,[g("div",null,[g("h4",Tl,j(e.title),1),g("div",Sl,[g("p",null,j(S(X)(e.created_at)),1)])]),g("div",Ul,[b(z,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>B(e.id),"has-background":""},null,8,["onClick"]),b(z,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),s.success("Sheet deleted successfully!"),H()}catch(l){console.error(l),s.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(_(),y("div",Il,Pl))]),M.value?(_(),U(G,{key:0,class:"fullscreen","excel-file-modal":M.value,fileId:O.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":n[4]||(n[4]=e=>{M.value=!1,H()})},null,8,["excel-file-modal","fileId","object-id"])):V("",!0),b(Q,{is:"form",open:T.value,title:"Upload Task File",size:"medium",actions:"right",onClose:n[7]||(n[7]=e=>T.value=!1),onSubmit:E(J,["prevent"])},{content:k((()=>[g("div",Fl,[b(m,{class:"column is-12"},{default:k((()=>[b(W,null,{default:k((()=>[w("File Title")])),_:1}),b(p,null,{default:k((()=>[b(Z,{modelValue:$.value.title,"onUpdate:modelValue":n[5]||(n[5]=e=>$.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(m,{class:"column is-12",grouped:""},{default:k((()=>[b(p,null,{default:k((()=>[g("div",Dl,[g("label",Ml,[g("input",{onChange:L,class:"file-input",type:"file",name:"file",required:""},null,32),Ol,g("span",ql,j(D.value?D.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(v,{onClick:n[6]||(n[6]=e=>T.value=!1),raised:""},{default:k((()=>[w("Close")])),_:1})])),action:k((()=>[b(v,{type:"submit",color:"primary",raised:""},{default:k((()=>[w("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),$l=O(El,[["__scopeId","data-v-ce90a5fa"]]),Ll={class:"columns is-multiline"},Rl={class:"column is-3"},Nl={class:"column is-3"},Hl={class:"column is-3"},Bl={class:"column is-3"},zl={class:"column is-6"},Jl={class:"column is-6"},Kl={class:"column is-6"},Gl={class:"column is-6"},Wl={class:"column is-6"},Zl={class:"column is-6"},Ql=d({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=ye(),{revenueOptions:i}=ge(),{lineStatsChartOptions:n}=re(),{flexRadialChartCircleOptions:o}=pe(),{flexRadialChartStripesOptions:c}=me(),{widgetGaugeGroup1Options:u,widgetGaugeGroup2Options:d,widgetGaugeGroup3Options:r}=ve(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ce();return(e,f)=>{const h=he,w=fe,j=ue,x=de;return _(),y("div",Ll,[g("div",Rl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark1",height:S(l).chart.height,type:S(l).chart.type,series:S(l).series,options:S(l)},null,8,["height","type","series","options"])])),_:1})]),g("div",Nl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark2",height:S(a).chart.height,type:S(a).chart.type,series:S(a).series,options:S(a)},null,8,["height","type","series","options"])])),_:1})]),g("div",Hl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark3",height:S(t).chart.height,type:S(t).chart.type,series:S(t).series,options:S(t)},null,8,["height","type","series","options"])])),_:1})]),g("div",Bl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark4",height:S(s).chart.height,type:S(s).chart.type,series:S(s).series,options:S(s)},null,8,["height","type","series","options"])])),_:1})]),g("div",zl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(S(_e),{id:"line-stats-widget-chart",height:S(n).chart.height,type:S(n).chart.type,series:S(n).series,options:S(n)},null,8,["height","type","series","options"])])),_:1})]),g("div",Jl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(S(_e),{id:"line-stats-area-chart",height:S(i).chart.height,type:S(i).chart.type,series:S(i).series,options:S(i)},null,8,["height","type","series","options"])])),_:1})]),g("div",Kl,[b(j,{title:"Sales Revenue",straight:""},{default:k((()=>[b(S(_e),{id:"flex-stat-circle",height:S(o).chart.height,type:S(o).chart.type,series:S(o).series,options:S(o)},null,8,["height","type","series","options"])])),_:1})]),g("div",Gl,[b(j,{title:"Sales Revenue",straight:""},{default:k((()=>[b(S(_e),{id:"flex-stat-radial",height:S(c).chart.height,type:S(c).chart.type,series:S(c).series,options:S(c)},null,8,["height","type","series","options"])])),_:1})]),g("div",Wl,[b(x,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(S(_e),{id:"group-radial-1",height:S(p).chart.height,type:S(p).chart.type,series:S(p).series,options:S(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(S(_e),{id:"group-radial-2",height:S(m).chart.height,type:S(m).chart.type,series:S(m).series,options:S(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(S(_e),{id:"group-radial-3",height:S(v).chart.height,type:S(v).chart.type,series:S(v).series,options:S(v)},null,8,["height","type","series","options"])])),_:1})]),g("div",Zl,[b(x,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(S(_e),{id:"group-gauge-1",height:S(u).chart.height,type:S(u).chart.type,series:S(u).series,options:S(u)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(S(_e),{id:"group-gauge-2",height:S(d).chart.height,type:S(d).chart.type,series:S(d).series,options:S(d)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(S(_e),{id:"group-gauge-3",height:S(r).chart.height,type:S(r).chart.type,series:S(r).series,options:S(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Yl=e=>(D("data-v-1f68036b"),e=e(),M(),e),Xl={class:"timeline-wrapper"},ea=Yl((()=>g("div",{class:"timeline-header"},null,-1))),la={class:"timeline-wrapper-inner"},aa={class:"timeline-container"},ta={class:"timeline-item is-unread"},sa={class:"date"},ia={class:"content-wrap"},na={class:"content-box"},oa=Yl((()=>g("div",{class:"status"},null,-1))),ca={class:"box-text"},ua={class:"meta-text"},da=["innerHTML"],ra=d({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=Z(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=be;return _(),y("div",Xl,[ea,g("div",la,[g("div",aa,[(_(!0),y(I,null,A(S(t),(e=>(_(),y("div",ta,[g("div",sa,[g("span",null,j(S(ke)(e.timestamp).format("ddd, mm yyyy")),1)]),g("div",{class:$(["dot",s[e.action]])},null,2),g("div",ia,[g("div",na,[oa,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),g("div",ca,[g("div",ua,[g("p",null,[g("span",null,j(e.actor_info?.username??"N/A")+" "+j(e.actor_info?.last_name??"N/A"),1),g("span",{class:"log-message",innerHTML:e.message},null,8,da)]),g("span",null,j(S(ke)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),pa=O(ra,[["__scopeId","data-v-1f68036b"]]),ma={class:"table is-striped is-fullwidth"},va=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Job"),g("th",{scope:"col"},"ID"),g("th",{scope:"col"},"Title"),g("th",{scope:"col"},"Status"),g("th",{scope:"col"},"Total Price"),g("th",{scope:"col"},"Total Tax"),g("th",{scope:"col"},"Amount Paid"),g("th",{scope:"col"},"Balance"),g("th",{scope:"col"},"Deadline"),g("th",{scope:"col"},"Date Paid"),g("th",{scope:"col"},"Files"),g("th",{scope:"col",class:"is-end"},"Actions")])],-1),fa=g("td",null,"Tina",-1),ha=g("td",null,"Bergmann",-1),_a=g("td",null,"Sales",-1),ya=g("td",null,"Tina",-1),ga=g("td",null,"Bergmann",-1),ba=g("td",null,"Sales",-1),ka=g("td",null,"Tina",-1),wa=g("td",null,"Bergmann",-1),ja=g("td",null,"Sales",-1),xa=g("td",null,"Bergmann",-1),Ca=g("td",null,"Sales",-1),Va={class:"is-end"},Ta={class:"is-flex is-justify-content-flex-end"},Sa=g("td",null,"Tina",-1),Ua=g("td",null,"Bergmann",-1),Ia=g("td",null,"Sales",-1),Aa=g("td",null,"Tina",-1),Pa=g("td",null,"Bergmann",-1),Fa=g("td",null,"Sales",-1),Da=g("td",null,"Tina",-1),Ma=g("td",null,"Bergmann",-1),Oa=g("td",null,"Sales",-1),qa=g("td",null,"Bergmann",-1),Ea=g("td",null,"Sales",-1),$a={class:"is-end"},La={class:"is-flex is-justify-content-flex-end"},Ra=g("td",null,"Tina",-1),Na=g("td",null,"Bergmann",-1),Ha=g("td",null,"Sales",-1),Ba=g("td",null,"Tina",-1),za=g("td",null,"Bergmann",-1),Ja=g("td",null,"Sales",-1),Ka=g("td",null,"Tina",-1),Ga=g("td",null,"Bergmann",-1),Wa=g("td",null,"Sales",-1),Za=g("td",null,"Bergmann",-1),Qa=g("td",null,"Sales",-1),Ya={class:"is-end"},Xa={class:"is-flex is-justify-content-flex-end"},et=g("td",null,"Tina",-1),lt=g("td",null,"Bergmann",-1),at=g("td",null,"Sales",-1),tt=g("td",null,"Tina",-1),st=g("td",null,"Bergmann",-1),it=g("td",null,"Sales",-1),nt=g("td",null,"Tina",-1),ot=g("td",null,"Bergmann",-1),ct=g("td",null,"Sales",-1),ut=g("td",null,"Bergmann",-1),dt=g("td",null,"Sales",-1),rt={class:"is-end"},pt={class:"is-flex is-justify-content-flex-end"},mt=d({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=je;R();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),y("table",ma,[va,g("tbody",null,[g("tr",null,[fa,ha,_a,ya,ga,ba,ka,wa,ja,xa,Ca,g("td",Va,[g("div",Ta,[b(a)])])]),g("tr",null,[Sa,Ua,Ia,Aa,Pa,Fa,Da,Ma,Oa,qa,Ea,g("td",$a,[g("div",La,[b(a)])])]),g("tr",null,[Ra,Na,Ha,Ba,za,Ja,Ka,Ga,Wa,Za,Qa,g("td",Ya,[g("div",Xa,[b(a)])])]),g("tr",null,[et,lt,at,tt,st,it,nt,ot,ct,ut,dt,g("td",rt,[g("div",pt,[b(a)])])])])])}}}),vt={class:"table is-striped is-fullwidth"},ft=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"First Name"),g("th",{scope:"col"},"Last Name"),g("th",{scope:"col"},"Position"),g("th",{scope:"col",class:"is-end"},[g("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ht=g("td",null,"Tina",-1),_t=g("td",null,"Bergmann",-1),yt=g("td",null,"Head of Sales",-1),gt={class:"is-end"},bt={class:"is-flex is-justify-content-flex-end"},kt=g("td",null,"John",-1),wt=g("td",null,"Wistmus",-1),jt=g("td",null,"Senior Executive",-1),xt={class:"is-end"},Ct={class:"is-flex is-justify-content-flex-end"},Vt=g("td",null,"Sam",-1),Tt=g("td",null,"Watson",-1),St=g("td",null,"Software Engineer",-1),Ut={class:"is-end"},It={class:"is-flex is-justify-content-flex-end"},At=g("td",null,"Jolaine",-1),Pt=g("td",null,"Joestar",-1),Ft=g("td",null,"HR Manager",-1),Dt={class:"is-end"},Mt={class:"is-flex is-justify-content-flex-end"},Ot=g("td",null,"Anders",-1),qt=g("td",null,"Jensen",-1),Et=g("td",null,"Accountant",-1),$t={class:"is-end"},Lt={class:"is-flex is-justify-content-flex-end"},Rt=d({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=je;R();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),y("table",vt,[ft,g("tbody",null,[g("tr",null,[ht,_t,yt,g("td",gt,[g("div",bt,[b(a)])])]),g("tr",null,[kt,wt,jt,g("td",xt,[g("div",Ct,[b(a)])])]),g("tr",null,[Vt,Tt,St,g("td",Ut,[g("div",It,[b(a)])])]),g("tr",null,[At,Pt,Ft,g("td",Dt,[g("div",Mt,[b(a)])])]),g("tr",null,[Ot,qt,Et,g("td",$t,[g("div",Lt,[b(a)])])])])])}}}),Nt={class:"columns is-multiline"},Ht={class:"column is-12"},Bt={class:"toolbar"},zt={class:"tabs-inner"},Jt={class:"tabs"},Kt=g("span",null,"Estimate",-1),Gt=[Kt],Wt=g("span",null,"Budget",-1),Zt=[Wt],Qt=g("span",null,"Owner Invoice",-1),Yt=[Qt],Xt=g("li",{class:"tab-naver"},null,-1),es={key:0,class:"column is-12"},ls={key:1,class:"column is-12"},as={key:2,class:"column is-12"},ts=d({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=je;R();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Rt,s=mt;return _(),y("div",Nt,[g("div",Ht,[g("div",Bt,[g("div",zt,[g("div",Jt,[g("ul",null,[g("li",{class:$(["estimate"===S(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N(E((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},Gt,32)],2),g("li",{class:$(["budget"===S(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=N(E((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},Zt,32)],2),g("li",{class:$(["invoice"===S(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=N(E((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Yt,32)],2),Xt])])])])]),"estimate"===S(a)?(_(),y("div",es,[b(t)])):V("",!0),"budget"===S(a)?(_(),y("div",ls)):V("",!0),"invoice"===S(a)?(_(),y("div",as,[b(s)])):V("",!0)])}}}),ss={class:"user-grid-toolbar"},is=g("span",{class:"icon"},[g("i",{class:"fas fa-plus"})],-1),ns=g("span",null,"Progress",-1),os={class:"user-grid user-grid-v1"},cs={class:"columns is-multiline"},us={class:"grid-item"},ds={class:"is-flex"},rs=d({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=u,n=q("Multiselect"),c=o,d=P,r=F,p=B,m=Ve,v=Ce;return _(),y("div",null,[g("div",ss,[b(i,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>H(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(l)]])])),_:1}),b(r,null,{default:k((()=>[b(c,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:S(a),"onUpdate:modelValue":s[1]||(s[1]=e=>H(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(d,null,{default:k((()=>[is,ns])),_:1})])),_:1})]),g("div",os,[g("div",cs,[(_(),y(I,null,A(20,(e=>g("div",{key:e,class:"column is-3"},[g("div",us,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),g("div",ds,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ps={key:1},ms={class:"card-grid-toolbar"},vs={class:"buttons"},fs=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),hs=g("span",null,"Progress",-1),_s={class:"card-grid card-grid-v4"},ys=g("img",{class:"light-image",src:G,alt:""},null,-1),gs=g("img",{class:"dark-image",src:W,alt:""},null,-1),bs=["href","title"],ks=["src","alt"],ws={class:"card-grid-item-content"},js={class:"dark-inverted"},xs={key:0},Cs=g("summary",null,"Read More",-1),Vs={key:0,class:"card-grid-item-footer"},Ts={class:"meta"},Ss={class:"dark-inverted"},Us=d({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=Z(),t=p(""),i=p(!1),n=p(!1),c=p(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const h=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return f((()=>{"job"===l.type&&m()})),(e,a)=>{const r=rs,p=u,v=q("Multiselect"),f=o,F=P,D=s,M=be,O=xe;return S(i)?(_(),U(r,{key:0})):(_(),y("div",ps,[g("div",ms,[b(p,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>H(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(t)]])])),_:1}),g("div",vs,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:S(c),"onUpdate:modelValue":a[1]||(a[1]=e=>H(c)?c.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(F,{onClick:a[2]||(a[2]=e=>n.value=!S(n)),color:"primary",raised:""},{default:k((()=>[fs,hs])),_:1})])]),g("div",_s,[b(D,{class:$([0!==S(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ys,gs])),_:1},8,["class"]),b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(S(h),(e=>(_(),y("div",{key:e.id,class:"column is-3"},[g("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[g("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>S(Te)(400,300))},null,40,ks),g("div",ws,[g("h3",js,j(e.title?e.title:"No Title"),1),g("p",null,[w(j(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(_(),y("details",xs,[Cs,w(" "+j(e.description?e.description:""),1)])):V("",!0)])]),e.uploaded_by_info?(_(),y("div",Vs,[b(M,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),g("div",Ts,[g("span",Ss,j(e.uploaded_by_info.username??"N/A")+" "+j(e.uploaded_by_info.last_name??""),1),g("span",null,j(S(X)(e.created_at)),1)])])):V("",!0)],8,bs)])))),128))])),_:1})]),S(n)?(_(),U(O,{key:0,job:l.object,openProgressModal:S(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):V("",!0)]))}}}),Is={class:"columns is-multiline"},As={class:"column is-12"},Ps={class:"column is-12"},Fs=d({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},parent:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(!1),s=Z(),i=Q(),d=()=>{l("update:modalHandler",!1)},r=p({id:"",type:a.type,object:a.object,parent:a.parent,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),m=async()=>{try{t.value=!0;const e=ee(r.value,[""]);e.append("value",r.value.title.replaceAll(" ","").toLocaleLowerCase());await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),d()}catch(e){console.log(e)}finally{t.value=!1}};return f((()=>{})),(e,l)=>{const s=c,i=u,p=o,v=n,f=P,h=te;return _(),U(h,{is:"form",open:a.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:E(m,["prevent"]),onClose:l[2]||(l[2]=e=>d())},{content:k((()=>[g("div",Is,[g("div",As,[b(p,{label:"Title *"},{default:k((()=>[b(i,null,{default:k((()=>[b(s,{modelValue:S(r).title,"onUpdate:modelValue":l[0]||(l[0]=e=>S(r).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ps,[b(p,{label:"Description (Optional)"},{default:k((()=>[b(i,null,{default:k((()=>[b(v,{modelValue:S(r).description,"onUpdate:modelValue":l[1]||(l[1]=e=>S(r).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:k((()=>[b(f,{loading:S(t),type:"submit",color:"warning",raised:""},{default:k((()=>[w("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Ds={class:"modal-form columns is-multiline"},Ms={class:"field column is-half"},Os={class:"file"},qs={class:"file-label"},Es={class:"file-cta"},$s=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Ls={class:"file-label"},Rs={class:"column is-full"},Ns=g("p",null,"Selected Photos",-1),Hs=g("br",null,null,-1),Bs=d({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(null),s=Z(),i=Q(),n=p(!1),c=r(),d=()=>{l("close:ModalHandler",!1)},m=p({type:a.type,object:a.object,title:"",uploaded_by:c.user.id,file:null}),v=async()=>{try{n.value=!0;const e=ee(m.value,["file"]),t=await s.post("/api/attachment/",e);h(t.data.task_id),le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${m.value.title}</b>.`,performedOnName:"job"}),i.success("File uploaded successfully!"),l("update:OnSuccess",null),d()}catch(e){console.log(e)}finally{n.value=!1}},h=async e=>{try{const l=await s.get(`api/upload-status/${e}/`);i.green(`res: ${l.data}`)}catch(l){console.log(l)}},x=p(""),C=p([]),V=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);m.value.file=e,C.value=e.map((e=>e.name)),x.value=e.length>1?`${e.length} photos selected`:e[0].name,fromCamera.value&&(m.value.title=e[0].name,await v())}t.value&&(t.value.value="")};return f((()=>{})),(e,l)=>{const t=u,s=o,i=P,c=te;return _(),U(c,{is:"form",open:a.openFileModal,title:"Add Attachment",size:"medium",actions:"right",onSubmit:E(v,["prevent"]),onClose:d},{content:k((()=>[g("div",Ds,[g("div",Ms,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Os,[g("label",qs,[g("input",{onChange:V,class:"file-input",type:"file",name:"resume",multiple:""},null,32),g("span",Es,[$s,g("span",Ls,j(S(x)?S(x):"Choose a file…"),1)])])])])),_:1})])),_:1})]),g("div",Rs,[Ns,(_(!0),y(I,null,A(S(C),(e=>(_(),y("span",null,[w(j(e)+" ",1),Hs])))),256))])])])),action:k((()=>[b(i,{type:"submit",color:"primary",loading:S(n),raised:""},{default:k((()=>[w(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(i,{color:"light",onClick:d,raised:""},{default:k((()=>[w("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),zs={key:0,class:"modal-form"},Js=["src"],Ks=["src"],Gs=["src"],Ws=["src"],Zs={key:1,class:"modal-form"},Qs=g("h1",{class:"title is-5"},"No media file attached",-1),Ys=[Qs],Xs=d({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Ae,n=P,o=te;return _(),U(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(_(),y("div",zs,[a.document?.includes(".pdf")?(_(),y("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Js)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(_(),y("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ks)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(_(),y("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Gs)):V("",!0),a.document?.includes(".mp4")?(_(),U(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(_(),y("img",{key:4,src:a.document,alt:""},null,8,Ws))])):(_(),y("div",Zs,Ys))])),cancel:k((()=>[b(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","title"])}}}),ei={class:"tile-grid-item"},li={class:"tile-grid-item-inner"},ai=["src"],ti={class:"meta"},si={class:"dark-inverted"},ii=g("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),ni=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),oi=g("div",{class:"meta"},[g("span",null,"Download"),g("span",null,"Download this file")],-1),ci=[ni,oi],ui=g("hr",{class:"dropdown-divider"},null,-1),di=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),ri=g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete this file")],-1),pi=[di,ri],mi=d({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",webp:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=p("");return(e,c)=>{const u=Ie;return _(),y("div",null,[g("div",ei,[g("div",li,[g("img",{onClick:c[0]||(c[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,ai),g("div",ti,[g("span",si,j(a.document.title??"N/A"),1),g("span",null,[g("span",null,j(a.document?.file_info?.size??0)+" MB",1),ii,g("span",null,"At:"+j(S(ae)(a.document.created_at)),1)])]),b(u,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[g("a",{role:"menuitem",onClick:c[1]||(c[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},ci),ui,g("a",{role:"menuitem",onClick:c[2]||(c[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},pi)])),_:1})])]),S(s)?(_(),U(Xs,{key:0,openDocViewModal:S(s),document:S(t),DocumentType:S(o),title:S(i),"onUpdate:closeModalHandler":c[3]||(c[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0)])}}}),vi={key:1},fi={key:0},hi={class:"tabs-wrapper"},_i={class:"tabs-inner"},yi={class:"tabs"},gi=[g("span",null,"Recent",-1)],bi=["onKeydown","onClick"],ki={key:0},wi={key:0},ji={class:"tile-grid-toolbar"},xi={class:"buttons"},Ci=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Vi=g("span",null,"File",-1),Ti=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Si=g("span",null,"Folder",-1),Ui=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Ii=g("span",null,"Folder",-1),Ai={key:1},Pi={class:"tile-grid-toolbar"},Fi={class:"buttons"},Di=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Mi=g("span",null,"File",-1),Oi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),qi=g("span",null,"Folder",-1),Ei=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),$i=g("span",null,"Folder",-1),Li={class:"tile-grid tile-grid-v2"},Ri=g("img",{class:"light-image",src:G,alt:""},null,-1),Ni=g("img",{class:"dark-image",src:W,alt:""},null,-1),Hi=d({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=Q(),i=Z(),n=p(!1),c=p([]),d=p(""),r=p(0),m=p(!1),h=p(""),w=p(""),F=p(""),D=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),M=["All Files","Recently Updated","My Files","Team Files","Deprecated"],O=()=>{d.value=a.docType,n.value=!n.value};p("");const L=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),R=()=>{L.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},B=async()=>{try{const e=await i.delete(`/api/media-folder/${a.folderId}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),L.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},z=async()=>{try{m.value=!0;const e=await i.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);D.value=e.data}catch(e){console.log(e)}finally{m.value=!1}},J=async()=>{try{const e=await i.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);c.value=e.data,F.value="recent"}catch(e){console.log(e)}},K=async e=>{try{const l=await i.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),t.purple("File Deleted Successfully"),z()}catch(l){console.log(l)}},G=p(!1),W=(e="")=>{h.value=e,G.value=!G.value},Y=v((()=>w.value?D.value.filter((e=>e.title.match(new RegExp(w.value,"i"))||e.file_info?.name?.match(new RegExp(w.value,"i"))||e.created_at.match(new RegExp(w.value,"i")))):D.value));return f((()=>{z(),J()})),(e,l)=>{const t=ie,i=q("ObjectDocumentsTiles",!0),p=u,v=q("Multiselect"),f=o,h=P,D=mi,Z=s,Q=Ue,X=Bs,ee=Fs;return _(),y("div",null,[S(m)?(_(),U(t,{key:0,rows:4})):(_(),y("div",vi,[S(c).length?(_(),y("div",fi,[g("div",hi,[g("div",_i,[g("div",yi,[g("ul",null,[g("li",{class:$(["recent"===S(F)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N(E((e=>F.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>F.value="recent")},gi,32)],2),(_(!0),y(I,null,A(S(c),(e=>(_(),y("li",{class:$([S(F)===e.value&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:N(E((l=>F.value=e.value),["prevent"]),["space"]),onClick:l=>F.value=e.value},[g("span",null,j(e.title),1)],40,bi)],2)))),256))])])])]),(_(!0),y(I,null,A(S(c),(e=>(_(),y("div",{key:e.id},[S(F)==e.value?(_(),y("div",ki,[b(i,{onDeleteFolderUpdate:l[2]||(l[2]=e=>J()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):V("",!0)])))),128)),"recent"===S(F)?(_(),y("div",wi,[g("div",ji,[b(p,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>H(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(w)]])])),_:1}),g("div",xi,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:S(r),"onUpdate:modelValue":l[4]||(l[4]=e=>H(r)?r.value=e:null),options:M,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[5]||(l[5]=e=>O()),color:"primary",raised:""},{default:k((()=>[Ci,Vi])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[Ti,Si])),_:1}),b(h,{onClick:R,color:"danger",raised:""},{default:k((()=>[Ui,Ii])),_:1})])]),b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(S(Y),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(D,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])):V("",!0)])):(_(),y("div",Ai,[g("div",Pi,[b(p,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>H(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(w)]])])),_:1}),g("div",Fi,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:S(r),"onUpdate:modelValue":l[7]||(l[7]=e=>H(r)?r.value=e:null),options:M,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[8]||(l[8]=e=>O()),color:"primary",raised:""},{default:k((()=>[Di,Mi])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[Oi,qi])),_:1}),b(h,{onClick:R,color:"danger",raised:""},{default:k((()=>[Ei,$i])),_:1})])]),g("div",Li,[0!=S(Y).length||S(m)?V("",!0):(_(),U(Z,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Ri,Ni])),_:1})),g("div",null,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(S(Y),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(D,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])])])),S(L).isSweetAlertOpen?(_(),U(Q,{key:2,isSweetAlertOpen:S(L).isSweetAlertOpen,title:S(L).title,subtitle:S(L).subtitle,btntext:S(L).btntext,onConfirm:B,onCancel:()=>S(L).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):V("",!0),S(n)?(_(),U(X,{key:3,openFileModal:S(n),object:a.objectId,type:S(d),"onClose:ModalHandler":l[9]||(l[9]=e=>n.value=!1),"onUpdate:OnSuccess":z},null,8,["openFileModal","object","type"])):V("",!0),S(G)?(_(),U(ee,{key:4,"open-create-folder-modal":S(G),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[10]||(l[10]=e=>G.value=!1),"onUpdate:onSuccess":l[11]||(l[11]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)]))])}}}),Bi={class:"modal-form columns is-multiline"},zi={class:"column is-12 is-flex"},Ji={class:"file"},Ki=["onClick"],Gi={class:"file-cta"},Wi=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Zi={class:"file-label"},Qi=g("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Yi={class:"column is-full"},Xi=g("p",null,"Selected Photos",-1),en=g("br",null,null,-1),ln=d({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=Z(),s=Q(),i=p(!1),n=r(),c=p(""),d=p(null),m=p(!1),v=()=>l("close:ModalHandler",!1),f=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const e=ee(f.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),v()}catch(e){console.error(e)}finally{i.value=!1}},x=()=>{m.value=!0,d.value&&(d.value.accept="image/*",d.value.setAttribute("capture","environment"),d.value.removeAttribute("multiple"),d.value.click())},C=()=>{m.value=!1,d.value&&(d.value.accept="image/*",d.value.removeAttribute("capture"),d.value.setAttribute("multiple","true"),d.value.click())},V=p([]),T=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,V.value=e.map((e=>e.name)),c.value=e.length>1?`${e.length} photos selected`:e[0].name,m.value&&(f.value.title=e[0].name,await h())}d.value&&(d.value.value="")};return(e,l)=>{const t=u,s=o,n=Pe,r=P,p=te;return _(),U(p,{is:"form",open:a.openFileModal,title:"Add Photos",size:"medium",actions:"right",onSubmit:E(h,["prevent"]),onClose:v},{content:k((()=>[g("div",Bi,[g("input",{ref_key:"fileInput",ref:d,onChange:T,class:"file-input",type:"file",style:{display:"none"}},null,544),g("div",zi,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Ji,[g("label",{class:"file-label",onClick:E(C,["prevent"])},[g("span",Gi,[Wi,g("span",Zi,j(S(c)?S(c):"Choose photo(s)"),1)])],8,Ki)])])),_:1})])),_:1}),b(n,{class:"ml-2",onClick:x,size:"small",color:"info",bordered:""},{default:k((()=>[Qi])),_:1})]),g("div",Yi,[Xi,(_(!0),y(I,null,A(S(V),(e=>(_(),y("span",null,[w(j(e)+" ",1),en])))),256))])])])),action:k((()=>[b(r,{type:"submit",color:"primary",loading:S(i),raised:""},{default:k((()=>[w(" Save ")])),_:1},8,["loading"])])),cancel:k((()=>[b(r,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),an={class:"column is-2"},tn={class:"card-grid-item is-relative"},sn=["src","alt"],nn=["src","alt"],on={class:"card-grid-item-content is-flex is-align-items-center space-between"},cn=d({__name:"NewDocumentViewer",props:{file:{}},emits:["updateOnSuccess"],setup(e,{emit:l}){const a=e,s=Z(),i=Q(),n=p("");p([]);const o=p(""),c=p(!1),u=p(""),d=p(""),r=e=>{o.value=e.file_info?.url,d.value=e.file_info?.type,u.value=e.title,c.value=!c.value},m={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},v=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",icon:""}),h=async()=>{try{await s.delete(`/api/attachment/${n.value}/`),l("updateOnSuccess",null),v.value.isSweetAlertOpen=!1,i.success("File deleted successfully")}catch(e){console.error("Error deleting file:",e)}};return f((()=>{})),(e,l)=>{const s=t,i=Xs,p=Ue;return _(),y("div",an,[g("a",tn,["png"===a.file?.file_info?.type||"jpg"===a.file?.file_info?.type||"webp"===a.file?.file_info?.type||"jpeg"===a.file?.file_info?.type?(_(),y("img",{key:0,src:a.file?.file_info?.url,alt:a.file?.title,onClick:l[0]||(l[0]=e=>r(a.file))},null,8,sn)):(_(),y("img",{key:1,src:m[a.file?.file_info?.type],alt:a.file?.title,onClick:l[1]||(l[1]=e=>r(a.file))},null,8,nn)),g("div",on,[g("h3",{onClick:l[2]||(l[2]=e=>r(a.file)),class:"dark-inverted"},j(a.file?.title),1),g("span",null,[g("span",null,j(a.file?.file_info?.size?a.file?.file_info?.size:0)+" MB",1)]),b(s,{style:{position:"absolute",top:"1%",right:"1%"},onClick:l[3]||(l[3]=e=>{return l=a.file?.id,n.value=l,void(v.value={title:" Delete this file?",subtitle:"This file will be deleted permanently.",isSweetAlertOpen:!0,btntext:"Delete",icon:"fas fa-bell"});var l}),icon:"fas fa-trash",color:"danger"})])]),S(c)?(_(),U(i,{key:0,openDocViewModal:S(c),document:S(o),DocumentType:S(d),title:S(u),"onUpdate:closeModalHandler":l[4]||(l[4]=e=>c.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0),S(v).isSweetAlertOpen?(_(),U(p,{key:1,title:S(v).title,subtitle:S(v).subtitle,btntext:S(v).btntext,icon:S(v).icon,onCancel:()=>{S(v).isSweetAlertOpen=!1},onConfirm:h},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0)])}}}),un={class:"card-grid-toolbar"},dn={class:"buttons"},rn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),pn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),mn=g("span",null,"Folder",-1),vn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),fn=g("span",null,"Folder",-1),hn={key:0,class:"card-grid card-grid-v4"},_n={class:"columns is-multiline"},yn={class:"card-grid-item"},gn={class:"card-grid card-grid-v4"},bn=["onClick"],kn=g("img",{src:"/icons/folders.png",alt:"item.title"},null,-1),wn={class:"card-grid-item-content"},jn={class:"dark-inverted"},xn={key:1,class:"card-grid card-grid-v4"},Cn=g("div",{class:"column is-2"},[g("div",{class:"card-grid-item"},[g("img",{class:"light-image",src:G,alt:""}),g("img",{class:"dark-image",src:W,alt:""}),g("div",{class:"card-grid-item-content"},[g("h3",{class:"dark-inverted"},"No Item Found")])])],-1),Vn=d({__name:"NewJobFolders",props:{objectId:String,type:{type:String,required:!0}},setup(e){const l=e,a=Q(),t=Z(),s=p(""),i=p(!1),n=p(!1),o=p([]),c=p([]),u=p([]),d=p(!1),r=p(""),m=v((()=>o.value[o.value.length-1]||null)),h=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",Icon:""}),x=async()=>{d.value=!0;try{const e=await t.get(`/api/media-folder/?object=${l.objectId}&type=${l.type}`);c.value=e.data.filter((e=>null===e.parent)),u.value=[]}catch(e){console.error("Error fetching top folders:",e)}finally{d.value=!1}},C=async e=>{d.value=!0;try{const a=await t.get(`/api/media-folder/${e}/sub-folders/`);c.value=a.data;const s=await t.get(`/api/attachment/by-object/${e}/?type=${l.type}`);u.value=s.data}catch(a){console.error("Error fetching folder contents:",a)}finally{d.value=!1}},S=async()=>{o.value.pop();const e=m.value;e?await C(e.id):await x()},F=p(!1),D=p(""),M=p(""),O=async()=>{m.value?D.value=m.value?m.value.id:"":M.value=l.objectId,F.value=!0},q=async()=>{D.value?await C(D.value):await x()},E=async()=>{s.value=m.value?m.value.id:l.objectId,"photos"===l.type?n.value=!0:i.value=!0},$=async()=>{try{h.value.isSweetAlertOpen=!1,await t.delete(`/api/media-folder/${r.value}/`),S(),m.value?await C(m.value.id):await x(),a.success("Folder deleted successfully")}catch(e){console.error("Error deleting folder:",e)}},L=async()=>{m.value&&await C(m.value.id)};return f((()=>{x()})),(e,a)=>{const t=P,p=B,v=cn,f=Bs,x=ln,R=Ue,N=Fs;return _(),y("div",null,[g("div",un,[o.value.length?(_(),U(t,{key:0,color:"warning",light:"",class:"mr-1",size:"medium",outlined:"",onClick:S,icon:"fas fa-chevron-left"})):V("",!0),g("div",null,[m.value?(_(),U(t,{key:1,color:"warning",light:"",bold:"",fullwidth:"",icon:"fas fa-folder-open"},{default:k((()=>[w(j(m.value.title),1)])),_:1})):(_(),U(t,{key:0,icon:"fas fa-folder",color:"warning",light:"",bold:"",fullwidth:""},{default:k((()=>[w("Main Folders")])),_:1}))]),g("div",dn,[m.value?(_(),U(t,{key:0,onClick:E,color:"primary",light:"",outlined:"",raised:""},{default:k((()=>[rn,g("span",null,j("photos"==l.type?"Photos":"File"),1)])),_:1})):V("",!0),b(t,{onClick:O,color:"info",outlined:"",raised:""},{default:k((()=>[pn,mn])),_:1}),m.value?(_(),U(t,{key:1,onClick:a[0]||(a[0]=e=>((e="")=>{r.value=e.id,h.value={title:`Delete ${e.title} folder?`,subtitle:"Once deleted, you will not be able to recover this folder and the content in it.",isSweetAlertOpen:!0,btntext:"Delete",Icon:"fas fa-bell"}})(m.value)),color:"danger",raised:"",outlined:""},{default:k((()=>[vn,fn])),_:1})):V("",!0)])]),g("div",null,[d.value?(_(),y("div",hn,[g("div",_n,[(_(),y(I,null,A(18,(e=>g("div",{key:e,class:"column is-2"},[g("div",yn,[b(p,{height:"160px"})])]))),64))])])):V("",!0),g("div",gn,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[c.value.length?(_(!0),y(I,{key:0},A(c.value,(e=>(_(),y("div",{key:e.id,class:"column is-2"},[g("a",{onClick:l=>(async e=>{o.value.push(e),await C(e.id)})(e),class:"card-grid-item"},[kn,g("div",wn,[g("h3",jn,j(e.title),1)])],8,bn)])))),128)):V("",!0),u.value.length?(_(!0),y(I,{key:1},A(u.value,(e=>(_(),U(v,{key:e.id,file:e,onUpdateOnSuccess:L},null,8,["file"])))),128)):V("",!0)])),_:1})]),c.value.length||u.value.length||d.value?V("",!0):(_(),y("div",xn,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[Cn])),_:1})])),i.value?(_(),U(f,{key:2,openFileModal:i.value,object:s.value,type:l.type,"onClose:ModalHandler":a[1]||(a[1]=e=>i.value=!1),"onUpdate:OnSuccess":a[2]||(a[2]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),n.value?(_(),U(x,{key:3,openFileModal:n.value,object:s.value,type:l.type,"onClose:ModalHandler":a[3]||(a[3]=e=>n.value=!1),"onUpdate:OnSuccess":a[4]||(a[4]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),h.value.isSweetAlertOpen?(_(),U(R,{key:4,title:h.value.title,subtitle:h.value.subtitle,btntext:h.value.btntext,icon:h.value.Icon,onCancel:()=>{h.value.isSweetAlertOpen=!1},onConfirm:$},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0),F.value?(_(),U(N,{key:5,"open-create-folder-modal":F.value,type:l.type,object:M.value,parent:D.value,"onUpdate:modalHandler":a[5]||(a[5]=e=>F.value=!1),"onUpdate:OnSuccess":q},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)])])}}}),Tn={class:"tabs-wrapper"},Sn={class:"tabs-inner"},Un={class:"tabs is-boxed"},In=[g("span",null,"Documents",-1)],An=[g("span",null,"Photos",-1)],Pn=[g("span",null,"Videos",-1)],Fn=g("li",{class:"tab-naver"},null,-1),Dn={key:0},Mn={class:"tile-grid tile-grid-v2"},On=g("img",{class:"light-image",src:G,alt:""},null,-1),qn=g("img",{class:"dark-image",src:W,alt:""},null,-1),En={key:1},$n={key:2},Ln=d({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo","updateOnSuccess"],setup(e,{emit:l}){const a=e;Q();const t=Z(),i=p("");p(0);const n=p(""),o=p("contracts"),c=p(!1),u=p([]),d=p("documents");p("site_visits"),p("job_videos");const r=v((()=>i.value?Fe.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Fe)),m=async(e="contracts")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},h=p(""),w=p(!1),j=p([]),x=p([]),C=p([]),T=async(e="")=>{try{const l=await t.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?j.value=l.data:"photos"===e?x.value=l.data:"videos"===e&&(C.value=l.data)}catch(l){console.log(l)}},I=(e="documents")=>{"documents"===e?T("documents"):"photos"===e?T("photos"):"videos"===e&&T("videos")};return f((()=>{m(),I("documents")})),(e,l)=>{const t=Vn,i=s,o=Bs,u=Fs;return _(),y("div",null,[g("div",Tn,[g("div",Sn,[g("div",Un,[g("ul",null,[g("li",{class:$(["documents"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N(E((e=>d.value="documents"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>{d.value="documents",I("documents")})},In,32)],2),g("li",{class:$(["photos"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=N(E((e=>d.value="photos"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>{d.value="photos",I("photos")})},An,32)],2),g("li",{class:$(["videos"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=N(E((e=>d.value="videos"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>{d.value="videos",I("videos")})},Pn,32)],2),Fn])])])]),"documents"==S(d)?(_(),y("div",Dn,[b(t,{type:"documents",objectId:a.leadId},null,8,["objectId"]),g("div",Mn,[b(i,{class:$([0!==S(r).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[On,qn])),_:1},8,["class"])])])):V("",!0),"photos"==S(d)?(_(),y("div",En,[b(t,{type:"photos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),"videos"==S(d)?(_(),y("div",$n,[b(t,{type:"videos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),S(c)?(_(),U(o,{key:3,openFileModal:S(c),object:a.leadId,type:S(n),"onClose:ModalHandler":l[6]||(l[6]=e=>c.value=!1),"onUpdate:OnSuccess":m},null,8,["openFileModal","object","type"])):V("",!0),S(w)?(_(),U(u,{key:4,"open-create-folder-modal":S(w),type:S(h),object:a.leadId,"onUpdate:modalHandler":l[7]||(l[7]=e=>w.value=!1),"onUpdate:onSuccess":l[8]||(l[8]=e=>I(S(h)))},null,8,["open-create-folder-modal","type","object"])):V("",!0)])}}}),Rn={class:"stat-widget flex-stat-widget is-straight"},Nn={class:"chart-media"},Hn={class:"meta"},Bn={class:"dark-inverted"},zn={class:"is-dark-primary"},Jn={class:"chart-container"},Kn=d({__name:"ProgressWidget",props:{title:{default:"Widget Title"},value:{default:"8,641.26"},text:{default:""}},setup(e){const l=e;return(e,a)=>(_(),y("div",Rn,[g("div",Nn,[g("div",Hn,[g("h4",Bn,j(l.title),1),g("span",zn,j(l.value),1),g("p",null,j(l.text),1)]),g("div",Jn,[z(e.$slots,"default")])])]))}}),Gn=d({__name:"TasksProgressGageChart",props:{percentCount:{type:Number,required:!0,default:0}},setup(e){const l=e,a=qe(),t=J({series:[l.percentCount],chart:{height:190,type:"radialBar",offsetX:-15,offsetY:-10,toolbar:{show:!1}},colors:[a.info,a.secondary],plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"13px",fontWeight:"600",color:a.lightText,show:!1},value:{offsetY:5,fontSize:"16px",fontFamily:"Roboto, sans-serif",fontWeight:"500",color:void 0,formatter:function(e){return e+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:4},labels:["(30 days)"]});return(e,l)=>(_(),U(S(_e),{id:"flex-stat-radial",height:S(t).chart.height,type:S(t).chart.type,series:S(t).series,options:S(t)},null,8,["height","type","series","options"]))}}),Wn=d({__name:"CircularChart",props:{percentCount:{type:Number,required:!0,default:0},id:{type:String,required:!0,default:""},color:{type:String,required:!0,default:""}},setup(e){const l=e;qe();const a=J({series:[l.percentCount],chart:{height:102,type:"radialBar",offsetY:-10,toolbar:{show:!1}},colors:[l.color],plotOptions:{radialBar:{hollow:{size:"35%"},dataLabels:{show:!1}}},labels:[""]});return(e,t)=>(_(),U(S(_e),{id:l.id,height:S(a).chart.height,type:S(a).chart.type,series:S(a).series,options:S(a)},null,8,["id","height","type","series","options"]))}}),Zn={key:0,class:"columns is-multiline"},Qn={class:"column is-6"},Yn={class:"column is-6"},Xn=d({__name:"ProjectTasksStats",props:{project:{type:String,required:!0}},setup(e){const l=e,a=qe(),t=Z(),s=p(!1),i=p({stats:{active:0,pending:0,completed:0,cancelled:0},tasks_progress:0,pending_tasks:0,total_tasks:0,status_percentage:{active:0,pending:0,completed:0,cancelled:0}});return f((()=>{(async()=>{try{s.value=!0;const e=await t.get(`/api/task/project-wise-stats/${l.project}/`);i.value=e.data}catch(e){console.log(e)}finally{s.value=!1}})()})),(e,l)=>{const t=Kn,n=de;return S(s)?V("",!0):(_(),y("div",Zn,[g("div",Qn,[b(t,{title:"Job Progress",value:`${S(i).total_tasks} Total Tasks`,text:"This is the total progress on job base on tasks that have been completed.",straight:""},{default:k((()=>[b(Gn,{percentCount:S(i).tasks_progress},null,8,["percentCount"])])),_:1},8,["value"])]),g("div",Yn,[b(n,{title:"Tasks Stats",values:[S(i).stats.active,S(i).stats.pending,S(i).stats.cancelled],labels:["Active Tasks","Pending Tasks","Cancelled Tasks"]},{chart1:k((()=>[S(i).status_percentage?(_(),U(Wn,{key:0,id:"group-radial-1",color:S(a).info,percentCount:S(i).status_percentage.active},null,8,["color","percentCount"])):V("",!0)])),chart2:k((()=>[S(i).status_percentage?(_(),U(Wn,{key:0,color:S(a).warning,id:"group-radial-2",percentCount:S(i).status_percentage.pending},null,8,["color","percentCount"])):V("",!0)])),chart3:k((()=>[S(i).status_percentage?(_(),U(Wn,{key:0,color:S(a).danger,id:"group-radial-3",percentCount:S(i).status_percentage.cancelled},null,8,["color","percentCount"])):V("",!0)])),_:1},8,["values"])])]))}}}),eo={class:"business-dashboard hr-dashboard"},lo={class:"columns is-multiline"},ao={class:"column is-12"},to={class:"columns is-multiline"},so={class:"column is-12"},io={class:"block-header"},no={class:"left"},oo={class:"current-user"},co={class:"center"},uo=g("h4",{class:"block-heading"},"Current State",-1),ro=g("h4",{class:"block-heading"},"Address",-1),po={class:"block-text"},mo=g("br",null,null,-1),vo=g("br",null,null,-1),fo={class:"right"},ho=g("h4",{class:"block-heading"},"Managers",-1),_o={class:"candidates"},yo=g("button",null,[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),go={class:"column is-12"},bo={class:"tabs-wrapper"},ko={class:"tabs-inner"},wo={class:"tabs is-toggle"},jo=[g("span",null,"Job Management",-1)],xo=[g("span",null,"Documents/Files",-1)],Co=[g("span",null,"Old Estimates",-1)],Vo=[g("span",null,"Proposals",-1)],To=[g("span",null,"Tasks",-1)],So=[g("span",null,"Activities",-1)],Uo=[g("span",null,"Job progress",-1)],Io=[g("span",null,"Calculations",-1)],Ao=[g("span",null,"Finance",-1)],Po=[g("span",null,"Report",-1)],Fo=g("li",{class:"tab-naver"},null,-1),Do={key:0,class:"column is-12"},Mo={class:"columns is-multiline"},Oo={class:"column is-8"},qo={class:"columns is-multiline"},Eo={class:"column is-12"},$o={class:"feed-settings"},Lo=g("h3",{class:"dark-inverted"},null,-1),Ro={class:"buttons"},No={class:"column is-12"},Ho={class:"side-text mt-0"},Bo=g("h3",{class:"dark-inverted"},"Job Description",-1),zo=["innerHTML"],Jo={class:"column is-12"},Ko={class:"column is-12"},Go={class:"recent-rookies"},Wo=g("div",{class:"recent-rookies-header"},[g("h3",{class:"dark-inverted"},"Internal Users")],-1),Zo={class:"columns is-multiline user-grid user-grid-v4"},Qo={class:"column is-4"},Yo={class:"grid-item"},Xo={class:"dark-inverted"},ec={class:"capitalized"},lc={class:"button-wrap has-text-centered"},ac={class:"column is-4"},tc={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},sc={key:1,class:"column is-12"},ic={key:2,class:"column is-12"},nc={key:3,class:"column is-12"},oc={class:"tabs-inner"},cc={class:"tabs is-boxed"},uc=[g("span",null,"Proposals",-1)],dc=[g("span",null,"Grouped Proposals",-1)],rc={key:0},pc={key:1},mc={key:4,class:"column is-12"},vc={key:5,class:"column is-12"},fc={key:6,class:"column is-12"},hc={key:7,class:"column is-12"},_c={key:8,class:"column is-12"},yc={key:9,class:"column is-12"},gc={key:10,class:"column is-12"},bc={class:"tabs-inner"},kc={class:"tabs is-boxed"},wc=[g("span",null,"Excel Sheets",-1)],jc=[g("span",null,"Custom Calculations",-1)],xc={key:0},Cc={key:1},Vc=d({__name:"JobDetails",setup(l){pe();const a=K(),t=R(),s=r(),i=Z(),n=Q(),o=p(!1),c=p(""),u=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const d=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),m=p("excel"),v=p("management"),C=p("childProposals");let T;const D=async()=>{try{o.value=!0;const e=await i.get(`/api/project/${a.params.id}/detail/`);d.value=e.data,e.data.latitude&&((e,l)=>{if(T&&T.remove(),T=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(T),e&&l){const a=[e,l];L.marker(a).addTo(T),T.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{o.value=!1}},M=p([]),O=p(!1),q=async()=>{try{O.value=!0;await i.patch(`/api/project/${a.params.id}/`,{status:"completed"});n.success("Jobs Completed Successfully."),D()}catch(Error){console.log(Error)}finally{O.value=!1}};return f((()=>{D(),a.query.jobTab&&(v.value=a.query.jobTab)})),(l,n)=>{const o=be,r=Ee,p=P,f=F,T=Xn,O=Oe,L=Me,R=De,H=ne,B=Ln,z=Hi,J=Se,K=Us,G=ts,W=pa,Z=Ql,Q=oe,Y=$l,X=_l,ee=e,le=h("tooltip");return _(),y("div",eo,[g("div",lo,[g("div",ao,[g("div",to,[g("div",so,[g("div",io,[g("div",no,[g("div",oo,[b(o,{size:"large",picture:S(d).image,squared:""},null,8,["picture"]),g("h3",null,[w(j(S(d).title?S(d).title:"No Title")+" ",1),g("sup",null,[b(r,{rounded:"",size:"tiny",color:"info"},{default:k((()=>[w(j(S(d).status),1)])),_:1})])])])]),g("div",co,[uo,g("p",null,[b(r,{rounded:"",color:"warning"},{default:k((()=>[w(j("lead"==S(d).current_state?"Is Lead":"Is Job"),1)])),_:1})]),ro,g("p",po,[w(j(S(d).address?S(d).address:"No Address Added")+" ",1),mo,w(" "+j(S(d).city?S(d).city:"No City Added")+", "+j(S(d).state?S(d).state:"No State Added")+" ",1),vo,w(" "+j(S(d).zip_code?S(d).zip_code:"No Zip Code Added"),1)])]),g("div",fo,[ho,g("div",_o,[(_(!0),y(I,null,A(S(d).managers_list,(e=>x((_(),U(o,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[le,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),yo]),b(f,null,{default:k((()=>[b(p,{class:"mt-1",onClick:n[0]||(n[0]=e=>{return l=S(a).params.id,c.value=l,void(u.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:k((()=>[w(" Update "+j("lead"==S(d).current_state?"Lead":"Job"),1)])),_:1}),"lead"!=S(d).current_state?(_(),U(p,{key:0,class:"mt-1",onClick:q,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:k((()=>[w(" Mark As Done ")])),_:1})):V("",!0)])),_:1})])])]),g("div",go,[g("div",bo,[g("div",ko,[g("div",wo,[g("ul",null,[S(s).checkUserPermission("jdp_job_management")?(_(),y("li",{key:0,class:$(["management"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=N(E((()=>{v.value="management",S(t).push({query:{...S(a).query,jobTab:"management"}})}),["prevent"]),["space"])),onClick:n[2]||(n[2]=()=>{v.value="management",S(t).push({query:{...S(a).query,jobTab:"management"}})})},jo,32)],2)):V("",!0),S(s).checkUserPermission("jdp_documents_and_files")?(_(),y("li",{key:1,class:$(["documents"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=N(E((()=>{v.value="documents",S(t).push({query:{...S(a).query,jobTab:"documents"}})}),["prevent"]),["space"])),onClick:n[4]||(n[4]=()=>{v.value="documents",S(t).push({query:{...S(a).query,jobTab:"documents"}})})},xo,32)],2)):V("",!0),S(s).checkUserPermission("jdp_old_files")?(_(),y("li",{key:2,class:$(["files"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=N(E((()=>{v.value="files",S(t).push({query:{...S(a).query,jobTab:"files"}})}),["prevent"]),["space"])),onClick:n[6]||(n[6]=()=>{v.value="files",S(t).push({query:{...S(a).query,jobTab:"files"}})})},Co,32)],2)):V("",!0),S(s).checkUserPermission("jdp_proposals")?(_(),y("li",{key:3,class:$(["proposals"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=N(E((()=>{v.value="proposals",S(t).push({query:{...S(a).query,jobTab:"proposals"}})}),["prevent"]),["space"])),onClick:n[8]||(n[8]=()=>{v.value="proposals",S(t).push({query:{...S(a).query,jobTab:"proposals"}})})},Vo,32)],2)):V("",!0),S(s).checkUserPermission("jdp_tasks")?(_(),y("li",{key:4,class:$(["tasks"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[9]||(n[9]=N(E((()=>{v.value="tasks",S(t).push({query:{...S(a).query,jobTab:"tasks"}})}),["prevent"]),["space"])),onClick:n[10]||(n[10]=()=>{v.value="tasks",S(t).push({query:{...S(a).query,jobTab:"tasks"}})})},To,32)],2)):V("",!0),S(s).checkUserPermission("jdp_activities")?(_(),y("li",{key:5,class:$(["activities"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[11]||(n[11]=N(E((()=>{v.value="activities",S(t).push({query:{...S(a).query,jobTab:"activities"}})}),["prevent"]),["space"])),onClick:n[12]||(n[12]=()=>{v.value="activities",S(t).push({query:{...S(a).query,jobTab:"activities"}})})},So,32)],2)):V("",!0),S(s).checkUserPermission("jdp_job_progress")?(_(),y("li",{key:6,class:$(["progress"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[13]||(n[13]=N(E((()=>{v.value="progress",S(t).push({query:{...S(a).query,jobTab:"progress"}})}),["prevent"]),["space"])),onClick:n[14]||(n[14]=()=>{v.value="progress",S(t).push({query:{...S(a).query,jobTab:"progress"}})})},Uo,32)],2)):V("",!0),S(s).checkUserPermission("jdp_calculations")?(_(),y("li",{key:7,class:$(["calculations"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[15]||(n[15]=N(E((()=>{v.value="calculations",S(t).push({query:{...S(a).query,jobTab:"calculations"}})}),["prevent"]),["space"])),onClick:n[16]||(n[16]=()=>{v.value="calculations",S(t).push({query:{...S(a).query,jobTab:"calculations"}})})},Io,32)],2)):V("",!0),S(s).checkUserPermission("jdp_finance")?(_(),y("li",{key:8,class:$(["finance"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[17]||(n[17]=N(E((()=>{v.value="finance",S(t).push({query:{...S(a).query,jobTab:"finance"}})}),["prevent"]),["space"])),onClick:n[18]||(n[18]=()=>{v.value="finance",S(t).push({query:{...S(a).query,jobTab:"finance"}})})},Ao,32)],2)):V("",!0),S(s).checkUserPermission("jdp_report")?(_(),y("li",{key:9,class:$(["report"===S(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[19]||(n[19]=N(E((()=>{v.value="report",S(t).push({query:{...S(a).query,jobTab:"report"}})}),["prevent"]),["space"])),onClick:n[20]||(n[20]=()=>{v.value="report",S(t).push({query:{...S(a).query,jobTab:"report"}})})},Po,32)],2)):V("",!0),Fo])])])])]),"management"===S(v)?(_(),y("div",Do,[g("div",Mo,[g("div",Oo,[g("div",qo,[g("div",Eo,[g("div",$o,[Lo,g("div",Ro,[(_(!0),y(I,null,A(S(d).tags,((e,l)=>(_(),y("button",{key:l,class:"button is-selected is-light is-dark-outlined"},j(e),1)))),128))])])]),g("div",No,[g("div",Ho,[Bo,g("div",{innerHTML:S(d).notes},null,8,zo)])]),g("div",Jo,[b(T,{project:S(a).params.id},null,8,["project"])]),g("div",Ko,[g("div",Go,[Wo,g("div",Zo,[(_(!0),y(I,null,A(S(d).sales_people_info,(e=>(_(),y("div",Qo,[g("div",Yo,[b(O),b(o,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),g("h3",Xo,j(e.username??"N/A")+" "+j(e.last_name??""),1),g("p",ec,j(e.role),1),g("div",lc,[b(p,{color:"primary",raised:""},{default:k((()=>[w(" View Profile ")])),_:1})])])])))),256))])])])])]),g("div",ac,["management"===S(v)?(_(),y("div",tc)):V("",!0),b(L,{project:S(a).params.id},null,8,["project"]),b(R,{projectId:S(a).params.id},null,8,["projectId"])])])])):V("",!0),"files"==S(v)?(_(),y("div",sc,[b(H,{projectId:S(a).params.id,files:S(d).uploaded_files,"onUpdate:onUploadFile":D},null,8,["projectId","files"])])):V("",!0),"documents"===S(v)?(_(),y("div",ic,[b(B,{leadId:S(a).params.id,uploaded_files:S(d).uploaded_files,getProjectInfo:D},null,8,["leadId","uploaded_files"])])):V("",!0),"proposals"===S(v)?(_(),y("div",nc,[g("div",oc,[g("div",cc,[g("ul",null,[g("li",{class:$(["childProposals"===S(C)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[21]||(n[21]=N(E((e=>C.value="childProposals"),["prevent"]),["space"])),onClick:n[22]||(n[22]=e=>C.value="childProposals")},uc,32)],2),g("li",{class:$(["groupedProposals"===S(C)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[23]||(n[23]=N(E((e=>C.value="groupedProposals"),["prevent"]),["space"])),onClick:n[24]||(n[24]=e=>{C.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await i.get(`/api/attachment/by-object/${a.params.id}/?type=${e}`);M.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},dc,32)],2)])])]),"childProposals"==S(C)?(_(),y("div",rc,[b($e,{"lead-id":S(a).params.id,onUpdateCompany:D},null,8,["lead-id"])])):V("",!0),"groupedProposals"==S(C)?(_(),y("div",pc,[b(z,{"doc-type":"proposal_formats","object-id":S(a).params.id},null,8,["object-id"])])):V("",!0)])):V("",!0),"activities"===S(v)?(_(),y("div",mc,[b(J,{jobId:S(a).params.id},null,8,["jobId"])])):V("",!0),"progress"===S(v)?(_(),y("div",vc,[b(K,{object:S(a).params.id,type:"job"},null,8,["object"])])):V("",!0),"finance"===S(v)?(_(),y("div",fc,[b(G)])):V("",!0),"activityLogs"===S(v)?(_(),y("div",hc,[b(W,{object_id:S(a).params.id||S(d).id,object_type:"lead"},null,8,["object_id"])])):V("",!0),"report"===S(v)?(_(),y("div",_c,[b(Z)])):V("",!0),"tasks"===S(v)?(_(),y("div",yc,[b(Q,{projectID:S(a).params.id},null,8,["projectID"])])):V("",!0),"calculations"===S(v)?(_(),y("div",gc,[g("div",bc,[g("div",kc,[g("ul",null,[g("li",{class:$(["excel"===S(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[25]||(n[25]=N(E((e=>m.value="excel"),["prevent"]),["space"])),onClick:n[26]||(n[26]=e=>m.value="excel")},wc,32)],2),g("li",{class:$(["custom"===S(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[27]||(n[27]=N(E((e=>m.value="custom"),["prevent"]),["space"])),onClick:n[28]||(n[28]=e=>m.value="custom")},jc,32)],2)])])]),"excel"==S(m)?(_(),y("div",xc,[b(Y,{objectId:S(a).params.id},null,8,["objectId"])])):V("",!0),"custom"==S(m)?(_(),y("div",Cc,[b(X,{objectId:S(a).params.id},null,8,["objectId"])])):V("",!0)])):V("",!0)])])]),S(u)?(_(),U(ee,{key:0,addUpdateLeadModal:S(u),leadId:S(c),"onUpdate:modalHandler":n[29]||(n[29]=e=>u.value=!1),"onUpdate:OnSuccess":D},null,8,["addUpdateLeadModal","leadId"])):V("",!0)])}}});export{Vc as _};
