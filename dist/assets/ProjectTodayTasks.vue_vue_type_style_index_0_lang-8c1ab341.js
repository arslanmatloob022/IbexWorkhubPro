import{_ as a}from"./VBlock.vue_vue_type_style_index_0_lang-8508a058.js";import{_ as s}from"./VAvatarStack.vue_vue_type_script_setup_true_lang-790e09e1.js";import{_ as e}from"./VIconWrap.vue_vue_type_style_index_0_lang-ef9efbe6.js";import{u as r}from"./useNotyf-18e668a8.js";import{u as t}from"./useAPI-f85d8e56.js";import{e as o,N as i,t as l,r as n,o as c,y as d,z as p,C as u,Q as k,R as _,l as m,H as v,B as y,A as g,P as f,J as w}from"./index-54a9a01d.js";const h={class:"list-widget is-straight"},j={class:"widget-head"},I=u("h3",{class:"dark-inverted"},"Tasks of Today",-1),T={class:"inner-list"},x={href:"#"},C=o({__name:"ProjectTodayTasks",props:{projectId:{default:""},straight:{type:Boolean},workerId:{}},setup(o){const C=o,A=t(),B=r();i(),l();const P=n([]),R=async a=>{try{const s=await A.get(`/api/task/today-tasks/?project=${C.projectId}`);P.value=s.data.map((a=>({...a,workers:a.workers.map((a=>({...a,picture:a?.avatar,initials:a?.username?.slice(0,2).toUpperCase()})))}))),a&&B.green("Tasks list Refreshed"),console.log("data",P.value)}catch(s){console.log(s)}};return c((()=>{C.workerId?(async a=>{try{const s=await A.get(`/api/task/worker-today/${C.workerId}`);P.value=s.data.map((a=>({...a,workers:a.workers.map((a=>({...a,picture:a?.avatar,initials:a?.username?.slice(0,2).toUpperCase()})))}))),a&&B.green("Tasks list Refreshed"),console.log("data",P.value)}catch(s){console.log(s)}})(!1):R(!1)})),(r,t)=>{const o=e,i=s,l=a;return d(),p("div",h,[u("div",j,[I,u("i",{onClick:t[0]||(t[0]=a=>R(!0)),style:{color:"var(--primary)"},class:"fas fa-redo cu-pointer","aria-hidden":"true"})]),u("div",T,[u("div",null,[(d(!0),p(k,null,_(m(P),(a=>(d(),v(l,{key:a.id,center:"",lighter:"",class:"inner-list-item"},{icon:y((()=>[g(o,{icon:"lucide:star","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:y((()=>[a.workers.length?(d(),v(i,{key:0,avatars:a.workers,size:"small",limit:3},null,8,["avatars"])):f("",!0)])),default:y((()=>[u("a",x,w(a.title),1),u("span",null,w(a.status),1)])),_:2},1024)))),128))])])])}}});export{C as _};
