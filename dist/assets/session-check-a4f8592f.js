import{d as e}from"./index-236e42c8.js";import{u as o}from"./userSession-19a11b55.js";import{u as r}from"./useAPI-bc0008ee.js";import{u as t}from"./layoutSwitcher-a703e85a.js";import{u as s}from"./company-883d4b6a.js";import"./useNotyf-d45cea71.js";import"./notyf-449e07c4.js";import"./useThemeColors-955ff7a5.js";import"./useSupportElement-44c75f51.js";const a=t(),i=e((async({router:e,pinia:t})=>{const i=o(t);if(r(),s(),i.isLoggedIn)try{a.setDynamicLayoutId("sideblock-default")}catch(l){i.logoutUser()}e.beforeEach((e=>e.meta.requiresAuth&&!i.isLoggedIn?{name:"/auth/login",query:{redirect:e.fullPath}}:("supplier"!==i.user.role||!1!==e.meta.isPartnerAllowed&&void 0!==e.meta.isPartnerAllowed)&&("manager"!==i.user.role||!1!==e.meta.isManagerAllowed&&void 0!==e.meta.isManagerAllowed)&&("contractor"!==i.user.role||!1!==e.meta.isContractorAllowed&&void 0!==e.meta.isContractorAllowed)&&("worker"!==i.user.role||!1!==e.meta.isWorkerAllowed&&void 0!==e.meta.isWorkerAllowed)&&("client"!==i.user.role||!1!==e.meta.isClientAllowed&&void 0!==e.meta.isClientAllowed)?void 0:{name:"/auth/login",query:{redirect:e.fullPath}}))}));export{i as default};
