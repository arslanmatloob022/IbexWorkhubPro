import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-f5b99d99.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-be4f1016.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-9f4d4498.js";import{_ as s}from"./VTag.vue_vue_type_style_index_0_lang-7e7b9918.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-e8ba677f.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-f86fb457.js";import{f as n,r as o,$ as c,o as d,av as r,C as u,D as p,m,O as v,E as h,F as k,G as g,L as _,X as f,k as y,K as w,I as b,H as j,U as C,V as x,W as S,N as D,P as T,al as A,J as I,a4 as O,Q as E,R as P,S as V}from"./index-a193ae10.js";import{_ as $}from"./VControl-06fd39be.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-1b4e0194.js";import{_ as N,a as U}from"./projects-dark-4a371d8a.js";import"./useSupportElement-d48da84e.js";import{u as L}from"./useNotyf-d6803850.js";import{u as K}from"./useAPI-8f659b88.js";const M=e=>(E("data-v-f44e0448"),e=e(),P(),e),R={key:1},z={class:"list-flex-toolbar is-reversed"},G={class:"tabs-inner"},H={class:"tabs"},q=[M((()=>h("span",null,"All",-1)))],F=[M((()=>h("span",null,"Completed",-1)))],J=M((()=>h("li",{class:"tab-naver"},null,-1))),Q={class:"flex-list-wrapper flex-list-v2"},X={key:0,class:"tab-content is-active"},Y={class:"all-projects"},B={class:"all-projects-header"},Z={class:"header-item"},ee={class:"item-inner"},le=M((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),ae=M((()=>h("p",null,"Total Tasks",-1))),se={class:"header-item"},te={class:"item-inner"},ie=M((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),ne=M((()=>h("p",null,"Completed Tasks",-1))),oe={class:"header-item"},ce={class:"item-inner"},de=M((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),re=M((()=>h("p",null,"Pending Tasks",-1))),ue={class:"header-item"},pe={class:"item-inner"},me=M((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),ve=M((()=>h("p",null,"Active Tasks",-1))),he={key:0,class:"columns is-multiline projects-card-grid"},ke={class:"column is-6"},ge={class:"top-section"},_e={class:"head"},fe=["onClick"],ye=[M((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-play","aria-hidden":"true"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Active"),h("span",null,"Start work on this task")],-1)))],we=["onClick"],be=[M((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-playlist-alt","aria-hidden":"true"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Pending"),h("span",null,"Waiting to work on")],-1)))],je=["onClick"],Ce=[M((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Completed"),h("span",null,"Mark task as completed")],-1)))],xe=M((()=>h("hr",{class:"dropdown-divider"},null,-1))),Se=["onClick"],De=[M((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-pencil-alt","aria-hidden":"true"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Task detail")],-1)))],Te=["onClick"],Ae=[M((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-trash-can-alt-1","aria-hidden":"true"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Delete "),h("span",null,"Delete this task")],-1)))],Ie={class:"body"},Oe={class:"bottom-section"},Ee={class:"foot-block"},Pe=M((()=>h("h4",{class:"heading"},"Worker(s)",-1))),Ve={class:"developers"},$e={class:"foot-block"},We=M((()=>h("h4",{class:"heading"},"Start date",-1))),Ne={class:"foot-block"},Ue=M((()=>h("h4",{class:"heading"},"End date",-1))),Le={class:"foot-block"},Ke=M((()=>h("h4",{class:"heading"},"Status",-1))),Me=M((()=>h("img",{class:"light-image is-larger",src:N,alt:""},null,-1))),Re=M((()=>h("img",{class:"dark-image is-larger",src:U,alt:""},null,-1))),ze={key:1,class:"tab-content is-active"},Ge={class:"all-projects"},He={key:0,class:"columns is-multiline projects-card-grid"},qe={class:"column is-6"},Fe={class:"grid-item"},Je={class:"top-section"},Qe={class:"head"},Xe=["onClick"],Ye=[M((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Active"),h("span",null,"Start work on this task")],-1)))],Be=["onClick"],Ze=[M((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Pending"),h("span",null,"Waiting to work on")],-1)))],el=["onClick"],ll=[M((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Completed"),h("span",null,"Mark task as completed")],-1)))],al=M((()=>h("hr",{class:"dropdown-divider"},null,-1))),sl=["onClick"],tl=[M((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Task detail")],-1)))],il=["onClick"],nl=[M((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),M((()=>h("div",{class:"meta"},[h("span",null,"Delete "),h("span",null,"Delete this task")],-1)))],ol={class:"body"},cl={class:"bottom-section"},dl={class:"foot-block"},rl=M((()=>h("h4",{class:"heading"},"Worker(s)",-1))),ul={class:"developers"},pl={class:"foot-block"},ml=M((()=>h("h4",{class:"heading"},"Start date",-1))),vl={class:"foot-block"},hl=M((()=>h("h4",{class:"heading"},"End date",-1))),kl={class:"foot-block"},gl=M((()=>h("h4",{class:"heading"},"Status",-1))),_l=M((()=>h("img",{class:"light-image is-larger",src:N,alt:""},null,-1))),fl=M((()=>h("img",{class:"dark-image is-larger",src:U,alt:""},null,-1))),yl=V(n({__name:"ProjectsTasks",props:{projectID:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(n,{emit:E}){const P=n,V=K(),N=L();o(1);const U=o("");o("Edit Project"),o("Add Task");const M=o(""),yl=o("active"),wl=o(0),bl=o(!1),jl=o(!1),Cl=o(0);o({});const xl=o("");o([{id:0,username:"",email:"",phoneNumber:""}]);const Sl=o([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),Dl=o({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Tl=e=>{Cl.value=e,Dl.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},Al=async()=>{try{bl.value=!0;const e=await V.get(`api/task/${P.projectID}/project/`);Sl.value=e.data,console.log(e.data)}catch(e){console.log(e)}finally{bl.value=!1}},Il={active:"#336aeb",pending:"#faad42",canceled:"#e62864",completed:"#f3c2c2ff"},Ol={active:"info",pending:"warning",canceled:"danger",completed:"primary"},El=c((()=>{let e=Sl.value.filter((e=>"active"==e.status));return E("update:completedTasks",e.length),e.length})),Pl=c((()=>{let e=Sl.value.filter((e=>"pending"==e.status));return E("update:activeTasks",e.length),e.length})),Vl=c((()=>Sl.value.filter((e=>"completed"==e.status)).length)),$l=e=>{xl.value=e,jl.value=!0},Wl=()=>{Al(),jl.value=!1,xl.value=""},Nl=async(e,l)=>{try{bl.value=!0;await V.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});Al(),N.success(`Task set to ${l} successfully`),wl.value=0,bl.value=!1}catch(a){console.log(a)}},Ul=async()=>{try{bl.value=!0;const e=await V.delete(`/api/task/${Cl.value}/`);console.log(e),N.success("Task deleted successfully"),Al(),Dl.value.isSweetAlertOpen=!1,wl.value=0}catch(e){console.log(e)}finally{bl.value=!1}},Ll=c((()=>{if(M.value){const e=new RegExp(M.value,"i");return Sl.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return Sl.value.filter((e=>"completed"!=e.status))})),Kl=c((()=>{if(M.value){const e=new RegExp(M.value,"i");return Sl.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return Sl.value.filter((e=>"completed"==e.status))}));return d((()=>{Al()})),(n,o)=>{const c=W,d=$,E=T,V=A,N=i,L=t,K=s,wl=a,Cl=l,Ml=e,Rl=r("tooltip");return u(),p(x,null,[m(bl)?(u(),v(c,{key:0})):(u(),p("div",R,[h("div",z,[k(V,null,{default:g((()=>[k(d,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:g((()=>[_(h("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>y(M)?M.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,m(M)]])])),_:1}),k(E,{onClick:o[1]||(o[1]=e=>$l()),color:"primary",icon:"fas fa-plus",elevated:"",raised:""},{default:g((()=>[w("Task")])),_:1})])),_:1}),h("div",G,[h("div",H,[h("ul",null,[h("li",{class:b(["active"===m(yl)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:o[2]||(o[2]=j(I((e=>yl.value="active"),["prevent"]),["space"])),onClick:o[3]||(o[3]=e=>yl.value="active")},q,32)],2),h("li",{class:b(["closed"===m(yl)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:o[4]||(o[4]=j(I((e=>yl.value="closed"),["prevent"]),["space"])),onClick:o[5]||(o[5]=e=>yl.value="closed")},F,32)],2),J])])])]),h("div",Q,["active"===m(yl)?(u(),p("div",X,[h("div",Y,[h("div",B,[h("div",Z,[h("div",ee,[le,h("span",null,C(m(Sl).length),1),ae])]),h("div",se,[h("div",te,[ie,h("span",null,C(m(Vl)),1),ne])]),h("div",oe,[h("div",ce,[de,h("span",null,C(m(Pl)),1),re])]),h("div",ue,[h("div",pe,[me,h("span",null,C(m(El)),1),ve])])]),m(Ll).length?(u(),p("div",he,[(u(!0),p(x,null,S(m(Ll),(e=>(u(),p("div",ke,[h("div",{class:"grid-item",style:O({backgroundImage:`linear-gradient(350deg, white 65%, ${Il[e.status]}30)`})},[h("div",ge,[h("div",_e,[h("h3",null,C(e.title),1),k(N,{icon:"feather:more-vertical",spaced:"",right:""},{content:g((()=>[h("a",{onClick:l=>Nl(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},ye,8,fe),h("a",{onClick:l=>Nl(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},be,8,we),h("a",{onClick:l=>Nl(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Ce,8,je),xe,h("a",{onClick:l=>$l(e.id),role:"menuitem",class:"dropdown-item is-media"},De,8,Se),h("a",{onClick:l=>Tl(e.id),role:"menuitem",class:"dropdown-item is-media"},Ae,8,Te)])),_:2},1024)]),h("div",Ie,[h("p",null,C(e.description),1)])]),h("div",Oe,[h("div",Ee,[Pe,h("div",Ve,[(u(!0),p(x,null,S(e.workers,(e=>_((u(),v(L,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[Rl,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),h("div",$e,[We,h("p",null,C(e.startDate),1)]),h("div",Ne,[Ue,h("p",null,C(e.endDate),1)]),h("div",Le,[Ke,k(K,{outlined:"",rounded:"",color:Ol[e.status]},{default:g((()=>[w(C(e.status),1)])),_:2},1032,["color"])])])],4)])))),256))])):(u(),v(wl,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:g((()=>[Me,Re])),_:1}))])])):"closed"===m(yl)?(u(),p("div",ze,[h("div",Ge,[m(Kl).length?(u(),p("div",He,[(u(!0),p(x,null,S(m(Kl),(e=>(u(),p("div",qe,[h("div",Fe,[h("div",Je,[h("div",Qe,[h("h3",null,C(e.title),1),k(N,{icon:"feather:more-vertical",spaced:"",right:""},{content:g((()=>[h("a",{onClick:l=>Nl(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ye,8,Xe),h("a",{onClick:l=>Nl(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Ze,8,Be),h("a",{onClick:l=>Nl(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},ll,8,el),al,h("a",{onClick:l=>$l(e.id),role:"menuitem",class:"dropdown-item is-media"},tl,8,sl),h("a",{onClick:l=>Tl(e.id),role:"menuitem",class:"dropdown-item is-media"},nl,8,il)])),_:2},1024)]),h("div",ol,[h("p",null,C(e.description),1)])]),h("div",cl,[h("div",dl,[rl,h("div",ul,[(u(!0),p(x,null,S(e.workers,(e=>_((u(),v(L,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[Rl,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),h("div",pl,[ml,h("p",null,C(e.startDate),1)]),h("div",vl,[hl,h("p",null,C(e.endDate),1)]),h("div",kl,[gl,h("p",null,C(e.status),1)])])])])))),256))])):(u(),v(wl,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:g((()=>[_l,fl])),_:1}))])])):D("",!0)])])),m(Dl).isSweetAlertOpen?(u(),v(Cl,{key:2,isSweetAlertOpen:m(Dl).isSweetAlertOpen,title:m(Dl).title,subtitle:m(Dl).subtitle,btntext:m(Dl).btntext,onConfirm:Ul,loading:m(bl),onCancel:()=>m(Dl).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):D("",!0),m(jl)?(u(),v(Ml,{key:3,projectID:P.projectID,isOpen:m(jl),taskIdSelected:m(xl),startDate:m(U),"onUpdate:modalHandler":Wl,"onUpdate:OnSuccess":Al},null,8,["projectID","isOpen","taskIdSelected","startDate"])):D("",!0)],64)}}}),[["__scopeId","data-v-f44e0448"]]);export{yl as _};
