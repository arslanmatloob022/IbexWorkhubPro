import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-6ce02f3d.js";import{e as a,G as l,r as s,o as t,y as i,z as o,A as n,B as r,K as u,C as d,l as c,Q as p,R as m,D as v,j as y,P as f,H as _,a0 as g,E as h,O as k,J as b,W as x,X as w,L as C,N as V,t as S,S as j,T as I,I as U,Z as L,V as N}from"./index-94b0decd.js";import{_ as $}from"./VInput.vue_vue_type_script_setup_true_lang-4127fe53.js";import{_ as M,a as O}from"./VOption.vue_vue_type_style_index_0_lang-57202113.js";import{_ as z}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-f242fcb5.js";import{_ as B}from"./VField.vue_vue_type_script_setup_true_lang-df35fbf6.js";import{_ as E}from"./VControl-268f8966.js";import{u as P}from"./useNotyf-4c5e2a2c.js";import{u as W}from"./company-b9870e82.js";import{u as A}from"./useAPI-f19b1499.js";import{u as H}from"./userSession-2bbe7c4c.js";import{_ as K}from"./VAvatar.vue_vue_type_style_index_0_lang-8515c50c.js";import{_ as F}from"./whatsapp-93d30726.js";import{s as R,e as T}from"./useSupportElement-1c0827bb.js";const q={class:"modal-form columns is-multiline"},D={key:0,class:"field column is-12 mb-0"},G=(e=>(x("data-v-1596d713"),e=e(),w(),e))((()=>d("label",{class:"light-text",style:{"font-size":"16px"}},"Sector ",-1))),J={class:"indutryOptions"},Q=["onClick"],X=["src"],Y={style:{"font-size":"12px"}},Z={class:"colums is-multiline cu-all-input",style:{"margin-bottom":"40px"}},ee={class:"column is-12 light-text pl-0 is-flex cus-align-center",style:{"font-size":"16px"}},ae={key:1,class:"mb-3 is-reversed",style:{width:"100%"}},le=C(a({__name:"InvitationLink",props:{invitationModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:x}){const w=a,C=H();l();const V=A(),S=s(!1),j=P(),I=W(),U=s(""),L=s(""),N=s(""),K=s(!1),F=s(!1),R=s(""),T=s(""),le=s(!1);s(!1);const se=()=>{x("update:modalHandler",!1)},te=I.suppliers?I.suppliers:[];return t((()=>{"partner"==C.user.role&&(N.value=C.user.partner),L.value=I.loggedCompany.industry?I.loggedCompany.industry[0].id:""})),(a,l)=>{const s=E,t=B,x=z,P=M,W=O,A=$,H=h,ie=e;return i(),o("template",null,[n(g,{name:"fade-slow"},{default:r((()=>[n(ie,{is:"form",open:w.invitationModal,title:"Worker Signup Link",size:"small",actions:"right",onSubmit:l[8]||(l[8]=u((e=>(async()=>{try{if(console.log(I.loggedCompany.id),!L.value)return void j.error("Please select industry first");S.value=!0;const e=await V.post("/v3/api/worker/worker_invitation/create-worker-invitation/",{company:I.loggedCompany.id,industry:N.value}),a=window.location.origin;U.value=`${a}/worker-signup/`+e.data.token,S.value=!1}catch(e){console.error("ok",e),S.value=!1}})()),["prevent"])),onClose:se,class:"crete-link-modal"},{content:r((()=>[d("div",q,[c(U)?f("",!0):(i(),o("div",D,[n(t,{class:""},{default:r((()=>[G,n(s,null,{default:r((()=>[d("div",J,[(i(!0),o(p,null,m(c(I).loggedCompany.industry,((e,a)=>(i(),o("div",{style:{"margin-bottom":"20px"},key:a,class:k(c(L)==e.id?"cus-selected":"options"),onClick:a=>L.value=e.id},[d("img",{src:e.industryLogo},null,8,X),d("p",Y,b(e.name),1)],10,Q)))),128))])])),_:1})])),_:1}),d("div",Z,[d("label",ee,[v("Work through business partner ? "),d("span",null,[n(t,null,{default:r((()=>[n(s,null,{default:r((()=>[n(x,{disabled:"partner"==c(C).user.role,modelValue:c(le),"onUpdate:modelValue":l[0]||(l[0]=e=>y(le)?le.value=e:null),label:"Yes"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])]),n(t,null,{default:r((()=>[n(s,null,{default:r((()=>[n(W,{disabled:!c(le),modelValue:c(N),"onUpdate:modelValue":l[1]||(l[1]=e=>y(N)?N.value=e:null),rounded:"",name:"industry",class:"is-rounded"},{default:r((()=>[n(P,{disabled:"",value:""},{default:r((()=>[v("Select Partner")])),_:1}),(i(!0),o(p,null,m(c(te),((e,a)=>(i(),_(P,{value:c(le)?"":e.id,key:a},{default:r((()=>[v(b(e.supplierName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1})])])),c(U)?(i(),o("div",ae,[n(t,{addons:""},{default:r((()=>[n(s,{expanded:""},{default:r((()=>[n(A,{modelValue:c(U),"onUpdate:modelValue":l[2]||(l[2]=e=>y(U)?U.value=e:null),type:"text",class:"input",placeholder:"Find a repository"},null,8,["modelValue"])])),_:1}),n(s,null,{default:r((()=>[n(H,{icon:"fas fa-copy",onClick:l[3]||(l[3]=e=>{return a=c(U),navigator.clipboard.writeText(a),void j.success("Link Copied");var a}),color:"primary"},{default:r((()=>[v(" Link ")])),_:1})])),_:1})])),_:1}),d("div",null,[d("form",{onSubmit:l[5]||(l[5]=u((e=>(async()=>{try{K.value=!0,await V.post("/v3/api/worker/worker_invitation/send-worker-signup-invitation/",{link:U.value,email:R.value}),j.success("Invitation Email sent successfully"),R.value=""}catch{j.error("Invalid email address")}finally{K.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[n(t,{style:{width:"100%"},addons:""},{default:r((()=>[n(s,{expanded:""},{default:r((()=>[n(A,{modelValue:c(R),"onUpdate:modelValue":l[4]||(l[4]=e=>y(R)?R.value=e:null),type:"email",class:"input",placeholder:"example@gmail.com"},null,8,["modelValue"])])),_:1}),n(s,null,{default:r((()=>[n(H,{type:"submit",icon:"feather:mail",loading:c(K),color:"primary"},{default:r((()=>[v(" Mail ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)]),d("div",null,[d("form",{onSubmit:l[7]||(l[7]=u((e=>(async()=>{try{F.value=!0,await V.post("/v3/api/worker/worker_invitation/send-invitation-sms/",{message:U.value,phone:T.value}),j.success("Invitation SMS sent successfully"),T.value=""}catch{j.error("Invalid phone number")}finally{F.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[n(t,{style:{width:"100%"},addons:""},{default:r((()=>[n(s,{expanded:""},{default:r((()=>[n(A,{modelValue:c(T),"onUpdate:modelValue":l[6]||(l[6]=e=>y(T)?T.value=e:null),pattern:"^\\+44\\d{10}$",type:"phone",class:"input",required:"",placeholder:"+4400000000"},null,8,["modelValue"])])),_:1}),n(s,null,{default:r((()=>[n(H,{type:"submit",icon:"feather:message-circle",loading:c(K),color:"primary"},{default:r((()=>[v(" SMS ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)])])):f("",!0)])])),action:r((()=>[c(U)?f("",!0):(i(),_(H,{key:0,type:"submit",color:"primary",rounded:"",loading:c(S),icon:"fas fa-link",raised:""},{default:r((()=>[v(" Create")])),_:1},8,["loading"]))])),cancel:r((()=>[n(H,{style:{display:"none"},rounded:"",color:"light",onClick:se,raised:""},{default:r((()=>[v("Close ")])),_:1})])),_:1},8,["open"])])),_:1})])}}}),[["__scopeId","data-v-1596d713"]]),se={key:0,class:"is-active search-results has-slimscroll"},te={class:"ml-2",style:{display:"flex","flex-direction":"column","text-align":"left"}},ie=["onClick"],oe=["src","onClick"],ne=["onClick"],re=d("img",{src:F,style:{width:"12px",height:"12px","margin-top":"3px","margin-right":"2px"}},null,-1),ue={key:1,class:"is-active search-results has-slimscroll"},de=[d("h1",{class:"p-4 light-text"},"No result found",-1)],ce=["onKeydown"],pe=[d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:x"},null,-1)],me=a({__name:"SearchWorkerInput",setup(e){const a=A();V();const l=s(!1),t=W(),g=s(""),h=S(),k=s([]),x=T((()=>{g.value?w():k.value=[]}),500),w=async()=>{try{l.value=!0;const e=await a.get(`/v3/api/worker/workers-for-options/${t.loggedCompany.id}/?search=${g.value}`,{});k.value=e.data}catch(e){console.error("Error while searching",e)}finally{l.value=!1}},C=e=>{h.push(`/sidebar/company/workers/${e}`),L()},L=()=>{g.value="",k.value=[]};return(e,a)=>{const s=K,t=E,h=B;return i(),_(h,{class:"mt-4"},{default:r((()=>[n(t,{icon:c(l)?"feather:loader":"feather:search"},{extra:r((()=>[c(k).length>0?(i(),o("div",se,[(i(!0),o(p,null,m(c(k),(e=>(i(),o("div",{key:e.id,class:"search-result cu-pointer"},[n(s,{class:"cus-pointer",picture:e.profileImageURL,onClick:a=>C(e.id)},null,8,["picture","onClick"]),d("div",te,[d("span",{class:"item-name dark-inverted",style:{"margin-bottom":"2px !important","font-weight":"500"},onClick:a=>C(e.id)},[v(b(e.firstName)+" "+b(e.lastName)+" ",1),d("img",{style:{width:"20px",height:"20px"},src:e.industry.industryLogo,onClick:a=>C(e.id)},null,8,oe)],8,ie),d("div",{onClick:a=>c(R)(e.phoneNumber),style:{color:"var(--light-text)",display:"flex",gap:"4px","algin-items":"center"}},[re,v(" "+b(e.phoneNumber),1)],8,ne)])])))),128))])):f("",!0),c(k).length||!c(g)||c(l)?f("",!0):(i(),o("div",ue,de))])),default:r((()=>[j(d("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>y(g)?g.value=e:null),type:"text",class:"input is-rounded search-input cus-searchInput",placeholder:"Search...",onInput:a[1]||(a[1]=(...e)=>c(x)&&c(x)(...e))},null,544),[[I,c(g)]]),c(g)?(i(),o("div",{key:0,class:"form-icon is-right",tabindex:"0",role:"button",onKeydown:U(u(L,["prevent"]),["space"]),onClick:L},pe,40,ce)):f("",!0)])),_:1},8,["icon"])])),_:1})}}}),ve={class:"sidebar-block-header"},ye={class:"sidebar-block-inner"},fe={class:"sidebar-block-footer"},_e=a({__name:"Sideblock",props:{theme:{default:"default"},isOpen:{type:Boolean}},setup(e){const a=e,l=L((()=>{switch(a.theme){case"color":return"is-colored";case"curved":return"is-curved";case"color-curved":return"is-colored is-curved";default:return""}}));return(e,a)=>(i(),o("div",{class:k(["sidebar-block is-active",[c(l)]])},[d("div",ve,[N(e.$slots,"header")]),d("div",ye,[d("ul",null,[N(e.$slots,"links")])]),d("div",fe,[N(e.$slots,"bottom-links")])],2))}}),ge="/images/icons/sidebarclose.png",he="/images/photo/multiUsers.png",ke="/images/photo/archiveUser.png",be="/images/icons/sidebarOpen.png";export{_e as _,me as a,le as b,ge as c,he as d,ke as e,be as f};
