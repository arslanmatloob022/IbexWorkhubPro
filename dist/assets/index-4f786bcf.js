import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-b194db95.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-478c2b38.js";import{_ as a,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-90ce9b44.js";import{_ as l}from"./VDropdown.vue_vue_type_style_index_0_lang-1cbd91b4.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-239ffb48.js";import{_ as n}from"./VTag.vue_vue_type_style_index_0_lang-aeb476fd.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-5b759f5a.js";import{f as r,x as c,r as u,$ as d,o as p,av as m,m as _,C as v,O as f,D as y,E as b,F as g,G as j,L as h,X as x,k,K as w,N as C,V as A,W as P,aS as V,P as S,U as N,J as $,A as O,am as I}from"./index-451213d4.js";import{_ as D}from"./VField.vue_vue_type_script_setup_true_lang-7c2646df.js";import{_ as T}from"./VControl-45df5642.js";import{_ as F}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-c0cd22b3.js";import{_ as L,a as W}from"./search-4-dark-2b5b440c.js";import{g as E}from"./estimatesScripts-01d5ff64.js";import{u as U}from"./useAPI-1ed33b31.js";import{u as X}from"./useNotyf-b28f6053.js";import{d as z,i as J}from"./useSupportElement-e61ac170.js";import{u as M}from"./viewWrapper-5b275b46.js";import{b as q}from"./route-block-83d24a4e.js";import"./VFlex.vue_vue_type_style_index_0_lang-7aaf55f5.js";import"./VIcon.vue_vue_type_script_setup_true_lang-dded9410.js";import"./useDropdown-e99a7e86.js";import"./VLabel.vue_vue_type_script_setup_true_lang-9f6a2a67.js";import"./useVFieldContext-d7d68bcb.js";import"./VPlaceloadWrap-514734e2.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-f6df2d35.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-77f3c1f8.js";import"./notyf-0edef8d3.js";import"./useThemeColors-c2407863.js";const B={key:1},G={class:"list-view-toolbar"},H={class:"tabs-inner"},K={class:"page-content-inner"},R={class:"flex-list-wrapper flex-list-v1"},Y=b("div",{class:"columns is-multiline"},[b("div",{class:"column is-3"}),b("div",{class:"column is-6 justify-right"})],-1),Q=b("img",{class:"light-image",src:L,alt:""},null,-1),Z=b("img",{class:"dark-image",src:W,alt:""},null,-1),ee={class:"item-name dark-inverted show-text-200"},te={class:"item-meta show-text-200"},ae={key:0,class:"show-text-200"},se={class:"item-name"},le={class:"item-meta"},ie={key:1,class:"show-text-200"},ne={class:"item-name dark-inverted"},oe={class:"item-meta"},re={class:"item-name dark-inverted"},ce={class:"item-meta"},ue=["onClick"],de=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),b("div",{class:"meta"},[b("span",null,"View"),b("span",null,"View user details")],-1)],pe=b("hr",{class:"dropdown-divider"},null,-1),me=["onClick"],_e=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),b("div",{class:"meta"},[b("span",null,"Delete"),b("span",null,"Delete Proposal Permanently")],-1)],ve=r({__name:"CompletedProjects",setup(r){const O=U(),I=X(),L=c(),W=u(!1),M=u("");u(4);const q=u(0),ve=u([]),fe=u(1),ye=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),be={username:{label:"Job",grow:!0},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},ge=async()=>{try{W.value=!0;let e=(await O.get("/api/project/project-jobs/",{})).data;ve.value=e.filter((e=>"completed"==e.status))}catch(e){console.log(e)}finally{W.value=!1}};u(!1);const je=u(""),he=async()=>{try{W.value=!0,await O.delete(`/api/project/${q.value}/`),I.success("Project deleted successfully"),ye.value.isSweetAlertOpen=!1,ge()}catch(e){console.log(e)}finally{W.value=!1}},xe=d((()=>M.value?ve.value.filter((e=>e?.title.match(new RegExp(M.value,"i")))):ve.value));return p((()=>{ge()})),(r,c)=>{const u=F,d=T,p=D,O=S,I=o,U=s,X=n,q=i,ve=l,ge=a,ke=t,we=e,Ce=m("tooltip");return _(W)?(v(),f(u,{key:0})):(v(),y("div",B,[b("div",G,[g(p,null,{default:j((()=>[g(d,{icon:"feather:search"},{default:j((()=>[h(b("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>k(M)?M.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[x,_(M)]])])),_:1})])),_:1}),b("div",H,[g(O,{color:"primary",to:"/sidebar/dashboard/projects/add-project",elevated:""},{default:j((()=>[w("Add Project ")])),_:1})])]),b("div",K,[b("div",R,[Y,_(xe)?.length?C("",!0):(v(),f(I,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:j((()=>[Q,Z])),_:1})),_(xe)?.length?(v(),f(ge,{key:1,data:_(xe),columns:be,compact:""},{body:j((()=>[g(V,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(v(!0),y(A,null,P(_(xe),(e=>(v(),y("div",{key:e.id,class:"flex-table-item"},[g(U,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[b("div",null,[b("span",ee,N(e?.title?e?.title:"N/A"),1),b("span",te,[b("span",null,N(e?.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),g(U,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[e?.clientInfo?(v(),y("div",ae,[b("span",se,N(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),b("span",le,[b("span",null,N(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):C("",!0),e.contractor_info?(v(),y("div",ie,[b("span",ne,N(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),b("span",oe,[b("span",null,N(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):C("",!0)])),_:2},1032,["onClick"]),g(U,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[b("div",null,[b("span",re,N(_(z)(e.created)),1),b("span",ce,[b("span",null,"At:"+N(_(J)(e.created)),1)])])])),_:2},1032,["onClick"]),g(U,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:j((()=>[g(X,{class:"capitalized",color:_(E)[e.status],rounded:""},{default:j((()=>[w(N(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),g(U,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[b("div",null,[(v(!0),y(A,null,P(e?.managers_list,(e=>h((v(),f(q,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Ce,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),g(U,{column:{align:"end"}},{default:j((()=>[g(ve,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:j((({close:t})=>[b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)}},de,8,ue),pe,b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:$((t=>{return a=e.id,je.value=a,void(ye.value={title:"Delete job?",subtitle:"Are you sure to delete this job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a}),["prevent"])},_e,8,me)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):C("",!0),_(xe)?.length>5?(v(),f(ke,{key:2,"current-page":_(fe),"onUpdate:currentPage":c[1]||(c[1]=e=>k(fe)?fe.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):C("",!0)]),_(ye).isSweetAlertOpen?(v(),f(we,{key:0,isSweetAlertOpen:_(ye).isSweetAlertOpen,title:_(ye).title,subtitle:_(ye).subtitle,btntext:_(ye).btntext,onConfirm:he,onCancel:()=>_(ye).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0)])]))}}}),fe={class:"page-content-inner"},ye=b("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),be=r({__name:"index",setup:e=>(M().setPageTitle("Completed Projects"),O({title:"Completed Projects - Ibex"}),(e,t)=>{const a=ve;return v(),y("div",fe,[(v(),f(I,{to:"[data-teleport-bg]"},[ye])),g(a,{class:"has-navbar-spacing"})])})});"function"==typeof q&&q(be);export{be as default};
