import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-f85ac51d.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-4634f42f.js";import{_ as a}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-93ba40ee.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-a8f2afdf.js";import{_ as t}from"./VTag.vue_vue_type_style_index_0_lang-2154ea11.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-8e373625.js";import{_ as n}from"./VDropdown.vue_vue_type_style_index_0_lang-cd7ea8f4.js";import{f as o,r as c,$ as d,o as r,av as u,C as p,D as m,m as v,O as k,E as h,F as g,G as _,L as f,X as y,k as w,K as b,I as C,H as j,U as D,V as T,W as x,N as S,P as A,al as I,J as E,a4 as O,Q as P,R as M,S as V}from"./index-2dec9709.js";import{_ as $}from"./VControl-0b0315de.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-52fd7b56.js";import{_ as L,a as U}from"./projects-dark-4a371d8a.js";import"./useSupportElement-5543f980.js";import{u as H}from"./useNotyf-528b9175.js";import{u as N}from"./useAPI-bacd1021.js";const z=e=>(P("data-v-92aee4ef"),e=e(),M(),e),K={key:1},R={class:"list-flex-toolbar is-reversed"},q={class:"tabs-inner"},F={class:"tabs"},G=[z((()=>h("span",null,"All",-1)))],J=[z((()=>h("span",null,"Completed",-1)))],Q=z((()=>h("li",{class:"tab-naver"},null,-1))),X={class:"flex-list-wrapper flex-list-v2"},Y={key:0,class:"tab-content is-active"},B={class:"all-projects"},Z={class:"all-projects-header"},ee={class:"header-item"},le={class:"item-inner"},ae=z((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),se=z((()=>h("p",null,"Total Tasks",-1))),te={class:"header-item"},ie={class:"item-inner"},ne=z((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),oe=z((()=>h("p",null,"Completed Tasks",-1))),ce={class:"header-item"},de={class:"item-inner"},re=z((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),ue=z((()=>h("p",null,"Pending Tasks",-1))),pe={class:"header-item"},me={class:"item-inner"},ve=z((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),ke=z((()=>h("p",null,"Active Tasks",-1))),he={key:0,class:"columns is-multiline projects-card-grid"},ge={class:"column is-6"},_e=["onClick"],fe={class:"top-section"},ye={class:"head"},we=["onClick"],be=[z((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-play","aria-hidden":"true"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Active"),h("span",null,"Start work on this task")],-1)))],Ce=["onClick"],je=[z((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-playlist-alt","aria-hidden":"true"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Pending"),h("span",null,"Waiting to work on")],-1)))],De=["onClick"],Te=[z((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Completed"),h("span",null,"Mark task as completed")],-1)))],xe=z((()=>h("hr",{class:"dropdown-divider"},null,-1))),Se=["onClick"],Ae=[z((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-pencil-alt","aria-hidden":"true"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Task detail")],-1)))],Ie=["onClick"],Ee=[z((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-trash-can-alt-1","aria-hidden":"true"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Delete "),h("span",null,"Delete this task")],-1)))],Oe={class:"body"},Pe=["innerHTML"],Me={class:"bottom-section"},Ve={class:"foot-block"},$e=z((()=>h("h4",{class:"heading"},"Worker(s)",-1))),We={class:"developers"},Le={class:"foot-block"},Ue=z((()=>h("h4",{class:"heading"},"Start date",-1))),He={class:"foot-block"},Ne=z((()=>h("h4",{class:"heading"},"End date",-1))),ze={class:"foot-block"},Ke=z((()=>h("h4",{class:"heading"},"Status",-1))),Re=z((()=>h("img",{class:"light-image is-larger",src:L,alt:""},null,-1))),qe=z((()=>h("img",{class:"dark-image is-larger",src:U,alt:""},null,-1))),Fe={key:1,class:"tab-content is-active"},Ge={class:"all-projects"},Je={key:0,class:"columns is-multiline projects-card-grid"},Qe=["onClick"],Xe={class:"grid-item"},Ye={class:"top-section"},Be={class:"head"},Ze=["onClick"],el=[z((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Active"),h("span",null,"Start work on this task")],-1)))],ll=["onClick"],al=[z((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Pending"),h("span",null,"Waiting to work on")],-1)))],sl=["onClick"],tl=[z((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Completed"),h("span",null,"Mark task as completed")],-1)))],il=z((()=>h("hr",{class:"dropdown-divider"},null,-1))),nl=["onClick"],ol=[z((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Task detail")],-1)))],cl=["onClick"],dl=[z((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),z((()=>h("div",{class:"meta"},[h("span",null,"Delete "),h("span",null,"Delete this task")],-1)))],rl={class:"body"},ul={class:"bottom-section"},pl={class:"foot-block"},ml=z((()=>h("h4",{class:"heading"},"Worker(s)",-1))),vl={class:"developers"},kl={class:"foot-block"},hl=z((()=>h("h4",{class:"heading"},"Start date",-1))),gl={class:"foot-block"},_l=z((()=>h("h4",{class:"heading"},"End date",-1))),fl={class:"foot-block"},yl=z((()=>h("h4",{class:"heading"},"Status",-1))),wl=z((()=>h("img",{class:"light-image is-larger",src:L,alt:""},null,-1))),bl=z((()=>h("img",{class:"dark-image is-larger",src:U,alt:""},null,-1))),Cl=V(o({__name:"ProjectsTasks",props:{projectID:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(o,{emit:P}){const M=o,V=N(),L=H();c(1);const U=c("");c("Edit Project"),c("Add Task");const z=c(""),Cl=c("active"),jl=c(0),Dl=c(!1),Tl=c(!1),xl=c(0),Sl=c({}),Al=c(""),Il=c(!1),El=c("");c([{id:0,username:"",email:"",phoneNumber:""}]);const Ol=c([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),Pl=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Ml=(e,l)=>{console.log("detail",e),Sl.value=e,El.value=l,Il.value=!0},Vl=e=>{xl.value=e,Pl.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},$l=async()=>{try{Dl.value=!0;const e=await V.get(`api/task/${M.projectID}/project/`);Ol.value=e.data,console.log(e.data)}catch(e){console.log(e)}finally{Dl.value=!1}},Wl={active:"#336aeb",pending:"#faad42",canceled:"#e62864",completed:"#f3c2c2ff"},Ll={active:"info",pending:"warning",canceled:"danger",completed:"primary"},Ul=d((()=>{let e=Ol.value.filter((e=>"active"==e.status));return P("update:completedTasks",e.length),e.length})),Hl=d((()=>{let e=Ol.value.filter((e=>"pending"==e.status));return P("update:activeTasks",e.length),e.length})),Nl=d((()=>Ol.value.filter((e=>"completed"==e.status)).length)),zl=e=>{Al.value=e,Tl.value=!0},Kl=()=>{$l(),Tl.value=!1,Al.value=""},Rl=async(e,l)=>{try{Dl.value=!0;await V.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});$l(),L.success(`Task set to ${l} successfully`),jl.value=0,Dl.value=!1}catch(a){console.log(a)}},ql=async()=>{try{Dl.value=!0;const e=await V.delete(`/api/task/${xl.value}/`);console.log(e),L.success("Task deleted successfully"),$l(),Pl.value.isSweetAlertOpen=!1,jl.value=0}catch(e){console.log(e)}finally{Dl.value=!1}},Fl=d((()=>{if(z.value){const e=new RegExp(z.value,"i");return Ol.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return Ol.value.filter((e=>"completed"!=e.status))})),Gl=d((()=>{if(z.value){const e=new RegExp(z.value,"i");return Ol.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return Ol.value.filter((e=>"completed"==e.status))}));return r((()=>{$l()})),(o,c)=>{const d=W,r=$,P=A,V=I,L=n,H=i,N=t,jl=s,xl=a,Jl=l,Ql=e,Xl=u("tooltip");return p(),m(T,null,[v(Dl)?(p(),k(d,{key:0})):(p(),m("div",K,[h("div",R,[g(V,null,{default:_((()=>[g(r,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:_((()=>[f(h("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>w(z)?z.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[y,v(z)]])])),_:1}),g(P,{onClick:c[1]||(c[1]=e=>zl()),color:"primary",icon:"fas fa-plus",elevated:"",raised:""},{default:_((()=>[b("Task")])),_:1})])),_:1}),h("div",q,[h("div",F,[h("ul",null,[h("li",{class:C(["active"===v(Cl)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:c[2]||(c[2]=j(E((e=>Cl.value="active"),["prevent"]),["space"])),onClick:c[3]||(c[3]=e=>Cl.value="active")},G,32)],2),h("li",{class:C(["closed"===v(Cl)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:c[4]||(c[4]=j(E((e=>Cl.value="closed"),["prevent"]),["space"])),onClick:c[5]||(c[5]=e=>Cl.value="closed")},J,32)],2),Q])])])]),h("div",X,["active"===v(Cl)?(p(),m("div",Y,[h("div",B,[h("div",Z,[h("div",ee,[h("div",le,[ae,h("span",null,D(v(Ol).length),1),se])]),h("div",te,[h("div",ie,[ne,h("span",null,D(v(Nl)),1),oe])]),h("div",ce,[h("div",de,[re,h("span",null,D(v(Hl)),1),ue])]),h("div",pe,[h("div",me,[ve,h("span",null,D(v(Ul)),1),ke])])]),v(Fl).length?(p(),m("div",he,[(p(!0),m(T,null,x(v(Fl),(e=>(p(),m("div",ge,[h("div",{class:"grid-item cu-pointer",onClick:l=>Ml(e,e.id),style:O({backgroundImage:`linear-gradient(350deg, white 65%, ${Wl[e.status]}30)`})},[h("div",fe,[h("div",ye,[h("h3",null,D(e.title),1),g(L,{icon:"feather:more-vertical",spaced:"",right:""},{content:_((()=>[h("a",{onClick:l=>Rl(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},be,8,we),h("a",{onClick:l=>Rl(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},je,8,Ce),h("a",{onClick:l=>Rl(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Te,8,De),xe,h("a",{onClick:l=>zl(e.id),role:"menuitem",class:"dropdown-item is-media"},Ae,8,Se),h("a",{onClick:l=>Vl(e.id),role:"menuitem",class:"dropdown-item is-media"},Ee,8,Ie)])),_:2},1024)]),h("div",Oe,[h("p",{innerHTML:e.description},null,8,Pe)])]),h("div",Me,[h("div",Ve,[$e,h("div",We,[(p(!0),m(T,null,x(e.workers,(e=>f((p(),k(H,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[Xl,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),h("div",Le,[Ue,h("p",null,D(e.startDate),1)]),h("div",He,[Ne,h("p",null,D(e.endDate),1)]),h("div",ze,[Ke,g(N,{outlined:"",rounded:"",style:{"text-transform":"capitalize"},color:Ll[e.status]},{default:_((()=>[b(D(e.status),1)])),_:2},1032,["color"])])])],12,_e)])))),256))])):(p(),k(jl,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:_((()=>[Re,qe])),_:1}))])])):"closed"===v(Cl)?(p(),m("div",Fe,[h("div",Ge,[v(Gl).length?(p(),m("div",Je,[(p(!0),m(T,null,x(v(Gl),(e=>(p(),m("div",{onClick:l=>Ml(e,e.id),class:"column is-6"},[h("div",Xe,[h("div",Ye,[h("div",Be,[h("h3",null,D(e.title),1),g(L,{icon:"feather:more-vertical",spaced:"",right:""},{content:_((()=>[h("a",{onClick:l=>Rl(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},el,8,Ze),h("a",{onClick:l=>Rl(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},al,8,ll),h("a",{onClick:l=>Rl(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},tl,8,sl),il,h("a",{onClick:l=>zl(e.id),role:"menuitem",class:"dropdown-item is-media"},ol,8,nl),h("a",{onClick:l=>Vl(e.id),role:"menuitem",class:"dropdown-item is-media"},dl,8,cl)])),_:2},1024)]),h("div",rl,[h("p",null,D(e.description),1)])]),h("div",ul,[h("div",pl,[ml,h("div",vl,[(p(!0),m(T,null,x(e.workers,(e=>f((p(),k(H,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[Xl,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),h("div",kl,[hl,h("p",null,D(e.startDate),1)]),h("div",gl,[_l,h("p",null,D(e.endDate),1)]),h("div",fl,[yl,h("p",null,D(e.status),1)])])])],8,Qe)))),256))])):(p(),k(jl,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:_((()=>[wl,bl])),_:1}))])])):S("",!0)])])),v(Il)?(p(),k(xl,{key:2,taskDetailModal:v(Il),taskData:v(Sl),taskId:v(El),"onUpdate:modalHandler":c[6]||(c[6]=e=>Il.value=!1)},null,8,["taskDetailModal","taskData","taskId"])):S("",!0),v(Pl).isSweetAlertOpen?(p(),k(Jl,{key:3,isSweetAlertOpen:v(Pl).isSweetAlertOpen,title:v(Pl).title,subtitle:v(Pl).subtitle,btntext:v(Pl).btntext,onConfirm:ql,loading:v(Dl),onCancel:()=>v(Pl).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):S("",!0),v(Tl)?(p(),k(Ql,{key:4,projectID:M.projectID,isOpen:v(Tl),taskIdSelected:v(Al),startDate:v(U),"onUpdate:modalHandler":Kl,"onUpdate:OnSuccess":$l},null,8,["projectID","isOpen","taskIdSelected","startDate"])):S("",!0)],64)}}}),[["__scopeId","data-v-92aee4ef"]]);export{Cl as _};
