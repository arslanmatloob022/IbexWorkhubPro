import{_ as a}from"./AddUpdateUser-4af8326e.js";import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-6a903bb8.js";import{_ as s}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-e9b92f96.js";import{_ as l}from"./WorkerTasks-2d953aec.js";import{_ as t}from"./VIconBox.vue_vue_type_style_index_0_lang-438cbc10.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-2d228be5.js";import{e as i,x as n,r as o,v as d,o as c,B as u,C as p,D as v,E as m,l as h,J as y,T as k,F as f,H as _,G as b,K as w,L as g,M as j,N as x,I as T}from"./index-fd0ff1bc.js";import{F as C}from"./FullCalendar-4d608af6.js";import{i as I}from"./index-f52ed8ce.js";import{u as M}from"./useAPI-4bb46aa3.js";import{u as D}from"./useNotyf-70dc65ec.js";import{u as A}from"./userSession-71b1c148.js";const P={class:"lifestyle-dashboard lifestyle-dashboard-v3"},N={class:"illustration-header"},O={class:"p-4"},U={class:"header-meta"},H={class:"summary-stats"},K={class:"summary-stat"},S=v("span",null,"Role",-1),V={class:"summary-stat"},W=v("span",null,"Status",-1),F={class:"summary-stat"},R=v("span",null,"Phone",-1),$={class:"summary-stat"},L=v("span",null,"Email",-1),B={class:"summary-stat h-hidden-tablet-p"},E=v("span",null,"Mail notify ",-1),q={class:"summary-stat h-hidden-tablet-p"},z=v("span",null,"Password ",-1),G={class:"columns is-multiline is-flex-tablet-p"},J={class:"column is-3"},Y={class:"health-tile"},Z={class:"tile-head"},Q=v("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1),X={class:"dark-inverted"},aa=v("h3",{class:"dark-inverted"},"Total Tasks",-1),ea=v("p",null,"Number of tasks assigned within 30 Days duration",-1),sa={class:"column is-3"},la={class:"health-tile"},ta={class:"tile-head"},ra=v("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ia={class:"dark-inverted"},na=v("h3",{class:"dark-inverted"},"Active Tasks",-1),oa=v("p",null,"Tasks are currently active and worker notified",-1),da={class:"column is-3"},ca={class:"health-tile"},ua={class:"tile-head"},pa=v("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1),va={class:"dark-inverted"},ma=v("h3",{class:"dark-inverted"},"Pending Tasks",-1),ha=v("p",null,"Tasks that are pending and worker need to done.",-1),ya={class:"column is-3"},ka={class:"health-tile"},fa={class:"tile-head"},_a=v("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1),ba={class:"dark-inverted"},wa=v("h3",{class:"dark-inverted"},"Completed Tasks",-1),ga=v("p",null," The worker has done his job on these tasks and assure by the manager ",-1),ja={class:"columns is-multiline"},xa={class:"list-flex-toolbar is-reversed"},Ta={class:"tabs-inner"},Ca={class:"tabs is-boxed"},Ia=[v("span",null,"Cards View",-1)],Ma=[v("span",null,"Calendar View",-1)],Da=[v("span",null,"Today Tasks",-1)],Aa=v("li",{class:"tab-naver"},null,-1),Pa={class:"column is-12"},Na={key:0,class:"column is-12"},Oa={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},Ua={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},Ha={style:{"margin-top":"8px","padding-right":"10px"}},Ka={key:1,class:"column is-12"},Sa=i({__name:"IbexWorkerProfile",setup(i){const Sa=A(),Va=D(),Wa=M(),Fa=n(),Ra=o([]);d();const $a=o(""),La=o(!1),Ba=o("cards"),Ea=o(""),qa=o(!1),za=o({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});o(!1),o("all"),o("");const Ga=o(!1),Ja=o([]),Ya=o([]),Za=o([]),Qa=o([]),Xa=o({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),ae=o({plugins:[I],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),ee=async()=>{try{Ga.value=!0;const a=await Wa.get(`/api/users/${Fa.params.id?Fa.params.id:Sa.user.id}`);za.value=a.data,Ga.value=!1}catch(a){console.log(a)}},se=o({});return c((async()=>{await ee(),await(async()=>{try{const a=await Wa.get(`/api/task/${Fa.params.id?Fa.params.id:Sa.user.id}/worker-tasks/`);Ja.value=a.data,console.log("worker tasks",Ja.value)}catch(a){Ja.value=[]}})(),(async(a=!1)=>{try{const e=await Wa.get(`/api/task/worker-today/${Fa.params.id?Fa.params.id:Sa.user.id}/`);se.value=e.data,a&&Va.green("Tasks list Refreshed")}catch(e){console.log(e)}})(),Ra.value=Ja.value.map((a=>({id:a.id,resourceId:a.project.id,start:a.startDate,end:a.endDate,title:a.title,color:a.color,description:a.description,workers:a.workers,borderColor:Xa[a.status],status:a.status}))),Qa.value=Ja.value.map((a=>({id:a.project.id,start:a.project.startDate,end:a.project.endDate,title:a.project.title,address:a.project.address,status:a.project.status,color:Xa[a.project.status]}))),Ya.value=Qa.value,Za.value=Ra.value,ae.value={...ae.value,resources:Ya.value,events:Za.value},console.log("tasks",ae.value.events,"resources",ae.value.resources)})),(i,n)=>{const o=r,d=t,c=l,I=s,M=e,D=a;return u(),p("div",P,[v("div",N,[v("div",O,[m(o,{size:"xl",squared:"",picture:h(za).avatar,alt:""},null,8,["picture"])]),v("div",U,[v("h3",null,[y(k(h(za)?.username)+" ",1),v("i",{onClick:n[0]||(n[0]=a=>((a="")=>{$a.value=a,La.value=!0})(h(za).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),v("div",H,[v("div",K,[S,v("span",null,k(h(za)?.role),1)]),v("div",V,[W,v("span",null,k(h(za)?.is_active?"Active":" In-Active"),1)]),v("div",F,[R,v("span",null,k(h(za)?.phoneNumber?h(za)?.phoneNumber:"N/A"),1)]),v("div",$,[L,v("span",null,k(h(za)?.email),1)]),v("div",B,[E,v("span",null,k(h(za).is_sentMail?"On":"Off"),1)]),v("div",q,[z,v("span",null,[v("i",{onClick:n[1]||(n[1]=a=>{return e=h(za).id,Ea.value=e,void(qa.value=!0);var e}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),v("div",G,[v("div",J,[v("div",Y,[v("div",Z,[m(d,{color:"primary"},{default:f((()=>[Q])),_:1}),v("h4",null,[v("span",X,k(h(se)?.stats?.pending+h(se)?.stats?.active+h(se)?.stats?.active),1)])]),aa,ea])]),v("div",sa,[v("div",la,[v("div",ta,[m(d,{color:"primary"},{default:f((()=>[ra])),_:1}),v("h4",null,[v("span",ia,k(h(se)?.stats?.active?h(se)?.stats?.active:0),1)])]),na,oa])]),v("div",da,[v("div",ca,[v("div",ua,[m(d,{color:"primary"},{default:f((()=>[pa])),_:1}),v("h4",null,[v("span",va,k(h(se)?.stats?.pending?h(se)?.stats?.pending:0),1)])]),ma,ha])]),v("div",ya,[v("div",ka,[v("div",fa,[m(d,{color:"primary"},{default:f((()=>[_a])),_:1}),v("h4",null,[v("span",ba,k(h(se)?.stats?.completed?h(se)?.stats?.completed:0),1)])]),wa,ga])])]),v("div",ja,[v("div",xa,[v("div",Ta,[v("div",Ca,[v("ul",null,[v("li",{class:_(["cards"===h(Ba)&&"is-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:n[2]||(n[2]=b(T((a=>Ba.value="cards"),["prevent"]),["space"])),onClick:n[3]||(n[3]=a=>Ba.value="cards")},Ia,32)],2),v("li",{class:_(["calendar"===h(Ba)&&"is-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:n[4]||(n[4]=b(T((a=>Ba.value="calendar"),["prevent"]),["space"])),onClick:n[5]||(n[5]=a=>Ba.value="calendar")},Ma,32)],2),v("li",{class:_(["today"===h(Ba)&&"is-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:n[6]||(n[6]=b(T((a=>Ba.value="today"),["prevent"]),["space"])),onClick:n[7]||(n[7]=a=>Ba.value="today")},Da,32)],2),Aa])])])]),w(v("div",Pa,[m(c,{workerId:h(Fa).params.id},null,8,["workerId"])],512),[[g,"cards"==h(Ba)]]),"calendar"==h(Ba)?(u(),p("div",Na,[m(h(C),{options:h(ae)},{eventContent:f((a=>[v("div",Oa,[v("p",Ua,k(a.event.title),1),v("div",null,[v("p",Ha,k(new Date(a.event.start).toDateString())+" to "+k(new Date(a.event.end).toDateString()),1)])])])),_:1},8,["options"])])):j("",!0),"today"==h(Ba)?(u(),p("div",Ka,[m(I,{workerId:h(Fa).params.id},null,8,["workerId"])])):j("",!0)]),h(qa)?(u(),x(M,{key:0,isModalOpen:h(qa),userId:h(Ea),"onUpdate:closeModalHandler":n[8]||(n[8]=a=>qa.value=!1)},null,8,["isModalOpen","userId"])):j("",!0),h(La)?(u(),x(D,{key:1,isModalOpen:h(La),userId:h($a),userRole:"worker","onUpdate:closeModalHandler":n[9]||(n[9]=a=>La.value=!1),"onUpdate:actionUpdateHandler":ee},null,8,["isModalOpen","userId"])):j("",!0)])}}});export{Sa as _};
