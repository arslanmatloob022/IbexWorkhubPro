import{_ as e}from"./VInput.vue_vue_type_script_setup_true_lang-75429723.js";import{e as a,r as s,o as l,M as t,y as i,z as n,C as o,K as c,A as r,B as u,l as d,J as p,S as m,T as v,D as _,j as f,P as y,E as b,v as h,H as g,ak as x}from"./index-65b35415.js";import{_ as k}from"./VTextarea.vue_vue_type_script_setup_true_lang-7fe7de68.js";import{_ as V}from"./VField.vue_vue_type_script_setup_true_lang-6fd35cda.js";import{_ as j}from"./VControl-81f84a2a.js";import{_ as w}from"./VAvatar.vue_vue_type_style_index_0_lang-3bd61442.js";import{u as C}from"./useAPI-1abe7b0e.js";import{u as P}from"./useNotyf-ff3fadda.js";import{u as S}from"./viewWrapper-f3d870d2.js";import{b as A}from"./route-block-83d24a4e.js";import"./useVFieldContext-1662f348.js";import"./VLabel.vue_vue_type_script_setup_true_lang-e5497c47.js";import"./userSession-52cfbd7f.js";import"./notyf-2f82df42.js";import"./useThemeColors-9a70ae00.js";const z={class:"banking-dashboard banking-dashboard-v1"},I={class:"columns is-multiline"},T={class:"column is-12"},U={class:"columns is-multiline"},q={class:"column is-6"},D={class:"dashboard-card is-contacts"},F=o("div",{class:"title-wrap"},[o("h3",{class:"dark-inverted"},"Create link")],-1),M=["onSubmit"],N={class:"transfer-form"},L=o("label",{for:""}," Client",-1),O={class:"multiselect-single-label"},B={class:"select-label-text"},E={class:"select-label-text"},H={class:"field column is-12"},J=o("label",null,"Amount *",-1),K={class:"field has-addons"},Q={class:"field-addon-body"},W=o("div",{class:"control"},[o("span",{class:"select currency-select"},[o("select",null,[o("option",null,"$")])])],-1),$={class:"control is-expanded"},G={class:"field"},R=o("label",null,"Description *",-1),X={class:"submit-wrap mt-5"},Y={class:"column is-6"},Z={class:"dashboard-card"},ee=o("div",{class:"title-wrap"},[o("h3",{class:"dark-inverted"},"Payment links")],-1),ae={key:0,class:"context-text"},se=a({__name:"IbexPaymentModule",setup(a){const h=C(),g=P(),x=s({amount:"",description:"",client:"",type:"Stripe"});s(!1),s({payments:[],count:0});const S=s(""),A=s([]),se=s(!1),le=s(!1),te=async()=>{try{le.value=!0;const e=await h.post("/api/paypal/stripe-session/",{amount:x.value.amount,description:x.value.description,client:x.value.client});S.value=e.data.url,g.success("link Created")}catch(e){g.success("Something went wrong")}finally{le.value=!1}};return l((()=>{(async()=>{try{se.value=!0;const e=await h.get("/api/users/by-role/client/",{});A.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{se.value=!1}})()})),(a,s)=>{const l=w,h=t("Multiselect"),C=j,P=V,se=k,ie=b,ne=e;return i(),n("div",z,[o("div",I,[o("div",T,[o("div",U,[o("div",q,[o("div",D,[F,o("form",{action:"",onSubmit:c(te,["prevent"])},[o("div",N,[r(P,{class:"is-image-select has-curved-images"},{default:u((()=>[L,r(C,null,{default:u((()=>[r(h,{modelValue:d(x).client,"onUpdate:modelValue":s[0]||(s[0]=e=>d(x).client=e),placeholder:"Select a client",label:"name","max-height":145,options:d(A)},{singlelabel:u((({value:e})=>[o("div",O,[r(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),o("span",B,p(e.name),1)])])),option:u((({option:e})=>[r(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),o("span",E,p(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),o("div",H,[J,o("div",K,[o("div",Q,[W,o("div",$,[m(o("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>d(x).amount=e),required:"",min:"2",class:"input",type:"number",placeholder:"Amount of money"},null,512),[[v,d(x).amount]])])])])]),o("div",G,[R,r(P,null,{default:u((()=>[r(C,null,{default:u((()=>[r(se,{required:"",modelValue:d(x).description,"onUpdate:modelValue":s[2]||(s[2]=e=>d(x).description=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})]),o("div",X,[r(ie,{type:"submit",color:"info",size:"big",fullwidth:"",loading:d(le),raised:"",bold:""},{default:u((()=>[_(" Create Payment link ")])),_:1},8,["loading"])])])],40,M)])]),o("div",Y,[o("div",Z,[ee,r(P,{label:"Checkout link",addons:""},{default:u((()=>[r(C,{expanded:""},{default:u((()=>[r(ne,{type:"text",modelValue:d(S),"onUpdate:modelValue":s[3]||(s[3]=e=>f(S)?S.value=e:null),class:"input",placeholder:"link..."},null,8,["modelValue"])])),_:1}),r(C,null,{default:u((()=>[r(ie,{icon:"fas fa-copy",onClick:s[4]||(s[4]=e=>{var a;(a=d(S))?navigator.clipboard.writeText(a).then((()=>{g.success("Link copied to clipboard!")})).catch((e=>{g.error("Failed to copy the link: ",e)})):g.error("No link to copy!")}),class:"cu-pointer",color:"primary"},{default:u((()=>[_(" Copy ")])),_:1})])),_:1})])),_:1}),d(S)?(i(),n("p",ae," payment link has been successfully created ")):y("",!0)])])])])])])}}}),le={class:"page-content-inner"},te=o("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),ie=a({__name:"index",setup:e=>(S().setPageTitle("Ibex Payment"),h({title:"Ibex Payment"}),(e,a)=>{const s=se;return i(),n("div",le,[(i(),g(x,{to:"[data-teleport-bg]"},[te])),r(s,{class:"has-navbar-spacing"})])})});"function"==typeof A&&A(ie);export{ie as default};
