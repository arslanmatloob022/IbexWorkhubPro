import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-3f0528c5.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-5e2cf63c.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-5f17ceed.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-7de23e01.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-5b077db7.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-cdfe0fea.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-ace8a337.js";import{_ as c}from"./VInput.vue_vue_type_script_setup_true_lang-c5fd1e7f.js";import{_ as d}from"./VControl-cb752f31.js";import{f as u,b as r,r as p,w as m,$ as v,o as f,av as h,C as _,D as y,E as g,F as b,G as k,K as w,U as x,L as j,X as C,N as V,aS as S,m as T,O as U,V as I,W as A,P as F,al as D,Q as M,R as O,S as P,B as E,J as $,I as R,x as N,H,k as B,aB as J,y as z}from"./index-c248f021.js";import{_ as K,a as q}from"./search-4-dark-2b5b440c.js";import{u as G}from"./useAPI-31470477.js";import{u as W}from"./useNotyf-f5fc9944.js";import{_ as Z}from"./ExcelFileEditor-77f0b5d8.js";import{d as Q,a as X,C as Y,f as ee}from"./useSupportElement-2c8f0867.js";import{_ as le}from"./VModal.vue_vue_type_style_index_0_lang-ee3b98f5.js";import{_ as ae}from"./VLabel.vue_vue_type_script_setup_true_lang-e701a81c.js";import{_ as te}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-7cf92fe7.js";import{_ as se,a as ie}from"./ProjectFiles-d8fc40f2.js";import{u as ne,_ as oe,a as ce}from"./groupedCircleCharts-19cf0c9b.js";import{b as de,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-e69a1de4.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-9f4256ab.js";import{A as fe}from"./vue3-apexcharts.common-6106c941.js";import{u as he}from"./salesSparksChart-f4a09804.js";import{u as _e}from"./revenueAreaChart-c2a78824.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-7f0bab1d.js";import{h as ge}from"./moment-1b9a430c.js";import{_ as be}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-5926d815.js";import{p as ke}from"./index-c1fc2d09.js";import{a as we}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-2f02159a.js";import{_ as xe}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-5636353d.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-96e8d856.js";import{o as Ce}from"./via-placeholder-24645670.js";import{_ as Ve}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-352e1775.js";import{_ as Se}from"./SweetAlert.vue_vue_type_style_index_0_lang-262e0ee0.js";import{_ as Te}from"./VDropdown.vue_vue_type_style_index_0_lang-c603ac0c.js";import{_ as Ue}from"./VPlyr.vue_vue_type_style_index_0_lang-30ce451b.js";import{_ as Ie}from"./VIconBox.vue_vue_type_style_index_0_lang-ab080ef4.js";import{f as Ae}from"./index-5fa9b154.js";import{_ as Fe}from"./UIWidget.vue_vue_type_style_index_0_lang-6cf6873d.js";import{_ as De}from"./JobTodos.vue_vue_type_style_index_0_lang-f64a79cd.js";import{_ as Me}from"./UserCardDropdown-0adf3dde.js";import{_ as Oe}from"./VTag.vue_vue_type_style_index_0_lang-7083000e.js";import{_ as Pe}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-1ef9487a.js";const Ee=e=>(M("data-v-6b746c41"),e=e(),O(),e),$e={class:"column is-12"},Le={class:"list-flex-toolbar is-reversed"},Re={class:"columns is-multiline"},Ne={key:0,class:"column is-12 card p-4 curved mb-2"},He={class:"columns is-multiline"},Be={class:"column is-10"},Je={class:"column is-2"},ze=Ee((()=>g("img",{class:"light-image",src:K,alt:""},null,-1))),Ke=Ee((()=>g("img",{class:"dark-image",src:q,alt:""},null,-1))),qe={key:0,class:"column is-12 card p-4 curved mb-2"},Ge={class:"columns is-multiline"},We={class:"column is-10"},Ze={class:"column is-2"},Qe={class:"is-flex space-between mb-4 bottom-border"},Xe={class:"title is-5 m-0"},Ye={class:"content"},el={class:"is-flex"},ll={key:0,class:"columns is-multiline"},al={class:"column is-6"},tl={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},nl={class:"column is-2"},ol={class:"column is-2"},cl={class:"column is-2"},dl={class:"column is-2"},ul={class:"column is-2"},rl={class:"column is-2"},pl={class:"is-flex columns is-multiline"},ml=u({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const u=e;r();const M=G(),O=W(),P=p(!1),E={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},$=p(!1),L=p(!1),R=p(!1),N=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),H=p(""),B=p(""),J=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),z=p({title:"",is_template:!1,object:u.objectId??"",description:""}),K=p({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await M.get(`/api/calculation-section/?object=${u.objectId??""}&user_id=${u.userId??""}&is_template=${u.fetchTemplates??""}`);N.value=e.data}catch(e){console.error(e)}finally{P.value=!1}},Z=async()=>{try{const e=z.value;await M.post("/api/calculation-section/",e);O.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{P.value=!1}};m((()=>J.value.width),(()=>{let e=0;e=J.value.height*J.value.width,J.value.item_area=e.toFixed(2)})),m((()=>J.value.item_unit_price),(()=>{let e=0;e=J.value.item_area*J.value.item_unit_price,J.value.item_total_price=e.toFixed(2)})),m((()=>J.value.quantity),(()=>{let e=0;e=J.value.item_total_price*J.value.quantity,J.value.grand_total_price=e.toFixed(2)}));const X=async()=>{try{const e=J.value;e.section=H.value;await M.post("/api/calculation-section-items/",e);O.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{P.value=!1}},Y=v((()=>{if(B.value){const e=new RegExp(B.value,"i");return N.value.filter((l=>l.title?.match(e)))}return N.value})),ee=async e=>{try{await M.delete(`/api/calculation-section/${e}/`),O.success("Section deleted successfully!"),q()}catch(l){console.error(l),O.error("Failed to delete sheet.")}};return f((async()=>{await q(),await q()})),(e,u)=>{const r=F,p=D,m=d,v=c,f=o,M=n,O=i,P=s,N=t,q=l,G=a,W=h("tooltip");return _(),y("div",$e,[g("div",Le,[b(p,null,{default:k((()=>[b(r,{icon:L.value?"fas fa-window-close":"fas fa-plus",color:L.value?"warning":"primary",class:"ml-2",raised:"",onClick:u[0]||(u[0]=e=>L.value=!L.value)},{default:k((()=>[w(x(L.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:u[1]||(u[1]=e=>L.value=!L.value)},{default:k((()=>[w("Import")])),_:1})])),_:1}),g("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>B.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,B.value]])])),_:1})])]),g("div",Re,[b(S,{name:"translate-page-y"},{default:k((()=>[L.value?(_(),y("div",Ne,[g("div",He,[g("div",Be,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":u[3]||(u[3]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(M,{modelValue:z.value.description,"onUpdate:modelValue":u[4]||(u[4]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Je,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:Z},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(O,{modelValue:z.value.is_template,"onUpdate:modelValue":u[5]||(u[5]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),T(Y).length?V("",!0):(_(),U(P,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[ze,Ke])),_:1})),b(S,{name:"translate-page-y"},{default:k((()=>[R.value?(_(),y("div",qe,[g("div",Ge,[g("div",We,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:K.value.title,"onUpdate:modelValue":u[6]||(u[6]=e=>K.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(M,{modelValue:K.value.description,"onUpdate:modelValue":u[7]||(u[7]=e=>K.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ze,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:Z},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(O,{modelValue:K.value.is_template,"onUpdate:modelValue":u[8]||(u[8]=e=>K.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),b(S,{name:"from-bottom"},{default:k((()=>[T(Y).length?(_(!0),y(I,{key:0},A(T(Y),((e,l)=>(_(),y("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[g("div",Qe,[g("div",null,[g("h4",Xe,x(e.title),1),g("div",Ye,[g("p",null,x(T(Q)(e.created_at)),1)])]),g("div",el,[b(N,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),j(b(N,{icon:"fas fa-plus",color:$.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{H.value=e,$.value=!$.value,0==$.value&&(J.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[W,"Add Item",void 0,{rounded:!0,primary:!0}]]),j(b(N,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[W,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(N,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),$.value?(_(),y("div",ll,[g("div",al,[b(f,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":u[9]||(u[9]=e=>J.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",tl,[b(f,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.height,"onUpdate:modelValue":u[10]||(u[10]=e=>J.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",sl,[b(f,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.width,"onUpdate:modelValue":u[11]||(u[11]=e=>J.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",il,[b(f,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_area,"onUpdate:modelValue":u[12]||(u[12]=e=>J.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",nl,[b(f,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.unit,"onUpdate:modelValue":u[13]||(u[13]=e=>J.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ol,[b(f,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_unit_price,"onUpdate:modelValue":u[14]||(u[14]=e=>J.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",cl,[b(f,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_total_price,"onUpdate:modelValue":u[15]||(u[15]=e=>J.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",dl,[b(f,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.quantity,"onUpdate:modelValue":u[16]||(u[16]=e=>J.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ul,[b(f,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.grand_total_price,"onUpdate:modelValue":u[17]||(u[17]=e=>J.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",rl,[b(r,{light:"",fullwidth:"",onClick:X,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[w("Add Item")])),_:1})])])):V("",!0),g("div",pl,[e.items.length?(_(),U(G,{key:0,class:"column is-12",data:e.items,columns:E,compact:""},{body:k((()=>[b(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(_(!0),y(I,null,A(e.items,(e=>(_(),y("div",{key:e.id,class:"flex-table-item"},[b(q,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,{column:{align:"end"}},{default:k((()=>[b(N,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(N,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):V("",!0)])])))),128)):V("",!0)])),_:1})])])}}}),vl=P(ml,[["__scopeId","data-v-6b746c41"]]),fl=e=>(M("data-v-ce90a5fa"),e=e(),O(),e),hl={key:1},_l={class:"columns is-multiline"},yl={class:"list-flex-toolbar is-reversed column is-12"},gl={class:"multiselect-single-label"},bl=["src"],kl=["src"],wl={class:"is-flex"},xl={class:"card p-4 curved is-flex space-between"},jl={class:"subtitle is-5 m-0"},Cl={class:"content"},Vl={class:"is-flex"},Sl={key:1},Tl=fl((()=>g("h1",{class:"title is-4"},"No File Uploaded",-1))),Ul=[Tl],Il={class:"modal-form columns is-multiline"},Al={class:"file has-name"},Fl={class:"file-label"},Dl=fl((()=>g("span",{class:"file-cta"},[g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})]),g("span",{class:"file-label"}," Choose a file… ")],-1))),Ml={class:"file-name light-text"},Ol=u({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;r(),p(null);const a=G(),s=W(),i=p(!1);p([[""]]);const n=p([]),u=p([]),h=p(""),S=p(!1);p("");const M=p("");p("");const O=p(!1),P=p(0),L=p({file:"",title:"",object:l.objectId}),R=e=>{let l=e.target.files[0];L.value.file=l,M.value=l.name,L.value.title=l.name},N=p(""),H=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),B=async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/?object=${l.objectId}`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}},J=(e="")=>{P.value=e,O.value=!0},z=p(!1),K=async()=>{try{z.value=!0;const e=X(L.value,[""]);await a.post("/api/excel-files/upload-excel/",e);B(),s.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,S.value=!1}};m((()=>N.value),(e=>{e&&(async e=>{try{z.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),s.success("Sheet create successfully"),B()}catch(l){console.error(l)}finally{z.value=!1,S.value=!1}})(e)}));p("excel");const q=v((()=>{if(h.value){const e=new RegExp(h.value,"i");return n.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return n.value.filter((e=>0==e.is_template))}));return v((()=>{if(h.value){const e=new RegExp(h.value,"i");return u.value.filter((l=>l.title?.match(e)))}return u.value})),f((async()=>{l.fetchAll&&await B(),l.userId&&(async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}})(),(async()=>{try{i.value=!0;const e=await a.get("/api/excel-files/templates/");u.value=e.data,H.value=u.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{i.value=!1}})(),await B()})),(e,n)=>{const u=te,r=E("Multiselect"),p=d,m=o,v=F,f=D,z=t,G=Z,W=ae,X=c,Y=le;return i.value?(_(),U(u,{key:0})):(_(),y("div",hl,[g("div",_l,[g("div",yl,[b(f,null,{default:k((()=>[b(m,{style:{width:"260px"}},{default:k((({id:e})=>[b(p,null,{default:k((()=>[b(r,{modelValue:N.value,"onUpdate:modelValue":n[0]||(n[0]=e=>N.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:H.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[g("div",gl,[g("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,bl),w(" "+x(e.name),1)])])),option:k((({option:e})=>[g("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,kl),w(" "+x(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(v,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:n[1]||(n[1]=e=>J())},{default:k((()=>[w("New Sheet")])),_:1}),b(v,{icon:"fas fa-upload",raised:"",light:"",onClick:n[2]||(n[2]=e=>S.value=!S.value),outlined:"",color:"primary"},{default:k((()=>[w(" File ")])),_:1})])),_:1}),g("div",wl,[b(p,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>h.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,h.value]])])),_:1})])]),T(q).length?(_(!0),y(I,{key:0},A(T(q),((e,l)=>(_(),y("div",{class:"column is-6",key:e.id},[g("div",xl,[g("div",null,[g("h4",jl,x(e.title),1),g("div",Cl,[g("p",null,x(T(Q)(e.created_at)),1)])]),g("div",Vl,[b(z,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>J(e.id),"has-background":""},null,8,["onClick"]),b(z,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),s.success("Sheet deleted successfully!"),B()}catch(l){console.error(l),s.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(_(),y("div",Sl,Ul))]),O.value?(_(),U(G,{key:0,class:"fullscreen","excel-file-modal":O.value,fileId:P.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":n[4]||(n[4]=e=>{O.value=!1,B()})},null,8,["excel-file-modal","fileId","object-id"])):V("",!0),b(Y,{is:"form",open:S.value,title:"Upload Task File",size:"medium",actions:"right",onClose:n[7]||(n[7]=e=>S.value=!1),onSubmit:$(K,["prevent"])},{content:k((()=>[g("div",Il,[b(m,{class:"column is-12"},{default:k((()=>[b(W,null,{default:k((()=>[w("File Title")])),_:1}),b(p,null,{default:k((()=>[b(X,{modelValue:L.value.title,"onUpdate:modelValue":n[5]||(n[5]=e=>L.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(m,{class:"column is-12",grouped:""},{default:k((()=>[b(p,null,{default:k((()=>[g("div",Al,[g("label",Fl,[g("input",{onChange:R,class:"file-input",type:"file",name:"file",required:""},null,32),Dl,g("span",Ml,x(M.value?M.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(v,{onClick:n[6]||(n[6]=e=>S.value=!1),raised:""},{default:k((()=>[w("Close")])),_:1})])),action:k((()=>[b(v,{type:"submit",color:"primary",raised:""},{default:k((()=>[w("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Pl=P(Ol,[["__scopeId","data-v-ce90a5fa"]]),El={class:"columns is-multiline"},$l={class:"column is-3"},Ll={class:"column is-3"},Rl={class:"column is-3"},Nl={class:"column is-3"},Hl={class:"column is-6"},Bl={class:"column is-6"},Jl={class:"column is-6"},zl={class:"column is-6"},Kl={class:"column is-6"},ql={class:"column is-6"},Gl=u({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=he(),{revenueOptions:i}=_e(),{lineStatsChartOptions:n}=de(),{flexRadialChartCircleOptions:o}=ue(),{flexRadialChartStripesOptions:c}=re(),{widgetGaugeGroup1Options:d,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ne();return(e,f)=>{const h=ve,w=me,x=oe,j=ce;return _(),y("div",El,[g("div",$l,[b(h,{straight:""},{default:k((()=>[b(T(fe),{id:"widget-spark1",height:T(l).chart.height,type:T(l).chart.type,series:T(l).series,options:T(l)},null,8,["height","type","series","options"])])),_:1})]),g("div",Ll,[b(h,{straight:""},{default:k((()=>[b(T(fe),{id:"widget-spark2",height:T(a).chart.height,type:T(a).chart.type,series:T(a).series,options:T(a)},null,8,["height","type","series","options"])])),_:1})]),g("div",Rl,[b(h,{straight:""},{default:k((()=>[b(T(fe),{id:"widget-spark3",height:T(t).chart.height,type:T(t).chart.type,series:T(t).series,options:T(t)},null,8,["height","type","series","options"])])),_:1})]),g("div",Nl,[b(h,{straight:""},{default:k((()=>[b(T(fe),{id:"widget-spark4",height:T(s).chart.height,type:T(s).chart.type,series:T(s).series,options:T(s)},null,8,["height","type","series","options"])])),_:1})]),g("div",Hl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(T(fe),{id:"line-stats-widget-chart",height:T(n).chart.height,type:T(n).chart.type,series:T(n).series,options:T(n)},null,8,["height","type","series","options"])])),_:1})]),g("div",Bl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(T(fe),{id:"line-stats-area-chart",height:T(i).chart.height,type:T(i).chart.type,series:T(i).series,options:T(i)},null,8,["height","type","series","options"])])),_:1})]),g("div",Jl,[b(x,{title:"Sales Revenue",straight:""},{default:k((()=>[b(T(fe),{id:"flex-stat-circle",height:T(o).chart.height,type:T(o).chart.type,series:T(o).series,options:T(o)},null,8,["height","type","series","options"])])),_:1})]),g("div",zl,[b(x,{title:"Sales Revenue",straight:""},{default:k((()=>[b(T(fe),{id:"flex-stat-radial",height:T(c).chart.height,type:T(c).chart.type,series:T(c).series,options:T(c)},null,8,["height","type","series","options"])])),_:1})]),g("div",Kl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(T(fe),{id:"group-radial-1",height:T(p).chart.height,type:T(p).chart.type,series:T(p).series,options:T(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(T(fe),{id:"group-radial-2",height:T(m).chart.height,type:T(m).chart.type,series:T(m).series,options:T(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(T(fe),{id:"group-radial-3",height:T(v).chart.height,type:T(v).chart.type,series:T(v).series,options:T(v)},null,8,["height","type","series","options"])])),_:1})]),g("div",ql,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(T(fe),{id:"group-gauge-1",height:T(d).chart.height,type:T(d).chart.type,series:T(d).series,options:T(d)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(T(fe),{id:"group-gauge-2",height:T(u).chart.height,type:T(u).chart.type,series:T(u).series,options:T(u)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(T(fe),{id:"group-gauge-3",height:T(r).chart.height,type:T(r).chart.type,series:T(r).series,options:T(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Wl=e=>(M("data-v-1f68036b"),e=e(),O(),e),Zl={class:"timeline-wrapper"},Ql=Wl((()=>g("div",{class:"timeline-header"},null,-1))),Xl={class:"timeline-wrapper-inner"},Yl={class:"timeline-container"},ea={class:"timeline-item is-unread"},la={class:"date"},aa={class:"content-wrap"},ta={class:"content-box"},sa=Wl((()=>g("div",{class:"status"},null,-1))),ia={class:"box-text"},na={class:"meta-text"},oa=["innerHTML"],ca=u({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=G(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=ye;return _(),y("div",Zl,[Ql,g("div",Xl,[g("div",Yl,[(_(!0),y(I,null,A(T(t),(e=>(_(),y("div",ea,[g("div",la,[g("span",null,x(T(ge)(e.timestamp).format("ddd, mm yyyy")),1)]),g("div",{class:R(["dot",s[e.action]])},null,2),g("div",aa,[g("div",ta,[sa,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),g("div",ia,[g("div",na,[g("p",null,[g("span",null,x(e.actor_info?.username??"N/A")+" "+x(e.actor_info?.last_name??"N/A"),1),g("span",{class:"log-message",innerHTML:e.message},null,8,oa)]),g("span",null,x(T(ge)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),da=P(ca,[["__scopeId","data-v-1f68036b"]]),ua={class:"table is-striped is-fullwidth"},ra=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Job"),g("th",{scope:"col"},"ID"),g("th",{scope:"col"},"Title"),g("th",{scope:"col"},"Status"),g("th",{scope:"col"},"Total Price"),g("th",{scope:"col"},"Total Tax"),g("th",{scope:"col"},"Amount Paid"),g("th",{scope:"col"},"Balance"),g("th",{scope:"col"},"Deadline"),g("th",{scope:"col"},"Date Paid"),g("th",{scope:"col"},"Files"),g("th",{scope:"col",class:"is-end"},"Actions")])],-1),pa=g("td",null,"Tina",-1),ma=g("td",null,"Bergmann",-1),va=g("td",null,"Sales",-1),fa=g("td",null,"Tina",-1),ha=g("td",null,"Bergmann",-1),_a=g("td",null,"Sales",-1),ya=g("td",null,"Tina",-1),ga=g("td",null,"Bergmann",-1),ba=g("td",null,"Sales",-1),ka=g("td",null,"Bergmann",-1),wa=g("td",null,"Sales",-1),xa={class:"is-end"},ja={class:"is-flex is-justify-content-flex-end"},Ca=g("td",null,"Tina",-1),Va=g("td",null,"Bergmann",-1),Sa=g("td",null,"Sales",-1),Ta=g("td",null,"Tina",-1),Ua=g("td",null,"Bergmann",-1),Ia=g("td",null,"Sales",-1),Aa=g("td",null,"Tina",-1),Fa=g("td",null,"Bergmann",-1),Da=g("td",null,"Sales",-1),Ma=g("td",null,"Bergmann",-1),Oa=g("td",null,"Sales",-1),Pa={class:"is-end"},Ea={class:"is-flex is-justify-content-flex-end"},$a=g("td",null,"Tina",-1),La=g("td",null,"Bergmann",-1),Ra=g("td",null,"Sales",-1),Na=g("td",null,"Tina",-1),Ha=g("td",null,"Bergmann",-1),Ba=g("td",null,"Sales",-1),Ja=g("td",null,"Tina",-1),za=g("td",null,"Bergmann",-1),Ka=g("td",null,"Sales",-1),qa=g("td",null,"Bergmann",-1),Ga=g("td",null,"Sales",-1),Wa={class:"is-end"},Za={class:"is-flex is-justify-content-flex-end"},Qa=g("td",null,"Tina",-1),Xa=g("td",null,"Bergmann",-1),Ya=g("td",null,"Sales",-1),et=g("td",null,"Tina",-1),lt=g("td",null,"Bergmann",-1),at=g("td",null,"Sales",-1),tt=g("td",null,"Tina",-1),st=g("td",null,"Bergmann",-1),it=g("td",null,"Sales",-1),nt=g("td",null,"Bergmann",-1),ot=g("td",null,"Sales",-1),ct={class:"is-end"},dt={class:"is-flex is-justify-content-flex-end"},ut=u({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;N();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=be;return _(),y("table",ua,[ra,g("tbody",null,[g("tr",null,[pa,ma,va,fa,ha,_a,ya,ga,ba,ka,wa,g("td",xa,[g("div",ja,[b(a)])])]),g("tr",null,[Ca,Va,Sa,Ta,Ua,Ia,Aa,Fa,Da,Ma,Oa,g("td",Pa,[g("div",Ea,[b(a)])])]),g("tr",null,[$a,La,Ra,Na,Ha,Ba,Ja,za,Ka,qa,Ga,g("td",Wa,[g("div",Za,[b(a)])])]),g("tr",null,[Qa,Xa,Ya,et,lt,at,tt,st,it,nt,ot,g("td",ct,[g("div",dt,[b(a)])])])])])}}}),rt={class:"table is-striped is-fullwidth"},pt=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"First Name"),g("th",{scope:"col"},"Last Name"),g("th",{scope:"col"},"Position"),g("th",{scope:"col",class:"is-end"},[g("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),mt=g("td",null,"Tina",-1),vt=g("td",null,"Bergmann",-1),ft=g("td",null,"Head of Sales",-1),ht={class:"is-end"},_t={class:"is-flex is-justify-content-flex-end"},yt=g("td",null,"John",-1),gt=g("td",null,"Wistmus",-1),bt=g("td",null,"Senior Executive",-1),kt={class:"is-end"},wt={class:"is-flex is-justify-content-flex-end"},xt=g("td",null,"Sam",-1),jt=g("td",null,"Watson",-1),Ct=g("td",null,"Software Engineer",-1),Vt={class:"is-end"},St={class:"is-flex is-justify-content-flex-end"},Tt=g("td",null,"Jolaine",-1),Ut=g("td",null,"Joestar",-1),It=g("td",null,"HR Manager",-1),At={class:"is-end"},Ft={class:"is-flex is-justify-content-flex-end"},Dt=g("td",null,"Anders",-1),Mt=g("td",null,"Jensen",-1),Ot=g("td",null,"Accountant",-1),Pt={class:"is-end"},Et={class:"is-flex is-justify-content-flex-end"},$t=u({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;N();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=be;return _(),y("table",rt,[pt,g("tbody",null,[g("tr",null,[mt,vt,ft,g("td",ht,[g("div",_t,[b(a)])])]),g("tr",null,[yt,gt,bt,g("td",kt,[g("div",wt,[b(a)])])]),g("tr",null,[xt,jt,Ct,g("td",Vt,[g("div",St,[b(a)])])]),g("tr",null,[Tt,Ut,It,g("td",At,[g("div",Ft,[b(a)])])]),g("tr",null,[Dt,Mt,Ot,g("td",Pt,[g("div",Et,[b(a)])])])])])}}}),Lt={class:"columns is-multiline"},Rt={class:"column is-12"},Nt={class:"toolbar"},Ht={class:"tabs-inner"},Bt={class:"tabs"},Jt=g("span",null,"Estimate",-1),zt=[Jt],Kt=g("span",null,"Budget",-1),qt=[Kt],Gt=g("span",null,"Owner Invoice",-1),Wt=[Gt],Zt=g("li",{class:"tab-naver"},null,-1),Qt={key:0,class:"column is-12"},Xt={key:1,class:"column is-12"},Yt={key:2,class:"column is-12"},es=u({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;N();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=$t,s=ut;return _(),y("div",Lt,[g("div",Rt,[g("div",Nt,[g("div",Ht,[g("div",Bt,[g("ul",null,[g("li",{class:R(["estimate"===T(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},zt,32)],2),g("li",{class:R(["budget"===T(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H($((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},qt,32)],2),g("li",{class:R(["invoice"===T(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H($((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Wt,32)],2),Zt])])])])]),"estimate"===T(a)?(_(),y("div",Qt,[b(t)])):V("",!0),"budget"===T(a)?(_(),y("div",Xt)):V("",!0),"invoice"===T(a)?(_(),y("div",Yt,[b(s)])):V("",!0)])}}}),ls={class:"user-grid-toolbar"},as=g("span",{class:"icon"},[g("i",{class:"fas fa-plus"})],-1),ts=g("span",null,"Progress",-1),ss={class:"user-grid user-grid-v1"},is={class:"columns is-multiline"},ns={class:"grid-item"},os={class:"is-flex"},cs=u({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=d,n=E("Multiselect"),c=o,u=F,r=D,p=J,m=je,v=xe;return _(),y("div",null,[g("div",ls,[b(i,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>B(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(l)]])])),_:1}),b(r,null,{default:k((()=>[b(c,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:T(a),"onUpdate:modelValue":s[1]||(s[1]=e=>B(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,null,{default:k((()=>[as,ts])),_:1})])),_:1})]),g("div",ss,[g("div",is,[(_(),y(I,null,A(20,(e=>g("div",{key:e,class:"column is-3"},[g("div",ns,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),g("div",os,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ds={key:1},us={class:"card-grid-toolbar"},rs={class:"buttons"},ps=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ms=g("span",null,"Progress",-1),vs={class:"card-grid card-grid-v4"},fs=g("img",{class:"light-image",src:K,alt:""},null,-1),hs=g("img",{class:"dark-image",src:q,alt:""},null,-1),_s=["href","title"],ys=["src","alt"],gs={class:"card-grid-item-content"},bs={class:"dark-inverted"},ks={key:0},ws=g("summary",null,"Read More",-1),xs={key:0,class:"card-grid-item-footer"},js={class:"meta"},Cs={class:"dark-inverted"},Vs=u({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=G(),t=p(""),i=p(!1),n=p(!1),c=p(0),u=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const h=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return f((()=>{"job"===l.type&&m()})),(e,a)=>{const r=cs,p=d,v=E("Multiselect"),f=o,D=F,M=s,O=ye,P=we;return T(i)?(_(),U(r,{key:0})):(_(),y("div",ds,[g("div",us,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>B(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(t)]])])),_:1}),g("div",rs,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:T(c),"onUpdate:modelValue":a[1]||(a[1]=e=>B(c)?c.value=e:null),options:u,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(D,{onClick:a[2]||(a[2]=e=>n.value=!T(n)),color:"primary",raised:""},{default:k((()=>[ps,ms])),_:1})])]),g("div",vs,[b(M,{class:R([0!==T(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[fs,hs])),_:1},8,["class"]),b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(T(h),(e=>(_(),y("div",{key:e.id,class:"column is-3"},[g("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[g("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>T(Ce)(400,300))},null,40,ys),g("div",gs,[g("h3",bs,x(e.title?e.title:"No Title"),1),g("p",null,[w(x(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(_(),y("details",ks,[ws,w(" "+x(e.description?e.description:""),1)])):V("",!0)])]),e.uploaded_by_info?(_(),y("div",xs,[b(O,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),g("div",js,[g("span",Cs,x(e.uploaded_by_info.username??"N/A")+" "+x(e.uploaded_by_info.last_name??""),1),g("span",null,x(T(Q)(e.created_at)),1)])])):V("",!0)],8,_s)])))),128))])),_:1})]),T(n)?(_(),U(P,{key:0,job:l.object,openProgressModal:T(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):V("",!0)]))}}}),Ss={class:"columns is-multiline"},Ts={class:"column is-12"},Us={class:"column is-12"},Is=u({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},parent:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(!1),s=G(),i=W(),u=()=>{l("update:modalHandler",!1)},r=p({id:"",type:a.type,object:a.object,parent:a.parent,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),m=async()=>{try{t.value=!0;const e=X(r.value,[""]);e.append("value",r.value.title.replaceAll(" ","").toLocaleLowerCase());await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),u()}catch(e){console.log(e)}finally{t.value=!1}};return f((()=>{})),(e,l)=>{const s=c,i=d,p=o,v=n,f=F,h=le;return _(),U(h,{is:"form",open:a.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:$(m,["prevent"]),onClose:l[2]||(l[2]=e=>u())},{content:k((()=>[g("div",Ss,[g("div",Ts,[w(x(a.parent)+" ",1),b(p,{label:"Title *"},{default:k((()=>[b(i,null,{default:k((()=>[b(s,{modelValue:T(r).title,"onUpdate:modelValue":l[0]||(l[0]=e=>T(r).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Us,[b(p,{label:"Description (Optional)"},{default:k((()=>[b(i,null,{default:k((()=>[b(v,{modelValue:T(r).description,"onUpdate:modelValue":l[1]||(l[1]=e=>T(r).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:k((()=>[b(f,{loading:T(t),type:"submit",color:"warning",raised:""},{default:k((()=>[w("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),As={class:"modal-form columns is-multiline"},Fs={class:"column is-full"},Ds={class:"field"},Ms=g("label",{class:"label"},"Title ",-1),Os={class:"control"},Ps={class:"field column is-half"},Es={class:"file"},$s={class:"file-label"},Ls={class:"file-cta"},Rs=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Ns={class:"file-label"},Hs=u({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;p(null);const t=G(),s=W(),i=p(!1),n=r(),c=()=>{l("close:ModalHandler",!1)},u=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),m=async()=>{try{i.value=!0;const e=X(u.value,["file"]);await t.post("/api/attachment/",e);Y({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${u.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),c()}catch(e){console.log(e)}finally{i.value=!1}},v=p(""),h=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(u.value.file=a,v.value=a.name)};return f((()=>{})),(e,l)=>{const t=d,s=o,n=F,r=le;return _(),U(r,{is:"form",open:a.openFileModal,title:"Add Attachment",size:"medium",actions:"right",onSubmit:$(m,["prevent"]),onClose:c},{content:k((()=>[g("div",As,[g("div",Fs,[g("div",Ds,[Ms,g("div",Os,[j(g("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>T(u).title=e)},null,512),[[C,T(u).title]])])])]),g("div",Ps,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Es,[g("label",$s,[g("input",{onChange:h,class:"file-input",type:"file",name:"resume"},null,32),g("span",Ls,[Rs,g("span",Ns,x(T(v)?T(v):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:k((()=>[b(n,{type:"submit",color:"primary",loading:T(i),raised:""},{default:k((()=>[w(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(n,{color:"light",onClick:c,raised:""},{default:k((()=>[w("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Bs={key:0,class:"modal-form"},Js=["src"],zs=["src"],Ks=["src"],qs=["src"],Gs={key:1,class:"modal-form"},Ws=g("h1",{class:"title is-5"},"No media file attached",-1),Zs=[Ws],Qs=u({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Ue,n=F,o=le;return _(),U(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(_(),y("div",Bs,[a.document?.includes(".pdf")?(_(),y("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Js)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(_(),y("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,zs)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(_(),y("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ks)):V("",!0),a.document?.includes(".mp4")?(_(),U(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(_(),y("img",{key:4,src:a.document,alt:""},null,8,qs))])):(_(),y("div",Gs,Zs))])),cancel:k((()=>[b(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","title"])}}}),Xs={class:"tile-grid-item"},Ys={class:"tile-grid-item-inner"},ei=["src"],li={class:"meta"},ai={class:"dark-inverted"},ti=g("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),si=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),ii=g("div",{class:"meta"},[g("span",null,"Download"),g("span",null,"Download this file")],-1),ni=[si,ii],oi=g("hr",{class:"dropdown-divider"},null,-1),ci=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete this file")],-1)],di=u({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=p("");return(e,c)=>{const d=Te;return _(),y("div",null,[g("div",Xs,[g("div",Ys,[g("img",{onClick:c[0]||(c[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,ei),g("div",li,[g("span",ai,x(a.document.title??"N/A"),1),g("span",null,[g("span",null,x(a.document?.file_info?.size??0)+" MB",1),ti,g("span",null,"At:"+x(T(ee)(a.document.created_at)),1)])]),b(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[g("a",{role:"menuitem",onClick:c[1]||(c[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},ni),oi,g("a",{role:"menuitem",onClick:c[2]||(c[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},ci)])),_:1})])]),T(s)?(_(),U(Qs,{key:0,openDocViewModal:T(s),document:T(t),DocumentType:T(o),title:T(i),"onUpdate:closeModalHandler":c[3]||(c[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0)])}}}),ui={key:1},ri={key:0},pi={class:"tabs-wrapper"},mi={class:"tabs-inner"},vi={class:"tabs"},fi=[g("span",null,"Recent",-1)],hi=["onKeydown","onClick"],_i={key:0},yi={key:0},gi={class:"tile-grid-toolbar"},bi={class:"buttons"},ki=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),wi=g("span",null,"File",-1),xi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),ji=g("span",null,"Folder",-1),Ci=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Vi=g("span",null,"Folder",-1),Si={key:1},Ti={class:"tile-grid-toolbar"},Ui={class:"buttons"},Ii=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Ai=g("span",null,"File",-1),Fi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Di=g("span",null,"Folder",-1),Mi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Oi=g("span",null,"Folder",-1),Pi={class:"tile-grid tile-grid-v2"},Ei=g("img",{class:"light-image",src:K,alt:""},null,-1),$i=g("img",{class:"dark-image",src:q,alt:""},null,-1),Li=u({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=W(),i=G(),n=p(""),c=p(""),u=p(0),r=p(""),m=p(!1),h=p(!1),w=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),D=["All Files","Recently Updated","My Files","Team Files","Deprecated"],M=()=>{r.value=a.docType,h.value=!h.value};p("");const O=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),P=()=>{O.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},L=async()=>{try{const e=await i.delete(`/api/media-folder/${a.folderId}/`);Y({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),O.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},N=async()=>{try{m.value=!0;const e=await i.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);w.value=e.data}catch(e){console.log(e)}finally{m.value=!1}},J=p([]),z=async()=>{try{const e=await i.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);J.value=e.data,n.value="recent"}catch(e){console.log(e)}},K=async e=>{try{const l=await i.delete(`/api/attachment/${e}/`);Y({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),t.purple("File Deleted Successfully"),N()}catch(l){console.log(l)}},q=p(""),Z=p(!1),Q=(e="")=>{q.value=e,Z.value=!Z.value},X=v((()=>c.value?w.value.filter((e=>e.title.match(new RegExp(c.value,"i"))||e.file_info?.name?.match(new RegExp(c.value,"i"))||e.created_at.match(new RegExp(c.value,"i")))):w.value));return f((()=>{N(),z()})),(e,l)=>{const t=te,i=E("ObjectDocumentsTiles",!0),p=d,v=E("Multiselect"),f=o,w=F,q=di,G=s,W=Se,Y=Hs,ee=Is;return _(),y("div",null,[T(m)?(_(),U(t,{key:0,rows:4})):(_(),y("div",ui,[T(J).length?(_(),y("div",ri,[g("div",pi,[g("div",mi,[g("div",vi,[g("ul",null,[g("li",{class:R(["recent"===T(n)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>n.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>n.value="recent")},fi,32)],2),(_(!0),y(I,null,A(T(J),(e=>(_(),y("li",{class:R([T(n)===e.value&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:H($((l=>n.value=e.value),["prevent"]),["space"]),onClick:l=>n.value=e.value},[g("span",null,x(e.title),1)],40,hi)],2)))),256))])])])]),(_(!0),y(I,null,A(T(J),(e=>(_(),y("div",{key:e.id},[T(n)==e.value?(_(),y("div",_i,[b(i,{onDeleteFolderUpdate:l[2]||(l[2]=e=>z()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):V("",!0)])))),128)),"recent"===T(n)?(_(),y("div",yi,[g("div",gi,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>B(c)?c.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(c)]])])),_:1}),g("div",bi,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:T(u),"onUpdate:modelValue":l[4]||(l[4]=e=>B(u)?u.value=e:null),options:D,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(w,{onClick:l[5]||(l[5]=e=>M()),color:"primary",raised:""},{default:k((()=>[ki,wi])),_:1}),b(w,{onClick:Q,color:"info",raised:""},{default:k((()=>[xi,ji])),_:1}),b(w,{onClick:P,color:"danger",raised:""},{default:k((()=>[Ci,Vi])),_:1})])]),b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(T(X),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(q,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])):V("",!0)])):(_(),y("div",Si,[g("div",Ti,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>B(c)?c.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,T(c)]])])),_:1}),g("div",Ui,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:T(u),"onUpdate:modelValue":l[7]||(l[7]=e=>B(u)?u.value=e:null),options:D,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(w,{onClick:l[8]||(l[8]=e=>M()),color:"primary",raised:""},{default:k((()=>[Ii,Ai])),_:1}),b(w,{onClick:Q,color:"info",raised:""},{default:k((()=>[Fi,Di])),_:1}),b(w,{onClick:P,color:"danger",raised:""},{default:k((()=>[Mi,Oi])),_:1})])]),g("div",Pi,[0!=T(X).length||T(m)?V("",!0):(_(),U(G,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Ei,$i])),_:1})),g("div",null,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(T(X),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(q,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])])])),T(O).isSweetAlertOpen?(_(),U(W,{key:2,isSweetAlertOpen:T(O).isSweetAlertOpen,title:T(O).title,subtitle:T(O).subtitle,btntext:T(O).btntext,onConfirm:L,onCancel:()=>T(O).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):V("",!0),T(h)?(_(),U(Y,{key:3,openFileModal:T(h),object:a.objectId,type:T(r),"onClose:ModalHandler":l[9]||(l[9]=e=>h.value=!1),"onUpdate:OnSuccess":N},null,8,["openFileModal","object","type"])):V("",!0),T(Z)?(_(),U(ee,{key:4,"open-create-folder-modal":T(Z),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[10]||(l[10]=e=>Z.value=!1),"onUpdate:onSuccess":l[11]||(l[11]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)]))])}}}),Ri={class:"modal-form columns is-multiline"},Ni={class:"column is-12 is-flex"},Hi={class:"file"},Bi=["onClick"],Ji={class:"file-cta"},zi=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Ki={class:"file-label"},qi=g("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Gi={class:"column is-full"},Wi=g("p",null,"Selected Photos",-1),Zi=g("br",null,null,-1),Qi=u({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=G(),s=W(),i=p(!1),n=r(),c=p(""),u=p(null),m=p(!1),v=()=>l("close:ModalHandler",!1),f=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const e=X(f.value,["file"]);await t.post("/api/attachment/",e);Y({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),v()}catch(e){console.error(e)}finally{i.value=!1}},j=()=>{m.value=!0,u.value&&(u.value.accept="image/*",u.value.setAttribute("capture","environment"),u.value.removeAttribute("multiple"),u.value.click())},C=()=>{m.value=!1,u.value&&(u.value.accept="image/*",u.value.removeAttribute("capture"),u.value.setAttribute("multiple","true"),u.value.click())},V=p([]),S=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,V.value=e.map((e=>e.name)),c.value=e.length>1?`${e.length} photos selected`:e[0].name,m.value&&(f.value.title=e[0].name,await h())}u.value&&(u.value.value="")};return(e,l)=>{const t=d,s=o,n=Ie,r=F,p=le;return _(),U(p,{is:"form",open:a.openFileModal,title:"Add Photos",size:"medium",actions:"right",onSubmit:$(h,["prevent"]),onClose:v},{content:k((()=>[g("div",Ri,[g("input",{ref_key:"fileInput",ref:u,onChange:S,class:"file-input",type:"file",style:{display:"none"}},null,544),g("div",Ni,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Hi,[g("label",{class:"file-label",onClick:$(C,["prevent"])},[g("span",Ji,[zi,g("span",Ki,x(T(c)?T(c):"Choose photo(s)"),1)])],8,Bi)])])),_:1})])),_:1}),b(n,{class:"ml-2",onClick:j,size:"small",color:"info",bordered:""},{default:k((()=>[qi])),_:1})]),g("div",Gi,[Wi,(_(!0),y(I,null,A(T(V),(e=>(_(),y("span",null,[w(x(e)+" ",1),Zi])))),256))])])])),action:k((()=>[b(r,{type:"submit",color:"primary",loading:T(i),raised:""},{default:k((()=>[w(" Save ")])),_:1},8,["loading"])])),cancel:k((()=>[b(r,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Xi={class:"column is-2"},Yi={class:"card-grid-item"},en=["src","alt"],ln=["src","alt"],an={class:"card-grid-item-content is-flex is-align-items-center space-between"},tn=u({__name:"NewDocumentViewer",props:{file:{}},emits:["updateOnSuccess"],setup(e,{emit:l}){const a=e,t=G(),s=W(),i=p("");p([]);const n=p(""),o=p(!1),c=p(""),d=p(""),u=e=>{n.value=e.file_info?.url,d.value=e.file_info?.type,c.value=e.title,o.value=!o.value},r={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},m=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",icon:""}),v=async()=>{try{await t.delete(`/api/attachment/${i.value}/`),l("updateOnSuccess",null),m.value.isSweetAlertOpen=!1,s.success("File deleted successfully")}catch(e){console.error("Error deleting file:",e)}};return f((()=>{})),(e,l)=>{const t=Qs,s=Se;return _(),y("div",Xi,[g("a",Yi,["png"===a.file?.file_info?.type||"jpg"===a.file?.file_info?.type||"jpeg"===a.file?.file_info?.type?(_(),y("img",{key:0,src:a.file?.file_info?.url,alt:a.file?.title,onClick:l[0]||(l[0]=e=>u(a.file))},null,8,en)):(_(),y("img",{key:1,src:r[a.file?.file_info?.type],alt:a.file?.title,onClick:l[1]||(l[1]=e=>u(a.file))},null,8,ln)),g("div",an,[g("h3",{onClick:l[2]||(l[2]=e=>u(a.file)),class:"dark-inverted"},x(a.file?.title),1),g("i",{onClick:l[3]||(l[3]=e=>{return l=a.file?.id,i.value=l,void(m.value={title:" Delete this file?",subtitle:"This file will be deleted permanently.",isSweetAlertOpen:!0,btntext:"Delete",icon:"fas fa-bell"});var l}),class:"fas fa-trash danger-text"})])]),T(o)?(_(),U(t,{key:0,openDocViewModal:T(o),document:T(n),DocumentType:T(d),title:T(c),"onUpdate:closeModalHandler":l[4]||(l[4]=e=>o.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0),T(m).isSweetAlertOpen?(_(),U(s,{key:1,title:T(m).title,subtitle:T(m).subtitle,btntext:T(m).btntext,icon:T(m).icon,onCancel:()=>{T(m).isSweetAlertOpen=!1},onConfirm:v},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0)])}}}),sn={class:"card-grid-toolbar"},nn={class:"buttons"},on=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),cn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),dn=g("span",null,"Folder",-1),un=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),rn=g("span",null,"Folder",-1),pn={key:0,class:"card-grid card-grid-v4"},mn={class:"columns is-multiline"},vn={class:"card-grid-item"},fn={class:"card-grid card-grid-v4"},hn=["onClick"],_n=g("img",{src:"/icons/folders.png",alt:"item.title"},null,-1),yn={class:"card-grid-item-content"},gn={class:"dark-inverted"},bn={key:1,class:"card-grid card-grid-v4"},kn=g("div",{class:"column is-2"},[g("div",{class:"card-grid-item"},[g("img",{class:"light-image",src:K,alt:""}),g("img",{class:"dark-image",src:q,alt:""}),g("div",{class:"card-grid-item-content"},[g("h3",{class:"dark-inverted"},"No Item Found")])])],-1),wn=u({__name:"NewJobFolders",props:{objectId:String,type:{type:String,required:!0}},setup(e){const l=e,a=W(),t=G(),s=p(""),i=p(!1),n=p(!1),o=p([]),c=p([]),d=p([]),u=p(!1),r=p(""),m=v((()=>o.value[o.value.length-1]||null)),h=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",Icon:""}),j=async()=>{u.value=!0;try{const e=await t.get(`/api/media-folder/?object=${l.objectId}&type=${l.type}`);c.value=e.data.filter((e=>null===e.parent)),d.value=[]}catch(e){console.error("Error fetching top folders:",e)}finally{u.value=!1}},C=async e=>{u.value=!0;try{const a=await t.get(`/api/media-folder/${e}/sub-folders/`);c.value=a.data;const s=await t.get(`/api/attachment/by-object/${e}/?type=${l.type}`);d.value=s.data}catch(a){console.error("Error fetching folder contents:",a)}finally{u.value=!1}},T=async()=>{o.value.pop();const e=m.value;e?await C(e.id):await j()},D=p(!1),M=p(""),O=async()=>{M.value=m.value?m.value.id:"",D.value=!0},P=async()=>{M.value?await C(M.value):await j()},E=async()=>{s.value=m.value?m.value.id:l.objectId,"photos"===l.type?n.value=!0:i.value=!0},$=async()=>{try{h.value.isSweetAlertOpen=!1,await t.delete(`/api/media-folder/${r.value}/`),T(),m.value?await C(m.value.id):await j(),a.success("Folder deleted successfully")}catch(e){console.error("Error deleting folder:",e)}},L=async()=>{m.value&&await C(m.value.id)};return f((()=>{j()})),(e,a)=>{const t=F,p=J,v=tn,f=Hs,j=Qi,R=Se,N=Is;return _(),y("div",null,[g("div",sn,[o.value.length?(_(),U(t,{key:0,color:"warning",light:"",class:"mr-1",size:"medium",outlined:"",onClick:T,icon:"fas fa-chevron-left"})):V("",!0),g("div",null,[m.value?(_(),U(t,{key:1,color:"warning",light:"",bold:"",fullwidth:"",icon:"fas fa-folder-open"},{default:k((()=>[w(x(m.value.title),1)])),_:1})):(_(),U(t,{key:0,icon:"fas fa-folder",color:"warning",light:"",bold:"",fullwidth:""},{default:k((()=>[w("Main Folders")])),_:1}))]),g("div",nn,[m.value?(_(),U(t,{key:0,onClick:E,color:"primary",light:"",outlined:"",raised:""},{default:k((()=>[on,g("span",null,x("photos"==l.type?"Photos":"File"),1)])),_:1})):V("",!0),b(t,{onClick:O,color:"info",outlined:"",raised:""},{default:k((()=>[cn,dn])),_:1}),m.value?(_(),U(t,{key:1,onClick:a[0]||(a[0]=e=>((e="")=>{r.value=e.id,h.value={title:`Delete ${e.title} folder?`,subtitle:"Once deleted, you will not be able to recover this folder and the content in it.",isSweetAlertOpen:!0,btntext:"Delete",Icon:"fas fa-bell"}})(m.value)),color:"danger",raised:"",outlined:""},{default:k((()=>[un,rn])),_:1})):V("",!0)])]),g("div",null,[u.value?(_(),y("div",pn,[g("div",mn,[(_(),y(I,null,A(18,(e=>g("div",{key:e,class:"column is-2"},[g("div",vn,[b(p,{height:"160px"})])]))),64))])])):V("",!0),g("div",fn,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[c.value.length?(_(!0),y(I,{key:0},A(c.value,(e=>(_(),y("div",{key:e.id,class:"column is-2"},[g("a",{onClick:l=>(async e=>{o.value.push(e),await C(e.id)})(e),class:"card-grid-item"},[_n,g("div",yn,[g("h3",gn,x(e.title),1)])],8,hn)])))),128)):V("",!0),d.value.length?(_(!0),y(I,{key:1},A(d.value,(e=>(_(),U(v,{key:e.id,file:e,onUpdateOnSuccess:L},null,8,["file"])))),128)):V("",!0)])),_:1})]),c.value.length||d.value.length||u.value?V("",!0):(_(),y("div",bn,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[kn])),_:1})])),i.value?(_(),U(f,{key:2,openFileModal:i.value,object:s.value,type:l.type,"onClose:ModalHandler":a[1]||(a[1]=e=>i.value=!1),"onUpdate:OnSuccess":a[2]||(a[2]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),n.value?(_(),U(j,{key:3,openFileModal:n.value,object:s.value,type:l.type,"onClose:ModalHandler":a[3]||(a[3]=e=>n.value=!1),"onUpdate:OnSuccess":a[4]||(a[4]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),h.value.isSweetAlertOpen?(_(),U(R,{key:4,title:h.value.title,subtitle:h.value.subtitle,btntext:h.value.btntext,icon:h.value.Icon,onCancel:()=>{h.value.isSweetAlertOpen=!1},onConfirm:$},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0),D.value?(_(),U(N,{key:5,"open-create-folder-modal":D.value,type:l.type,object:m.value.id,parent:M.value,"onUpdate:modalHandler":a[5]||(a[5]=e=>D.value=!1),"onUpdate:OnSuccess":P},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)])])}}}),xn={class:"tabs-wrapper"},jn={class:"tabs-inner"},Cn={class:"tabs is-boxed"},Vn=[g("span",null,"Documents",-1)],Sn=[g("span",null,"Photos",-1)],Tn=[g("span",null,"Videos",-1)],Un=g("li",{class:"tab-naver"},null,-1),In={key:0},An={class:"tile-grid tile-grid-v2"},Fn=g("img",{class:"light-image",src:K,alt:""},null,-1),Dn=g("img",{class:"dark-image",src:q,alt:""},null,-1),Mn={key:1},On={key:2},Pn=u({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo","updateOnSuccess"],setup(e,{emit:l}){const a=e;W();const t=G(),i=p("");p(0);const n=p(""),o=p("contracts"),c=p(!1),d=p([]),u=p("documents");p("site_visits"),p("job_videos");const r=v((()=>i.value?Ae.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Ae)),m=async(e="contracts")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);d.value=l.data}catch(l){console.log(l)}},h=p(""),w=p(!1),x=p([]),j=p([]),C=p([]),S=async(e="")=>{try{const l=await t.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?x.value=l.data:"photos"===e?j.value=l.data:"videos"===e&&(C.value=l.data)}catch(l){console.log(l)}},I=(e="documents")=>{"documents"===e?S("documents"):"photos"===e?S("photos"):"videos"===e&&S("videos")};return f((()=>{m(),I("documents")})),(e,l)=>{const t=wn,i=s,o=Hs,d=Is;return _(),y("div",null,[g("div",xn,[g("div",jn,[g("div",Cn,[g("ul",null,[g("li",{class:R(["documents"===T(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>u.value="documents"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>{u.value="documents",I("documents")})},Vn,32)],2),g("li",{class:R(["photos"===T(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H($((e=>u.value="photos"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>{u.value="photos",I("photos")})},Sn,32)],2),g("li",{class:R(["videos"===T(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H($((e=>u.value="videos"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>{u.value="videos",I("videos")})},Tn,32)],2),Un])])])]),"documents"==T(u)?(_(),y("div",In,[b(t,{type:"documents",objectId:a.leadId},null,8,["objectId"]),g("div",An,[b(i,{class:R([0!==T(r).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Fn,Dn])),_:1},8,["class"])])])):V("",!0),"photos"==T(u)?(_(),y("div",Mn,[b(t,{type:"photos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),"videos"==T(u)?(_(),y("div",On,[b(t,{type:"videos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),T(c)?(_(),U(o,{key:3,openFileModal:T(c),object:a.leadId,type:T(n),"onClose:ModalHandler":l[6]||(l[6]=e=>c.value=!1),"onUpdate:OnSuccess":m},null,8,["openFileModal","object","type"])):V("",!0),T(w)?(_(),U(d,{key:4,"open-create-folder-modal":T(w),type:T(h),object:a.leadId,"onUpdate:modalHandler":l[7]||(l[7]=e=>w.value=!1),"onUpdate:onSuccess":l[8]||(l[8]=e=>I(T(h)))},null,8,["open-create-folder-modal","type","object"])):V("",!0)])}}}),En={class:"business-dashboard hr-dashboard"},$n={class:"columns is-multiline"},Ln={class:"column is-12"},Rn={class:"columns is-multiline"},Nn={class:"column is-12"},Hn={class:"block-header"},Bn={class:"left"},Jn={class:"current-user"},zn={class:"center"},Kn=g("h4",{class:"block-heading"},"Current State",-1),qn=g("h4",{class:"block-heading"},"Address",-1),Gn={class:"block-text"},Wn=g("br",null,null,-1),Zn=g("br",null,null,-1),Qn={class:"right"},Xn=g("h4",{class:"block-heading"},"Managers",-1),Yn={class:"candidates"},eo=g("button",null,[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),lo={class:"column is-12"},ao={class:"tabs-wrapper"},to={class:"tabs-inner"},so={class:"tabs is-toggle"},io=[g("span",null,"Job Management",-1)],no=[g("span",null,"Documents/Files",-1)],oo=[g("span",null,"Old Estimates",-1)],co=[g("span",null,"Proposals",-1)],uo=[g("span",null,"Tasks",-1)],ro=[g("span",null,"Activities",-1)],po=[g("span",null,"Job progress",-1)],mo=[g("span",null,"Calculations",-1)],vo=[g("span",null,"Finance",-1)],fo=[g("span",null,"Report",-1)],ho=g("li",{class:"tab-naver"},null,-1),_o={key:0,class:"column is-12"},yo={class:"columns is-multiline"},go={class:"column is-8"},bo={class:"columns is-multiline"},ko={class:"column is-12"},wo={class:"feed-settings"},xo=g("h3",{class:"dark-inverted"},"Job feeds",-1),jo={class:"buttons"},Co={class:"column is-4"},Vo={class:"side-text"},So=g("h3",{class:"dark-inverted"},"Job Description",-1),To=["innerHTML"],Uo=g("a",{class:"action-link",tabindex:"0"},"Read More",-1),Io={class:"column is-7 is-offset-1"},Ao={class:"incoming"},Fo=g("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),Do=g("div",null,[g("span",{class:"item-name dark-inverted"},"Messages"),g("span",{class:"item-meta"},[g("span",null,"Inbox messages")])],-1),Mo=g("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),Oo=g("div",null,[g("span",{class:"item-name dark-inverted"},"Tasks"),g("span",{class:"item-meta"},[g("span",null,"Pending tasks")])],-1),Po={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},Eo={key:4,class:"light-text"},$o={class:"column is-12"},Lo={class:"recent-rookies"},Ro=g("div",{class:"recent-rookies-header"},[g("h3",{class:"dark-inverted"},"Internal Users"),g("a",{class:"action-link",tabindex:"0"},"View All")],-1),No={class:"columns is-multiline user-grid user-grid-v4"},Ho={class:"column is-4"},Bo={class:"grid-item"},Jo={class:"dark-inverted"},zo={class:"capitalized"},Ko={class:"button-wrap has-text-centered"},qo={class:"column is-4"},Go={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},Wo=g("div",{class:"widget-toolbar"},[g("div",{class:"left"},[g("a",{class:"action-icon"},[g("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),g("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),g("div",{class:"center"},[g("h3",null,"October 2020")]),g("div",{class:"right"},[g("a",{class:"action-icon"},[g("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),g("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),Zo=g("table",{class:"calendar"},[g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Mon"),g("th",{scope:"col"},"Tue"),g("th",{scope:"col"},"Wed"),g("th",{scope:"col"},"Thu"),g("th",{scope:"col"},"Fri"),g("th",{scope:"col"},"Sat"),g("th",{scope:"col"},"Sun")])]),g("tbody",null,[g("tr",null,[g("td",{class:"prev-month"},"29"),g("td",{class:"prev-month"},"30"),g("td",{class:"prev-month"},"31"),g("td",null,"1"),g("td",null,"2"),g("td",null,"3"),g("td",null,"4")]),g("tr",null,[g("td",null,"5"),g("td",null,"6"),g("td",null,"7"),g("td",null,"8"),g("td",null,"9"),g("td",null,"10"),g("td",null,"11")]),g("tr",null,[g("td",null,"12"),g("td",null,"13"),g("td",null,"14"),g("td",null,"15"),g("td",null,"16"),g("td",null,"17"),g("td",{class:"current-day"},"18")]),g("tr",null,[g("td",null,"19"),g("td",null,"20"),g("td",null,"21"),g("td",null,"22"),g("td",null,"23"),g("td",null,"24"),g("td",null,"25")]),g("tr",null,[g("td",null,"26"),g("td",null,"27"),g("td",null,"28"),g("td",null,"29"),g("td",null,"30"),g("td",null,"31"),g("td",{class:"next-month"},"1")])])],-1),Qo={key:1,class:"column is-12"},Xo={key:2,class:"column is-12"},Yo={key:3,class:"column is-12"},ec={class:"tabs-inner"},lc={class:"tabs is-boxed"},ac=[g("span",null,"Proposals",-1)],tc=[g("span",null,"Grouped Proposals",-1)],sc={key:0},ic={key:1},nc={key:4,class:"column is-12"},oc={key:5,class:"column is-12"},cc={key:6,class:"column is-12"},dc={key:7,class:"column is-12"},uc={key:8,class:"column is-12"},rc={key:9,class:"column is-12"},pc={key:10,class:"column is-12"},mc={class:"tabs-inner"},vc={class:"tabs is-boxed"},fc=[g("span",null,"Excel Sheets",-1)],hc=[g("span",null,"Custom Calculations",-1)],_c={key:0},yc={key:1},gc=u({__name:"JobDetails",setup(l){const t=z();N();const s=G(),i=W(),n=p(!1),o=p(""),c=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const d=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),u=p("excel"),r=p("management"),m=p("childProposals"),v=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],C={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let S;const M=async()=>{try{n.value=!0;const e=await s.get(`/api/project/${t.params.id}/detail/`);d.value=e.data,e.data.latitude&&((e,l)=>{if(S&&S.remove(),S=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(S),e&&l){const a=[e,l];L.marker(a).addTo(S),S.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{n.value=!1}},O=p([]),P=p(!1),E=async()=>{try{P.value=!0;await s.patch(`/api/project/${t.params.id}/`,{status:"completed"});i.success("Jobs Completed Successfully."),M()}catch(Error){console.log(Error)}finally{P.value=!1}};return f((()=>{M()})),(l,i)=>{const n=ye,p=Oe,f=F,S=D,P=Ie,L=a,N=Me,B=De,J=Fe,z=se,K=Pn,q=Li,G=Ve,W=Vs,Z=es,Q=da,X=Gl,Y=ie,ee=Pl,le=vl,ae=e,te=h("tooltip");return _(),y("div",En,[g("div",$n,[g("div",Ln,[g("div",Rn,[g("div",Nn,[g("div",Hn,[g("div",Bn,[g("div",Jn,[b(n,{size:"large",picture:T(d).image,squared:""},null,8,["picture"]),g("h3",null,[w(x(T(d).title?T(d).title:"No Title")+" ",1),g("sup",null,[b(p,{rounded:"",size:"tiny",color:"info"},{default:k((()=>[w(x(T(d).status),1)])),_:1})])])])]),g("div",zn,[Kn,g("p",null,x("lead"==T(d).current_state?"Is Lead":"Is Job"),1),qn,g("p",Gn,[w(x(T(d).address?T(d).address:"No Address Added")+" ",1),Wn,w(" "+x(T(d).city?T(d).city:"No City Added")+", "+x(T(d).state?T(d).state:"No State Added")+" ",1),Zn,w(" "+x(T(d).zip_code?T(d).zip_code:"No Zip Code Added"),1)])]),g("div",Qn,[Xn,g("div",Yn,[(_(!0),y(I,null,A(T(d).managers_list,(e=>j((_(),U(n,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[te,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),eo]),b(S,null,{default:k((()=>[b(f,{class:"mt-1",onClick:i[0]||(i[0]=e=>{return l=T(t).params.id,o.value=l,void(c.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:k((()=>[w(" Update "+x("lead"==T(d).current_state?"lead":"job"),1)])),_:1}),"lead"!=T(d).current_state?(_(),U(f,{key:0,class:"mt-1",onClick:E,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:k((()=>[w(" Mark As Done ")])),_:1})):V("",!0)])),_:1})])])]),g("div",lo,[g("div",ao,[g("div",to,[g("div",so,[g("ul",null,[g("li",{class:R(["management"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[1]||(i[1]=H($((e=>r.value="management"),["prevent"]),["space"])),onClick:i[2]||(i[2]=e=>r.value="management")},io,32)],2),g("li",{class:R(["documents"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[3]||(i[3]=H($((e=>r.value="documents"),["prevent"]),["space"])),onClick:i[4]||(i[4]=e=>r.value="documents")},no,32)],2),g("li",{class:R(["files"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[5]||(i[5]=H($((e=>r.value="files"),["prevent"]),["space"])),onClick:i[6]||(i[6]=e=>r.value="files")},oo,32)],2),g("li",{class:R(["proposals"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[7]||(i[7]=H($((e=>r.value="proposals"),["prevent"]),["space"])),onClick:i[8]||(i[8]=e=>r.value="proposals")},co,32)],2),g("li",{class:R(["tasks"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[9]||(i[9]=H($((e=>r.value="tasks"),["prevent"]),["space"])),onClick:i[10]||(i[10]=e=>r.value="tasks")},uo,32)],2),g("li",{class:R(["activities"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[11]||(i[11]=H($((e=>r.value="activities"),["prevent"]),["space"])),onClick:i[12]||(i[12]=e=>r.value="activities")},ro,32)],2),g("li",{class:R(["progress"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[13]||(i[13]=H($((e=>r.value="progress"),["prevent"]),["space"])),onClick:i[14]||(i[14]=e=>r.value="progress")},po,32)],2),g("li",{class:R(["calculations"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[15]||(i[15]=H($((e=>r.value="calculations"),["prevent"]),["space"])),onClick:i[16]||(i[16]=e=>r.value="calculations")},mo,32)],2),g("li",{class:R(["finance"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[17]||(i[17]=H($((e=>r.value="finance"),["prevent"]),["space"])),onClick:i[18]||(i[18]=e=>r.value="finance")},vo,32)],2),g("li",{class:R(["report"===T(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[19]||(i[19]=H($((e=>r.value="report"),["prevent"]),["space"])),onClick:i[20]||(i[20]=e=>r.value="report")},fo,32)],2),ho])])])])]),"management"===T(r)?(_(),y("div",_o,[g("div",yo,[g("div",go,[g("div",bo,[g("div",ko,[g("div",wo,[xo,g("div",jo,[(_(!0),y(I,null,A(T(d).tags,((e,l)=>(_(),y("button",{key:l,class:"button is-selected is-light is-dark-outlined"},x(e),1)))),128))])])]),g("div",Co,[g("div",Vo,[So,g("div",{innerHTML:T(d).notes},null,8,To),Uo])]),g("div",Io,[g("div",Ao,[b(L,{rounded:"",data:v,columns:C},{"body-cell":k((({row:e,column:l,value:a})=>["type"===l.key&&"messages"===e.type?(_(),y(I,{key:0},[b(P,{color:"green"},{default:k((()=>[Fo])),_:1}),Do],64)):"type"===l.key&&"tasks"===e.type?(_(),y(I,{key:1},[b(P,{color:"orange"},{default:k((()=>[Mo])),_:1}),Oo],64)):"status"===l.key?(_(),y(I,{key:2},["new"===e.status?(_(),U(p,{key:0,rounded:"",color:"success",label:"New"})):(_(),U(p,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(_(),y("a",Po,"Open")):(_(),y("span",Eo,x(a),1))])),_:1})])]),g("div",$o,[g("div",Lo,[Ro,g("div",No,[(_(!0),y(I,null,A(T(d).sales_people_info,(e=>(_(),y("div",Ho,[g("div",Bo,[b(N),b(n,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),g("h3",Jo,x(e.username??"N/A")+" "+x(e.last_name??""),1),g("p",zo,x(e.role),1),g("div",Ko,[b(f,{color:"primary",raised:""},{default:k((()=>[w(" View Profile ")])),_:1})])])])))),256))])])])])]),g("div",qo,["management"===T(r)?(_(),y("div",Go)):V("",!0),b(B,{project:T(t).params.id},null,8,["project"]),b(J,{class:"picker-widget"},{header:k((()=>[Wo])),body:k((()=>[Zo])),_:1})])])])):V("",!0),"files"==T(r)?(_(),y("div",Qo,[b(z,{projectId:T(t).params.id,files:T(d).uploaded_files,"onUpdate:onUploadFile":M},null,8,["projectId","files"])])):V("",!0),"documents"===T(r)?(_(),y("div",Xo,[b(K,{leadId:T(t).params.id,uploaded_files:T(d).uploaded_files,getProjectInfo:M},null,8,["leadId","uploaded_files"])])):V("",!0),"proposals"===T(r)?(_(),y("div",Yo,[g("div",ec,[g("div",lc,[g("ul",null,[g("li",{class:R(["childProposals"===T(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[21]||(i[21]=H($((e=>m.value="childProposals"),["prevent"]),["space"])),onClick:i[22]||(i[22]=e=>m.value="childProposals")},ac,32)],2),g("li",{class:R(["groupedProposals"===T(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[23]||(i[23]=H($((e=>m.value="groupedProposals"),["prevent"]),["space"])),onClick:i[24]||(i[24]=e=>{m.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await s.get(`/api/attachment/by-object/${t.params.id}/?type=${e}`);O.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},tc,32)],2)])])]),"childProposals"==T(m)?(_(),y("div",sc,[b(Pe,{"lead-id":T(t).params.id,onUpdateCompany:M},null,8,["lead-id"])])):V("",!0),"groupedProposals"==T(m)?(_(),y("div",ic,[b(q,{"doc-type":"proposal_formats","object-id":T(t).params.id},null,8,["object-id"])])):V("",!0)])):V("",!0),"activities"===T(r)?(_(),y("div",nc,[b(G,{jobId:T(t).params.id},null,8,["jobId"])])):V("",!0),"progress"===T(r)?(_(),y("div",oc,[b(W,{object:T(t).params.id,type:"job"},null,8,["object"])])):V("",!0),"finance"===T(r)?(_(),y("div",cc,[b(Z)])):V("",!0),"activityLogs"===T(r)?(_(),y("div",dc,[b(Q,{object_id:T(t).params.id||T(d).id,object_type:"lead"},null,8,["object_id"])])):V("",!0),"report"===T(r)?(_(),y("div",uc,[b(X)])):V("",!0),"tasks"===T(r)?(_(),y("div",rc,[b(Y,{projectID:T(t).params.id},null,8,["projectID"])])):V("",!0),"calculations"===T(r)?(_(),y("div",pc,[g("div",mc,[g("div",vc,[g("ul",null,[g("li",{class:R(["excel"===T(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[25]||(i[25]=H($((e=>u.value="excel"),["prevent"]),["space"])),onClick:i[26]||(i[26]=e=>u.value="excel")},fc,32)],2),g("li",{class:R(["custom"===T(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[27]||(i[27]=H($((e=>u.value="custom"),["prevent"]),["space"])),onClick:i[28]||(i[28]=e=>u.value="custom")},hc,32)],2)])])]),"excel"==T(u)?(_(),y("div",_c,[b(ee,{objectId:T(t).params.id},null,8,["objectId"])])):V("",!0),"custom"==T(u)?(_(),y("div",yc,[b(le,{objectId:T(t).params.id},null,8,["objectId"])])):V("",!0)])):V("",!0)])])]),T(c)?(_(),U(ae,{key:0,addUpdateLeadModal:T(c),leadId:T(o),"onUpdate:modalHandler":i[29]||(i[29]=e=>c.value=!1),"onUpdate:OnSuccess":M},null,8,["addUpdateLeadModal","leadId"])):V("",!0)])}}});export{gc as _};
