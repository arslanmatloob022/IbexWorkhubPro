import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-667332db.js";import{_ as t}from"./AddUpdateUser-577a98f0.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-9eff9d9a.js";import{_ as a}from"./VAvatar.vue_vue_type_style_index_0_lang-79513a46.js";import{_ as l}from"./VIcon.vue_vue_type_script_setup_true_lang-33062b3f.js";import{_ as i}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-fb985c20.js";import{f as n,x as r,r as o,$ as u,o as c,C as d,D as p,m as _,O as v,E as m,F as y,G as g,L as f,X as b,k as h,I as k,V as x,W as j,aS as w,N as C,P as A,U as V,A as S}from"./index-c7fdba5c.js";import{_ as P}from"./VControl-1b31c447.js";import{_ as O}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-fbca339a.js";import{_ as I,a as M}from"./search-4-dark-2b5b440c.js";import{u as U}from"./useAPI-8008ad3e.js";import{u as E}from"./useNotyf-6a61ea77.js";import{u as T}from"./viewWrapper-eebe7abd.js";import{b as L}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-c80cad58.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-7d5dafec.js";import"./useVFieldContext-c7baf5ef.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-512f39a5.js";import"./VLabel.vue_vue_type_script_setup_true_lang-d25b2bf0.js";import"./VFilePond.vue_vue_type_script_lang-d2067de8.js";import"./VField.vue_vue_type_script_setup_true_lang-e3a9734a.js";import"./VInput.vue_vue_type_script_setup_true_lang-fffc240a.js";import"./useSupportElement-4d6d7334.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-802231be.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-ddab8adf.js";import"./notyf-b6449a0b.js";import"./useThemeColors-87614f1f.js";const D={key:1},F={class:"user-grid-toolbar"},$={class:"buttons"},H=m("span",{class:"icon"},[m("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),N=m("span",null,"Client",-1),R={class:"user-grid user-grid-v2"},W=m("img",{class:"light-image",src:I,alt:""},null,-1),z=m("img",{class:"dark-image",src:M,alt:""},null,-1),G={class:"grid-item-wrap"},B={class:"grid-item-head"},J={class:"flex-head"},K={class:"meta"},Q={key:0,class:"dark-inverted"},X={key:1,class:"dark-inverted"},Y={key:0,class:"status-icon is-success"},q=[m("i",{"aria-hidden":"true",class:"fas fa-check"},null,-1)],Z={key:1,class:"status-icon is-warning"},ee=[m("i",{"aria-hidden":"true",class:"fas fa-exclamation"},null,-1)],te={class:"buttons"},se=["onClick"],ae={class:"icon"},le=m("span",null,"Delete",-1),ie=["onClick"],ne={class:"icon"},re=m("span",null,"Password",-1),oe={class:"grid-item"},ue={class:"dark-inverted"},ce={style:{"text-transform":"capitalize"}},de=m("div",{class:"people"},null,-1),pe={class:"buttons"},_e=["onClick"],ve=[m("span",{class:"icon"},[m("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:user"})],-1),m("span",null,"Profile",-1)],me=["onClick"],ye=[m("span",{class:"icon"},[m("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:pen-tool"})],-1),m("span",null,"Edit",-1)],ge=n({__name:"ClientsList",setup(n){const S=U(),I=E(),M=r(),T=o(!1),L=o(!1),ge=o(!1),fe=o(""),be=o(""),he=o([{id:"",password:"",last_login:"",date_joined:"",email:"",role:"",avatar:null,is_active:!0,phoneNumber:"",username:"",last_name:null,is_sentMail:!1,token:null,supplier:null}]),ke=async()=>{try{T.value=!0;const e=await S.get("/api/users/by-role/client/");he.value=e.data}catch(e){console.error(e)}finally{T.value=!1}},xe=u((()=>be.value?he.value.filter((e=>e.username.match(new RegExp(be.value,"i"))||e.email.match(new RegExp(be.value,"i")))):he.value)),je=(e="")=>{fe.value=e,L.value=!L.value},we=o({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Ce=o(""),Ae=async()=>{try{T.value=!0;await S.delete(`/api/users/${Ce.value}/`,{});ke(),I.green("Contractor deleted successfully")}catch(e){console.log(e),I.error("Error while deleting")}finally{T.value=!1,we.value.isSweetAlertOpen=!1}};return c((()=>{ke()})),(n,r)=>{const o=O,u=P,c=A,S=i,I=l,U=a,E=s,he=t,Ve=e;return d(),p(x,null,[_(T)?(d(),v(o,{key:0})):(d(),p("div",D,[m("div",F,[y(u,{icon:"feather:search"},{default:g((()=>[f(m("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>h(be)?be.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,_(be)]])])),_:1}),m("div",$,[y(c,{onClick:r[1]||(r[1]=e=>je()),color:"primary",raised:""},{default:g((()=>[H,N])),_:1})])]),m("div",R,[y(S,{class:k([0!==_(xe).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[W,z])),_:1},8,["class"]),y(w,{name:"list",tag:"div",class:"columns is-multiline"},{default:g((()=>[(d(!0),p(x,null,j(_(xe),(e=>(d(),p("div",{key:e.id,class:"column is-3"},[m("div",G,[m("div",B,[m("div",J,[m("div",K,[e.is_active?(d(),p("span",Q," Active ")):(d(),p("span",X," In-Active ")),m("span",null,V(e.is_sentMail?"Mail notify on":"Mail notify off"),1)]),e.is_active?(d(),p("div",Y,q)):C("",!0),e.is_active?C("",!0):(d(),p("div",Z,ee))]),m("div",te,[m("button",{onClick:t=>{return s=e,Ce.value=s.id,void(we.value={title:`Delete ${s.username}?`,subtitle:"After deleting this worker you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var s},class:"button v-button is-dark-outlined"},[m("span",ae,[y(I,{icon:"lucide:alert-octagon"})]),le],8,se),m("button",{onClick:t=>((e="")=>{fe.value=e,ge.value=!ge.value})(e.id),class:"button v-button is-dark-outlined"},[m("span",ne,[y(I,{icon:"lucide:lock"})]),re],8,ie)])]),m("div",oe,[y(U,{picture:e.avatar,badge:e.badge,size:"big"},null,8,["picture","badge"]),m("h3",ue,V(e.username)+" "+V(e.last_name?e.last_name:""),1),m("p",ce,V(e.role),1),de,m("div",pe,[m("button",{onClick:t=>((e="")=>{M.push(`/sidebar/dashboard/clients/${e}`)})(e.id),class:"button v-button is-dark-outlined"},ve,8,_e),m("button",{onClick:t=>je(e.id),class:"button v-button is-dark-outlined"},ye,8,me)])])])])))),128))])),_:1})])])),_(ge)?(d(),v(E,{key:2,isModalOpen:_(ge),userId:_(fe),"onUpdate:closeModalHandler":r[2]||(r[2]=e=>ge.value=!1)},null,8,["isModalOpen","userId"])):C("",!0),_(L)?(d(),v(he,{key:3,"is-modal-open":_(L),"user-role":"client","user-id":_(fe),"onUpdate:closeModalHandler":r[3]||(r[3]=e=>L.value=!1),"onUpdate:actionUpdateHandler":ke},null,8,["is-modal-open","user-id"])):C("",!0),_(we).isSweetAlertOpen?(d(),v(Ve,{key:4,loading:_(T),isSweetAlertOpen:_(we).isSweetAlertOpen,title:_(we).title,subtitle:_(we).subtitle,btntext:_(we).btntext,onConfirm:Ae,onCancel:()=>_(we).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0)],64)}}}),fe={class:"page-content-inner"},be=n({__name:"index",setup:e=>(T().setPageTitle("Clients Ibex"),S({title:"Clients - Ibex"}),(e,t)=>{const s=ge;return d(),p("div",fe,[y(s)])})});"function"==typeof L&&L(be);export{be as default};
