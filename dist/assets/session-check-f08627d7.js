import{d as e}from"./index-ff7bbf87.js";import{u as o}from"./userSession-2a179692.js";import{u as r}from"./useAPI-012a4cc1.js";import{u as t}from"./layoutSwitcher-bfd367f3.js";import{u as s}from"./company-3dcc92ff.js";import"./useNotyf-151d038a.js";import"./notyf-31a7ca09.js";import"./useThemeColors-47c73328.js";import"./useSupportElement-2c69dc44.js";const a=t(),i=e((async({router:e,pinia:t})=>{const i=o(t);if(r(),s(),i.isLoggedIn)try{a.setDynamicLayoutId("sideblock-default")}catch(l){i.logoutUser()}e.beforeEach((e=>e.meta.requiresAuth&&!i.isLoggedIn?{name:"/auth/login",query:{redirect:e.fullPath}}:("supplier"!==i.user.role||!1!==e.meta.isPartnerAllowed&&void 0!==e.meta.isPartnerAllowed)&&("manager"!==i.user.role||!1!==e.meta.isManagerAllowed&&void 0!==e.meta.isManagerAllowed)&&("contractor"!==i.user.role||!1!==e.meta.isContractorAllowed&&void 0!==e.meta.isContractorAllowed)&&("worker"!==i.user.role||!1!==e.meta.isWorkerAllowed&&void 0!==e.meta.isWorkerAllowed)&&("client"!==i.user.role||!1!==e.meta.isClientAllowed&&void 0!==e.meta.isClientAllowed)?void 0:{name:"/auth/login",query:{redirect:e.fullPath}}))}));export{i as default};
