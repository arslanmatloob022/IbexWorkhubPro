import{F as e}from"./FullCalendar-963bd4de.js";import{i as t}from"./index-f52ed8ce.js";import{u as a}from"./useAPI-9f8d4339.js";import{u as s}from"./useNotyf-9e43477b.js";import{u as r}from"./userSession-987f6ebf.js";import{e as o,N as i,r as l,o as n,y as c,z as u,C as d,A as p,B as v,J as m,l as y,v as f}from"./index-9f197639.js";import{u as g}from"./viewWrapper-99b66417.js";import"./notyf-4bbd9e0e.js";import"./useThemeColors-b1b725d8.js";const w={class:"lifestyle-dashboard lifestyle-dashboard-v3"},h={class:"columns is-multiline"},j={class:"column is-12"},k={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},b={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},x={style:{"margin-top":"8px","padding-right":"10px"}},T=o({__name:"WorkerCalendar",setup(o){const f=r(),g=s(),T=a();i();const C=l([]),D=l({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});l(!1),l("all"),l("");const _=l(!1),A=l([]),W=l([]),S=l([]),F=l([]),I=l({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),M=l({plugins:[t],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),N=l({});return n((async()=>{await(async()=>{try{_.value=!0;const e=await T.get(`/api/users/${f.user.id}`);D.value=e.data,_.value=!1}catch(e){console.log(e)}})(),await(async()=>{try{const e=await T.get(`/api/task/${f.user.id}/worker-tasks/`);A.value=e.data,console.log("worker tasks",A.value)}catch(e){A.value=[]}})(),(async(e=!1)=>{try{const t=await T.get(`/api/task/worker-today/${f.user.id}/`);N.value=t.data,e&&g.green("Tasks list Refreshed")}catch(t){console.log(t)}})(),C.value=A.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:I[e.status],status:e.status}))),F.value=A.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:I[e.project.status]}))),W.value=F.value,S.value=C.value,M.value={...M.value,resources:W.value,events:S.value},console.log("tasks",M.value.events,"resources",M.value.resources)})),(t,a)=>(c(),u("div",w,[d("div",h,[d("div",j,[p(y(e),{options:y(M)},{eventContent:v((e=>[d("div",k,[d("p",b,m(e.event.title),1),d("div",null,[d("p",x,m(new Date(e.event.start).toDateString())+" to "+m(new Date(e.event.end).toDateString()),1)])])])),_:1},8,["options"])])])]))}}),C={class:""},D=o({__name:"calendar",setup:e=>(g().setPageTitle("Calendar View"),f({title:"Tasks Calendar- Ibex"}),(e,t)=>{const a=T;return c(),u("div",C,[p(a)])})});export{D as default};
