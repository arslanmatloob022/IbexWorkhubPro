import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-f7f13f1f.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-13a71b6c.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-154388ad.js";import{_ as s}from"./VAvatar.vue_vue_type_style_index_0_lang-17f6b6fa.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-c9270974.js";import{f as t,r as n,b as c,$ as o,o as d,av as r,C as u,D as p,E as m,F as v,G as h,L as k,X as g,m as f,k as y,I as _,H as w,U as b,V as C,W as j,O as D,N as x,al as T,J as S,Q as A,R as I,S as E,B as W,aS as L,K as O}from"./index-1fd8c9d7.js";import{_ as P}from"./VControl-ddd5eacc.js";import{_ as V,a as $}from"./projects-dark-4a371d8a.js";import{u as M}from"./useNotyf-4a3c9857.js";import{u as N}from"./useAPI-8dedc4df.js";import{_ as U}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-e890e9d9.js";import{c as R,_ as z}from"./VFlexTable.vue_vue_type_style_index_0_lang-c6bd7377.js";import{_ as H}from"./VTag.vue_vue_type_style_index_0_lang-164cc5ad.js";import{_ as K,a as q}from"./search-4-dark-2b5b440c.js";import{p as F}from"./index-c1fc2d09.js";import{_ as B}from"./VField.vue_vue_type_script_setup_true_lang-6cdedf6c.js";import{_ as Q}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-6c465b2f.js";import{_ as Y,a as G}from"./having-coffee-dark-69a7d2f6.js";const J=e=>(A("data-v-13f04d27"),e=e(),I(),e),X={class:"list-flex-toolbar is-reversed"},Z={class:"tabs-inner"},ee={class:"tabs"},le=J((()=>m("span",null,"All",-1))),ae=[le],se=J((()=>m("span",null,"Active",-1))),ie=[se],te=J((()=>m("span",null,"Pending",-1))),ne=[te],ce=J((()=>m("span",null,"Completed",-1))),oe=[ce],de=J((()=>m("li",{class:"tab-naver"},null,-1))),re={class:"flex-list-wrapper flex-list-v2"},ue={key:0,class:"tab-content is-active"},pe={class:"all-projects"},me={class:"all-projects-header"},ve={class:"header-item"},he={class:"item-inner"},ke=J((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),ge=J((()=>m("p",null,"Total Tasks",-1))),fe={class:"header-item"},ye={class:"item-inner"},_e=J((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),we=J((()=>m("p",null,"Completed Tasks",-1))),be={class:"header-item"},Ce={class:"item-inner"},je=J((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),De=J((()=>m("p",null,"Pending Tasks",-1))),xe={class:"header-item"},Te={class:"item-inner"},Se=J((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),Ae=J((()=>m("p",null,"Active Tasks",-1))),Ie={key:0,class:"columns is-multiline projects-card-grid"},Ee={class:"column is-6"},We={class:"grid-item"},Le={class:"top-section"},Oe={class:"head"},Pe=["onClick"],Ve=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],$e=["onClick"],Me=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],Ne=["onClick"],Ue=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],Re=J((()=>m("hr",{class:"dropdown-divider"},null,-1))),ze=["onClick"],He=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],Ke=["onClick"],qe=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],Fe={class:"body"},Be={class:"bottom-section"},Qe={key:0,class:"foot-block"},Ye=J((()=>m("h4",{class:"heading"},"Sub Contractor",-1))),Ge={class:"developers"},Je={key:1,class:"foot-block"},Xe=J((()=>m("h4",{class:"heading"},"Worker(s)",-1))),Ze={class:"developers"},el={class:"foot-block"},ll=J((()=>m("h4",{class:"heading"},"Start date",-1))),al={class:"foot-block"},sl=J((()=>m("h4",{class:"heading"},"End date",-1))),il={class:"foot-block"},tl=J((()=>m("h4",{class:"heading"},"Status",-1))),nl=J((()=>m("img",{class:"light-image is-larger",src:V,alt:""},null,-1))),cl=J((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),ol={key:1,class:"tab-content is-active"},dl={class:"all-projects"},rl={key:0,class:"columns is-multiline projects-card-grid"},ul={class:"column is-6"},pl={class:"grid-item"},ml={class:"top-section"},vl={class:"head"},hl=["onClick"],kl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],gl=["onClick"],fl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],yl=["onClick"],_l=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],wl=J((()=>m("hr",{class:"dropdown-divider"},null,-1))),bl=["onClick"],Cl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],jl=["onClick"],Dl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],xl={class:"body"},Tl={class:"bottom-section"},Sl={class:"foot-block"},Al=J((()=>m("h4",{class:"heading"},"Worker(s)",-1))),Il={class:"developers"},El={class:"foot-block"},Wl=J((()=>m("h4",{class:"heading"},"Start date",-1))),Ll={class:"foot-block"},Ol=J((()=>m("h4",{class:"heading"},"End date",-1))),Pl={class:"foot-block"},Vl=J((()=>m("h4",{class:"heading"},"Status",-1))),$l=J((()=>m("img",{class:"light-image is-larger",src:V,alt:""},null,-1))),Ml=J((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),Nl={key:2,class:"tab-content is-active"},Ul={class:"all-projects"},Rl={key:0,class:"columns is-multiline projects-card-grid"},zl={class:"column is-6"},Hl={class:"grid-item"},Kl={class:"top-section"},ql={class:"head"},Fl=["onClick"],Bl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],Ql=["onClick"],Yl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],Gl=["onClick"],Jl=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],Xl=J((()=>m("hr",{class:"dropdown-divider"},null,-1))),Zl=["onClick"],ea=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],la=["onClick"],aa=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],sa={class:"body"},ia={class:"bottom-section"},ta={class:"foot-block"},na=J((()=>m("h4",{class:"heading"},"Worker(s)",-1))),ca={class:"developers"},oa={class:"foot-block"},da=J((()=>m("h4",{class:"heading"},"Start date",-1))),ra={class:"foot-block"},ua=J((()=>m("h4",{class:"heading"},"End date",-1))),pa={class:"foot-block"},ma=J((()=>m("h4",{class:"heading"},"Status",-1))),va=J((()=>m("img",{class:"light-image is-larger",src:V,alt:""},null,-1))),ha=J((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),ka={key:3,class:"tab-content is-active"},ga={class:"all-projects"},fa={key:0,class:"columns is-multiline projects-card-grid"},ya={class:"column is-6"},_a={class:"grid-item"},wa={class:"top-section"},ba={class:"head"},Ca=["onClick"],ja=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],Da=["onClick"],xa=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],Ta=["onClick"],Sa=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],Aa=J((()=>m("hr",{class:"dropdown-divider"},null,-1))),Ia=["onClick"],Ea=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],Wa=["onClick"],La=[J((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],Oa={class:"body"},Pa={class:"bottom-section"},Va={class:"foot-block"},$a=J((()=>m("h4",{class:"heading"},"Worker(s)",-1))),Ma={class:"developers"},Na={class:"foot-block"},Ua=J((()=>m("h4",{class:"heading"},"Start date",-1))),Ra={class:"foot-block"},za=J((()=>m("h4",{class:"heading"},"End date",-1))),Ha={class:"foot-block"},Ka=J((()=>m("h4",{class:"heading"},"Status",-1))),qa=J((()=>m("img",{class:"light-image is-larger",src:V,alt:""},null,-1))),Fa=J((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),Ba=E(t({__name:"WorkerTasks",props:{projectID:{default:""},workerId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(t,{emit:A}){const I=t,E=N(),W=M(),L=n(""),O=c(),V=n(""),$=n("all"),U=n(0),R=n(!1),z=n(!1),H=n(0);n({});const K=n("");n([{value:"active",name:"Active"},{value:"pending",name:"Pre Construction"},{value:"completed",name:"Completed"},{value:"cancelled",name:"cancelled"}]),n([{id:0,username:"",email:"",phoneNumber:""}]);const q=n([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),F=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),B=e=>{H.value=e,F.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},Q=async()=>{try{R.value=!0;const e=await E.get(`/api/task/${I.workerId?I.workerId:O.user.id}/worker-tasks/`);q.value=e.data,console.log(e.data),R.value=!1}catch(e){console.log(e)}},Y=o((()=>{let e=q.value.filter((e=>"active"==e.status));return A("update:completedTasks",e.length),e.length})),G=o((()=>{let e=q.value.filter((e=>"pending"==e.status));return A("update:activeTasks",e.length),e.length})),J=o((()=>q.value.filter((e=>"completed"==e.status)).length)),le=e=>{K.value=e,z.value=!0},se=()=>{Q(),z.value=!1,K.value=""},te=async(e,l)=>{try{R.value=!0;await E.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});Q(),W.success(`Task set to ${l} successfully`),U.value=0,R.value=!1}catch(a){console.log(a)}},ce=async()=>{try{R.value=!0;const e=await E.delete(`/api/task/${H.value}/`);console.log(e),W.success("Task deleted successfully"),Q(),F.value.isSweetAlertOpen=!1,U.value=0}catch(e){console.log(e)}finally{R.value=!1}},Ba=o((()=>{if(V.value){const e=new RegExp(V.value,"i");return q.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"completed"!=e.status))})),Qa=o((()=>{if(V.value){const e=new RegExp(V.value,"i");return q.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"completed"==e.status))})),Ya=o((()=>{if(V.value){const e=new RegExp(V.value,"i");return q.value.filter((l=>"active"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"active"==e.status))})),Ga=o((()=>{if(V.value){const e=new RegExp(V.value,"i");return q.value.filter((l=>"pending"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"pending"==e.status))}));return d((()=>{Q()})),(t,n)=>{const c=P,o=T,d=i,A=s,E=a,W=l,O=e,M=r("tooltip");return u(),p(C,null,[m("div",null,[m("div",X,[v(o,null,{default:h((()=>[v(c,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:h((()=>[k(m("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>y(V)?V.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[g,f(V)]])])),_:1})])),_:1}),m("div",Z,[m("div",ee,[m("ul",null,[m("li",{class:_(["all"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=w(S((e=>$.value="all"),["prevent"]),["space"])),onClick:n[2]||(n[2]=e=>$.value="all")},ae,32)],2),m("li",{class:_(["active"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=w(S((e=>$.value="active"),["prevent"]),["space"])),onClick:n[4]||(n[4]=e=>$.value="active")},ie,32)],2),m("li",{class:_(["pending"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=w(S((e=>$.value="pending"),["prevent"]),["space"])),onClick:n[6]||(n[6]=e=>$.value="pending")},ne,32)],2),m("li",{class:_(["completed"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=w(S((e=>$.value="completed"),["prevent"]),["space"])),onClick:n[8]||(n[8]=e=>$.value="completed")},oe,32)],2),de])])])]),m("div",re,["all"===f($)?(u(),p("div",ue,[m("div",pe,[m("div",me,[m("div",ve,[m("div",he,[ke,m("span",null,b(f(q).length),1),ge])]),m("div",fe,[m("div",ye,[_e,m("span",null,b(f(J)),1),we])]),m("div",be,[m("div",Ce,[je,m("span",null,b(f(G)),1),De])]),m("div",xe,[m("div",Te,[Se,m("span",null,b(f(Y)),1),Ae])])]),f(Ba).length?(u(),p("div",Ie,[(u(!0),p(C,null,j(f(Ba),(e=>(u(),p("div",Ee,[m("div",We,[m("div",Le,[m("div",Oe,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>te(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ve,8,Pe),m("a",{onClick:l=>te(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Me,8,$e),m("a",{onClick:l=>te(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Ue,8,Ne),Re,m("a",{onClick:l=>le(e.id),role:"menuitem",class:"dropdown-item is-media"},He,8,ze),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},qe,8,Ke)])),_:2},1024)]),m("div",Fe,[m("p",null,b(e.description),1)])]),m("div",Be,[e.supplier?(u(),p("div",Qe,[Ye,m("div",Ge,[k(v(A,{picture:e.supplier?.avatar,size:"small",color:"primary",initials:e.supplier?.avatar?"":e.supplier?.username.slice(0,2)},null,8,["picture","initials"]),[[M,`${e?.supplier?.username}`,void 0,{rounded:!0,info:!0}]])])])):x("",!0),e.workers?.length?(u(),p("div",Je,[Xe,m("div",Ze,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),D(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[M,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])])):x("",!0),m("div",el,[ll,m("p",null,b(e.startDate),1)]),m("div",al,[sl,m("p",null,b(e.endDate),1)]),m("div",il,[tl,m("p",null,b(e.status),1)])])])])))),256))])):(u(),D(E,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:h((()=>[nl,cl])),_:1}))])])):"active"===f($)?(u(),p("div",ol,[m("div",dl,[f(Ya).length?(u(),p("div",rl,[(u(!0),p(C,null,j(f(Ya),(e=>(u(),p("div",ul,[m("div",pl,[m("div",ml,[m("div",vl,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>te(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},kl,8,hl),m("a",{onClick:l=>te(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},fl,8,gl),m("a",{onClick:l=>te(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},_l,8,yl),wl,m("a",{onClick:l=>le(e.id),role:"menuitem",class:"dropdown-item is-media"},Cl,8,bl),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},Dl,8,jl)])),_:2},1024)]),m("div",xl,[m("p",null,b(e.description),1)])]),m("div",Tl,[m("div",Sl,[Al,m("div",Il,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),D(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[M,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),m("div",El,[Wl,m("p",null,b(e.startDate),1)]),m("div",Ll,[Ol,m("p",null,b(e.endDate),1)]),m("div",Pl,[Vl,m("p",null,b(e.status),1)])])])])))),256))])):(u(),D(E,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:h((()=>[$l,Ml])),_:1}))])])):"pending"===f($)?(u(),p("div",Nl,[m("div",Ul,[f(Ga).length?(u(),p("div",Rl,[(u(!0),p(C,null,j(f(Ga),(e=>(u(),p("div",zl,[m("div",Hl,[m("div",Kl,[m("div",ql,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>te(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Bl,8,Fl),m("a",{onClick:l=>te(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Yl,8,Ql),m("a",{onClick:l=>te(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Jl,8,Gl),Xl,m("a",{onClick:l=>le(e.id),role:"menuitem",class:"dropdown-item is-media"},ea,8,Zl),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},aa,8,la)])),_:2},1024)]),m("div",sa,[m("p",null,b(e.description),1)])]),m("div",ia,[m("div",ta,[na,m("div",ca,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),D(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[M,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),m("div",oa,[da,m("p",null,b(e.startDate),1)]),m("div",ra,[ua,m("p",null,b(e.endDate),1)]),m("div",pa,[ma,m("p",null,b(e.status),1)])])])])))),256))])):(u(),D(E,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:h((()=>[va,ha])),_:1}))])])):"completed"===f($)?(u(),p("div",ka,[m("div",ga,[f(Qa).length?(u(),p("div",fa,[(u(!0),p(C,null,j(f(Qa),(e=>(u(),p("div",ya,[m("div",_a,[m("div",wa,[m("div",ba,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>te(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},ja,8,Ca),m("a",{onClick:l=>te(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},xa,8,Da),m("a",{onClick:l=>te(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Sa,8,Ta),Aa,m("a",{onClick:l=>le(e.id),role:"menuitem",class:"dropdown-item is-media"},Ea,8,Ia),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},La,8,Wa)])),_:2},1024)]),m("div",Oa,[m("p",null,b(e.description),1)])]),m("div",Pa,[m("div",Va,[$a,m("div",Ma,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),D(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[M,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),m("div",Na,[Ua,m("p",null,b(e.startDate),1)]),m("div",Ra,[za,m("p",null,b(e.endDate),1)]),m("div",Ha,[Ka,m("p",null,b(e.status),1)])])])])))),256))])):(u(),D(E,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:h((()=>[qa,Fa])),_:1}))])])):x("",!0)])]),f(F).isSweetAlertOpen?(u(),D(W,{key:0,isSweetAlertOpen:f(F).isSweetAlertOpen,title:f(F).title,subtitle:f(F).subtitle,btntext:f(F).btntext,onConfirm:ce,loading:f(R),onCancel:()=>f(F).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):x("",!0),f(z)?(u(),D(O,{key:1,projectID:I.projectID,isOpen:f(z),taskIdSelected:f(K),startDate:f(L),"onUpdate:modalHandler":se,"onUpdate:OnSuccess":Q},null,8,["projectID","isOpen","taskIdSelected","startDate"])):x("",!0)],64)}}}),[["__scopeId","data-v-13f04d27"]]),Qa={class:"flex-list-wrapper flex-list-v2"},Ya=m("img",{class:"light-image",src:K,alt:""},null,-1),Ga=m("img",{class:"dark-image",src:q,alt:""},null,-1),Ja={key:1,class:"tab-content is-active"},Xa=["onClick"],Za={class:"item-name dark-inverted show-text-200"},es={class:"item-meta"},ls={class:"link-text"},as={class:"light-text"},ss={class:"light-text"},is={key:2,class:"tab-content is-active"},ts=m("img",{class:"light-image is-larger",src:V,alt:""},null,-1),ns=m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1),cs=t({__name:"ChronicTasksList",props:{tasks:{default:{}}},setup(e){const l=e,s=n(!1);n(!1);const i=n({}),t=n(""),c=F,d=n(""),r=n("active"),k={picture:{label:"Task",media:!0,grow:!0},customer:"Start ",industry:"End",status:"Quantity",team:{label:"Unit",cellClass:"h-hidden-tablet-p"},actions:{label:"Cost code",align:"end"}},g={completed:"primary",pending:"warning",active:"info",canceled:"danger"},y=o((()=>{if(d.value){const e=new RegExp(d.value,"i");return c.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return c}));return(e,n)=>{const c=a,o=W("Tippy"),d=R,_=H,w=z,T=U;return u(),p("div",null,[m("div",Qa,["active"===f(r)&&0===f(y).length?(u(),D(c,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[Ya,Ga])),_:1})):x("",!0),"active"===f(r)?(u(),p("div",Ja,[l.tasks?(u(),D(w,{key:0,data:f(y),columns:k,rounded:""},{body:h((()=>[v(L,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(u(!0),p(C,null,j(l.tasks,(e=>(u(),p("div",{key:e.id,class:"flex-table-item cu-pointer",onClick:l=>{return a=e,n=e.id,console.log("detail",a),i.value=a,t.value=n,void(s.value=!0);var a,n}},[v(d,{column:{media:!0,grow:!0}},{default:h((()=>[m("div",null,[m("span",Za,b(e.title?e.title:""),1),m("span",es,[v(o,{trigger:"click"},{content:h((()=>[O(b(e.description?e.description:""),1)])),default:h((()=>[m("span",ls,b(e.description?.length>40?e.description?.slice(0,40):e.description.length<40?e.description:""),1)])),_:2},1024)])])])),_:2},1024),v(d,null,{default:h((()=>[m("span",as,b(e.startDate?e.startDate:""),1)])),_:2},1024),v(d,null,{default:h((()=>[m("span",ss,b(e.endDate?e.endDate:""),1)])),_:2},1024),v(d,null,{default:h((()=>[v(_,{outlined:"",color:"info",rounded:""},{default:h((()=>[O(b(e.quantity?e.quantity:""),1)])),_:2},1024)])),_:2},1024),v(d,{class:"h-hidden-tablet-p"},{default:h((()=>[v(_,{outlined:"",color:"primary",rounded:""},{default:h((()=>[O(b(e.unit?e.unit:"N/A"),1)])),_:2},1024)])),_:2},1024),v(d,{column:{align:"end"}},{default:h((()=>[v(_,{outlined:"",color:g[e.status],rounded:""},{default:h((()=>[O(b(e.status?e.status:""),1)])),_:2},1032,["color"])])),_:2},1024)],8,Xa)))),128))])),_:1})])),_:1},8,["data"])):x("",!0)])):"closed"===f(r)?(u(),p("div",is,[v(c,{title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n              start closing off projects, they will be showing up in here."},{image:h((()=>[ts,ns])),_:1})])):x("",!0)]),f(s)?(u(),D(T,{key:0,taskDetailModal:f(s),taskData:f(i),taskId:f(t),"onUpdate:modalHandler":n[0]||(n[0]=e=>s.value=!1)},null,8,["taskDetailModal","taskData","taskId"])):x("",!0)])}}}),os={key:0},ds={key:1},rs={class:"list-view-toolbar"},us=m("div",{class:"tabs-inner"},null,-1),ps={class:"list-view list-view-v2"},ms={class:"list-view-inner"},vs={class:"list-view-item"},hs={class:"list-view-item-inner"},ks={class:"meta-left"},gs={class:"info-text"},fs=m("i",{class:"lnir lnir-star-empty","aria-hidden":"true"},null,-1),ys=["innerHTML"],_s=m("div",{class:"meta-right"},null,-1),ws={class:"list-view-inner"},bs=m("img",{class:"light-image",src:Y,alt:""},null,-1),Cs=m("img",{class:"dark-image",src:G,alt:""},null,-1),js=t({__name:"ChronicTasksView",props:{supplierId:{default:""},projectID:{default:""},workerId:{default:""},userId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(e,{emit:l}){const s=e,i=c(),t=n("active"),r=n(""),w=n(!1),D=n([]),T=N(),S=o((()=>{if(r.value){const e=new RegExp(r.value,"i");return D.value.filter((l=>l.title.match(e)||l.description.match(e)))}return D.value}));return d((()=>{(async()=>{try{w.value=!0;const e=await T.get(`/api/task/project-wise-tasks/${s.userId?s.userId:i.user.id}/`);D.value=e.data,console.log("chronic tasks",e.data),w.value=!1}catch(e){console.log(e)}})()})),(e,l)=>{const s=Q,i=P,n=B,c=a,o=cs;return f(w)?(u(),p("div",os,[v(s)])):(u(),p("div",ds,[m("div",rs,[v(n,null,{default:h((()=>[v(i,{icon:"feather:search"},{default:h((()=>[k(m("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>y(r)?r.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[g,f(r)]])])),_:1})])),_:1}),us]),(u(!0),p(C,null,j(f(S),(e=>(u(),p("div",{key:e.id,class:"page-content-inner mb-6"},[m("div",ps,[m("div",{id:"active-items-tab",class:_(["tab-content",["active"===f(t)&&"is-active"]])},[m("div",ms,[v(L,{name:"list-complete",tag:"div"},{default:h((()=>[m("div",vs,[m("div",hs,[m("div",ks,[m("h3",null,[m("span",gs,[fs,O(b(e.title),1)])]),e.description?(u(),p("div",{key:0,innerHTML:e.description},null,8,ys)):x("",!0),m("span",null,[m("span",null," Timeline: "+b(e.startDate?e.startDate:"N/A")+" to "+b(e.endDate?e.endDate:"N/A"),1)])]),_s])])])),_:2},1024)])],2),m("div",{id:"inactive-items-tab",class:_(["tab-content",["inactive"===f(t)&&"is-active"]])},[m("div",ws,[v(c,{title:"There are no inactive properties.",subtitle:"Looks like there are no inactive properties to display. You can\n                disable and also enable a property from the property settings.",larger:""},{image:h((()=>[bs,Cs])),_:1})])],2)]),v(o,{tasks:e.filtered_tasks},null,8,["tasks"])])))),128))]))}}});export{js as _,Ba as a};
