import{_ as e}from"./CreateProposalTasksModal-70d3dc40.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-9f023da9.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-337f300b.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-7363f926.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-4c0d0ab6.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-51a7fd66.js";import{_ as o}from"./VAvatar.vue_vue_type_style_index_0_lang-69fc5de3.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-d2389a82.js";import{f as c,x as d,r as u,$ as m,o as p,B as _,av as v,C as f,D as g,m as y,O as b,E as h,F as j,G as x,L as k,X as w,k as A,K as C,U as V,I as S,N as I,V as P,W as O,aS as $,P as M,al as L,J as U,A as T}from"./index-57e58a40.js";import{_ as D}from"./VDropdown.vue_vue_type_style_index_0_lang-837d1cdf.js";import{_ as N}from"./VField.vue_vue_type_script_setup_true_lang-a2b0b836.js";import{_ as E}from"./VControl-a167ef11.js";import{_ as J}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-24defdb4.js";import{_ as F,a as z}from"./search-4-dark-2b5b440c.js";import{u as B}from"./useAPI-eb54b92d.js";import{u as H}from"./useNotyf-c1bcf666.js";import{d as W,i as R}from"./useSupportElement-a210de4f.js";import{g as X}from"./estimatesScripts-bb04748e.js";import{h as Z}from"./moment-bad41465.js";import{u as q}from"./viewWrapper-e315b4cd.js";import{b as K}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-4632e796.js";import"./VRadio.vue_vue_type_style_index_0_lang-14303205.js";import"./VLabel.vue_vue_type_script_setup_true_lang-8d18091c.js";import"./useVFieldContext-da91e318.js";import"./UnitAddUpdateModal.vue_vue_type_script_setup_true_lang-adb26052.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-8cf36e4e.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-0d201112.js";import"./VInput.vue_vue_type_script_setup_true_lang-7ef8678e.js";import"./VOption.vue_vue_type_style_index_0_lang-a665611c.js";import"./costItems-0cf8be00.js";import"./VIconButton-b1e6b580.js";import"./company-9c97bf37.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-975462fd.js";import"./ProposalViewModal.vue_vue_type_style_index_0_lang-27f9c4f4.js";import"./V-Snack.vue_vue_type_style_index_0_lang-1a17a77e.js";import"./VIcon.vue_vue_type_script_setup_true_lang-abeb71af.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-135df312.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-8f904314.js";import"./ckeditor-222d9819.js";import"./vue.runtime.esm-bundler-a42ebf90.js";import"./ckeditor-f72f81be.js";import"./VFlex.vue_vue_type_style_index_0_lang-8b205a60.js";import"./useDropdown-d3902727.js";import"./VPlaceloadWrap-dd30c3f6.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-04ad4285.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-86de8f66.js";import"./notyf-ff69ae5b.js";import"./useThemeColors-187419b6.js";const Q={key:1},G={class:"list-flex-toolbar columns is-multiline"},Y={class:"column is-6 is-flex"},ee={class:"multiselect-single-label"},ae=["src"],le=["src"],te=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Ascending"),h("span",null,"Alphabetical Ascending Sorting")],-1)],se=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Descending"),h("span",null,"Alphabetical Descending Sorting")],-1)],ne=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Most Recent"),h("span",null,"Sort most recently created")],-1)],ie=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Most Old"),h("span",null,"Sort the most oldest")],-1)],oe={class:"column is-6 is-flex is-justify-content-end"},re={class:"page-content-inner"},ce={class:"flex-list-wrapper flex-list-v1"},de=h("div",{class:"columns is-multiline"},[h("div",{class:"column is-3"}),h("div",{class:"column is-6 justify-right"})],-1),ue=h("img",{class:"light-image",src:F,alt:""},null,-1),me=h("img",{class:"dark-image",src:z,alt:""},null,-1),pe={key:1},_e={class:"item-name dark-inverted is-flex show-text-300"},ve={class:"item-meta show-text-200"},fe={key:0,class:"show-text-200"},ge={class:"item-name"},ye={class:"item-meta"},be={key:1,class:"show-text-200"},he={class:"item-name dark-inverted"},je={class:"item-meta"},xe={class:"item-name dark-inverted"},ke={class:"item-meta"},we=["onClick"],Ae=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),h("div",{class:"meta"},[h("span",null,"View"),h("span",null,"View user details")],-1)],Ce=["onClick"],Ve=[h("div",{class:"icon"},[h("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Add Proposals"),h("span",null,"Add new proposal to lead")],-1)],Se=["onClick"],Ie=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Update Lead Info")],-1)],Pe=h("hr",{class:"dropdown-divider"},null,-1),Oe=["onClick"],$e=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),h("div",{class:"meta"},[h("span",null,"Delete"),h("span",null,"Delete Proposal Permanently")],-1)],Me=c({__name:"JobsList",setup(c){const T=d(),F=H(),z=B(),q=u(),K=u("all"),Me=u({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),Le=u(42),Ue=u("");u("");const Te=u(!1),De=u(!1);u([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]);const Ne={username:{label:"Job",grow:"lg"},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},Ee=u([{id:"",sales_people_info:[{id:"",username:"",last_name:"",email:"",role:"",avatar:null}],clientInfo:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},created_by_info:null,contractor_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:null},managers_list:[{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],title:"",description:"",image:"",color:"",startDate:"",endDate:"",status:"",is_active:!1,address:"",wifiAvaliabe:!1,parkingAvaliable:!1,property_features:null,created:"",uploaded_files:[],leadStatus:"",current_state:"",city:"",state:"",zip_code:"",confidence:"",sale_date:null,estimated_from:null,estimated_to:null,tags:[],sources:"",project_type:null,notes:"",attach_mail:null,latitude:31.5440886,longitude:74.3839007,client:"",contractor:"",created_by:null,managers:[""],sales_people:[]}]),Je=async()=>{try{q.value=!0;const e=await z.get("/api/project/project-jobs/");Me.value=e.data.filter((e=>"completed"==e.status)),Ee.value=e.data.filter((e=>"completed"!=e.status))}catch(e){F.error(` ${e}, Lead`)}finally{q.value=!1}},Fe=u(""),ze=e=>{Fe.value=e,De.value=!0},Be=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),He=async()=>{try{q.value=!0;await z.delete(`/api/project/${Fe.value}/`);F.success("Proposal delete successfully"),Je()}catch(e){F.error(` ${e}, Proposal`),F.error("Something went wrong please try later")}finally{q.value=!1,Be.value.isSweetAlertOpen=!1}},We=u([{id:"bc199abb-e8f3-4074-91c1-a73c182de6aa",active_project:0,completed_project:1,cancelled_project:0,pending_project:0,password:"pbkdf2_sha256$260000$OczZJ7bosNcSEPl14SwE2W$BE95gFMgOF4gKAvgE5PIfMbSmRXSrPjn0+Th1ox5lOQ=",last_login:null,date_joined:"2024-05-23T10:14:39.803183Z",email:"ibexbuilderstudios@gmail.com",role:"contractor",avatar:null,is_active:!0,phoneNumber:"23984729370",username:"Patrick",last_name:"",is_sentMail:!1,supplier:null}]),Re=u(""),Xe=u([{value:"",name:"",icon:""}]),Ze=m((()=>{if(Ue.value){const e=new RegExp(Ue.value,"i");return Ee.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.email?.match(e)||a.contractor_info?.username?.match(e)||a.contractor_info?.last_name?.match(e)||a.contractor_info?.email?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return Ee.value})),qe=u(""),Ke=(e="")=>{qe.value=e},Qe=m((()=>{let e=Ze.value||[];return qe.value?[...e].sort(((e,a)=>"ascending"===qe.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===qe.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===qe.value?Z(a.created).valueOf()-Z(e.created).valueOf():"old"===qe.value?Z(e.created).valueOf()-Z(a.created).valueOf():0)):Ze.value}));return p((()=>{Je(),(async()=>{try{q.value=!0;const e=await z.get("/api/users/by-role-option/contractor/");We.value=e.data,Xe.value=e.data?.map((e=>({value:e.id,name:`${e.username} ${e.last_name?e.last_name:""}`,icon:e.avatar}))),console.log("data",We.value)}catch(e){console.log(e)}finally{q.value=!1}})()})),(c,d)=>{const u=J,m=E,p=N,F=_("Multiselect"),z=D,B=M,H=L,Z=r,Me=o,Ee=n,We=i,Ze=s,Ge=t,Ye=l,ea=a,aa=e,la=v("tooltip");return f(),g("div",null,[y(q)?(f(),b(u,{key:0})):(f(),g("div",Q,[h("div",G,[h("div",Y,[j(p,null,{default:x((()=>[j(m,{icon:"feather:search"},{default:x((()=>[k(h("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>A(Ue)?Ue.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,y(Ue)]])])),_:1})])),_:1}),j(p,{style:{"min-width":"200px",height:"44px"}},{default:x((({id:e})=>[j(m,null,{default:x((()=>[j(F,{modelValue:y(Re),"onUpdate:modelValue":d[1]||(d[1]=e=>A(Re)?Re.value=e:null),attrs:{id:e},placeholder:"Select a contractor",label:"name",options:y(Xe),searchable:!0,"track-by":"name","max-height":145},{singlelabel:x((({value:e})=>[h("div",ee,[h("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,ae),C(" "+V(e.name),1)])])),option:x((({option:e})=>[h("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,le),C(" "+V(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),j(z,{title:"Apply sorting",modern:"",spaced:""},{content:x((()=>[h("a",{onClick:d[2]||(d[2]=e=>Ke("ascending")),class:S(["dropdown-item is-media",{"is-active":"ascending"===y(qe)}])},te,2),h("a",{onClick:d[3]||(d[3]=e=>Ke("descending")),class:S(["dropdown-item is-media",{"is-active":"descending"===y(qe)}])},se,2),h("a",{onClick:d[4]||(d[4]=e=>Ke("new")),class:S(["dropdown-item is-media",{"is-active":"new"===y(qe)}])},ne,2),h("a",{onClick:d[5]||(d[5]=e=>Ke("old")),class:S(["dropdown-item is-media",{"is-active":"old"===y(qe)}])},ie,2)])),_:1})]),h("div",oe,[j(H,null,{default:x((()=>[j(B,{onClick:d[6]||(d[6]=e=>ze("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:x((()=>[C(" Lead Opportunity ")])),_:1})])),_:1})])]),h("div",re,[h("div",ce,[de,y(Qe)?.length?I("",!0):(f(),b(Z,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:x((()=>[ue,me])),_:1})),"all"===y(K)?(f(),g("div",pe,[y(Qe)?.length?(f(),b(Ze,{key:0,data:y(Qe),columns:Ne,compact:""},{body:x((()=>[j($,{name:"list",tag:"div",class:"flex-list-inner"},{default:x((()=>[(f(!0),g(P,null,O(y(Qe),(e=>(f(),g("div",{key:e.id,class:"flex-table-item"},[j(Ee,{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:"lg"}},{default:x((()=>[j(Me,{picture:e.image?e.image:"/IbexImages/home-icon.png",squared:"",size:"medium"},null,8,["picture"]),h("div",null,[h("span",_e,V(e.title?e.title:"N/A"),1),h("span",ve,[h("span",null,V(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),j(Ee,{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:x((()=>[e.clientInfo?(f(),g("div",fe,[h("span",ge,V(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),h("span",ye,[h("span",null,V(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):I("",!0),e.contractor_info?(f(),g("div",be,[h("span",he,V(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),h("span",je,[h("span",null,V(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):I("",!0)])),_:2},1032,["onClick"]),j(Ee,{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:x((()=>[h("div",null,[h("span",xe,V(y(W)(e.created)),1),h("span",ke,[h("span",null,"At:"+V(y(R)(e.created)),1)])])])),_:2},1032,["onClick"]),j(Ee,{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:x((()=>[j(We,{class:"capitalized",color:y(X)[e.status],rounded:""},{default:x((()=>[C(V(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),j(Ee,{onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:x((()=>[h("div",null,[(f(!0),g(P,null,O(e.managers_list,(e=>k((f(),b(Me,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[la,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),j(Ee,{column:{align:"end"}},{default:x((()=>[j(z,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:x((({close:a})=>[h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(T).push(`/sidebar/dashboard/jobs/${e.id}`)}},Ae,8,we),h("a",{role:"menuitem",onClick:a=>{return l=e.id,Fe.value=l,void(Te.value=!Te.value);var l},class:"dropdown-item is-media"},Ve,8,Ce),h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>ze(e.id)),["prevent"])},Ie,8,Se),Pe,h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>{return l=e.id,Fe.value=l,void(Be.value={title:"Delete Job?",subtitle:"Are you sure to delete this Job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var l}),["prevent"])},$e,8,Oe)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):I("",!0),y(Qe)?.length>5?(f(),b(Ge,{key:1,"current-page":y(Le),"onUpdate:currentPage":d[7]||(d[7]=e=>A(Le)?Le.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):I("",!0)])):I("",!0)])])])),y(De)?(f(),b(Ye,{key:2,addUpdateLeadModal:y(De),leadId:y(Fe),"onUpdate:modalHandler":d[8]||(d[8]=e=>De.value=!1),"onUpdate:OnSuccess":Je},null,8,["addUpdateLeadModal","leadId"])):I("",!0),y(Be).isSweetAlertOpen?(f(),b(ea,{key:3,isSweetAlertOpen:y(Be).isSweetAlertOpen,title:y(Be).title,subtitle:y(Be).subtitle,loading:y(q),btntext:y(Be).btntext,onConfirm:He,onCancel:()=>y(Be).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):I("",!0),y(Te)?(f(),b(aa,{key:4,"lead-proposal-modal":y(Te),"lead-id":y(Fe),"onUpdate:modalHandler":d[9]||(d[9]=e=>Te.value=!1),"onUpdate:OnSuccess":Je},null,8,["lead-proposal-modal","lead-id"])):I("",!0)])}}}),Le=c({__name:"index",setup:e=>(q().setPageTitle("All Jobs"),T({title:"All Jobs - Ibex"}),(e,a)=>{const l=Me;return f(),g("div",null,[j(l)])})});"function"==typeof K&&K(Le);export{Le as default};
