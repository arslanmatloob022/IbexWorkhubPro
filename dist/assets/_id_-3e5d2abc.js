import{_ as e}from"./AddUpdateUser-323e1716.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-dd6e6416.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-e20e8ba7.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-7020293a.js";import{_ as t}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-68c9d2bd.js";import{e as i,r as n,Z as r,o,y as u,z as p,l as c,H as d,C as _,A as m,B as v,S as y,j as g,T as f,J as h,D as j,O as b,Q as k,R as x,aR as w,P as V,E as P,N as A,v as T}from"./index-da733775.js";import{_ as I}from"./VField.vue_vue_type_script_setup_true_lang-0bc0d50e.js";import{_ as S}from"./VControl-cf3be83b.js";import{_ as L}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-fb33399e.js";import{_ as C,a as M}from"./search-1-dark-61831a90.js";import{u as N}from"./useAPI-7d8cfcd3.js";import{u as W}from"./useNotyf-c3ce6e3a.js";import{i as F}from"./index-f52ed8ce.js";import{u as O}from"./personalScoreGauge-4c445949.js";import{u as R}from"./viewWrapper-08b1997c.js";import"./VModal.vue_vue_type_style_index_0_lang-fa388004.js";import"./VRadio.vue_vue_type_style_index_0_lang-0a133c99.js";import"./VLabel.vue_vue_type_script_setup_true_lang-76e173d9.js";import"./useVFieldContext-e38f709d.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-3edcc268.js";import"./VIcon.vue_vue_type_script_setup_true_lang-286a783c.js";import"./VFilePond.vue_vue_type_script_lang-393f1656.js";import"./VInput.vue_vue_type_script_setup_true_lang-8775ccc9.js";import"./useSupportElement-bbe50215.js";import"./userSession-d26c2832.js";import"./VFlex.vue_vue_type_style_index_0_lang-ffffc989.js";import"./VPlaceloadWrap-6541dc94.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-28534fd1.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-fa7dff31.js";import"./notyf-e262cacd.js";import"./useThemeColors-10adcfd9.js";import"./billboard-5857d5e1.js";const U={key:1},E={class:"list-view-toolbar"},H={class:"list-info"},z={key:0},B={key:1},$={class:"buttons"},D={class:"page-content-inner"},G={class:"list-view list-view-v1"},Q=_("img",{class:"light-image",src:C,alt:""},null,-1),Z=_("img",{class:"dark-image",src:M,alt:""},null,-1),q={class:"list-view-inner"},J={class:"list-view-item-inner"},K={class:"meta-left"},Y=_("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),X={class:"meta-right"},ee={class:"tags"},se={class:"stats"},ae={class:"stat"},le=_("span",null,"Status",-1),te=_("div",{class:"separator"},null,-1),ie={class:"stat"},ne=_("span",null,"Active tasks",-1),re=_("div",{class:"separator"},null,-1),oe={class:"stat"},ue=_("span",null,"Pending tasks",-1),pe=i({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(i){const A=i,T=N();W();const C=n(!1),M=n({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),F=n(""),O=r((()=>F.value?M.value.filter((e=>e.username.match(new RegExp(F.value,"i"))||e.email.match(new RegExp(F.value,"i")))):M.value));console.log(O.value);const R=n(!1),pe=()=>{R.value=!0},ce=async()=>{try{C.value=!0;const e=await T.get(`/api/users/workers/?supplier=${A.supplierId}`);M.value=e.data}catch(e){console.log(e)}finally{C.value=!1}};return o((()=>{ce()})),(i,n)=>{const r=L,o=S,T=I,M=P,N=t,W=l,de=a,_e=s,me=e;return u(),p(k,null,[c(C)?(u(),d(r,{key:0})):(u(),p("div",U,[_("div",E,[m(T,null,{default:v((()=>[m(o,{icon:"feather:search"},{default:v((()=>[y(_("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>g(F)?F.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(F)]])])),_:1})])),_:1}),_("div",H,[1===c(O).length?(u(),p("span",z,"1 record found")):(u(),p("span",B,h(c(O).length)+" records found",1))]),_("div",$,[m(M,{color:"primary",onClick:pe,icon:"fas fa-plus",elevated:""},{default:v((()=>[j(" Worker ")])),_:1})])]),_("div",D,[_("div",G,[m(N,{class:b([0!==c(O).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[Q,Z])),_:1},8,["class"]),_("div",q,[m(w,{name:"list-complete",tag:"div"},{default:v((()=>[(u(!0),p(k,null,x(c(O),((e,s)=>(u(),p("div",{key:s,class:"list-view-item"},[_("div",J,[m(W,{picture:e.avatar,size:"large"},null,8,["picture"]),_("div",K,[_("h3",null,h(e.username),1),_("span",null,[Y,_("span",null,h(e.email),1)])]),_("div",X,[_("div",ee,[m(de,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),_("div",se,[_("div",ae,[_("span",null,h(e.is_active?"Active":"In-Active"),1),le]),te,_("div",ie,[_("span",null,h(e.active_tasks),1),ne]),re,_("div",oe,[_("span",null,h(e.pending_tasks),1),ue])])])])])))),128))])),_:1})])]),c(O).length>5?(u(),d(_e,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):V("",!0)])])),c(R)?(u(),d(me,{key:2,isModalOpen:c(R),supplierId:A.supplierId,userRole:"worker","onUpdate:closeModalHandler":n[1]||(n[1]=e=>R.value=!1),"onUpdate:actionUpdateHandler":ce},null,8,["isModalOpen","supplierId"])):V("",!0)],64)}}}),ce={class:"lifestyle-dashboard lifestyle-dashboard-v3"},de={class:"illustration-header"},_e={class:"p-4"},me={class:"header-meta"},ve={class:"summary-stats"},ye={class:"summary-stat"},ge=_("span",null,"Role",-1),fe={class:"summary-stat"},he=_("span",null,"Status",-1),je={class:"summary-stat"},be=_("span",null,"Phone",-1),ke={class:"summary-stat"},xe=_("span",null,"Email",-1),we={class:"summary-stat h-hidden-tablet-p"},Ve=_("span",null,"Email Notification",-1),Pe={class:"columns is-multiline is-flex-tablet-p"},Ae={class:"column is-12"},Te=i({__name:"SubContractorProfile",setup(e){W();const s=N(),a=A();n([]),O();const t=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all");const i=n(!1);n([]),n([]),n([]),n([]),n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),n({plugins:[F],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]});return n({}),o((async()=>{await(async()=>{try{i.value=!0;const e=await s.get(`/api/users/${a.params.id}`);t.value=e.data}catch(e){console.log(e)}finally{i.value=!1}})()})),(e,s)=>{const n=l,r=pe;return u(),p("div",ce,[_("div",de,[_("div",_e,[m(n,{size:"xl",squared:"",picture:c(t).avatar,alt:""},null,8,["picture"])]),_("div",me,[_("h3",null,h(c(i)?"Loading...":c(t)?.username),1),_("div",ve,[_("div",ye,[_("span",null,h(c(i)?"Loading...":c(t)?.role),1),ge]),_("div",fe,[_("span",null,h(c(i)?"Loading...":c(t)?.is_active?"Active":" In-Active"),1),he]),_("div",je,[_("span",null,h(c(i)?"Loading...":c(t)?.phoneNumber?c(t)?.phoneNumber:"N/A"),1),be]),_("div",ke,[_("span",null,h(c(i)?"Loading...":c(t)?.email),1),xe]),_("div",we,[_("span",null,h(c(i)?"Loading...":c(t).is_sentMail?"On":"Off"),1),Ve])])])]),_("div",Pe,[_("div",Ae,[m(r,{"supplier-id":c(a).params.id},null,8,["supplier-id"])])])])}}}),Ie={class:""},Se=i({__name:"[id]",setup:e=>(R().setPageTitle("Sub-Contractor Info"),T({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Te;return u(),p("div",Ie,[m(a)])})});export{Se as default};
