import{_ as e}from"./ProposalViewModal.vue_vue_type_style_index_0_lang-dcd3801e.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-b953efb6.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-caf61dd1.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-664d4643.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-bc2b3f50.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-b699a3cd.js";import{_ as o}from"./VAvatar.vue_vue_type_style_index_0_lang-d2ee1ce9.js";import{_ as r}from"./VTag.vue_vue_type_style_index_0_lang-44f287a8.js";import{_ as u}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-56a84cd8.js";import{e as d,v as c,r as _,Z as p,o as m,au as v,B as f,C as y,l as g,N as b,D as j,E as h,F as x,K as k,W as w,j as V,J as C,U as A,V as I,M as P,aR as S,O,ak as L,T,I as U,z as $}from"./index-1fb32d56.js";import{_ as N,a as M}from"./VOption.vue_vue_type_style_index_0_lang-7e386811.js";import{_ as D}from"./VField.vue_vue_type_script_setup_true_lang-b628d9e7.js";import{_ as F}from"./VControl-08451c2f.js";import{_ as J}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-27f18ddd.js";import{_ as E,a as W}from"./search-4-dark-2b5b440c.js";import{u as z}from"./useAPI-33adf908.js";import{u as H}from"./useNotyf-fd26dfc5.js";import{e as B,g as R}from"./useSupportElement-1b217a2b.js";import{g as Y}from"./CreateProposalTasksModal-618fc13b.js";import{u as Z}from"./viewWrapper-57ff4978.js";import{b as K}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-1ed88e8a.js";import"./VRadio.vue_vue_type_style_index_0_lang-7832c721.js";import"./VLabel.vue_vue_type_script_setup_true_lang-820daffa.js";import"./useVFieldContext-f28de534.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-f36c2d1f.js";import"./userSession-b9f446e0.js";import"./costItems-39796eb0.js";import"./VInput.vue_vue_type_script_setup_true_lang-ed545180.js";import"./V-Snack.vue_vue_type_style_index_0_lang-0eada722.js";import"./VIcon.vue_vue_type_script_setup_true_lang-3cdb9a0a.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-b7f24622.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-037c3272.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-67634ec8.js";import"./ckeditor-5c604219.js";import"./vue.runtime.esm-bundler-94f07bb9.js";import"./ckeditor-4e82cada.js";import"./VFlex.vue_vue_type_style_index_0_lang-70f6634f.js";import"./useDropdown-576ea485.js";import"./VPlaceloadWrap-044d05a5.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-2bd169e7.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-cf2f233b.js";import"./notyf-8d2d49f8.js";import"./useThemeColors-139aade0.js";import"./VIconButton-c0010819.js";const Q={key:1},q={class:"list-flex-toolbar flex-list-v1"},G={class:"page-content-inner"},X={class:"flex-list-wrapper flex-list-v1"},ee=j("img",{class:"light-image",src:E,alt:""},null,-1),ae=j("img",{class:"dark-image",src:W,alt:""},null,-1),le={key:0,class:"show-text-200"},te={class:"item-name"},se={class:"item-meta"},ne={key:1,class:"show-text-200"},ie={class:"item-name dark-inverted"},oe={class:"item-meta"},re={class:"item-name dark-inverted show-text-200"},ue={class:"item-meta show-text-200"},de={class:"item-name dark-inverted"},ce={class:"item-meta"},_e=["onClick"],pe=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),j("div",{class:"meta"},[j("span",null,"View"),j("span",null,"View user details")],-1)],me=["onClick"],ve=[j("div",{class:"icon"},[j("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Add Proposals"),j("span",null,"Add new proposal to lead")],-1)],fe=["onClick"],ye=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),j("div",{class:"meta"},[j("span",null,"Edit"),j("span",null,"Update Lead Info")],-1)],ge=j("hr",{class:"dropdown-divider"},null,-1),be=["onClick"],je=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),j("div",{class:"meta"},[j("span",null,"Delete"),j("span",null,"Delete Proposal Permanently")],-1)],he=d({__name:"JobsList",setup(d){const $=c(),E=H(),W=z(),Z=_(),K=_({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),he=_(42),xe=_(!1),ke=_([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]),we={username:{label:"Contractor/Client",grow:!0},location:{label:"Job",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},Ve=async()=>{try{Z.value=!0;const e=await W.get("/api/project/project-jobs/");K.value=e.data}catch(e){E.error(` ${e}, Lead`)}finally{Z.value=!1}},Ce=_(""),Ae=e=>{Ce.value=e,xe.value=!0},Ie=_({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Pe=async()=>{try{Z.value=!0;await W.delete(`/api/project/${Ce.value}/`);E.success("Proposal delete successfully"),Ve()}catch(e){E.error(` ${e}, Proposal`),E.error("Something went wrong please try later")}finally{Z.value=!1,Ie.value.isSweetAlertOpen=!1}},Se=_(""),Oe=_(""),Le=_(!1),Te=p((()=>{if(Se.value){const e=new RegExp(Se.value,"i");return K.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return K.value})),Ue=p((()=>Oe.value?Te.value?.filter((e=>e.status==Oe.value)):Te.value));return m((()=>{Ve()})),(d,c)=>{const _=J,p=F,m=D,E=N,W=M,z=O,H=L,K=u,Te=n,$e=r,Ne=o,Me=i,De=s,Fe=t,Je=l,Ee=a,We=e,ze=v("tooltip");return f(),y("div",null,[g(Z)?(f(),b(_,{key:0})):(f(),y("div",Q,[j("div",q,[h(m,null,{default:x((()=>[h(p,{icon:"feather:search"},{default:x((()=>[k(j("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>V(Se)?Se.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,g(Se)]])])),_:1})])),_:1}),h(m,null,{default:x((()=>[h(p,{class:"has-icons-left",icon:"fas fa-globe"},{default:x((()=>[h(W,{modelValue:g(Oe),"onUpdate:modelValue":c[1]||(c[1]=e=>V(Oe)?Oe.value=e:null)},{default:x((()=>[h(E,{value:""},{default:x((()=>[C(" All ")])),_:1}),(f(!0),y(A,null,I(g(ke),(e=>(f(),b(E,{value:e.value},{default:x((()=>[C(T(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1}),h(H,null,{default:x((()=>[h(z,{onClick:c[2]||(c[2]=e=>Ae("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:x((()=>[C(" Lead Opportunity ")])),_:1})])),_:1})]),j("div",G,[j("div",X,[g(Ue)?.length?P("",!0):(f(),b(K,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[ee,ae])),_:1})),g(Ue)?.length?(f(),b(De,{key:1,data:g(Ue),columns:we,compact:""},{body:x((()=>[h(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:x((()=>[(f(!0),y(A,null,I(g(Ue),(e=>(f(),y("div",{key:e.id,class:"flex-table-item"},[h(Te,{onClick:()=>{g($).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:x((()=>[e.clientInfo?(f(),y("div",le,[j("span",te,T(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),j("span",se,[j("span",null,T(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):P("",!0),e.contractor_info?(f(),y("div",ne,[j("span",ie,T(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),j("span",oe,[j("span",null,T(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):P("",!0)])),_:2},1032,["onClick"]),h(Te,{onClick:()=>{g($).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:x((()=>[j("div",null,[j("span",re,T(e.title?e.title:"N/A"),1),j("span",ue,[j("span",null,T(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),h(Te,{onClick:()=>{g($).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:x((()=>[j("div",null,[j("span",de,T(g(B)(e.created)),1),j("span",ce,[j("span",null,"At:"+T(g(R)(e.created)),1)])])])),_:2},1032,["onClick"]),h(Te,{onClick:()=>{g($).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:x((()=>[h($e,{color:g(Y)[e.status],rounded:""},{default:x((()=>[C(T(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),h(Te,{onClick:()=>{g($).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:x((()=>[j("div",null,[(f(!0),y(A,null,I(e.managers_list,(e=>k((f(),b(Ne,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[ze,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),h(Te,{column:{align:"end"}},{default:x((()=>[h(Me,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:x((({close:a})=>[j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{g($).push(`/sidebar/dashboard/jobs/${e.id}`)}},pe,8,_e),j("a",{role:"menuitem",onClick:a=>{return l=e.id,Ce.value=l,void(Le.value=!Le.value);var l},class:"dropdown-item is-media"},ve,8,me),j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>Ae(e.id)),["prevent"])},ye,8,fe),ge,j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>{return l=e.id,Ce.value=l,void(Ie.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var l}),["prevent"])},je,8,be)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):P("",!0),g(Ue)?.length>5?(f(),b(Fe,{key:2,"current-page":g(he),"onUpdate:currentPage":c[3]||(c[3]=e=>V(he)?he.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):P("",!0)])])])),g(xe)?(f(),b(Je,{key:2,addUpdateLeadModal:g(xe),leadId:g(Ce),"onUpdate:modalHandler":c[4]||(c[4]=e=>xe.value=!1),"onUpdate:OnSuccess":Ve},null,8,["addUpdateLeadModal","leadId"])):P("",!0),g(Ie).isSweetAlertOpen?(f(),b(Ee,{key:3,isSweetAlertOpen:g(Ie).isSweetAlertOpen,title:g(Ie).title,subtitle:g(Ie).subtitle,loading:g(Z),btntext:g(Ie).btntext,onConfirm:Pe,onCancel:()=>g(Ie).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):P("",!0),g(Le)?(f(),b(We,{key:4,"lead-proposal-modal":g(Le),"lead-id":g(Ce),"onUpdate:modalHandler":c[5]||(c[5]=e=>Le.value=!1),"onUpdate:OnSuccess":Ve},null,8,["lead-proposal-modal","lead-id"])):P("",!0)])}}}),xe=d({__name:"index",setup:e=>(Z().setPageTitle("Jobs"),$({title:"Jobs - Ibex"}),(e,a)=>{const l=he;return f(),y("div",null,[h(l)])})});"function"==typeof K&&K(xe);export{xe as default};
