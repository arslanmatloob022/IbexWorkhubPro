import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-b139092f.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-6a652b66.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-7749d8a0.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-cae4d41b.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-23ab4fd5.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-8db649df.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-f996f5ed.js";import{_ as c}from"./VInput.vue_vue_type_script_setup_true_lang-9dcb4a33.js";import{_ as u}from"./VControl-4f62aec1.js";import{f as d,b as r,r as p,w as m,$ as v,o as f,av as h,C as _,D as y,E as g,F as b,G as k,K as w,U as j,L as x,X as C,N as T,aS as S,m as V,O as U,V as I,W as A,P as O,al as P,Q as F,R as M,S as D,B as q,J as E,I as $,x as R,H,k as N,aB as B,Z as z,s as J,y as K}from"./index-d6b0d16a.js";import{_ as G,a as W}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-5a9a505c.js";import{u as Y}from"./useNotyf-3544947d.js";import{_ as Q}from"./ExcelFileEditor-7413cadf.js";import{f as X,a as ee,C as le,d as ae}from"./useSupportElement-e7ef2a3e.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang-d3ec3e1a.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-946437c1.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-11fa9bfe.js";import{_ as ne,a as oe}from"./ProjectFiles-56e6f35b.js";import{u as ce,_ as ue,a as de}from"./groupedCircleCharts-c40993e4.js";import{b as re,u as pe,a as me,c as ve,_ as fe}from"./groupedRadialCharts-42dda970.js";import{_ as he}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-fd5f78ac.js";import{A as _e}from"./vue3-apexcharts.common-efafe317.js";import{u as ye}from"./salesSparksChart-51ec8fc5.js";import{u as ge}from"./revenueAreaChart-2573c05a.js";import{_ as be}from"./VAvatar.vue_vue_type_style_index_0_lang-6b1f60e6.js";import{h as ke}from"./moment-bad41465.js";import{_ as we}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-a13d2b4b.js";import{p as je}from"./index-c1fc2d09.js";import{a as xe}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-b8a40927.js";import{_ as Ce}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-aa4db74b.js";import{_ as Te}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-2ab09418.js";import{o as Se}from"./via-placeholder-24645670.js";import{_ as Ve}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-58b18394.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-3341500b.js";import{_ as Ie}from"./VDropdown.vue_vue_type_style_index_0_lang-8bfbfde3.js";import{_ as Ae}from"./VPlyr.vue_vue_type_style_index_0_lang-4266b8a0.js";import{_ as Oe}from"./VIconBox.vue_vue_type_style_index_0_lang-59ad4844.js";import{f as Pe}from"./index-5fa9b154.js";import{_ as Fe}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-edfe86b1.js";import{_ as Me}from"./JobTodos.vue_vue_type_style_index_0_lang-ffd03a60.js";import{_ as De}from"./UserCardDropdown-11091de6.js";import{u as qe}from"./useThemeColors-15908e3a.js";import{_ as Ee}from"./VTag.vue_vue_type_style_index_0_lang-deb4dd20.js";import{_ as $e}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-bbac6138.js";const Le=e=>(F("data-v-6b746c41"),e=e(),M(),e),Re={class:"column is-12"},He={class:"list-flex-toolbar is-reversed"},Ne={class:"columns is-multiline"},Be={key:0,class:"column is-12 card p-4 curved mb-2"},ze={class:"columns is-multiline"},Je={class:"column is-10"},Ke={class:"column is-2"},Ge=Le((()=>g("img",{class:"light-image",src:G,alt:""},null,-1))),We=Le((()=>g("img",{class:"dark-image",src:W,alt:""},null,-1))),Ze={key:0,class:"column is-12 card p-4 curved mb-2"},Ye={class:"columns is-multiline"},Qe={class:"column is-10"},Xe={class:"column is-2"},el={class:"is-flex space-between mb-4 bottom-border"},ll={class:"title is-5 m-0"},al={class:"content"},tl={class:"is-flex"},sl={key:0,class:"columns is-multiline"},il={class:"column is-6"},nl={class:"column is-2"},ol={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},dl={class:"column is-2"},rl={class:"column is-2"},pl={class:"column is-2"},ml={class:"column is-2"},vl={class:"column is-2"},fl={class:"is-flex columns is-multiline"},hl=d({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const d=e;r();const F=Z(),M=Y(),D=p(!1),q={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},E=p(!1),$=p(!1),L=p(!1),R=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),H=p(""),N=p(""),B=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),z=p({title:"",is_template:!1,object:d.objectId??"",description:""}),J=p({title:"",is_template:!1,description:""}),K=async()=>{try{const e=await F.get(`/api/calculation-section/?object=${d.objectId??""}&user_id=${d.userId??""}&is_template=${d.fetchTemplates??""}`);R.value=e.data}catch(e){console.error(e)}finally{D.value=!1}},G=async()=>{try{const e=z.value;await F.post("/api/calculation-section/",e);M.success("Section created successfully!"),K()}catch(e){console.error(e)}finally{D.value=!1}};m((()=>B.value.width),(()=>{let e=0;e=B.value.height*B.value.width,B.value.item_area=e.toFixed(2)})),m((()=>B.value.item_unit_price),(()=>{let e=0;e=B.value.item_area*B.value.item_unit_price,B.value.item_total_price=e.toFixed(2)})),m((()=>B.value.quantity),(()=>{let e=0;e=B.value.item_total_price*B.value.quantity,B.value.grand_total_price=e.toFixed(2)}));const W=async()=>{try{const e=B.value;e.section=H.value;await F.post("/api/calculation-section-items/",e);M.success("Section created successfully!"),K()}catch(e){console.error(e)}finally{D.value=!1}},Q=v((()=>{if(N.value){const e=new RegExp(N.value,"i");return R.value.filter((l=>l.title?.match(e)))}return R.value})),ee=async e=>{try{await F.delete(`/api/calculation-section/${e}/`),M.success("Section deleted successfully!"),K()}catch(l){console.error(l),M.error("Failed to delete sheet.")}};return f((async()=>{await K(),await K()})),(e,d)=>{const r=O,p=P,m=u,v=c,f=o,F=n,M=i,D=s,R=t,K=l,Z=a,Y=h("tooltip");return _(),y("div",Re,[g("div",He,[b(p,null,{default:k((()=>[b(r,{icon:$.value?"fas fa-window-close":"fas fa-plus",color:$.value?"warning":"primary",class:"ml-2",raised:"",onClick:d[0]||(d[0]=e=>$.value=!$.value)},{default:k((()=>[w(j($.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:d[1]||(d[1]=e=>$.value=!$.value)},{default:k((()=>[w("Import")])),_:1})])),_:1}),g("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>N.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,N.value]])])),_:1})])]),g("div",Ne,[b(S,{name:"translate-page-y"},{default:k((()=>[$.value?(_(),y("div",Be,[g("div",ze,[g("div",Je,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":d[3]||(d[3]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(F,{modelValue:z.value.description,"onUpdate:modelValue":d[4]||(d[4]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ke,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(M,{modelValue:z.value.is_template,"onUpdate:modelValue":d[5]||(d[5]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),V(Q).length?T("",!0):(_(),U(D,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[Ge,We])),_:1})),b(S,{name:"translate-page-y"},{default:k((()=>[L.value?(_(),y("div",Ze,[g("div",Ye,[g("div",Qe,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":d[6]||(d[6]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(F,{modelValue:J.value.description,"onUpdate:modelValue":d[7]||(d[7]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Xe,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(M,{modelValue:J.value.is_template,"onUpdate:modelValue":d[8]||(d[8]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),b(S,{name:"from-bottom"},{default:k((()=>[V(Q).length?(_(!0),y(I,{key:0},A(V(Q),((e,l)=>(_(),y("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[g("div",el,[g("div",null,[g("h4",ll,j(e.title),1),g("div",al,[g("p",null,j(V(X)(e.created_at)),1)])]),g("div",tl,[b(R,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),x(b(R,{icon:"fas fa-plus",color:E.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{H.value=e,E.value=!E.value,0==E.value&&(B.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Y,"Add Item",void 0,{rounded:!0,primary:!0}]]),x(b(R,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Y,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(R,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),E.value?(_(),y("div",sl,[g("div",il,[b(f,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.title,"onUpdate:modelValue":d[9]||(d[9]=e=>B.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",nl,[b(f,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.height,"onUpdate:modelValue":d[10]||(d[10]=e=>B.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ol,[b(f,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.width,"onUpdate:modelValue":d[11]||(d[11]=e=>B.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",cl,[b(f,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_area,"onUpdate:modelValue":d[12]||(d[12]=e=>B.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ul,[b(f,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.unit,"onUpdate:modelValue":d[13]||(d[13]=e=>B.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",dl,[b(f,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_unit_price,"onUpdate:modelValue":d[14]||(d[14]=e=>B.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",rl,[b(f,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_total_price,"onUpdate:modelValue":d[15]||(d[15]=e=>B.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",pl,[b(f,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.quantity,"onUpdate:modelValue":d[16]||(d[16]=e=>B.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ml,[b(f,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.grand_total_price,"onUpdate:modelValue":d[17]||(d[17]=e=>B.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",vl,[b(r,{light:"",fullwidth:"",onClick:W,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[w("Add Item")])),_:1})])])):T("",!0),g("div",fl,[e.items.length?(_(),U(Z,{key:0,class:"column is-12",data:e.items,columns:q,compact:""},{body:k((()=>[b(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(_(!0),y(I,null,A(e.items,(e=>(_(),y("div",{key:e.id,class:"flex-table-item"},[b(K,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,{column:{align:"end"}},{default:k((()=>[b(R,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(R,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):T("",!0)])])))),128)):T("",!0)])),_:1})])])}}}),_l=D(hl,[["__scopeId","data-v-6b746c41"]]),yl=e=>(F("data-v-ce90a5fa"),e=e(),M(),e),gl={key:1},bl={class:"columns is-multiline"},kl={class:"list-flex-toolbar is-reversed column is-12"},wl={class:"multiselect-single-label"},jl=["src"],xl=["src"],Cl={class:"is-flex"},Tl={class:"card p-4 curved is-flex space-between"},Sl={class:"subtitle is-5 m-0"},Vl={class:"content"},Ul={class:"is-flex"},Il={key:1},Al=yl((()=>g("h1",{class:"title is-4"},"No File Uploaded",-1))),Ol=[Al],Pl={class:"modal-form columns is-multiline"},Fl={class:"file has-name"},Ml={class:"file-label"},Dl=yl((()=>g("span",{class:"file-cta"},[g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})]),g("span",{class:"file-label"}," Choose a file… ")],-1))),ql={class:"file-name light-text"},El=d({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;r(),p(null);const a=Z(),s=Y(),i=p(!1);p([[""]]);const n=p([]),d=p([]),h=p(""),S=p(!1);p("");const F=p("");p("");const M=p(!1),D=p(0),$=p({file:"",title:"",object:l.objectId}),L=e=>{let l=e.target.files[0];$.value.file=l,F.value=l.name,$.value.title=l.name},R=p(""),H=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),N=async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/?object=${l.objectId}`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}},B=(e="")=>{D.value=e,M.value=!0},z=p(!1),J=async()=>{try{z.value=!0;const e=ee($.value,[""]);await a.post("/api/excel-files/upload-excel/",e);N(),s.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,S.value=!1}};m((()=>R.value),(e=>{e&&(async e=>{try{z.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),s.success("Sheet create successfully"),N()}catch(l){console.error(l)}finally{z.value=!1,S.value=!1}})(e)}));p("excel");const K=v((()=>{if(h.value){const e=new RegExp(h.value,"i");return n.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return n.value.filter((e=>0==e.is_template))}));return v((()=>{if(h.value){const e=new RegExp(h.value,"i");return d.value.filter((l=>l.title?.match(e)))}return d.value})),f((async()=>{l.fetchAll&&await N(),l.userId&&(async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}})(),(async()=>{try{i.value=!0;const e=await a.get("/api/excel-files/templates/");d.value=e.data,H.value=d.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{i.value=!1}})(),await N()})),(e,n)=>{const d=ie,r=q("Multiselect"),p=u,m=o,v=O,f=P,z=t,G=Q,W=se,Z=c,Y=te;return i.value?(_(),U(d,{key:0})):(_(),y("div",gl,[g("div",bl,[g("div",kl,[b(f,null,{default:k((()=>[b(m,{style:{width:"260px"}},{default:k((({id:e})=>[b(p,null,{default:k((()=>[b(r,{modelValue:R.value,"onUpdate:modelValue":n[0]||(n[0]=e=>R.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:H.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[g("div",wl,[g("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,jl),w(" "+j(e.name),1)])])),option:k((({option:e})=>[g("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,xl),w(" "+j(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(v,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:n[1]||(n[1]=e=>B())},{default:k((()=>[w("New Sheet")])),_:1}),b(v,{icon:"fas fa-upload",raised:"",light:"",onClick:n[2]||(n[2]=e=>S.value=!S.value),outlined:"",color:"primary"},{default:k((()=>[w(" File ")])),_:1})])),_:1}),g("div",Cl,[b(p,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>h.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,h.value]])])),_:1})])]),V(K).length?(_(!0),y(I,{key:0},A(V(K),((e,l)=>(_(),y("div",{class:"column is-6",key:e.id},[g("div",Tl,[g("div",null,[g("h4",Sl,j(e.title),1),g("div",Vl,[g("p",null,j(V(X)(e.created_at)),1)])]),g("div",Ul,[b(z,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>B(e.id),"has-background":""},null,8,["onClick"]),b(z,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),s.success("Sheet deleted successfully!"),N()}catch(l){console.error(l),s.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(_(),y("div",Il,Ol))]),M.value?(_(),U(G,{key:0,class:"fullscreen","excel-file-modal":M.value,fileId:D.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":n[4]||(n[4]=e=>{M.value=!1,N()})},null,8,["excel-file-modal","fileId","object-id"])):T("",!0),b(Y,{is:"form",open:S.value,title:"Upload Task File",size:"medium",actions:"right",onClose:n[7]||(n[7]=e=>S.value=!1),onSubmit:E(J,["prevent"])},{content:k((()=>[g("div",Pl,[b(m,{class:"column is-12"},{default:k((()=>[b(W,null,{default:k((()=>[w("File Title")])),_:1}),b(p,null,{default:k((()=>[b(Z,{modelValue:$.value.title,"onUpdate:modelValue":n[5]||(n[5]=e=>$.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(m,{class:"column is-12",grouped:""},{default:k((()=>[b(p,null,{default:k((()=>[g("div",Fl,[g("label",Ml,[g("input",{onChange:L,class:"file-input",type:"file",name:"file",required:""},null,32),Dl,g("span",ql,j(F.value?F.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(v,{onClick:n[6]||(n[6]=e=>S.value=!1),raised:""},{default:k((()=>[w("Close")])),_:1})])),action:k((()=>[b(v,{type:"submit",color:"primary",raised:""},{default:k((()=>[w("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),$l=D(El,[["__scopeId","data-v-ce90a5fa"]]),Ll={class:"columns is-multiline"},Rl={class:"column is-3"},Hl={class:"column is-3"},Nl={class:"column is-3"},Bl={class:"column is-3"},zl={class:"column is-6"},Jl={class:"column is-6"},Kl={class:"column is-6"},Gl={class:"column is-6"},Wl={class:"column is-6"},Zl={class:"column is-6"},Yl=d({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=ye(),{revenueOptions:i}=ge(),{lineStatsChartOptions:n}=re(),{flexRadialChartCircleOptions:o}=pe(),{flexRadialChartStripesOptions:c}=me(),{widgetGaugeGroup1Options:u,widgetGaugeGroup2Options:d,widgetGaugeGroup3Options:r}=ve(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ce();return(e,f)=>{const h=he,w=fe,j=ue,x=de;return _(),y("div",Ll,[g("div",Rl,[b(h,{straight:""},{default:k((()=>[b(V(_e),{id:"widget-spark1",height:V(l).chart.height,type:V(l).chart.type,series:V(l).series,options:V(l)},null,8,["height","type","series","options"])])),_:1})]),g("div",Hl,[b(h,{straight:""},{default:k((()=>[b(V(_e),{id:"widget-spark2",height:V(a).chart.height,type:V(a).chart.type,series:V(a).series,options:V(a)},null,8,["height","type","series","options"])])),_:1})]),g("div",Nl,[b(h,{straight:""},{default:k((()=>[b(V(_e),{id:"widget-spark3",height:V(t).chart.height,type:V(t).chart.type,series:V(t).series,options:V(t)},null,8,["height","type","series","options"])])),_:1})]),g("div",Bl,[b(h,{straight:""},{default:k((()=>[b(V(_e),{id:"widget-spark4",height:V(s).chart.height,type:V(s).chart.type,series:V(s).series,options:V(s)},null,8,["height","type","series","options"])])),_:1})]),g("div",zl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(V(_e),{id:"line-stats-widget-chart",height:V(n).chart.height,type:V(n).chart.type,series:V(n).series,options:V(n)},null,8,["height","type","series","options"])])),_:1})]),g("div",Jl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(V(_e),{id:"line-stats-area-chart",height:V(i).chart.height,type:V(i).chart.type,series:V(i).series,options:V(i)},null,8,["height","type","series","options"])])),_:1})]),g("div",Kl,[b(j,{title:"Sales Revenue",straight:""},{default:k((()=>[b(V(_e),{id:"flex-stat-circle",height:V(o).chart.height,type:V(o).chart.type,series:V(o).series,options:V(o)},null,8,["height","type","series","options"])])),_:1})]),g("div",Gl,[b(j,{title:"Sales Revenue",straight:""},{default:k((()=>[b(V(_e),{id:"flex-stat-radial",height:V(c).chart.height,type:V(c).chart.type,series:V(c).series,options:V(c)},null,8,["height","type","series","options"])])),_:1})]),g("div",Wl,[b(x,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(V(_e),{id:"group-radial-1",height:V(p).chart.height,type:V(p).chart.type,series:V(p).series,options:V(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(V(_e),{id:"group-radial-2",height:V(m).chart.height,type:V(m).chart.type,series:V(m).series,options:V(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(V(_e),{id:"group-radial-3",height:V(v).chart.height,type:V(v).chart.type,series:V(v).series,options:V(v)},null,8,["height","type","series","options"])])),_:1})]),g("div",Zl,[b(x,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(V(_e),{id:"group-gauge-1",height:V(u).chart.height,type:V(u).chart.type,series:V(u).series,options:V(u)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(V(_e),{id:"group-gauge-2",height:V(d).chart.height,type:V(d).chart.type,series:V(d).series,options:V(d)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(V(_e),{id:"group-gauge-3",height:V(r).chart.height,type:V(r).chart.type,series:V(r).series,options:V(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Ql=e=>(F("data-v-1f68036b"),e=e(),M(),e),Xl={class:"timeline-wrapper"},ea=Ql((()=>g("div",{class:"timeline-header"},null,-1))),la={class:"timeline-wrapper-inner"},aa={class:"timeline-container"},ta={class:"timeline-item is-unread"},sa={class:"date"},ia={class:"content-wrap"},na={class:"content-box"},oa=Ql((()=>g("div",{class:"status"},null,-1))),ca={class:"box-text"},ua={class:"meta-text"},da=["innerHTML"],ra=d({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=Z(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=be;return _(),y("div",Xl,[ea,g("div",la,[g("div",aa,[(_(!0),y(I,null,A(V(t),(e=>(_(),y("div",ta,[g("div",sa,[g("span",null,j(V(ke)(e.timestamp).format("ddd, mm yyyy")),1)]),g("div",{class:$(["dot",s[e.action]])},null,2),g("div",ia,[g("div",na,[oa,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),g("div",ca,[g("div",ua,[g("p",null,[g("span",null,j(e.actor_info?.username??"N/A")+" "+j(e.actor_info?.last_name??"N/A"),1),g("span",{class:"log-message",innerHTML:e.message},null,8,da)]),g("span",null,j(V(ke)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),pa=D(ra,[["__scopeId","data-v-1f68036b"]]),ma={class:"table is-striped is-fullwidth"},va=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Job"),g("th",{scope:"col"},"ID"),g("th",{scope:"col"},"Title"),g("th",{scope:"col"},"Status"),g("th",{scope:"col"},"Total Price"),g("th",{scope:"col"},"Total Tax"),g("th",{scope:"col"},"Amount Paid"),g("th",{scope:"col"},"Balance"),g("th",{scope:"col"},"Deadline"),g("th",{scope:"col"},"Date Paid"),g("th",{scope:"col"},"Files"),g("th",{scope:"col",class:"is-end"},"Actions")])],-1),fa=g("td",null,"Tina",-1),ha=g("td",null,"Bergmann",-1),_a=g("td",null,"Sales",-1),ya=g("td",null,"Tina",-1),ga=g("td",null,"Bergmann",-1),ba=g("td",null,"Sales",-1),ka=g("td",null,"Tina",-1),wa=g("td",null,"Bergmann",-1),ja=g("td",null,"Sales",-1),xa=g("td",null,"Bergmann",-1),Ca=g("td",null,"Sales",-1),Ta={class:"is-end"},Sa={class:"is-flex is-justify-content-flex-end"},Va=g("td",null,"Tina",-1),Ua=g("td",null,"Bergmann",-1),Ia=g("td",null,"Sales",-1),Aa=g("td",null,"Tina",-1),Oa=g("td",null,"Bergmann",-1),Pa=g("td",null,"Sales",-1),Fa=g("td",null,"Tina",-1),Ma=g("td",null,"Bergmann",-1),Da=g("td",null,"Sales",-1),qa=g("td",null,"Bergmann",-1),Ea=g("td",null,"Sales",-1),$a={class:"is-end"},La={class:"is-flex is-justify-content-flex-end"},Ra=g("td",null,"Tina",-1),Ha=g("td",null,"Bergmann",-1),Na=g("td",null,"Sales",-1),Ba=g("td",null,"Tina",-1),za=g("td",null,"Bergmann",-1),Ja=g("td",null,"Sales",-1),Ka=g("td",null,"Tina",-1),Ga=g("td",null,"Bergmann",-1),Wa=g("td",null,"Sales",-1),Za=g("td",null,"Bergmann",-1),Ya=g("td",null,"Sales",-1),Qa={class:"is-end"},Xa={class:"is-flex is-justify-content-flex-end"},et=g("td",null,"Tina",-1),lt=g("td",null,"Bergmann",-1),at=g("td",null,"Sales",-1),tt=g("td",null,"Tina",-1),st=g("td",null,"Bergmann",-1),it=g("td",null,"Sales",-1),nt=g("td",null,"Tina",-1),ot=g("td",null,"Bergmann",-1),ct=g("td",null,"Sales",-1),ut=g("td",null,"Bergmann",-1),dt=g("td",null,"Sales",-1),rt={class:"is-end"},pt={class:"is-flex is-justify-content-flex-end"},mt=d({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=je;R();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),y("table",ma,[va,g("tbody",null,[g("tr",null,[fa,ha,_a,ya,ga,ba,ka,wa,ja,xa,Ca,g("td",Ta,[g("div",Sa,[b(a)])])]),g("tr",null,[Va,Ua,Ia,Aa,Oa,Pa,Fa,Ma,Da,qa,Ea,g("td",$a,[g("div",La,[b(a)])])]),g("tr",null,[Ra,Ha,Na,Ba,za,Ja,Ka,Ga,Wa,Za,Ya,g("td",Qa,[g("div",Xa,[b(a)])])]),g("tr",null,[et,lt,at,tt,st,it,nt,ot,ct,ut,dt,g("td",rt,[g("div",pt,[b(a)])])])])])}}}),vt={class:"table is-striped is-fullwidth"},ft=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"First Name"),g("th",{scope:"col"},"Last Name"),g("th",{scope:"col"},"Position"),g("th",{scope:"col",class:"is-end"},[g("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ht=g("td",null,"Tina",-1),_t=g("td",null,"Bergmann",-1),yt=g("td",null,"Head of Sales",-1),gt={class:"is-end"},bt={class:"is-flex is-justify-content-flex-end"},kt=g("td",null,"John",-1),wt=g("td",null,"Wistmus",-1),jt=g("td",null,"Senior Executive",-1),xt={class:"is-end"},Ct={class:"is-flex is-justify-content-flex-end"},Tt=g("td",null,"Sam",-1),St=g("td",null,"Watson",-1),Vt=g("td",null,"Software Engineer",-1),Ut={class:"is-end"},It={class:"is-flex is-justify-content-flex-end"},At=g("td",null,"Jolaine",-1),Ot=g("td",null,"Joestar",-1),Pt=g("td",null,"HR Manager",-1),Ft={class:"is-end"},Mt={class:"is-flex is-justify-content-flex-end"},Dt=g("td",null,"Anders",-1),qt=g("td",null,"Jensen",-1),Et=g("td",null,"Accountant",-1),$t={class:"is-end"},Lt={class:"is-flex is-justify-content-flex-end"},Rt=d({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=je;R();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),y("table",vt,[ft,g("tbody",null,[g("tr",null,[ht,_t,yt,g("td",gt,[g("div",bt,[b(a)])])]),g("tr",null,[kt,wt,jt,g("td",xt,[g("div",Ct,[b(a)])])]),g("tr",null,[Tt,St,Vt,g("td",Ut,[g("div",It,[b(a)])])]),g("tr",null,[At,Ot,Pt,g("td",Ft,[g("div",Mt,[b(a)])])]),g("tr",null,[Dt,qt,Et,g("td",$t,[g("div",Lt,[b(a)])])])])])}}}),Ht={class:"columns is-multiline"},Nt={class:"column is-12"},Bt={class:"toolbar"},zt={class:"tabs-inner"},Jt={class:"tabs"},Kt=g("span",null,"Estimate",-1),Gt=[Kt],Wt=g("span",null,"Budget",-1),Zt=[Wt],Yt=g("span",null,"Owner Invoice",-1),Qt=[Yt],Xt=g("li",{class:"tab-naver"},null,-1),es={key:0,class:"column is-12"},ls={key:1,class:"column is-12"},as={key:2,class:"column is-12"},ts=d({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=je;R();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Rt,s=mt;return _(),y("div",Ht,[g("div",Nt,[g("div",Bt,[g("div",zt,[g("div",Jt,[g("ul",null,[g("li",{class:$(["estimate"===V(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H(E((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},Gt,32)],2),g("li",{class:$(["budget"===V(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H(E((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},Zt,32)],2),g("li",{class:$(["invoice"===V(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H(E((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Qt,32)],2),Xt])])])])]),"estimate"===V(a)?(_(),y("div",es,[b(t)])):T("",!0),"budget"===V(a)?(_(),y("div",ls)):T("",!0),"invoice"===V(a)?(_(),y("div",as,[b(s)])):T("",!0)])}}}),ss={class:"user-grid-toolbar"},is=g("span",{class:"icon"},[g("i",{class:"fas fa-plus"})],-1),ns=g("span",null,"Progress",-1),os={class:"user-grid user-grid-v1"},cs={class:"columns is-multiline"},us={class:"grid-item"},ds={class:"is-flex"},rs=d({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=u,n=q("Multiselect"),c=o,d=O,r=P,p=B,m=Te,v=Ce;return _(),y("div",null,[g("div",ss,[b(i,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>N(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,V(l)]])])),_:1}),b(r,null,{default:k((()=>[b(c,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:V(a),"onUpdate:modelValue":s[1]||(s[1]=e=>N(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(d,null,{default:k((()=>[is,ns])),_:1})])),_:1})]),g("div",os,[g("div",cs,[(_(),y(I,null,A(20,(e=>g("div",{key:e,class:"column is-3"},[g("div",us,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),g("div",ds,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ps={key:1},ms={class:"card-grid-toolbar"},vs={class:"buttons"},fs=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),hs=g("span",null,"Progress",-1),_s={class:"card-grid card-grid-v4"},ys=g("img",{class:"light-image",src:G,alt:""},null,-1),gs=g("img",{class:"dark-image",src:W,alt:""},null,-1),bs=["href","title"],ks=["src","alt"],ws={class:"card-grid-item-content"},js={class:"dark-inverted"},xs={key:0},Cs=g("summary",null,"Read More",-1),Ts={key:0,class:"card-grid-item-footer"},Ss={class:"meta"},Vs={class:"dark-inverted"},Us=d({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=Z(),t=p(""),i=p(!1),n=p(!1),c=p(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const h=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return f((()=>{"job"===l.type&&m()})),(e,a)=>{const r=rs,p=u,v=q("Multiselect"),f=o,P=O,F=s,M=be,D=xe;return V(i)?(_(),U(r,{key:0})):(_(),y("div",ps,[g("div",ms,[b(p,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>N(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,V(t)]])])),_:1}),g("div",vs,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:V(c),"onUpdate:modelValue":a[1]||(a[1]=e=>N(c)?c.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(P,{onClick:a[2]||(a[2]=e=>n.value=!V(n)),color:"primary",raised:""},{default:k((()=>[fs,hs])),_:1})])]),g("div",_s,[b(F,{class:$([0!==V(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ys,gs])),_:1},8,["class"]),b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(V(h),(e=>(_(),y("div",{key:e.id,class:"column is-3"},[g("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[g("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>V(Se)(400,300))},null,40,ks),g("div",ws,[g("h3",js,j(e.title?e.title:"No Title"),1),g("p",null,[w(j(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(_(),y("details",xs,[Cs,w(" "+j(e.description?e.description:""),1)])):T("",!0)])]),e.uploaded_by_info?(_(),y("div",Ts,[b(M,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),g("div",Ss,[g("span",Vs,j(e.uploaded_by_info.username??"N/A")+" "+j(e.uploaded_by_info.last_name??""),1),g("span",null,j(V(X)(e.created_at)),1)])])):T("",!0)],8,bs)])))),128))])),_:1})]),V(n)?(_(),U(D,{key:0,job:l.object,openProgressModal:V(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):T("",!0)]))}}}),Is={class:"columns is-multiline"},As={class:"column is-12"},Os={class:"column is-12"},Ps=d({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},parent:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(!1),s=Z(),i=Y(),d=()=>{l("update:modalHandler",!1)},r=p({id:"",type:a.type,object:a.object,parent:a.parent,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),m=async()=>{try{t.value=!0;const e=ee(r.value,[""]);e.append("value",r.value.title.replaceAll(" ","").toLocaleLowerCase());await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),d()}catch(e){console.log(e)}finally{t.value=!1}};return f((()=>{})),(e,l)=>{const s=c,i=u,p=o,v=n,f=O,h=te;return _(),U(h,{is:"form",open:a.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:E(m,["prevent"]),onClose:l[2]||(l[2]=e=>d())},{content:k((()=>[g("div",Is,[g("div",As,[b(p,{label:"Title *"},{default:k((()=>[b(i,null,{default:k((()=>[b(s,{modelValue:V(r).title,"onUpdate:modelValue":l[0]||(l[0]=e=>V(r).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Os,[b(p,{label:"Description (Optional)"},{default:k((()=>[b(i,null,{default:k((()=>[b(v,{modelValue:V(r).description,"onUpdate:modelValue":l[1]||(l[1]=e=>V(r).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:k((()=>[b(f,{loading:V(t),type:"submit",color:"warning",raised:""},{default:k((()=>[w("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Fs={class:"modal-form columns is-multiline"},Ms={class:"field column is-full is-justify-content-center"},Ds={class:"file"},qs={class:"file-label"},Es={class:"file-cta"},$s=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Ls={class:"file-label"},Rs={key:0,class:"column is-full"},Hs=g("p",null,"Selected Files",-1),Ns=g("br",null,null,-1),Bs=d({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess","updateTask:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(null),s=Z(),i=Y(),n=p(!1),c=r(),d=p(""),m=p([]),v=()=>{l("close:ModalHandler",!1)},h=p({type:a.type,object:a.object,title:"",uploaded_by:c.user.id,file:null}),x=async()=>{try{n.value=!0;const t=ee(h.value,["file"]),o=await s.post("/api/attachment/",t);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${h.value.title}</b>.`,performedOnName:"job"}),i.success("File uploaded successfully!"),e=o.data.task_id,l("updateTask:OnSuccess",e),l("update:OnSuccess",null),v()}catch(t){console.log(t)}finally{n.value=!1}var e},C=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);h.value.file=e,m.value=e.map((e=>e.name)),d.value=e.length>1?`${e.length} files selected`:e[0].name,fromCamera.value&&(h.value.title=e[0].name,await x())}t.value&&(t.value.value="")};return f((()=>{})),(e,l)=>{const t=u,s=o,i=O,c=te;return _(),U(c,{is:"form",open:a.openFileModal,title:"Add Attachment",size:"small",actions:"center",onSubmit:E(x,["prevent"]),onClose:v},{content:k((()=>[g("div",Fs,[g("div",Ms,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Ds,[g("label",qs,[g("input",{onChange:C,class:"file-input",type:"file",name:"resume",multiple:""},null,32),g("span",Es,[$s,g("span",Ls,j(V(d)?V(d):"Choose file(s)…"),1)])])])])),_:1})])),_:1})]),V(m).length?(_(),y("div",Rs,[Hs,(_(!0),y(I,null,A(V(m),(e=>(_(),y("span",null,[w(j(e)+" ",1),Ns])))),256))])):T("",!0)])])),action:k((()=>[b(i,{type:"submit",color:"primary",loading:V(n),raised:""},{default:k((()=>[w(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(i,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),zs={key:0,class:"modal-form"},Js=["src"],Ks=["src"],Gs=["src"],Ws=["src"],Zs={key:1,class:"modal-form"},Ys=g("h1",{class:"title is-5"},"No media file attached",-1),Qs=[Ys],Xs=d({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Ae,n=O,o=te;return _(),U(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(_(),y("div",zs,[a.document?.includes(".pdf")?(_(),y("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Js)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(_(),y("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ks)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(_(),y("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Gs)):T("",!0),a.document?.includes(".mp4")?(_(),U(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(_(),y("img",{key:4,src:a.document,alt:""},null,8,Ws))])):(_(),y("div",Zs,Qs))])),cancel:k((()=>[b(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","title"])}}}),ei={class:"tile-grid-item"},li={class:"tile-grid-item-inner"},ai=["src"],ti={class:"meta"},si={class:"dark-inverted"},ii=g("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),ni=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),oi=g("div",{class:"meta"},[g("span",null,"Download"),g("span",null,"Download this file")],-1),ci=[ni,oi],ui=g("hr",{class:"dropdown-divider"},null,-1),di=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),ri=g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete this file")],-1),pi=[di,ri],mi=d({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",webp:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=p("");return(e,c)=>{const u=Ie;return _(),y("div",null,[g("div",ei,[g("div",li,[g("img",{onClick:c[0]||(c[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,ai),g("div",ti,[g("span",si,j(a.document.title??"N/A"),1),g("span",null,[g("span",null,j(a.document?.file_info?.size??0)+" MB",1),ii,g("span",null,"At:"+j(V(ae)(a.document.created_at)),1)])]),b(u,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[g("a",{role:"menuitem",onClick:c[1]||(c[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},ci),ui,g("a",{role:"menuitem",onClick:c[2]||(c[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},pi)])),_:1})])]),V(s)?(_(),U(Xs,{key:0,openDocViewModal:V(s),document:V(t),DocumentType:V(o),title:V(i),"onUpdate:closeModalHandler":c[3]||(c[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):T("",!0)])}}}),vi={key:1},fi={key:0},hi={class:"tabs-wrapper"},_i={class:"tabs-inner"},yi={class:"tabs"},gi=g("span",null,"Recent",-1),bi=[gi],ki=["onKeydown","onClick"],wi={key:0},ji={key:0},xi={class:"tile-grid-toolbar"},Ci={class:"buttons"},Ti=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Si=g("span",null,"File",-1),Vi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Ui=g("span",null,"Folder",-1),Ii=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Ai=g("span",null,"Folder",-1),Oi={key:1},Pi={class:"tile-grid-toolbar"},Fi={class:"buttons"},Mi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Di=g("span",null,"File",-1),qi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Ei=g("span",null,"Folder",-1),$i=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Li=g("span",null,"Folder",-1),Ri={class:"tile-grid tile-grid-v2"},Hi=g("img",{class:"light-image",src:G,alt:""},null,-1),Ni=g("img",{class:"dark-image",src:W,alt:""},null,-1),Bi=d({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=Y(),i=Z(),n=p(!1),c=p([]),d=p(""),r=p(0),m=p(!1),h=p(""),w=p(""),P=p(""),F=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),M=["All Files","Recently Updated","My Files","Team Files","Deprecated"],D=()=>{d.value=a.docType,n.value=!n.value};p("");const L=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),R=()=>{L.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},B=async()=>{try{const e=await i.delete(`/api/media-folder/${a.folderId}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),L.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},z=async()=>{try{m.value=!0;const e=await i.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);F.value=e.data}catch(e){console.log(e)}finally{m.value=!1}},J=async()=>{try{const e=await i.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);c.value=e.data,P.value="recent"}catch(e){console.log(e)}},K=async e=>{try{const l=await i.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),t.purple("File Deleted Successfully"),z()}catch(l){console.log(l)}},G=p(!1),W=(e="")=>{h.value=e,G.value=!G.value},Q=v((()=>w.value?F.value.filter((e=>e.title.match(new RegExp(w.value,"i"))||e.file_info?.name?.match(new RegExp(w.value,"i"))||e.created_at.match(new RegExp(w.value,"i")))):F.value));return f((()=>{z(),J()})),(e,l)=>{const t=ie,i=q("ObjectDocumentsTiles",!0),p=u,v=q("Multiselect"),f=o,h=O,F=mi,Z=s,Y=Ue,X=Bs,ee=Ps;return _(),y("div",null,[V(m)?(_(),U(t,{key:0,rows:4})):(_(),y("div",vi,[V(c).length?(_(),y("div",fi,[g("div",hi,[g("div",_i,[g("div",yi,[g("ul",null,[g("li",{class:$(["recent"===V(P)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H(E((e=>P.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>P.value="recent")},bi,32)],2),(_(!0),y(I,null,A(V(c),(e=>(_(),y("li",{class:$([V(P)===e.value&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:H(E((l=>P.value=e.value),["prevent"]),["space"]),onClick:l=>P.value=e.value},[g("span",null,j(e.title),1)],40,ki)],2)))),256))])])])]),(_(!0),y(I,null,A(V(c),(e=>(_(),y("div",{key:e.id},[V(P)==e.value?(_(),y("div",wi,[b(i,{onDeleteFolderUpdate:l[2]||(l[2]=e=>J()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128)),"recent"===V(P)?(_(),y("div",ji,[g("div",xi,[b(p,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>N(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,V(w)]])])),_:1}),g("div",Ci,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:V(r),"onUpdate:modelValue":l[4]||(l[4]=e=>N(r)?r.value=e:null),options:M,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[5]||(l[5]=e=>D()),color:"primary",raised:""},{default:k((()=>[Ti,Si])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[Vi,Ui])),_:1}),b(h,{onClick:R,color:"danger",raised:""},{default:k((()=>[Ii,Ai])),_:1})])]),b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(V(Q),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(F,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])):T("",!0)])):(_(),y("div",Oi,[g("div",Pi,[b(p,{icon:"feather:search"},{default:k((()=>[x(g("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>N(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,V(w)]])])),_:1}),g("div",Fi,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:V(r),"onUpdate:modelValue":l[7]||(l[7]=e=>N(r)?r.value=e:null),options:M,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[8]||(l[8]=e=>D()),color:"primary",raised:""},{default:k((()=>[Mi,Di])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[qi,Ei])),_:1}),b(h,{onClick:R,color:"danger",raised:""},{default:k((()=>[$i,Li])),_:1})])]),g("div",Ri,[0!=V(Q).length||V(m)?T("",!0):(_(),U(Z,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Hi,Ni])),_:1})),g("div",null,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(V(Q),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(F,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])])])),V(L).isSweetAlertOpen?(_(),U(Y,{key:2,isSweetAlertOpen:V(L).isSweetAlertOpen,title:V(L).title,subtitle:V(L).subtitle,btntext:V(L).btntext,onConfirm:B,onCancel:()=>V(L).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):T("",!0),V(n)?(_(),U(X,{key:3,openFileModal:V(n),object:a.objectId,type:V(d),"onClose:ModalHandler":l[9]||(l[9]=e=>n.value=!1),"onUpdate:OnSuccess":z},null,8,["openFileModal","object","type"])):T("",!0),V(G)?(_(),U(ee,{key:4,"open-create-folder-modal":V(G),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[10]||(l[10]=e=>G.value=!1),"onUpdate:onSuccess":l[11]||(l[11]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):T("",!0)]))])}}}),zi={class:"modal-form columns is-multiline"},Ji={class:"column is-12 is-flex is-justify-content-center"},Ki={class:"file"},Gi=["onClick"],Wi={class:"file-cta"},Zi=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Yi={class:"file-label"},Qi=g("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Xi={key:0,class:"column is-full text-align-center"},en=g("br",null,null,-1),ln=d({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess","updateTask:OnSuccess"],setup(e,{emit:l}){const a=e,t=Z(),s=Y(),i=p(!1),n=r(),c=p(""),d=p(null),m=p(!1),v=()=>{l("close:ModalHandler",!1)},f=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{var e;if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const n=ee(f.value,["file"]),o=await t.post("/api/attachment/",n);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),e=o.data.task_id,l("updateTask:OnSuccess",e),v()}catch(n){console.error(n)}finally{i.value=!1}},x=()=>{m.value=!0,d.value&&(d.value.accept="image/*",d.value.setAttribute("capture","environment"),d.value.removeAttribute("multiple"),d.value.click())},C=()=>{m.value=!1,d.value&&(d.value.accept="image/*",d.value.removeAttribute("capture"),d.value.setAttribute("multiple","true"),d.value.click())},S=p([]),P=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,S.value=e.map((e=>e.name)),c.value=e.length>1?`${e.length} photos selected`:e[0].name,m.value&&(f.value.title=e[0].name,await h())}d.value&&(d.value.value="")};return(e,l)=>{const t=u,s=o,n=Oe,r=O,p=te;return _(),U(p,{is:"form",open:a.openFileModal,title:"Add Photos",size:"small",actions:"center",onSubmit:E(h,["prevent"]),onClose:v},{content:k((()=>[g("div",zi,[g("input",{ref_key:"fileInput",ref:d,onChange:P,class:"file-input",type:"file",style:{display:"none"}},null,544),g("div",Ji,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Ki,[g("label",{class:"file-label",onClick:E(C,["prevent"])},[g("span",Wi,[Zi,g("span",Yi,j(V(c)?V(c):"Choose photo(s)"),1)])],8,Gi)])])),_:1})])),_:1}),b(n,{class:"ml-2",onClick:x,size:"small",color:"info",bordered:""},{default:k((()=>[Qi])),_:1})]),V(S).length?(_(),y("div",Xi,[g("p",null,"Selected Photos ("+j(V(S).length)+")",1),(_(!0),y(I,null,A(V(S),(e=>(_(),y("span",null,[w(j(e)+" ",1),en])))),256))])):T("",!0)])])),action:k((()=>[b(r,{type:"submit",color:"primary",loading:V(i),raised:""},{default:k((()=>[w(" Save ")])),_:1},8,["loading"])])),cancel:k((()=>[b(r,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),an={class:"modal-form columns is-multiline"},tn={class:"column is-12 is-flex is-justify-content-center"},sn={class:"file"},nn=["onClick"],on={class:"file-cta"},cn=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),un={class:"file-label"},dn=g("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),rn={key:0,class:"column is-full text-align-center"},pn=g("br",null,null,-1),mn=d({__name:"UploadJobVideosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess","updateTask:OnSuccess"],setup(e,{emit:l}){const a=e,t=Z(),s=Y(),i=p(!1),n=r(),c=p(""),d=p(null),m=p(!1),v=()=>{l("close:ModalHandler",!1)},f=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{var e;if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const n=ee(f.value,["file"]),o=await t.post("/api/attachment/",n);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),e=o.data.task_id,l("updateTask:OnSuccess",e),v()}catch(n){console.error(n)}finally{i.value=!1}},x=()=>{m.value=!0,d.value&&(d.value.accept="image/*",d.value.setAttribute("capture","environment"),d.value.removeAttribute("multiple"),d.value.click())},C=()=>{m.value=!1,d.value&&(d.value.accept="image/*",d.value.removeAttribute("capture"),d.value.setAttribute("multiple","true"),d.value.click())},S=p([]),P=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,S.value=e.map((e=>e.name)),c.value=e.length>1?`${e.length} photos selected`:e[0].name,m.value&&(f.value.title=e[0].name,await h())}d.value&&(d.value.value="")};return(e,l)=>{const t=u,s=o,n=Oe,r=O,p=te;return _(),U(p,{is:"form",open:a.openFileModal,title:"Upload Video",size:"small",actions:"center",onSubmit:E(h,["prevent"]),onClose:v},{content:k((()=>[g("div",an,[g("input",{ref_key:"fileInput",ref:d,onChange:P,class:"file-input",type:"file",accept:"video/*",style:{display:"none"}},null,544),g("div",tn,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",sn,[g("label",{class:"file-label",onClick:E(C,["prevent"])},[g("span",on,[cn,g("span",un,j(V(c)?V(c):"Choose photo(s)"),1)])],8,nn)])])),_:1})])),_:1}),b(n,{class:"ml-2",onClick:x,size:"small",color:"info",bordered:""},{default:k((()=>[dn])),_:1})]),V(S).length?(_(),y("div",rn,[g("p",null,"Selected Photos ("+j(V(S).length)+")",1),(_(!0),y(I,null,A(V(S),(e=>(_(),y("span",null,[w(j(e)+" ",1),pn])))),256))])):T("",!0)])])),action:k((()=>[b(r,{type:"submit",color:"primary",loading:V(i),raised:""},{default:k((()=>[w(" Save ")])),_:1},8,["loading"])])),cancel:k((()=>[b(r,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),vn={class:"column is-2"},fn=["src","alt"],hn=["src","alt"],_n={class:"card-grid-item-content is-flex is-align-items-center space-between"},yn=d({__name:"NewDocumentViewer",props:{file:{}},emits:["updateOnSuccess"],setup(e,{emit:l}){const a=e,s=Z(),i=Y(),n=p(""),o=p(!1),c=p(""),u=p(!1),d=p(""),r=p(""),m=e=>{c.value=e.file_info?.url,r.value=e.file_info?.type,d.value=e.title,u.value=!u.value},v={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},h=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",icon:""}),b=async e=>{try{await s.delete(`/api/attachment/${n.value?n.value:e}/`),l("updateOnSuccess",null),h.value.isSweetAlertOpen=!1,i.success("File deleted successfully")}catch(a){console.error("Error deleting file:",a)}},k=()=>{o.value=""};return f((()=>{})),(e,l)=>{const s=t,i=Xs,p=Ue;return _(),y("div",vn,[g("a",{onMouseover:l[4]||(l[4]=e=>{return l=a.file.id,void(o.value=l);var l}),onMouseleave:k,class:"card-grid-item is-relative"},["png"===a.file?.file_info?.type||"jpg"===a.file?.file_info?.type||"webp"===a.file?.file_info?.type||"jpeg"===a.file?.file_info?.type?(_(),y("img",{key:0,src:a.file?.file_info?.url,alt:a.file?.title,onClick:l[0]||(l[0]=e=>m(a.file))},null,8,fn)):(_(),y("img",{key:1,src:v[a.file?.file_info?.type],alt:a.file?.title,onClick:l[1]||(l[1]=e=>m(a.file))},null,8,hn)),g("div",_n,[g("h3",{onClick:l[2]||(l[2]=e=>m(a.file)),class:"dark-inverted"},j(a.file_info?.name),1),g("span",null,[g("span",null,j(a.file?.file_info?.size?a.file?.file_info?.size:0)+" MB",1)]),V(o)==a.file?.id?(_(),U(s,{key:0,squared:"",darkCardBordered:"",style:{position:"absolute",top:"1%",right:"1%"},icon:"fas fa-trash",color:"danger",onClick:l[3]||(l[3]=e=>{return l=a.file?.id,n.value=l,void(h.value={title:" Delete this file?",subtitle:"This file will be deleted permanently.",isSweetAlertOpen:!0,btntext:"Delete",icon:"fas fa-bell"});var l})})):T("",!0)])],32),V(u)?(_(),U(i,{key:0,openDocViewModal:V(u),document:V(c),DocumentType:V(r),title:V(d),"onUpdate:closeModalHandler":l[5]||(l[5]=e=>u.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):T("",!0),V(h).isSweetAlertOpen?(_(),U(p,{key:1,title:V(h).title,subtitle:V(h).subtitle,btntext:V(h).btntext,icon:V(h).icon,onCancel:()=>{V(h).isSweetAlertOpen=!1},onConfirm:b},null,8,["title","subtitle","btntext","icon","onCancel"])):T("",!0)])}}}),gn={class:"card-grid-toolbar"},bn={class:"h-hidden-mobile"},kn={class:"buttons"},wn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus h-hidden-mobile"}),g("i",{class:"fas fa-file-medical h-hidden-desktop","aria-hidden":"true"})],-1),jn={class:"h-hidden-mobile"},xn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Cn=g("span",{class:"h-hidden-mobile"},"Folder",-1),Tn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Sn=g("span",null,"Folder",-1),Vn={key:0,class:"card-grid card-grid-v4"},Un={class:"columns is-multiline"},In={class:"card-grid-item"},An={class:"card-grid card-grid-v4"},On=["onClick"],Pn=g("img",{src:"/icons/folders.png",alt:"item.title"},null,-1),Fn={class:"card-grid-item-content"},Mn={class:"dark-inverted"},Dn={key:1,class:"card-grid card-grid-v4"},qn=g("div",{class:"column is-2"},[g("div",{class:"card-grid-item"},[g("img",{class:"light-image",src:G,alt:""}),g("img",{class:"dark-image",src:W,alt:""}),g("div",{class:"card-grid-item-content"},[g("h3",{class:"dark-inverted"},"No Item Found")])])],-1),En=d({__name:"NewJobFolders",props:{objectId:String,type:{type:String,required:!0}},setup(e){const l=e,a=Y(),t=Z(),s=p(""),i=p(!1),n=p(!1),o=p(!1),c=p([]),u=p([]),d=p([]),r=p(!1),m=p(""),h=v((()=>c.value[c.value.length-1]||null)),x=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",Icon:""}),C=async()=>{r.value=!0;try{const e=await t.get(`/api/media-folder/?object=${l.objectId}&type=${l.type}`);u.value=e.data.filter((e=>null===e.parent)),d.value=[]}catch(e){console.error("Error fetching top folders:",e)}finally{r.value=!1}},V=async e=>{r.value=!0;try{const a=await t.get(`/api/media-folder/${e}/sub-folders/`);u.value=a.data;const s=await t.get(`/api/attachment/by-object/${e}/?type=${l.type}`);d.value=s.data}catch(a){console.error("Error fetching folder contents:",a)}finally{r.value=!1}},P=async()=>{c.value.pop();const e=h.value;e?await V(e.id):await C()},F=p(!1),M=p(""),D=p(""),q=async()=>{h.value?M.value=h.value?h.value.id:"":D.value=l.objectId,F.value=!0},E=async()=>{M.value?await V(M.value):await C()},$=()=>{s.value=h.value?h.value.id:l.objectId,"photos"==l.type?n.value=!0:"videos"==l.type?o.value=!0:i.value=!0},L=async()=>{try{x.value.isSweetAlertOpen=!1,await t.delete(`/api/media-folder/${m.value}/`),P(),h.value?await V(h.value.id):await C(),a.success("Folder deleted successfully")}catch(e){console.error("Error deleting folder:",e)}},R=async()=>{h.value&&await V(h.value.id)};p({state:"",result:[]});const H=async e=>{try{await t.get(`api/upload-status/${e}/`);a.info("Your files will be uploaded soon."),setTimeout((()=>{V(s.value)}),9e4)}catch(l){console.log(l)}};return f((()=>{C()})),(e,a)=>{const t=O,p=B,v=yn,f=Bs,C=mn,N=ln,z=Ue,J=Ps;return _(),y("div",null,[g("div",gn,[c.value.length?(_(),U(t,{key:0,color:"warning",light:"",class:"mr-1",size:"medium",outlined:"",onClick:P,icon:"fas fa-chevron-left"})):T("",!0),g("div",bn,[h.value?(_(),U(t,{key:1,color:"warning",light:"",bold:"",fullwidth:"",icon:"fas fa-folder-open"},{default:k((()=>[w(j(h.value.title),1)])),_:1})):(_(),U(t,{key:0,icon:"fas fa-folder",color:"warning",light:"",bold:"",fullwidth:""},{default:k((()=>[w("Main Folders")])),_:1}))]),g("div",kn,[h.value?(_(),U(t,{key:0,onClick:$,color:"primary",outlined:"",raised:""},{default:k((()=>[wn,g("span",jn,j("photos"==l.type?"Photos":"File"),1)])),_:1})):T("",!0),b(t,{onClick:q,color:"info",outlined:"",raised:""},{default:k((()=>[xn,Cn])),_:1}),h.value?(_(),U(t,{key:1,onClick:a[0]||(a[0]=e=>((e="")=>{m.value=e.id,x.value={title:`Delete ${e.title} folder?`,subtitle:"Once deleted, you will not be able to recover this folder and the content in it.",isSweetAlertOpen:!0,btntext:"Delete",Icon:"fas fa-bell"}})(h.value)),color:"danger",raised:"",outlined:""},{default:k((()=>[Tn,Sn])),_:1})):T("",!0)])]),g("div",null,[r.value?(_(),y("div",Vn,[g("div",Un,[(_(),y(I,null,A(18,(e=>g("div",{key:e,class:"column is-2"},[g("div",In,[b(p,{height:"160px"})])]))),64))])])):T("",!0),g("div",An,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[u.value.length?(_(!0),y(I,{key:0},A(u.value,(e=>(_(),y("div",{key:e.id,class:"column is-2"},[g("a",{onClick:l=>(async e=>{c.value.push(e),await V(e.id)})(e),class:"card-grid-item"},[Pn,g("div",Fn,[g("h3",Mn,j(e.title),1)])],8,On)])))),128)):T("",!0),d.value.length?(_(!0),y(I,{key:1},A(d.value,(e=>(_(),U(v,{key:e.id,file:e,onUpdateOnSuccess:R},null,8,["file"])))),128)):T("",!0)])),_:1})]),u.value.length||d.value.length||r.value?T("",!0):(_(),y("div",Dn,[b(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[qn])),_:1})])),i.value?(_(),U(f,{key:2,openFileModal:i.value,object:s.value,type:l.type,"onClose:ModalHandler":a[1]||(a[1]=e=>i.value=!1),"onUpdate:OnSuccess":a[2]||(a[2]=e=>V(s.value)),"onUpdateTask:OnSuccess":H},null,8,["openFileModal","object","type"])):T("",!0),o.value?(_(),U(C,{key:3,openFileModal:o.value,object:s.value,type:l.type,"onClose:ModalHandler":a[3]||(a[3]=e=>o.value=!1),"onUpdate:OnSuccess":a[4]||(a[4]=e=>V(s.value)),"onUpdateTask:OnSuccess":H},null,8,["openFileModal","object","type"])):T("",!0),n.value?(_(),U(N,{key:4,openFileModal:n.value,object:s.value,type:l.type,"onClose:ModalHandler":a[5]||(a[5]=e=>n.value=!1),"onUpdate:OnSuccess":a[6]||(a[6]=e=>V(s.value)),"onUpdateTask:OnSuccess":H},null,8,["openFileModal","object","type"])):T("",!0),x.value.isSweetAlertOpen?(_(),U(z,{key:5,title:x.value.title,subtitle:x.value.subtitle,btntext:x.value.btntext,icon:x.value.Icon,onCancel:()=>{x.value.isSweetAlertOpen=!1},onConfirm:L},null,8,["title","subtitle","btntext","icon","onCancel"])):T("",!0),F.value?(_(),U(J,{key:6,"open-create-folder-modal":F.value,type:l.type,object:D.value,parent:M.value,"onUpdate:modalHandler":a[7]||(a[7]=e=>F.value=!1),"onUpdate:OnSuccess":E},null,8,["open-create-folder-modal","type","object","parent"])):T("",!0)])])}}}),$n={class:"tabs-wrapper"},Ln={class:"tabs-inner"},Rn={class:"tabs is-boxed"},Hn=[g("span",null,"Documents",-1)],Nn=[g("span",null,"Photos",-1)],Bn=[g("span",null,"Videos",-1)],zn=g("li",{class:"tab-naver"},null,-1),Jn={key:0},Kn={class:"tile-grid tile-grid-v2"},Gn=g("img",{class:"light-image",src:G,alt:""},null,-1),Wn=g("img",{class:"dark-image",src:W,alt:""},null,-1),Zn={key:1},Yn={key:2},Qn=d({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo","updateOnSuccess"],setup(e,{emit:l}){const a=e;Y();const t=Z(),i=p("");p(0);const n=p(""),o=p("contracts"),c=p(!1),u=p([]),d=p("documents");p("site_visits"),p("job_videos");const r=v((()=>i.value?Pe.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Pe)),m=async(e="contracts")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},h=p(""),w=p(!1),j=p([]),x=p([]),C=p([]),S=async(e="")=>{try{const l=await t.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?j.value=l.data:"photos"===e?x.value=l.data:"videos"===e&&(C.value=l.data)}catch(l){console.log(l)}},I=(e="documents")=>{"documents"===e?S("documents"):"photos"===e?S("photos"):"videos"===e&&S("videos")};return f((()=>{m(),I("documents")})),(e,l)=>{const t=En,i=s,o=Bs,u=Ps;return _(),y("div",null,[g("div",$n,[g("div",Ln,[g("div",Rn,[g("ul",null,[g("li",{class:$(["documents"===V(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H(E((e=>d.value="documents"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>{d.value="documents",I("documents")})},Hn,32)],2),g("li",{class:$(["photos"===V(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H(E((e=>d.value="photos"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>{d.value="photos",I("photos")})},Nn,32)],2),g("li",{class:$(["videos"===V(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H(E((e=>d.value="videos"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>{d.value="videos",I("videos")})},Bn,32)],2),zn])])])]),"documents"==V(d)?(_(),y("div",Jn,[b(t,{type:"documents",objectId:a.leadId},null,8,["objectId"]),g("div",Kn,[b(i,{class:$([0!==V(r).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Gn,Wn])),_:1},8,["class"])])])):T("",!0),"photos"==V(d)?(_(),y("div",Zn,[b(t,{type:"photos",objectId:a.leadId},null,8,["objectId"])])):T("",!0),"videos"==V(d)?(_(),y("div",Yn,[b(t,{type:"videos",objectId:a.leadId},null,8,["objectId"])])):T("",!0),V(c)?(_(),U(o,{key:3,openFileModal:V(c),object:a.leadId,type:V(n),"onClose:ModalHandler":l[6]||(l[6]=e=>c.value=!1),"onUpdate:OnSuccess":m},null,8,["openFileModal","object","type"])):T("",!0),V(w)?(_(),U(u,{key:4,"open-create-folder-modal":V(w),type:V(h),object:a.leadId,"onUpdate:modalHandler":l[7]||(l[7]=e=>w.value=!1),"onUpdate:onSuccess":l[8]||(l[8]=e=>I(V(h)))},null,8,["open-create-folder-modal","type","object"])):T("",!0)])}}}),Xn={class:"stat-widget flex-stat-widget is-straight"},eo={class:"chart-media"},lo={class:"meta"},ao={class:"dark-inverted"},to={class:"is-dark-primary"},so={class:"chart-container"},io=d({__name:"ProgressWidget",props:{title:{default:"Widget Title"},value:{default:"8,641.26"},text:{default:""}},setup(e){const l=e;return(e,a)=>(_(),y("div",Xn,[g("div",eo,[g("div",lo,[g("h4",ao,j(l.title),1),g("span",to,j(l.value),1),g("p",null,j(l.text),1)]),g("div",so,[z(e.$slots,"default")])])]))}}),no=d({__name:"TasksProgressGageChart",props:{percentCount:{type:Number,required:!0,default:0}},setup(e){const l=e,a=qe(),t=J({series:[l.percentCount],chart:{height:190,type:"radialBar",offsetX:-15,offsetY:-10,toolbar:{show:!1}},colors:[a.info,a.secondary],plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"13px",fontWeight:"600",color:a.lightText,show:!1},value:{offsetY:5,fontSize:"16px",fontFamily:"Roboto, sans-serif",fontWeight:"500",color:void 0,formatter:function(e){return e+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:4},labels:["(30 days)"]});return(e,l)=>(_(),U(V(_e),{id:"flex-stat-radial",height:V(t).chart.height,type:V(t).chart.type,series:V(t).series,options:V(t)},null,8,["height","type","series","options"]))}}),oo=d({__name:"CircularChart",props:{percentCount:{type:Number,required:!0,default:0},id:{type:String,required:!0,default:""},color:{type:String,required:!0,default:""}},setup(e){const l=e;qe();const a=J({series:[l.percentCount],chart:{height:102,type:"radialBar",offsetY:-10,toolbar:{show:!1}},colors:[l.color],plotOptions:{radialBar:{hollow:{size:"35%"},dataLabels:{show:!1}}},labels:[""]});return(e,t)=>(_(),U(V(_e),{id:l.id,height:V(a).chart.height,type:V(a).chart.type,series:V(a).series,options:V(a)},null,8,["id","height","type","series","options"]))}}),co={key:0,class:"columns is-multiline"},uo={class:"column is-6"},ro={class:"column is-6"},po=d({__name:"ProjectTasksStats",props:{project:{type:String,required:!0}},setup(e){const l=e,a=qe(),t=Z(),s=p(!1),i=p({stats:{active:0,pending:0,completed:0,cancelled:0},tasks_progress:0,pending_tasks:0,total_tasks:0,status_percentage:{active:0,pending:0,completed:0,cancelled:0}});return f((()=>{(async()=>{try{s.value=!0;const e=await t.get(`/api/task/project-wise-stats/${l.project}/`);i.value=e.data}catch(e){console.log(e)}finally{s.value=!1}})()})),(e,l)=>{const t=io,n=de;return V(s)?T("",!0):(_(),y("div",co,[g("div",uo,[b(t,{title:"Job Progress",value:`${V(i).total_tasks} Total Tasks`,text:"This is the total progress on job base on tasks that have been completed.",straight:""},{default:k((()=>[b(no,{percentCount:V(i).tasks_progress},null,8,["percentCount"])])),_:1},8,["value"])]),g("div",ro,[b(n,{title:"Tasks Stats",values:[V(i).stats.active,V(i).stats.pending,V(i).stats.cancelled],labels:["Active Tasks","Pending Tasks","Cancelled Tasks"]},{chart1:k((()=>[V(i).status_percentage?(_(),U(oo,{key:0,id:"group-radial-1",color:V(a).info,percentCount:V(i).status_percentage.active},null,8,["color","percentCount"])):T("",!0)])),chart2:k((()=>[V(i).status_percentage?(_(),U(oo,{key:0,color:V(a).warning,id:"group-radial-2",percentCount:V(i).status_percentage.pending},null,8,["color","percentCount"])):T("",!0)])),chart3:k((()=>[V(i).status_percentage?(_(),U(oo,{key:0,color:V(a).danger,id:"group-radial-3",percentCount:V(i).status_percentage.cancelled},null,8,["color","percentCount"])):T("",!0)])),_:1},8,["values"])])]))}}}),mo={class:"business-dashboard hr-dashboard"},vo={class:"columns is-multiline"},fo={class:"column is-12"},ho={class:"columns is-multiline"},_o={class:"column is-12"},yo={class:"block-header"},go={class:"left"},bo={class:"current-user"},ko={class:"center"},wo=g("h4",{class:"block-heading"},"Current State",-1),jo=g("h4",{class:"block-heading"},"Address",-1),xo={class:"block-text"},Co=g("br",null,null,-1),To=g("br",null,null,-1),So={class:"right"},Vo=g("h4",{class:"block-heading"},"Managers",-1),Uo={class:"candidates"},Io=g("button",null,[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),Ao={class:"column is-12"},Oo={class:"tabs-wrapper"},Po={class:"tabs-inner"},Fo={class:"tabs is-toggle"},Mo=[g("span",null,"Job Management",-1)],Do=[g("span",null,"Documents/Files",-1)],qo=[g("span",null,"Old Estimates",-1)],Eo=[g("span",null,"Proposals",-1)],$o=[g("span",null,"Tasks",-1)],Lo=[g("span",null,"Activities",-1)],Ro=[g("span",null,"Job progress",-1)],Ho=[g("span",null,"Calculations",-1)],No=[g("span",null,"Finance",-1)],Bo=[g("span",null,"Report",-1)],zo=g("li",{class:"tab-naver"},null,-1),Jo={key:0,class:"column is-12"},Ko={class:"columns is-multiline"},Go={class:"column is-8"},Wo={class:"columns is-multiline"},Zo={class:"column is-12"},Yo={class:"feed-settings"},Qo=g("h3",{class:"dark-inverted"},null,-1),Xo={class:"buttons"},ec={class:"column is-12"},lc={class:"side-text mt-0"},ac=g("h3",{class:"dark-inverted"},"Job Description",-1),tc=["innerHTML"],sc={class:"column is-12"},ic={class:"column is-12"},nc={class:"recent-rookies"},oc=g("div",{class:"recent-rookies-header"},[g("h3",{class:"dark-inverted"},"Internal Users")],-1),cc={class:"columns is-multiline user-grid user-grid-v4"},uc={class:"column is-4"},dc={class:"grid-item"},rc={class:"dark-inverted"},pc={class:"capitalized"},mc={class:"button-wrap has-text-centered"},vc={class:"column is-4"},fc={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},hc={key:1,class:"column is-12"},_c={key:2,class:"column is-12"},yc={key:3,class:"column is-12"},gc={class:"tabs-inner"},bc={class:"tabs is-boxed"},kc=[g("span",null,"Proposals",-1)],wc=[g("span",null,"Grouped Proposals",-1)],jc={key:0},xc={key:1},Cc={key:4,class:"column is-12"},Tc={key:5,class:"column is-12"},Sc={key:6,class:"column is-12"},Vc={key:7,class:"column is-12"},Uc={key:8,class:"column is-12"},Ic={key:9,class:"column is-12"},Ac={key:10,class:"column is-12"},Oc={class:"tabs-inner"},Pc={class:"tabs is-boxed"},Fc=[g("span",null,"Excel Sheets",-1)],Mc=[g("span",null,"Custom Calculations",-1)],Dc={key:0},qc={key:1},Ec=d({__name:"JobDetails",setup(l){pe();const a=K(),t=R(),s=r(),i=Z(),n=Y(),o=p(!1),c=p(""),u=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const d=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),m=p("excel"),v=p("management"),C=p("childProposals");let S;const F=async()=>{try{o.value=!0;const e=await i.get(`/api/project/${a.params.id}/detail/`);d.value=e.data,e.data.latitude&&((e,l)=>{if(S&&S.remove(),S=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(S),e&&l){const a=[e,l];L.marker(a).addTo(S),S.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{o.value=!1}},M=p([]),D=p(!1),q=async()=>{try{D.value=!0;await i.patch(`/api/project/${a.params.id}/`,{status:"completed"});n.success("Jobs Completed Successfully."),F()}catch(Error){console.log(Error)}finally{D.value=!1}};return f((()=>{F(),a.query.jobTab&&(v.value=a.query.jobTab)})),(l,n)=>{const o=be,r=Ee,p=O,f=P,S=po,D=De,L=Me,R=Fe,N=ne,B=Qn,z=Bi,J=Ve,K=Us,G=ts,W=pa,Z=Yl,Y=oe,Q=$l,X=_l,ee=e,le=h("tooltip");return _(),y("div",mo,[g("div",vo,[g("div",fo,[g("div",ho,[g("div",_o,[g("div",yo,[g("div",go,[g("div",bo,[b(o,{size:"large",picture:V(d).image,squared:""},null,8,["picture"]),g("h3",null,[w(j(V(d).title?V(d).title:"No Title")+" ",1),g("sup",null,[b(r,{rounded:"",size:"tiny",color:"info"},{default:k((()=>[w(j(V(d).status),1)])),_:1})])])])]),g("div",ko,[wo,g("p",null,[b(r,{rounded:"",color:"warning"},{default:k((()=>[w(j("lead"==V(d).current_state?"Is Lead":"Is Job"),1)])),_:1})]),jo,g("p",xo,[w(j(V(d).address?V(d).address:"No Address Added")+" ",1),Co,w(" "+j(V(d).city?V(d).city:"No City Added")+", "+j(V(d).state?V(d).state:"No State Added")+" ",1),To,w(" "+j(V(d).zip_code?V(d).zip_code:"No Zip Code Added"),1)])]),g("div",So,[Vo,g("div",Uo,[(_(!0),y(I,null,A(V(d).managers_list,(e=>x((_(),U(o,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[le,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),Io]),b(f,null,{default:k((()=>[b(p,{class:"mt-1",onClick:n[0]||(n[0]=e=>{return l=V(a).params.id,c.value=l,void(u.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:k((()=>[w(" Update "+j("lead"==V(d).current_state?"Lead":"Job"),1)])),_:1}),"lead"!=V(d).current_state?(_(),U(p,{key:0,class:"mt-1",onClick:q,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:k((()=>[w(" Mark As Done ")])),_:1})):T("",!0)])),_:1})])])]),g("div",Ao,[g("div",Oo,[g("div",Po,[g("div",Fo,[g("ul",null,[V(s).checkUserPermission("jdp_job_management")?(_(),y("li",{key:0,class:$(["management"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=H(E((()=>{v.value="management",V(t).push({query:{...V(a).query,jobTab:"management"}})}),["prevent"]),["space"])),onClick:n[2]||(n[2]=()=>{v.value="management",V(t).push({query:{...V(a).query,jobTab:"management"}})})},Mo,32)],2)):T("",!0),V(s).checkUserPermission("jdp_documents_and_files")?(_(),y("li",{key:1,class:$(["documents"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=H(E((()=>{v.value="documents",V(t).push({query:{...V(a).query,jobTab:"documents"}})}),["prevent"]),["space"])),onClick:n[4]||(n[4]=()=>{v.value="documents",V(t).push({query:{...V(a).query,jobTab:"documents"}})})},Do,32)],2)):T("",!0),V(s).checkUserPermission("jdp_old_files")?(_(),y("li",{key:2,class:$(["files"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=H(E((()=>{v.value="files",V(t).push({query:{...V(a).query,jobTab:"files"}})}),["prevent"]),["space"])),onClick:n[6]||(n[6]=()=>{v.value="files",V(t).push({query:{...V(a).query,jobTab:"files"}})})},qo,32)],2)):T("",!0),V(s).checkUserPermission("jdp_proposals")?(_(),y("li",{key:3,class:$(["proposals"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=H(E((()=>{v.value="proposals",V(t).push({query:{...V(a).query,jobTab:"proposals"}})}),["prevent"]),["space"])),onClick:n[8]||(n[8]=()=>{v.value="proposals",V(t).push({query:{...V(a).query,jobTab:"proposals"}})})},Eo,32)],2)):T("",!0),V(s).checkUserPermission("jdp_tasks")?(_(),y("li",{key:4,class:$(["tasks"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[9]||(n[9]=H(E((()=>{v.value="tasks",V(t).push({query:{...V(a).query,jobTab:"tasks"}})}),["prevent"]),["space"])),onClick:n[10]||(n[10]=()=>{v.value="tasks",V(t).push({query:{...V(a).query,jobTab:"tasks"}})})},$o,32)],2)):T("",!0),V(s).checkUserPermission("jdp_activities")?(_(),y("li",{key:5,class:$(["activities"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[11]||(n[11]=H(E((()=>{v.value="activities",V(t).push({query:{...V(a).query,jobTab:"activities"}})}),["prevent"]),["space"])),onClick:n[12]||(n[12]=()=>{v.value="activities",V(t).push({query:{...V(a).query,jobTab:"activities"}})})},Lo,32)],2)):T("",!0),V(s).checkUserPermission("jdp_job_progress")?(_(),y("li",{key:6,class:$(["progress"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[13]||(n[13]=H(E((()=>{v.value="progress",V(t).push({query:{...V(a).query,jobTab:"progress"}})}),["prevent"]),["space"])),onClick:n[14]||(n[14]=()=>{v.value="progress",V(t).push({query:{...V(a).query,jobTab:"progress"}})})},Ro,32)],2)):T("",!0),V(s).checkUserPermission("jdp_calculations")?(_(),y("li",{key:7,class:$(["calculations"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[15]||(n[15]=H(E((()=>{v.value="calculations",V(t).push({query:{...V(a).query,jobTab:"calculations"}})}),["prevent"]),["space"])),onClick:n[16]||(n[16]=()=>{v.value="calculations",V(t).push({query:{...V(a).query,jobTab:"calculations"}})})},Ho,32)],2)):T("",!0),V(s).checkUserPermission("jdp_finance")?(_(),y("li",{key:8,class:$(["finance"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[17]||(n[17]=H(E((()=>{v.value="finance",V(t).push({query:{...V(a).query,jobTab:"finance"}})}),["prevent"]),["space"])),onClick:n[18]||(n[18]=()=>{v.value="finance",V(t).push({query:{...V(a).query,jobTab:"finance"}})})},No,32)],2)):T("",!0),V(s).checkUserPermission("jdp_report")?(_(),y("li",{key:9,class:$(["report"===V(v)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[19]||(n[19]=H(E((()=>{v.value="report",V(t).push({query:{...V(a).query,jobTab:"report"}})}),["prevent"]),["space"])),onClick:n[20]||(n[20]=()=>{v.value="report",V(t).push({query:{...V(a).query,jobTab:"report"}})})},Bo,32)],2)):T("",!0),zo])])])])]),"management"===V(v)?(_(),y("div",Jo,[g("div",Ko,[g("div",Go,[g("div",Wo,[g("div",Zo,[g("div",Yo,[Qo,g("div",Xo,[(_(!0),y(I,null,A(V(d).tags,((e,l)=>(_(),y("button",{key:l,class:"button is-selected is-light is-dark-outlined"},j(e),1)))),128))])])]),g("div",ec,[g("div",lc,[ac,g("div",{innerHTML:V(d).notes},null,8,tc)])]),g("div",sc,[b(S,{project:V(a).params.id},null,8,["project"])]),g("div",ic,[g("div",nc,[oc,g("div",cc,[(_(!0),y(I,null,A(V(d).sales_people_info,(e=>(_(),y("div",uc,[g("div",dc,[b(D),b(o,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),g("h3",rc,j(e.username??"N/A")+" "+j(e.last_name??""),1),g("p",pc,j(e.role),1),g("div",mc,[b(p,{color:"primary",raised:""},{default:k((()=>[w(" View Profile ")])),_:1})])])])))),256))])])])])]),g("div",vc,["management"===V(v)?(_(),y("div",fc)):T("",!0),b(L,{project:V(a).params.id},null,8,["project"]),b(R,{projectId:V(a).params.id},null,8,["projectId"])])])])):T("",!0),"files"==V(v)?(_(),y("div",hc,[b(N,{projectId:V(a).params.id,files:V(d).uploaded_files,"onUpdate:onUploadFile":F},null,8,["projectId","files"])])):T("",!0),"documents"===V(v)?(_(),y("div",_c,[b(B,{leadId:V(a).params.id,uploaded_files:V(d).uploaded_files,getProjectInfo:F},null,8,["leadId","uploaded_files"])])):T("",!0),"proposals"===V(v)?(_(),y("div",yc,[g("div",gc,[g("div",bc,[g("ul",null,[g("li",{class:$(["childProposals"===V(C)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[21]||(n[21]=H(E((e=>C.value="childProposals"),["prevent"]),["space"])),onClick:n[22]||(n[22]=e=>C.value="childProposals")},kc,32)],2),g("li",{class:$(["groupedProposals"===V(C)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[23]||(n[23]=H(E((e=>C.value="groupedProposals"),["prevent"]),["space"])),onClick:n[24]||(n[24]=e=>{C.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await i.get(`/api/attachment/by-object/${a.params.id}/?type=${e}`);M.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},wc,32)],2)])])]),"childProposals"==V(C)?(_(),y("div",jc,[b($e,{"lead-id":V(a).params.id,onUpdateCompany:F},null,8,["lead-id"])])):T("",!0),"groupedProposals"==V(C)?(_(),y("div",xc,[b(z,{"doc-type":"proposal_formats","object-id":V(a).params.id},null,8,["object-id"])])):T("",!0)])):T("",!0),"activities"===V(v)?(_(),y("div",Cc,[b(J,{jobId:V(a).params.id},null,8,["jobId"])])):T("",!0),"progress"===V(v)?(_(),y("div",Tc,[b(K,{object:V(a).params.id,type:"job"},null,8,["object"])])):T("",!0),"finance"===V(v)?(_(),y("div",Sc,[b(G)])):T("",!0),"activityLogs"===V(v)?(_(),y("div",Vc,[b(W,{object_id:V(a).params.id||V(d).id,object_type:"lead"},null,8,["object_id"])])):T("",!0),"report"===V(v)?(_(),y("div",Uc,[b(Z)])):T("",!0),"tasks"===V(v)?(_(),y("div",Ic,[b(Y,{projectID:V(a).params.id},null,8,["projectID"])])):T("",!0),"calculations"===V(v)?(_(),y("div",Ac,[g("div",Oc,[g("div",Pc,[g("ul",null,[g("li",{class:$(["excel"===V(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[25]||(n[25]=H(E((e=>m.value="excel"),["prevent"]),["space"])),onClick:n[26]||(n[26]=e=>m.value="excel")},Fc,32)],2),g("li",{class:$(["custom"===V(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:n[27]||(n[27]=H(E((e=>m.value="custom"),["prevent"]),["space"])),onClick:n[28]||(n[28]=e=>m.value="custom")},Mc,32)],2)])])]),"excel"==V(m)?(_(),y("div",Dc,[b(Q,{objectId:V(a).params.id},null,8,["objectId"])])):T("",!0),"custom"==V(m)?(_(),y("div",qc,[b(X,{objectId:V(a).params.id},null,8,["objectId"])])):T("",!0)])):T("",!0)])])]),V(u)?(_(),U(ee,{key:0,addUpdateLeadModal:V(u),leadId:V(c),"onUpdate:modalHandler":n[29]||(n[29]=e=>u.value=!1),"onUpdate:OnSuccess":F},null,8,["addUpdateLeadModal","leadId"])):T("",!0)])}}});export{Ec as _};
