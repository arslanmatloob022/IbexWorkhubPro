import{_ as e}from"./VInput.vue_vue_type_script_setup_true_lang-8775ccc9.js";import{e as a,r as s,o as l,M as t,y as i,z as o,C as n,K as c,A as r,B as u,l as d,J as p,S as m,T as v,D as _,j as f,P as y,E as b,v as h,H as g,ak as x}from"./index-da733775.js";import{_ as k}from"./VTextarea.vue_vue_type_script_setup_true_lang-dec56614.js";import{_ as V}from"./VField.vue_vue_type_script_setup_true_lang-0bc0d50e.js";import{_ as j}from"./VControl-cf3be83b.js";import{_ as w}from"./VAvatar.vue_vue_type_style_index_0_lang-7020293a.js";import{u as C}from"./useAPI-7d8cfcd3.js";import{u as P}from"./useNotyf-c3ce6e3a.js";import{u as I}from"./viewWrapper-08b1997c.js";import{b as N}from"./route-block-83d24a4e.js";import"./useVFieldContext-e38f709d.js";import"./VLabel.vue_vue_type_script_setup_true_lang-76e173d9.js";import"./userSession-d26c2832.js";import"./notyf-e262cacd.js";import"./useThemeColors-10adcfd9.js";const S={class:"banking-dashboard banking-dashboard-v1"},A={class:"columns is-multiline"},z={class:"column is-12"},T={class:"columns is-multiline"},U={class:"column is-6"},q={class:"dashboard-card is-contacts"},F=n("div",{class:"title-wrap"},[n("h3",{class:"dark-inverted"},"Create link")],-1),J=["onSubmit"],M={class:"transfer-form"},D=n("label",{for:""}," Client",-1),L={class:"multiselect-single-label"},O={class:"select-label-text"},B={class:"select-label-text"},E={class:"field column is-12"},H=n("label",null,"Amount *",-1),K={class:"field has-addons"},Q={class:"field-addon-body"},W=n("div",{class:"control"},[n("span",{class:"select currency-select"},[n("select",null,[n("option",null,"$")])])],-1),$={class:"control is-expanded"},G={class:"field"},R=n("label",null,"Description* (Job Name, Invoice Number etc)",-1),X={class:"submit-wrap mt-5"},Y={class:"column is-6"},Z={class:"dashboard-card"},ee=n("div",{class:"title-wrap"},[n("h3",{class:"dark-inverted"},"Payment links")],-1),ae={key:0,class:"context-text"},se=a({__name:"IbexPaymentModule",setup(a){const h=C(),g=P(),x=s({amount:"",description:"",client:"",type:"Stripe"});s(!1),s({payments:[],count:0});const I=s(""),N=s([]),se=s(!1),le=s(!1),te=async()=>{try{le.value=!0;const e=await h.post("/api/paypal/stripe-session/",{amount:x.value.amount,description:x.value.description,client:x.value.client});I.value=e.data.url,g.success("link Created")}catch(e){g.success("Something went wrong")}finally{le.value=!1}};return l((()=>{(async()=>{try{se.value=!0;const e=await h.get("/api/users/by-role/client/",{});N.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{se.value=!1}})()})),(a,s)=>{const l=w,h=t("Multiselect"),C=j,P=V,se=k,ie=b,oe=e;return i(),o("div",S,[n("div",A,[n("div",z,[n("div",T,[n("div",U,[n("div",q,[F,n("form",{action:"",onSubmit:c(te,["prevent"])},[n("div",M,[r(P,{class:"is-image-select has-curved-images"},{default:u((()=>[D,r(C,null,{default:u((()=>[r(h,{modelValue:d(x).client,"onUpdate:modelValue":s[0]||(s[0]=e=>d(x).client=e),placeholder:"Select a client",label:"name","max-height":145,options:d(N)},{singlelabel:u((({value:e})=>[n("div",L,[r(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),n("span",O,p(e.name),1)])])),option:u((({option:e})=>[r(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),n("span",B,p(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),n("div",E,[H,n("div",K,[n("div",Q,[W,n("div",$,[m(n("input",{required:"",type:"text",class:"input","onUpdate:modelValue":s[1]||(s[1]=e=>d(x).amount=e),min:"0",step:"any",placeholder:"Amount of money"},null,512),[[v,d(x).amount]])])])])]),n("div",G,[R,r(P,null,{default:u((()=>[r(C,null,{default:u((()=>[r(se,{required:"",modelValue:d(x).description,"onUpdate:modelValue":s[2]||(s[2]=e=>d(x).description=e),class:"is-primary-focus",rows:"2",placeholder:"Job Name: , Invoice Number:  "},null,8,["modelValue"])])),_:1})])),_:1})]),n("div",X,[r(ie,{type:"submit",color:"info",size:"big",fullwidth:"",loading:d(le),raised:"",bold:""},{default:u((()=>[_(" Create Payment link ")])),_:1},8,["loading"])])])],40,J)])]),n("div",Y,[n("div",Z,[ee,r(P,{label:"Checkout link",addons:""},{default:u((()=>[r(C,{expanded:""},{default:u((()=>[r(oe,{type:"text",modelValue:d(I),"onUpdate:modelValue":s[3]||(s[3]=e=>f(I)?I.value=e:null),class:"input",placeholder:"link..."},null,8,["modelValue"])])),_:1}),r(C,null,{default:u((()=>[r(ie,{icon:"fas fa-copy",onClick:s[4]||(s[4]=e=>{var a;(a=d(I))?navigator.clipboard.writeText(a).then((()=>{g.success("Link copied to clipboard!")})).catch((e=>{g.error("Failed to copy the link: ",e)})):g.error("No link to copy!")}),class:"cu-pointer",color:"primary"},{default:u((()=>[_(" Copy ")])),_:1})])),_:1})])),_:1}),d(I)?(i(),o("p",ae," payment link has been successfully created ")):y("",!0)])])])])])])}}}),le={class:"page-content-inner"},te=n("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),ie=a({__name:"index",setup:e=>(I().setPageTitle("Ibex Payment"),h({title:"Ibex Payment"}),(e,a)=>{const s=se;return i(),o("div",le,[(i(),g(x,{to:"[data-teleport-bg]"},[te])),r(s,{class:"has-navbar-spacing"})])})});"function"==typeof N&&N(ie);export{ie as default};
