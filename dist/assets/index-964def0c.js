import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-ff3dbfa9.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-8cb7a67b.js";import{_ as a,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-6b06889b.js";import{_ as l}from"./VDropdown.vue_vue_type_style_index_0_lang-e5b49210.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-942b1a60.js";import{_ as n}from"./VTag.vue_vue_type_style_index_0_lang-fa86c51d.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-93a2f817.js";import{f as r,x as c,r as u,$ as d,o as p,av as m,m as _,C as v,O as f,D as y,E as b,F as g,G as h,L as j,X as x,k,K as w,N as C,V as A,W as V,aS as P,P as S,U as N,J as $,A as O,am as I}from"./index-7009f34f.js";import{_ as D}from"./VField.vue_vue_type_script_setup_true_lang-9307d5b5.js";import{_ as T}from"./VControl-d5f331a3.js";import{_ as F}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-6d68e4fa.js";import{_ as L,a as W}from"./search-4-dark-2b5b440c.js";import{g as E}from"./estimatesScripts-23d53c94.js";import{u as J}from"./useAPI-f33e336a.js";import{u as U}from"./useNotyf-94f82190.js";import{d as z,i as G}from"./useSupportElement-c7eed724.js";import{u as K}from"./viewWrapper-7e667d93.js";import{b as R}from"./route-block-83d24a4e.js";import"./VFlex.vue_vue_type_style_index_0_lang-3570a308.js";import"./VIcon.vue_vue_type_script_setup_true_lang-47389b5c.js";import"./useDropdown-3ce8c6e1.js";import"./VLabel.vue_vue_type_script_setup_true_lang-7fe47619.js";import"./useVFieldContext-d1e4908d.js";import"./VPlaceloadWrap-95680b7e.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-dae60fa1.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-3c545ef9.js";import"./notyf-acfd6ab7.js";import"./useThemeColors-791826c3.js";const Y={key:1},M={class:"list-view-toolbar"},Q={class:"tabs-inner"},X={class:"page-content-inner"},q={class:"flex-list-wrapper flex-list-v1"},B=b("div",{class:"columns is-multiline"},[b("div",{class:"column is-3"}),b("div",{class:"column is-6 justify-right"})],-1),H=b("img",{class:"light-image",src:L,alt:""},null,-1),Z=b("img",{class:"dark-image",src:W,alt:""},null,-1),ee={class:"item-name dark-inverted show-text-200"},te={class:"item-meta show-text-200"},ae={key:0,class:"show-text-200"},se={class:"item-name"},le={class:"item-meta"},ie={key:1,class:"show-text-200"},ne={class:"item-name dark-inverted"},oe={class:"item-meta"},re={class:"item-name dark-inverted"},ce={class:"item-meta"},ue=["onClick"],de=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),b("div",{class:"meta"},[b("span",null,"View"),b("span",null,"View user details")],-1)],pe=b("hr",{class:"dropdown-divider"},null,-1),me=["onClick"],_e=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),b("div",{class:"meta"},[b("span",null,"Delete"),b("span",null,"Delete Proposal Permanently")],-1)],ve=r({__name:"CompletedProjects",setup(r){const O=J(),I=U(),L=c(),W=u(!1),K=u("");u(4);const R=u(0),ve=u([]),fe=u(1),ye=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),be={username:{label:"Job",grow:!0},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},ge=async()=>{try{W.value=!0;let e=(await O.get("/api/project/project-jobs/",{})).data;ve.value=e.filter((e=>"completed"==e.status))}catch(e){console.log(e)}finally{W.value=!1}};u(!1);const he=u(""),je=async()=>{try{W.value=!0,await O.delete(`/api/project/${R.value}/`),I.success("Project deleted successfully"),ye.value.isSweetAlertOpen=!1,ge()}catch(e){console.log(e)}finally{W.value=!1}},xe=d((()=>K.value?ve.value.filter((e=>e?.title.match(new RegExp(K.value,"i")))):ve.value));return p((()=>{ge()})),(r,c)=>{const u=F,d=T,p=D,O=S,I=o,J=s,U=n,R=i,ve=l,ge=a,ke=t,we=e,Ce=m("tooltip");return _(W)?(v(),f(u,{key:0})):(v(),y("div",Y,[b("div",M,[g(p,null,{default:h((()=>[g(d,{icon:"feather:search"},{default:h((()=>[j(b("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>k(K)?K.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[x,_(K)]])])),_:1})])),_:1}),b("div",Q,[g(O,{color:"primary",to:"/sidebar/dashboard/projects/add-project",elevated:""},{default:h((()=>[w("Add Project ")])),_:1})])]),b("div",X,[b("div",q,[B,_(xe)?.length?C("",!0):(v(),f(I,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:h((()=>[H,Z])),_:1})),_(xe)?.length?(v(),f(ge,{key:1,data:_(xe),columns:be,compact:""},{body:h((()=>[g(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),y(A,null,V(_(xe),(e=>(v(),y("div",{key:e.id,class:"flex-table-item"},[g(J,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:h((()=>[b("div",null,[b("span",ee,N(e?.title?e?.title:"N/A"),1),b("span",te,[b("span",null,N(e?.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),g(J,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:h((()=>[e?.clientInfo?(v(),y("div",ae,[b("span",se,N(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),b("span",le,[b("span",null,N(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):C("",!0),e.contractor_info?(v(),y("div",ie,[b("span",ne,N(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),b("span",oe,[b("span",null,N(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):C("",!0)])),_:2},1032,["onClick"]),g(J,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:h((()=>[b("div",null,[b("span",re,N(_(z)(e.created)),1),b("span",ce,[b("span",null,"At:"+N(_(G)(e.created)),1)])])])),_:2},1032,["onClick"]),g(J,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:h((()=>[g(U,{class:"capitalized",color:_(E)[e.status],rounded:""},{default:h((()=>[w(N(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),g(J,{onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:h((()=>[b("div",null,[(v(!0),y(A,null,V(e?.managers_list,(e=>j((v(),f(R,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Ce,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),g(J,{column:{align:"end"}},{default:h((()=>[g(ve,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:h((({close:t})=>[b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{_(L).push(`/sidebar/dashboard/jobs/${e.id}`)}},de,8,ue),pe,b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:$((t=>{return a=e.id,he.value=a,void(ye.value={title:"Delete job?",subtitle:"Are you sure to delete this job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a}),["prevent"])},_e,8,me)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):C("",!0),_(xe)?.length>5?(v(),f(ke,{key:2,"current-page":_(fe),"onUpdate:currentPage":c[1]||(c[1]=e=>k(fe)?fe.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):C("",!0)]),_(ye).isSweetAlertOpen?(v(),f(we,{key:0,isSweetAlertOpen:_(ye).isSweetAlertOpen,title:_(ye).title,subtitle:_(ye).subtitle,btntext:_(ye).btntext,onConfirm:je,onCancel:()=>_(ye).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0)])]))}}}),fe={class:"page-content-inner"},ye=b("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),be=r({__name:"index",setup:e=>(K().setPageTitle("Completed Projects"),O({title:"Completed Projects - Ibex"}),(e,t)=>{const a=ve;return v(),y("div",fe,[(v(),f(I,{to:"[data-teleport-bg]"},[ye])),g(a,{class:"has-navbar-spacing"})])})});"function"==typeof R&&R(be);export{be as default};
