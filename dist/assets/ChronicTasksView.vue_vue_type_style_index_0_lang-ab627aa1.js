import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-a723374a.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-46b7b901.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-71bad0fb.js";import{_ as s}from"./VAvatar.vue_vue_type_style_index_0_lang-e9763bc9.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-8db773c0.js";import{e as t,r as n,Z as c,o,au as d,B as r,C as u,D as p,E as m,F as v,K as h,W as k,l as g,j as f,H as y,G as _,T as w,U as b,V as C,N as j,M as x,ak as D,I as T,P as S,Q as A,R as E,A as I,aR as W,J as P}from"./index-bd02fd97.js";import{_ as V}from"./VControl-14860196.js";import{_ as N,a as O}from"./projects-dark-4a371d8a.js";import{u as L}from"./useNotyf-a8509ab6.js";import{u as $}from"./useAPI-5821d9f5.js";import{u as M}from"./userSession-87a2ed4a.js";import{c as R,_ as U}from"./VFlexTable.vue_vue_type_style_index_0_lang-5af3c304.js";import{_ as K}from"./VTag.vue_vue_type_style_index_0_lang-2c85544e.js";import{_ as z,a as H}from"./search-4-dark-2b5b440c.js";import{p as q}from"./index-c1fc2d09.js";import{_ as F}from"./VField.vue_vue_type_script_setup_true_lang-0ce07994.js";import{_ as Y}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-e7df3645.js";import{_ as B}from"./having-coffee-37a7bbcc.js";import{_ as G}from"./having-coffee-dark-4694625e.js";const J=e=>(S("data-v-13f04d27"),e=e(),A(),e),Q={class:"list-flex-toolbar is-reversed"},Z={class:"tabs-inner"},X={class:"tabs"},ee=J((()=>p("span",null,"All",-1))),le=[ee],ae=J((()=>p("span",null,"Active",-1))),se=[ae],ie=J((()=>p("span",null,"Pending",-1))),te=[ie],ne=J((()=>p("span",null,"Completed",-1))),ce=[ne],oe=J((()=>p("li",{class:"tab-naver"},null,-1))),de={class:"flex-list-wrapper flex-list-v2"},re={key:0,class:"tab-content is-active"},ue={class:"all-projects"},pe={class:"all-projects-header"},me={class:"header-item"},ve={class:"item-inner"},he=J((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),ke=J((()=>p("p",null,"Total Tasks",-1))),ge={class:"header-item"},fe={class:"item-inner"},ye=J((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),_e=J((()=>p("p",null,"Completed Tasks",-1))),we={class:"header-item"},be={class:"item-inner"},Ce=J((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),je=J((()=>p("p",null,"Pending Tasks",-1))),xe={class:"header-item"},De={class:"item-inner"},Te=J((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),Se=J((()=>p("p",null,"Active Tasks",-1))),Ae={key:0,class:"columns is-multiline projects-card-grid"},Ee={class:"column is-6"},Ie={class:"grid-item"},We={class:"top-section"},Pe={class:"head"},Ve=["onClick"],Ne=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],Oe=["onClick"],Le=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],$e=["onClick"],Me=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],Re=J((()=>p("hr",{class:"dropdown-divider"},null,-1))),Ue=["onClick"],Ke=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],ze=["onClick"],He=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],qe={class:"body"},Fe={class:"bottom-section"},Ye={key:0,class:"foot-block"},Be=J((()=>p("h4",{class:"heading"},"Sub Contractor",-1))),Ge={class:"developers"},Je={key:1,class:"foot-block"},Qe=J((()=>p("h4",{class:"heading"},"Worker(s)",-1))),Ze={class:"developers"},Xe={class:"foot-block"},el=J((()=>p("h4",{class:"heading"},"Start date",-1))),ll={class:"foot-block"},al=J((()=>p("h4",{class:"heading"},"End date",-1))),sl={class:"foot-block"},il=J((()=>p("h4",{class:"heading"},"Status",-1))),tl=J((()=>p("img",{class:"light-image is-larger",src:N,alt:""},null,-1))),nl=J((()=>p("img",{class:"dark-image is-larger",src:O,alt:""},null,-1))),cl={key:1,class:"tab-content is-active"},ol={class:"all-projects"},dl={key:0,class:"columns is-multiline projects-card-grid"},rl={class:"column is-6"},ul={class:"grid-item"},pl={class:"top-section"},ml={class:"head"},vl=["onClick"],hl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],kl=["onClick"],gl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],fl=["onClick"],yl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],_l=J((()=>p("hr",{class:"dropdown-divider"},null,-1))),wl=["onClick"],bl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],Cl=["onClick"],jl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],xl={class:"body"},Dl={class:"bottom-section"},Tl={class:"foot-block"},Sl=J((()=>p("h4",{class:"heading"},"Worker(s)",-1))),Al={class:"developers"},El={class:"foot-block"},Il=J((()=>p("h4",{class:"heading"},"Start date",-1))),Wl={class:"foot-block"},Pl=J((()=>p("h4",{class:"heading"},"End date",-1))),Vl={class:"foot-block"},Nl=J((()=>p("h4",{class:"heading"},"Status",-1))),Ol=J((()=>p("img",{class:"light-image is-larger",src:N,alt:""},null,-1))),Ll=J((()=>p("img",{class:"dark-image is-larger",src:O,alt:""},null,-1))),$l={key:2,class:"tab-content is-active"},Ml={class:"all-projects"},Rl={key:0,class:"columns is-multiline projects-card-grid"},Ul={class:"column is-6"},Kl={class:"grid-item"},zl={class:"top-section"},Hl={class:"head"},ql=["onClick"],Fl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],Yl=["onClick"],Bl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],Gl=["onClick"],Jl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],Ql=J((()=>p("hr",{class:"dropdown-divider"},null,-1))),Zl=["onClick"],Xl=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],ea=["onClick"],la=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],aa={class:"body"},sa={class:"bottom-section"},ia={class:"foot-block"},ta=J((()=>p("h4",{class:"heading"},"Worker(s)",-1))),na={class:"developers"},ca={class:"foot-block"},oa=J((()=>p("h4",{class:"heading"},"Start date",-1))),da={class:"foot-block"},ra=J((()=>p("h4",{class:"heading"},"End date",-1))),ua={class:"foot-block"},pa=J((()=>p("h4",{class:"heading"},"Status",-1))),ma=J((()=>p("img",{class:"light-image is-larger",src:N,alt:""},null,-1))),va=J((()=>p("img",{class:"dark-image is-larger",src:O,alt:""},null,-1))),ha={key:3,class:"tab-content is-active"},ka={class:"all-projects"},ga={key:0,class:"columns is-multiline projects-card-grid"},fa={class:"column is-6"},ya={class:"grid-item"},_a={class:"top-section"},wa={class:"head"},ba=["onClick"],Ca=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],ja=["onClick"],xa=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],Da=["onClick"],Ta=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],Sa=J((()=>p("hr",{class:"dropdown-divider"},null,-1))),Aa=["onClick"],Ea=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],Ia=["onClick"],Wa=[J((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),J((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],Pa={class:"body"},Va={class:"bottom-section"},Na={class:"foot-block"},Oa=J((()=>p("h4",{class:"heading"},"Worker(s)",-1))),La={class:"developers"},$a={class:"foot-block"},Ma=J((()=>p("h4",{class:"heading"},"Start date",-1))),Ra={class:"foot-block"},Ua=J((()=>p("h4",{class:"heading"},"End date",-1))),Ka={class:"foot-block"},za=J((()=>p("h4",{class:"heading"},"Status",-1))),Ha=J((()=>p("img",{class:"light-image is-larger",src:N,alt:""},null,-1))),qa=J((()=>p("img",{class:"dark-image is-larger",src:O,alt:""},null,-1))),Fa=E(t({__name:"WorkerTasks",props:{projectID:{default:""},workerId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(t,{emit:S}){const A=t,E=$(),I=L(),W=n(""),P=M(),N=n(""),O=n("all"),R=n(0),U=n(!1),K=n(!1),z=n(0);n({});const H=n("");n([{value:"active",name:"Active"},{value:"pending",name:"Pre Construction"},{value:"completed",name:"Completed"},{value:"cancelled",name:"cancelled"}]),n([{id:0,username:"",email:"",phoneNumber:""}]);const q=n([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),F=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Y=e=>{z.value=e,F.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},B=async()=>{try{U.value=!0;const e=await E.get(`/api/task/${A.workerId?A.workerId:P.user.id}/worker-tasks/`);q.value=e.data,console.log(e.data),U.value=!1}catch(e){console.log(e)}},G=c((()=>{let e=q.value.filter((e=>"active"==e.status));return S("update:completedTasks",e.length),e.length})),J=c((()=>{let e=q.value.filter((e=>"pending"==e.status));return S("update:activeTasks",e.length),e.length})),ee=c((()=>q.value.filter((e=>"completed"==e.status)).length)),ae=e=>{H.value=e,K.value=!0},ie=()=>{B(),K.value=!1,H.value=""},ne=async(e,l)=>{try{U.value=!0;await E.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});B(),I.success(`Task set to ${l} successfully`),R.value=0,U.value=!1}catch(a){console.log(a)}},Fa=async()=>{try{U.value=!0;const e=await E.delete(`/api/task/${z.value}/`);console.log(e),I.success("Task deleted successfully"),B(),F.value.isSweetAlertOpen=!1,R.value=0}catch(e){console.log(e)}finally{U.value=!1}},Ya=c((()=>{if(N.value){const e=new RegExp(N.value,"i");return q.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"completed"!=e.status))})),Ba=c((()=>{if(N.value){const e=new RegExp(N.value,"i");return q.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"completed"==e.status))})),Ga=c((()=>{if(N.value){const e=new RegExp(N.value,"i");return q.value.filter((l=>"active"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"active"==e.status))})),Ja=c((()=>{if(N.value){const e=new RegExp(N.value,"i");return q.value.filter((l=>"pending"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"pending"==e.status))}));return o((()=>{B()})),(t,n)=>{const c=V,o=D,S=i,E=s,I=a,P=l,L=e,$=d("tooltip");return r(),u(b,null,[p("div",null,[p("div",Q,[m(o,null,{default:v((()=>[m(c,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:v((()=>[h(p("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>f(N)?N.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,g(N)]])])),_:1})])),_:1}),p("div",Z,[p("div",X,[p("ul",null,[p("li",{class:y(["all"===g(O)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=_(T((e=>O.value="all"),["prevent"]),["space"])),onClick:n[2]||(n[2]=e=>O.value="all")},le,32)],2),p("li",{class:y(["active"===g(O)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=_(T((e=>O.value="active"),["prevent"]),["space"])),onClick:n[4]||(n[4]=e=>O.value="active")},se,32)],2),p("li",{class:y(["pending"===g(O)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=_(T((e=>O.value="pending"),["prevent"]),["space"])),onClick:n[6]||(n[6]=e=>O.value="pending")},te,32)],2),p("li",{class:y(["completed"===g(O)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=_(T((e=>O.value="completed"),["prevent"]),["space"])),onClick:n[8]||(n[8]=e=>O.value="completed")},ce,32)],2),oe])])])]),p("div",de,["all"===g(O)?(r(),u("div",re,[p("div",ue,[p("div",pe,[p("div",me,[p("div",ve,[he,p("span",null,w(g(q).length),1),ke])]),p("div",ge,[p("div",fe,[ye,p("span",null,w(g(ee)),1),_e])]),p("div",we,[p("div",be,[Ce,p("span",null,w(g(J)),1),je])]),p("div",xe,[p("div",De,[Te,p("span",null,w(g(G)),1),Se])])]),g(Ya).length?(r(),u("div",Ae,[(r(!0),u(b,null,C(g(Ya),(e=>(r(),u("div",Ee,[p("div",Ie,[p("div",We,[p("div",Pe,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ne,8,Ve),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Le,8,Oe),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Me,8,$e),Re,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Ke,8,Ue),p("a",{onClick:l=>Y(e.id),role:"menuitem",class:"dropdown-item is-media"},He,8,ze)])),_:2},1024)]),p("div",qe,[p("p",null,w(e.description),1)])]),p("div",Fe,[e.supplier?(r(),u("div",Ye,[Be,p("div",Ge,[h(m(E,{picture:e.supplier?.avatar,size:"small",color:"primary",initials:e.supplier?.avatar?"":e.supplier?.username.slice(0,2)},null,8,["picture","initials"]),[[$,`${e?.supplier?.username}`,void 0,{rounded:!0,info:!0}]])])])):x("",!0),e.workers?.length?(r(),u("div",Je,[Qe,p("div",Ze,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[$,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])])):x("",!0),p("div",Xe,[el,p("p",null,w(e.startDate),1)]),p("div",ll,[al,p("p",null,w(e.endDate),1)]),p("div",sl,[il,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:v((()=>[tl,nl])),_:1}))])])):"active"===g(O)?(r(),u("div",cl,[p("div",ol,[g(Ga).length?(r(),u("div",dl,[(r(!0),u(b,null,C(g(Ga),(e=>(r(),u("div",rl,[p("div",ul,[p("div",pl,[p("div",ml,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},hl,8,vl),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},gl,8,kl),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},yl,8,fl),_l,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},bl,8,wl),p("a",{onClick:l=>Y(e.id),role:"menuitem",class:"dropdown-item is-media"},jl,8,Cl)])),_:2},1024)]),p("div",xl,[p("p",null,w(e.description),1)])]),p("div",Dl,[p("div",Tl,[Sl,p("div",Al,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[$,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),p("div",El,[Il,p("p",null,w(e.startDate),1)]),p("div",Wl,[Pl,p("p",null,w(e.endDate),1)]),p("div",Vl,[Nl,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:v((()=>[Ol,Ll])),_:1}))])])):"pending"===g(O)?(r(),u("div",$l,[p("div",Ml,[g(Ja).length?(r(),u("div",Rl,[(r(!0),u(b,null,C(g(Ja),(e=>(r(),u("div",Ul,[p("div",Kl,[p("div",zl,[p("div",Hl,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Fl,8,ql),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Bl,8,Yl),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Jl,8,Gl),Ql,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Xl,8,Zl),p("a",{onClick:l=>Y(e.id),role:"menuitem",class:"dropdown-item is-media"},la,8,ea)])),_:2},1024)]),p("div",aa,[p("p",null,w(e.description),1)])]),p("div",sa,[p("div",ia,[ta,p("div",na,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[$,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),p("div",ca,[oa,p("p",null,w(e.startDate),1)]),p("div",da,[ra,p("p",null,w(e.endDate),1)]),p("div",ua,[pa,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:v((()=>[ma,va])),_:1}))])])):"completed"===g(O)?(r(),u("div",ha,[p("div",ka,[g(Ba).length?(r(),u("div",ga,[(r(!0),u(b,null,C(g(Ba),(e=>(r(),u("div",fa,[p("div",ya,[p("div",_a,[p("div",wa,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ca,8,ba),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},xa,8,ja),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Ta,8,Da),Sa,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Ea,8,Aa),p("a",{onClick:l=>Y(e.id),role:"menuitem",class:"dropdown-item is-media"},Wa,8,Ia)])),_:2},1024)]),p("div",Pa,[p("p",null,w(e.description),1)])]),p("div",Va,[p("div",Na,[Oa,p("div",La,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[$,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),p("div",$a,[Ma,p("p",null,w(e.startDate),1)]),p("div",Ra,[Ua,p("p",null,w(e.endDate),1)]),p("div",Ka,[za,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:v((()=>[Ha,qa])),_:1}))])])):x("",!0)])]),g(F).isSweetAlertOpen?(r(),j(P,{key:0,isSweetAlertOpen:g(F).isSweetAlertOpen,title:g(F).title,subtitle:g(F).subtitle,btntext:g(F).btntext,onConfirm:Fa,loading:g(U),onCancel:()=>g(F).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):x("",!0),g(K)?(r(),j(L,{key:1,projectID:A.projectID,isOpen:g(K),taskIdSelected:g(H),startDate:g(W),"onUpdate:modalHandler":ie,"onUpdate:OnSuccess":B},null,8,["projectID","isOpen","taskIdSelected","startDate"])):x("",!0)],64)}}}),[["__scopeId","data-v-13f04d27"]]),Ya={class:"flex-list-wrapper flex-list-v2"},Ba=p("img",{class:"light-image",src:z,alt:""},null,-1),Ga=p("img",{class:"dark-image",src:H,alt:""},null,-1),Ja={key:1,class:"tab-content is-active"},Qa={class:"item-name dark-inverted show-text-200"},Za={class:"item-meta"},Xa={class:"link-text"},es={class:"light-text"},ls={class:"light-text"},as={key:2,class:"tab-content is-active"},ss=p("img",{class:"light-image is-larger",src:N,alt:""},null,-1),is=p("img",{class:"dark-image is-larger",src:O,alt:""},null,-1),ts=t({__name:"ChronicTasksList",props:{tasks:{default:{}}},setup(e){const l=e,s=q,i=n(""),t=n("active"),o={picture:{label:"Task",media:!0,grow:!0},customer:"Start ",industry:"End",status:"Quantity",team:{label:"Unit",cellClass:"h-hidden-tablet-p"},actions:{label:"Cost code",align:"end"}},d={completed:"primary",pending:"warning",active:"info",canceled:"danger"},h=c((()=>{if(i.value){const e=new RegExp(i.value,"i");return s.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return s}));return(e,s)=>{const i=a,n=I("Tippy"),c=R,k=K,f=U;return r(),u("div",null,[p("div",Ya,["active"===g(t)&&0===g(h).length?(r(),j(i,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[Ba,Ga])),_:1})):x("",!0),"active"===g(t)?(r(),u("div",Ja,[l.tasks?(r(),j(f,{key:0,data:g(h),columns:o,rounded:""},{body:v((()=>[m(W,{name:"list",tag:"div",class:"flex-list-inner"},{default:v((()=>[(r(!0),u(b,null,C(l.tasks,(e=>(r(),u("div",{key:e.id,class:"flex-table-item"},[m(c,{column:{media:!0,grow:!0}},{default:v((()=>[p("div",null,[p("span",Qa,w(e.title?e.title:""),1),p("span",Za,[m(n,{trigger:"click"},{content:v((()=>[P(w(e.description?e.description:""),1)])),default:v((()=>[p("span",Xa,w(e.description?.length>40?e.description?.slice(0,40):e.description.length<40?e.description:""),1)])),_:2},1024)])])])),_:2},1024),m(c,null,{default:v((()=>[p("span",es,w(e.startDate?e.startDate:""),1)])),_:2},1024),m(c,null,{default:v((()=>[p("span",ls,w(e.endDate?e.endDate:""),1)])),_:2},1024),m(c,null,{default:v((()=>[m(k,{outlined:"",color:"info",rounded:""},{default:v((()=>[P(w(e.quantity?e.quantity:""),1)])),_:2},1024)])),_:2},1024),m(c,{class:"h-hidden-tablet-p"},{default:v((()=>[m(k,{outlined:"",color:"primary",rounded:""},{default:v((()=>[P(w(e.unit?e.unit:"N/A"),1)])),_:2},1024)])),_:2},1024),m(c,{column:{align:"end"}},{default:v((()=>[m(k,{outlined:"",color:d[e.status],rounded:""},{default:v((()=>[P(w(e.status?e.status:""),1)])),_:2},1032,["color"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):x("",!0)])):"closed"===g(t)?(r(),u("div",as,[m(i,{title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n              start closing off projects, they will be showing up in here."},{image:v((()=>[ss,is])),_:1})])):x("",!0)])])}}}),ns={key:0},cs={key:1},os={class:"list-view-toolbar"},ds=p("div",{class:"tabs-inner"},null,-1),rs={class:"list-view list-view-v2"},us={class:"list-view-inner"},ps={class:"list-view-item"},ms={class:"list-view-item-inner"},vs={class:"meta-left"},hs={class:"info-text"},ks=p("i",{class:"lnir lnir-star-empty","aria-hidden":"true"},null,-1),gs=["innerHTML"],fs=p("div",{class:"meta-right"},null,-1),ys={class:"list-view-inner"},_s=p("img",{class:"light-image",src:B,alt:""},null,-1),ws=p("img",{class:"dark-image",src:G,alt:""},null,-1),bs=t({__name:"ChronicTasksView",props:{supplierId:{default:""},projectID:{default:""},workerId:{default:""},userId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(e,{emit:l}){const s=e,i=n("active"),t=n(""),d=n(!1),_=n([]),j=$(),D=c((()=>{if(t.value){const e=new RegExp(t.value,"i");return _.value.filter((l=>l.title.match(e)||l.description.match(e)))}return _.value}));return o((()=>{(async()=>{try{d.value=!0;const e=await j.get(`/api/task/project-wise-tasks/${s.userId}/`);_.value=e.data,console.log("chronic tasks",e.data),d.value=!1}catch(e){console.log(e)}})()})),(e,l)=>{const s=Y,n=V,c=F,o=a,_=ts;return g(d)?(r(),u("div",ns,[m(s)])):(r(),u("div",cs,[p("div",os,[m(c,null,{default:v((()=>[m(n,{icon:"feather:search"},{default:v((()=>[h(p("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>f(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,g(t)]])])),_:1})])),_:1}),ds]),(r(!0),u(b,null,C(g(D),(e=>(r(),u("div",{key:e.id,class:"page-content-inner mb-6"},[p("div",rs,[p("div",{id:"active-items-tab",class:y(["tab-content",["active"===g(i)&&"is-active"]])},[p("div",us,[m(W,{name:"list-complete",tag:"div"},{default:v((()=>[p("div",ps,[p("div",ms,[p("div",vs,[p("h3",null,[p("span",hs,[ks,P(w(e.title),1)])]),e.description?(r(),u("div",{key:0,innerHTML:e.description},null,8,gs)):x("",!0),p("span",null,[p("span",null," Timeline: "+w(e.startDate?e.startDate:"N/A")+" to "+w(e.endDate?e.endDate:"N/A"),1)])]),fs])])])),_:2},1024)])],2),p("div",{id:"inactive-items-tab",class:y(["tab-content",["inactive"===g(i)&&"is-active"]])},[p("div",ys,[m(o,{title:"There are no inactive properties.",subtitle:"Looks like there are no inactive properties to display. You can\n                disable and also enable a property from the property settings.",larger:""},{image:v((()=>[_s,ws])),_:1})])],2)]),m(_,{tasks:e.filtered_tasks},null,8,["tasks"])])))),128))]))}}});export{bs as _,Fa as a};
