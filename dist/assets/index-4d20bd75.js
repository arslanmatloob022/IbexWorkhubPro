import{_ as e}from"./VIconWrap.vue_vue_type_style_index_0_lang-fe2df700.js";import{e as l,r as a,o as t,A as s,B as o,C as n,D as i,I as u,E as r,F as c,l as d,T as p,J as m,U as _,V as v,j as f,M as b,O as y,z as h,N as g,al as V}from"./index-3945af1d.js";import{_ as k}from"./VInput.vue_vue_type_script_setup_true_lang-f1d099b2.js";import{_ as x,a as j}from"./VOption.vue_vue_type_style_index_0_lang-7999977c.js";import{_ as C}from"./VLabel.vue_vue_type_script_setup_true_lang-24dbad0e.js";import{_ as w}from"./VTextarea.vue_vue_type_script_setup_true_lang-67cd9ebd.js";import{_ as I}from"./VField.vue_vue_type_script_setup_true_lang-ffcf89bd.js";import{_ as S}from"./VControl-35e5f906.js";import{_ as A}from"./VAvatar.vue_vue_type_style_index_0_lang-4d9c7271.js";import{u as N}from"./useAPI-9c0b6639.js";import{u as U}from"./useNotyf-98e8ba5f.js";import{a as P}from"./useSupportElement-f3d65a2b.js";import{u as T}from"./viewWrapper-365f2d29.js";import{b as q}from"./route-block-83d24a4e.js";import"./via-placeholder-24645670.js";import"./useVFieldContext-5317823b.js";import"./userSession-0cb55279.js";import"./notyf-ba324f22.js";import"./useThemeColors-14fd6a0c.js";const z={class:"banking-dashboard banking-dashboard-v1"},F={class:"columns is-multiline"},J={class:"column is-12"},O={class:"columns is-multiline"},M={class:"column is-6"},L={class:"dashboard-card is-contacts"},W=i("div",{class:"title-wrap"},[i("h3",{class:"dark-inverted"},"Create link")],-1),$=["onSubmit"],B={class:"transfer-form"},D=i("label",{for:""}," Client",-1),E={class:"multiselect-single-label"},Y={class:"select-label-text"},G={class:"select-label-text"},H={class:"field"},K=i("label",null,"Description* (Job Name, Invoice Number etc)",-1),Q=["onSubmit"],R={class:"column is-12 p-0 mt-2"},X={class:"amount-item mb-2"},Z={class:"is-bold"},ee=i("br",null,null,-1),le={class:"submit-wrap mt-5"},ae={class:"column is-6"},te={class:"dashboard-card"},se=i("div",{class:"title-wrap"},[i("h3",{class:"dark-inverted"},"Payment links")],-1),oe={key:0,class:"context-text"},ne=l({__name:"IbexPaymentModule",setup(l){const h=N(),g=U();a(!1);const V=a(""),T=a([]),q=a(!1);a(!1);const ne=a(!1),ie=a({payment_method:"us_bank_account",description:"",client:""}),ue=a({title:"",amount:0,quantity:1}),re=a([]),ce=()=>{re.value.push(ue.value),ue.value={title:"",amount:0,quantity:1}},de=async()=>{try{ne.value=!0;const e=P(ie.value,[""]);e.append("itemsList",JSON.stringify(re.value)),e.append("enableTax","False");const l=await h.post("/api/paypal/stripe-session-new/",e);V.value=l.data.url,g.success("link Created")}catch(e){g.error("Something went wrong")}finally{ne.value=!1}};return t((()=>{(async()=>{try{q.value=!0;const e=await h.get("/api/users/by-role/client/",{});T.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{q.value=!1}})()})),(l,a)=>{const t=A,h=s("Multiselect"),N=S,U=I,P=w,q=C,pe=x,me=j,_e=k,ve=y,fe=e;return o(),n("div",z,[i("div",F,[i("div",J,[i("div",O,[i("div",M,[i("div",L,[W,i("form",{action:"",onSubmit:u(de,["prevent"])},[i("div",B,[r(U,{class:"is-image-select has-curved-images"},{default:c((()=>[D,r(N,null,{default:c((()=>[r(h,{modelValue:d(ie).client,"onUpdate:modelValue":a[0]||(a[0]=e=>d(ie).client=e),placeholder:"Select a client",label:"name","max-height":145,options:d(T)},{singlelabel:c((({value:e})=>[i("div",E,[r(t,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),i("span",Y,p(e.name),1)])])),option:c((({option:e})=>[r(t,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),i("span",G,p(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),i("div",H,[K,r(U,null,{default:c((()=>[r(N,null,{default:c((()=>[r(P,{modelValue:d(ie).description,"onUpdate:modelValue":a[1]||(a[1]=e=>d(ie).description=e),class:"is-primary-focus",rows:"2",placeholder:"Job Name: , Invoice Number:  "},null,8,["modelValue"])])),_:1})])),_:1})]),r(U,{class:"field column is-12 p-0"},{default:c((()=>[r(q,{for:""},{default:c((()=>[m("Pay by")])),_:1}),r(me,{modelValue:d(ie).payment_method,"onUpdate:modelValue":a[2]||(a[2]=e=>d(ie).payment_method=e)},{default:c((()=>[r(pe,{value:"us_bank_account"},{default:c((()=>[m("US Bank Account")])),_:1}),r(pe,{value:"card"},{default:c((()=>[m("Credit Card")])),_:1}),r(pe,{value:"both"},{default:c((()=>[m("Any")])),_:1})])),_:1},8,["modelValue"])])),_:1}),i("form",{action:"post",onSubmit:u(ce,["prevent"])},[r(U,null,{default:c((()=>[r(q,null,{default:c((()=>[m("Title")])),_:1}),r(N,null,{default:c((()=>[r(_e,{required:"",modelValue:d(ue).title,"onUpdate:modelValue":a[3]||(a[3]=e=>d(ue).title=e),type:"text",placeholder:"Item title"},null,8,["modelValue"])])),_:1})])),_:1}),r(U,{class:"field column is-12 p-0"},{default:c((()=>[r(q,null,{default:c((()=>[m("Amount in ($)")])),_:1}),r(N,null,{default:c((()=>[r(_e,{required:"",modelValue:d(ue).amount,"onUpdate:modelValue":a[4]||(a[4]=e=>d(ue).amount=e),type:"number",step:"0.01",placeholder:"Amount in $"},null,8,["modelValue"])])),_:1})])),_:1}),r(ve,{type:"submit",color:"info",size:"big",fullwidth:"",loading:d(ne),raised:"",bold:""},{default:c((()=>[m(" Add Item ")])),_:1},8,["loading"])],40,Q),i("div",R,[(o(!0),n(_,null,v(d(re),((e,l)=>(o(),n("div",X,[i("p",null,[i("span",null,p(l+1)+". ",1),i("span",Z,p(e.title),1),ee,i("span",null,"Amount: $"+p(e.amount),1)]),r(fe,{onClick:e=>(e=>{re.value.splice(e,1)})(l),color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])))),256))]),i("div",le,[r(ve,{type:"submit",color:"primary",size:"big",fullwidth:"",loading:d(ne),raised:"",bold:""},{default:c((()=>[m(" Create Payment link ")])),_:1},8,["loading"])])])],40,$)])]),i("div",ae,[i("div",te,[se,r(U,{label:"Checkout link",addons:""},{default:c((()=>[r(N,{expanded:""},{default:c((()=>[r(_e,{type:"text",modelValue:d(V),"onUpdate:modelValue":a[5]||(a[5]=e=>f(V)?V.value=e:null),class:"input",placeholder:"link..."},null,8,["modelValue"])])),_:1}),r(N,null,{default:c((()=>[r(ve,{icon:"fas fa-copy",onClick:a[6]||(a[6]=e=>{var l;(l=d(V))?navigator.clipboard.writeText(l).then((()=>{g.success("Link copied to clipboard!")})).catch((e=>{g.error("Failed to copy the link: ",e)})):g.error("No link to copy!")}),class:"cu-pointer",color:"primary"},{default:c((()=>[m(" Copy ")])),_:1})])),_:1})])),_:1}),d(V)?(o(),n("p",oe," payment link has been successfully created ")):b("",!0)])])])])])])}}}),ie={class:"page-content-inner"},ue=i("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),re=l({__name:"index",setup:e=>(T().setPageTitle("Ibex Payment"),h({title:"Ibex Payment"}),(e,l)=>{const a=ne;return o(),n("div",ie,[(o(),g(V,{to:"[data-teleport-bg]"},[ue])),r(a,{class:"has-navbar-spacing"})])})});"function"==typeof q&&q(re);export{re as default};
