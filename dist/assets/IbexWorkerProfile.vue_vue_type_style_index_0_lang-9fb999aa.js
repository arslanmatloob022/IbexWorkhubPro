import{_ as a}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-4f50f21b.js";import{_ as e}from"./AddUpdateUser-4dbe43c7.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-5e981469.js";import{_ as t}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-1b15a40c.js";import{_ as l}from"./WorkerTasks-7d52d4f0.js";import{_ as r}from"./VIconBox.vue_vue_type_style_index_0_lang-569659d5.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-03a88bb3.js";import{e as n,x as o,r as d,v as c,o as u,B as p,C as v,D as m,E as k,l as h,J as f,T as y,F as _,H as b,G as w,K as g,L as j,M as T,N as x,U as D,I as C}from"./index-a15b8738.js";import{F as M}from"./FullCalendar-d932f4cf.js";import{i as I}from"./index-f52ed8ce.js";import{u as A}from"./useAPI-d563b1d7.js";import{u as P}from"./useNotyf-6cf71864.js";import{u as N}from"./userSession-b5b32b7b.js";const U={class:"lifestyle-dashboard lifestyle-dashboard-v3"},H={class:"illustration-header"},W={class:"p-4"},O={class:"header-meta"},K={class:"summary-stats"},S={class:"summary-stat"},V=m("span",null,"Role",-1),F={class:"summary-stat"},L=m("span",null,"Status",-1),R={class:"summary-stat"},Z=m("span",null,"Phone",-1),$={class:"summary-stat"},q=m("span",null,"Email",-1),B={class:"summary-stat h-hidden-tablet-p"},E=m("span",null,"Mail notify ",-1),z={class:"summary-stat h-hidden-tablet-p"},G=m("span",null,"Password ",-1),J={class:"columns is-multiline is-flex-tablet-p"},X={class:"column is-3"},Y={class:"health-tile"},Q={class:"tile-head"},aa=m("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1),ea={class:"dark-inverted"},sa=m("h3",{class:"dark-inverted"},"Total Tasks",-1),ta=m("p",null,"Number of tasks assigned within 30 Days duration",-1),la={class:"column is-3"},ra={class:"health-tile"},ia={class:"tile-head"},na=m("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),oa={class:"dark-inverted"},da=m("h3",{class:"dark-inverted"},"Active Tasks",-1),ca=m("p",null,"Tasks are currently active and worker notified",-1),ua={class:"column is-3"},pa={class:"health-tile"},va={class:"tile-head"},ma=m("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1),ka={class:"dark-inverted"},ha=m("h3",{class:"dark-inverted"},"Pending Tasks",-1),fa=m("p",null,"Tasks that are pending and worker need to done.",-1),ya={class:"column is-3"},_a={class:"health-tile"},ba={class:"tile-head"},wa=m("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1),ga={class:"dark-inverted"},ja=m("h3",{class:"dark-inverted"},"Completed Tasks",-1),Ta=m("p",null," The worker has done his job on these tasks and assure by the manager ",-1),xa={class:"columns is-multiline"},Da={class:"list-flex-toolbar is-reversed"},Ca={class:"tabs-inner"},Ma={class:"tabs is-boxed"},Ia=[m("span",null,"Cards View",-1)],Aa=[m("span",null,"Calendar View",-1)],Pa=[m("span",null,"Today Tasks",-1)],Na=m("li",{class:"tab-naver"},null,-1),Ua={class:"column is-12"},Ha={key:0,class:"column is-12"},Wa=["onClick"],Oa={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},Ka={style:{"padding-right":"10px",color:"#f1f1f1"}},Sa={key:1,class:"column is-12"},Va=n({__name:"IbexWorkerProfile",setup(n){const Va=N(),Fa=P(),La=A(),Ra=o(),Za=d([]);c();const $a=d(""),qa=d(!1),Ba=d("cards"),Ea=d(""),za=d(!1),Ga=d({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});d(!1),d("all"),d("");const Ja=d(!1),Xa=d([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),Ya=d([]),Qa=d([]),ae=d([]),ee=d({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),se=d({plugins:[I],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),te=async()=>{try{Ja.value=!0;const a=await La.get(`/api/users/${Ra.params.id?Ra.params.id:Va.user.id}/`);Ga.value=a.data,Ja.value=!1}catch(a){console.log(a)}},le=d({}),re=d(!1),ie=d({});return u((async()=>{await te(),await(async()=>{try{const a=await La.get(`/api/task/${Ra.params.id?Ra.params.id:Va.user.id}/worker-tasks/`);Xa.value=a.data,console.log("worker tasks",Xa.value)}catch(a){Xa.value=[]}})(),(async(a=!1)=>{try{const e=await La.get(`/api/task/worker-today/${Ra.params.id?Ra.params.id:Va.user.id}/`);ie.value=e.data,a&&Fa.green("Tasks list Refreshed")}catch(e){console.log(e)}})(),Za.value=Xa.value.map((a=>({id:a.id,resourceId:a.project.id,start:a.startDate,end:a.endDate,title:a.title,color:a.color,description:a.description,workers:a.workers,borderColor:ee[a.status],status:a.status,project:a.project}))),ae.value=Xa.value.map((a=>({id:a.project.id,start:a.project.startDate,end:a.project.endDate,title:a.project.title,address:a.project.address,status:a.project.status,color:ee[a.project.status]}))),Ya.value=ae.value,Qa.value=Za.value,se.value={...se.value,resources:Ya.value,events:Qa.value},console.log("tasks",se.value.events,"resources",se.value.resources)})),(n,o)=>{const d=i,c=r,u=l,I=t,A=s,P=e,N=a;return p(),v(D,null,[m("div",U,[m("div",H,[m("div",W,[k(d,{size:"xl",squared:"",picture:h(Ga).avatar,alt:""},null,8,["picture"])]),m("div",O,[m("h3",null,[f(y(h(Ga)?.username)+" ",1),m("i",{onClick:o[0]||(o[0]=a=>((a="")=>{$a.value=a,qa.value=!0})(h(Ga).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),m("div",K,[m("div",S,[V,m("span",null,y(h(Ga)?.role),1)]),m("div",F,[L,m("span",null,y(h(Ga)?.is_active?"Active":" In-Active"),1)]),m("div",R,[Z,m("span",null,y(h(Ga)?.phoneNumber?h(Ga)?.phoneNumber:"N/A"),1)]),m("div",$,[q,m("span",null,y(h(Ga)?.email),1)]),m("div",B,[E,m("span",null,y(h(Ga).is_sentMail?"On":"Off"),1)]),m("div",z,[G,m("span",null,[m("i",{onClick:o[1]||(o[1]=a=>{return e=h(Ga).id,Ea.value=e,void(za.value=!0);var e}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),m("div",J,[m("div",X,[m("div",Y,[m("div",Q,[k(c,{color:"primary"},{default:_((()=>[aa])),_:1}),m("h4",null,[m("span",ea,y(h(ie)?.stats?.pending+h(ie)?.stats?.active+h(ie)?.stats?.active),1)])]),sa,ta])]),m("div",la,[m("div",ra,[m("div",ia,[k(c,{color:"primary"},{default:_((()=>[na])),_:1}),m("h4",null,[m("span",oa,y(h(ie)?.stats?.active?h(ie)?.stats?.active:0),1)])]),da,ca])]),m("div",ua,[m("div",pa,[m("div",va,[k(c,{color:"primary"},{default:_((()=>[ma])),_:1}),m("h4",null,[m("span",ka,y(h(ie)?.stats?.pending?h(ie)?.stats?.pending:0),1)])]),ha,fa])]),m("div",ya,[m("div",_a,[m("div",ba,[k(c,{color:"primary"},{default:_((()=>[wa])),_:1}),m("h4",null,[m("span",ga,y(h(ie)?.stats?.completed?h(ie)?.stats?.completed:0),1)])]),ja,Ta])])]),m("div",xa,[m("div",Da,[m("div",Ca,[m("div",Ma,[m("ul",null,[m("li",{class:b(["cards"===h(Ba)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:o[2]||(o[2]=w(C((a=>Ba.value="cards"),["prevent"]),["space"])),onClick:o[3]||(o[3]=a=>Ba.value="cards")},Ia,32)],2),m("li",{class:b(["calendar"===h(Ba)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:o[4]||(o[4]=w(C((a=>Ba.value="calendar"),["prevent"]),["space"])),onClick:o[5]||(o[5]=a=>Ba.value="calendar")},Aa,32)],2),m("li",{class:b(["today"===h(Ba)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:o[6]||(o[6]=w(C((a=>Ba.value="today"),["prevent"]),["space"])),onClick:o[7]||(o[7]=a=>Ba.value="today")},Pa,32)],2),Na])])])]),g(m("div",Ua,[k(u,{workerId:h(Ra).params.id},null,8,["workerId"])],512),[[j,"cards"==h(Ba)]]),"calendar"==h(Ba)?(p(),v("div",Ha,[k(h(M),{options:h(se)},{eventContent:_((a=>[m("div",{onClick:e=>{return s=a.event.extendedProps,le.value=s,console.log("dataa",s),void(re.value=!0);var s},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},[m("p",Oa,y(a.event.title),1),m("p",Ka,y(new Date(a.event.start).toDateString())+" to "+y(new Date(a.event.end).toDateString()),1)],8,Wa)])),_:1},8,["options"])])):T("",!0),"today"==h(Ba)?(p(),v("div",Sa,[k(I,{workerId:h(Ra).params.id},null,8,["workerId"])])):T("",!0)]),h(za)?(p(),x(A,{key:0,isModalOpen:h(za),userId:h(Ea),"onUpdate:closeModalHandler":o[8]||(o[8]=a=>za.value=!1)},null,8,["isModalOpen","userId"])):T("",!0),h(qa)?(p(),x(P,{key:1,isModalOpen:h(qa),userId:h($a),userRole:"worker","onUpdate:closeModalHandler":o[9]||(o[9]=a=>qa.value=!1),"onUpdate:actionUpdateHandler":te},null,8,["isModalOpen","userId"])):T("",!0)]),h(re)?(p(),x(N,{key:0,taskDetailModal:h(re),taskData:h(le),"onUpdate:modalHandler":o[10]||(o[10]=a=>re.value=!1)},null,8,["taskDetailModal","taskData"])):T("",!0)],64)}}});export{Va as _};
