import{_ as e}from"./VInput.vue_vue_type_script_setup_true_lang-8eedbc96.js";import{e as a,r as s,o as l,M as t,y as n,z as o,C as i,A as c,B as r,l as p,J as u,S as d,T as m,D as v,E as y,v as f,H as _,ak as h}from"./index-ed878baa.js";import{_ as b}from"./VTextarea.vue_vue_type_script_setup_true_lang-6682908c.js";import{_ as g}from"./VField.vue_vue_type_script_setup_true_lang-63cc4033.js";import{_ as k}from"./VControl-71751153.js";import{_ as x}from"./VAvatar.vue_vue_type_style_index_0_lang-89006900.js";import{u as C}from"./useAPI-4dbd45d9.js";import{u as V}from"./incomeHistoryChart-a9b82bc9.js";import{u as w}from"./useNotyf-51dcaca9.js";import{b as j}from"./route-block-83d24a4e.js";import{u as P}from"./viewWrapper-5df11b72.js";import"./useVFieldContext-9a447149.js";import"./VLabel.vue_vue_type_script_setup_true_lang-cb6c0e84.js";import"./userSession-3fb9a025.js";import"./useThemeColors-be929954.js";import"./notyf-fd8b7ffd.js";const A={class:"banking-dashboard banking-dashboard-v1"},I={class:"columns is-multiline"},T={class:"column is-12"},D={class:"columns is-multiline"},B={class:"column is-6"},S={class:"dashboard-card is-contacts"},M=i("div",{class:"title-wrap"},[i("h3",{class:"dark-inverted"},"Create link")],-1),U=i("div",{class:"people-wrap"},[i("div",{class:"actions"},[i("span",null,"Clients")])],-1),z={class:"transfer-form"},E={class:"multiselect-single-label"},F={class:"select-label-text"},L={class:"select-label-text"},Q={class:"field"},X=i("label",null,"Amount",-1),Y={class:"field has-addons"},q={class:"field-addon-body"},G=i("div",{class:"control"},[i("span",{class:"select currency-select"},[i("select",null,[i("option",null,"$")])])],-1),H={class:"control is-expanded"},N={class:"field"},R=i("label",null,"Description",-1),J=i("p",{class:"context-text"}," Please enter amount you want your client to pay with small description. ",-1),O={class:"submit-wrap"},W={class:"column is-6"},Z={class:"dashboard-card"},$=i("div",{class:"title-wrap"},[i("h3",{class:"dark-inverted"},"Payment links")],-1),K={class:"context-text"},ee=a({__name:"IbexPaymentModule",setup(a){const f=C(),_=w(),h=s({amount:0,description:"",client:""}),j=s(!1),P=s({payments:[],count:0});s(["default"]);const ee=s([]),ae=s(!1),se=s(!1),le=s({success:!0,msg:"payment link has been successfully created",resp:{id:"PAYID-M4BCCXQ345677503C442360B",intent:"sale",state:"created",payer:{payment_method:"paypal"},transactions:[{amount:{total:"10.00",currency:"USD"},description:"Desc",related_resources:[]}],create_time:"2024-10-06T05:34:22Z",links:[{href:"https://api.sandbox.paypal.com/v1/payments/payment/PAYID-M4BCCXQ345677503C442360B",rel:"self",method:"GET"},{href:"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4812231612231625T",rel:"approval_url",method:"REDIRECT"},{href:"https://api.sandbox.paypal.com/v1/payments/payment/PAYID-M4BCCXQ345677503C442360B/execute",rel:"execute",method:"POST"}]}});V(),s(0);const te=e=>{e?navigator.clipboard.writeText(e).then((()=>{_.success("Link copied to clipboard!")})).catch((e=>{_.error("Failed to copy the link: ",e)})):_.error("No link to copy!")},ne=async()=>{try{se.value=!0;const e=await f.post("/api/paypal/create-link/",{amount:h.value.amount,description:h.value.description});le.value=e.data,_.success("link Created")}catch(e){_.success("Something went wrong")}finally{se.value=!1}};return l((()=>{(async()=>{try{ae.value=!0;const e=await f.get("/api/users/by-role/client/",{});ee.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{ae.value=!1}})(),(async()=>{try{j.value=!0;const e=await f.get("/api/paypal/payments/");P.value=e.data}catch(e){console.log(e)}finally{j.value=!1}})()})),(a,s)=>{const l=x,f=t("Multiselect"),_=k,C=g,V=b,w=y,j=e;return n(),o("div",A,[i("div",I,[i("div",T,[i("div",D,[i("div",B,[i("div",S,[M,U,i("div",z,[c(C,{class:"is-image-select has-curved-images"},{default:r((()=>[c(_,null,{default:r((()=>[c(f,{modelValue:p(h).client,"onUpdate:modelValue":s[0]||(s[0]=e=>p(h).client=e),placeholder:"Select a client",label:"name","max-height":145,options:p(ee)},{singlelabel:r((({value:e})=>[i("div",E,[c(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),i("span",F,u(e.name),1)])])),option:r((({option:e})=>[c(l,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),i("span",L,u(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),i("div",Q,[X,i("div",Y,[i("div",q,[G,i("div",H,[d(i("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>p(h).amount=e),class:"input",type:"number",placeholder:"Amount of money"},null,512),[[m,p(h).amount]])])])])]),i("div",N,[R,c(C,null,{default:r((()=>[c(_,null,{default:r((()=>[c(V,{modelValue:p(h).description,"onUpdate:modelValue":s[2]||(s[2]=e=>p(h).description=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})]),J,i("div",O,[c(w,{onClick:ne,color:"info",size:"big",fullwidth:"",loading:p(se),raised:"",bold:"",icon:"lnir lnir-paypal"},{default:r((()=>[v(" Create Payment link ")])),_:1},8,["loading"])])])])]),i("div",W,[i("div",Z,[$,c(C,{label:"Client link",addons:""},{default:r((()=>[c(_,{expanded:""},{default:r((()=>[c(j,{type:"text",modelValue:p(le).resp.links[1].href,"onUpdate:modelValue":s[3]||(s[3]=e=>p(le).resp.links[1].href=e),class:"input",placeholder:"Approved link..."},null,8,["modelValue"])])),_:1}),c(_,null,{default:r((()=>[c(w,{onClick:s[4]||(s[4]=e=>te(p(le).resp.links[1].href)),class:"cu-pointer",color:"primary",icon:"fas fa-envelope"},{default:r((()=>[v(" Send ")])),_:1})])),_:1})])),_:1}),c(C,{label:"Client link",addons:""},{default:r((()=>[c(_,{expanded:""},{default:r((()=>[c(j,{type:"text",modelValue:p(le).resp.links[1].href,"onUpdate:modelValue":s[5]||(s[5]=e=>p(le).resp.links[1].href=e),class:"input",placeholder:"Approved link..."},null,8,["modelValue"])])),_:1}),c(_,null,{default:r((()=>[c(w,{icon:"fas fa-copy",onClick:s[6]||(s[6]=e=>te(p(le).resp.links[1].href)),class:"cu-pointer",color:"primary"},{default:r((()=>[v(" Copy ")])),_:1})])),_:1})])),_:1}),i("p",K,u(p(le).msg?p(le).msg:"Link not generated yet"),1)])])])])])])}}});"function"==typeof j&&j(ee);const ae={class:"page-content-inner"},se=i("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),le=a({__name:"index",setup:e=>(P().setPageTitle("Ibex Payment"),f({title:"Ibex Payment"}),(e,a)=>{const s=ee;return n(),o("div",ae,[(n(),_(h,{to:"[data-teleport-bg]"},[se])),c(s,{class:"has-navbar-spacing"})])})});"function"==typeof j&&j(le);export{le as default};
