import{_ as e}from"./ProposalViewModal.vue_vue_type_style_index_0_lang-2dfa8a73.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-1dcd2a33.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-b1204a54.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-f8e5b132.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-10c026f9.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-0ea0cd86.js";import{_ as o}from"./VTag.vue_vue_type_style_index_0_lang-99add723.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-0f3b8e88.js";import{_ as d}from"./VDropdown.vue_vue_type_style_index_0_lang-8cb5c7bf.js";import{_ as c}from"./VField.vue_vue_type_script_setup_true_lang-6194d01d.js";import{_ as u}from"./VControl-0eda132a.js";import{f as p,x as m,r as _,$ as v,o as f,av as y,C as h,D as b,m as g,O as k,E as j,I as w,H as C,F as x,G as A,K as V,L as I,X as S,k as P,N as O,V as $,W as N,aS as L,P as U,al as M,J as D,U as T,A as J}from"./index-93ad3bc5.js";import{_ as E}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-3f415844.js";import{_ as F,a as z}from"./search-4-dark-2b5b440c.js";import{u as R}from"./useAPI-7a3548b0.js";import{u as H}from"./useNotyf-97a0c6d5.js";import{d as K,i as W}from"./useSupportElement-d3be6c86.js";import{g as B}from"./estimatesScripts-e11ceb84.js";import{h as G}from"./moment-bad41465.js";import{u as Y}from"./viewWrapper-1cac9cdb.js";import{b as Z}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-935e6878.js";import"./VRadio.vue_vue_type_style_index_0_lang-255734ba.js";import"./VLabel.vue_vue_type_script_setup_true_lang-19e69045.js";import"./useVFieldContext-7406fd2c.js";import"./CreateProposalTasksModal-2d0fedb5.js";import"./UnitAddUpdateModal.vue_vue_type_script_setup_true_lang-3b180417.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-191c720a.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-09c21a7c.js";import"./VInput.vue_vue_type_script_setup_true_lang-e4e597d5.js";import"./VOption.vue_vue_type_style_index_0_lang-d241c5ce.js";import"./costItems-7a64af96.js";import"./VIconButton-4f0a5358.js";import"./company-e4779056.js";import"./V-Snack.vue_vue_type_style_index_0_lang-530799bc.js";import"./VIcon.vue_vue_type_script_setup_true_lang-c83a38bd.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-e27d3664.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-c3c4a49e.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-53e89182.js";import"./ckeditor-1a24a1a3.js";import"./vue.runtime.esm-bundler-7ad39dfc.js";import"./ckeditor-28a564ea.js";import"./VFlex.vue_vue_type_style_index_0_lang-0b732777.js";import"./useDropdown-db1ad0c6.js";import"./VPlaceloadWrap-72927fe3.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-47b71d88.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-c1c55630.js";import"./notyf-f28b7705.js";import"./useThemeColors-8a9933d1.js";const Q={key:1},X={class:"list-flex-toolbar"},q={class:"column is-6"},ee={class:"tabs-wrapper"},ae={class:"tabs-inner"},le={class:"tabs is-toggle"},te=[j("span",null,"All Jobs",-1)],se=[j("span",null,"Completed Jobs",-1)],ne=j("li",{class:"tab-naver"},null,-1),ie={class:"page-content-inner"},oe={class:"flex-list-wrapper flex-list-v1"},re={class:"columns is-multiline"},de={class:"column is-3"},ce=j("div",{class:"column is-3"},null,-1),ue={class:"column is-6 justify-right"},pe=[j("div",{class:"icon"},[j("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Ascending"),j("span",null,"Alphabetical Ascending Sorting")],-1)],me=[j("div",{class:"icon"},[j("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Descending"),j("span",null,"Alphabetical Descending Sorting")],-1)],_e=[j("div",{class:"icon"},[j("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Most Recent"),j("span",null,"Sort most recently created")],-1)],ve=[j("div",{class:"icon"},[j("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Most Old"),j("span",null,"Sort the most oldest")],-1)],fe=j("img",{class:"light-image",src:F,alt:""},null,-1),ye=j("img",{class:"dark-image",src:z,alt:""},null,-1),he={key:1},be={class:"item-name dark-inverted show-text-200"},ge={class:"item-meta show-text-200"},ke={key:0,class:"show-text-200"},je={class:"item-name"},we={class:"item-meta"},Ce={key:1,class:"show-text-200"},xe={class:"item-name dark-inverted"},Ae={class:"item-meta"},Ve={class:"item-name dark-inverted"},Ie={class:"item-meta"},Se=["onClick"],Pe=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),j("div",{class:"meta"},[j("span",null,"View"),j("span",null,"View user details")],-1)],Oe=["onClick"],$e=[j("div",{class:"icon"},[j("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Add Proposals"),j("span",null,"Add new proposal to lead")],-1)],Ne=["onClick"],Le=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),j("div",{class:"meta"},[j("span",null,"Edit"),j("span",null,"Update Lead Info")],-1)],Ue=j("hr",{class:"dropdown-divider"},null,-1),Me=["onClick"],De=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),j("div",{class:"meta"},[j("span",null,"Delete"),j("span",null,"Delete Proposal Permanently")],-1)],Te={key:2},Je={key:0,class:"show-text-200"},Ee={class:"item-name"},Fe={class:"item-meta"},ze={key:1,class:"show-text-200"},Re={class:"item-name dark-inverted"},He={class:"item-meta"},Ke={class:"item-name dark-inverted show-text-200"},We={class:"item-meta show-text-200"},Be={class:"item-name dark-inverted"},Ge={class:"item-meta"},Ye=["onClick"],Ze=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),j("div",{class:"meta"},[j("span",null,"View"),j("span",null,"View user details")],-1)],Qe=["onClick"],Xe=[j("div",{class:"icon"},[j("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Add Proposals"),j("span",null,"Add new proposal to lead")],-1)],qe=["onClick"],ea=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),j("div",{class:"meta"},[j("span",null,"Edit"),j("span",null,"Update Lead Info")],-1)],aa=j("hr",{class:"dropdown-divider"},null,-1),la=["onClick"],ta=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),j("div",{class:"meta"},[j("span",null,"Delete"),j("span",null,"Delete Proposal Permanently")],-1)],sa=p({__name:"JobsList",setup(p){const J=m(),F=H(),z=R(),Y=_(),Z=_("all"),sa=_({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),na=_(42),ia=_("");_("");const oa=_(!1),ra=_(!1);_([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]);const da={username:{label:"Job",grow:!0},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},ca=_([]),ua=async()=>{try{Y.value=!0;const e=await z.get("/api/project/project-jobs/");sa.value=e.data.filter((e=>"completed"==e.status)),ca.value=e.data.filter((e=>"completed"!=e.status))}catch(e){F.error(` ${e}, Lead`)}finally{Y.value=!1}},pa=_(""),ma=e=>{pa.value=e,ra.value=!0},_a=_({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),va=e=>{pa.value=e,_a.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0}},fa=async()=>{try{Y.value=!0;await z.delete(`/api/project/${pa.value}/`);F.success("Proposal delete successfully"),ua()}catch(e){F.error(` ${e}, Proposal`),F.error("Something went wrong please try later")}finally{Y.value=!1,_a.value.isSweetAlertOpen=!1}},ya=e=>{pa.value=e,oa.value=!oa.value},ha=v((()=>{if(ia.value){const e=new RegExp(ia.value,"i");return ca.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return ca.value})),ba=_(""),ga=(e="")=>{ba.value=e},ka=v((()=>{let e=ha.value||[];return ba.value?[...e].sort(((e,a)=>"ascending"===ba.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===ba.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===ba.value?G(a.created).valueOf()-G(e.created).valueOf():"old"===ba.value?G(e.created).valueOf()-G(a.created).valueOf():0)):ha.value})),ja=v((()=>{if(ia.value){const e=new RegExp(ia.value,"i");return sa.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return sa.value}));return f((()=>{ua()})),(p,m)=>{const _=E,v=U,f=M,F=u,z=c,R=d,H=r,G=n,sa=o,ca=i,ha=s,ba=t,wa=l,Ca=a,xa=e,Aa=y("tooltip");return h(),b("div",null,[g(Y)?(h(),k(_,{key:0})):(h(),b("div",Q,[j("div",X,[j("div",q,[j("div",ee,[j("div",ae,[j("div",le,[j("ul",null,[j("li",{class:w(["all"===g(Z)&&"is-active"])},[j("a",{tabindex:"0",role:"button",onKeydown:m[0]||(m[0]=C(D((e=>Z.value="all"),["prevent"]),["space"])),onClick:m[1]||(m[1]=e=>Z.value="all")},te,32)],2),j("li",{class:w(["completed"===g(Z)&&"is-active"])},[j("a",{tabindex:"0",role:"button",onKeydown:m[2]||(m[2]=C(D((e=>Z.value="completed"),["prevent"]),["space"])),onClick:m[3]||(m[3]=e=>Z.value="completed")},se,32)],2),ne])])])])]),x(f,null,{default:A((()=>[x(v,{onClick:m[4]||(m[4]=e=>ma("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:A((()=>[V(" Lead Opportunity ")])),_:1})])),_:1})]),j("div",ie,[j("div",oe,[j("div",re,[j("div",de,[x(z,null,{default:A((()=>[x(F,{icon:"feather:search"},{default:A((()=>[I(j("input",{"onUpdate:modelValue":m[5]||(m[5]=e=>P(ia)?ia.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[S,g(ia)]])])),_:1})])),_:1})]),ce,j("div",ue,[x(R,{title:"Apply sorting",spaced:""},{content:A((()=>[j("a",{onClick:m[6]||(m[6]=e=>ga("ascending")),class:"dropdown-item is-media"},pe),j("a",{onClick:m[7]||(m[7]=e=>ga("descending")),class:"dropdown-item is-media is-active"},me),j("a",{onClick:m[8]||(m[8]=e=>ga("new")),class:"dropdown-item is-media"},_e),j("a",{onClick:m[9]||(m[9]=e=>ga("old")),class:"dropdown-item is-media"},ve)])),_:1})])]),g(ka)?.length?O("",!0):(h(),k(H,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:A((()=>[fe,ye])),_:1})),"all"===g(Z)?(h(),b("div",he,[g(ka)?.length?(h(),k(ha,{key:0,data:g(ka),columns:da,compact:""},{body:A((()=>[x(L,{name:"list",tag:"div",class:"flex-list-inner"},{default:A((()=>[(h(!0),b($,null,N(g(ka),(e=>(h(),b("div",{key:e.id,class:"flex-table-item"},[x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:A((()=>[j("div",null,[j("span",be,T(e.title?e.title:"N/A"),1),j("span",ge,[j("span",null,T(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:A((()=>[e.clientInfo?(h(),b("div",ke,[j("span",je,T(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),j("span",we,[j("span",null,T(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):O("",!0),e.contractor_info?(h(),b("div",Ce,[j("span",xe,T(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),j("span",Ae,[j("span",null,T(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):O("",!0)])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:A((()=>[j("div",null,[j("span",Ve,T(g(K)(e.created)),1),j("span",Ie,[j("span",null,"At:"+T(g(W)(e.created)),1)])])])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:A((()=>[x(sa,{class:"capitalized",color:g(B)[e.status],rounded:""},{default:A((()=>[V(T(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:A((()=>[j("div",null,[(h(!0),b($,null,N(e.managers_list,(e=>I((h(),k(ca,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Aa,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),x(G,{column:{align:"end"}},{default:A((()=>[x(R,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:A((({close:a})=>[j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)}},Pe,8,Se),j("a",{role:"menuitem",onClick:a=>ya(e.id),class:"dropdown-item is-media"},$e,8,Oe),j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:D((a=>ma(e.id)),["prevent"])},Le,8,Ne),Ue,j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:D((a=>va(e.id)),["prevent"])},De,8,Me)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):O("",!0),g(ka)?.length>5?(h(),k(ba,{key:1,"current-page":g(na),"onUpdate:currentPage":m[10]||(m[10]=e=>P(na)?na.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):O("",!0)])):O("",!0),"completed"===g(Z)?(h(),b("div",Te,[g(ja)?.length?(h(),k(ha,{key:0,data:g(ja),columns:da,compact:""},{body:A((()=>[x(L,{name:"list",tag:"div",class:"flex-list-inner"},{default:A((()=>[(h(!0),b($,null,N(g(ja),(e=>(h(),b("div",{key:e.id,class:"flex-table-item"},[x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:A((()=>[e.clientInfo?(h(),b("div",Je,[j("span",Ee,T(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),j("span",Fe,[j("span",null,T(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):O("",!0),e.contractor_info?(h(),b("div",ze,[j("span",Re,T(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),j("span",He,[j("span",null,T(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):O("",!0)])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:A((()=>[j("div",null,[j("span",Ke,T(e.title?e.title:"N/A"),1),j("span",We,[j("span",null,T(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:A((()=>[j("div",null,[j("span",Be,T(g(K)(e.created)),1),j("span",Ge,[j("span",null,"At:"+T(g(W)(e.created)),1)])])])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:A((()=>[x(sa,{class:"capitalized",color:g(B)[e.status],rounded:""},{default:A((()=>[V(T(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),x(G,{onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:A((()=>[j("div",null,[(h(!0),b($,null,N(e.managers_list,(e=>I((h(),k(ca,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Aa,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),x(G,{column:{align:"end"}},{default:A((()=>[x(R,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:A((({close:a})=>[j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{g(J).push(`/sidebar/dashboard/jobs/${e.id}`)}},Ze,8,Ye),j("a",{role:"menuitem",onClick:a=>ya(e.id),class:"dropdown-item is-media"},Xe,8,Qe),j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:D((a=>ma(e.id)),["prevent"])},ea,8,qe),aa,j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:D((a=>va(e.id)),["prevent"])},ta,8,la)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):O("",!0),g(ja)?.length>5?(h(),k(ba,{key:1,"current-page":g(na),"onUpdate:currentPage":m[11]||(m[11]=e=>P(na)?na.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):O("",!0)])):O("",!0)])])])),g(ra)?(h(),k(wa,{key:2,addUpdateLeadModal:g(ra),leadId:g(pa),"onUpdate:modalHandler":m[12]||(m[12]=e=>ra.value=!1),"onUpdate:OnSuccess":ua},null,8,["addUpdateLeadModal","leadId"])):O("",!0),g(_a).isSweetAlertOpen?(h(),k(Ca,{key:3,isSweetAlertOpen:g(_a).isSweetAlertOpen,title:g(_a).title,subtitle:g(_a).subtitle,loading:g(Y),btntext:g(_a).btntext,onConfirm:fa,onCancel:()=>g(_a).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):O("",!0),g(oa)?(h(),k(xa,{key:4,"lead-proposal-modal":g(oa),"lead-id":g(pa),"onUpdate:modalHandler":m[13]||(m[13]=e=>oa.value=!1),"onUpdate:OnSuccess":ua},null,8,["lead-proposal-modal","lead-id"])):O("",!0)])}}}),na=p({__name:"index",setup:e=>(Y().setPageTitle("Jobs"),J({title:"Jobs - Ibex"}),(e,a)=>{const l=sa;return h(),b("div",null,[x(l)])})});"function"==typeof Z&&Z(na);export{na as default};
