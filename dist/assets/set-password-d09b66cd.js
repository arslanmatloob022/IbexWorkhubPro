import{e as a,r as e,F as s,t as l,N as o,o as t,v as d,M as i,y as r,z as u,C as n,A as c,B as m,I as p,l as v,O as f,K as _,D as h,j as g,U as y,E as b,W as w,X as j,L as k}from"./index-07330caa.js";import{_ as V}from"./VCheckbox.vue_vue_type_style_index_0_lang-c961d41c.js";import{_ as x}from"./VField.vue_vue_type_script_setup_true_lang-a4fe9822.js";import{_ as C}from"./VControl-8e9bb568.js";import{_ as P}from"./VInput.vue_vue_type_script_setup_true_lang-e52eb4a0.js";import{_ as A}from"./VLabel.vue_vue_type_script_setup_true_lang-b1c1b59b.js";import{_ as S}from"./AnimatedLogo-3df60c34.js";import{_ as I}from"./station-d527b828.js";import{u as q}from"./useNotyf-0268ce1e.js";import{u as z}from"./useAPI-8d821f52.js";import{u as L}from"./layoutSwitcher-e86c843b.js";import"./useVFieldContext-8e57795b.js";import"./notyf-c5799020.js";import"./useThemeColors-cc886c05.js";import"./userSession-1b4a14a8.js";const U=a=>(w("data-v-dd4cafcc"),a=a(),j(),a),F={class:"modern-login"},B=U((()=>n("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),D={class:"columns is-gapless is-vcentered"},K=y('<div class="column is-relative is-8 h-hidden-mobile h-hidden-tablet-p" data-v-dd4cafcc><div class="hero is-fullheight is-image" data-v-dd4cafcc><div class="hero-body" data-v-dd4cafcc><div class="container" data-v-dd4cafcc><div class="columns" data-v-dd4cafcc><div class="column" data-v-dd4cafcc><img class="hero-image" src="'+I+'" alt="" data-v-dd4cafcc></div></div></div></div></div></div>',1),N={class:"column is-4 is-relative"},R={class:"top-tools"},E={style:{width:"12rem",height:"12rem"}},M=["checked"],O=U((()=>n("span",null,null,-1))),T={class:"is-form"},W={class:"is-form-inner"},X=[U((()=>n("h2",null,"Set Password",-1)))],G=["onSubmit"],H={class:"button-wrap has-help"},J=k(a({__name:"set-password",setup(a){L();const y=e("login"),w=e(!1),j=s(),k=l(),I=o(),U=q(),J=z(),Q=e(""),Y=e(""),Z=e(""),$=e(""),aa=async()=>{if(!w.value){if(Q.value!=Y.value)return void U.error("Both password and confirm password  must be matched");w.value=!0;try{await J.post("/v3/api/account/auth/set-password/",{email:$.value,password:Q.value,token:Z.value,confirm_password:Y.value});ea()}catch(a){w.value=!1,U.dismissAll(),U.error("Inavlid link or expired, password update")}}},ea=()=>{w.value=!1,U.dismissAll(),U.success("Password updated successfully"),k.push("/auth/login")};t((()=>{Z.value=I.query.token,$.value=I.query.email})),d({title:"Reset Password - Arez"});const sa=e(!1),la=e("Password"),oa=()=>{la.value="Password"===la.value?"text":"Password"};return(a,e)=>{const s=S,l=i("RouterLink"),o=A,t=P,d=C,k=x,I=V,q=b;return r(),u("div",F,[B,n("div",D,[K,n("div",N,[n("div",R,[c(l,{to:"/",class:"top-logo"},{default:m((()=>[n("div",E,[c(s,{width:"38px",height:"38px"})])])),_:1}),n("label",{class:"dark-mode",tabindex:"0",role:"button",onKeydown:e[1]||(e[1]=p(_((a=>a.target.click()),["prevent"]),["space"]))},[n("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!v(j).isDark,onChange:e[0]||(e[0]=(...a)=>v(j).onChange&&v(j).onChange(...a))},null,40,M),O],32)]),n("div",T,[n("div",W,[n("div",{class:f(["form-text",["login"!==v(y)&&"is-hidden"]])},X,2),n("form",{method:"post","data-cy":"login-form",class:f([["login"!==v(y)&&"is-hidden"],"login-wrapper"]),onSubmit:_(aa,["prevent"])},[c(k,null,{default:m((()=>[c(d,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[h(" Password ")])),_:1}),c(t,{modelValue:v(Q),"onUpdate:modelValue":e[2]||(e[2]=a=>g(Q)?Q.value=a:null),type:v(la),required:"",minlength:"8"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(k,null,{default:m((()=>[c(d,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[h(" Confirm Password ")])),_:1}),c(t,{modelValue:v(Y),"onUpdate:modelValue":e[3]||(e[3]=a=>g(Y)?Y.value=a:null),required:"",type:v(la),minlength:"8"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(k,null,{default:m((()=>[c(d,{class:"is-flex"},{default:m((()=>[c(d,{raw:"",subcontrol:""},{default:m((()=>[c(I,{modelValue:v(sa),"onUpdate:modelValue":e[4]||(e[4]=a=>g(sa)?sa.value=a:null),label:"Show Password",color:"primary",onClick:oa},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n("div",H,[c(q,{id:"login-button",loading:v(w),color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:m((()=>[h(" Submit ")])),_:1},8,["loading"])])],42,G)])])])])])}}}),[["__scopeId","data-v-dd4cafcc"]]);export{J as default};
