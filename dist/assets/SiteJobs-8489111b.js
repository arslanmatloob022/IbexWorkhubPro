import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-23a71743.js";import{a as t,_ as l}from"./SiteDetailModal-dd32868c.js";import{e as a,r as s,s as i,N as o,o as n,b as r,_ as c,y as d,H as m,B as u,S as p,C as y,j as v,at as f,l as g,D as h,T as b,z as w,P as x,A as _,a3 as S,Q as D,R as k,aa as j,J as C,Y as z,K as I,aB as T,E as A,W as E,X as N,L as R,a9 as V,O,I as J,U}from"./index-94fd63d9.js";import{_ as M}from"./VModal.vue_vue_type_style_index_0_lang-4a477fa8.js";import{_ as P}from"./VField.vue_vue_type_script_setup_true_lang-3d88a258.js";import{_ as L}from"./VControl-f48771f4.js";import{_ as H}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-e2767a1c.js";import{u as $}from"./useAPI-908cf8be.js";import{u as q}from"./useNotyf-c83d15ff.js";import{u as F}from"./company-3dcc7c9c.js";import{m as K,a as B}from"./useSupportElement-8f2f795f.js";import{a as Y}from"./RotaView-5f1d3249.js";import{_ as G}from"./VDropdown.vue_vue_type_style_index_0_lang-f87af767.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-364ebd39.js";const Z=e=>(E("data-v-93e789de"),e=e(),N(),e),Q={class:""},X={class:""},ee={class:"modal-form columns cu-all-input is-multiline"},te={class:"column is-12",style:{"margin-top":"-1rem"}},le={class:"column is-12 mb-0 p-0",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},ae={class:"field column is-12 mb-0"},se=Z((()=>y("label",null,[h("Job Type "),y("span",{style:{color:"red"}},"*")],-1))),ie={class:"",style:{display:"flex","align-items":"center",gap:"2rem","margin-top":"0.5rem"}},oe={style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888"}},ne={style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888"}},re={style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888"}},ce=Z((()=>y("span",{style:{width:"fit-content",display:"flex"}},"Temporary (Shifts)",-1))),de={class:"field column is-4 mb-0"},me=Z((()=>y("label",null,[h("Job Name "),y("span",{style:{color:"red"}},"*")],-1))),ue={class:"control"},pe={class:"field column is-4 mb-0"},ye=Z((()=>y("label",null,[h("Start Date "),y("span",{style:{color:"red"}},"*")],-1))),ve={class:"control"},fe={key:0,class:"field column is-4 mb-0"},ge=Z((()=>y("label",null,[h("End Date "),y("span",{style:{color:"red"}},"*")],-1))),he={class:"control"},be={class:"field column is-4 mb-0"},we=Z((()=>y("label",null,[h("Start Time "),y("span",{style:{color:"red"}},"*")],-1))),xe={class:"control"},_e={class:"field column is-4 mb-0"},Se=Z((()=>y("label",null,[h("End Time "),y("span",{style:{color:"red"}},"*")],-1))),De={class:"control"},ke={class:"field column is-4 mb-0"},je=Z((()=>y("label",null,"Hourly Rate (£) ",-1))),Ce={class:"control"},ze={class:"field column is-4 mb-0"},Ie=Z((()=>y("label",null,"Overtime Rate (£)",-1))),Te={class:"control"},Ae={class:"field column is-4 mb-0",style:{display:"flex","align-items":"center","flex-direction":"row","margin-top":"1rem",gap:"1rem"}},Ee=Z((()=>y("label",{style:{"margin-bottom":"1rem"}},"Approval Required",-1))),Ne={class:"field column is-3 mt-3",style:{position:"relative","margin-left":"0.4rem",cursor:"pointer",display:"flex","align-items":"center","flex-direction":"row"}},Re=Z((()=>y("i",{style:{color:"var(--primary)","margin-left":"10px",size:"3rem"},class:"fas fa-paint-brush","aria-hidden":"true"},null,-1))),Ve={class:"column is-4 pb-4"},Oe={class:"colorContainer"},Je={class:"close-btn"},Ue=["onClick"],Me={key:0,class:"fas fa-check","aria-hidden":"true"},Pe={key:1,class:"field column is-6",style:{"margin-left":"0rem"}},Le=Z((()=>y("label",null,"Week Availability",-1))),He={class:"",style:{display:"flex","align-items":"center",gap:"2rem","margin-top":"0.5rem"}},$e=["value"],qe={class:"field column is-12 mb-0"},Fe=Z((()=>y("label",{style:{"margin-bottom":"0.5rem"}},"Description",-1))),Ke={class:"page-content-inner"},Be={class:"columns is-multiline"},Ye={class:"column is-12"},Ge={class:"columns"},We={class:"column is-12 content",style:{}},Ze=R(a({__name:"AddJobModal",props:{openSiteJobModel:{type:Boolean},id:{},siteID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,a=q(),E=$(),N=s(!1),R=F(),V=i();o();const O=s(!1),J=s("longTerm"),U=s([]),Y=s(!1),G=s({id:0,hexCode:""}),W=s({step:1,stepTitle:"Contact Info",data:{}}),Z=s({id:"",jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"",endTime:"",hourlyRate:0,overtimeRate:0,jobType:"",site:l.siteID,color:"#D875C7",workingDays:[],isApproval:!1}),Ze=async()=>{Z.value.isApproval=Y.value,Z.value.workingDays=JSON.stringify(U.value),Z.value.jobType=J.value;try{N.value=!0;const e=B(Z.value,["logo"]);if(e.append("arezCompany",R.loggedCompany.id),Z.value.id){await E.patch(`/v3/api/jobs/${Z.value.id}/`,e);a.success("Job edit succesfully."),Qe()}else{if(!Z.value.site)return a.error("Contract Site Id required!");await E.post("/v3/api/jobs/",e);Qe(),a.dismissAll(),a.success("New Job added")}t("update:OnSuccess",null)}catch(e){let t=e.response.data??{};Object.values(t).forEach((e=>{e.forEach((e=>{a.error(` ${e}, New Contract`)}))}))}finally{N.value=!1}},Qe=()=>{t("update:modalHandler",!1),console.log("modal closed"),Z.value={jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"",endTime:"",hourlyRate:0,overtimeRate:0,jobType:"",color:""}},Xe=()=>{O.value=!O.value};n((async()=>{l.id&&await(async()=>{const e=await E.get(`/v3/api/jobs/${l.id}/`);Z.value=e.data,console.log("Get Jobs:",e.data),J.value=e.data.jobType,U.value=e.data.workingDays,Y.value=e.data.isApproval})()}));const et=r((()=>c((()=>import("./ckeditor-3a4dd3ea.js").then((e=>e.c))),["assets/ckeditor-3a4dd3ea.js","assets/index-94fd63d9.js","assets/index-798f0d7e.css","assets/vue.runtime.esm-bundler-492622ed.js"]).then((e=>e.default.component)))),tt={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return n((async()=>{V.value=await c((()=>import("./ckeditor-fd920522.js").then((e=>e.c))),["assets/ckeditor-fd920522.js","assets/index-94fd63d9.js","assets/index-798f0d7e.css"]).then((e=>e.default))})),(e,t)=>{const a=H,s=L,i=P,o=T,n=A,r=M;return d(),m(r,{is:"form",open:l.openSiteJobModel,title:g(Z).id?"Edit Job Placement Details":"Job Placement Details",size:"xl",actions:"right",onSubmit:I(Ze,["prevent"]),onClose:Qe,noclose:""},{content:u((()=>[p(y("div",Q,[p(y("div",X,[y("div",ee,[y("div",te,[y("div",le,[y("div",ae,[se,y("div",ie,[y("label",oe,[p(y("input",{type:"radio",name:"jobname","onUpdate:modelValue":t[0]||(t[0]=e=>v(J)?J.value=e:null),value:"longTerm",style:{width:"fit-content"}},null,512),[[f,g(J)]]),h(" Long Term ")]),y("label",ne,[p(y("input",{type:"radio",name:"jobname","onUpdate:modelValue":t[1]||(t[1]=e=>v(J)?J.value=e:null),value:"contract",style:{width:"auto"}},null,512),[[f,g(J)]]),h(" Contract ")]),y("label",re,[p(y("input",{type:"radio",name:"jobname","onUpdate:modelValue":t[2]||(t[2]=e=>v(J)?J.value=e:null),value:"temporary",style:{width:"auto"}},null,512),[[f,g(J)]]),ce])])]),y("div",de,[me,y("div",ue,[p(y("input",{type:"text",name:"jobname","onUpdate:modelValue":t[3]||(t[3]=e=>g(Z).jobName=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Job Name",style:{width:"100%"}},null,512),[[b,g(Z).jobName]])])]),y("div",pe,[ye,y("div",ve,[p(y("input",{type:"date",name:"StartDate",required:"","onUpdate:modelValue":t[4]||(t[4]=e=>g(Z).startDate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Start Date",style:{width:"100%"}},null,512),[[b,g(Z).startDate]])])]),"longTerm"!=g(J)?(d(),w("div",fe,[ge,y("div",he,[p(y("input",{type:"date",name:"endDate",required:"","onUpdate:modelValue":t[5]||(t[5]=e=>g(Z).endDate=e),class:"input is-primary-focus is-primary-focus",placeholder:"End date"},null,512),[[b,g(Z).endDate]])])])):x("",!0),y("div",be,[we,y("div",xe,[p(y("input",{type:"time",name:"startTime",required:"","onUpdate:modelValue":t[6]||(t[6]=e=>g(Z).startTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"Start Time"},null,512),[[b,g(Z).startTime]])])]),y("div",_e,[Se,y("div",De,[p(y("input",{type:"time",name:"endTime",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>g(Z).endTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"End Time"},null,512),[[b,g(Z).endTime]])])]),y("div",ke,[je,y("div",Ce,[p(y("input",{type:"number",name:"changeRate","onUpdate:modelValue":t[8]||(t[8]=e=>g(Z).hourlyRate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Charge Rate (£)"},null,512),[[b,g(Z).hourlyRate]])])]),y("div",ze,[Ie,y("div",Te,[p(y("input",{type:"number",name:"overtime","onUpdate:modelValue":t[9]||(t[9]=e=>g(Z).overtimeRate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Overtime Rate (£)"},null,512),[[b,g(Z).overtimeRate]])])]),y("div",Ae,[Ee,_(i,null,{default:u((()=>[_(s,{subcontrol:"",class:"mr-2"},{default:u((()=>[_(a,{color:"primary",modelValue:g(Y),"onUpdate:modelValue":t[10]||(t[10]=e=>v(Y)?Y.value=e:null),label:"Yes",onClick:t[11]||(t[11]=()=>{Y.value=!g(Y)})},null,8,["modelValue"])])),_:1})])),_:1}),_(i,{id:"interests",class:"pb-4",label:""})]),y("div",Ne,[y("div",{class:"column is-4 pb-4 cus-input-label",style:{display:"flex","align-items":"center",gap:"0.5rem",color:"#bbb","font-weight":"500",width:"100%"},onClick:Xe},[h(" Color "),Re]),y("div",Ve,[y("div",null,[y("div",{onClick:Xe,class:"color-pellate"},[y("div",{class:"current-color-div",style:S({backgroundColor:g(Z).color})},null,4)])])]),g(O)?(d(),w("div",{key:0,style:S([{right:"contract"===g(J)||"temporary"===g(J)?"12rem":"-14rem"},{position:"absolute",top:"-19rem","background-color":"white",width:"350px","z-index":"999"}])},[y("div",Oe,[y("div",Je,[y("i",{onClick:t[12]||(t[12]=e=>O.value=!1),class:"lnir lnir-close","aria-hidden":"true"})]),(d(!0),w(D,null,k(g(K),((e,t)=>(d(),w("div",{key:e.id,onClick:t=>(e=>{G.value=e,O.value=!1,Z.value={...Z.value,color:e.hexCode}})(e),style:S({backgroundColor:e.hexCode}),class:"colorDiv"},[g(G)==e?(d(),w("i",Me)):x("",!0)],12,Ue)))),128))])],4)):x("",!0)]),"temporary"==g(J)?(d(),w("div",Pe,[Le,y("div",He,[(d(),w(D,null,k(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],((e,l)=>y("label",{key:l,style:{display:"flex","align-items":"center",gap:"0.2rem",color:"#888","font-size":"1.1rem"}},[p(y("input",{type:"checkbox",name:"availability",value:e,"onUpdate:modelValue":t[13]||(t[13]=e=>v(U)?U.value=e:null),style:{width:"auto","font-size":"1.1rem"}},null,8,$e),[[j,g(U)]]),h(" "+C(e.charAt(0).toUpperCase()+e.slice(1)),1)]))),64))])])):x("",!0),y("div",qe,[Fe,y("div",Ke,[y("div",Be,[y("div",Ye,[y("div",Ge,[y("div",We,[g(V)?(d(),m(g(et),{key:0,modelValue:g(Z).description,"onUpdate:modelValue":t[14]||(t[14]=e=>g(Z).description=e),editor:g(V),config:tt,style:{color:"#fff"}},null,8,["modelValue","editor"])):(d(),m(o,{key:1,height:"500px"}))])])])])])])])])])],512),[[z,1===g(W).step]])],512),[[z,1===g(W).step]])])),cancel:u((()=>[_(n,{loading:g(N),type:"button",color:"primary",light:"",style:{float:"right",border:"1xp solid #ccc",display:"none"}},{default:u((()=>[h("Previous")])),_:1},8,["loading"])])),action:u((()=>[_(n,{loading:g(N),type:"submit",color:"primary",raised:"",style:{float:"right"}},{default:u((()=>[h("Save & close")])),_:1},8,["loading"])])),_:1},8,["open","title","onSubmit"])}}}),[["__scopeId","data-v-93e789de"]]),Qe={style:{display:"flex","align-items":"start","justify-content":"space-between"}},Xe={class:"site-content",style:{display:"flex","flex-direction":"column",gap:"2rem"}},et=[y("i",{class:"iconify","data-icon":"feather:edit","aria-hidden":"true",style:{"font-size":"1.4rem","margin-left":"2rem",color:"#23ad8d",cursor:"pointer",position:"absolute",right:"50%"}},null,-1)],tt={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},lt=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Site Name:",-1),at={style:{"font-weight":"400","font-size":"1.1rem"}},st={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},it=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Site Address:",-1),ot={style:{"font-weight":"400","font-size":"1.1rem"}},nt={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},rt=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Post Code:",-1),ct={style:{"font-weight":"400","font-size":"1.1rem"}},dt={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},mt=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Site Incharge:",-1),ut={style:{"font-weight":"400","font-size":"1.1rem"}},pt={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},yt=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Contact Person:",-1),vt={style:{"font-weight":"400","font-size":"1.1rem"}},ft={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},gt=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Contact Phone:",-1),ht={style:{"font-weight":"400","font-size":"1.1rem"}},bt={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},wt=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"City:",-1),xt={style:{"font-weight":"400","font-size":"1.1rem"}},_t={class:"",style:{display:"flex","align-items":"center",gap:"0.3rem"}},St=y("label",{style:{"font-size":"1.2rem","font-weight":"500"}},"Email:",-1),Dt={style:{"font-weight":"400","font-size":"1.1rem"}},kt={class:"",style:{display:"flex","flex-direction":"column",gap:"0.4rem"}},jt=y("label",{style:{"font-size":"1.2rem","font-weight":"500",width:"9rem"},class:"ckeditor"},"Comments:",-1),Ct=["innerHTML"],zt={key:0,style:{border:"1px solid #ccc","border-radius":"1rem","box-shadow":"0.2rem 0.2rem 0.2rem rgba(0, 0, 0, 0.2)"}},It=a({__name:"SiteDetails",props:{EditSiteID:{type:String}},setup(e){const a=e,i=$();o(),q();const r=s(!1),c=s({id:null,name:"",address:"",postcode:"",latitude:null,longitude:null,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{},created_at:"2024-05-07T12:17:14.267313Z",updated_at:"2024-05-09T11:17:59.556648Z",color:"#D875C7",regionFormat:"Large North",areaManager:"",managingDirector:"Jonathan Taylor",contract:0,jobs:[],contractInfo:{id:0,name:" ",company:0,customer_company:0,incharge_name:"",color:"",charge_rate:0,cuCompanyInfo:{id:0,name:"",email:"",logo:"",phone_number:""}}}),u=async()=>{const e=await i.get(`/v3/api/site/${a.EditSiteID}/`);c.value=e.data},p=()=>{r.value=!0};return n((()=>{a.EditSiteID&&u()})),(a,s)=>{const i=t,o=l;return d(),w(D,null,[y("div",Qe,[y("div",Xe,[y("span",{style:{"font-size":"1.4rem","margin-left":"2rem",color:"#23ad8d",cursor:"pointer",position:"absolute",right:"50%"},onClick:p},et),y("div",tt,[lt,y("span",at,C(c.value?.name),1)]),y("div",st,[it,y("span",ot,C(c.value?.address),1)]),y("div",nt,[rt,y("span",ct,C(c.value?.postcode),1)]),y("div",dt,[mt,y("span",ut,C(c.value.contractInfo?.incharge_name?c.value.contractInfo?.incharge_name:"Not mentioned"),1)]),y("div",pt,[yt,y("span",vt,C(c.value?.inchargeName?c.value?.inchargeName:"Not Mentioned"),1)]),y("div",ft,[gt,y("span",ht,C(c.value?.inchargePhoneNo),1)]),y("div",bt,[wt,y("span",xt,C(c.value?.city),1)]),y("div",_t,[St,y("span",Dt,C(c.value?.inchargeEmail?c.value?.inchargeEmail:" N/A"),1)]),y("div",kt,[jt,y("div",{innerHTML:c.value?.comments?c.value?.comments:"N/A",class:"ckeditor",style:{"font-weight":"500","margin-left":"0.5rem",color:"#111"}},null,8,Ct)])]),c.value.latitude?(d(),w("div",zt,[_(i,{style:{width:"600px",height:"350px"},siteData:c.value},null,8,["siteData"])])):x("",!0)]),r.value?(d(),m(o,{key:0,EditSiteID:e.EditSiteID,"onUpdate:modalHandler":s[0]||(s[0]=()=>{r.value=!1}),AddSiteModalOpen:r.value,"onUpdate:OnSuccess":u},null,8,["EditSiteID","AddSiteModalOpen"])):x("",!0)],64)}}}),Tt=e=>(E("data-v-2939f37b"),e=e(),N(),e),At={class:"contract-wrapper"},Et={class:"contract-header",style:{position:"relative"}},Nt={class:"header-left",style:{display:"flex","flex-direction":"column",position:"relative"}},Rt={class:"is-flex"},Vt={style:{"font-size":"1.1rem","font-weight":"500",color:"#111",display:"flex","align-items":"center"}},Ot=Tt((()=>y("i",{class:"iconify","data-icon":"feather:arrow-left","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1))),Jt={style:{"font-size":"1.7rem","font-weight":"500",color:"#111"}},Ut={class:"",style:{display:"flex","align-items":"center",gap:"0.6rem"}},Mt={style:{"font-size":"1.1rem","font-weight":"500",color:"#333"}},Pt={style:{"font-size":"1rem","font-weight":"400",color:"#333"}},Lt=U('<span class="" style="width:2px;height:1rem;background:#ccc;" data-v-2939f37b></span><span style="font-size:1.1rem;font-weight:500;color:#333;" data-v-2939f37b>Assigned Jobs: <span style="font-size:1rem;font-weight:400;color:#333;" data-v-2939f37b>00</span></span><span class="" style="width:2px;height:1rem;background:#ccc;" data-v-2939f37b></span><span style="font-size:1.1rem;font-weight:500;color:#333;" data-v-2939f37b>Unassigned Jobs: <span style="font-size:1rem;font-weight:400;color:#333;" data-v-2939f37b>00</span></span>',4),Ht=Tt((()=>y("div",{class:"",style:{position:"absolute",bottom:"3rem",left:"31rem"}},null,-1))),$t={class:"",style:{"margin-top":"2.2rem",display:"flex","flex-direction":"column",gap:"1rem","padding-left":"2.5rem",position:"relative"}},qt={style:{"font-size":"1.2rem","font-weight":"500","margin-bottom":"0.5rem",color:"#333"}},Ft={class:"",style:{color:"#333"}},Kt={class:"",style:{"font-size":"1.5rem","font-weight":"500",color:"#333"}},Bt={class:"tabs-wrapper rounded",type:"rounded",style:{"padding-left":"2.5rem"}},Yt={class:"contract-header",style:{"margin-top":"2rem"}},Gt={class:"header-left"},Wt={class:"tabs-inner"},Zt={class:"tabs is-toggle"},Qt=[Tt((()=>y("span",{style:{}},"Site Details",-1)))],Xt=[Tt((()=>y("span",null,"Placements",-1)))],el=[Tt((()=>y("span",null,"Site Rota",-1)))],tl=[Tt((()=>y("span",null,"Time Sheet",-1)))],ll={class:"",style:{"margin-top":"1.5rem"}},al={class:"contracts-section1"},sl={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column","grid-area":"0.5rem"}},il=Tt((()=>y("i",{class:"iconify","data-icon":"feather:plus","aria-hidden":"true",style:{"font-size":"2.5rem",color:"#179e9b"}},null,-1))),ol=Tt((()=>y("span",{style:{"font-size":"1.4rem","font-weight":"500",display:"flex","align-items":"center",gap:"0.5rem",color:"#179e9b"}}," Create New Placements at ",-1))),nl={style:{"font-size":"1.1rem","font-weight":"400",display:"flex","text-align":"center","align-items":"center",gap:"0.5rem",color:"#179e9b","max-width":"90%"}},rl={class:"",style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},cl={style:{"font-size":"1rem","font-weight":"400",display:"flex","align-items":"center","text-transform":"capitalize",gap:"0.5rem",color:"#333"}},dl=Tt((()=>y("i",{class:"iconify","data-icon":"feather:clock","aria-hidden":"true",style:{color:"#179e9b"}},null,-1))),ml=["onClick"],ul=[Tt((()=>y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Tt((()=>y("div",{class:"meta"},[y("span",null,"Edit"),y("span",null,"Edit site details")],-1)))],pl=Tt((()=>y("hr",{class:"dropdown-divider"},null,-1))),yl=["onClick"],vl=[Tt((()=>y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),Tt((()=>y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete from list")],-1)))],fl={class:"",style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},gl={class:"Genevieve-Hodges-Copy",style:{"font-size":"1.4rem","margin-top":"0.5rem","font-weight":"500",color:"#333"}},hl={class:"",style:{display:"flex","align-items":"center","justify-content":"space-between",color:"#333"}},bl={class:"-Euston-Road-Lond",style:{"font-size":"13px","font-weight":"400",color:"#666"}},wl={class:"",style:{display:"flex","align-items":"center",gap:"0.6rem","margin-top":"1rem",color:"#333"}},xl=Tt((()=>y("span",{style:{"font-size":"1.1rem","font-weight":"400"}},"4 Assigned ",-1))),_l=Tt((()=>y("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),Sl={style:{"font-size":"1.1rem","font-weight":"400","text-transform":"capitalize",color:"#333"}},Dl=Tt((()=>y("span",{class:"",style:{width:"2px",height:"1rem",background:"#ccc"}},null,-1))),kl={style:{"font-size":"1.1rem","font-weight":"400",color:"#333"}},jl={key:0,class:"",style:{"margin-top":"3.5rem"}},Cl={class:"",style:{display:"flex","flex-direction":"column",gap:"2.5rem"}},zl={class:"",style:{display:"flex","align-items":"center",gap:"4rem"}},Il={class:"",style:{"margin-top":"0.5rem"}},Tl=[Tt((()=>y("div",{class:"",style:{display:"flex","flex-direction":"column",gap:"2.5rem"}},[y("h1",null,"Time Sheet")],-1)))],Al={class:"",style:{"margin-top":"1.5rem"}},El=R(a({__name:"SiteJobs",props:{siteID:{type:String},getSites:Function,editSiteModal:Function,isShow:Number,siteLength:Number},setup(t){const a=t,i=$(),o=q(),r=s("");s("");const c=s(0),v=s(!1),f=s(!1),g=s(""),b=s(!1),j=s("siteDetails");s({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});const T=s({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),E=s({id:"",jobsCount:0,name:"",inchargeName:"",color:"",postcode:"",contractInfo:{},jobs:[]});s({id:null,name:"",address:"",postcode:"",latitude:null,longitude:null,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{}});const N=async()=>{f.value=!0,console.log(a.siteID);const e=await i.get(`/v3/api/jobs/site/${a.siteID}/`);E.value=e.data,console.log("Job Data:",e.data),f.value=!1},R=async()=>{try{f.value=!0,T.value.isSweetAlertOpen=!1;await i.delete(`/v3/api/jobs/${c.value}/`);N(),o.dismissAll(),o.success("Job Delete"),f.value=!1}catch(e){console.error("ok",e),f.value=!1}};n((()=>{N()}));return V((()=>{N()})),(s,i)=>{const o=A,n=W,V=G,U=Y,M=It,P=Ze,L=l,H=e;return d(),w("div",At,[y("div",Et,[y("div",Nt,[y("div",Rt,[y("div",{class:"",style:S([{padding:"1rem 1rem","border-radius":"1rem","margin-top":"1rem",border:"1px solid #eee"},{backgroundImage:`linear-gradient(-175deg, white 65%, ${E.value?.contractInfo?.color}30)`}])},[y("span",Vt,[1!==t.isShow?(d(),m(o,{key:0,color:"primary",outlined:"",class:"mr-1",onClick:a.getSites,style:{width:"3rem","border-radius":"12px",padding:"2px 4px"}},{default:u((()=>[Ot])),_:1},8,["onClick"])):x("",!0),h(" Contract_00"+C(E.value.contractInfo.id),1)]),y("h1",Jt,C(E.value?.contractInfo?.name),1),y("div",Ut,[y("span",Mt,[h("Total Sites: "),y("span",Pt,C(a?.siteLength<10&&a.siteLength>0?"0"+a.siteLength:a.siteLength),1)]),Lt])],4),Ht,y("div",$t,[y("div",{class:"",style:S([{display:"flex","flex-direction":"column",gap:"0rem",padding:"1rem","border-radius":"0.8rem","min-width":"19rem","max-width":"27rem",border:"1px solid #eee"},{backgroundImage:`linear-gradient(to bottom left, white 75%, ${E.value?.color}50)`}])},[y("label",qt,"Site_00"+C(E.value?.id),1),y("span",Ft," Site: "+C(E.value?.postcode),1),y("span",Kt,C(E.value?.name),1)],4)])])])]),y("div",Bt,[y("div",Yt,[y("div",Gt,[y("div",Wt,[y("div",Zt,[y("ul",null,[y("li",{class:O(["siteDetails"===j.value?"is-active":"not-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:i[0]||(i[0]=J(I((e=>j.value="siteDetails"),["prevent"]),["space"])),onClick:i[1]||(i[1]=e=>j.value="siteDetails")},Qt,32)],2),y("li",{class:O(["jobs"===j.value?"is-active":"not-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:i[2]||(i[2]=J(I((e=>j.value="jobs"),["prevent"]),["space"])),onClick:i[3]||(i[3]=e=>j.value="jobs")},Xt,32)],2),y("li",{class:O(["siteRota"===j.value?"is-active":"not-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:i[4]||(i[4]=J(I((e=>j.value="siteRota"),["prevent"]),["space"])),onClick:i[5]||(i[5]=e=>j.value="siteRota")},el,32)],2),y("li",{class:O(["timeSheet"===j.value?"is-active":"not-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:i[6]||(i[6]=J(I((e=>j.value="timeSheet"),["prevent"]),["space"])),onClick:i[7]||(i[7]=e=>j.value="timeSheet")},tl,32)],2)])])])])]),p(y("div",ll,[y("div",al,[y("div",{class:"contracts-list",style:{background:"#e3f3f3",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column","grid-area":"0.5rem",height:"13.5rem"},onClick:i[8]||(i[8]=()=>{r.value="",v.value=!v.value})},[y("div",sl,[il,ol,y("span",nl,C(E.value?.site?.address),1)])]),f.value?(d(),m(n,{key:0})):x("",!0),(d(!0),w(D,null,k(E.value.jobs,((e,t)=>(d(),w("div",{class:"contracts-section",key:e.id,style:{"margin-top":"0rem"}},[y("div",{class:"contracts-list",style:S({backgroundImage:`linear-gradient(-175deg, white 40%, ${e?.color}45)`})},[y("div",rl,[y("span",cl,[dl,h(" "+C(e?.jobType),1)]),_(V,{style:{position:"relative"},class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:u((()=>[y("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>((e=0)=>{r.value=e,v.value=!0})(e.id)},ul,8,ml),pl,y("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return l=e.id,c.value=l,void(T.value={title:"Are you sure?",subtitle:"You will not be able to recover this job!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l}},vl,8,yl)])),_:2},1024)]),y("div",fl,[y("span",gl,C(e?.jobName),1),y("div",hl,[y("span",bl,"From: "+C(e?.startDate)+" "+C(e?.endDate?"- To:":"")+" "+C(e?.endDate),1)]),y("div",wl,[xl,_l,y("span",Sl,C(e?.shift)+" Shift ",1),Dl,y("span",kl,"Rate: £"+C(e?.hourlyRate)+" per hour ",1)])])],4)])))),128))])],512),[[z,"jobs"==j.value]]),"siteRota"==j.value?(d(),w("div",jl,[y("div",Cl,[y("div",zl,[_(U,{siteID:a.siteID},null,8,["siteID"])])])])):x("",!0),p(y("div",Il,Tl,512),[[z,"timeSheet"==j.value]]),p(y("div",Al,[_(M,{EditSiteID:a.siteID},null,8,["EditSiteID"])],512),[[z,"siteDetails"==j.value]])]),v.value?(d(),m(P,{key:0,id:r.value,siteID:a.siteID,openSiteJobModel:v.value,"onUpdate:modalHandler":i[9]||(i[9]=e=>(v.value=e,N()))},null,8,["id","siteID","openSiteJobModel"])):x("",!0),b.value?(d(),m(L,{key:1,contractId:E.value.contract.id,EditSiteID:g.value,"onUpdate:modalHandler":i[10]||(i[10]=()=>{b.value=!b.value}),AddSiteModalOpen:b.value,"onUpdate:OnSuccess":N},null,8,["contractId","EditSiteID","AddSiteModalOpen"])):x("",!0),T.value.isSweetAlertOpen?(d(),m(H,{key:2,isSweetAlertOpen:T.value.isSweetAlertOpen,title:T.value.title,subtitle:T.value.subtitle,btntext:T.value.btntext,onConfirm:R,onCancel:()=>T.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):x("",!0)])}}}),[["__scopeId","data-v-2939f37b"]]);export{El as _};
