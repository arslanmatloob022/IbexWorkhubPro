import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-4e1acbcc.js";import{f as a,r as l,b as t,o,B as s,C as i,O as n,G as d,E as c,F as r,L as u,m as p,X as m,U as f,K as _,D as v,J as g,N as y,a5 as b,P as h,$ as T,I as k,H as w,V as j,W as V}from"./index-99e15d25.js";import{_ as C}from"./VTextarea.vue_vue_type_script_setup_true_lang-646ee24f.js";import{_ as x}from"./VField.vue_vue_type_script_setup_true_lang-0a6f32d2.js";import{_ as I}from"./VControl-d58d6ce6.js";import{_ as U}from"./VInput.vue_vue_type_script_setup_true_lang-1069e5b5.js";import{u as M}from"./useAPI-c55c1b44.js";import{u as D}from"./useNotyf-b5c4c6a6.js";import{a as $}from"./useSupportElement-dd6ff5a3.js";import{_ as P}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-566a44c3.js";import{_ as S}from"./VBlock.vue_vue_type_style_index_0_lang-8b260d30.js";import{_ as A}from"./VTag.vue_vue_type_style_index_0_lang-e95af7d6.js";import{_ as N}from"./VIconButton-11100a3f.js";import{_ as z,a as B}from"./having-coffee-dark-69a7d2f6.js";import{h as H}from"./moment-bad41465.js";const O={class:"modal-form columns is-multiline"},K={class:"column is-12"},Y={class:"field column is-12 mb-0"},q=c("label",null,"Title *",-1),E={class:"control"},F={class:"field column is-6 mb-0"},J=c("label",null,"Completion Date ",-1),L={class:"field column is-6 mb-0"},G=c("label",null,"Time ",-1),R={class:"field column is-6 mb-0"},W=c("label",null,"Color ",-1),X=c("datalist",{id:"colors-list"},[c("option",{value:"#84cc16"}),c("option",{value:"#22c55e"}),c("option",{value:"#0ea5e9"}),c("option",{value:"#6366f1"}),c("option",{value:"#8b5cf6"}),c("option",{value:"#d946ef"}),c("option",{value:"#f43f5e"}),c("option",{value:"#facc15"}),c("option",{value:"#fb923c"}),c("option",{value:"#9ca3af"})],-1),Z={class:"field column is-6 mb-0"},Q=c("label",null,"Attachment ",-1),ee={class:"file"},ae={class:"file-label"},le={class:"file-cta"},te=c("span",{class:"file-icon"},[c("i",{class:"fas fa-cloud-upload-alt"})],-1),oe={class:"file-label"},se={class:"field column is-12 mb-0"},ie=c("label",null,"Assignees * ",-1),ne={class:"multiselect-tag is-user"},de=["src"],ce=["onMousedown"],re={class:"field column is-12 mb-0"},ue=c("label",null,"Description ",-1),pe=a({__name:"AddUpdateTodoModal",props:{openTodoModal:{type:Boolean},todoId:{},project:{},task:{},assigned_to:{}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:T}){const k=a;l(null);const w=t(),j=D(),V=M(),P=l(!1),S=()=>{T("update:modalHandler",!1)},A=l([{value:"",name:"",image:""}]),N=l({assigned_to:[],project:k.project?k.project:"",task:k.task?k.task:"",title:"",description:"",color:"",file:"",date:"",time:"",is_completed:!1,time_to_complete:"",created_by:w.user.id}),z=async()=>{try{P.value=!0;const e=$(N.value,["file"]);if(k.todoId){await V.patch(`/api/todo/${k.todoId}/`,e);j.success("Todo updated successfully")}else{await V.post("/api/todo/",e);j.success("Todo added successfully")}T("update:OnSuccess",null),S()}catch(e){j.error(` ${e}, Todo`)}finally{P.value=!1}},B=l(""),H=l(0),pe=e=>{const a=e.target,l=a.files?.[0];a.value="",l&&(N.value.file=l,B.value=l.name,H.value=l.size)};return o((()=>{(async()=>{try{P.value=!0;const e=await V.get("/api/users/");A.value=e.data.map((e=>({value:e.id,name:`${e.username??"N/A"} ${e.last_name??""}`,icon:e.avatar})))}catch(e){j.error("something get wrong")}finally{P.value=!1}})(),k.todoId&&(async()=>{try{P.value=!0;const e=await V.get(`/api/activity/${k.todoId}/`);N.value=e.data}catch(e){j.error(` ${e}, Get Todo`)}finally{P.value=!1}})()})),(a,l)=>{const t=U,o=I,T=x,w=s("Multiselect"),j=b,V=C,M=h,D=e;return i(),n(D,{is:"form",open:k.openTodoModal,title:"Todo",size:"large",actions:"right",onSubmit:g(z,["prevent"]),onClose:S},{content:d((()=>[c("div",O,[c("div",K,[r(j,{class:"columns is-multiline"},{default:d((()=>[c("div",Y,[q,c("div",E,[u(c("input",{type:"text",name:"title","onUpdate:modelValue":l[0]||(l[0]=e=>p(N).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Todo Title"},null,512),[[m,p(N).title]])])]),c("div",F,[J,u(c("input",{type:"date",name:"date","onUpdate:modelValue":l[1]||(l[1]=e=>p(N).date=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Completion Date"},null,512),[[m,p(N).date]])]),c("div",L,[G,u(c("input",{type:"time",name:"date","onUpdate:modelValue":l[2]||(l[2]=e=>p(N).time=e),class:"input is-primary-focus is-primary-focus",placeholder:"Todo Time"},null,512),[[m,p(N).time]])]),c("div",R,[W,r(T,null,{default:d((()=>[r(o,null,{default:d((()=>[r(t,{modelValue:p(N).color,"onUpdate:modelValue":l[3]||(l[3]=e=>p(N).color=e),list:"colors-list",type:"color",placeholder:"Pick a color"},null,8,["modelValue"]),X])),_:1})])),_:1})]),c("div",Z,[Q,r(T,{grouped:""},{default:d((()=>[r(o,null,{default:d((()=>[c("div",ee,[c("label",ae,[c("input",{onChange:pe,class:"file-input",type:"file",name:"resume"},null,32),c("span",le,[te,c("span",oe,f(p(B)?p(B):"Choose a fileâ€¦"),1)])])])])),_:1})])),_:1})]),c("div",se,[ie,r(T,null,{default:d((({id:e})=>[r(o,null,{default:d((()=>[r(w,{required:"",modelValue:p(N).assigned_to,"onUpdate:modelValue":l[5]||(l[5]=e=>p(N).assigned_to=e),attrs:{id:e},mode:"tags",placeholder:"Select a user","track-by":"name",label:"name",search:!0,searchable:!0,options:p(A),"max-height":145},{tag:d((({option:e,remove:a,disabled:t})=>[c("div",ne,[c("img",{src:e.image,alt:""},null,8,de),_(" "+f(e.name)+" ",1),t?y("",!0):(i(),v("i",{key:0,role:"button",tabindex:"0",onClick:l[4]||(l[4]=g((()=>{}),["prevent"])),onMousedown:g((l=>a(e)),["prevent","stop"])},null,40,ce))])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})])])),_:1}),r(j,{class:"columns is-multiline mt-3"},{default:d((()=>[c("div",re,[ue,r(T,null,{default:d((()=>[r(o,null,{default:d((()=>[r(V,{modelValue:p(N).description,"onUpdate:modelValue":l[6]||(l[6]=e=>p(N).description=e),rows:"3",placeholder:"Enter description..."},null,8,["modelValue"])])),_:1})])),_:1})])])),_:1})])])])),action:d((()=>[r(M,{loading:p(P),type:"submit",color:"primary",raised:""},{default:d((()=>[_(f(k.todoId?"Update":"Create"),1)])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),me={class:"list-widget tabbed-widget is-straight"},fe={class:"widget-head"},_e={class:"tabbed-controls"},ve=[c("span",null,"Today",-1)],ge=[c("span",null,"All",-1)],ye=c("div",{class:"tabbed-naver"},null,-1),be={key:0,class:"inner-list-wrapper is-active"},he={class:"inner-list"},Te={href:""},ke=c("img",{class:"light-image",src:z,alt:""},null,-1),we=c("img",{class:"dark-image",src:B,alt:""},null,-1),je={key:1,class:"inner-list-wrapper is-active"},Ve={class:"inner-list"},Ce={href:""},xe=c("img",{class:"light-image",src:z,alt:""},null,-1),Ie=c("img",{class:"dark-image",src:B,alt:""},null,-1),Ue=a({__name:"JobTodos",props:{title:{default:"Todo"},project:{default:""},task:{default:""},todoId:{default:""},user:{default:""},getUserTodo:{type:Boolean,default:!1},labels:{type:Function,default:()=>["Today","All"]}},setup(e){const a=e,s=l("today"),u=l(!1);l("Today");const m=M(),b=D(),C=t(),x=l(!1),I=l("");l(!1);const U=l([{id:"6db1b605-38b6-4917-8722-5edc50a4e0ad",created_by_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},assigned_to_info:[{id:"085f43b6-e869-495e-a712-781324ecc497",username:"arslan",last_name:null,email:"arslan@ibex.com",role:"admin",avatar:null},{id:"fd0a4649-984a-4bcc-98c0-9b766c141fbe",username:"Test Sub con",last_name:null,email:"raoarslan263@gmail.com",role:"worker",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/not-available.png"}],project_info:{id:"751b95b2-9961-45a0-948c-96f85cea6a52",title:"Test Lead",startDate:"2025-02-14",endDate:"2025-02-07",status:"pending",address:"Lahore, Punjab 54000, Pakistan",wifiAvaliabe:!1,parkingAvaliable:!1,description:""},task_info:null,title:"Test Todo On Job",description:"ons and they are widely used accross a large variety of websites. Please refer to the code example for more details about usage.",color:"#fb923c",file:null,is_completed:!1,created_at:"2025-03-09T12:56:30.661475Z",date:"2025-02-28",time:"19:56:00",time_to_complete:null,cerated_by:"0feda007-d8a0-4b96-acb7-d7763614854e",project:"751b95b2-9961-45a0-948c-96f85cea6a52",task:null,assigned_to:["085f43b6-e869-495e-a712-781324ecc497","fd0a4649-984a-4bcc-98c0-9b766c141fbe"]}]),$=async e=>{try{u.value=!0;const a=await m.get(`/api/todo/?assigned_to=${e}`);U.value=a.data}catch(a){console.log("getting todos",a)}finally{u.value=!1}},z=l(!1),B=async e=>{try{z.value=!0,I.value=e.id;await m.patch(`/api/todo/${e.id}/`,{is_completed:!e.is_completed});K(),b.success("Todo Updated")}catch(a){console.log("getting todos",a)}finally{z.value=!1,I.value=""}},O=T((()=>{const e=H().format("YYYY-MM-DD");return U.value.filter((a=>a.date===e))})),K=()=>{1==a.getUserTodo?$(C.user.id):a.project?(async()=>{try{u.value=!0;const e=await m.get(`/api/todo/?project=${a.project}`);U.value=e.data}catch(e){console.log("getting todos",e)}finally{u.value=!1}})():a.task?(async()=>{try{u.value=!0;const e=await m.get(`/api/todo/?task=${a.task}`);U.value=e.data}catch(e){console.log("getting todos",e)}finally{u.value=!1}})():a.user?$(a.user):(async()=>{try{u.value=!0;const e=await m.get("/api/todo/");U.value=e.data}catch(e){console.log("getting todos",e)}finally{u.value=!1}})()};return o((()=>{K()})),(e,l)=>{const t=h,o=N,u=A,m=S,b=P,T=pe;return i(),v("div",me,[c("div",fe,[c("div",_e,[c("a",{class:k(["tabbed-control",["today"==p(s)&&"is-active"]]),role:"button",tabindex:"0",onKeydown:l[0]||(l[0]=w(g((e=>s.value="today"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>s.value="today")},ve,34),c("a",{class:k(["tabbed-control",["all"==p(s)&&"is-active"]]),role:"button",tabindex:"0",onKeydown:l[2]||(l[2]=w(g((e=>s.value="all"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>s.value="all")},ge,34),ye]),r(t,{size:"small",onClick:l[4]||(l[4]=e=>x.value=!p(x)),icon:"fas fa-plus",light:"",outlined:"",color:"warning"},{default:d((()=>[_(" Todo")])),_:1})]),"today"==p(s)?(i(),v("div",be,[c("div",he,[c("div",null,[(i(!0),v(j,null,V(p(O),(e=>(i(),n(m,{center:"",lighter:"",class:"inner-list-item"},{icon:d((()=>[r(o,{color:e.is_completed?"primary":"warning",outlined:"",loading:p(I)==e.id&&p(z),onClick:()=>{B(e)},circle:"",icon:(e.is_completed,"lnir lnir-checkmark")},null,8,["color","loading","onClick","icon"])])),action:d((()=>[r(u,{color:e.is_completed?"primary":"warning",rounded:""},{default:d((()=>[_(f(e.is_completed?"Done":"Pending"),1)])),_:2},1032,["color"])])),default:d((()=>[c("a",Te,f(e.title?e.title:"No Title"),1),c("span",null,f(e.time?e.time:"No Time"),1)])),_:2},1024)))),256)),r(b,{class:k([0!==p(O).length&&"is-hidden"]),title:"There is nothing to do in your list.",subtitle:"There is not a single to-do for you. It's good if you have done with your list, have a cup of tea!",small:""},{image:d((()=>[ke,we])),_:1},8,["class"])])])])):y("",!0),"all"==p(s)?(i(),v("div",je,[c("div",Ve,[c("div",null,[(i(!0),v(j,null,V(p(U),(e=>(i(),n(m,{center:"",lighter:"",class:"inner-list-item"},{icon:d((()=>[r(o,{color:e.is_completed?"primary":"warning",outlined:"",loading:p(I)==e.id&&p(z),onClick:()=>{B(e)},circle:"",icon:(e.is_completed,"lnir lnir-checkmark")},null,8,["color","loading","onClick","icon"])])),action:d((()=>[r(u,{color:e.is_completed?"primary":"warning",rounded:""},{default:d((()=>[_(f(e.is_completed?"Done":"Pending"),1)])),_:2},1032,["color"])])),default:d((()=>[c("a",Ce,f(e.title?e.title:"No Title"),1),c("span",null,f(e.time?e.time:"No Time"),1)])),_:2},1024)))),256)),r(b,{class:k([0!==p(U).length&&"is-hidden"]),title:"There is nothing to do in your list.",subtitle:"There is not a single to-do for you. It's good if you have done with your list, have a cup of tea!",small:""},{image:d((()=>[xe,Ie])),_:1},8,["class"])])])])):y("",!0),p(x)?(i(),n(T,{key:2,openTodoModal:p(x),project:a.project?a.project:"",task:a.task?a.task:"",todoId:p(I),user:a.user,"onUpdate:modalHandler":l[5]||(l[5]=e=>x.value=!1),"onUpdate:OnSuccess":K},null,8,["openTodoModal","project","task","todoId","user"])):y("",!0)])}}});export{Ue as _};
