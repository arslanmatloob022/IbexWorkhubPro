import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-00495e89.js";import{_ as t,c as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-634ff40f.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-854a1db4.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-637e26eb.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-2f28a70b.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-10c9f12c.js";import{_ as r}from"./VControl-df89bb0e.js";import{_ as o}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-77134b85.js";import{e as u,r as c,v as d,Z as p,o as _,l as m,B as v,N as y,C as f,D as g,E as b,F as h,K as x,W as k,j as w,M as j,U as A,V as C,aR as P,T as S,H as V,J as T,P as O,Q as L,R as z,S as F,z as I}from"./index-24a82500.js";import{_ as W,a as q}from"./search-4-dark-2b5b440c.js";import{u as E}from"./useAPI-d754da12.js";import{f as N}from"./useSupportElement-85361989.js";import{u as $}from"./useNotyf-3807a33b.js";import{u as D}from"./viewWrapper-668ed74c.js";import"./via-placeholder-24645670.js";import"./VLabel.vue_vue_type_script_setup_true_lang-fd34d399.js";import"./useVFieldContext-c9269925.js";import"./VPlaceloadWrap-ab092a13.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-20f1a921.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-470130fc.js";import"./VField.vue_vue_type_script_setup_true_lang-e74b09fa.js";import"./userSession-8e07e47b.js";import"./notyf-4dec6d07.js";import"./useThemeColors-91bbdb84.js";const M=e=>(O("data-v-54214eba"),e=e(),L(),e),R={key:1,class:"is-relative tabs-wrapper is-slider is-squared"},U={class:"page-content-inner"},B={class:"list-flex-toolbar is-reversed"},H={class:"flex-list-v2"},K=M((()=>g("img",{class:"light-image",src:W,alt:""},null,-1))),Y=M((()=>g("img",{class:"dark-image",src:q,alt:""},null,-1))),Z={key:1,class:"tab-content is-active"},J={class:"light-text text-overflow"},Q=["onClick"],G=["onClick"],X=M((()=>g("i",{style:{color:"var(--info)"},class:"fas fa-copy cu-pointer","aria-hidden":"true"},null,-1))),ee={class:"item-name dark-inverted"},te={class:"item-meta"},ae={class:"light-text mt-2"},se={class:"",style:{"font-size":"18px"}},le={class:"item-name dark-inverted"},ie={class:"item-meta"},ne=z(u({__name:"IbexPaymentsList",setup(u){const O=c(""),L=c(!1),z=$(),F=E();d();const I=c(!1),W=c([{id:"",client_info:{id:"",username:"",email:"",role:"",avatar:""},description:"",checkoutLink:"",type:"",created_by_info:{id:"",username:"",email:"",role:"",avatar:""},amount:0,status:"",created_at:"",created_by:"",client:null}]),q=c(""),D=c("paid"),M={description:{label:"Description",grow:!0,media:!0},picture:{label:"Created by",grow:!0,media:!0},amount:{label:"Amount",align:"center"},client:{label:"Client",align:"center",grow:!0},status:"Status",team:{label:"Method"},actions:{label:"Actions",align:"end"}},ne=p((()=>{if(q.value){const e=new RegExp(q.value,"i");return W.value.filter((t=>t.id.match(e)||t.created_by_info.username.match(e)||t.type.match(e)||t.description.match(e)))}return W.value})),re=async()=>{try{I.value=!0;const e=await F.get("/api/paypal/");W.value=e.data}catch(e){console.log(e)}finally{I.value=!1}},oe=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ue=async()=>{try{L.value=!0;await F.delete(`/api/paypal/${O.value}/`);oe.value.isSweetAlertOpen=!1,z.success("Payment deleted successfully"),re()}catch(e){console.log(e)}finally{L.value=!1}};return _((()=>{re()})),(u,c)=>{const d=o,p=r,_=n,L=a,F=i,W=l,E=s,$=t,re=e;return m(I)?(v(),y(d,{key:0})):(v(),f("div",R,[g("div",U,[g("div",B,[b(p,{icon:"feather:search"},{default:h((()=>[x(g("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>w(q)?q.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,m(q)]])])),_:1})]),g("div",H,[0===m(ne).length?(v(),y(_,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[K,Y])),_:1})):j("",!0),"paid"===m(D)?(v(),f("div",Z,[m(ne).length?(v(),y($,{key:0,data:m(ne),columns:M,rounded:""},{body:h((()=>[b(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),f(A,null,C(m(ne),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[b(L,null,{default:h((()=>[g("div",null,[g("p",J,S(e.description?e.description:"not added"),1),g("p",{class:V(["light-text text-overflow","succeeded"===e.status?"is-link":""]),onClick:t=>(e=>{if("succeeded"===e.status){const t=`https://dashboard.stripe.com/payments/${e.response?.id}`;window.open(t,"_blank")}})(e)}," Payment link ",10,Q),"succeeded"!==e.status?(v(),f("p",{key:0,class:"mt-2",onClick:t=>{var a;(a=e.checkoutLink)?navigator.clipboard.writeText(a).then((()=>{z.success("Link copied to clipboard!")})).catch((e=>{z.error("Failed to copy the link: ",e)})):z.error("No link to copy!")}},[T(" Checkout link "),X],8,G)):j("",!0)])])),_:2},1024),b(L,{column:{media:!0,grow:!0}},{default:h((()=>[g("div",null,[g("span",ee,S(e?.created_by_info?.username),1),g("span",te,[g("span",null,S(e.created_by_info?.email),1)]),g("span",ae,"At: "+S(m(N)(e.created_at)),1)])])),_:2},1024),b(L,null,{default:h((()=>[g("span",se,"$"+S(e.amount),1)])),_:2},1024),b(L,null,{default:h((()=>[g("div",null,[g("span",le,S(e?.client_info?.username?e?.client_info?.username:"N/A"),1),g("span",ie,[g("span",null,S(e.client_info?.email),1)])])])),_:2},1024),b(L,null,{default:h((()=>[b(F,{style:{"text-transform":"capitalize"},color:"succeeded"==e.status?"primary":""},{default:h((()=>[T(S(e.status),1)])),_:2},1032,["color"])])),_:2},1024),b(L,null,{default:h((()=>["Stripe"==e.type?(v(),y(W,{key:0,picture:"/icons/stripe-48.png",squared:"",size:"medium"})):(v(),y(W,{key:1,picture:"/icons/paypal-48.png",squared:"",size:"medium"}))])),_:2},1024),b(L,{column:{align:"end"}},{default:h((()=>[b(E,{onClick:t=>{return a=e.id,O.value=a,void(oe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Payment again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a},color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):j("",!0)])):j("",!0)])]),m(oe).isSweetAlertOpen?(v(),y(re,{key:0,isSweetAlertOpen:m(oe).isSweetAlertOpen,title:m(oe).title,loading:!1,subtitle:m(oe).subtitle,btntext:m(oe).btntext,onConfirm:ue,onCancel:()=>m(oe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0)]))}}}),[["__scopeId","data-v-54214eba"]]),re={class:"page-content-inner"},oe=u({__name:"index",setup(e){F();return D().setPageTitle("Payments"),I((()=>({title:"Payments"}))),(e,t)=>{const a=ne;return v(),f("div",re,[b(a)])}}});export{oe as default};
