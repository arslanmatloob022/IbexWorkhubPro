import{e,s as l,x as a,v as s,r as t,b as o,_ as i,o as r,B as n,C as p,D as u,K as d,W as m,l as _,E as c,F as f,N as v,M as y,z as V}from"./index-c5eacac6.js";import{u as g,_ as b}from"./WorksheetItems.vue_vue_type_script_setup_true_lang-1763129a.js";import{_ as j}from"./VCollapse.vue_vue_type_style_index_0_lang-69c86f4d.js";import{_ as x}from"./VTextarea.vue_vue_type_script_setup_true_lang-babbbab3.js";import{_ as h}from"./VField.vue_vue_type_script_setup_true_lang-89a1ecaf.js";import{_ as I}from"./VControl-73271265.js";import{_ as T}from"./VRadio.vue_vue_type_style_index_0_lang-2b2809fc.js";import{u as C}from"./useAPI-026ef94e.js";import{u as P}from"./useNotyf-29271abb.js";import{u as D}from"./userSession-333f1640.js";import{u as w}from"./viewWrapper-03140163.js";import"./VModal.vue_vue_type_style_index_0_lang-436e1f89.js";import"./VInput.vue_vue_type_script_setup_true_lang-714bb8d5.js";import"./useVFieldContext-0e40282b.js";import"./VOption.vue_vue_type_style_index_0_lang-669cf2b6.js";import"./useSupportElement-fcd6e19c.js";import"./VAvatar.vue_vue_type_style_index_0_lang-0ceb3dc6.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-142709c4.js";import"./VDropdown.vue_vue_type_style_index_0_lang-82539e0f.js";import"./VIcon.vue_vue_type_script_setup_true_lang-41ad7f64.js";import"./useDropdown-733f26b5.js";import"./VLabel.vue_vue_type_script_setup_true_lang-455e7b6b.js";import"./notyf-601b8c27.js";import"./useThemeColors-189e8828.js";const k={class:"modal-form columns is-multiline"},N={class:"field column is-6 mb-0"},q=u("label",null,"Title: *",-1),A={class:"control"},U={class:"column is-6"},E={class:"field column is-6"},O=u("label",null,"Approval Deadline *",-1),L={class:"control"},M={class:"field column is-6"},R=u("label",null,"Attachments",-1),S=u("div",{class:"file"},[u("label",{class:"file-label"},[u("input",{class:"file-input",type:"file",name:"resume"}),u("span",{class:"file-cta"},[u("span",{class:"file-icon"},[u("i",{class:"fas fa-cloud-upload-alt"})]),u("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),F={class:"field column is-12"},W={class:"body-inner-content"},H={class:"field columns is-multiline mb-0"},J={class:"field column is-11 mb-0"},$=u("label",{for:"",class:"label"},"Internal Notes",-1),z={class:"field column is-11 mb-0"},B=u("label",{for:"",class:"label"},"Introductory Text",-1),K={class:"field column is-11 mb-0"},Y=u("label",{for:"",class:"label"},"Closing Text",-1),G=e({__name:"ProposalDetailComponent",props:{proposalId:{},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:V}){const w=e,G=l(),Q=g();D(),P();const X=C(),Z=a();s(),t({}),t(!1);const ee=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];t({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const le=t({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});t("worksheet");const ae=o((()=>i((()=>import("./ckeditor-6d8fc3b5.js").then((e=>e.c))),["assets/ckeditor-6d8fc3b5.js","assets/index-c5eacac6.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-40e3d7c7.js"]).then((e=>e.default.component)))),se={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return r((async()=>{G.value=await i((()=>import("./ckeditor-962b993d.js").then((e=>e.c))),["assets/ckeditor-962b993d.js","assets/index-c5eacac6.js","assets/index-ce8747cd.css"]).then((e=>e.default)),(w.proposalId||Z.params.id)&&((async()=>{try{const e=await X.get(`/api/lead-proposal/${Z.params.id}/detail/`);le.value=e.data,Q.getProposalCostItems(Z.params.id)}catch(e){console.log(e)}})(),Q.getProposalDetail(w.proposalId||Z.params.id))})),(e,l)=>{const a=T,s=I,t=h,o=x,i=j,r=b;return n(),p("div",k,[u("div",N,[q,u("div",A,[d(u("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>_(le).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[m,_(le).title]])])]),u("div",U,[c(t,{class:"m-0 p-0",label:"Type"},{default:f((()=>[c(s,null,{default:f((()=>[c(a,{modelValue:_(le).type,"onUpdate:modelValue":l[1]||(l[1]=e=>_(le).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:_(le).type,"onUpdate:modelValue":l[2]||(l[2]=e=>_(le).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:_(le).type,"onUpdate:modelValue":l[3]||(l[3]=e=>_(le).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",E,[O,u("div",L,[d(u("input",{type:"date",name:"firstName","onUpdate:modelValue":l[4]||(l[4]=e=>_(le).approval_deadline=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Approval deadline"},null,512),[[m,_(le).approval_deadline]])])]),u("div",M,[R,c(t,{grouped:""},{default:f((()=>[c(s,null,{default:f((()=>[S])),_:1})])),_:1})]),u("div",F,[c(i,{items:ee,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":f((e=>[u("div",W,[u("div",H,[u("div",J,[$,c(t,null,{default:f((()=>[c(s,null,{default:f((()=>[c(o,{modelValue:_(le).internalNotes,"onUpdate:modelValue":l[5]||(l[5]=e=>_(le).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",z,[B,_(G)?(n(),v(_(ae),{key:0,modelValue:_(le).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>_(le).introductoryText=e),editor:_(G),config:se},null,8,["modelValue","editor"])):y("",!0)]),u("div",K,[Y,_(G)?(n(),v(_(ae),{key:0,modelValue:_(le).closingText,"onUpdate:modelValue":l[7]||(l[7]=e=>_(le).closingText=e),editor:_(G),config:se},null,8,["modelValue","editor"])):y("",!0)])])])])),_:1})]),c(r,{proposalData:_(le),proposalId:_(le).id},null,8,["proposalData","proposalId"])])}}}),Q=e({__name:"[id]",setup:e=>(w().setPageTitle("Lead Proposals"),V({title:"Lead Proposals - Ibex"}),(e,l)=>(n(),p("div",null,[c(G)])))});export{Q as default};
