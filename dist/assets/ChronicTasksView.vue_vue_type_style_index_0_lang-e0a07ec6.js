import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-6fe65f3b.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-3acf64c4.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-993f8723.js";import{_ as s}from"./VAvatar.vue_vue_type_style_index_0_lang-ee596545.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-dc74da7a.js";import{f as t,r as n,b as c,$ as o,o as d,av as r,C as u,D as p,E as m,F as v,G as h,L as k,X as g,m as f,k as y,I as _,H as w,U as b,V as C,W as j,O as x,N as D,al as T,J as S,Q as A,R as E,S as I,B as W,aS as V,K as L}from"./index-4fc915ed.js";import{_ as O}from"./VControl-81c54741.js";import{_ as P,a as $}from"./projects-dark-4a371d8a.js";import{u as N}from"./useNotyf-bdfe2d53.js";import{u as M}from"./useAPI-8b259595.js";import{c as R,_ as U}from"./VFlexTable.vue_vue_type_style_index_0_lang-c51173b8.js";import{_ as z}from"./VTag.vue_vue_type_style_index_0_lang-8269c3bd.js";import{_ as K,a as H}from"./search-4-dark-2b5b440c.js";import{p as q}from"./index-c1fc2d09.js";import{_ as F}from"./VField.vue_vue_type_script_setup_true_lang-e4aad524.js";import{_ as B}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-80419403.js";import{_ as Q}from"./having-coffee-37a7bbcc.js";import{_ as Y}from"./having-coffee-dark-4694625e.js";const G=e=>(A("data-v-13f04d27"),e=e(),E(),e),J={class:"list-flex-toolbar is-reversed"},X={class:"tabs-inner"},Z={class:"tabs"},ee=G((()=>m("span",null,"All",-1))),le=[ee],ae=G((()=>m("span",null,"Active",-1))),se=[ae],ie=G((()=>m("span",null,"Pending",-1))),te=[ie],ne=G((()=>m("span",null,"Completed",-1))),ce=[ne],oe=G((()=>m("li",{class:"tab-naver"},null,-1))),de={class:"flex-list-wrapper flex-list-v2"},re={key:0,class:"tab-content is-active"},ue={class:"all-projects"},pe={class:"all-projects-header"},me={class:"header-item"},ve={class:"item-inner"},he=G((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),ke=G((()=>m("p",null,"Total Tasks",-1))),ge={class:"header-item"},fe={class:"item-inner"},ye=G((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),_e=G((()=>m("p",null,"Completed Tasks",-1))),we={class:"header-item"},be={class:"item-inner"},Ce=G((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),je=G((()=>m("p",null,"Pending Tasks",-1))),xe={class:"header-item"},De={class:"item-inner"},Te=G((()=>m("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),Se=G((()=>m("p",null,"Active Tasks",-1))),Ae={key:0,class:"columns is-multiline projects-card-grid"},Ee={class:"column is-6"},Ie={class:"grid-item"},We={class:"top-section"},Ve={class:"head"},Le=["onClick"],Oe=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],Pe=["onClick"],$e=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],Ne=["onClick"],Me=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],Re=G((()=>m("hr",{class:"dropdown-divider"},null,-1))),Ue=["onClick"],ze=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],Ke=["onClick"],He=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],qe={class:"body"},Fe={class:"bottom-section"},Be={key:0,class:"foot-block"},Qe=G((()=>m("h4",{class:"heading"},"Sub Contractor",-1))),Ye={class:"developers"},Ge={key:1,class:"foot-block"},Je=G((()=>m("h4",{class:"heading"},"Worker(s)",-1))),Xe={class:"developers"},Ze={class:"foot-block"},el=G((()=>m("h4",{class:"heading"},"Start date",-1))),ll={class:"foot-block"},al=G((()=>m("h4",{class:"heading"},"End date",-1))),sl={class:"foot-block"},il=G((()=>m("h4",{class:"heading"},"Status",-1))),tl=G((()=>m("img",{class:"light-image is-larger",src:P,alt:""},null,-1))),nl=G((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),cl={key:1,class:"tab-content is-active"},ol={class:"all-projects"},dl={key:0,class:"columns is-multiline projects-card-grid"},rl={class:"column is-6"},ul={class:"grid-item"},pl={class:"top-section"},ml={class:"head"},vl=["onClick"],hl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],kl=["onClick"],gl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],fl=["onClick"],yl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],_l=G((()=>m("hr",{class:"dropdown-divider"},null,-1))),wl=["onClick"],bl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],Cl=["onClick"],jl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],xl={class:"body"},Dl={class:"bottom-section"},Tl={class:"foot-block"},Sl=G((()=>m("h4",{class:"heading"},"Worker(s)",-1))),Al={class:"developers"},El={class:"foot-block"},Il=G((()=>m("h4",{class:"heading"},"Start date",-1))),Wl={class:"foot-block"},Vl=G((()=>m("h4",{class:"heading"},"End date",-1))),Ll={class:"foot-block"},Ol=G((()=>m("h4",{class:"heading"},"Status",-1))),Pl=G((()=>m("img",{class:"light-image is-larger",src:P,alt:""},null,-1))),$l=G((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),Nl={key:2,class:"tab-content is-active"},Ml={class:"all-projects"},Rl={key:0,class:"columns is-multiline projects-card-grid"},Ul={class:"column is-6"},zl={class:"grid-item"},Kl={class:"top-section"},Hl={class:"head"},ql=["onClick"],Fl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],Bl=["onClick"],Ql=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],Yl=["onClick"],Gl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],Jl=G((()=>m("hr",{class:"dropdown-divider"},null,-1))),Xl=["onClick"],Zl=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],ea=["onClick"],la=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],aa={class:"body"},sa={class:"bottom-section"},ia={class:"foot-block"},ta=G((()=>m("h4",{class:"heading"},"Worker(s)",-1))),na={class:"developers"},ca={class:"foot-block"},oa=G((()=>m("h4",{class:"heading"},"Start date",-1))),da={class:"foot-block"},ra=G((()=>m("h4",{class:"heading"},"End date",-1))),ua={class:"foot-block"},pa=G((()=>m("h4",{class:"heading"},"Status",-1))),ma=G((()=>m("img",{class:"light-image is-larger",src:P,alt:""},null,-1))),va=G((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),ha={key:3,class:"tab-content is-active"},ka={class:"all-projects"},ga={key:0,class:"columns is-multiline projects-card-grid"},fa={class:"column is-6"},ya={class:"grid-item"},_a={class:"top-section"},wa={class:"head"},ba=["onClick"],Ca=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Active"),m("span",null,"Start work on this task")],-1)))],ja=["onClick"],xa=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Pending"),m("span",null,"Waiting to work on")],-1)))],Da=["onClick"],Ta=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Completed"),m("span",null,"Mark task as completed")],-1)))],Sa=G((()=>m("hr",{class:"dropdown-divider"},null,-1))),Aa=["onClick"],Ea=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Edit Task detail")],-1)))],Ia=["onClick"],Wa=[G((()=>m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),G((()=>m("div",{class:"meta"},[m("span",null,"Delete "),m("span",null,"Delete this task")],-1)))],Va={class:"body"},La={class:"bottom-section"},Oa={class:"foot-block"},Pa=G((()=>m("h4",{class:"heading"},"Worker(s)",-1))),$a={class:"developers"},Na={class:"foot-block"},Ma=G((()=>m("h4",{class:"heading"},"Start date",-1))),Ra={class:"foot-block"},Ua=G((()=>m("h4",{class:"heading"},"End date",-1))),za={class:"foot-block"},Ka=G((()=>m("h4",{class:"heading"},"Status",-1))),Ha=G((()=>m("img",{class:"light-image is-larger",src:P,alt:""},null,-1))),qa=G((()=>m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),Fa=I(t({__name:"WorkerTasks",props:{projectID:{default:""},workerId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(t,{emit:A}){const E=t,I=M(),W=N(),V=n(""),L=c(),P=n(""),$=n("all"),R=n(0),U=n(!1),z=n(!1),K=n(0);n({});const H=n("");n([{value:"active",name:"Active"},{value:"pending",name:"Pre Construction"},{value:"completed",name:"Completed"},{value:"cancelled",name:"cancelled"}]),n([{id:0,username:"",email:"",phoneNumber:""}]);const q=n([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),F=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),B=e=>{K.value=e,F.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},Q=async()=>{try{U.value=!0;const e=await I.get(`/api/task/${E.workerId?E.workerId:L.user.id}/worker-tasks/`);q.value=e.data,console.log(e.data),U.value=!1}catch(e){console.log(e)}},Y=o((()=>{let e=q.value.filter((e=>"active"==e.status));return A("update:completedTasks",e.length),e.length})),G=o((()=>{let e=q.value.filter((e=>"pending"==e.status));return A("update:activeTasks",e.length),e.length})),ee=o((()=>q.value.filter((e=>"completed"==e.status)).length)),ae=e=>{H.value=e,z.value=!0},ie=()=>{Q(),z.value=!1,H.value=""},ne=async(e,l)=>{try{U.value=!0;await I.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});Q(),W.success(`Task set to ${l} successfully`),R.value=0,U.value=!1}catch(a){console.log(a)}},Fa=async()=>{try{U.value=!0;const e=await I.delete(`/api/task/${K.value}/`);console.log(e),W.success("Task deleted successfully"),Q(),F.value.isSweetAlertOpen=!1,R.value=0}catch(e){console.log(e)}finally{U.value=!1}},Ba=o((()=>{if(P.value){const e=new RegExp(P.value,"i");return q.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"completed"!=e.status))})),Qa=o((()=>{if(P.value){const e=new RegExp(P.value,"i");return q.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"completed"==e.status))})),Ya=o((()=>{if(P.value){const e=new RegExp(P.value,"i");return q.value.filter((l=>"active"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"active"==e.status))})),Ga=o((()=>{if(P.value){const e=new RegExp(P.value,"i");return q.value.filter((l=>"pending"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return q.value.filter((e=>"pending"==e.status))}));return d((()=>{Q()})),(t,n)=>{const c=O,o=T,d=i,A=s,I=a,W=l,L=e,N=r("tooltip");return u(),p(C,null,[m("div",null,[m("div",J,[v(o,null,{default:h((()=>[v(c,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:h((()=>[k(m("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>y(P)?P.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[g,f(P)]])])),_:1})])),_:1}),m("div",X,[m("div",Z,[m("ul",null,[m("li",{class:_(["all"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=w(S((e=>$.value="all"),["prevent"]),["space"])),onClick:n[2]||(n[2]=e=>$.value="all")},le,32)],2),m("li",{class:_(["active"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=w(S((e=>$.value="active"),["prevent"]),["space"])),onClick:n[4]||(n[4]=e=>$.value="active")},se,32)],2),m("li",{class:_(["pending"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=w(S((e=>$.value="pending"),["prevent"]),["space"])),onClick:n[6]||(n[6]=e=>$.value="pending")},te,32)],2),m("li",{class:_(["completed"===f($)&&"is-active"])},[m("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=w(S((e=>$.value="completed"),["prevent"]),["space"])),onClick:n[8]||(n[8]=e=>$.value="completed")},ce,32)],2),oe])])])]),m("div",de,["all"===f($)?(u(),p("div",re,[m("div",ue,[m("div",pe,[m("div",me,[m("div",ve,[he,m("span",null,b(f(q).length),1),ke])]),m("div",ge,[m("div",fe,[ye,m("span",null,b(f(ee)),1),_e])]),m("div",we,[m("div",be,[Ce,m("span",null,b(f(G)),1),je])]),m("div",xe,[m("div",De,[Te,m("span",null,b(f(Y)),1),Se])])]),f(Ba).length?(u(),p("div",Ae,[(u(!0),p(C,null,j(f(Ba),(e=>(u(),p("div",Ee,[m("div",Ie,[m("div",We,[m("div",Ve,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Oe,8,Le),m("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},$e,8,Pe),m("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Me,8,Ne),Re,m("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},ze,8,Ue),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},He,8,Ke)])),_:2},1024)]),m("div",qe,[m("p",null,b(e.description),1)])]),m("div",Fe,[e.supplier?(u(),p("div",Be,[Qe,m("div",Ye,[k(v(A,{picture:e.supplier?.avatar,size:"small",color:"primary",initials:e.supplier?.avatar?"":e.supplier?.username.slice(0,2)},null,8,["picture","initials"]),[[N,`${e?.supplier?.username}`,void 0,{rounded:!0,info:!0}]])])])):D("",!0),e.workers?.length?(u(),p("div",Ge,[Je,m("div",Xe,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),x(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])])):D("",!0),m("div",Ze,[el,m("p",null,b(e.startDate),1)]),m("div",ll,[al,m("p",null,b(e.endDate),1)]),m("div",sl,[il,m("p",null,b(e.status),1)])])])])))),256))])):(u(),x(I,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:h((()=>[tl,nl])),_:1}))])])):"active"===f($)?(u(),p("div",cl,[m("div",ol,[f(Ya).length?(u(),p("div",dl,[(u(!0),p(C,null,j(f(Ya),(e=>(u(),p("div",rl,[m("div",ul,[m("div",pl,[m("div",ml,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},hl,8,vl),m("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},gl,8,kl),m("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},yl,8,fl),_l,m("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},bl,8,wl),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},jl,8,Cl)])),_:2},1024)]),m("div",xl,[m("p",null,b(e.description),1)])]),m("div",Dl,[m("div",Tl,[Sl,m("div",Al,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),x(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),m("div",El,[Il,m("p",null,b(e.startDate),1)]),m("div",Wl,[Vl,m("p",null,b(e.endDate),1)]),m("div",Ll,[Ol,m("p",null,b(e.status),1)])])])])))),256))])):(u(),x(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:h((()=>[Pl,$l])),_:1}))])])):"pending"===f($)?(u(),p("div",Nl,[m("div",Ml,[f(Ga).length?(u(),p("div",Rl,[(u(!0),p(C,null,j(f(Ga),(e=>(u(),p("div",Ul,[m("div",zl,[m("div",Kl,[m("div",Hl,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Fl,8,ql),m("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Ql,8,Bl),m("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Gl,8,Yl),Jl,m("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Zl,8,Xl),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},la,8,ea)])),_:2},1024)]),m("div",aa,[m("p",null,b(e.description),1)])]),m("div",sa,[m("div",ia,[ta,m("div",na,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),x(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),m("div",ca,[oa,m("p",null,b(e.startDate),1)]),m("div",da,[ra,m("p",null,b(e.endDate),1)]),m("div",ua,[pa,m("p",null,b(e.status),1)])])])])))),256))])):(u(),x(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:h((()=>[ma,va])),_:1}))])])):"completed"===f($)?(u(),p("div",ha,[m("div",ka,[f(Qa).length?(u(),p("div",ga,[(u(!0),p(C,null,j(f(Qa),(e=>(u(),p("div",fa,[m("div",ya,[m("div",_a,[m("div",wa,[m("h3",null,b(e.title),1),v(d,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[m("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ca,8,ba),m("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},xa,8,ja),m("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Ta,8,Da),Sa,m("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Ea,8,Aa),m("a",{onClick:l=>B(e.id),role:"menuitem",class:"dropdown-item is-media"},Wa,8,Ia)])),_:2},1024)]),m("div",Va,[m("p",null,b(e.description),1)])]),m("div",La,[m("div",Oa,[Pa,m("div",$a,[(u(!0),p(C,null,j(e.workers,(e=>k((u(),x(A,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),m("div",Na,[Ma,m("p",null,b(e.startDate),1)]),m("div",Ra,[Ua,m("p",null,b(e.endDate),1)]),m("div",za,[Ka,m("p",null,b(e.status),1)])])])])))),256))])):(u(),x(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:h((()=>[Ha,qa])),_:1}))])])):D("",!0)])]),f(F).isSweetAlertOpen?(u(),x(W,{key:0,isSweetAlertOpen:f(F).isSweetAlertOpen,title:f(F).title,subtitle:f(F).subtitle,btntext:f(F).btntext,onConfirm:Fa,loading:f(U),onCancel:()=>f(F).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):D("",!0),f(z)?(u(),x(L,{key:1,projectID:E.projectID,isOpen:f(z),taskIdSelected:f(H),startDate:f(V),"onUpdate:modalHandler":ie,"onUpdate:OnSuccess":Q},null,8,["projectID","isOpen","taskIdSelected","startDate"])):D("",!0)],64)}}}),[["__scopeId","data-v-13f04d27"]]),Ba={class:"flex-list-wrapper flex-list-v2"},Qa=m("img",{class:"light-image",src:K,alt:""},null,-1),Ya=m("img",{class:"dark-image",src:H,alt:""},null,-1),Ga={key:1,class:"tab-content is-active"},Ja={class:"item-name dark-inverted show-text-200"},Xa={class:"item-meta"},Za={class:"link-text"},es={class:"light-text"},ls={class:"light-text"},as={key:2,class:"tab-content is-active"},ss=m("img",{class:"light-image is-larger",src:P,alt:""},null,-1),is=m("img",{class:"dark-image is-larger",src:$,alt:""},null,-1),ts=t({__name:"ChronicTasksList",props:{tasks:{default:{}}},setup(e){const l=e,s=q,i=n(""),t=n("active"),c={picture:{label:"Task",media:!0,grow:!0},customer:"Start ",industry:"End",status:"Quantity",team:{label:"Unit",cellClass:"h-hidden-tablet-p"},actions:{label:"Cost code",align:"end"}},d={completed:"primary",pending:"warning",active:"info",canceled:"danger"},r=o((()=>{if(i.value){const e=new RegExp(i.value,"i");return s.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return s}));return(e,s)=>{const i=a,n=W("Tippy"),o=R,k=z,g=U;return u(),p("div",null,[m("div",Ba,["active"===f(t)&&0===f(r).length?(u(),x(i,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[Qa,Ya])),_:1})):D("",!0),"active"===f(t)?(u(),p("div",Ga,[l.tasks?(u(),x(g,{key:0,data:f(r),columns:c,rounded:""},{body:h((()=>[v(V,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(u(!0),p(C,null,j(l.tasks,(e=>(u(),p("div",{key:e.id,class:"flex-table-item"},[v(o,{column:{media:!0,grow:!0}},{default:h((()=>[m("div",null,[m("span",Ja,b(e.title?e.title:""),1),m("span",Xa,[v(n,{trigger:"click"},{content:h((()=>[L(b(e.description?e.description:""),1)])),default:h((()=>[m("span",Za,b(e.description?.length>40?e.description?.slice(0,40):e.description.length<40?e.description:""),1)])),_:2},1024)])])])),_:2},1024),v(o,null,{default:h((()=>[m("span",es,b(e.startDate?e.startDate:""),1)])),_:2},1024),v(o,null,{default:h((()=>[m("span",ls,b(e.endDate?e.endDate:""),1)])),_:2},1024),v(o,null,{default:h((()=>[v(k,{outlined:"",color:"info",rounded:""},{default:h((()=>[L(b(e.quantity?e.quantity:""),1)])),_:2},1024)])),_:2},1024),v(o,{class:"h-hidden-tablet-p"},{default:h((()=>[v(k,{outlined:"",color:"primary",rounded:""},{default:h((()=>[L(b(e.unit?e.unit:"N/A"),1)])),_:2},1024)])),_:2},1024),v(o,{column:{align:"end"}},{default:h((()=>[v(k,{outlined:"",color:d[e.status],rounded:""},{default:h((()=>[L(b(e.status?e.status:""),1)])),_:2},1032,["color"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):D("",!0)])):"closed"===f(t)?(u(),p("div",as,[v(i,{title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n              start closing off projects, they will be showing up in here."},{image:h((()=>[ss,is])),_:1})])):D("",!0)])])}}}),ns={key:0},cs={key:1},os={class:"list-view-toolbar"},ds=m("div",{class:"tabs-inner"},null,-1),rs={class:"list-view list-view-v2"},us={class:"list-view-inner"},ps={class:"list-view-item"},ms={class:"list-view-item-inner"},vs={class:"meta-left"},hs={class:"info-text"},ks=m("i",{class:"lnir lnir-star-empty","aria-hidden":"true"},null,-1),gs=["innerHTML"],fs=m("div",{class:"meta-right"},null,-1),ys={class:"list-view-inner"},_s=m("img",{class:"light-image",src:Q,alt:""},null,-1),ws=m("img",{class:"dark-image",src:Y,alt:""},null,-1),bs=t({__name:"ChronicTasksView",props:{supplierId:{default:""},projectID:{default:""},workerId:{default:""},userId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(e,{emit:l}){const s=e,i=c(),t=n("active"),r=n(""),w=n(!1),x=n([]),T=M(),S=o((()=>{if(r.value){const e=new RegExp(r.value,"i");return x.value.filter((l=>l.title.match(e)||l.description.match(e)))}return x.value}));return d((()=>{(async()=>{try{w.value=!0;const e=await T.get(`/api/task/project-wise-tasks/${s.userId?s.userId:i.user.id}/`);x.value=e.data,console.log("chronic tasks",e.data),w.value=!1}catch(e){console.log(e)}})()})),(e,l)=>{const s=B,i=O,n=F,c=a,o=ts;return f(w)?(u(),p("div",ns,[v(s)])):(u(),p("div",cs,[m("div",os,[v(n,null,{default:h((()=>[v(i,{icon:"feather:search"},{default:h((()=>[k(m("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>y(r)?r.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[g,f(r)]])])),_:1})])),_:1}),ds]),(u(!0),p(C,null,j(f(S),(e=>(u(),p("div",{key:e.id,class:"page-content-inner mb-6"},[m("div",rs,[m("div",{id:"active-items-tab",class:_(["tab-content",["active"===f(t)&&"is-active"]])},[m("div",us,[v(V,{name:"list-complete",tag:"div"},{default:h((()=>[m("div",ps,[m("div",ms,[m("div",vs,[m("h3",null,[m("span",hs,[ks,L(b(e.title),1)])]),e.description?(u(),p("div",{key:0,innerHTML:e.description},null,8,gs)):D("",!0),m("span",null,[m("span",null," Timeline: "+b(e.startDate?e.startDate:"N/A")+" to "+b(e.endDate?e.endDate:"N/A"),1)])]),fs])])])),_:2},1024)])],2),m("div",{id:"inactive-items-tab",class:_(["tab-content",["inactive"===f(t)&&"is-active"]])},[m("div",ys,[v(c,{title:"There are no inactive properties.",subtitle:"Looks like there are no inactive properties to display. You can\n                disable and also enable a property from the property settings.",larger:""},{image:h((()=>[_s,ws])),_:1})])],2)]),v(o,{tasks:e.filtered_tasks},null,8,["tasks"])])))),128))]))}}});export{bs as _,Fa as a};
