import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-aa7b2f49.js";import{f as s,r as e,b as l,o as t,C as i,O as o,G as n,E as r,L as c,m as d,X as u,F as p,U as m,K as _,J as v,P as f,D as b,k as g,V as k,W as y,al as h,aB as j,$ as D,I as w,N as x,H as P,a5 as M}from"./index-e765c558.js";import{_ as T}from"./VField.vue_vue_type_script_setup_true_lang-f163a2a8.js";import{_ as V}from"./VControl-920718a5.js";import{_ as C}from"./VTextarea.vue_vue_type_script_setup_true_lang-0b53b5ef.js";import{u as A}from"./useNotyf-28a154f6.js";import{u as N}from"./useAPI-5fce6564.js";import{a as S,C as H,d as z}from"./useSupportElement-cdbf1490.js";import{_ as I}from"./VAvatar.vue_vue_type_style_index_0_lang-e5ba285e.js";import{_ as L}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-e36ed971.js";import{_ as E}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-8ca0e213.js";import{_ as O}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-fc0aba33.js";import{_ as U}from"./VInput.vue_vue_type_script_setup_true_lang-9f1677fe.js";import{_ as W,a as $}from"./search-6-dark-6c9b195a.js";import{o as B}from"./via-placeholder-24645670.js";import{_ as K}from"./VCardAction.vue_vue_type_script_setup_true_lang-fe715af1.js";const R={class:"modal-form columns is-multiline"},F={class:"column is-full"},G={class:"field"},J=r("label",{class:"label"},"Title ",-1),q={class:"control"},Q={class:"column is-full"},X={class:"field"},Z=r("label",{class:"label"},"Description ",-1),Y={class:"field column is-half"},aa={class:"file"},sa={class:"file-label"},ea={class:"file-cta"},la=r("span",{class:"file-icon"},[r("i",{class:"fas fa-cloud-upload-alt"})],-1),ta={class:"file-label"},ia=s({__name:"AddProgressModal",props:{openProgressModal:{type:Boolean},job:{},task:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(s,{emit:b}){const g=s;e(null);const k=N(),y=A(),h=e(!1),j=l(),D=()=>{b("close:ModalHandler",!1)},w=e({title:"",description:"",job:g.job,task:g.task?g.task:"",uploaded_by:j.user.id,file:null}),x=async()=>{try{h.value=!0;const a=S(w.value,["file"]);await k.post("/api/job-progress/",a);H({object_type:"files",object_id:g.job,action:"CREATE",message:`added new progress titled <b>${w.value.title}</b>.`,performedOnName:"job"}),y.success("Progress added successfully!"),b("update:OnSuccess",null),D()}catch(a){console.log(a)}finally{h.value=!1}},P=e(""),M=a=>{const s=a.target,e=s.files?.[0];s.value="",e&&(w.value.file=e,P.value=e.name)};return t((()=>{})),(s,e)=>{const l=C,t=V,b=T,k=f,y=a;return i(),o(y,{is:"form",open:g.openProgressModal,title:"Add Progress",size:"medium",actions:"right",onSubmit:v(x,["prevent"]),onClose:D},{content:n((()=>[r("div",R,[r("div",F,[r("div",G,[J,r("div",q,[c(r("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":e[0]||(e[0]=a=>d(w).title=a)},null,512),[[u,d(w).title]])])])]),r("div",Q,[r("div",X,[Z,p(t,null,{default:n((()=>[p(l,{modelValue:d(w).description,"onUpdate:modelValue":e[1]||(e[1]=a=>d(w).description=a),class:"is-primary-focus",rows:"2",placeholder:"Description"},null,8,["modelValue"])])),_:1})])]),r("div",Y,[p(b,{grouped:""},{default:n((()=>[p(t,null,{default:n((()=>[r("div",aa,[r("label",sa,[r("input",{onChange:M,class:"file-input",type:"file",name:"resume"},null,32),r("span",ea,[la,r("span",ta,m(d(P)?d(P):"Choose a fileâ€¦"),1)])])])])),_:1})])),_:1})])])])),action:n((()=>[p(k,{type:"submit",color:"primary",loading:d(h),raised:""},{default:n((()=>[_(" Save")])),_:1},8,["loading"])])),cancel:n((()=>[p(k,{color:"light",onClick:D,raised:""},{default:n((()=>[_("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),oa={class:"user-grid-toolbar"},na=r("span",{class:"icon"},[r("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ra=r("span",null," Progress",-1),ca={class:"tile-grid tile-grid-v1"},da={class:"columns is-multiline"},ua={class:"tile-grid-item"},pa={class:"tile-grid-item-inner placeload-wrap is-flex"},ma={style:{width:"100%"}},_a={style:{width:"100%",display:"flex"},class:"mt-3"},va=s({__name:"ProgressMediaLoader",setup(a){const s=e("");return e(0),(a,e)=>{const l=U,t=V,o=T,c=f,u=h,m=j,_=O,v=E;return i(),b("div",null,[r("div",oa,[p(o,{raw:""},{default:n((()=>[p(t,{icon:"feather:search"},{default:n((()=>[p(l,{modelValue:d(s),"onUpdate:modelValue":e[0]||(e[0]=a=>g(s)?s.value=a:null),placeholder:"Search..."},null,8,["modelValue"])])),_:1})])),_:1}),p(u,null,{default:n((()=>[p(c,{color:"primary",raised:""},{default:n((()=>[na,ra])),_:1})])),_:1})]),r("div",ca,[r("div",da,[(i(),b(k,null,y(12,(a=>r("div",{key:a,class:"column is-12"},[r("div",ua,[r("div",pa,[p(m,{height:"100px",width:"100px",size:"medium"}),r("div",ma,[p(_,{width:"80%",lines:3,"last-line-width":"60%",class:"mx-2"}),r("div",_a,[p(v,{size:"small",class:"mt-2 ml-2"}),p(_,{width:"50%",lines:2,"last-line-width":"60%",class:"mx-2 mt-2"})])])])])]))),64))])])])}}}),fa={key:1},ba={class:"tile-grid-toolbar"},ga={class:"buttons"},ka=r("span",{class:"icon"},[r("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ya=r("span",null,"Progress",-1),ha={class:"tile-grid tile-grid-v3"},ja=r("img",{class:"light-image",src:W,alt:""},null,-1),Da=r("img",{class:"dark-image",src:$,alt:""},null,-1),wa={class:"tile is-ancestor columns is-multiline"},xa={class:"tile is-parent column is-12"},Pa={class:"tile is-child tile-grid-item is-medium"},Ma={class:"tile-grid-item-inner"},Ta=["src","alt"],Va={class:"meta"},Ca={class:"tile-title"},Aa={class:"dark-inverted"},Na={class:"tile-meta"},Sa={class:"meta-inner"},Ha={class:"dark-inverted"},za=s({__name:"ProgressMedia",props:{object:{},type:{},taskData:{}},setup(a){const s=a,l=N(),_=e(""),v=e(!1),h=e(!1);e(0);const j=e([{id:"65f77998-8cbb-4d6a-acfd-100f9a117386",uploaded_by_info:{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",last_name:null,email:"testworker@gmail.com",role:"worker",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/availalbe.png"},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/job_progress/Screenshot_from_2025-03-06_17-04-21.png",name:"Screenshot_from_2025-03-06_17-04-21.png",type:"png",size:.16},progress:0,title:"Test 1",description:"description of the progress",created_at:"2025-03-06T18:07:35.239784Z",file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/job_progress/Screenshot_from_2025-03-06_17-04-21.png",job:"751b95b2-9961-45a0-948c-96f85cea6a52",task:"894767a3-516e-4bd8-931d-76e36f99d7a8",uploaded_by:"937a8b15-62b4-4576-98af-2e53ecb90e46"}]),P=async()=>{try{v.value=!0;const a=await l.get(`/api/job-progress/by-task/${s.object}/`);j.value=a.data}catch(a){console.log(a)}finally{v.value=!1}},M=D((()=>{if(_.value){const a=new RegExp(_.value,"i");return j.value.filter((s=>s.title.match(a)||s.uploaded_by_info?.username?.match(a)))}return j.value}));return t((()=>{"task"===s.type&&P()})),(a,e)=>{const l=va,t=V,j=f,D=L,T=I,C=ia;return d(v)?(i(),o(l,{key:0})):(i(),b("div",fa,[r("div",ba,[p(t,{icon:"feather:search"},{default:n((()=>[c(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>g(_)?_.value=a:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[u,d(_)]])])),_:1}),r("div",ga,[p(j,{onClick:e[1]||(e[1]=a=>h.value=!d(h)),color:"primary",raised:""},{default:n((()=>[ka,ya])),_:1})])]),r("div",ha,[p(D,{class:w([0!==d(M).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:n((()=>[ja,Da])),_:1},8,["class"]),r("div",wa,[(i(!0),b(k,null,y(d(M),(a=>(i(),b("div",xa,[r("a",Pa,[r("div",Ma,[r("img",{src:a.file,alt:a.title,onErrorOnce:e[2]||(e[2]=a=>d(B)(400,300))},null,40,Ta),r("div",Va,[r("div",Ca,[r("h3",Aa,m(a.title??"N/A"),1),r("p",null,m(a.description??"N/A"),1)]),r("div",Na,[p(T,{picture:a.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),r("div",Sa,[r("span",Ha,m(a.uploaded_by_info.username??"N/A")+" "+m(a.uploaded_by_info.last_name??""),1),r("span",null,m(d(z)(a.created_at)),1)])])])])])])))),256))])]),d(h)?(i(),o(C,{key:0,task:s.object,job:s.taskData.project.id?s.taskData.project.id:s.taskData?.project,openProgressModal:d(h),"onUpdate:OnSuccess":P,"onClose:ModalHandler":e[3]||(e[3]=a=>h.value=!1)},null,8,["task","job","openProgressModal"])):x("",!0)]))}}}),Ia={class:"columns is-multiline"},La={class:"tabs-wrapper column is-12 mb-0"},Ea={class:"tabs is-boxed"},Oa=[r("span",null,"Task Info",-1)],Ua=[r("span",null,"Task Progress",-1)],Wa={key:0,class:"column is-12 py-0"},$a={class:"columns is-multiline px-2 py-0"},Ba={class:"column is-12 mb-2"},Ka=r("h1",{class:"subtitle is-5 mb-1"},"Task info",-1),Ra={class:"column is-12"},Fa=r("h1",{class:"subtitle is-6 m-0"},"Description",-1),Ga=["innerHTML"],Ja={class:"column is-12"},qa=r("h1",{class:"subtitle is-6 m-0"},"Note",-1),Qa={class:"column is-6"},Xa={class:""},Za={class:"column is-6"},Ya={class:""},as={key:0,class:"column is-12 p-0 mb-2"},ss=r("h1",{class:"subtitle is-5 mb-1"},"Project Info",-1),es={class:"is-bold"},ls={class:"is-bold"},ts=["innerHTML"],is={key:1,class:"column is-12"},os=r("h1",{class:"subtitle is-5 mb-1"},"Workers",-1),ns={key:1,class:"column is-12 py-0"},rs=s({__name:"TaskInfoModal",props:{taskDetailModal:{type:Boolean},taskData:{},taskId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(s,{emit:l}){const t=s,c=e("info"),u=()=>{l("update:modalHandler",!0)};return(s,e)=>{const l=M,g=K,h=za,j=f,D=a;return t.taskDetailModal?(i(),o(D,{key:0,open:t.taskDetailModal,title:"Task Info",actions:"right",size:"medium",onClose:u},{content:n((()=>[r("div",Ia,[r("div",La,[r("div",Ea,[r("ul",null,[r("li",{class:w(["info"===d(c)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:e[0]||(e[0]=P(v((a=>c.value="info"),["prevent"]),["space"])),onClick:e[1]||(e[1]=a=>c.value="info")},Oa,32)],2),r("li",{class:w(["progress"===d(c)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:e[2]||(e[2]=P(v((a=>c.value="progress"),["prevent"]),["space"])),onClick:e[3]||(e[3]=a=>c.value="progress")},Ua,32)],2)])])]),"info"==d(c)?(i(),b("div",Wa,[r("div",$a,[r("div",Ba,[p(l,{elevated:"",class:"columns is-multiline"},{default:n((()=>[Ka,r("div",Ra,[Fa,r("p",null,[r("span",{innerHTML:t.taskData?.description,class:"is-bold"},null,8,Ga)])]),r("div",Ja,[qa,r("p",null,m(t.taskData?.note?t.taskData?.note:"N/A"),1)]),r("div",Qa,[_(" Duration "),r("p",Xa,m(t.taskData?.startDate?t.taskData?.startDate:"N/A")+" to "+m(t.taskData?.endDate?t.taskData?.endDate:"N/A"),1)]),r("div",Za,[_(" Unit "),r("p",Ya,m(t.taskData?.unit?t.taskData?.unit:"N/A"),1)])])),_:1})]),t.taskData.project.id?(i(),b("div",as,[p(l,{elevated:""},{default:n((()=>[ss,r("p",null,[_(" Name: "),r("span",es,m(t.taskData?.project?.title?t.taskData?.project?.title:"N/A"),1)]),r("p",null,[_(" Address: "),r("span",ls,m(t.taskData?.project?.address?t.taskData?.project?.address:"N/A"),1)]),r("div",null,[_(" Description: "),r("div",{innerHTML:t.taskData?.project?.description,class:"is-bold"},null,8,ts)])])),_:1})])):x("",!0),t.taskData?.workers?.length?(i(),b("div",is,[os,(i(!0),b(k,null,y(t.taskData?.workers,(a=>(i(),o(g,{avatar:a.avatar?a.avatar:"https://media.cssninja.io/content/avatars/19.jpg",title:a.username,subtitle:a.email},null,8,["avatar","title","subtitle"])))),256))])):x("",!0)])])):x("",!0),"progress"==d(c)?(i(),b("div",ns,[p(h,{object:t.taskId,taskData:t.taskData,type:"task"},null,8,["object","taskData"])])):x("",!0)])])),action:n((()=>[p(j,{style:{display:"none"},color:"primary",raised:""},{default:n((()=>[_(" Confirm ")])),_:1})])),cancel:n((()=>[p(j,{onClick:u,raised:""},{default:n((()=>[_(" Close ")])),_:1})])),_:1},8,["open"])):x("",!0)}}});export{rs as _,ia as a};
