import{_ as e}from"./VBlock.vue_vue_type_style_index_0_lang-0a45d919.js";import{_ as a}from"./VAvatarStack.vue_vue_type_script_setup_true_lang-09739d4e.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-20d28d20.js";import{u as t}from"./useNotyf-de2de5e2.js";import{u as r}from"./useAPI-dc7df27d.js";import{u as o}from"./userSession-9c20ce32.js";import{e as i,x as l,v as c,r as n,o as d,B as u,C as p,D as m,U as k,V as v,l as _,N as f,F as g,E as y,M as h,T as w}from"./index-e0b9e885.js";const j={class:"list-widget is-straight"},T={class:"widget-head"},b=m("h3",{class:"dark-inverted"},"Tasks of Today",-1),I={class:"inner-list"},x={href:"#"},C=i({__name:"ProjectTodayTasks",props:{projectId:{default:""},straight:{type:Boolean},workerId:{}},setup(i){const C=i,D=o(),V=r(),B=t();l(),c();const F=n({tasks:[{id:"1a82e8dc-496e-45be-a5f6-1b202abdadc8",workers:[{id:"fe8b01ec-1f56-4ecd-886e-31defc4a96a1",username:"Others",email:"others@gmail.com",role:"worker",avatar:"https://res.cloudinary.com/dcqeugna3/image/upload/v1/media/static/users_avatars/logo1_pfu1ge"}],color:"#2c3e50",title:"Fifth title",description:"Description",startDate:"2024-10-02",endDate:"2024-10-16",status:"active",is_active:!1,updated:"2024-10-05T05:29:28.348706Z",created:"2024-10-05T05:29:28.348727Z",costCode:"Code",quantity:"Quanityt",unit:"Unit",fileName:null,note:null,priority:"Medium",project:"e7f43430-677e-4b23-b420-fca1fe4310f2"}],stats:{active:1,completed:1,pending:1}}),N=async e=>{try{const a=await V.get(`/api/task/today-tasks/?project=${C.projectId}`);F.value=a.data.map((e=>({...e,workers:e.workers.map((e=>({...e,picture:e?.avatar,initials:e?.username?.slice(0,2).toUpperCase()})))}))),e&&B.green("Tasks list Refreshed"),console.log("data",F.value)}catch(a){console.log(a)}};return d((()=>{C.workerId?(async e=>{try{const a=await V.get(`/api/task/worker-today/${C.workerId}/`);F.value=a.data,e&&B.green("Tasks list Refreshed"),console.log("data",F.value)}catch(a){console.log(a)}})(!1):"worker"==D.user.role?(async e=>{try{const a=await V.get(`/api/task/worker-today/${D.user.id}/`);F.value=a.data,e&&B.green("Tasks list Refreshed"),console.log("data",F.value)}catch(a){console.log(a)}})(!1):N(!1)})),(t,r)=>{const o=s,i=a,l=e;return u(),p("div",j,[m("div",T,[b,m("i",{onClick:r[0]||(r[0]=e=>N(!0)),style:{color:"var(--primary)"},class:"fas fa-redo cu-pointer","aria-hidden":"true"})]),m("div",I,[m("div",null,[(u(!0),p(k,null,v(_(F).tasks,(e=>(u(),f(l,{key:e.id,center:"",lighter:"",class:"inner-list-item"},{icon:g((()=>[y(o,{icon:"lucide:star","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:g((()=>[e.workers.length?(u(),f(i,{key:0,avatars:e.workers,size:"small",limit:3},null,8,["avatars"])):h("",!0)])),default:g((()=>[m("a",x,w(e.title),1),m("span",null,w(e.status),1)])),_:2},1024)))),128))])])])}}});export{C as _};
