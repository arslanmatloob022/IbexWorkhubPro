import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-3ecffda5.js";import{_ as s}from"./AddUpdateUser.vue_vue_type_script_setup_true_lang-7d93cd2b.js";import{_ as a}from"./VIconWrap.vue_vue_type_style_index_0_lang-687d98ef.js";import{_ as l}from"./VPeity.vue_vue_type_script_setup_true_lang-f3de5348.js";import{_ as t}from"./VControl-f243fcbb.js";import{_ as i}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-01748119.js";import{_ as r}from"./SweetAlert.vue_vue_type_style_index_0_lang-8516e936.js";import{_ as n}from"./VDropdown.vue_vue_type_style_index_0_lang-90530ad7.js";import{_ as o}from"./VAvatar.vue_vue_type_style_index_0_lang-9a36d6a0.js";import{_ as d}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-46f6a9d7.js";import{e as u,r as c,Z as p,o as v,y as m,z as _,C as f,A as h,B as y,S as g,T as w,l as k,j as b,O as j,Q as x,R as A,aR as C,H as U,P as V,E as S,J as O,v as M,G as P,M as I}from"./index-57283339.js";import{_ as E,a as H}from"./search-6-dark-6c9b195a.js";import{u as N}from"./useAPI-3d1b2833.js";import{u as D}from"./useNotyf-989627b5.js";import{u as R}from"./userSession-a3dc25ef.js";import{u as z}from"./viewWrapper-4b9321e5.js";import"./VModal.vue_vue_type_style_index_0_lang-885acfb1.js";import"./VIcon.vue_vue_type_script_setup_true_lang-2759a2a7.js";import"./VField.vue_vue_type_script_setup_true_lang-a5be644c.js";import"./VLabel.vue_vue_type_script_setup_true_lang-e37ada5c.js";import"./useVFieldContext-f1f52f20.js";import"./VInput.vue_vue_type_script_setup_true_lang-bb0429cf.js";import"./VRadio.vue_vue_type_style_index_0_lang-e17725d3.js";import"./VFilePond.vue_vue_type_script_lang-72587b4a.js";import"./useSupportElement-321a3cde.js";import"./via-placeholder-24645670.js";import"./useDropdown-ceff0f57.js";import"./notyf-47ab21bb.js";import"./useThemeColors-73dd3c67.js";const T={class:"tile-grid-toolbar"},$={class:"buttons"},L=f("span",{class:"icon"},[f("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),B=f("span",null,"Admin",-1),F={class:"tile-grid tile-grid-v1"},W=f("img",{class:"light-image",src:E,alt:""},null,-1),G=f("img",{class:"dark-image",src:H,alt:""},null,-1),J={class:"tile-grid-item"},Q={class:"tile-grid-item-inner"},Y={class:"meta"},Z={class:"dark-inverted"},q=["onClick"],K=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-lock"})],-1),f("div",{class:"meta"},[f("span",null,"Edit"),f("span",null,"Edit user")],-1)],X=["onClick"],ee=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-share"})],-1),f("div",{class:"meta"},[f("span",null,"Password"),f("span",null,"Change password")],-1)],se=f("hr",{class:"dropdown-divider"},null,-1),ae=["onClick"],le=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),f("div",{class:"meta"},[f("span",null,"Delete"),f("span",null,"Delete from list")],-1)],te=u({__name:"AdminsList",setup(a){const l=N(),i=D();R();const u=c(""),M=c(!1),P=c(""),I=c(""),E=c(!1),H=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),z=c([{username:"",email:"",password:"",status:"",role:"admin",phoneNumber:"",avatar:null}]),te=p((()=>u.value?z.value.filter((e=>e.username.match(new RegExp(u.value,"i"))||e.email.match(new RegExp(u.value,"i")))):z.value));c(0);const ie=async()=>{try{M.value=!0;const e=await l.get("/api/users/by-role/admin/",{});z.value=e.data}catch(e){console.log(e)}finally{M.value=!1}},re=async()=>{try{M.value=!0;await l.delete(`/api/users/${I.value}/`,{});ie(),i.success("Admin deleted successfully")}catch(e){console.error(e),i.error("Error while deleting")}finally{H.value.isSweetAlertOpen=!1,M.value=!1}},ne=(e="")=>{P.value=e,E.value=!E.value},oe=c(!1);return v((()=>{ie()})),(a,l)=>{const i=t,c=S,p=d,v=o,N=n,D=s,R=r;return m(),_("div",null,[f("div",T,[h(i,{icon:"feather:search"},{default:y((()=>[g(f("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>b(u)?u.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,k(u)]])])),_:1}),f("div",$,[h(c,{onClick:l[1]||(l[1]=e=>ne()),color:"primary",raised:""},{default:y((()=>[L,B])),_:1})])]),f("div",F,[h(p,{class:j([0!==k(te).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:y((()=>[W,G])),_:1},8,["class"]),h(C,{name:"list",tag:"div",class:"columns is-multiline"},{default:y((()=>[(m(!0),_(x,null,A(k(te),((e,s)=>(m(),_("div",{key:s,class:"column is-6"},[f("div",J,[f("div",Q,[h(v,{picture:e.avatar,color:"primary",initials:e.username,size:"medium"},null,8,["picture","initials"]),f("div",Y,[f("span",Z,O(e.username),1),f("span",null,O(e.role),1)]),h(N,{icon:"feather:more-vertical",spaced:"",right:""},{content:y((()=>[f("a",{onClick:s=>ne(e.id),role:"menuitem",class:"dropdown-item is-media"},K,8,q),f("a",{onClick:s=>{return a=e.id,P.value=a,void(oe.value=!0);var a},role:"menuitem",class:"dropdown-item is-media"},ee,8,X),se,f("a",{onClick:s=>{return a=e,I.value=a.id,void(H.value={title:`Delete ${a.username}?`,subtitle:"After deleting this admin you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var a},role:"menuitem",class:"dropdown-item is-media"},le,8,ae)])),_:2},1024)])])])))),128))])),_:1})]),k(E)?(m(),U(D,{key:0,"is-modal-open":k(E),"user-role":"admin","user-id":k(P),"onUpdate:closeModalHandler":l[2]||(l[2]=e=>E.value=!1),"onUpdate:actionUpdateHandler":ie},null,8,["is-modal-open","user-id"])):V("",!0),k(H).isSweetAlertOpen?(m(),U(R,{key:1,loading:k(M),isSweetAlertOpen:k(H).isSweetAlertOpen,title:k(H).title,subtitle:k(H).subtitle,btntext:k(H).btntext,onConfirm:re,onCancel:()=>k(H).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):V("",!0),k(oe)?(m(),U(e,{key:2,isModalOpen:k(oe),userId:k(P),"onUpdate:closeModalHandler":l[3]||(l[3]=e=>oe.value=!1),"onUpdate:actionUpdateHandler":ie},null,8,["isModalOpen","userId"])):V("",!0)])}}}),ie={class:"profile-wrapper"},re={class:"profile-header has-text-centered"},ne={class:"title is-4 is-narrow is-thin"},oe={class:"light-text"},de={class:"profile-stats"},ue={class:"profile-stat"},ce={style:{"text-transform":"capitalize"}},pe=f("div",{class:"separator"},null,-1),ve={class:"profile-stat"},me=f("i",{"aria-hidden":"true",class:"lnil lnil-phone"},null,-1),_e=f("div",{class:"separator"},null,-1),fe={class:"socials"},he=[f("i",{"aria-hidden":"true",class:"fas fa-edit"},null,-1)],ye=[f("i",{"aria-hidden":"true",class:"fas fa-lock"},null,-1)],ge={class:"profile-body"},we={class:"columns"},ke={key:0,class:"column is-8"},be={class:"column is-4"},je={class:"profile-card"},xe={class:"profile-card-section no-padding"},Ae={class:"section-title"},Ce=f("h4",null,"Notifications",-1),Ue=f("div",{class:"section-content"},[f("div",{class:"network-notifications"},[f("h3",{class:"dark-inverted"},"Notify Your Network?"),f("p",null," Enable or disable this setting to manage if your network should be notified when you make changes to your profile. ")])],-1),Ve={class:"profile-card"},Se={class:"profile-card-section no-padding"},Oe={class:"section-title"},Me=f("h4",null,"Tools",-1),Pe=f("i",{"aria-hidden":"true",class:"lnil lnil-pencil"},null,-1),Ie=f("a",{class:"action-link",tabindex:"0"},"View All",-1),Ee={class:"section-content"},He={class:"tools-wrapper"},Ne={class:"tools-item"},De=f("div",{class:"meta"},[f("span",{class:"dark-inverted"},"Adobe Illustrator"),f("span",null,"Advanced level")],-1),Re={class:"tools-item"},ze=f("div",{class:"meta"},[f("span",{class:"dark-inverted"},"Jira Software"),f("span",null,"Intermediate level")],-1),Te={class:"tools-item"},$e=f("div",{class:"meta"},[f("span",{class:"dark-inverted"},"MS Office"),f("span",null,"Expert level")],-1),Le=u({__name:"profile",setup(r){z().setPageTitle("Profile"),M((()=>({title:"Profile Ibex-User  "}))),P();const n=N(),d=R(),u=c(!1),p=c(!1),g=c(""),w=c(!1),b=c({username:"",email:"",password:"",is_sentMail:!1,status:"",role:"",phoneNumber:"",avatar:"",supplier:""}),j=async()=>{try{w.value=!0;const e=await n.get(`/api/users/${d.user.id}`);b.value=e.data}catch(e){console.error(e)}finally{w.value=!1}};return v((()=>{console.log("user data ",d.user),d.user.id&&j()})),(r,n)=>{const c=o,v=te,w=i,x=t,A=I("RouterLink"),C=l,S=a,M=s,P=e;return m(),_("div",ie,[f("div",re,[h(c,{size:"xl",picture:k(b).avatar},null,8,["picture"]),f("h3",ne,O(k(b)?.username),1),f("p",oe,O(k(b)?.email?k(b)?.email:""),1),f("div",de,[f("div",ue,[f("span",ce,O(k(b)?.role),1)]),pe,f("div",ve,[me,f("span",null,O(k(b)?.phoneNumber),1)]),_e,f("div",fe,[f("a",{onClick:n[0]||(n[0]=e=>u.value=!k(u))},he),f("a",{onClick:n[1]||(n[1]=e=>{return s=k(b).id,g.value=s,void(p.value=!0);var s})},ye)])])]),f("div",ge,[f("div",we,["admin"==k(d).user.role?(m(),_("div",ke,[h(v,{class:"mb-3"})])):V("",!0),f("div",be,[f("div",je,[f("div",xe,[f("div",Ae,[Ce,h(x,null,{default:y((()=>[h(w,{color:"success",checked:""})])),_:1})]),Ue])]),f("div",Ve,[f("div",Se,[f("div",Oe,[Me,h(A,{to:"/sidebar/layouts/profile-edit-skills"},{default:y((()=>[Pe])),_:1}),Ie]),f("div",Ee,[f("div",He,[f("div",Ne,[h(S,{picture:"/images/icons/stacks/illustrator.svg"},{after:y((()=>[h(C,{type:"pie",values:[80,100],fill:["var(--primary)","transparent"],height:50,"inner-radius":22,width:50},null,8,["fill"])])),_:1}),De]),f("div",Re,[h(S,{picture:"/demo/photos/brands/jira.svg"},{after:y((()=>[h(C,{type:"pie",values:[60,100],fill:["var(--primary)","transparent"],height:50,"inner-radius":22,width:50},null,8,["fill"])])),_:1}),ze]),f("div",Te,[h(S,{picture:"/demo/photos/brands/office.svg"},{after:y((()=>[h(C,{type:"pie",values:[95,100],fill:["var(--primary)","transparent"],height:50,"inner-radius":22,width:50},null,8,["fill"])])),_:1}),$e])])])])])])])]),k(u)?(m(),U(M,{key:0,"is-modal-open":k(u),"user-role":"admin","user-id":k(d).user.id,"onUpdate:closeModalHandler":n[2]||(n[2]=e=>u.value=!1),"onUpdate:actionUpdateHandler":j},null,8,["is-modal-open","user-id"])):V("",!0),k(p)?(m(),U(P,{key:1,isModalOpen:k(p),userId:k(g),"onUpdate:closeModalHandler":n[3]||(n[3]=e=>p.value=!1),"onUpdate:actionUpdateHandler":j},null,8,["isModalOpen","userId"])):V("",!0)])}}});export{Le as default};
