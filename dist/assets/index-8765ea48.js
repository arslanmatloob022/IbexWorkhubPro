import{_ as e}from"./CreateProposalTasksModal-e0e133e8.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-21232c0d.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-b475cd6d.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-cf731f4c.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-6fb7ec6b.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-2521c434.js";import{_ as o}from"./VAvatar.vue_vue_type_style_index_0_lang-c742e2c7.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-84d4b6ac.js";import{f as u,x as d,r as c,$ as p,o as m,av as _,C as v,D as f,m as y,O as g,E as h,F as b,G as j,L as x,X as k,k as w,K as C,N as A,V,W as I,aS as S,P as O,al as P,U as L,J as U,A as M}from"./index-9d1761ec.js";import{_ as $}from"./VDropdown.vue_vue_type_style_index_0_lang-e3ee3afe.js";import{_ as T}from"./VField.vue_vue_type_script_setup_true_lang-e7e94423.js";import{_ as D}from"./VControl-7658cde0.js";import{_ as N}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-0a582abe.js";import{_ as J,a as E}from"./search-4-dark-2b5b440c.js";import{u as F}from"./useAPI-7dc89270.js";import{u as H}from"./useNotyf-7cfa643e.js";import{d as z,i as R}from"./useSupportElement-3bbd4e28.js";import{g as W}from"./estimatesScripts-b7a9049a.js";import{h as q}from"./moment-bad41465.js";import{u as B}from"./viewWrapper-2107ee12.js";import{b as X}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-1d70d862.js";import"./VRadio.vue_vue_type_style_index_0_lang-4d93f55c.js";import"./VLabel.vue_vue_type_script_setup_true_lang-cf013e72.js";import"./useVFieldContext-7590458b.js";import"./UnitAddUpdateModal.vue_vue_type_script_setup_true_lang-5d02017f.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-203bb979.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-948d8d11.js";import"./VInput.vue_vue_type_script_setup_true_lang-20588470.js";import"./VOption.vue_vue_type_style_index_0_lang-6cd17242.js";import"./costItems-19f47483.js";import"./VIconButton-adc7f3da.js";import"./company-0c834f5e.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-f82c349b.js";import"./ProposalViewModal.vue_vue_type_style_index_0_lang-10e47d81.js";import"./V-Snack.vue_vue_type_style_index_0_lang-36991db0.js";import"./VIcon.vue_vue_type_script_setup_true_lang-2f79bb8d.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-5e4fcc63.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-eb5da951.js";import"./ckeditor-8c619e06.js";import"./vue.runtime.esm-bundler-caa19ba0.js";import"./ckeditor-a73d89b7.js";import"./VFlex.vue_vue_type_style_index_0_lang-845448a6.js";import"./useDropdown-7c3e434c.js";import"./VPlaceloadWrap-98f522da.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-0e8c6397.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-6c215298.js";import"./notyf-ecd56a69.js";import"./useThemeColors-4090408a.js";const Z={key:1},G={class:"list-flex-toolbar columns is-multiline"},K={class:"column is-6 is-flex"},Q=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Ascending"),h("span",null,"Alphabetical Ascending Sorting")],-1)],Y=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Descending"),h("span",null,"Alphabetical Descending Sorting")],-1)],ee=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Most Recent"),h("span",null,"Sort most recently created")],-1)],ae=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Most Old"),h("span",null,"Sort the most oldest")],-1)],le={class:"column is-6"},te={class:"page-content-inner"},se={class:"flex-list-wrapper flex-list-v1"},ne=h("div",{class:"columns is-multiline"},[h("div",{class:"column is-3"}),h("div",{class:"column is-6 justify-right"})],-1),ie=h("img",{class:"light-image",src:J,alt:""},null,-1),oe=h("img",{class:"dark-image",src:E,alt:""},null,-1),re={key:1},ue={class:"item-name dark-inverted show-text-200"},de={class:"item-meta show-text-200"},ce={key:0,class:"show-text-200"},pe={class:"item-name"},me={class:"item-meta"},_e={key:1,class:"show-text-200"},ve={class:"item-name dark-inverted"},fe={class:"item-meta"},ye={class:"item-name dark-inverted"},ge={class:"item-meta"},he=["onClick"],be=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),h("div",{class:"meta"},[h("span",null,"View"),h("span",null,"View user details")],-1)],je=["onClick"],xe=[h("div",{class:"icon"},[h("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Add Proposals"),h("span",null,"Add new proposal to lead")],-1)],ke=["onClick"],we=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Update Lead Info")],-1)],Ce=h("hr",{class:"dropdown-divider"},null,-1),Ae=["onClick"],Ve=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),h("div",{class:"meta"},[h("span",null,"Delete"),h("span",null,"Delete Proposal Permanently")],-1)],Ie=u({__name:"JobsList",setup(u){const M=d(),J=H(),E=F(),B=c(),X=c("all"),Ie=c({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),Se=c(42),Oe=c("");c("");const Pe=c(!1),Le=c(!1);c([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]);const Ue={username:{label:"Job",grow:!0},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},Me=c([]),$e=async()=>{try{B.value=!0;const e=await E.get("/api/project/project-jobs/");Ie.value=e.data.filter((e=>"completed"==e.status)),Me.value=e.data.filter((e=>"completed"!=e.status))}catch(e){J.error(` ${e}, Lead`)}finally{B.value=!1}},Te=c(""),De=e=>{Te.value=e,Le.value=!0},Ne=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Je=async()=>{try{B.value=!0;await E.delete(`/api/project/${Te.value}/`);J.success("Proposal delete successfully"),$e()}catch(e){J.error(` ${e}, Proposal`),J.error("Something went wrong please try later")}finally{B.value=!1,Ne.value.isSweetAlertOpen=!1}},Ee=p((()=>{if(Oe.value){const e=new RegExp(Oe.value,"i");return Me.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return Me.value})),Fe=c(""),He=(e="")=>{Fe.value=e},ze=p((()=>{let e=Ee.value||[];return Fe.value?[...e].sort(((e,a)=>"ascending"===Fe.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===Fe.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===Fe.value?q(a.created).valueOf()-q(e.created).valueOf():"old"===Fe.value?q(e.created).valueOf()-q(a.created).valueOf():0)):Ee.value}));return p((()=>{if(Oe.value){const e=new RegExp(Oe.value,"i");return Ie.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return Ie.value})),m((()=>{$e()})),(u,d)=>{const c=N,p=D,m=T,J=$,E=O,F=P,H=r,q=o,Ie=n,Me=i,Ee=s,Fe=t,Re=l,We=a,qe=e,Be=_("tooltip");return v(),f("div",null,[y(B)?(v(),g(c,{key:0})):(v(),f("div",Z,[h("div",G,[h("div",K,[b(m,null,{default:j((()=>[b(p,{icon:"feather:search"},{default:j((()=>[x(h("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>w(Oe)?Oe.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,y(Oe)]])])),_:1})])),_:1}),b(J,{title:"Apply sorting",modern:"",spaced:""},{content:j((()=>[h("a",{onClick:d[1]||(d[1]=e=>He("ascending")),class:"dropdown-item is-media"},Q),h("a",{onClick:d[2]||(d[2]=e=>He("descending")),class:"dropdown-item is-media is-active"},Y),h("a",{onClick:d[3]||(d[3]=e=>He("new")),class:"dropdown-item is-media"},ee),h("a",{onClick:d[4]||(d[4]=e=>He("old")),class:"dropdown-item is-media"},ae)])),_:1})]),h("div",le,[b(F,null,{default:j((()=>[b(E,{onClick:d[5]||(d[5]=e=>De("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:j((()=>[C(" Lead Opportunity ")])),_:1})])),_:1})])]),h("div",te,[h("div",se,[ne,y(ze)?.length?A("",!0):(v(),g(H,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:j((()=>[ie,oe])),_:1})),"all"===y(X)?(v(),f("div",re,[y(ze)?.length?(v(),g(Ee,{key:0,data:y(ze),columns:Ue,compact:""},{body:j((()=>[b(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(v(!0),f(V,null,I(y(ze),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[b(Ie,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[b(q,{picture:e.image?e.image:"/IbexImages/home-icon.png",squared:"",size:"medium"},null,8,["picture"]),h("div",null,[h("span",ue,L(e.title?e.title:"N/A"),1),h("span",de,[h("span",null,L(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),b(Ie,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[e.clientInfo?(v(),f("div",ce,[h("span",pe,L(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),h("span",me,[h("span",null,L(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):A("",!0),e.contractor_info?(v(),f("div",_e,[h("span",ve,L(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),h("span",fe,[h("span",null,L(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):A("",!0)])),_:2},1032,["onClick"]),b(Ie,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[h("div",null,[h("span",ye,L(y(z)(e.created)),1),h("span",ge,[h("span",null,"At:"+L(y(R)(e.created)),1)])])])),_:2},1032,["onClick"]),b(Ie,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:j((()=>[b(Me,{class:"capitalized",color:y(W)[e.status],rounded:""},{default:j((()=>[C(L(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),b(Ie,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[h("div",null,[(v(!0),f(V,null,I(e.managers_list,(e=>x((v(),g(q,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Be,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),b(Ie,{column:{align:"end"}},{default:j((()=>[b(J,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:j((({close:a})=>[h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)}},be,8,he),h("a",{role:"menuitem",onClick:a=>{return l=e.id,Te.value=l,void(Pe.value=!Pe.value);var l},class:"dropdown-item is-media"},xe,8,je),h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>De(e.id)),["prevent"])},we,8,ke),Ce,h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>{return l=e.id,Te.value=l,void(Ne.value={title:"Delete Job?",subtitle:"Are you sure to delete this Job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var l}),["prevent"])},Ve,8,Ae)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):A("",!0),y(ze)?.length>5?(v(),g(Fe,{key:1,"current-page":y(Se),"onUpdate:currentPage":d[6]||(d[6]=e=>w(Se)?Se.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):A("",!0)])):A("",!0)])])])),y(Le)?(v(),g(Re,{key:2,addUpdateLeadModal:y(Le),leadId:y(Te),"onUpdate:modalHandler":d[7]||(d[7]=e=>Le.value=!1),"onUpdate:OnSuccess":$e},null,8,["addUpdateLeadModal","leadId"])):A("",!0),y(Ne).isSweetAlertOpen?(v(),g(We,{key:3,isSweetAlertOpen:y(Ne).isSweetAlertOpen,title:y(Ne).title,subtitle:y(Ne).subtitle,loading:y(B),btntext:y(Ne).btntext,onConfirm:Je,onCancel:()=>y(Ne).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):A("",!0),y(Pe)?(v(),g(qe,{key:4,"lead-proposal-modal":y(Pe),"lead-id":y(Te),"onUpdate:modalHandler":d[8]||(d[8]=e=>Pe.value=!1),"onUpdate:OnSuccess":$e},null,8,["lead-proposal-modal","lead-id"])):A("",!0)])}}}),Se=u({__name:"index",setup:e=>(B().setPageTitle("All Jobs"),M({title:"All Jobs - Ibex"}),(e,a)=>{const l=Ie;return v(),f("div",null,[b(l)])})});"function"==typeof X&&X(Se);export{Se as default};
