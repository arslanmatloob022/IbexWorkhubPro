import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-46b7b901.js";import{_ as a}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-ce205902.js";import{_ as l}from"./AddUpdateUser-c7e8287c.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-4ab60d1d.js";import{_ as t}from"./VDropdown.vue_vue_type_style_index_0_lang-8db773c0.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-2c85544e.js";import{_ as n}from"./VIcon.vue_vue_type_script_setup_true_lang-519a2be1.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-e9763bc9.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-71bad0fb.js";import{e as u,r as d,v as p,Z as c,o as _,B as m,C as v,l as g,N as y,D as f,E as h,F as w,K as j,W as b,j as k,T as x,J as C,H as V,U as M,V as A,aR as P,M as O,O as S,z as U,al as D}from"./index-bd02fd97.js";import{_ as E}from"./VField.vue_vue_type_script_setup_true_lang-0ce07994.js";import{_ as I}from"./VControl-14860196.js";import{_ as F}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-e7df3645.js";import{_ as T,a as W}from"./search-1-dark-61831a90.js";import{u as H}from"./useAPI-5821d9f5.js";import{u as N}from"./useNotyf-a8509ab6.js";import{u as R}from"./viewWrapper-284539d4.js";import{b as B}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-aa53c266.js";import"./VInput.vue_vue_type_script_setup_true_lang-2bfe3d94.js";import"./useVFieldContext-e4707cce.js";import"./VLabel.vue_vue_type_script_setup_true_lang-6c90dfca.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-23d85378.js";import"./VFilePond.vue_vue_type_script_lang-613c5698.js";import"./useSupportElement-d56c346c.js";import"./userSession-87a2ed4a.js";import"./VFlex.vue_vue_type_style_index_0_lang-b2ffba14.js";import"./useDropdown-dffdc673.js";import"./VPlaceloadWrap-7ad2476e.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-2ff6a2b6.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-294ab3b5.js";import"./notyf-cbe6ec1b.js";import"./useThemeColors-951640ed.js";const z={key:1},J={class:"list-view-toolbar"},K={class:"list-info"},L={key:0},Y={key:1},Z={class:"buttons"},$={class:"page-content-inner"},G={class:"list-view list-view-v1"},X=f("img",{class:"light-image",src:T,alt:""},null,-1),q=f("img",{class:"dark-image",src:W,alt:""},null,-1),Q={class:"list-view-inner"},ee={class:"list-view-item-inner"},ae=["onClick"],le={class:"meta-right"},se={class:"tags"},te={class:"stats"},ie={class:"stat"},ne=f("span",null,"Email notify",-1),re=f("div",{class:"separator"},null,-1),oe=["onClick"],ue=f("span",null,"Status",-1),de=["onClick"],pe=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-user-alt"})],-1),f("div",{class:"meta"},[f("span",null,"Profile"),f("span",null,"View profile")],-1)],ce=["onClick"],_e=[f("div",{class:"icon"},[f("i",{class:"lnil lnil-pencil","aria-hidden":"true"})],-1),f("div",{class:"meta"},[f("span",null,"Edit"),f("span",null,"Edit Manager info")],-1)],me=["onClick"],ve=[f("div",{class:"icon"},[f("i",{class:"lnil lnil-code","aria-hidden":"true"})],-1),f("div",{class:"meta"},[f("span",null,"Password"),f("span",null,"Change user password")],-1)],ge=f("hr",{class:"dropdown-divider"},null,-1),ye=["onClick"],fe=[f("div",{class:"icon"},[f("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),f("div",{class:"meta"},[f("span",null,"Delete"),f("span",null,"Delete this user permanently")],-1)],he=u({__name:"IbexManagers",setup(u){const U=N(),D=H(),T=d(!1),W=d(!1),R=d(""),B=d(""),he=d(""),we=d(!1),je=p(),be=d([{id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:null,is_active:!0,phoneNumber:"",username:"",last_name:"",is_sentMail:!1}]),ke=d({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),xe=async()=>{try{W.value=!0;const e=await D.get("/api/users/by-role/manager/",{});be.value=e.data,T.value=!1}catch(e){console.log(e)}finally{W.value=!1}},Ce=(e="")=>{R.value=e,T.value=!T.value},Ve=c((()=>he.value?be.value.filter((e=>e.username.match(new RegExp(he.value,"i"))||e.email.match(new RegExp(he.value,"i")))):be.value)),Me=async()=>{try{W.value=!0;await D.delete(`/api/users/${R.value}/`);xe(),ke.value.isSweetAlertOpen=!1,U.success("Manager deleted successfully")}catch(e){console.log(e)}finally{W.value=!1}},Ae=e=>{je.push(`/sidebar/dashboard/managers/${e}`)};return _((()=>{xe()})),(u,d)=>{const p=F,c=I,_=E,U=S,D=o,H=r,N=n,je=i,be=t,Pe=s,Oe=l,Se=a,Ue=e;return m(),v(M,null,[g(W)?(m(),y(p,{key:0})):(m(),v("div",z,[f("div",J,[h(_,null,{default:w((()=>[h(c,{icon:"feather:search"},{default:w((()=>[j(f("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>k(he)?he.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,g(he)]])])),_:1})])),_:1}),f("div",K,[1===g(Ve).length?(m(),v("span",L,"1 record found")):(m(),v("span",Y,x(g(Ve).length)+" records found",1))]),f("div",Z,[h(U,{onClick:d[1]||(d[1]=e=>Ce()),color:"primary",icon:"fas fa-plus",elevated:""},{default:w((()=>[C(" Manager ")])),_:1})])]),f("div",$,[f("div",G,[h(D,{class:V([0!==g(Ve).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[X,q])),_:1},8,["class"]),f("div",Q,[h(P,{name:"list-complete",tag:"div"},{default:w((()=>[(m(!0),v(M,null,A(g(Ve),((e,a)=>(m(),v("div",{key:a,class:"list-view-item"},[f("div",ee,[h(H,{onClick:a=>Ae(e.id),picture:e.avatar,size:"large"},null,8,["onClick","picture"]),f("div",{onClick:a=>Ae(e.id),class:"meta-left"},[f("h3",null,x(e.username)+" "+x(e.last_name?e.last_name:""),1),f("span",null,[f("span",null,[h(N,{icon:"lucide:mail"}),C(" "+x(e.email),1)])])],8,ae),f("div",le,[f("div",se,[h(je,{label:e.role.replace(/^\w/,(e=>e.toUpperCase())),color:"warning",rounded:"",elevated:""},null,8,["label"])]),f("div",te,[f("div",ie,[f("span",null,x(e.is_sentMail?"On ":"Off"),1),ne]),re,f("div",{onClick:a=>Ce(e.id),class:"stat"},[f("span",null,x(e.is_active?"Active":"In-Active"),1),ue],8,oe)]),h(be,{icon:"feather:more-vertical",spaced:"",right:""},{content:w((()=>[f("a",{role:"menuitem",onClick:a=>Ae(e.id),class:"dropdown-item is-media"},pe,8,de),f("a",{role:"menuitem",onClick:()=>{T.value=!0,R.value=e.id},class:"dropdown-item is-media"},_e,8,ce),f("a",{onClick:a=>{return l=e.id,B.value=l,void(we.value=!0);var l},role:"menuitem",class:"dropdown-item is-media"},ve,8,me),ge,f("a",{role:"menuitem",onClick:a=>{return l=e.id,R.value=l,void(ke.value={title:"Are you sure?",subtitle:"You will not be able to recover this Manager again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l},class:"dropdown-item is-media"},fe,8,ye)])),_:2},1024)])])])))),128))])),_:1})])]),g(Ve).length>5?(m(),y(Pe,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):O("",!0)])])),g(T)?(m(),y(Oe,{key:2,"is-modal-open":g(T),"user-role":"manager","user-id":g(R),"onUpdate:closeModalHandler":d[2]||(d[2]=e=>T.value=!1),"onUpdate:actionUpdateHandler":xe},null,8,["is-modal-open","user-id"])):O("",!0),g(we)?(m(),y(Se,{key:3,isModalOpen:g(we),userId:g(B),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>we.value=!1)},null,8,["isModalOpen","userId"])):O("",!0),g(ke).isSweetAlertOpen?(m(),y(Ue,{key:4,isSweetAlertOpen:g(ke).isSweetAlertOpen,title:g(ke).title,loading:!1,subtitle:g(ke).subtitle,btntext:g(ke).btntext,onConfirm:Me,onCancel:()=>g(ke).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):O("",!0)],64)}}}),we={class:"page-content-inner"},je=f("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),be=u({__name:"index",setup:e=>(R().setPageTitle("Managers"),U({title:"Managers"}),(e,a)=>{const l=he;return m(),v("div",we,[(m(),y(D,{to:"[data-teleport-bg]"},[je])),h(l,{class:"has-navbar-spacing"})])})});"function"==typeof B&&B(be);export{be as default};
