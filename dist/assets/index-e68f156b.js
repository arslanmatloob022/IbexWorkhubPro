import{_ as e}from"./CreateProposalTasksModal-2a002abe.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-850b3f73.js";import{_ as t}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-8acbb8e7.js";import{_ as l}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-9d435fa3.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-e854eff7.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-e97790b2.js";import{_ as o}from"./VAvatar.vue_vue_type_style_index_0_lang-1d1ef4db.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-98f52303.js";import{f as u,x as c,r as d,$ as m,o as p,av as _,C as v,D as f,m as y,O as g,E as b,F as h,G as j,L as x,X as k,k as w,I as C,K as A,N as I,V,W as S,aS as O,P,al as L,U,J as D,A as M}from"./index-ebe3ec19.js";import{_ as $}from"./VDropdown.vue_vue_type_style_index_0_lang-2036237f.js";import{_ as T}from"./VField.vue_vue_type_script_setup_true_lang-cfbb2fbb.js";import{_ as N}from"./VControl-0c6a1405.js";import{_ as J}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-c9a092b7.js";import{_ as E,a as F}from"./search-4-dark-2b5b440c.js";import{u as z}from"./useAPI-51d690ef.js";import{u as H}from"./useNotyf-0d335162.js";import{d as R,i as W}from"./useSupportElement-b9e097c1.js";import{g as B}from"./estimatesScripts-99b5099c.js";import{h as X}from"./moment-bad41465.js";import{u as q}from"./viewWrapper-84a185a0.js";import{b as Z}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-d69e7fb7.js";import"./VRadio.vue_vue_type_style_index_0_lang-55d250f9.js";import"./VLabel.vue_vue_type_script_setup_true_lang-415eec9b.js";import"./useVFieldContext-84670641.js";import"./UnitAddUpdateModal.vue_vue_type_script_setup_true_lang-9b910b6e.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-112e363c.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-61c18609.js";import"./VInput.vue_vue_type_script_setup_true_lang-2a5c8b19.js";import"./VOption.vue_vue_type_style_index_0_lang-997d4a12.js";import"./costItems-4a0a49ec.js";import"./VIconButton-d6a77bb0.js";import"./company-c1631a54.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-8f1c56ba.js";import"./ProposalViewModal.vue_vue_type_style_index_0_lang-6fd1ef4f.js";import"./V-Snack.vue_vue_type_style_index_0_lang-98c33411.js";import"./VIcon.vue_vue_type_script_setup_true_lang-3514b5f9.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-2e1a22f4.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-5d0481c8.js";import"./ckeditor-c46087fc.js";import"./vue.runtime.esm-bundler-880ac416.js";import"./ckeditor-902b1d58.js";import"./VFlex.vue_vue_type_style_index_0_lang-540672db.js";import"./useDropdown-1e43146f.js";import"./VPlaceloadWrap-ab730e4e.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-13365529.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-94f313f6.js";import"./notyf-c99f0315.js";import"./useThemeColors-70b40381.js";const G={key:1},K={class:"list-flex-toolbar columns is-multiline"},Q={class:"column is-6 is-flex"},Y=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Ascending"),b("span",null,"Alphabetical Ascending Sorting")],-1)],ee=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Descending"),b("span",null,"Alphabetical Descending Sorting")],-1)],ae=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Most Recent"),b("span",null,"Sort most recently created")],-1)],te=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Most Old"),b("span",null,"Sort the most oldest")],-1)],le={class:"column is-6 is-flex is-justify-content-end"},se={class:"page-content-inner"},ne={class:"flex-list-wrapper flex-list-v1"},ie=b("div",{class:"columns is-multiline"},[b("div",{class:"column is-3"}),b("div",{class:"column is-6 justify-right"})],-1),oe=b("img",{class:"light-image",src:E,alt:""},null,-1),re=b("img",{class:"dark-image",src:F,alt:""},null,-1),ue={key:1},ce={class:"item-name dark-inverted is-flex show-text-300"},de={key:0},me={class:"item-meta show-text-200"},pe={key:0,class:"show-text-200"},_e={class:"item-name"},ve={class:"item-meta"},fe={key:1,class:"show-text-200"},ye={class:"item-name dark-inverted"},ge={class:"item-meta"},be={class:"item-name dark-inverted"},he={class:"item-meta"},je=["onClick"],xe=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),b("div",{class:"meta"},[b("span",null,"View"),b("span",null,"View user details")],-1)],ke=["onClick"],we=[b("div",{class:"icon"},[b("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Add Proposals"),b("span",null,"Add new proposal to lead")],-1)],Ce=["onClick"],Ae=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),b("div",{class:"meta"},[b("span",null,"Edit"),b("span",null,"Update Lead Info")],-1)],Ie=b("hr",{class:"dropdown-divider"},null,-1),Ve=["onClick"],Se=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),b("div",{class:"meta"},[b("span",null,"Delete"),b("span",null,"Delete Proposal Permanently")],-1)],Oe=u({__name:"JobsList",setup(u){const M=c(),E=H(),F=z(),q=d(),Z=d("all"),Oe=d({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),Pe=d(42),Le=d("");d("");const Ue=d(!1),De=d(!1);d([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]);const Me={username:{label:"Job",grow:"lg"},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},$e=d([{id:"",sales_people_info:[{id:"",username:"",last_name:"",email:"",role:"",avatar:null}],clientInfo:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},created_by_info:null,contractor_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:null},managers_list:[{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],title:"",description:"",image:"",color:"",startDate:"",endDate:"",status:"",is_active:!1,address:"",wifiAvaliabe:!1,parkingAvaliable:!1,property_features:null,created:"",uploaded_files:[],leadStatus:"",current_state:"",city:"",state:"",zip_code:"",confidence:"",sale_date:null,estimated_from:null,estimated_to:null,tags:[],sources:"",project_type:null,notes:"",attach_mail:null,latitude:31.5440886,longitude:74.3839007,client:"",contractor:"",created_by:null,managers:[""],sales_people:[]}]),Te=async()=>{try{q.value=!0;const e=await F.get("/api/project/project-jobs/");Oe.value=e.data.filter((e=>"completed"==e.status)),$e.value=e.data.filter((e=>"completed"!=e.status))}catch(e){E.error(` ${e}, Lead`)}finally{q.value=!1}},Ne=d(""),Je=e=>{Ne.value=e,De.value=!0},Ee=d({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Fe=async()=>{try{q.value=!0;await F.delete(`/api/project/${Ne.value}/`);E.success("Proposal delete successfully"),Te()}catch(e){E.error(` ${e}, Proposal`),E.error("Something went wrong please try later")}finally{q.value=!1,Ee.value.isSweetAlertOpen=!1}},ze=m((()=>{if(Le.value){const e=new RegExp(Le.value,"i");return $e.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return $e.value})),He=d(""),Re=(e="")=>{He.value=e},We=m((()=>{let e=ze.value||[];return He.value?[...e].sort(((e,a)=>"ascending"===He.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===He.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===He.value?X(a.created).valueOf()-X(e.created).valueOf():"old"===He.value?X(e.created).valueOf()-X(a.created).valueOf():0)):ze.value}));return m((()=>{if(Le.value){const e=new RegExp(Le.value,"i");return Oe.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return Oe.value})),p((()=>{Te()})),(u,c)=>{const d=J,m=N,p=T,E=$,F=P,z=L,H=r,X=o,Oe=n,$e=i,ze=s,Be=l,Xe=t,qe=a,Ze=e,Ge=_("tooltip");return v(),f("div",null,[y(q)?(v(),g(d,{key:0})):(v(),f("div",G,[b("div",K,[b("div",Q,[h(p,null,{default:j((()=>[h(m,{icon:"feather:search"},{default:j((()=>[x(b("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>w(Le)?Le.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,y(Le)]])])),_:1})])),_:1}),h(E,{title:"Apply sorting",modern:"",spaced:""},{content:j((()=>[b("a",{onClick:c[1]||(c[1]=e=>Re("ascending")),class:C(["dropdown-item is-media",{"is-active":"ascending"===y(He)}])},Y,2),b("a",{onClick:c[2]||(c[2]=e=>Re("descending")),class:C(["dropdown-item is-media",{"is-active":"descending"===y(He)}])},ee,2),b("a",{onClick:c[3]||(c[3]=e=>Re("new")),class:C(["dropdown-item is-media",{"is-active":"new"===y(He)}])},ae,2),b("a",{onClick:c[4]||(c[4]=e=>Re("old")),class:C(["dropdown-item is-media",{"is-active":"old"===y(He)}])},te,2)])),_:1})]),b("div",le,[h(z,null,{default:j((()=>[h(F,{onClick:c[5]||(c[5]=e=>Je("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:j((()=>[A(" Lead Opportunity ")])),_:1})])),_:1})])]),b("div",se,[b("div",ne,[ie,y(We)?.length?I("",!0):(v(),g(H,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:j((()=>[oe,re])),_:1})),"all"===y(Z)?(v(),f("div",ue,[y(We)?.length?(v(),g(ze,{key:0,data:y(We),columns:Me,compact:""},{body:j((()=>[h(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(v(!0),f(V,null,S(y(We),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[h(Oe,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:"lg"}},{default:j((()=>[h(X,{picture:e.image?e.image:"/IbexImages/home-icon.png",squared:"",size:"medium"},null,8,["picture"]),b("div",null,[b("span",ce,[A(U(e.contractor_info?.username?e.contractor_info?.username:"")+" "+U(e.contractor_info?.last_name?e.contractor_info?.last_name:"")+" "+U(e.clientInfo?.username?e.clientInfo?.username:"")+" ",1),e.contractor_info?.username||e.clientInfo?.username?(v(),f("span",de,"- ")):I("",!0),A(" "+U(e.title?e.title:"N/A"),1)]),b("span",me,[b("span",null,U(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),h(Oe,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[e.clientInfo?(v(),f("div",pe,[b("span",_e,U(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),b("span",ve,[b("span",null,U(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):I("",!0),e.contractor_info?(v(),f("div",fe,[b("span",ye,U(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),b("span",ge,[b("span",null,U(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):I("",!0)])),_:2},1032,["onClick"]),h(Oe,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[b("div",null,[b("span",be,U(y(R)(e.created)),1),b("span",he,[b("span",null,"At:"+U(y(W)(e.created)),1)])])])),_:2},1032,["onClick"]),h(Oe,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:j((()=>[h($e,{class:"capitalized",color:y(B)[e.status],rounded:""},{default:j((()=>[A(U(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),h(Oe,{onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[b("div",null,[(v(!0),f(V,null,S(e.managers_list,(e=>x((v(),g(X,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Ge,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),h(Oe,{column:{align:"end"}},{default:j((()=>[h(E,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:j((({close:a})=>[b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(M).push(`/sidebar/dashboard/jobs/${e.id}`)}},xe,8,je),b("a",{role:"menuitem",onClick:a=>{return t=e.id,Ne.value=t,void(Ue.value=!Ue.value);var t},class:"dropdown-item is-media"},we,8,ke),b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:D((a=>Je(e.id)),["prevent"])},Ae,8,Ce),Ie,b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:D((a=>{return t=e.id,Ne.value=t,void(Ee.value={title:"Delete Job?",subtitle:"Are you sure to delete this Job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var t}),["prevent"])},Se,8,Ve)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):I("",!0),y(We)?.length>5?(v(),g(Be,{key:1,"current-page":y(Pe),"onUpdate:currentPage":c[6]||(c[6]=e=>w(Pe)?Pe.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):I("",!0)])):I("",!0)])])])),y(De)?(v(),g(Xe,{key:2,addUpdateLeadModal:y(De),leadId:y(Ne),"onUpdate:modalHandler":c[7]||(c[7]=e=>De.value=!1),"onUpdate:OnSuccess":Te},null,8,["addUpdateLeadModal","leadId"])):I("",!0),y(Ee).isSweetAlertOpen?(v(),g(qe,{key:3,isSweetAlertOpen:y(Ee).isSweetAlertOpen,title:y(Ee).title,subtitle:y(Ee).subtitle,loading:y(q),btntext:y(Ee).btntext,onConfirm:Fe,onCancel:()=>y(Ee).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):I("",!0),y(Ue)?(v(),g(Ze,{key:4,"lead-proposal-modal":y(Ue),"lead-id":y(Ne),"onUpdate:modalHandler":c[8]||(c[8]=e=>Ue.value=!1),"onUpdate:OnSuccess":Te},null,8,["lead-proposal-modal","lead-id"])):I("",!0)])}}}),Pe=u({__name:"index",setup:e=>(q().setPageTitle("All Jobs"),M({title:"All Jobs - Ibex"}),(e,a)=>{const t=Oe;return v(),f("div",null,[h(t)])})});"function"==typeof Z&&Z(Pe);export{Pe as default};
