import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-1971ebbf.js";import{_ as l}from"./VModal.vue_vue_type_style_index_0_lang-8e502dcc.js";import{_ as a}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-9f81b2fb.js";import{e as s,s as t,r as i,o as n,B as o,N as d,F as u,D as c,E as r,K as m,l as p,W as v,J as f,I as _,a4 as y,O as b,b as g,_ as h,A as V,C,ab as x,aE as k,M as j,a0 as w,aF as S,j as U,T as A,H as N,G as I,U as T,V as P,v as L,Z as M,aR as O,ak as H,z as D}from"./index-19e874b3.js";import{_ as E}from"./VControl-b7530ae4.js";import{_ as R}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-f6ccdc85.js";import{u as F,a as $}from"./useAPI-fc7260cf.js";import{u as z}from"./useNotyf-38a1015d.js";import{a as W,e as B,g as K}from"./useSupportElement-983a206a.js";import{u as q}from"./userSession-7178c796.js";import{_ as G}from"./VField.vue_vue_type_script_setup_true_lang-58aa16af.js";import{_ as Z,a as J}from"./VOption.vue_vue_type_style_index_0_lang-0809857d.js";import{C as Y}from"./ckeditor-b58f10b2.js";import{C as X}from"./ckeditor-bbf35011.js";import{_ as Q}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-9bf70671.js";import{_ as ee,c as le}from"./VFlexTable.vue_vue_type_style_index_0_lang-2e7ba3d4.js";import{_ as ae}from"./VDropdown.vue_vue_type_style_index_0_lang-9a2f242b.js";import{_ as se}from"./VTag.vue_vue_type_style_index_0_lang-c3afce36.js";import{_ as te}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-927e5b18.js";import{_ as ie}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-30f94eb9.js";import{_ as ne,a as oe}from"./search-4-dark-2b5b440c.js";import{u as de}from"./viewWrapper-83ac6e29.js";import{b as ue}from"./route-block-83d24a4e.js";import"./VAvatar.vue_vue_type_style_index_0_lang-df29e64b.js";import"./proposalItems-141eb10a.js";import"./WorksheetItems.vue_vue_type_script_setup_true_lang-5c2887f7.js";import"./VInput.vue_vue_type_script_setup_true_lang-147d20bf.js";import"./useVFieldContext-c7dfba65.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-f9d97063.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-10b6723b.js";import"./VLabel.vue_vue_type_script_setup_true_lang-976bc5bb.js";import"./VRadio.vue_vue_type_style_index_0_lang-698820db.js";import"./VCollapse.vue_vue_type_style_index_0_lang-e3bed849.js";import"./VIcon.vue_vue_type_script_setup_true_lang-3ccd8014.js";import"./notyf-1884a72b.js";import"./useThemeColors-e2d1205b.js";import"./vue.runtime.esm-bundler-61d99d7f.js";import"./VFlex.vue_vue_type_style_index_0_lang-a1c734bf.js";import"./useDropdown-9d2e0490.js";import"./VPlaceloadWrap-9df1c8e6.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-dab716cf.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-bfa11335.js";const ce={class:"modal-form columns is-multiline"},re={class:"column is-12 m-0"},me=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Contact Information")],-1),pe={class:"field column is-6 mb-0"},ve=c("label",null,"First Name *",-1),fe={class:"control"},_e={class:"field column is-6 mb-0"},ye=c("label",null,"Last Name ",-1),be={class:"control"},ge={class:"field column is-6 mb-0"},he=c("label",null,"Display Name * ",-1),Ve={class:"control"},Ce={class:"field column is-6 mb-0"},xe=c("label",null,"Primary Email ",-1),ke={class:"control"},je={class:"field column is-12 mb-0"},we=c("label",null,"Street Address ",-1),Se={class:"control"},Ue={class:"field column is-6 mb-0"},Ae=c("label",null,"City: ",-1),Ne={class:"control"},Ie={class:"field column is-3 mb-0"},Te=c("label",null,"State: ",-1),Pe={class:"control"},Le={class:"field column is-3 mb-0"},Me=c("label",null,"Zip Code: ",-1),Oe={class:"control"},He={class:"field column is-6 mb-0"},De=c("label",null,"Phone ",-1),Ee={class:"control"},Re={class:"field column is-6 mb-0"},Fe=c("label",null,"Cell Phone ",-1),$e={class:"control"},ze=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Security & Login")],-1),We={class:"field column is-3 mb-0"},Be={class:"field column is-3 mb-0"},Ke=s({__name:"AddUpdateContactModal",props:{addUpdateContactModal:{type:Boolean},userId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:a}){const s=e;t(),q();const g=z(),h=F(),V=i(!1),C=i({}),x=i({firstName:"",lastName:"",displayName:"",address:"",city:"",state:"",zipCode:"",phone:"",cellPhone:"",email:"",latitude:"",longitude:"",loginAllowed:!1,inviteLogin:!1}),k=async()=>{try{V.value=!0;const e=W(C.value,["profileImageURL"]);await h.post("/v3/api/worker/",e);j(),g.dismissAll(),g.success("New worker added, New Worker")}catch(e){g.error(` ${e}, New Worker`)}finally{V.value=!1}},j=()=>{a("update:modalHandler",!1)},w=async()=>{try{const e=await $.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${C.value.postCode}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);"OK"===e.data.status?(x.value.address=e.data.results[0].formatted_address,x.value.latitude=e.data.results[0].geometry.location.lat,x.value.longitude=e.data.results[0].geometry.location.lng,g.success("Address Added")):"ZERO_RESULTS"===e.data.status&&g.error("Invalid Post-Code")}catch(e){g.error("Invalid Post-Code"),console.error(e)}};return n((()=>{})),(e,a)=>{const t=y,i=R,n=E,g=b,h=l;return o(),d(h,{is:"form",open:s.addUpdateContactModal,title:"Contact Person",size:"big",actions:"right",onSubmit:_(k,["prevent"]),onClose:j},{content:u((()=>[c("div",ce,[c("div",re,[r(t,{class:"columns is-multiline"},{default:u((()=>[me,c("div",pe,[ve,c("div",fe,[m(c("input",{type:"text",name:"firstName","onUpdate:modelValue":a[0]||(a[0]=e=>p(x).firstName=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"First Name"},null,512),[[v,p(x).firstName]])])]),c("div",_e,[ye,c("div",be,[m(c("input",{type:"text",name:"lastName","onUpdate:modelValue":a[1]||(a[1]=e=>p(x).lastName=e),class:"input is-primary-focus is-primary-focus",placeholder:"Last Name"},null,512),[[v,p(x).lastName]])])]),c("div",ge,[he,c("div",Ve,[m(c("input",{required:"",type:"text",name:"disName","onUpdate:modelValue":a[2]||(a[2]=e=>p(x).lastName=e),class:"input is-primary-focus is-primary-focus",placeholder:"Display Name"},null,512),[[v,p(x).lastName]])])]),c("div",Ce,[xe,c("div",ke,[m(c("input",{type:"email",name:"email","onUpdate:modelValue":a[3]||(a[3]=e=>p(x).email=e),class:"input is-primary-focus is-primary-focus",placeholder:"Contact email"},null,512),[[v,p(x).email]])])]),c("div",je,[we,c("div",Se,[m(c("input",{required:"",type:"text",name:"address","onUpdate:modelValue":a[4]||(a[4]=e=>p(x).lastName=e),class:"input is-primary-focus is-primary-focus",placeholder:"Street Address"},null,512),[[v,p(x).lastName]])])]),c("div",Ue,[Ae,c("div",Ne,[m(c("input",{type:"text",name:"city","onUpdate:modelValue":a[5]||(a[5]=e=>p(x).city=e),class:"input is-primary-focus is-primary-focus",placeholder:"City"},null,512),[[v,p(x).city]])])]),c("div",Ie,[Te,c("div",Pe,[m(c("input",{type:"text",name:"state","onUpdate:modelValue":a[6]||(a[6]=e=>p(x).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"State"},null,512),[[v,p(x).state]])])]),c("div",Le,[Me,c("div",Oe,[m(c("input",{type:"tel",name:"zipCode",onBlur:w,"onUpdate:modelValue":a[7]||(a[7]=e=>p(x).zipCode=e),class:"input is-primary-focus is-primary-focus",placeholder:"Zip code"},null,544),[[v,p(x).zipCode]])])]),c("div",He,[De,c("div",Ee,[m(c("input",{type:"tel",name:"phone","onUpdate:modelValue":a[8]||(a[8]=e=>p(x).phone=e),class:"input is-primary-focus is-primary-focus",placeholder:"Phone Number"},null,512),[[v,p(x).phone]])])]),c("div",Re,[Fe,c("div",$e,[m(c("input",{type:"tel",name:"phone","onUpdate:modelValue":a[9]||(a[9]=e=>p(x).cellPhone=e),class:"input is-primary-focus is-primary-focus",placeholder:"Cell Phone"},null,512),[[v,p(x).cellPhone]])])])])),_:1}),r(t,{class:"columns is-multiline mt-3"},{default:u((()=>[ze,c("div",We,[r(n,{subcontrol:""},{default:u((()=>[r(i,{thin:"",color:"primary",modelValue:p(x).loginAllowed,"onUpdate:modelValue":a[10]||(a[10]=e=>p(x).loginAllowed=e),label:"Allow login"},null,8,["modelValue"])])),_:1})]),c("div",Be,[r(n,{subcontrol:""},{default:u((()=>[r(i,{thin:"",color:"primary",modelValue:p(x).inviteLogin,"onUpdate:modelValue":a[11]||(a[11]=e=>p(x).inviteLogin=e),label:"Send invite"},null,8,["modelValue"])])),_:1})])])),_:1})])])])),action:u((()=>[r(g,{loading:p(V),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:u((()=>[f("Add Contact")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),qe={class:"modal-form columns is-multiline"},Ge={class:"field column is-full"},Ze=c("label",{class:"label"},"Schedule Mail ",-1),Je=["value"],Ye={class:"column is-full"},Xe={class:"field"},Qe=c("label",{class:"label"},"To ",-1),el={class:"control"},ll={class:"column is-full"},al={class:"field"},sl=c("label",{class:"label"},"Subject ",-1),tl={class:"control"},il={class:"field column is-full mt-5"},nl=c("label",{class:"label"},null,-1),ol=c("i",{class:"feather:mail"},null,-1),dl=s({__name:"GenericEmailSender",props:{mailSenderModal:{type:Boolean},subject:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:a}){const s=e,y=F(),U=i(!1),A=z(),N=i(!1),I=i(""),T=t(),P=()=>{a("update:modalHandler",!1)};I.value="<b> Hi  <br />\nIbex Management <br />\n</b>";const L=i({scheduleAt:"",sendToGroup:[],sendTo:"",subject:"",message:"<b>Hi  <br />\n  Here you can enter your message that you want to deliver your recipient.\n\n  <br />\n  <br />\n  Best Regards:\n  <br />\n\nIbex Team <br />\n</b>"}),M=async()=>{try{N.value=!0;await y.post("",{sendTo:L.value.sendTo,subject:L.value.subject,message:L.value.message,scheduleAt:L.value.scheduleAt});A.success("Email sent to worker successfully"),P()}catch(e){console.log(e)}finally{N.value=!1}},O=g((()=>h((()=>import("./ckeditor-b58f10b2.js").then((e=>e.c))),["assets/ckeditor-b58f10b2.js","assets/index-19e874b3.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-61d99d7f.js"]).then((e=>e.default.component)))),H={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return n((async()=>{T.value=await h((()=>import("./ckeditor-bbf35011.js").then((e=>e.c))),["assets/ckeditor-bbf35011.js","assets/index-19e874b3.js","assets/index-ce8747cd.css"]).then((e=>e.default))})),(e,a)=>{const t=E,i=G,n=V("VDatePicker"),y=S,g=b,h=l;return o(),C("div",null,[r(w,{name:"fade-slow"},{default:u((()=>[r(h,{is:"form",open:s.mailSenderModal,title:"Schedule Email",size:"large",actions:"right",onSubmit:_(M,["prevent"]),onClose:P},{content:u((()=>[c("div",qe,[c("div",Ge,[Ze,r(y,null,{default:u((()=>[r(n,{modelValue:p(L).scheduleAt,"onUpdate:modelValue":a[0]||(a[0]=e=>p(L).scheduleAt=e),mode:"dateTime"},{default:u((({inputValue:e,inputEvents:l})=>[r(i,null,{default:u((()=>[r(t,{icon:"lucide:calendar"},{default:u((()=>[c("input",x({class:"input v-input",type:"text",value:e},k(l,!0)),null,16,Je)])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue"])])),_:1})]),c("div",Ye,[c("div",Xe,[Qe,c("div",el,[m(c("input",{type:"email",required:"",class:"input",placeholder:"Enter Mail","onUpdate:modelValue":a[1]||(a[1]=e=>p(L).sendTo=e)},null,512),[[v,p(L).sendTo]])])])]),c("div",ll,[c("div",al,[sl,c("div",tl,[m(c("input",{type:"text",required:"",class:"input",placeholder:"Enter mail subject","onUpdate:modelValue":a[2]||(a[2]=e=>p(L).subject=e)},null,512),[[v,p(L).subject]])])])]),c("div",il,[nl,p(T)?(o(),d(p(O),{key:0,modelValue:p(L).message,"onUpdate:modelValue":a[3]||(a[3]=e=>p(L).message=e),editor:p(T),config:H},null,8,["modelValue","editor"])):j("",!0)])])])),action:u((()=>[r(g,{onClick:M,color:"primary",loading:p(U),raised:""},{default:u((()=>[ol,f(" Schedule Mail")])),_:1},8,["loading"])])),cancel:u((()=>[r(g,{color:"light",onClick:P,raised:""},{default:u((()=>[f("Close ")])),_:1})])),_:1},8,["open","onSubmit"])])),_:1})])}}}),ul={class:"modal-form columns is-multiline"},cl={class:"column is-12"},rl=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Activity Information")],-1),ml={class:"field column is-6 mb-0"},pl=c("label",null,"Activity Type *",-1),vl={class:"control"},fl={class:"field column is-6 mb-0"},_l=c("label",null,"Color ",-1),yl={class:"control"},bl={class:"field column is-6 mb-0"},gl=c("label",null,"Activity Date * ",-1),hl={class:"control"},Vl={class:"field column is-6 mb-0"},Cl=c("label",null,"Reminder: ",-1),xl={class:"field column is-6 mb-0"},kl=c("label",null,"Start Time ",-1),jl={class:"control"},wl={class:"field column is-6 mb-0"},Sl=c("label",null,"End Time ",-1),Ul={class:"control"},Al={class:"field column is-12 mb-0"},Nl=c("label",null,"Assigned User * ",-1),Il={class:"multiselect-tag is-user"},Tl=["src"],Pl=["onMousedown"],Ll={class:"field column is-12 mb-0"},Ml=c("label",null,"Attendees: ",-1),Ol={class:"control"},Hl=c("div",{class:"column is-12"},[c("h3",{class:"title is-6 mb-2"},"Location")],-1),Dl={class:"field column is-12 mb-0"},El=c("label",null,"Street Address",-1),Rl={class:"control"},Fl={class:"field column is-4 mb-0"},$l=c("label",null,"City ",-1),zl={class:"control"},Wl={class:"field column is-4 mb-0"},Bl=c("label",null,"State ",-1),Kl={class:"control"},ql={class:"field column is-4 mb-0"},Gl=c("label",null,"Zip Code ",-1),Zl={class:"control"},Jl={class:"field column is-12 mb-0"},Yl=c("label",null,"Description ",-1),Xl={class:"control"},Ql=s({__name:"LeadActivityModal",props:{addUpdateContactModal:{type:Boolean},userId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:a}){const s=e;t(),q();const g=z(),h=F(),x=i(!1),k=i({});i("general");const w=i([]),S=[{value:"alice",name:"Alice Carasca",image:"https://media.cssninja.io/content/avatars/7.jpg"},{value:"erik",name:"Erik Kovalsky",image:"/images/avatars/svg/vuero-1.svg"},{value:"melany",name:"melany Wallace",image:"https://media.cssninja.io/content/avatars/25.jpg"},{value:"tara",name:"Tara Svenson",image:"https://media.cssninja.io/content/avatars/13.jpg"},{value:"mary",name:"Mary Lebowski",image:"https://media.cssninja.io/content/avatars/5.jpg"},{value:"irina",name:"Irina Vierbovsky",image:"https://media.cssninja.io/content/avatars/23.jpg"},{value:"jonathan",name:"Jonathan Krugger",image:"https://media.cssninja.io/content/avatars/32.jpg"}],N=i({type:"",color:"",status:"",activityDate:"",startTime:"",endTime:"",reminderTime:"",assignedUser:"",attendees:[],initiatedBy:"",address:"",city:"",state:"",zipCode:"",description:""}),I=async()=>{try{x.value=!0;const e=W(k.value,["profileImageURL"]);await h.post("/v3/api/worker/",e);T(),g.dismissAll(),g.success("New worker added, New Worker")}catch(e){g.error(` ${e}, New Worker`)}finally{x.value=!1}},T=()=>{a("update:modalHandler",!1)};return n((()=>{})),(e,a)=>{const t=Z,i=J,n=E,g=G,h=V("Multiselect"),k=y,P=b,L=l;return o(),d(L,{is:"form",open:s.addUpdateContactModal,title:"Lead Activity",size:"large",actions:"right",onSubmit:_(I,["prevent"]),onClose:T},{content:u((()=>[c("div",ul,[c("div",cl,[r(k,{class:"columns is-multiline"},{default:u((()=>[rl,c("div",ml,[pl,c("div",vl,[m(c("input",{type:"text",name:"firstName","onUpdate:modelValue":a[0]||(a[0]=e=>p(N).type=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Activity Type"},null,512),[[v,p(N).type]])])]),c("div",fl,[_l,c("div",yl,[m(c("input",{type:"text",name:"color","onUpdate:modelValue":a[1]||(a[1]=e=>p(N).color=e),class:"input is-primary-focus is-primary-focus",placeholder:"Color"},null,512),[[v,p(N).color]])])]),c("div",bl,[gl,c("div",hl,[m(c("input",{required:"",type:"date",name:"date","onUpdate:modelValue":a[2]||(a[2]=e=>p(N).activityDate=e),class:"input is-primary-focus is-primary-focus",placeholder:"Activity Date"},null,512),[[v,p(N).activityDate]])])]),c("div",Vl,[Cl,r(g,null,{default:u((()=>[r(n,null,{default:u((()=>[r(i,{modelValue:p(N).reminder,"onUpdate:modelValue":a[3]||(a[3]=e=>p(N).reminder=e)},{default:u((()=>[r(t,{value:""},{default:u((()=>[f(" Select a time ")])),_:1}),r(t,{value:"1"},{default:u((()=>[f(" 1 Hrs ")])),_:1}),r(t,{value:"2"},{default:u((()=>[f(" 2 Hrs ")])),_:1}),r(t,{value:"4"},{default:u((()=>[f(" 4 Hrs ")])),_:1}),r(t,{value:"6"},{default:u((()=>[f(" 6 Hrs ")])),_:1}),r(t,{value:"8"},{default:u((()=>[f(" 8 Hrs ")])),_:1}),r(t,{value:"12"},{default:u((()=>[f("12 Hrs ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),c("div",xl,[kl,c("div",jl,[m(c("input",{type:"time",name:"starttime","onUpdate:modelValue":a[4]||(a[4]=e=>p(N).startTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"Start Time"},null,512),[[v,p(N).startTime]])])]),c("div",wl,[Sl,c("div",Ul,[m(c("input",{required:"",type:"time",name:"endtime","onUpdate:modelValue":a[5]||(a[5]=e=>p(N).endTime=e),class:"input is-primary-focus is-primary-focus",placeholder:"End Time"},null,512),[[v,p(N).endTime]])])]),c("div",Al,[Nl,r(g,{class:"is-image-tags"},{default:u((({id:e})=>[r(n,null,{default:u((()=>[r(h,{modelValue:p(w),"onUpdate:modelValue":a[7]||(a[7]=e=>U(w)?w.value=e:null),attrs:{id:e},mode:"tags",placeholder:"Select a user","track-by":"name",label:"name",search:!0,options:S,"max-height":145},{tag:u((({option:e,remove:l,disabled:s})=>[c("div",Il,[c("img",{src:e.image,alt:""},null,8,Tl),f(" "+A(e.name)+" ",1),s?j("",!0):(o(),C("i",{key:0,role:"button",tabindex:"0",onClick:a[6]||(a[6]=_((()=>{}),["prevent"])),onMousedown:_((a=>l(e)),["prevent","stop"])},null,40,Pl))])])),_:2},1032,["modelValue","attrs"])])),_:2},1024)])),_:1})]),c("div",Ll,[Ml,c("div",Ol,[m(c("input",{type:"text",name:"phone","onUpdate:modelValue":a[8]||(a[8]=e=>p(N).attendees=e),class:"input is-primary-focus is-primary-focus",placeholder:"Activity attendees"},null,512),[[v,p(N).attendees]])])])])),_:1}),r(k,{class:"columns is-multiline mt-3"},{default:u((()=>[Hl,c("div",Dl,[El,c("div",Rl,[m(c("input",{type:"tel",name:"phone","onUpdate:modelValue":a[9]||(a[9]=e=>p(N).address=e),class:"input is-primary-focus is-primary-focus",placeholder:"Street Address"},null,512),[[v,p(N).address]])])]),c("div",Fl,[$l,c("div",zl,[m(c("input",{type:"text",name:"city","onUpdate:modelValue":a[10]||(a[10]=e=>p(N).city=e),class:"input is-primary-focus is-primary-focus",placeholder:"City"},null,512),[[v,p(N).city]])])]),c("div",Wl,[Bl,c("div",Kl,[m(c("input",{type:"text",name:"state","onUpdate:modelValue":a[11]||(a[11]=e=>p(N).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"State"},null,512),[[v,p(N).state]])])]),c("div",ql,[Gl,c("div",Zl,[m(c("input",{type:"text",name:"state","onUpdate:modelValue":a[12]||(a[12]=e=>p(N).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"Zip Code"},null,512),[[v,p(N).state]])])]),c("div",Jl,[Yl,c("div",Xl,[m(c("input",{type:"text",name:"state","onUpdate:modelValue":a[13]||(a[13]=e=>p(N).description=e),class:"input is-primary-focus is-primary-focus",placeholder:"Description"},null,512),[[v,p(N).description]])])])])),_:1})])])])),action:u((()=>[r(P,{loading:p(x),type:"submit",color:"primary",raised:""},{default:u((()=>[f("Create Activity")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),ea={class:"modal-form columns is-multiline",style:{height:"80dvh"}},la={class:"tabs-wrapper column is-12 m-0"},aa={class:"tabs-inner"},sa={class:"tabs is-boxed"},ta=[c("span",null,"General",-1)],ia=[c("span",null,"Activities",-1)],na=[c("span",null,"Proposals",-1)],oa={key:0,class:"column is-12"},da=c("h3",{class:"title is-6 mb-2"},"General Information",-1),ua={class:"columns is-multiline"},ca={class:"field column is-12 mb-0"},ra=c("label",null,"Opportunity Title: *",-1),ma={class:"control"},pa={class:"field column is-3 mb-0"},va=c("label",null,"Zip Code: without slash ",-1),fa={class:"control"},_a={class:"field column is-3 mb-0"},ya=c("label",null,"City: ",-1),ba={class:"control"},ga={class:"field column is-6 mb-0"},ha=c("label",null,"State: ",-1),Va={class:"control"},Ca={class:"field column is-6 mb-0"},xa=c("label",null,"Address: ",-1),ka={class:"control"},ja={class:"field column is-6 mb-0"},wa=c("label",null,"Confidence ",-1),Sa={class:"control"},Ua={class:"field column is-6 mb-0"},Aa=c("label",null,"Projected Sale Date: ",-1),Na={class:"control"},Ia={class:"field column is-6 mb-0"},Ta=c("label",null,"Project Type ",-1),Pa={class:"field column is-12 mb-0"},La={class:"multiselect-single-label"},Ma=["src"],Oa={class:"select-label-text"},Ha=["src"],Da={class:"select-label-text"},Ea={class:"field column is-3 mb-0"},Ra={class:"multiselect-single-label"},Fa=["src"],$a={class:"select-label-text"},za=["src"],Wa={class:"select-label-text"},Ba={class:"field column is-3 mb-0"},Ka={class:"multiselect-single-label"},qa=["src"],Ga={class:"select-label-text"},Za=["src"],Ja={class:"select-label-text"},Ya={class:"field column is-6 mb-0"},Xa={class:"multiselect-single-label"},Qa=["src"],es={class:"select-label-text"},ls=["src"],as={class:"select-label-text"},ss={class:"field column is-3 mb-0"},ts=c("label",null,"Estimated Revenue: ",-1),is={class:"control"},ns={class:"field column is-3 mb-0"},os=c("label",null,"To",-1),ds={class:"control"},us={class:"field column is-6 mb-0"},cs=c("label",null,"Tags ",-1),rs={class:"field column is-6 mb-0"},ms=c("label",null,"Sources ",-1),ps={class:"field column is-6 mb-0"},vs=c("label",null,"Status ",-1),fs=c("h3",{class:"title is-6 mb-2"},"Notes",-1),_s={class:"field column is-12 mb-0"},ys=c("h3",{class:"title is-6 mb-2"},"Attach Documents",-1),bs={class:"field column is-12 mb-0"},gs=c("label",null,"Attachments ",-1),hs=c("div",{class:"file"},[c("label",{class:"file-label"},[c("input",{class:"file-input",type:"file",name:"resume"}),c("span",{class:"file-cta"},[c("span",{class:"file-icon"},[c("i",{class:"fas fa-cloud-upload-alt"})]),c("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),Vs={key:1,class:"column is-12"},Cs=c("div",{class:"column is-12",style:{"text-align":"center"}},[c("h1",{class:"title is-4"},"Connect your clients to their projects"),c("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),xs={class:"column is-6"},ks={class:"column is-6"},js=c("div",{class:"column is-3"},null,-1),ws=c("div",{class:"column is-6 text-align-center"},[c("i",{class:"fas fa-phone-alt fa-5x primary-text text-primary mb-3","aria-hidden":"true"}),c("h1",{class:"title is-4"},"Engage your leads with activities"),c("h1",{class:"title is-6"}," Track calls, emails, and meeting notes for leads in one place. ")],-1),Ss=c("div",{class:"column is-3"},null,-1),Us=c("div",{class:"column is-3"},null,-1),As={class:"column is-6 text-align-center"},Ns=c("div",{class:"column is-3"},null,-1),Is={key:2,class:"column is-12"},Ts={class:"column is-12"},Ps=s({__name:"LeadAddUpdateModal",props:{addUpdateLeadModal:{type:Boolean},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:s}){const g=e;t();const h=q(),x=z(),k=F(),w=i(!1);i({});const S=i(!1);i(!1);const L=i(!1),M=i(!1),O=i([]),H=i([]),D=()=>{s("update:modalHandler",!1)},R=i("general"),B=i([]),K=[{id:1,value:"Lead",label:"Lead"},{id:2,value:"Home",label:"Home"},{id:3,value:"Floor Work",label:"Floor Work"},{id:4,value:"Tile Work",label:"Tile Work"},{id:5,value:"Carpenter",label:"Carpenter"},{id:6,value:"Complete Renovation",label:"Complete Renovation"},{id:7,value:"Painting",label:"Painting"},{id:8,value:"Plumbing",label:"Plumbing"},{id:9,value:"New Construction",label:"New Construction"},{id:10,value:"Carpenter",label:"Carpenter"},{id:11,value:"Carpenter",label:"Carpenter"},{id:12,value:"Carpenter",label:"Carpenter"}];i([]);const Q=[{value:"all",label:"All"},{value:"Contact Form",label:"Contact Form"},{value:"Social Media",label:"Social Media"},{value:"Referral",label:"Referral"},{value:"Company Website",label:"Company Website"}],ee=i({id:"",title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:0,sale_date:"",sales_people:[],tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attachments:[],attach_mail:"",created_by:h.user.id,managers:[],client:"",latitude:0,longitude:0}),le=i([{value:"Open",label:"Open"},{value:"OnHold",label:"On Hold"},{value:"Lost",label:"Lost"},{value:"Sold",label:"Sold"}]),ae=i([{value:"Residential",label:"Residential"},{value:"Commercial",label:"Commercial"},{value:"Government",label:"Government"},{value:"Business Site",label:"Business Site"},{value:"Company/Factories",label:"Company/Factories"}]),se=async()=>{try{w.value=!0,ee.value.tags=JSON.stringify(B.value);const e=W(ee.value,[]);if(g.leadId||ee.value.id){const l=await k.patch(`/api/job/${g.leadId?g.leadId:ee.value.id}/`,e);ee.value=l.data}else{const l=await k.post("/api/job/",e);ee.value=l.data}x.success(`Lead ${g.leadId||ee.value.id?"updated":"created"} successfully`)}catch(e){x.error(` ${e}, Lead`)}finally{w.value=!1}},te=async()=>{try{w.value=!0;const e=await k.get("/api/users/by-role/admin/");e&&e.data?(H.value=e.data.map((e=>({value:e.id,name:`${e.username||""} ${e.lastName||""}`.trim(),icon:e.avatar||""}))),ee.value?.sales_people?.length&&(O.value=ee.value?.sales_people)):x.error("Failed to fetch admin data.")}catch(e){console.error("Error fetching admin data:",e),x.error("An error occurred while fetching admins.")}finally{w.value=!1}},ie=i(""),ne=i([{value:"",name:"",icon:""}]),oe=async()=>{try{w.value=!0;const e=await k.get("/api/users/by-role/contractor/",{});ne.value=e.data.map((e=>({value:e.id,name:`${e.username?e.username:""+e.lastName?e.lastName:""}`,icon:e.avatar}))),ee.value?.client&&(ie.value=ee.value?.client)}catch(e){console.log(e)}finally{w.value=!1}},de=i(""),ue=i([{value:"",name:"",icon:""}]),ce=async()=>{try{w.value=!0;const e=await k.get("/api/users/by-role/client/",{});ue.value=e.data.map((e=>({value:e.id,name:`${e.username?e.username:""+e.lastName?e.lastName:""}`,icon:e.avatar}))),ee.value?.client&&(de.value=ee.value?.client)}catch(e){console.log(e)}finally{w.value=!1}},re=i(""),me=i([{value:"",name:"",icon:""}]),pe=Y.component;i("<h2>Your HTML Content</h2>");const ve={fontFamily:{options:['"Montserrat Variable", sans-serif','"Roboto Flex Variable", sans-serif']}},fe=async()=>{try{const e=await $.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${ee.value.zip_code}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);"OK"===e.data.status?(ee.value.address=e.data.results[0].formatted_address,ee.value.latitude=e.data.results[0].geometry.location.lat,ee.value.longitude=e.data.results[0].geometry.location.lng,ee.value.city=e.data.results[0].address_components[1].long_name,ee.value.state=e.data.results[0].address_components[3].long_name,x.success("Address Added")):"ZERO_RESULTS"===e.data.status&&x.error("Invalid Post-Code")}catch(e){x.error("Invalid Post-Code"),console.error(e)}};return n((async()=>{g.leadId&&(async()=>{try{w.value=!0;const e=await k.get(`/api/job/${g.leadId}/`);ee.value=e.data,B.value=e.data.tags,te(),oe(),ce()}catch(e){x.error(` ${e}, Lead`)}finally{w.value=!1}})(),(async()=>{try{w.value=!0;const e=await k.get("/api/users/by-role/manager/",{});me.value=e.data.map((e=>({value:e.id,name:`${e.username?e.username:""+e.lastName?e.lastName:""}`,icon:e.avatar}))),re.value=ee.value.manager}catch(e){console.log(e)}finally{w.value=!1}})()})),(e,s)=>{const t=V("Slider"),i=E,n=G,h=Z,x=J,k=V("Multiselect"),O=y,F=b,$=dl,z=Ke,W=a,q=l;return o(),d(q,{is:"form",open:g.addUpdateLeadModal,title:"Lead Information",size:"xl",actions:"right",onSubmit:_(se,["prevent"]),onClose:D},{content:u((()=>[c("div",ea,[c("div",la,[c("div",aa,[c("div",sa,[c("ul",null,[c("li",{class:N(["general"===p(R)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[0]||(s[0]=I(_((e=>R.value="general"),["prevent"]),["space"])),onClick:s[1]||(s[1]=e=>R.value="general")},ta,32)],2),c("li",{class:N(["activities"===p(R)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[2]||(s[2]=I(_((e=>R.value="activities"),["prevent"]),["space"])),onClick:s[3]||(s[3]=e=>R.value="activities")},ia,32)],2),c("li",{class:N(["proposals"===p(R)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[4]||(s[4]=I(_((e=>R.value="proposals"),["prevent"]),["space"])),onClick:s[5]||(s[5]=e=>R.value="proposals")},na,32)],2)])])])]),"general"===p(R)?(o(),C("div",oa,[r(O,{class:"columns is-multiline"},{default:u((()=>[da,c("div",ua,[c("div",ca,[ra,c("div",ma,[m(c("input",{type:"text",name:"title","onUpdate:modelValue":s[6]||(s[6]=e=>p(ee).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Opportunity Title"},null,512),[[v,p(ee).title]])])]),c("div",pa,[va,c("div",fa,[m(c("input",{onBlur:fe,type:"text",name:"zipCode","onUpdate:modelValue":s[7]||(s[7]=e=>p(ee).zip_code=e),class:"input is-primary-focus is-primary-focus",placeholder:"Zip code"},null,544),[[v,p(ee).zip_code]])])]),c("div",_a,[ya,c("div",ba,[m(c("input",{type:"text",name:"city","onUpdate:modelValue":s[8]||(s[8]=e=>p(ee).city=e),class:"input is-primary-focus is-primary-focus",placeholder:"City"},null,512),[[v,p(ee).city]])])]),c("div",ga,[ha,c("div",Va,[m(c("input",{type:"text",name:"state","onUpdate:modelValue":s[9]||(s[9]=e=>p(ee).state=e),class:"input is-primary-focus is-primary-focus",placeholder:"State"},null,512),[[v,p(ee).state]])])]),c("div",Ca,[xa,c("div",ka,[m(c("input",{type:"text",name:"address","onUpdate:modelValue":s[10]||(s[10]=e=>p(ee).address=e),class:"input is-primary-focus is-primary-focus",placeholder:"Street Address"},null,512),[[v,p(ee).address]])])]),c("div",ja,[wa,c("div",Sa,[r(n,{class:"has-rounded-tooltip is-slider-info"},{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(t,{id:e,modelValue:p(ee).confidence,"onUpdate:modelValue":s[11]||(s[11]=e=>p(ee).confidence=e)},null,8,["id","modelValue"])])),_:2},1024)])),_:1})])]),c("div",Ua,[Aa,c("div",Na,[m(c("input",{type:"date",name:"saleDate","onUpdate:modelValue":s[12]||(s[12]=e=>p(ee).sale_date=e),class:"input is-primary-focus is-primary-focus",placeholder:"Post code"},null,512),[[v,p(ee).sale_date]])])]),c("div",Ia,[Ta,r(n,null,{default:u((()=>[r(i,null,{default:u((()=>[r(x,{modelValue:p(ee).project_type,"onUpdate:modelValue":s[13]||(s[13]=e=>p(ee).project_type=e)},{default:u((()=>[(o(!0),C(T,null,P(p(ae),((e,l)=>(o(),d(h,{key:l,value:e.value},{default:u((()=>[f(A(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])]),c("div",Pa,[r(n,{class:"is-image-select",label:"Sales people"},{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(k,{modelValue:p(ee).sales_people,"onUpdate:modelValue":s[14]||(s[14]=e=>p(ee).sales_people=e),attrs:{id:e},placeholder:"Sales people",label:"name",track:"value",mode:"tags",options:p(H)},{singlelabel:u((({value:e})=>[c("div",La,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,Ma),c("span",Oa,A(e.name),1)])])),option:u((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,Ha),c("span",Da,A(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",Ea,[r(n,{class:"is-image-select",label:"Contractors"},{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(k,{modelValue:p(ee).client,"onUpdate:modelValue":s[15]||(s[15]=e=>p(ee).client=e),attrs:{id:e},placeholder:"Select a contractor",label:"name",options:p(ne)},{singlelabel:u((({value:e})=>[c("div",Ra,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,Fa),c("span",$a,A(e.name),1)])])),option:u((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,za),c("span",Wa,A(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",Ba,[r(n,{class:"is-image-select",label:"Client"},{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(k,{modelValue:p(ee).client,"onUpdate:modelValue":s[16]||(s[16]=e=>p(ee).client=e),attrs:{id:e},placeholder:"Select a client",label:"name",options:p(ue)},{singlelabel:u((({value:e})=>[c("div",Ka,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,qa),c("span",Ga,A(e.name),1)])])),option:u((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,Za),c("span",Ja,A(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",Ya,[r(n,{class:"is-image-select",label:"Manager"},{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(k,{modelValue:p(ee).managers,"onUpdate:modelValue":s[17]||(s[17]=e=>p(ee).managers=e),attrs:{id:e},placeholder:"Select managers",label:"name",track:"value",mode:"tags",options:p(me)},{singlelabel:u((({value:e})=>[c("div",Xa,[c("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,Qa),c("span",es,A(e.name),1)])])),option:u((({option:e})=>[c("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,ls),c("span",as,A(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),c("div",ss,[ts,c("div",is,[m(c("input",{type:"text",name:"externalID","onUpdate:modelValue":s[18]||(s[18]=e=>p(ee).estimated_from=e),class:"input is-primary-focus is-primary-focus",placeholder:"From"},null,512),[[v,p(ee).estimated_from]])])]),c("div",ns,[os,c("div",ds,[m(c("input",{type:"text",name:"externalID","onUpdate:modelValue":s[19]||(s[19]=e=>p(ee).estimated_to=e),class:"input is-primary-focus is-primary-focus",placeholder:"To"},null,512),[[v,p(ee).estimated_to]])])]),c("div",us,[cs,r(n,null,{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(k,{modelValue:p(B),"onUpdate:modelValue":s[20]||(s[20]=e=>U(B)?B.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:K,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),c("div",rs,[ms,r(n,null,{default:u((({id:e})=>[r(i,null,{default:u((()=>[r(k,{modelValue:p(ee).sources,"onUpdate:modelValue":s[21]||(s[21]=e=>p(ee).sources=e),attrs:{id:e},"create-tag":!0,options:Q,placeholder:"Sources"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),c("div",ps,[vs,r(n,null,{default:u((()=>[r(i,null,{default:u((()=>[r(x,{modelValue:p(ee).status,"onUpdate:modelValue":s[22]||(s[22]=e=>p(ee).status=e)},{default:u((()=>[(o(!0),C(T,null,P(p(le),((e,l)=>(o(),d(h,{key:l,value:e.value},{default:u((()=>[f(A(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])])),_:1}),r(O,{class:"columns is-multiline mt-3"},{default:u((()=>[fs,c("div",_s,[r(p(pe),{modelValue:p(ee).notes,"onUpdate:modelValue":s[23]||(s[23]=e=>p(ee).notes=e),editor:p(X),config:ve},null,8,["modelValue","editor"])])])),_:1}),r(O,{class:"columns is-multiline mt-3"},{default:u((()=>[ys,c("div",bs,[gs,r(n,{grouped:""},{default:u((()=>[r(i,null,{default:u((()=>[hs])),_:1})])),_:1})])])),_:1})])):j("",!0),"activities"===p(R)?(o(),C("div",Vs,[r(O,{class:"columns is-multiline"},{default:u((()=>[Cs,c("div",xs,[r(F,{onClick:s[24]||(s[24]=e=>S.value=!p(S)),color:"info",class:"p-5",icon:"fas fa-plus",fullwidth:"",bold:""},{default:u((()=>[f(" Add New ")])),_:1})]),c("div",ks,[r(F,{class:"p-5",color:"primary",icon:"fas fa-sign-in-alt",fullwidth:"",bold:""},{default:u((()=>[f(" Import existing one ")])),_:1})])])),_:1}),r(O,{class:"columns is-multiline mt-1"},{default:u((()=>[js,ws,Ss,Us,c("div",As,[r(F,{onClick:s[25]||(s[25]=e=>L.value=!p(L)),color:"warning",icon:"fas fa-exchange-alt"},{default:u((()=>[f(" Create Activity ")])),_:1}),r(F,{onClick:s[26]||(s[26]=e=>M.value=!p(M)),color:"success",class:"ml-2",icon:"fas fa-envelope"},{default:u((()=>[f(" Schedule Email ")])),_:1})]),Ns])),_:1}),p(L)?(o(),d(Ql,{key:0,addUpdateContactModal:p(L),"onUpdate:modalHandler":s[27]||(s[27]=e=>L.value=!1)},null,8,["addUpdateContactModal"])):j("",!0),p(M)?(o(),d($,{key:1,mailSenderModal:p(M),"onUpdate:modalHandler":s[28]||(s[28]=e=>M.value=!1)},null,8,["mailSenderModal"])):j("",!0),p(S)?(o(),d(z,{key:2,"add-update-contact-modal":p(S),"onUpdate:modalHandler":s[29]||(s[29]=e=>S.value=!1)},null,8,["add-update-contact-modal"])):j("",!0)])):j("",!0),"proposals"===p(R)?(o(),C("div",Is,[r(O,{class:"columns is-multiline"},{default:u((()=>[c("div",Ts,[r(W,{leadId:(p(ee).id,g.leadId)},null,8,["leadId"])])])),_:1})])):j("",!0)])])),action:u((()=>[r(F,{loading:p(w),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:u((()=>[f("Create Lead")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Ls={onHold:"warning",open:"info",sold:"success",lost:"danger"},Ms={key:1},Os={class:"list-flex-toolbar flex-list-v1"},Hs={class:"page-content-inner"},Ds={class:"flex-list-wrapper flex-list-v1"},Es=c("img",{class:"light-image",src:ne,alt:""},null,-1),Rs=c("img",{class:"dark-image",src:oe,alt:""},null,-1),Fs={class:"show-text-200"},$s={class:"item-name"},zs={class:"item-meta"},Ws=["onClick"],Bs={class:"item-name dark-inverted show-text-200"},Ks={class:"item-meta show-text-200"},qs=["onClick"],Gs={class:"item-name"},Zs={class:"item-meta"},Js=["onClick"],Ys={class:"item-name"},Xs={class:"item-meta"},Qs=["onClick"],et=[c("div",{class:"icon"},[c("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),c("div",{class:"meta"},[c("span",null,"View"),c("span",null,"View user details")],-1)],lt=c("a",{role:"menuitem",class:"dropdown-item is-media"},[c("div",{class:"icon"},[c("i",{"aria-hidden":"true",class:"lnil lnil-briefcase"})]),c("div",{class:"meta"},[c("span",null,"Proposals"),c("span",null,"View proposal of lead")])],-1),at=["onClick"],st=[c("div",{class:"icon"},[c("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),c("div",{class:"meta"},[c("span",null,"Edit"),c("span",null,"Update Lead Info")],-1)],tt=c("hr",{class:"dropdown-divider"},null,-1),it=["onClick"],nt=[c("div",{class:"icon"},[c("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),c("div",{class:"meta"},[c("span",null,"Delete"),c("span",null,"Delete Proposal Permanently")],-1)],ot=s({__name:"LeadsList",setup(l){const a=L(),s=z(),t=F(),y=i(),g=i({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),h=i(42),V=i(!1),x=i([{value:"open",label:"Open"},{value:"sold",label:"Sold"},{value:"lost",label:"Lost"},{value:"onHold",label:"On hold"}]),k={username:{label:"Contractor/Client",grow:!0},location:{label:"Job",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},w=async()=>{try{y.value=!0;const e=await t.get("/api/job/leads/");g.value=e.data}catch(e){s.error(` ${e}, Lead`)}finally{y.value=!1}},S=i(""),N=e=>{S.value=e,V.value=!0},I=i({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),D=async()=>{try{y.value=!0;await t.delete(`/api/job/${S.value}/`);s.success("Proposal delete successfully"),w()}catch(e){s.error(` ${e}, Proposal`),s.error("Something went wrong please try later")}finally{y.value=!1,I.value.isSweetAlertOpen=!1}},R=i(""),$=i(""),W=M((()=>{if(R.value){const e=new RegExp(R.value,"i");return g.value.filter((l=>l.title.match(e)||l.created_at.match(e)))}return g.value}));return n((()=>{w()})),(l,s)=>{const t=ie,i=E,n=G,g=Z,L=J,M=b,F=H,z=te,q=le,Y=se,X=ae,ne=ee,oe=Q,de=Ps,ue=e;return o(),C("div",null,[p(y)?(o(),d(t,{key:0})):(o(),C("div",Ms,[c("div",Os,[r(n,null,{default:u((()=>[r(i,{icon:"feather:search"},{default:u((()=>[m(c("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>U(R)?R.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[v,p(R)]])])),_:1})])),_:1}),r(n,null,{default:u((()=>[r(i,{class:"has-icons-left",icon:"fas fa-globe"},{default:u((()=>[r(L,{modelValue:p($),"onUpdate:modelValue":s[1]||(s[1]=e=>U($)?$.value=e:null)},{default:u((()=>[r(g,{value:""},{default:u((()=>[f(" All ")])),_:1}),(o(!0),C(T,null,P(p(x),(e=>(o(),d(g,{value:e.value},{default:u((()=>[f(A(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1}),r(F,null,{default:u((()=>[r(M,{onClick:s[2]||(s[2]=e=>N("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:u((()=>[f(" Lead Opportunity ")])),_:1})])),_:1})]),c("div",Hs,[c("div",Ds,[p(W).length?j("",!0):(o(),d(z,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:u((()=>[Es,Rs])),_:1})),p(W).length?(o(),d(ne,{key:1,data:p(W),columns:k,compact:""},{body:u((()=>[r(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:u((()=>[(o(!0),C(T,null,P(p(W),(e=>(o(),C("div",{key:e.id,class:"flex-table-item"},[r(q,{onClick:()=>{p(a).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:u((()=>[c("div",Fs,[c("span",$s,A(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),c("span",zs,[c("span",null,A(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])])),_:2},1032,["onClick"]),r(q,{column:{media:!0,grow:!0}},{default:u((()=>[c("div",{onClick:()=>{p(a).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},[c("span",Bs,A(e.title?e.title:"N/A"),1),c("span",Ks,[c("span",null,A(e.address?e.address:"N/A"),1)])],8,Ws)])),_:2},1024),r(q,{column:{media:!0}},{default:u((()=>[c("div",{onClick:()=>{p(a).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},[c("span",Gs,A(p(B)(e.created_at)),1),c("span",Zs,[c("span",null,"At:"+A(p(K)(e.created_at)),1)])],8,qs)])),_:2},1024),r(q,null,{default:u((()=>[r(Y,{color:p(Ls)[e.status],rounded:""},{default:u((()=>[f(A(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1024),r(q,{column:{media:!0}},{default:u((()=>[c("div",{onClick:()=>{p(a).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},[c("span",Ys,A(e.manager_info?.username?e.manager_info?.username:"N/A"),1),c("span",Xs,[c("span",null,A(e.manager_info?.email?e.manager_info?.email:"N/A"),1)])],8,Js)])),_:2},1024),r(q,{column:{align:"end"}},{default:u((()=>[r(X,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:u((({close:l})=>[c("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{p(a).push(`/sidebar/dashboard/jobs/${e.id}`)}},et,8,Qs),lt,c("a",{role:"menuitem",class:"dropdown-item is-media",onClick:_((l=>N(e.id)),["prevent"])},st,8,at),tt,c("a",{role:"menuitem",class:"dropdown-item is-media",onClick:_((l=>{return a=e.id,S.value=a,void(I.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a}),["prevent"])},nt,8,it)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):j("",!0),p(W).length>5?(o(),d(oe,{key:2,"current-page":p(h),"onUpdate:currentPage":s[3]||(s[3]=e=>U(h)?h.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):j("",!0)])])])),p(V)?(o(),d(de,{key:2,addUpdateLeadModal:p(V),leadId:p(S),"onUpdate:modalHandler":s[4]||(s[4]=e=>V.value=!1),"onUpdate:OnSuccess":w},null,8,["addUpdateLeadModal","leadId"])):j("",!0),p(I).isSweetAlertOpen?(o(),d(ue,{key:3,isSweetAlertOpen:p(I).isSweetAlertOpen,title:p(I).title,subtitle:p(I).subtitle,loading:p(y),btntext:p(I).btntext,onConfirm:D,onCancel:()=>p(I).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):j("",!0)])}}}),dt=s({__name:"index",setup:e=>(de().setPageTitle("Leads"),D({title:"Leads - Ibex"}),(e,l)=>{const a=ot;return o(),C("div",null,[r(a)])})});"function"==typeof ue&&ue(dt);export{dt as default};
