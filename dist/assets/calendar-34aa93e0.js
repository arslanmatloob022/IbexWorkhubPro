import{F as e}from"./FullCalendar-4e277735.js";import{i as t}from"./index-f52ed8ce.js";import{u as a}from"./useAPI-5fb4dc64.js";import{u as s}from"./useNotyf-a5ec9275.js";import{u as r}from"./userSession-854a934c.js";import{e as o,x as i,r as l,o as n,B as c,C as u,D as d,E as p,F as m,T as v,l as f,z as g}from"./index-d9ebeddb.js";import{u as w}from"./viewWrapper-f3adf3e7.js";import"./notyf-5a2528b8.js";import"./useThemeColors-3c638543.js";const y={class:"lifestyle-dashboard lifestyle-dashboard-v3"},h={class:"columns is-multiline"},j={class:"column is-12"},k={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},b={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},x={style:{"margin-top":"8px","padding-right":"10px"}},T=o({__name:"WorkerCalendar",setup(o){const g=r(),w=s(),T=a();i();const D=l([]),C=l({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});l(!1),l("all"),l("");const _=l(!1),W=l([]),A=l([]),F=l([]),S=l([]),I=l({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),M=l({plugins:[t],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),P=l({});return n((async()=>{await(async()=>{try{_.value=!0;const e=await T.get(`/api/users/${g.user.id}`);C.value=e.data,_.value=!1}catch(e){console.log(e)}})(),await(async()=>{try{const e=await T.get(`/api/task/${g.user.id}/worker-tasks/`);W.value=e.data,console.log("worker tasks",W.value)}catch(e){W.value=[]}})(),(async(e=!1)=>{try{const t=await T.get(`/api/task/worker-today/${g.user.id}/`);P.value=t.data,e&&w.green("Tasks list Refreshed")}catch(t){console.log(t)}})(),D.value=W.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:I[e.status],status:e.status}))),S.value=W.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:I[e.project.status]}))),A.value=S.value,F.value=D.value,M.value={...M.value,resources:A.value,events:F.value},console.log("tasks",M.value.events,"resources",M.value.resources)})),(t,a)=>(c(),u("div",y,[d("div",h,[d("div",j,[p(f(e),{options:f(M)},{eventContent:m((e=>[d("div",k,[d("p",b,v(e.event.title),1),d("div",null,[d("p",x,v(new Date(e.event.start).toDateString())+" to "+v(new Date(e.event.end).toDateString()),1)])])])),_:1},8,["options"])])])]))}}),D={class:""},C=o({__name:"calendar",setup:e=>(w().setPageTitle("Calendar View"),g({title:"Tasks Calendar- Ibex"}),(e,t)=>{const a=T;return c(),u("div",D,[p(a)])})});export{C as default};
