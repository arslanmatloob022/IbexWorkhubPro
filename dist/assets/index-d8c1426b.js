import{_ as e}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{A as t}from"./vue3-apexcharts.common-763b2026.js";import{u as i}from"./useThemeColors-9cb1eefd.js";import{e as s,r as n,s as a,o as l,v as r,x as o,F as d,l as c,O as h,A as g,R as u,Y as p,y as m,B as v,H as f,z as y,aB as b,w as E,K as S,P as w,Q as R,j as D,S as x,I as C,C as T,V as M,W as k,J as _}from"./index-a3511ab8.js";import{_ as P}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{_ as I,a as j}from"./projects-dark-4a371d8a.js";import{b as H,u as O}from"./useAPI-2f913358.js";import{u as N}from"./useNotyf-bee6672a.js";import{_ as L}from"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import{_ as A}from"./VCollapse.vue_vue_type_style_index_0_lang-fbcf2e46.js";import{_ as V}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-9ab5aaf2.js";import{_ as z}from"./VInput.vue_vue_type_script_setup_true_lang-17074c81.js";import{_ as W}from"./VLabel.vue_vue_type_script_setup_true_lang-dfa6e2cd.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as Y}from"./VControl-f6dba4dd.js";import{_ as X}from"./VTags.vue_vue_type_script_setup_true_lang-2b457582.js";import{_ as q}from"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import{u as B}from"./company-ca9a809c.js";import{i as G,F,c as $,E as J,p as Z,a as K,b as Q,d as ee,I as te,e as ie,f as se,g as ne,h as ae,t as le,j as re,k as oe,l as de,m as ce,n as he,o as ge,q as ue,r as pe,s as me,u as ve,v as fe,w as ye,x as be,y as Ee,z as Se,A as we,B as Re,C as De,D as xe,G as Ce,H as Te,J as Me,K as ke,L as _e,M as Pe,N as Ie,O as je,P as He,Q as Oe,R as Ne,W as Le,S as Ae,T as Ve,U as ze,V as We,X as Ue,Y as Ye,Z as Xe,_ as qe,$ as Be,a0 as Ge,a1 as Fe,a2 as $e,a3 as Je,a4 as Ze,a5 as Ke,a6 as Qe,a7 as et,a8 as tt,a9 as it,aa as st,ab as nt,ac as at,ad as lt,ae as rt,af as ot,ag as dt,ah as ct,ai as ht,aj as gt,ak as ut,al as pt,am as mt,an as vt,ao as ft,ap as yt,aq as bt,ar as Et,as as St,at as wt,au as Rt,av as Dt,aw as xt,ax as Ct,ay as Tt,az as Mt,aA as kt,aB as _t,aC as Pt,aD as It,aE as jt,aF as Ht}from"./index-405e4760.js";const Ot={styke:"width:100%; height:100%"},Nt=s({__name:"TimestampMap",props:{activities:{},timestamp:{}},emits:["update:modalHandler"],setup(e,{emit:s}){const g=e,u=i(),p=n(!1),m=a({series:[{name:"Profiles",data:g.activities}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[u.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:g.timestamp},tooltip:{y:{formatter:function(e){return e}}}});return l((()=>{p.value=!0})),(e,i)=>(r(),o("div",Ot,[p.value?(r(),d(c(t),{key:0,id:"line-stats-widget-chart2",height:m.value.chart.height,type:m.value.chart.type,series:m.value.series,options:m.value},null,8,["height","type","series","options"])):h("",!0)]))}}),Lt={id:"activity_map2",style:{"border-radius":"20px"}},At=s({__name:"HeatMap",props:{activity:{}},setup(e){const t=e;return l((()=>{(e=>{var t=[],i=51.45047,s=-.34572;e.forEach((e=>{0!=e.latitude&&0!=e.longitude&&(t.push(new google.maps.LatLng(e.latitude,e.longitude)),i=e.latitude,s=e.longitude)}));let n=new google.maps.Map(document.getElementById("activity_map2"),{zoom:16,center:{lat:i,lng:s},mapTypeId:google.maps.MapTypeId.ROADMAP});console.log("mapp",n),new google.maps.visualization.HeatmapLayer({data:t,map:n,radius:20})})(t.activity),console.log("acitivity",t.activity)})),(e,t)=>(r(),o("div",Lt))}}),Vt={key:0,class:"columns is-multiline"},zt={class:"column is-12"},Wt={class:"is-flex"},Ut={class:"content-wrap"},Yt={class:"content-box"},Xt={class:"columns is-multiline"},qt={class:"column is-6"},Bt=g("p",{class:"is-bold mb-1"},"Book on",-1),Gt={class:"card is-flex p-3"},Ft={class:"box-text ml-2"},$t={class:"meta-text"},Jt={class:"ml-1 mb-3 is-bold"},Zt={class:"ml-1 mb-1 is-bold"},Kt={class:"ml-1",style:{width:"80px"}},Qt=g("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1),ei=g("div",{id:"myMapOn",style:{height:"140px",width:"160px","border-radius":"10px"}},null,-1),ti={class:"column is-6"},ii=g("p",{class:"is-bold mb-1"},"Book off",-1),si={class:"card is-flex p-3"},ni={class:"box-text ml-2"},ai={class:"meta-text"},li={class:"ml-1 mb-3 is-bold"},ri={class:"ml-1"},oi={class:"ml-1",style:{width:"80px"}},di=g("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1),ci=g("div",{id:"myMapOff",style:{height:"140px",width:"160px","border-radius":"10px"}},null,-1),hi={class:"column is-12 mt-3"},gi={class:"column is-12"},ui={key:1},pi=g("img",{class:"light-image is-larger",src:I,alt:""},null,-1),mi=g("img",{class:"dark-image is-larger",src:j,alt:""},null,-1),vi=s({__name:"timeSheetComponent",props:{timesheetId:{}},emits:["update:modalHandler"],setup(t,{emit:s}){const c=t,E=i();H();const S=n(!1);N();const w=O(),R=n(!1),D=n([]),x=n([]),C=n({timeSheetID:0,device_data:[{acceX:0,acceY:0,acceZ:0,accuracy_level:0,activity_type:"",activity_value:0,altitude:0,app_version:"",battery_level:0,climb:0,deviceUserName:"",device_type:"",direction:0,gyroX:0,gyroY:0,gyroZ:0,heartRate:0,horizontal:0,id:0,latitude:0,longitude:0,movement_type:"",readingsTimeDelta:0,speed:0,timeStamp:"",vertical:0,timeSheetID:0,worker_id:0}],created_at:"",worker_id:0,bookOnTime:"",bookOffTime:"",bookOnLat:"",bookOnLong:"",bookOnLocation:"",bookOffLat:"",bookOffLong:"",bookOffLocation:"",hoursWorked:"",bookOnImageURL:"",bookOffImageURL:"",isBookOnImageVerified:!1,isBookOffImageVerified:!1}),T=a({series:[{name:"Profiles",data:[]}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[E.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}}});let M={};return l((()=>{((e,t)=>{let i={lat:e,lng:length};M=new google.maps.Map(document.getElementById("myMapOn"),{center:i,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:t},map:M,title:"Worker"})})(51.4497984,-.3464489),((e,t)=>{let i={lat:e,lng:length};M=new google.maps.Map(document.getElementById("myMapOff"),{center:i,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:t},map:M,title:"Worker"})})(51.4497984,-.3464489),(async()=>{try{S.value=!0;const e=await w.get(`v3/api/timesheet/details/${c.timesheetId}/`,{});C.value=e.data;let t=[],i=[];e.data.device_data.forEach((e=>{t.push(parseFloat(e.activity_value).toFixed(3)),i.push(e.timeStamp&&e.timeStamp.length>20?e.timeStamp.slice(11,16):e.timeStamp)})),T.value.series[0].data=t,T.value.xaxis.categories=i,D.value=t,x.value=i,R.value=!0}catch(e){console.log(e)}finally{S.value=!1}})()})),(t,i)=>{const s=b,n=P,a=At,l=Nt,c=e;return C.value.device_data.length?(r(),o("div",Vt,[g("div",zt,[g("div",Wt,[S.value?(r(),d(s,{key:0,height:"80px",width:"50%",class:"mx-2"})):h("",!0),S.value?(r(),d(s,{key:1,height:"80px",width:"50%",class:"mx-2 mb-6"})):h("",!0)]),g("div",Ut,[u(g("div",Yt,[g("div",Xt,[g("div",qt,[Bt,g("div",Gt,[m(n,{picture:C.value.bookOnImageURL?C.value.bookOnImageURL:"",squared:"",size:"medium"},null,8,["picture"]),g("div",Ft,[g("div",$t,[g("p",Jt,[v(" Time: "),g("span",Zt,f(C.value.bookOnTime?C.value.bookOnTime.slice(0,10):"-- --")+" "+f(C.value.bookOnTime?C.value.bookOnTime.slice(11,16):"-- --"),1)]),g("span",Kt,[Qt,v(" "+f(C.value.bookOnLocation?C.value.bookOnLocation:"-----")+" London ",1)])])]),ei])]),g("div",ti,[ii,g("div",si,[m(n,{picture:C.value.bookOffImageURL?C.value.bookOffImageURL:"",squared:"",size:"medium"},null,8,["picture"]),g("div",ni,[g("div",ai,[g("p",li,[v(" Time: "),g("span",ri,f(C.value.bookOffTime?C.value.bookOffTime.slice(0,10):"-- --")+" "+f(C.value.bookOnTime?C.value.bookOnTime.slice(11,16):"-- --"),1)]),g("span",oi,[di,v(" "+f(C.value.bookOffLocation?C.value.bookOffLocation:"-----")+", London ",1)])])]),ci])])])],512),[[p,!S.value]])])]),g("div",hi,[R.value?(r(),d(a,{key:0,style:{height:"280px",width:"100%"},activity:C.value.device_data},null,8,["activity"])):h("",!0),S.value?(r(),d(s,{key:1,height:"280px",width:"100%",class:"mx-2"})):h("",!0)]),g("div",gi,[S.value?(r(),d(s,{key:0,height:"280px",width:"100%",class:"mx-2"})):h("",!0),R.value?(r(),d(l,{key:1,activities:D.value,timestamp:x.value},null,8,["activities","timestamp"])):h("",!0)])])):(r(),o("div",ui,[m(c,{title:"No Activity found.",subtitle:"Looks like worker did not performed any activity within this time-stamp "},{image:y((()=>[pi,mi])),_:1})]))}}}),fi=e=>(M("data-v-39435e54"),e=e(),k(),e),yi={class:"modal-form columns is-multiline",id:"addRota"},bi={class:"field column is-12 mb-0"},Ei={class:"columns is-multiline mb-3"},Si={class:"field is-flex column is-12 mb-0"},wi=fi((()=>g("h1",null,"Selected dates:",-1))),Ri={class:"field column is-6 mb-0"},Di=fi((()=>g("label",null,"Select customer company*",-1))),xi={class:"multiselect-single-label"},Ci=["src"],Ti=["src"],Mi={class:"field column is-6 mb-0"},ki=fi((()=>g("label",null,"Select Site *",-1))),_i={class:"multiselect-single-label"},Pi={class:"field column is-6 mb-0"},Ii=fi((()=>g("label",{class:"mb-2"},"Select Worker *",-1))),ji={class:"multiselect-single-label"},Hi=["src"],Oi=["src"],Ni={class:"field column is-3 mb-0"},Li={class:"field column is-3 mb-0"},Ai={class:"field column is-12 mb-0"},Vi=fi((()=>g("label",null,"Select Job ",-1))),zi={class:"multiselect-single-label"},Wi={class:"column is-12 mb-0"},Ui={key:0,class:"field column is-6 mb-0"},Yi={key:1,class:"field column is-6 mb-0"},Xi={key:2,class:"field column is-6 mb-0"},qi={key:3,class:"field column is-6 mb-0"},Bi={key:4,class:"field column is-12 mb-0",style:{width:"100%",display:"flex","justify-content":"flex-end",float:"right"}},Gi={class:"column is-12"},Fi={class:"p-2 is-flex",style:{position:"relative",width:"100%"}},$i=["onClick"],Ji=[fi((()=>g("i",{class:"iconify close","data-icon":"feather:x-circle","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1)))],Zi=fi((()=>g("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"white",display:"flex","align-items":"center"}},null,-1))),Ki={class:"item-name dark-inverted",style:{"font-weight":"500"}},Qi={style:{"font-weight":"500","margin-bottom":"0px","padding-left":"5px",color:"white"}},es=fi((()=>g("div",{class:"head-info"},[g("div",{class:"head-progress"})],-1))),ts={class:"body-inner-content"},is={class:"field columns is-multiline mb-0"},ss={class:"column is-12"},ns={class:"columns is-multiline space-around"},as={class:"field column is-5 mb-0"},ls=fi((()=>g("label",null,"Charge Rate",-1))),rs={class:"control"},os={class:"field column is-5 mb-0"},ds=fi((()=>g("label",null,"Charge Hours",-1))),cs={class:"control"},hs={class:"field column is-11 mb-0"},gs=fi((()=>g("label",null,"Notes",-1))),us={class:"control"},ps=s({__name:"AddRotaModal",props:{AddRotaModalOpen:{type:Boolean},selectedDatesArray:{},workerId:{}},emits:["update:modalHandler","update:OnSuccess","remove-date"],setup(e,{emit:t}){const i=e,s=B(),a=n(!1),p=N(),b=O(),M=n(!1),k=n(""),_=n(""),P=n("");let I=n([]);const j=n("");n("");const H=n([]),$=n([]);let J=n([]),Z=n([]),K=n([]);n([{id:0,firstName:"",lastName:"",profileImageURL:""}]);const Q=[{title:"Additional Information",content:"Add additional information about rota, rate or worker"}],ee=n([{id:0,jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"08:00:00",endTime:"16:00:00",hourlyRate:0,overtimeRate:0,isActive:!1,jobType:"",color:"",isApproval:!0,createdAt:"",updatedAt:null,workingDays:[],contractSite:0}]),te=n({id:0,jobName:"",start:"",end:""}),ie=n({dates:[],id:0,start:"08:00",end:"16:00",hours:0,shift:"",hourlyRate:0,notes:"",createdBy:"",UpdatedAt:"",updatedBy:"",company:"",site:"",worker:"",customerCompany:"",job:"",jobsList:[]}),se=()=>{t("update:modalHandler",!1)},ne=()=>{$.value=$.value.filter((e=>!e.hasOwnProperty("display"))),$.value.push({start:`2024-04-23T${ie.value.start}`,end:`2024-04-23T${ie.value.end}`,display:"background"}),ae.value.resources=$.value,ae.value.events=$.value},ae=n({plugins:[G],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineDay",height:"auto",resourceAreaWidth:"10%",selectable:!0,now:"2024-04-23",headerToolbar:{left:"",center:"",right:""},droppable:!0,editable:!0,views:{resourceTimelineDay:{type:"timeline",duration:{days:2},slotDuration:"00:30:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}},resourceAreaHeaderContent:"Jobs"}),le=async()=>{a.value=!0;try{await b.post("/v3/api/rota/create/",{dates:JSON.stringify(i.selectedDatesArray),start:ie.value.start,end:ie.value.end,shift:ie.value.shift,hourlyRate:ie.value.hourlyRate,notes:ie.value.notes,createdBy:ie.value.createdBy,UpdatedAt:ie.value.UpdatedAt,updatedBy:ie.value.updatedBy,company:s.loggedCompany.id,site:_.value,worker:k.value,customerCompany:j.value,job:ie.value.job,jobsList:JSON.stringify($.value)});t("update:OnSuccess",null),p.success("Rota Added Successfuly"),a.value=!1,se()}catch(e){console.log(e),p.error("You're assigning the same worker on the same date please try different."),a.value=!1}},re=()=>{te.value.start=`2024-04-23T${te.value.start}`,te.value.end=`2024-04-23T${te.value.end}`,te.value.resourceId=te.value.id;const e={...te.value};$.value.push(e),ne(),te.value.id=0,te.value.end="",te.value.start="",te.value.jobName="",p.success("Job Added")};return E(P,((e,t)=>{console.log("wactch id",P);const i=H.value.find((t=>t.id==e));i&&($.value.push({id:i.id,jobName:i.jobName,start:`2024-04-23T${i.startTime}`,end:`2024-04-23T${i.endTime}`,resourceId:i.id,title:i.jobName}),console.log("selected job",i),ne())})),E(j,((e,t)=>{(async()=>{try{const e=await b.get(`/v3/api/site/customer-company/${j.value}/`);I.value=e.data.map((e=>({value:e.id.toString(),name:`${e.name} - ${e.contractInfo.name}`}))),e.data&&(_.value=e.data[0].id)}catch(e){console.log(e)}})()})),E(_,((e,t)=>{(async()=>{try{const e=await b.get(`/v3/api/jobs/site/${_.value}/`,{});ee.value=e.data,H.value=e.data.jobs,console.log("jobs",H.value),K.value=e.data.jobs.map((e=>({value:e.id.toString(),name:e.jobName})))}catch(e){}})()})),E([()=>ie.value.start,()=>ie.value.end],(([e,t],[i,s])=>{ne()})),l((()=>{(async()=>{try{const e=await b.get(`/v3/api/worker/${s.loggedCompany.id}/worker-short-info/`);Z.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL}))),k.value=i.workerId}catch{p.error("Invalid data")}finally{a.value=!1}})(),ne(),(async()=>{a.value=!0;const e=await b.get(`/v3/api/customer-company/company/${s.loggedCompany.id}`);J.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png"}))),e.data&&(j.value=e.data[0].id),a.value=!1})(),i.workerId&&(k.value=i.workerId.toString())})),(e,s)=>{const n=q,l=X,p=Y,b=S("Multiselect"),E=U,H=W,O=z,N=V,B=T,G=A,ee=L;return r(),d(ee,{is:"form",size:"xl",open:i.AddRotaModalOpen,title:"Add Rota",actions:"right",onSubmit:C(le,["prevent"]),onClose:se},{content:y((()=>[g("div",yi,[g("div",bi,[g("div",Ei,[g("div",Si,[wi,m(p,{class:"is-flex"},{default:y((()=>[(r(!0),o(w,null,R(i.selectedDatesArray,((e,i)=>(r(),d(l,{addons:"",key:i},{default:y((()=>[m(n,{light:"",class:"ml-2",label:e,color:"primary",outlined:"",rounded:""},null,8,["label"]),m(n,{rounded:"",outlined:"",remove:"",onClick:e=>(e=>{t("remove-date",e)})(i)},null,8,["onClick"])])),_:2},1024)))),128))])),_:1})]),g("div",Ri,[Di,m(E,{class:"pl-2"},{default:y((({id:e})=>[m(p,null,{default:y((()=>[m(b,{required:"",modelValue:c(j),"onUpdate:modelValue":s[0]||(s[0]=e=>D(j)?j.value=e:null),attrs:{id:e},placeholder:"Select customer company",label:"name",options:c(J),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect"},{singlelabel:y((({value:e})=>[g("div",xi,[g("img",{style:{width:"30px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,Ci),v(" "+f(e.name),1)])])),option:y((({option:e})=>[g("img",{style:{width:"40px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Ti),v(" "+f(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Mi,[ki,m(E,{class:"pl-2"},{default:y((({id:e})=>[m(p,null,{default:y((()=>[m(b,{required:"",modelValue:c(_),"onUpdate:modelValue":s[1]||(s[1]=e=>D(_)?_.value=e:null),attrs:{id:e},placeholder:"Select a site",label:"name",options:c(I),searchable:!0,"track-by":"name",height:40},{singlelabel:y((({value:e})=>[g("div",_i,f(e.name),1)])),option:y((({option:e})=>[v(f(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Pi,[Ii,m(E,{class:""},{default:y((({id:e})=>[m(p,null,{default:y((()=>[m(b,{required:"",modelValue:c(k),"onUpdate:modelValue":s[2]||(s[2]=e=>D(k)?k.value=e:null),attrs:{id:e},placeholder:"Select worker",label:"name",options:c(Z),searchable:!0,"track-by":"name",height:400},{singlelabel:y((({value:e})=>[g("div",ji,[g("img",{style:{width:"24px",height:"24px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,Hi),v(" "+f(e.name),1)])])),option:y((({option:e})=>[g("img",{style:{width:"30px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Oi),v(" "+f(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Ni,[m(E,null,{default:y((()=>[m(H,null,{default:y((()=>[v("Start Time *")])),_:1}),m(p,null,{default:y((()=>[m(O,{required:"",modelValue:c(ie).start,"onUpdate:modelValue":s[3]||(s[3]=e=>c(ie).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Li,[m(E,null,{default:y((()=>[m(H,null,{default:y((()=>[v("End Time *")])),_:1}),m(p,null,{default:y((()=>[m(O,{required:"",modelValue:c(ie).end,"onUpdate:modelValue":s[4]||(s[4]=e=>c(ie).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ai,[Vi,m(E,{class:"pl-2"},{default:y((({id:e})=>[m(p,null,{default:y((()=>[m(b,{modelValue:c(P),"onUpdate:modelValue":s[5]||(s[5]=e=>D(P)?P.value=e:null),attrs:{id:e},placeholder:"Select a job",label:"name",options:c(K),searchable:!0,"track-by":"name",height:100},{singlelabel:y((({value:e})=>[g("div",zi,f(e.name),1)])),option:y((({option:e})=>[v(f(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Wi,[m(E,null,{default:y((()=>[m(p,null,{default:y((()=>[m(N,{modelValue:c(M),"onUpdate:modelValue":s[6]||(s[6]=e=>D(M)?M.value=e:null),label:"Create new jobs"},null,8,["modelValue"])])),_:1})])),_:1})]),c(M)?(r(),o("div",Ui,[m(E,null,{default:y((()=>[m(H,null,{default:y((()=>[v("Job Name")])),_:1}),m(p,null,{default:y((()=>[m(O,{modelValue:c(te).jobName,"onUpdate:modelValue":s[7]||(s[7]=e=>c(te).jobName=e),type:"text",placeholder:"Job name"},null,8,["modelValue"])])),_:1})])),_:1})])):h("",!0),c(M)?(r(),o("div",Yi,[m(E,null,{default:y((()=>[m(H,null,{default:y((()=>[v("Job Id")])),_:1}),m(p,null,{default:y((()=>[m(O,{modelValue:c(te).id,"onUpdate:modelValue":s[8]||(s[8]=e=>c(te).id=e),type:"text",placeholder:"Job id"},null,8,["modelValue"])])),_:1})])),_:1})])):h("",!0),c(M)?(r(),o("div",Xi,[m(E,null,{default:y((()=>[m(H,null,{default:y((()=>[v("Start Time *")])),_:1}),m(p,null,{default:y((()=>[m(O,{modelValue:c(te).start,"onUpdate:modelValue":s[9]||(s[9]=e=>c(te).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])):h("",!0),c(M)?(r(),o("div",qi,[m(E,null,{default:y((()=>[m(H,null,{default:y((()=>[v("End Time *")])),_:1}),m(p,null,{default:y((()=>[m(O,{modelValue:c(te).end,"onUpdate:modelValue":s[10]||(s[10]=e=>c(te).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])):h("",!0),c(M)?(r(),o("div",Bi,[m(B,{color:"primary",onClick:re,elevated:"",rounded:"",light:""},{default:y((()=>[v(" Add ")])),_:1})])):h("",!0),g("div",Gi,[m(c(F),{options:c(ae)},{eventContent:y((e=>[g("div",Fi,[e.event.extendedProps.jobName?(r(),o("span",{key:0,style:{position:"absolute",top:"0.7rem",right:"1rem","z-index":"9999909"},onClick:()=>{return t=e.event.id,t=parseInt(t),$.value=$.value.filter((e=>e.id!==t)),void ne();var t},class:"close-icon"},Ji,8,$i)):h("",!0),Zi,e.event.id?(r(),d(n,{key:1,light:"",color:"info",class:"mr-5"},{default:y((()=>[g("span",Ki,"Job-00"+f(e.event.id),1)])),_:2},1024)):h("",!0),g("p",Qi,f(e.event.extendedProps.jobName),1)])])),_:1},8,["options"])])]),m(G,{items:Q,"with-chevron":"",style:{"border-radius":"14px"}},{"collapse-item-head":y((e=>[es])),"collapse-item-content":y((e=>[g("div",ts,[g("div",is,[g("div",ss,[g("div",ns,[g("div",as,[ls,g("div",rs,[u(g("input",{type:"number",name:"rate","onUpdate:modelValue":s[11]||(s[11]=e=>c(ie).hourlyRate=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[x,c(ie).hourlyRate]])])]),g("div",os,[ds,g("div",cs,[u(g("input",{type:"number",name:"rate","onUpdate:modelValue":s[12]||(s[12]=e=>c(ie).hours=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[x,c(ie).hours]])])]),g("div",hs,[gs,g("div",us,[u(g("input",{type:"text",name:"note","onUpdate:modelValue":s[13]||(s[13]=e=>c(ie).notes=e),class:"input is-primary-focus",placeholder:"Enter Note"},null,512),[[x,c(ie).notes]])])])])])])])])),_:1})])])])),action:y((()=>[m(B,{type:"submit",color:"primary",loading:c(a),raised:""},{default:y((()=>[v("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),ms=_(ps,[["__scopeId","data-v-39435e54"]]);Se.touchMouseIgnoreWait=500;let vs=0,fs=0,ys=!1;class bs{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&function(e){return 0===e.button&&!e.ctrlKey}(e)&&this.tryStart(e)){let t=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let t=this.createEventFromMouse(e);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let t=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",t),this.initScrollWatch(t);let i=e.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let t=this.createEventFromTouch(e);this.recordCoords(t),this.emitter.trigger("pointermove",t)},this.handleTouchEnd=e=>{if(this.isDragging){let t=e.target;t.removeEventListener("touchmove",this.handleTouchMove),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,vs+=1,setTimeout((()=>{vs-=1}),Se.touchMouseIgnoreWait)}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let t=window.pageXOffset-this.prevScrollX+this.prevPageX,i=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:t,pageY:i,deltaX:t-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new we,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),fs+=1,1===fs&&window.addEventListener("touchmove",Es,{passive:!1})}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),fs-=1,fs||window.removeEventListener("touchmove",Es,{passive:!1})}tryStart(e){let t=this.querySubjectEl(e),i=e.target;return!(!t||this.handleSelector&&!de(i,this.handleSelector))&&(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0)}cleanup(){ys=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?de(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return vs||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ys=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,s=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,s=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:s}}createEventFromTouch(e,t){let i,s,n=e.touches,a=0,l=0;return n&&n.length?(i=n[0].pageX,s=n[0].pageY):(i=e.pageX,s=e.pageY),t?(this.origPageX=i,this.origPageY=s):(a=i-this.origPageX,l=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:a,deltaY:l}}}function Es(e){ys&&e.preventDefault()}class Ss{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=i-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,s=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",Re(i,{left:s.left,top:s.top}),De(i,(()=>{i.style.transition="",e()}))}cleanup(){this.mirrorEl&&(xe(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Re(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.classList.add("fc-event-dragging"),Re(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class ws extends Ae{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Rs extends ws{constructor(e,t){super(new Oe(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return Ne(this.scrollController.el)}}class Ds extends ws{constructor(e){super(new Le,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const xs="function"==typeof performance?performance.now:Date.now;class Cs{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(e){let t=xs();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.pageXOffset,s=t-window.pageYOffset,n=null===this.pointerScreenY?0:s-this.pointerScreenY,a=null===this.pointerScreenX?0:i-this.pointerScreenX;n<0?this.everMovedUp=!0:n>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=s,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(xs()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:s}=this,n=s-e.distance,a=n*n/(s*s)*this.maxVelocity*t,l=1;switch(e.name){case"left":l=-1;case"right":i.setScrollLeft(i.getScrollLeft()+a*l);break;case"top":l=-1;case"bottom":i.setScrollTop(i.getScrollTop()+a*l)}}computeBestEdge(e,t){let{edgeThreshold:i}=this,s=null,n=this.scrollCaches||[];for(let a of n){let n=a.clientRect,l=e-n.left,r=n.right-e,o=t-n.top,d=n.bottom-t;l>=0&&r>=0&&o>=0&&d>=0&&(o<=i&&this.everMovedUp&&a.canScrollUp()&&(!s||s.distance>o)&&(s={scrollCache:a,name:"top",distance:o}),d<=i&&this.everMovedDown&&a.canScrollDown()&&(!s||s.distance>d)&&(s={scrollCache:a,name:"bottom",distance:d}),l<=i&&this.everMovedLeft&&a.canScrollLeft()&&(!s||s.distance>l)&&(s={scrollCache:a,name:"left",distance:l}),r<=i&&this.everMovedRight&&a.canScrollRight()&&(!s||s.distance>r)&&(s={scrollCache:a,name:"right",distance:r}))}return s}buildCaches(e){return this.queryScrollEls(e).map((e=>e===window?new Ds(!1):new Rs(e,!1)))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)"object"==typeof i?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}}class Ts extends J{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=e=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,Z(document.body),K(document.body),e.isTouch||e.origEvent.preventDefault(),this.emitter.trigger("pointerdown",e),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(e.subjectEl,e.pageX,e.pageY),this.startDelay(e),this.minDistance||this.handleDistanceSurpassed(e)))},this.onPointerMove=e=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",e),!this.isDistanceSurpassed){let t,i=this.minDistance,{deltaX:s,deltaY:n}=e;t=s*s+n*n,t>=i*i&&this.handleDistanceSurpassed(e)}this.isDragging&&("scroll"!==e.origEvent.type&&(this.mirror.handleMove(e.pageX,e.pageY),this.autoScroller.handleMove(e.pageX,e.pageY)),this.emitter.trigger("dragmove",e))}},this.onPointerUp=e=>{this.isInteracting&&(this.isInteracting=!1,Q(document.body),ee(document.body),this.emitter.trigger("pointerup",e),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(e)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new bs(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new Ss,this.autoScroller=new Cs}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){"number"==typeof this.delay?this.delayTimeoutId=setTimeout((()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)}),this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(this.pointer.wasTouchScroll&&!this.touchScrollAllowed||(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll()))}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class Ms{constructor(e){this.origRect=Ce(e),this.scrollCaches=Ve(e).map((e=>new Rs(e,!0)))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let s of this.scrollCaches)if(!ks(s.getEventTarget())&&!ze(i,s.clientRect))return!1;return!0}}function ks(e){let t=e.tagName;return"HTML"===t||"BODY"===t}class _s{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=e=>{let{dragging:t}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(e),this.initialHit||!this.requireInitial?(t.setIgnoreMove(!1),this.emitter.trigger("pointerdown",e)):t.setIgnoreMove(!0)},this.handleDragStart=e=>{this.emitter.trigger("dragstart",e),this.handleMove(e,!0)},this.handleDragMove=e=>{this.emitter.trigger("dragmove",e),this.handleMove(e)},this.handlePointerUp=e=>{this.releaseHits(),this.emitter.trigger("pointerup",e)},this.handleDragEnd=e=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,e),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",e)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new we}processFirstCoord(e){let t,i={left:e.pageX,top:e.pageY},s=i,n=e.subjectEl;n instanceof HTMLElement&&(t=Ce(n),s=Te(s,t));let a=this.initialHit=this.queryHitForOffset(s.left,s.top);if(a){if(this.useSubjectCenter&&t){let e=Me(t,a.rect);e&&(s=ke(e))}this.coordAdjust=_e(s,i)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);!t&&Ps(this.movingHit,i)||(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Pe(this.droppableStore,(e=>(e.component.prepareHits(),new Ms(e.el))))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:s}=this,n=null;for(let a in i){let l=i[a].component,r=s[a];if(r&&r.isWithinClipping(e,t)){let i=r.computeLeft(),s=r.computeTop(),o=e-i,d=t-s,{origRect:c}=r,h=c.right-c.left,g=c.bottom-c.top;if(o>=0&&o<h&&d>=0&&d<g){let e=l.queryHit(o,d,h,g);e&&Ie(e.dateProfile.activeRange,e.dateSpan.range)&&(!n||e.layer>n.layer)&&(e.componentId=a,e.context=l.context,e.rect.left+=i,e.rect.right+=i,e.rect.top+=s,e.rect.bottom+=s,n=e)}}}return n}}function Ps(e,t){return!e&&!t||Boolean(e)===Boolean(t)&&je(e.dateSpan,t.dateSpan)}function Is(e,t){let i={};for(let a of t.pluginHooks.datePointTransforms)Object.assign(i,a(e,t));var s,n;return Object.assign(i,(s=e,{date:(n=t.dateEnv).toDate(s.range.start),dateStr:n.formatIso(s.range.start,{omitTime:s.allDay}),allDay:s.allDay})),i}class js extends te{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=e=>{let t=e.origEvent.target,{component:i,dragging:s}=this,{mirror:n}=s,{options:a}=i.context,l=i.context;this.subjectEl=e.subjectEl;let r=this.subjectSeg=re(e.subjectEl),o=(this.eventRange=r.eventRange).instance.instanceId;this.relevantEvents=oe(l.getCurrentData().eventStore,o),s.minDistance=e.isTouch?0:a.eventDragMinDistance,s.delay=e.isTouch&&o!==i.props.eventSelection?function(e){let{options:t}=e.context,i=t.eventLongPressDelay;null==i&&(i=t.longPressDelay);return i}(i):null,a.fixedMirrorParent?n.parentNode=a.fixedMirrorParent:n.parentNode=de(t,".fc"),n.revertDuration=a.dragRevertDuration;let d=i.isValidSegDownEl(t)&&!de(t,".fc-event-resizer");s.setIgnoreMove(!d),this.isDragging=d&&e.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=e=>{let t=this.component.context,i=this.eventRange,s=i.instance.instanceId;e.isTouch?s!==this.component.props.eventSelection&&t.dispatch({type:"SELECT_EVENT",eventInstanceId:s}):t.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(t.calendarApi.unselect(e),t.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new ce(t,i.def,i.instance),jsEvent:e.origEvent,view:t.viewApi}))},this.handleHitUpdate=(e,t)=>{if(!this.isDragging)return;let i=this.relevantEvents,s=this.hitDragging.initialHit,n=this.component.context,a=null,l=null,r=null,o=!1,d={affectedEvents:i,mutatedEvents:ue(),isEvent:!0};if(e){a=e.context;let t=a.options;n===a||t.editable&&t.droppable?(l=function(e,t,i){let s=e.dateSpan,n=t.dateSpan,a=s.range.start,l=n.range.start,r={};s.allDay!==n.allDay&&(r.allDay=n.allDay,r.hasEnd=t.context.options.allDayMaintainDuration,n.allDay&&(a=ve(a)));let o=fe(a,l,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);o.milliseconds&&(r.allDay=!1);let d={datesDelta:o,standardProps:r};for(let c of i)c(d,e,t);return d}(s,e,a.getCurrentData().pluginHooks.eventDragMutationMassagers),l&&(r=he(i,a.getCurrentData().eventUiBases,l,a),d.mutatedEvents=r,ge(d,e.dateProfile,a)||(o=!0,l=null,r=null,d.mutatedEvents=ue()))):a=null}this.displayDrag(a,d),o?ae():ne(),t||(n===a&&Ps(s,e)&&(l=null),this.dragging.setMirrorNeedsRevert(!l),this.dragging.setMirrorIsVisible(!e||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=a,this.validMutation=l,this.mutatedRelevantEvents=r)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=e=>{if(this.isDragging){let t=this.component.context,i=t.viewApi,{receivingContext:s,validMutation:n}=this,a=this.eventRange.def,l=this.eventRange.instance,r=new ce(t,a,l),o=this.relevantEvents,d=this.mutatedRelevantEvents,{finalHit:c}=this.hitDragging;if(this.clearDrag(),t.emitter.trigger("eventDragStop",{el:this.subjectEl,event:r,jsEvent:e.origEvent,view:i}),n){if(s===t){let s=new ce(t,d.defs[a.defId],l?d.instances[l.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:d});let c={oldEvent:r,event:s,relatedEvents:pe(d,t,l),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:o})}},h={};for(let e of t.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(h,e(n,t));t.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},c),h),{el:e.subjectEl,delta:n.datesDelta,jsEvent:e.origEvent,view:i})),t.emitter.trigger("eventChange",c)}else if(s){let n={event:r,relatedEvents:pe(o,t,l),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:o})}};t.emitter.trigger("eventLeave",Object.assign(Object.assign({},n),{draggedEl:e.subjectEl,view:i})),t.dispatch({type:"REMOVE_EVENTS",eventStore:o}),t.emitter.trigger("eventRemove",n);let h=d.defs[a.defId],g=d.instances[l.instanceId],u=new ce(s,h,g);s.dispatch({type:"MERGE_EVENTS",eventStore:d});let p={event:u,relatedEvents:pe(d,s,g),revert(){s.dispatch({type:"REMOVE_EVENTS",eventStore:d})}};s.emitter.trigger("eventAdd",p),e.isTouch&&s.dispatch({type:"SELECT_EVENT",eventInstanceId:l.instanceId}),s.emitter.trigger("drop",Object.assign(Object.assign({},Is(c.dateSpan,s)),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:c.context.viewApi})),s.emitter.trigger("eventReceive",Object.assign(Object.assign({},p),{draggedEl:e.subjectEl,view:c.context.viewApi}))}}else t.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:i}=t.context,s=this.dragging=new Ts(e.el);s.pointer.selector=js.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=i.dragScroll;let n=this.hitDragging=new _s(this.dragging,me);n.useSubjectCenter=e.useEventCenter,n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("pointerup",this.handlePointerUp),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let i=this.component.context,s=this.receivingContext;s&&s!==e&&(s===i?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:ue(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}js.SELECTOR=".fc-event-draggable, .fc-event-resizable";const Hs={fixedMirrorParent:Ee},Os={dateClick:Ee,eventDragStart:Ee,eventDragStop:Ee,eventDrop:Ee,eventResizeStart:Ee,eventResizeStop:Ee,eventResize:Ee,drop:Ee,eventReceive:Ee,eventLeave:Ee};Se.dataAttrPrefix="";var Ns=$({name:"@fullcalendar/interaction",componentInteractions:[class extends te{constructor(e){super(e),this.handlePointerDown=e=>{let{dragging:t}=this,i=e.origEvent.target;t.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=e=>{let{component:t}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:i,finalHit:s}=this.hitDragging;if(i&&s&&Ps(i,s)){let{context:s}=t,n=Object.assign(Object.assign({},Is(i.dateSpan,s)),{dayEl:i.dayEl,jsEvent:e.origEvent,view:s.viewApi||s.calendarApi.view});s.emitter.trigger("dateClick",n)}}},this.dragging=new Ts(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new _s(this.dragging,ie(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class extends te{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=e=>{let{component:t,dragging:i}=this,{options:s}=t.context,n=s.selectable&&t.isValidDateDownEl(e.origEvent.target);i.setIgnoreMove(!n),i.delay=e.isTouch?function(e){let{options:t}=e.context,i=t.selectLongPressDelay;null==i&&(i=t.longPressDelay);return i}(t):null},this.handleDragStart=e=>{this.component.context.calendarApi.unselect(e)},this.handleHitUpdate=(e,t)=>{let{context:i}=this.component,s=null,n=!1;if(e){let t=this.hitDragging.initialHit;e.componentId===t.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(t,e)||(s=function(e,t,i){let s=e.dateSpan,n=t.dateSpan,a=[s.range.start,s.range.end,n.range.start,n.range.end];a.sort(He);let l={};for(let r of i){let i=r(e,t);if(!1===i)return null;i&&Object.assign(l,i)}return l.range={start:a[0],end:a[3]},l.allDay=s.allDay,l}(t,e,i.pluginHooks.dateSelectionTransformers)),s&&se(s,e.dateProfile,i)||(n=!0,s=null)}s?i.dispatch({type:"SELECT_DATES",selection:s}):t||i.dispatch({type:"UNSELECT_DATES"}),n?ae():ne(),t||(this.dragSelection=s)},this.handlePointerUp=e=>{this.dragSelection&&(le(this.dragSelection,e,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,s=this.dragging=new Ts(e.el);s.touchScrollAllowed=!1,s.minDistance=i.selectMinDistance||0,s.autoScroller.isEnabled=i.dragScroll;let n=this.hitDragging=new _s(this.dragging,ie(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},js,class extends te{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=e=>{let{component:t}=this,i=this.querySegEl(e),s=re(i),n=this.eventRange=s.eventRange;this.dragging.minDistance=t.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(e.origEvent.target)||e.isTouch&&this.component.props.eventSelection!==n.instance.instanceId)},this.handleDragStart=e=>{let{context:t}=this.component,i=this.eventRange;this.relevantEvents=oe(t.getCurrentData().eventStore,this.eventRange.instance.instanceId);let s=this.querySegEl(e);this.draggingSegEl=s,this.draggingSeg=re(s),t.calendarApi.unselect(),t.emitter.trigger("eventResizeStart",{el:s,event:new ce(t,i.def,i.instance),jsEvent:e.origEvent,view:t.viewApi})},this.handleHitUpdate=(e,t,i)=>{let{context:s}=this.component,n=this.relevantEvents,a=this.hitDragging.initialHit,l=this.eventRange.instance,r=null,o=null,d=!1,c={affectedEvents:n,mutatedEvents:ue(),isEvent:!0};if(e){e.componentId===a.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(a,e)||(r=function(e,t,i,s){let n=e.context.dateEnv,a=e.dateSpan.range.start,l=t.dateSpan.range.start,r=fe(a,l,n,e.largeUnit);if(i){if(n.add(s.start,r)<s.end)return{startDelta:r}}else if(n.add(s.end,r)>s.start)return{endDelta:r};return null}(a,e,i.subjectEl.classList.contains("fc-event-resizer-start"),l.range))}r&&(o=he(n,s.getCurrentData().eventUiBases,r,s),c.mutatedEvents=o,ge(c,e.dateProfile,s)||(d=!0,r=null,o=null,c.mutatedEvents=null)),o?s.dispatch({type:"SET_EVENT_RESIZE",state:c}):s.dispatch({type:"UNSET_EVENT_RESIZE"}),d?ae():ne(),t||(r&&Ps(a,e)&&(r=null),this.validMutation=r,this.mutatedRelevantEvents=o)},this.handleDragEnd=e=>{let{context:t}=this.component,i=this.eventRange.def,s=this.eventRange.instance,n=new ce(t,i,s),a=this.relevantEvents,l=this.mutatedRelevantEvents;if(t.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:n,jsEvent:e.origEvent,view:t.viewApi}),this.validMutation){let r=new ce(t,l.defs[i.defId],s?l.instances[s.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:l});let o={oldEvent:n,event:r,relatedEvents:pe(l,t,s),revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:a})}};t.emitter.trigger("eventResize",Object.assign(Object.assign({},o),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||ye(0),endDelta:this.validMutation.endDelta||ye(0),jsEvent:e.origEvent,view:t.viewApi})),t.emitter.trigger("eventChange",o)}else t.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new Ts(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let s=this.hitDragging=new _s(this.dragging,ie(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return de(e.subjectEl,".fc-event")}}],calendarInteractions:[class{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=e=>{e.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=e=>{let t=this.context.options.unselectCancel,i=be(e.origEvent);this.matchesCancel=!!de(i,t),this.matchesEvent=!!de(i,js.SELECTOR)},this.onDocumentPointerUp=e=>{let{context:t}=this,{documentPointer:i}=this,s=t.getCurrentData();if(!i.wasTouchScroll){if(s.dateSelection&&!this.isRecentPointerDateSelect){let i=t.options.unselectAuto;!i||i&&this.matchesCancel||t.calendarApi.unselect(e)}s.eventSelection&&!this.matchesEvent&&t.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new bs(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:Ts,optionRefiners:Hs,listenerRefiners:Os});class Ls extends Ke{constructor(){super(...arguments),this.headerElRef=Xe()}renderSimpleLayout(e,t){let{props:i,context:s}=this,n=[],a=Qe(s.options);return e&&n.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),qe(tt,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},qe(et,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:n}))}renderHScrollLayout(e,t,i,s){let n=this.context.pluginHooks.scrollGridImpl;if(!n)throw new Error("No ScrollGrid implementation");let{props:a,context:l}=this,r=!a.forPrint&&Qe(l.options),o=!a.forPrint&&it(l.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:r,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),o&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:st}]}),qe(tt,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},qe(n,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:i,minWidth:s}]}],sections:d}))}}function As(e,t){let i=[];for(let s=0;s<t;s+=1)i[s]=[];for(let s of e)i[s.row].push(s);return i}function Vs(e,t){let i=[];for(let s=0;s<t;s+=1)i[s]=[];for(let s of e)i[s.firstCol].push(s);return i}function zs(e,t){let i=[];if(e){for(let s=0;s<t;s+=1)i[s]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)i[t.row].segs.push(t)}else for(let s=0;s<t;s+=1)i[s]=null;return i}const Ws=We({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Us(e){let{display:t}=e.eventRange.ui;return"list-item"===t||"auto"===t&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class Ys extends pt{render(){let{props:e}=this;return qe(mt,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Ws,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class Xs extends pt{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,n=i.eventTimeFormat||Ws,a=vt(s,n,t,!0,e.defaultDisplayEventEnd);return qe(yt,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ft(e.seg,t),defaultGenerator:qs,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function qs(e){return qe(lt,null,qe("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&qe("div",{className:"fc-event-time"},e.timeText),qe("div",{className:"fc-event-title"},e.event.title||qe(lt,null," ")))}class Bs extends pt{constructor(){super(...arguments),this.compileSegs=Ye(Gs)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return qe(_t,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return qe(lt,null,t.map((t=>{let s=t.eventRange.instance.instanceId;return qe("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:i[s]?"hidden":""}},Us(t)?qe(Xs,Object.assign({seg:t,isDragging:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},rt(t,e.todayRange))):qe(Ys,Object.assign({seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},rt(t,e.todayRange))))})))}})}}function Gs(e){let t=[],i=[];for(let s of e)t.push(s.seg),s.isVisible||i.push(s.seg);return{allSegs:t,invisibleSegs:i}}const Fs=We({week:"narrow"});class $s extends Ke{constructor(){super(...arguments),this.rootElRef=Xe(),this.state={dayNumberId:bt()},this.handleRootEl=e=>{Et(this.rootElRef,e),Et(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:s}=this,{options:n,dateEnv:a}=e,{date:l,dateProfile:r}=t;const o=t.showDayNumber&&function(e,t,i){const{start:s,end:n}=t,a=xt(n,-1),l=i.getYear(s),r=i.getMonth(s),o=i.getYear(a),d=i.getMonth(a);return!(l===o&&r===d)&&Boolean(e.valueOf()===s.valueOf()||1===i.getDay(e)&&e.valueOf()<n.valueOf())}(l,r.currentRange,a);return qe(Dt,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Js,date:l,dateProfile:r,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:o,extraRenderProps:t.extraRenderProps},((a,r)=>qe("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&qe(St,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:wt(e,l,"week"),date:l,defaultFormat:Fs}),!r.isDisabled&&(t.showDayNumber||Rt(n)||t.forceDayTop)?qe("div",{className:"fc-daygrid-day-top"},qe(a,{elTag:"a",elClasses:["fc-daygrid-day-number",o&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},wt(e,l)),{id:i.dayNumberId})})):t.showDayNumber?qe("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},qe("a",{className:"fc-daygrid-day-number"}," ")):void 0,qe("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,qe("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},qe(Bs,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:s,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),qe("div",{className:"fc-daygrid-day-bg"},t.bgContent))))}}function Js(e){return e.dayNumberText||qe(lt,null," ")}function Zs(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function Ks(e){return Zs(e)+":"+e.lastCol}function Qs(e,t,i,s,n,a,l){let r=new tn((t=>{let i=e[t.index].eventRange.instance.instanceId+":"+t.span.start+":"+(t.span.end-1);return n[i]||1}));r.allowReslicing=!0,r.strictOrder=s,!0===t||!0===i?(r.maxCoord=a,r.hiddenConsumes=!0):"number"==typeof t?r.maxStackCnt=t:"number"==typeof i&&(r.maxStackCnt=i,r.hiddenConsumes=!0);let o=[],d=[];for(let f=0;f<e.length;f+=1){let t=e[f],i=Ks(t);null!=n[i]?o.push({index:f,span:{start:t.firstCol,end:t.lastCol+1}}):d.push(t)}let c=r.addSegs(o),h=r.toRects(),{singleColPlacements:g,multiColPlacements:u,leftoverMargins:p}=function(e,t,i){let s=function(e,t){let i=[];for(let s=0;s<t;s+=1)i.push([]);for(let s of e)for(let e=s.span.start;e<s.span.end;e+=1)i[e].push(s);return i}(e,i.length),n=[],a=[],l=[];for(let r=0;r<i.length;r+=1){let e=s[r],o=[],d=0,c=0;for(let s of e){let e=t[s.index];o.push({seg:en(e,r,r+1,i),isVisible:!0,isAbsolute:!1,absoluteTop:s.levelCoord,marginTop:s.levelCoord-d}),d=s.levelCoord+s.thickness}let h=[];d=0,c=0;for(let s of e){let e=t[s.index],n=s.span.end-s.span.start>1,a=s.span.start===r;c+=s.levelCoord-d,d=s.levelCoord+s.thickness,n?(c+=s.thickness,a&&h.push({seg:en(e,s.span.start,s.span.end,i),isVisible:!0,isAbsolute:!0,absoluteTop:s.levelCoord,marginTop:0})):a&&(h.push({seg:en(e,s.span.start,s.span.end,i),isVisible:!0,isAbsolute:!1,absoluteTop:s.levelCoord,marginTop:c}),c=0)}n.push(o),a.push(h),l.push(c)}return{singleColPlacements:n,multiColPlacements:a,leftoverMargins:l}}(h,e,l),m=[],v=[];for(let f of d){u[f.firstCol].push({seg:f,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=f.firstCol;e<=f.lastCol;e+=1)g[e].push({seg:en(f,e,e+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let f=0;f<l.length;f+=1)m.push(0);for(let f of c){let t=e[f.index],i=f.span;u[i.start].push({seg:en(t,i.start,i.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=i.start;e<i.end;e+=1)m[e]+=1,g[e].push({seg:en(t,e,e+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let f=0;f<l.length;f+=1)v.push(p[f]);return{singleColPlacements:g,multiColPlacements:u,moreCnts:m,moreMarginTops:v}}function en(e,t,i,s){if(e.firstCol===t&&e.lastCol===i-1)return e;let n=e.eventRange,a=n.range,l=Ct(a,{start:s[t].date,end:$e(s[i-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:i-1,eventRange:{def:n.def,ui:Object.assign(Object.assign({},n.ui),{durationEditable:!1}),instance:n.instance,range:l},isStart:e.isStart&&l.start.valueOf()===a.start.valueOf(),isEnd:e.isEnd&&l.end.valueOf()===a.end.valueOf()})}class tn extends Tt{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:i}=this,s=e=>!this.forceHidden[Mt(e)];for(let n=0;n<i.length;n+=1)i[n]=i[n].filter(s);return t}handleInvalidInsertion(e,t,i){const{entriesByLevel:s,forceHidden:n}=this,{touchingEntry:a,touchingLevel:l,touchingLateral:r}=e;if(this.hiddenConsumes&&a){const e=Mt(a);if(!n[e])if(this.allowReslicing){const e=Object.assign(Object.assign({},a),{span:kt(a.span,t.span)});n[Mt(e)]=!0,s[l][r]=e,i.push(e),this.splitEntry(a,t,i)}else n[e]=!0,i.push(a)}super.handleInvalidInsertion(e,t,i)}}class sn extends Ke{constructor(){super(...arguments),this.cellElRefs=new nt,this.frameElRefs=new nt,this.fgElRefs=new nt,this.segHarnessRefs=new nt,this.rootElRef=Xe(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:s}=i,n=e.cells.length,a=Vs(e.businessHourSegs,n),l=Vs(e.bgEventSegs,n),r=Vs(this.getHighlightSegs(),n),o=Vs(this.getMirrorSegs(),n),{singleColPlacements:d,multiColPlacements:c,moreCnts:h,moreMarginTops:g}=Qs(at(e.fgEventSegs,s.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,s.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),u=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return qe("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map(((t,i)=>{let s=this.renderFgSegs(i,e.forPrint?d[i]:c[i],e.todayRange,u),n=this.renderFgSegs(i,function(e,t){if(!e.length)return[];let i=function(e){let t={};for(let i of e)for(let e of i)t[e.seg.eventRange.instance.instanceId]=e.absoluteTop;return t}(t);return e.map((e=>({seg:e,isVisible:!0,isAbsolute:!0,absoluteTop:i[e.eventRange.instance.instanceId],marginTop:0})))}(o[i],c),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return qe($s,{key:t.key,elRef:this.cellElRefs.createRef(t.key),innerElRef:this.frameElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===i,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,moreCnt:h[i],moreMarginTop:g[i],singlePlacements:d[i],fgContentElRef:this.fgElRefs.createRef(t.key),fgContent:qe(lt,null,qe(lt,null,s),qe(lt,null,n)),bgContent:qe(lt,null,this.renderFillSegs(r[i],"highlight"),this.renderFillSegs(a[i],"non-business"),this.renderFillSegs(l[i],"bg-event")),minHeight:e.cellMinHeight})})))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let i=this.props;this.updateSizing(!Ue(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,s,n,a,l){let{context:r}=this,{eventSelection:o}=this.props,{framePositions:d}=this.state,c=1===this.props.cells.length,h=n||a||l,g=[];if(d)for(let u of t){let{seg:e}=u,{instanceId:t}=e.eventRange.instance,p=u.isVisible&&!s[t],m=u.isAbsolute,v="",f="";m&&(r.isRtl?(f=0,v=d.lefts[e.lastCol]-d.lefts[e.firstCol]):(v=0,f=d.rights[e.firstCol]-d.rights[e.lastCol])),g.push(qe("div",{className:"fc-daygrid-event-harness"+(m?" fc-daygrid-event-harness-abs":""),key:Zs(e),ref:h?null:this.segHarnessRefs.createRef(Ks(e)),style:{visibility:p?"":"hidden",marginTop:m?"":u.marginTop,top:m?u.absoluteTop:"",left:v,right:f}},Us(e)?qe(Xs,Object.assign({seg:e,isDragging:n,isSelected:t===o,defaultDisplayEventEnd:c},rt(e,i))):qe(Ys,Object.assign({seg:e,isDragging:n,isResizing:a,isDateSelecting:l,isSelected:t===o,defaultDisplayEventEnd:c},rt(e,i)))))}return g}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:s}=this.props,{framePositions:n}=this.state,a=[];if(n)for(let l of e){let e=i?{right:0,left:n.lefts[l.lastCol]-n.lefts[l.firstCol]}:{left:0,right:n.rights[l.firstCol]-n.rights[l.lastCol]};a.push(qe("div",{key:ct(l.eventRange),className:"fc-daygrid-bg-harness",style:e},"bg-event"===t?qe(ot,Object.assign({seg:l},rt(l,s))):dt(t)))}return qe(lt,{},...a)}updateSizing(e){let{props:t,state:i,frameElRefs:s}=this;if(!t.forPrint&&null!==t.clientWidth){if(e){let e=t.cells.map((e=>s.currentMap[e.key]));if(e.length){let t=this.rootElRef.current,s=new ht(t,e,!0,!1);i.framePositions&&i.framePositions.similarTo(s)||this.setState({framePositions:new ht(t,e,!0,!1)})}}const n=this.state.segHeights,a=this.querySegHeights(),l=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},n),a),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let s=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,s)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map((t=>e[t.key]))}}sn.addStateEquality({segHeights:Ue});class nn extends Ke{constructor(){super(...arguments),this.splitBusinessHourSegs=Ye(As),this.splitBgEventSegs=Ye(As),this.splitFgEventSegs=Ye(As),this.splitDateSelectionSegs=Ye(As),this.splitEventDrag=Ye(zs),this.splitEventResize=Ye(zs),this.rowRefs=new nt}render(){let{props:e,context:t}=this,i=e.cells.length,s=this.splitBusinessHourSegs(e.businessHourSegs,i),n=this.splitBgEventSegs(e.bgEventSegs,i),a=this.splitFgEventSegs(e.fgEventSegs,i),l=this.splitDateSelectionSegs(e.dateSelectionSegs,i),r=this.splitEventDrag(e.eventDrag,i),o=this.splitEventResize(e.eventResize,i),d=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return qe(Ht,{unit:"day"},((t,c)=>qe(lt,null,e.cells.map(((t,h)=>qe(sn,{ref:this.rowRefs.createRef(h),key:t.length?t[0].date.toISOString():h,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:c,dateProfile:e.dateProfile,cells:t,renderIntro:e.renderRowIntro,businessHourSegs:s[h],eventSelection:e.eventSelection,bgEventSegs:n[h].filter(an),fgEventSegs:a[h],dateSelectionSegs:l[h],eventDrag:r[h],eventResize:o[h],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ht(this.rootEl,this.rowRefs.collect().map((e=>e.getCellEls()[0])),!1,!0),this.colPositions=new ht(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:s}=this,n=i.leftToIndex(e),a=s.topToIndex(t);if(null!=a&&null!=n){let e=this.props.cells[a][n];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,n),allDay:!0},e.extraDateSpan),dayEl:this.getCellEl(a,n),rect:{left:i.lefts[n],right:i.rights[n],top:s.tops[a],bottom:s.bottoms[a]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date;return{start:i,end:$e(i,1)}}}function an(e){return e.eventRange.def.allDay}class ln extends Ke{constructor(){super(...arguments),this.elRef=Xe(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:s}=e,n=!0===i||!0===t;n&&!s&&(n=!1,t=null,i=null);let a=["fc-daygrid-body",n?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return qe("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},qe("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,qe("tbody",{role:"presentation"},qe(nn,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function(e,t){let i;t.currentRangeUnit.match(/year|month/)&&(i=e.querySelector(`[data-date="${Pt(t.currentDate)}-01"]`));i||(i=e.querySelector(`[data-date="${It(t.currentDate)}"]`));return i}(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),s=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}class rn extends jt{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class on extends Ke{constructor(){super(...arguments),this.slicer=new rn,this.tableRef=Xe()}render(){let{props:e,context:t}=this;return qe(ln,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}function dn(e,t){let i=new gt(e.renderRange,t);return new ut(i,/year|month|week/.test(e.currentRangeUnit))}Ze(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var cn=$({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class extends Ls{constructor(){super(...arguments),this.buildDayTableModel=Ye(dn),this.headerRef=Xe(),this.tableRef=Xe()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,s=this.buildDayTableModel(i.dateProfile,t),n=e.dayHeaders&&qe(Be,{ref:this.headerRef,dateProfile:i.dateProfile,dates:s.headerDates,datesRepDistinctDays:1===s.rowCnt}),a=t=>qe(on,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:s,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(n,a,s.colCnt,e.dayMinWidth):this.renderSimpleLayout(n,a)}},dateProfileGeneratorClass:class extends Ge{buildRenderRange(e,t,i){let s=super.buildRenderRange(e,t,i),{props:n}=this;return function(e){let t,{dateEnv:i,currentRange:s}=e,{start:n,end:a}=s;e.snapToWeek&&(n=i.startOfWeek(n),t=i.startOfWeek(a),t.valueOf()!==a.valueOf()&&(a=Fe(t,1)));if(e.fixedWeekCount){let e=i.startOfWeek(i.startOfMonth($e(s.end,-1))),t=Math.ceil(Je(e,a));a=Fe(a,6-t)}return{start:n,end:a}}({currentRange:s,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:n.fixedWeekCount,dateEnv:n.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});export{vi as _,Ns as a,ms as b,cn as i};
