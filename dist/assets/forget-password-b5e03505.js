import{f as a,r as e,v as s,x as l,y as o,o as t,A as i,B as d,C as r,D as u,E as n,F as c,G as m,H as p,m as v,I as _,J as h,K as f,k as g,Y as y,P as b,Q as w,R as k,S as x}from"./index-f3dee3af.js";import{_ as V}from"./VCheckbox.vue_vue_type_style_index_0_lang-e5bf699a.js";import{_ as j}from"./VField.vue_vue_type_script_setup_true_lang-b4b7b0d4.js";import{_ as P}from"./VControl-85fa2479.js";import{_ as C}from"./VInput.vue_vue_type_script_setup_true_lang-01960579.js";import{_ as S}from"./VLabel.vue_vue_type_script_setup_true_lang-8af1eab0.js";import{_ as A}from"./AnimatedLogo-d0a344ef.js";import{_ as I}from"./station-d527b828.js";import{u as R}from"./useNotyf-248ceabc.js";import{u as q}from"./useAPI-91b247fc.js";import{u as U}from"./layoutSwitcher-4f0d4066.js";import"./useVFieldContext-fb63aaf0.js";import"./notyf-32fcda9b.js";import"./useThemeColors-a6863ed0.js";const F=a=>(w("data-v-7c3a154a"),a=a(),k(),a),K={class:"modern-login"},L=F((()=>n("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),B={class:"columns is-gapless is-vcentered"},D=y('<div class="column is-relative is-8 h-hidden-mobile h-hidden-tablet-p" data-v-7c3a154a><div class="hero is-fullheight is-image" data-v-7c3a154a><div class="hero-body" data-v-7c3a154a><div class="container" data-v-7c3a154a><div class="columns" data-v-7c3a154a><div class="column" data-v-7c3a154a><img style="height:460px;" class="hero-image" src="'+I+'" alt="" data-v-7c3a154a></div></div></div></div></div></div>',1),G={class:"column is-4 is-relative"},H={class:"top-tools"},J=["checked"],Q=F((()=>n("span",null,null,-1))),T={class:"is-form"},z={class:"is-form-inner"},E=[F((()=>n("h2",null,"Reset Password",-1)))],N=["onSubmit"],Y={class:"button-wrap has-help"},M=x(a({__name:"forget-password",setup(a){U();const y=e("login"),w=e(!1),k=s(),x=l(),I=o(),F=R(),M=q(),O=e(""),W=e(""),X=e(""),Z=e(""),$=async()=>{if(!w.value){if(O.value!=W.value)return void F.error("Both password and confirm password  must be matched");w.value=!0;try{await M.post("/api/auth/set-password/",{email:Z.value,password:O.value,token:X.value,confirm_password:W.value});aa()}catch(a){w.value=!1,F.dismissAll(),F.error("Invalid or expired link, password update")}}},aa=()=>{w.value=!1,F.dismissAll(),F.success("Password updated successfully"),x.push("/")};t((()=>{X.value=I.query.token,Z.value=I.query.email})),i({title:"Reset Password - Ibex"});const ea=e(!1),sa=e("Password"),la=()=>{sa.value="Password"===sa.value?"text":"Password"};return(a,e)=>{const s=A,l=d("RouterLink"),o=S,t=C,i=P,x=j,I=V,R=b;return r(),u("div",K,[L,n("div",B,[D,n("div",G,[n("div",H,[c(l,{to:"/",class:"top-logo"},{default:m((()=>[c(s,{width:"38px",height:"38px"})])),_:1}),n("label",{class:"dark-mode",tabindex:"0",role:"button",onKeydown:e[1]||(e[1]=p(h((a=>a.target.click()),["prevent"]),["space"]))},[n("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!v(k).isDark,onChange:e[0]||(e[0]=(...a)=>v(k).onChange&&v(k).onChange(...a))},null,40,J),Q],32)]),n("div",T,[n("div",z,[n("div",{class:_(["form-text",["login"!==v(y)&&"is-hidden"]])},E,2),n("form",{method:"post","data-cy":"login-form",class:_([["login"!==v(y)&&"is-hidden"],"login-wrapper"]),onSubmit:h($,["prevent"])},[c(x,null,{default:m((()=>[c(i,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[f(" Password ")])),_:1}),c(t,{modelValue:v(O),"onUpdate:modelValue":e[2]||(e[2]=a=>g(O)?O.value=a:null),type:v(sa),required:"",minlength:"6"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(x,null,{default:m((()=>[c(i,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[f(" Confirm Password ")])),_:1}),c(t,{modelValue:v(W),"onUpdate:modelValue":e[3]||(e[3]=a=>g(W)?W.value=a:null),required:"",type:v(sa),minlength:"6"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(x,null,{default:m((()=>[c(i,{class:"is-flex"},{default:m((()=>[c(i,{raw:"",subcontrol:""},{default:m((()=>[c(I,{modelValue:v(ea),"onUpdate:modelValue":e[4]||(e[4]=a=>g(ea)?ea.value=a:null),label:"Show Password",color:"primary",onClick:la},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n("div",Y,[c(R,{id:"login-button",loading:v(w),color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:m((()=>[f(" Submit ")])),_:1},8,["loading"])])],42,N)])])])])])}}}),[["__scopeId","data-v-7c3a154a"]]);export{M as default};
