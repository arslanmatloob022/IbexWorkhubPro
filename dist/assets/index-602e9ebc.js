import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-e23a966f.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-4c941612.js";import{_ as a,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-acc49533.js";import{_ as l}from"./VDropdown.vue_vue_type_style_index_0_lang-ef4ac719.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-84b318a5.js";import{_ as n}from"./VTag.vue_vue_type_style_index_0_lang-55de786d.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-b09384ab.js";import{f as r,x as c,r as u,$ as d,o as p,av as m,m as _,C as v,O as f,D as b,E as y,F as g,G as h,L as j,X as x,k,K as w,N as C,V as A,W as V,aS as P,P as S,U as N,J as $,A as O,am as I}from"./index-5437c3ff.js";import{_ as D}from"./VField.vue_vue_type_script_setup_true_lang-88afe542.js";import{_ as T}from"./VControl-99928d1c.js";import{_ as F}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-fecf97ac.js";import{_ as J,a as L}from"./search-4-dark-2b5b440c.js";import{g as W}from"./estimatesScripts-a303076d.js";import{u as E}from"./useAPI-15ad727f.js";import{u as U}from"./useNotyf-19e6534b.js";import{d as X,i as z}from"./useSupportElement-64af5555.js";import{u as M}from"./viewWrapper-2d6a142b.js";import{b as q}from"./route-block-83d24a4e.js";import"./VFlex.vue_vue_type_style_index_0_lang-6332c0d2.js";import"./VIcon.vue_vue_type_script_setup_true_lang-6f36a692.js";import"./useDropdown-8a4cc005.js";import"./VLabel.vue_vue_type_script_setup_true_lang-2653a3df.js";import"./useVFieldContext-0b764790.js";import"./VPlaceloadWrap-2c85d2c1.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-bf550a46.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-fbdbf402.js";import"./notyf-ebf58a6a.js";import"./useThemeColors-fa4464c7.js";const B={key:1},G={class:"list-view-toolbar"},H={class:"tabs-inner"},K={class:"page-content-inner"},R={class:"flex-list-wrapper flex-list-v1"},Y=y("div",{class:"columns is-multiline"},[y("div",{class:"column is-3"}),y("div",{class:"column is-6 justify-right"})],-1),Q=y("img",{class:"light-image",src:J,alt:""},null,-1),Z=y("img",{class:"dark-image",src:L,alt:""},null,-1),ee={class:"item-name dark-inverted show-text-200"},te={class:"item-meta show-text-200"},ae={key:0,class:"show-text-200"},se={class:"item-name"},le={class:"item-meta"},ie={key:1,class:"show-text-200"},ne={class:"item-name dark-inverted"},oe={class:"item-meta"},re={class:"item-name dark-inverted"},ce={class:"item-meta"},ue=["onClick"],de=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),y("div",{class:"meta"},[y("span",null,"View"),y("span",null,"View user details")],-1)],pe=y("hr",{class:"dropdown-divider"},null,-1),me=["onClick"],_e=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete Proposal Permanently")],-1)],ve=r({__name:"CompletedProjects",setup(r){const O=E(),I=U(),J=c(),L=u(!1),M=u("");u(4);const q=u(0),ve=u([]),fe=u(1),be=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ye={username:{label:"Job",grow:!0},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},ge=async()=>{try{L.value=!0;let e=(await O.get("/api/project/project-jobs/",{})).data;ve.value=e.filter((e=>"completed"==e.status))}catch(e){console.log(e)}finally{L.value=!1}};u(!1);const he=u(""),je=async()=>{try{L.value=!0,await O.delete(`/api/project/${q.value}/`),I.success("Project deleted successfully"),be.value.isSweetAlertOpen=!1,ge()}catch(e){console.log(e)}finally{L.value=!1}},xe=d((()=>M.value?ve.value.filter((e=>e?.title.match(new RegExp(M.value,"i")))):ve.value));return p((()=>{ge()})),(r,c)=>{const u=F,d=T,p=D,O=S,I=o,E=s,U=n,q=i,ve=l,ge=a,ke=t,we=e,Ce=m("tooltip");return _(L)?(v(),f(u,{key:0})):(v(),b("div",B,[y("div",G,[g(p,null,{default:h((()=>[g(d,{icon:"feather:search"},{default:h((()=>[j(y("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>k(M)?M.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[x,_(M)]])])),_:1})])),_:1}),y("div",H,[g(O,{color:"primary",to:"/sidebar/dashboard/projects/add-project",elevated:""},{default:h((()=>[w("Add Project ")])),_:1})])]),y("div",K,[y("div",R,[Y,_(xe)?.length?C("",!0):(v(),f(I,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:h((()=>[Q,Z])),_:1})),_(xe)?.length?(v(),f(ge,{key:1,data:_(xe),columns:ye,compact:""},{body:h((()=>[g(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),b(A,null,V(_(xe),(e=>(v(),b("div",{key:e.id,class:"flex-table-item"},[g(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:h((()=>[y("div",null,[y("span",ee,N(e?.title?e?.title:"N/A"),1),y("span",te,[y("span",null,N(e?.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),g(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:h((()=>[e?.clientInfo?(v(),b("div",ae,[y("span",se,N(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),y("span",le,[y("span",null,N(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):C("",!0),e.contractor_info?(v(),b("div",ie,[y("span",ne,N(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),y("span",oe,[y("span",null,N(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):C("",!0)])),_:2},1032,["onClick"]),g(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:h((()=>[y("div",null,[y("span",re,N(_(X)(e.created)),1),y("span",ce,[y("span",null,"At:"+N(_(z)(e.created)),1)])])])),_:2},1032,["onClick"]),g(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:h((()=>[g(U,{class:"capitalized",color:_(W)[e.status],rounded:""},{default:h((()=>[w(N(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),g(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:h((()=>[y("div",null,[(v(!0),b(A,null,V(e?.managers_list,(e=>j((v(),f(q,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Ce,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),g(E,{column:{align:"end"}},{default:h((()=>[g(ve,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:h((({close:t})=>[y("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)}},de,8,ue),pe,y("a",{role:"menuitem",class:"dropdown-item is-media",onClick:$((t=>{return a=e.id,he.value=a,void(be.value={title:"Delete job?",subtitle:"Are you sure to delete this job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a}),["prevent"])},_e,8,me)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):C("",!0),_(xe)?.length>5?(v(),f(ke,{key:2,"current-page":_(fe),"onUpdate:currentPage":c[1]||(c[1]=e=>k(fe)?fe.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):C("",!0)]),_(be).isSweetAlertOpen?(v(),f(we,{key:0,isSweetAlertOpen:_(be).isSweetAlertOpen,title:_(be).title,subtitle:_(be).subtitle,btntext:_(be).btntext,onConfirm:je,onCancel:()=>_(be).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0)])]))}}}),fe={class:"page-content-inner"},be=y("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),ye=r({__name:"index",setup:e=>(M().setPageTitle("Completed Jobs"),O({title:"Completed Jobs - Ibex"}),(e,t)=>{const a=ve;return v(),b("div",fe,[(v(),f(I,{to:"[data-teleport-bg]"},[be])),g(a,{class:"has-navbar-spacing"})])})});"function"==typeof q&&q(ye);export{ye as default};
