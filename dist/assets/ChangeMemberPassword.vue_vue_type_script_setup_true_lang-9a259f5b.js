import{_ as s}from"./VModal.vue_vue_type_style_index_0_lang-62c2b5f6.js";import{e as a,r as e,t as l,o,y as n,H as r,B as d,C as t,S as i,l as u,j as p,bU as c,A as m,D as v,K as w,E as f}from"./index-0be7d825.js";import{u as h}from"./useAPI-4f36037c.js";import{u as y}from"./useNotyf-8f2dd69a.js";const g={class:"modal-form columns is-multiline"},b={class:"column is-12"},P={class:"field"},_=t("label",null,"New Password:",-1),C={class:"control"},x=["type"],M={class:"column is-12"},j={class:"field"},k=t("label",null,"Confirm Password:",-1),A={class:"control"},N=["type"],O=t("label",null,"Show Password:",-1),S=a({__name:"ChangeMemberPassword",props:{ChangePasswordModalOpen:{type:Boolean,default:!1},id:{type:Number,default:0}},emits:["update:handleChangePasswordModalOpen","update:getTeamMembers"],setup(a,{emit:S}){const B=a,U=y(),V=h(),q=e(!1),I=e(""),z=e("");l();const D=e(!1),E=async()=>{if(!q.value){if(I.value!=z.value)return void U.error("Both password and confirm password  must be matched");q.value=!0;try{await V.post("/v3/api/account/auth/change-team-member-password/",{password:I.value,confirm_password:z.value,user:B.id});F()}catch(s){q.value=!1,U.dismissAll(),U.error("Inavlid link or expired, password update")}}},F=()=>{q.value=!1,U.dismissAll(),U.success("Password updated successfully"),H()},H=()=>{S("update:handleChangePasswordModalOpen",!1)},K=()=>{D.value=!D.value};return o((()=>{})),(a,e)=>{const l=f,o=s;return n(),r(o,{is:"form",open:B.ChangePasswordModalOpen,title:"Change Password",size:"small",actions:"right",onSubmit:w(E,["prevent"]),onClose:H,noclose:""},{content:d((()=>[t("div",g,[t("div",b,[t("div",P,[_,t("div",C,[i(t("input",{type:u(D)?"text":"password",name:"password",minlength:"8","onUpdate:modelValue":e[0]||(e[0]=s=>p(I)?I.value=s:null),required:"",class:"input",placeholder:"New password"},null,8,x),[[c,u(I)]])])])]),t("div",M,[t("div",j,[k,t("div",A,[i(t("input",{type:u(D)?"text":"password",name:"confirmPassword",minlength:"8","onUpdate:modelValue":e[1]||(e[1]=s=>p(z)?z.value=s:null),required:"",class:"input",placeholder:"Confirm password"},null,8,N),[[c,u(z)]])])])]),t("div",{class:"column is-12"},[t("div",{class:"field",style:{display:"flex","align-items":"center",gap:".5rem"}},[t("div",{class:"control"},[t("input",{type:"checkbox",class:"checkbox",onClick:K})]),O])])])])),action:d((()=>[m(l,{type:"submit",loading:u(q),color:"primary",raised:""},{default:d((()=>[v("Change Password")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{S as _};
