import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-cb52bb30.js";import{f as s,r as a,o,C as r,O as l,G as t,E as n,F as d,K as u,m as i,J as p,P as m}from"./index-9dbf32ea.js";import{_ as c}from"./VIcon.vue_vue_type_script_setup_true_lang-c5e69dd5.js";import{_}from"./VField.vue_vue_type_script_setup_true_lang-1be20e20.js";import{_ as f}from"./VControl-cf7cf0a9.js";import{_ as w}from"./VInput.vue_vue_type_script_setup_true_lang-75c77bf0.js";import{_ as y}from"./VLabel.vue_vue_type_script_setup_true_lang-34e02c40.js";import{u as g}from"./useAPI-0fa7cedf.js";import{u as P}from"./useNotyf-fe5bba50.js";const v={class:"modal-form columns is-multiline"},V=s({__name:"ChangePasswordModal",props:{isModalOpen:{type:Boolean,default:!1},userId:{default:""}},emits:["update:closeModalHandler","update:actionUpdateHandler"],setup(s,{emit:V}){const h=s,j=P(),C=g(),M=a(!1),x=a(!1),I=a({newPassword:"",confirmPassword:""}),b=()=>{V("update:closeModalHandler",!1)},N=async()=>{try{if(I.value.newPassword===I.value.confirmPassword){const e=await C.patch(`/api/users/${h.userId}/`,{password:I.value.confirmPassword});j.success("Your password changed successfully."),console.log(e),b()}else j.warning("New password and confirm password are not the same.")}catch(e){console.error(e),j.error("Something went wrong, please try again.")}};return o((()=>{console.log("in modal",h.isModalOpen)})),(s,a)=>{const o=y,g=w,P=f,V=_,j=c,C=m,O=e;return r(),l(O,{is:"form",open:h.isModalOpen,title:"Change Password",size:"small",actions:"right",onSubmit:p(N,["prevent"]),onClose:b},{content:t((()=>[n("div",v,[d(V,{class:"column is-12"},{default:t((()=>[d(o,null,{default:t((()=>[u("New Password")])),_:1}),d(P,null,{default:t((()=>[d(g,{required:"",modelValue:i(I).newPassword,"onUpdate:modelValue":a[0]||(a[0]=e=>i(I).newPassword=e),type:i(M)?"text":"password",placeholder:"New Password"},null,8,["modelValue","type"])])),_:1})])),_:1}),d(V,{class:"column is-12",label:"Confirm Password",addons:""},{default:t((()=>[d(P,{expanded:""},{default:t((()=>[d(g,{modelValue:i(I).confirmPassword,"onUpdate:modelValue":a[1]||(a[1]=e=>i(I).confirmPassword=e),type:i(M)?"text":"password",class:"input",placeholder:"Confirm Password"},null,8,["modelValue","type"])])),_:1}),d(P,null,{default:t((()=>[d(C,{color:"primary",onClick:a[2]||(a[2]=e=>M.value=!i(M))},{default:t((()=>[i(M)?(r(),l(j,{key:0,icon:"lucide:eye-off"})):(r(),l(j,{key:1,icon:"lucide:eye"}))])),_:1})])),_:1})])),_:1})])])),action:t((()=>[d(C,{loading:i(x),type:"submit",color:"warning",raised:""},{default:t((()=>[u(" Change Password ")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{V as _};
