import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-9b88597d.js";import{_ as a}from"./AddUpdateUser-1a8b290f.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-2ab41460.js";import{_ as t}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-e36f0448.js";import{_ as l,a as r}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-e5f72e27.js";import{_ as i}from"./VIconBox.vue_vue_type_style_index_0_lang-6b346bec.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-df29e64b.js";import{e as o,x as d,r as c,v as u,o as p,B as v,C as m,D as h,E as k,l as y,J as f,T as _,F as b,H as w,G as g,M as j,N as T,U as x,I as C}from"./index-19e874b3.js";import{F as D}from"./FullCalendar-c31e2db3.js";import{i as I}from"./index-55eb4335.js";import{u as M}from"./useAPI-fc7260cf.js";import{u as A}from"./useNotyf-38a1015d.js";import{u as N}from"./userSession-7178c796.js";const P={class:"lifestyle-dashboard lifestyle-dashboard-v3"},U={class:"illustration-header"},H={class:"p-4"},V={class:"header-meta"},K={class:"summary-stats"},O={class:"summary-stat"},W=h("span",null,"Role",-1),F={class:"summary-stat"},S=h("span",null,"Status",-1),L={class:"summary-stat"},R=h("span",null,"Phone",-1),$={class:"summary-stat"},q=h("span",null,"Email",-1),z={class:"summary-stat h-hidden-tablet-p"},B=h("span",null,"Mail notify ",-1),E={class:"summary-stat h-hidden-tablet-p"},J=h("span",null,"Password ",-1),Z={class:"columns is-multiline is-flex-tablet-p"},G={class:"column is-3"},X={class:"health-tile"},Y={class:"tile-head"},Q=h("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1),ee={class:"dark-inverted"},ae=h("h3",{class:"dark-inverted"},"Total Tasks",-1),se=h("p",null,"Number of tasks assigned within 30 Days duration",-1),te={class:"column is-3"},le={class:"health-tile"},re={class:"tile-head"},ie=h("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ne={class:"dark-inverted"},oe=h("h3",{class:"dark-inverted"},"Active Tasks",-1),de=h("p",null,"Tasks are currently active and worker notified",-1),ce={class:"column is-3"},ue={class:"health-tile"},pe={class:"tile-head"},ve=h("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1),me={class:"dark-inverted"},he=h("h3",{class:"dark-inverted"},"Pending Tasks",-1),ke=h("p",null,"Tasks that are pending and worker need to done.",-1),ye={class:"column is-3"},fe={class:"health-tile"},_e={class:"tile-head"},be=h("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1),we={class:"dark-inverted"},ge=h("h3",{class:"dark-inverted"},"Completed Tasks",-1),je=h("p",null," The worker has done his job on these tasks and assure by the manager ",-1),Te={class:"columns is-multiline"},xe={class:"list-flex-toolbar is-reversed"},Ce={class:"tabs-inner"},De={class:"tabs is-boxed"},Ie=[h("span",null,"Chronic View",-1)],Me=[h("span",null,"Calendar View",-1)],Ae=[h("span",null,"Cards View",-1)],Ne=[h("span",null,"Today Tasks",-1)],Pe=h("li",{class:"tab-naver"},null,-1),Ue={key:0,class:"column is-12"},He={key:1,class:"column is-12"},Ve={key:2,class:"column is-12"},Ke=["onClick"],Oe={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},We={style:{"padding-right":"10px",color:"#f1f1f1"}},Fe={key:3,class:"column is-12"},Se=o({__name:"IbexWorkerProfile",setup(o){const Se=N(),Le=A(),Re=M(),$e=d(),qe=c([]);u();const ze=c(""),Be=c(!1),Ee=c("chronic"),Je=c(""),Ze=c(!1),Ge=c({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});c(!1),c("all"),c("");const Xe=c(!1),Ye=c([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),Qe=c([]),ea=c([]),aa=c([]),sa=c({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),ta=c({plugins:[I],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),la=async()=>{try{Xe.value=!0;const e=await Re.get(`/api/users/${$e.params.id?$e.params.id:Se.user.id}/`);Ge.value=e.data,Xe.value=!1}catch(e){console.log(e)}},ra=c({}),ia=c(!1),na=c({});return p((async()=>{await la(),await(async()=>{try{const e=await Re.get(`/api/task/${$e.params.id?$e.params.id:Se.user.id}/worker-tasks/`);Ye.value=e.data,console.log("worker tasks",Ye.value)}catch(e){Ye.value=[]}})(),(async(e=!1)=>{try{const a=await Re.get(`/api/task/worker-today/${$e.params.id?$e.params.id:Se.user.id}/`);na.value=a.data,e&&Le.green("Tasks list Refreshed")}catch(a){console.log(a)}})(),qe.value=Ye.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:sa[e.status],status:e.status,project:e.project}))),aa.value=Ye.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:sa[e.project.status]}))),Qe.value=aa.value,ea.value=qe.value,ta.value={...ta.value,resources:Qe.value,events:ea.value},console.log("tasks",ta.value.events,"resources",ta.value.resources)})),(o,d)=>{const c=n,u=i,p=l,I=r,M=t,A=s,N=a,Se=e;return v(),m(x,null,[h("div",P,[h("div",U,[h("div",H,[k(c,{size:"xl",squared:"",picture:y(Ge).avatar,alt:""},null,8,["picture"])]),h("div",V,[h("h3",null,[f(_(y(Ge)?.username)+" ",1),h("i",{onClick:d[0]||(d[0]=e=>((e="")=>{ze.value=e,Be.value=!0})(y(Ge).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),h("div",K,[h("div",O,[W,h("span",null,_(y(Ge)?.role),1)]),h("div",F,[S,h("span",null,_(y(Ge)?.is_active?"Active":" In-Active"),1)]),h("div",L,[R,h("span",null,_(y(Ge)?.phoneNumber?y(Ge)?.phoneNumber:"N/A"),1)]),h("div",$,[q,h("span",null,_(y(Ge)?.email),1)]),h("div",z,[B,h("span",null,_(y(Ge).is_sentMail?"On":"Off"),1)]),h("div",E,[J,h("span",null,[h("i",{onClick:d[1]||(d[1]=e=>{return a=y(Ge).id,Je.value=a,void(Ze.value=!0);var a}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),h("div",Z,[h("div",G,[h("div",X,[h("div",Y,[k(u,{color:"primary"},{default:b((()=>[Q])),_:1}),h("h4",null,[h("span",ee,_(y(na)?.stats?.pending+y(na)?.stats?.active+y(na)?.stats?.completed),1)])]),ae,se])]),h("div",te,[h("div",le,[h("div",re,[k(u,{color:"primary"},{default:b((()=>[ie])),_:1}),h("h4",null,[h("span",ne,_(y(na)?.stats?.active?y(na)?.stats?.active:0),1)])]),oe,de])]),h("div",ce,[h("div",ue,[h("div",pe,[k(u,{color:"primary"},{default:b((()=>[ve])),_:1}),h("h4",null,[h("span",me,_(y(na)?.stats?.pending?y(na)?.stats?.pending:0),1)])]),he,ke])]),h("div",ye,[h("div",fe,[h("div",_e,[k(u,{color:"primary"},{default:b((()=>[be])),_:1}),h("h4",null,[h("span",we,_(y(na)?.stats?.completed?y(na)?.stats?.completed:0),1)])]),ge,je])])]),h("div",Te,[h("div",xe,[h("div",Ce,[h("div",De,[h("ul",null,[h("li",{class:w(["chronic"===y(Ee)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:d[2]||(d[2]=g(C((e=>Ee.value="chronic"),["prevent"]),["space"])),onClick:d[3]||(d[3]=e=>Ee.value="chronic")},Ie,32)],2),h("li",{class:w(["calendar"===y(Ee)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:d[4]||(d[4]=g(C((e=>Ee.value="calendar"),["prevent"]),["space"])),onClick:d[5]||(d[5]=e=>Ee.value="calendar")},Me,32)],2),h("li",{class:w(["cards"===y(Ee)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:d[6]||(d[6]=g(C((e=>Ee.value="cards"),["prevent"]),["space"])),onClick:d[7]||(d[7]=e=>Ee.value="cards")},Ae,32)],2),h("li",{class:w(["today"===y(Ee)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:d[8]||(d[8]=g(C((e=>Ee.value="today"),["prevent"]),["space"])),onClick:d[9]||(d[9]=e=>Ee.value="today")},Ne,32)],2),Pe])])])]),"chronic"==y(Ee)?(v(),m("div",Ue,[k(p,{userId:y($e).params.id},null,8,["userId"])])):j("",!0),"cards"==y(Ee)?(v(),m("div",He,[k(I,{workerId:y($e).params.id},null,8,["workerId"])])):j("",!0),"calendar"==y(Ee)?(v(),m("div",Ve,[k(y(D),{options:y(ta)},{eventContent:b((e=>[h("div",{onClick:a=>{return s=e.event.extendedProps,ra.value=s,console.log("dataa",s),void(ia.value=!0);var s},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},[h("p",Oe,_(e.event.title),1),h("p",We,_(new Date(e.event.start).toDateString())+" to "+_(new Date(e.event.end).toDateString()),1)],8,Ke)])),_:1},8,["options"])])):j("",!0),"today"==y(Ee)?(v(),m("div",Fe,[k(M,{workerId:y($e).params.id},null,8,["workerId"])])):j("",!0)]),y(Ze)?(v(),T(A,{key:0,isModalOpen:y(Ze),userId:y(Je),"onUpdate:closeModalHandler":d[10]||(d[10]=e=>Ze.value=!1)},null,8,["isModalOpen","userId"])):j("",!0),y(Be)?(v(),T(N,{key:1,isModalOpen:y(Be),userId:y(ze),userRole:"worker","onUpdate:closeModalHandler":d[11]||(d[11]=e=>Be.value=!1),"onUpdate:actionUpdateHandler":la},null,8,["isModalOpen","userId"])):j("",!0)]),y(ia)?(v(),T(Se,{key:0,taskDetailModal:y(ia),taskData:y(ra),"onUpdate:modalHandler":d[12]||(d[12]=e=>ia.value=!1)},null,8,["taskDetailModal","taskData"])):j("",!0)],64)}}});export{Se as _};
