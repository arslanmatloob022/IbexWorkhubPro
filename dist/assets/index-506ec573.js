import{_ as e,g as a}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-c1051849.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-c7f19dfa.js";import{_ as t}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-baf2e8a8.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-f24fafff.js";import{_ as n,c as i}from"./VFlexTable.vue_vue_type_style_index_0_lang-589285fb.js";import{_ as o}from"./VDropdown.vue_vue_type_style_index_0_lang-a1a23466.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-e9e29320.js";import{_ as u}from"./VTag.vue_vue_type_style_index_0_lang-0cf27db1.js";import{_ as d}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-0ba04464.js";import{e as c,v as p,r as _,Z as m,o as v,au as f,B as y,C as g,l as b,N as h,D as j,E as x,F as k,K as w,W as C,j as V,J as A,U as I,V as P,M as S,aR as O,O as L,ak as U,T as $,I as T,z as N}from"./index-eed4595b.js";import{_ as D,a as F}from"./VOption.vue_vue_type_style_index_0_lang-e974583f.js";import{_ as M}from"./VField.vue_vue_type_script_setup_true_lang-6adaf0c2.js";import{_ as W}from"./VControl-92022093.js";import{_ as E}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-2c2762a9.js";import{_ as J,a as R}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-4e95edd2.js";import{u as z}from"./useNotyf-7f8800ec.js";import{e as H,g as B}from"./useSupportElement-9655898e.js";import{u as Y}from"./viewWrapper-49b1eb9c.js";import{b as K}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-c16bfccb.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-aa677c7f.js";import"./VLabel.vue_vue_type_script_setup_true_lang-0725cdac.js";import"./useVFieldContext-66ed3347.js";import"./VRadio.vue_vue_type_style_index_0_lang-424b3e91.js";import"./projects-dark-4a371d8a.js";import"./WorksheetItems.vue_vue_type_script_setup_true_lang-0d78536e.js";import"./VInput.vue_vue_type_script_setup_true_lang-abd06a42.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-e4b9add2.js";import"./userSession-4917c7c6.js";import"./proposalItems-39315392.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-9502b1c5.js";import"./ckeditor-44eee7d7.js";import"./vue.runtime.esm-bundler-1b38661a.js";import"./ckeditor-ac11e158.js";import"./VFlex.vue_vue_type_style_index_0_lang-9b313c3b.js";import"./VIcon.vue_vue_type_script_setup_true_lang-71da949e.js";import"./useDropdown-b2f86207.js";import"./VPlaceloadWrap-4ffee760.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-452e4ff4.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-5229d532.js";import"./notyf-b2236610.js";import"./useThemeColors-8a707e48.js";const Q={key:1},q={class:"list-flex-toolbar flex-list-v1"},G={class:"page-content-inner"},X={class:"flex-list-wrapper flex-list-v1"},ee=j("img",{class:"light-image",src:J,alt:""},null,-1),ae=j("img",{class:"dark-image",src:R,alt:""},null,-1),le={key:0,class:"show-text-200"},te={class:"item-name"},se={class:"item-meta"},ne={key:1,class:"show-text-200"},ie={class:"item-name"},oe={class:"item-meta"},re={class:"item-name dark-inverted show-text-200"},ue={class:"item-meta show-text-200"},de={class:"item-name"},ce={class:"item-meta"},pe=["onClick"],_e=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),j("div",{class:"meta"},[j("span",null,"View"),j("span",null,"View user details")],-1)],me=["onClick"],ve=[j("div",{class:"icon"},[j("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),j("div",{class:"meta"},[j("span",null,"Add Proposals"),j("span",null,"Add new proposal to lead")],-1)],fe=["onClick"],ye=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),j("div",{class:"meta"},[j("span",null,"Edit"),j("span",null,"Update Lead Info")],-1)],ge=j("hr",{class:"dropdown-divider"},null,-1),be=["onClick"],he=[j("div",{class:"icon"},[j("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),j("div",{class:"meta"},[j("span",null,"Delete"),j("span",null,"Delete Proposal Permanently")],-1)],je=c({__name:"LeadsList",setup(c){const N=p(),J=z(),R=Z(),Y=_(),K=_({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),je=_(42),xe=_(!1),ke=_([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]),we={username:{label:"Contractor/Client",grow:!0},location:{label:"Job",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},Ce=async()=>{try{Y.value=!0;const e=await R.get("/api/job/leads/");K.value=e.data}catch(e){J.error(` ${e}, Lead`)}finally{Y.value=!1}},Ve=_(""),Ae=e=>{Ve.value=e,xe.value=!0},Ie=_({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Pe=async()=>{try{Y.value=!0;await R.delete(`/api/job/${Ve.value}/`);J.success("Proposal delete successfully"),Ce()}catch(e){J.error(` ${e}, Proposal`),J.error("Something went wrong please try later")}finally{Y.value=!1,Ie.value.isSweetAlertOpen=!1}},Se=_(""),Oe=_(""),Le=_(!1),Ue=m((()=>{if(Se.value){const e=new RegExp(Se.value,"i");return K.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return K.value})),$e=m((()=>Oe.value?Ue.value?.filter((e=>e.status==Oe.value)):Ue.value));return v((()=>{Ce()})),(c,p)=>{const _=E,m=W,v=M,J=D,R=F,Z=L,z=U,K=d,Ue=i,Te=u,Ne=r,De=o,Fe=n,Me=s,We=t,Ee=l,Je=e,Re=f("tooltip");return y(),g("div",null,[b(Y)?(y(),h(_,{key:0})):(y(),g("div",Q,[j("div",q,[x(v,null,{default:k((()=>[x(m,{icon:"feather:search"},{default:k((()=>[w(j("input",{"onUpdate:modelValue":p[0]||(p[0]=e=>V(Se)?Se.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,b(Se)]])])),_:1})])),_:1}),x(v,null,{default:k((()=>[x(m,{class:"has-icons-left",icon:"fas fa-globe"},{default:k((()=>[x(R,{modelValue:b(Oe),"onUpdate:modelValue":p[1]||(p[1]=e=>V(Oe)?Oe.value=e:null)},{default:k((()=>[x(J,{value:""},{default:k((()=>[A(" All ")])),_:1}),(y(!0),g(I,null,P(b(ke),(e=>(y(),h(J,{value:e.value},{default:k((()=>[A($(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1}),x(z,null,{default:k((()=>[x(Z,{onClick:p[2]||(p[2]=e=>Ae("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:k((()=>[A(" Lead Opportunity ")])),_:1})])),_:1})]),j("div",G,[j("div",X,[b($e)?.length?S("",!0):(y(),h(K,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ee,ae])),_:1})),b($e)?.length?(y(),h(Fe,{key:1,data:b($e),columns:we,compact:""},{body:k((()=>[x(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(y(!0),g(I,null,P(b($e),(e=>(y(),g("div",{key:e.id,class:"flex-table-item"},[x(Ue,{onClick:()=>{b(N).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:k((()=>[e.clientInfo?(y(),g("div",le,[j("span",te,$(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),j("span",se,[j("span",null,$(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):S("",!0),e.contractorInfo?(y(),g("div",ne,[j("span",ie,$(e.contractorInfo?.username?e.contractorInfo?.username:"N/A"),1),j("span",oe,[j("span",null,$(e.contractorInfo?.email?e.contractorInfo?.email:"N/A"),1)])])):S("",!0)])),_:2},1032,["onClick"]),x(Ue,{onClick:()=>{b(N).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:k((()=>[j("div",null,[j("span",re,$(e.title?e.title:"N/A"),1),j("span",ue,[j("span",null,$(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),x(Ue,{onClick:()=>{b(N).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:k((()=>[j("div",null,[j("span",de,$(b(H)(e.created_at)),1),j("span",ce,[j("span",null,"At:"+$(b(B)(e.created_at)),1)])])])),_:2},1032,["onClick"]),x(Ue,{onClick:()=>{b(N).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:k((()=>[x(Te,{color:b(a)[e.status],rounded:""},{default:k((()=>[A($(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),x(Ue,{onClick:()=>{b(N).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:k((()=>[j("div",null,[(y(!0),g(I,null,P(e.managers_list,(e=>w((y(),h(Ne,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Re,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),x(Ue,{column:{align:"end"}},{default:k((()=>[x(De,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:k((({close:a})=>[j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{b(N).push(`/sidebar/dashboard/jobs/${e.id}`)}},_e,8,pe),j("a",{role:"menuitem",onClick:a=>{return l=e.id,Ve.value=l,void(Le.value=!Le.value);var l},class:"dropdown-item is-media"},ve,8,me),j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:T((a=>Ae(e.id)),["prevent"])},ye,8,fe),ge,j("a",{role:"menuitem",class:"dropdown-item is-media",onClick:T((a=>{return l=e.id,Ve.value=l,void(Ie.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var l}),["prevent"])},he,8,be)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):S("",!0),b($e)?.length>5?(y(),h(Me,{key:2,"current-page":b(je),"onUpdate:currentPage":p[3]||(p[3]=e=>V(je)?je.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):S("",!0)])])])),b(xe)?(y(),h(We,{key:2,addUpdateLeadModal:b(xe),leadId:b(Ve),"onUpdate:modalHandler":p[4]||(p[4]=e=>xe.value=!1),"onUpdate:OnSuccess":Ce},null,8,["addUpdateLeadModal","leadId"])):S("",!0),b(Ie).isSweetAlertOpen?(y(),h(Ee,{key:3,isSweetAlertOpen:b(Ie).isSweetAlertOpen,title:b(Ie).title,subtitle:b(Ie).subtitle,loading:b(Y),btntext:b(Ie).btntext,onConfirm:Pe,onCancel:()=>b(Ie).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):S("",!0),b(Le)?(y(),h(Je,{key:4,"lead-proposal-modal":b(Le),"lead-id":b(Ve),"onUpdate:modalHandler":p[5]||(p[5]=e=>Le.value=!1),"onUpdate:OnSuccess":Ce},null,8,["lead-proposal-modal","lead-id"])):S("",!0)])}}}),xe=c({__name:"index",setup:e=>(Y().setPageTitle("Leads"),N({title:"Leads - Ibex"}),(e,a)=>{const l=je;return y(),g("div",null,[x(l)])})});"function"==typeof K&&K(xe);export{xe as default};
