import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-2f6d3c89.js";import{_ as a}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-dcd886aa.js";import{_ as l}from"./AddUpdateUser-b4c2c949.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-d8b75cc8.js";import{_ as t}from"./VDropdown.vue_vue_type_style_index_0_lang-02638d94.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-1598f1d1.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-c1d7da00.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-29fbd14b.js";import{e as o,r as u,t as d,Z as p,o as c,y as _,z as v,l as m,H as g,C as y,A as f,B as h,S as w,T as j,j as k,J as x,D as b,O as C,Q as V,R as A,aR as P,P as M,E as S,v as O,ak as I}from"./index-1c9998f2.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-d32c83cb.js";import{_ as E}from"./VControl-d9c5d1bd.js";import{_ as D}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-c711243f.js";import{_ as R,a as T}from"./search-1-dark-61831a90.js";import{u as F}from"./useAPI-a1408a11.js";import{u as H}from"./useNotyf-431b7a11.js";import{u as W}from"./viewWrapper-5cfdb7bc.js";import"./VModal.vue_vue_type_style_index_0_lang-55fd0f65.js";import"./VIcon.vue_vue_type_script_setup_true_lang-59cf53a7.js";import"./VInput.vue_vue_type_script_setup_true_lang-0fa40a56.js";import"./useVFieldContext-ca37e9ed.js";import"./VLabel.vue_vue_type_script_setup_true_lang-802eeb4e.js";import"./VRadio.vue_vue_type_style_index_0_lang-c9c832f4.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-1d8eb6c3.js";import"./VFilePond.vue_vue_type_script_lang-bec9b940.js";import"./useSupportElement-5b7eeae1.js";import"./userSession-b81fab96.js";import"./VFlex.vue_vue_type_style_index_0_lang-e38b5938.js";import"./useDropdown-b616927f.js";import"./VPlaceloadWrap-8d4cee10.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-cf21e824.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-b691e2ed.js";import"./notyf-be42da4a.js";import"./useThemeColors-a418b894.js";const B={key:1},N={class:"list-view-toolbar"},z={class:"list-info"},L={key:0},Q={key:1},Y={class:"buttons"},$={class:"page-content-inner"},q={class:"list-view list-view-v1"},G=y("img",{class:"light-image",src:R,alt:""},null,-1),J=y("img",{class:"dark-image",src:T,alt:""},null,-1),Z={class:"list-view-inner"},K={class:"list-view-item-inner"},X=["onClick"],ee=y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),ae={class:"meta-right"},le={class:"tags"},se={class:"stats"},te={class:"stat"},ie=y("span",null,"Email notify",-1),ne=y("div",{class:"separator"},null,-1),re=["onClick"],oe=y("span",null,"Status",-1),ue=["onClick"],de=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-user-alt"})],-1),y("div",{class:"meta"},[y("span",null,"Profile"),y("span",null,"View profile")],-1)],pe=["onClick"],ce=[y("div",{class:"icon"},[y("i",{class:"lnil lnil-pencil","aria-hidden":"true"})],-1),y("div",{class:"meta"},[y("span",null,"Edit"),y("span",null,"Edit Manager info")],-1)],_e=["onClick"],ve=[y("div",{class:"icon"},[y("i",{class:"lnil lnil-code","aria-hidden":"true"})],-1),y("div",{class:"meta"},[y("span",null,"Password"),y("span",null,"Change user password")],-1)],me=y("hr",{class:"dropdown-divider"},null,-1),ge=["onClick"],ye=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete this user permanently")],-1)],fe=o({__name:"IbexManagers",setup(o){const O=H(),I=F(),R=u(!1),T=u(!1),W=u(""),fe=u(""),he=u(""),we=u(!1),je=d(),ke=u([{id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:null,is_active:!0,phoneNumber:"",username:"",is_sentMail:!1}]),xe=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),be=async()=>{try{T.value=!0;const e=await I.get("/api/users/by-role/manager/",{});ke.value=e.data,R.value=!1}catch(e){console.log(e)}finally{T.value=!1}},Ce=(e="")=>{W.value=e,R.value=!R.value},Ve=p((()=>he.value?ke.value.filter((e=>e.username.match(new RegExp(he.value,"i"))||e.email.match(new RegExp(he.value,"i")))):ke.value)),Ae=async()=>{try{T.value=!0;await I.delete(`/api/users/${W.value}/`);be(),xe.value.isSweetAlertOpen=!1,O.success("Manager deleted successfully")}catch(e){console.log(e)}finally{T.value=!1}},Pe=e=>{je.push(`/sidebar/dashboard/managers/${e}`)};return c((()=>{be()})),(o,u)=>{const d=D,p=E,c=U,O=S,I=r,F=n,H=i,je=t,ke=s,Me=l,Se=a,Oe=e;return _(),v(V,null,[m(T)?(_(),g(d,{key:0})):(_(),v("div",B,[y("div",N,[f(c,null,{default:h((()=>[f(p,{icon:"feather:search"},{default:h((()=>[w(y("input",{"onUpdate:modelValue":u[0]||(u[0]=e=>k(he)?he.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[j,m(he)]])])),_:1})])),_:1}),y("div",z,[1===m(Ve).length?(_(),v("span",L,"1 record found")):(_(),v("span",Q,x(m(Ve).length)+" records found",1))]),y("div",Y,[f(O,{onClick:u[1]||(u[1]=e=>Ce()),color:"primary",icon:"fas fa-plus",elevated:""},{default:h((()=>[b(" Manager ")])),_:1})])]),y("div",$,[y("div",q,[f(I,{class:C([0!==m(Ve).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[G,J])),_:1},8,["class"]),y("div",Z,[f(P,{name:"list-complete",tag:"div"},{default:h((()=>[(_(!0),v(V,null,A(m(Ve),((e,a)=>(_(),v("div",{key:a,class:"list-view-item"},[y("div",K,[f(F,{onClick:a=>Pe(e.id),picture:e.avatar,size:"large"},null,8,["onClick","picture"]),y("div",{onClick:a=>Pe(e.id),class:"meta-left"},[y("h3",null,x(e.username),1),y("span",null,[ee,y("span",null,x(e.email),1)])],8,X),y("div",ae,[y("div",le,[f(H,{label:e.role.replace(/^\w/,(e=>e.toUpperCase())),color:"warning",rounded:"",elevated:""},null,8,["label"])]),y("div",se,[y("div",te,[y("span",null,x(e.is_sentMail?"On ":"Off"),1),ie]),ne,y("div",{onClick:a=>Ce(e.id),class:"stat"},[y("span",null,x(e.is_active?"Active":"In-Active"),1),oe],8,re)]),f(je,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[y("a",{role:"menuitem",onClick:a=>Pe(e.id),class:"dropdown-item is-media"},de,8,ue),y("a",{role:"menuitem",onClick:()=>{R.value=!0,W.value=e.id},class:"dropdown-item is-media"},ce,8,pe),y("a",{onClick:a=>{return l=e.id,fe.value=l,void(we.value=!0);var l},role:"menuitem",class:"dropdown-item is-media"},ve,8,_e),me,y("a",{role:"menuitem",onClick:a=>{return l=e.id,W.value=l,void(xe.value={title:"Are you sure?",subtitle:"You will not be able to recover this Manager again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l},class:"dropdown-item is-media"},ye,8,ge)])),_:2},1024)])])])))),128))])),_:1})])]),m(Ve).length>5?(_(),g(ke,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):M("",!0)])])),m(R)?(_(),g(Me,{key:2,"is-modal-open":m(R),"user-role":"manager","user-id":m(W),"onUpdate:closeModalHandler":u[2]||(u[2]=e=>R.value=!1),"onUpdate:actionUpdateHandler":be},null,8,["is-modal-open","user-id"])):M("",!0),m(we)?(_(),g(Se,{key:3,isModalOpen:m(we),userId:m(fe),"onUpdate:closeModalHandler":u[3]||(u[3]=e=>we.value=!1)},null,8,["isModalOpen","userId"])):M("",!0),m(xe).isSweetAlertOpen?(_(),g(Oe,{key:4,isSweetAlertOpen:m(xe).isSweetAlertOpen,title:m(xe).title,loading:!1,subtitle:m(xe).subtitle,btntext:m(xe).btntext,onConfirm:Ae,onCancel:()=>m(xe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):M("",!0)],64)}}}),he={class:"page-content-inner"},we=y("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),je=o({__name:"index",setup:e=>(W().setPageTitle("Managers"),O({title:"Managers"}),(e,a)=>{const l=fe;return _(),v("div",he,[(_(),g(I,{to:"[data-teleport-bg]"},[we])),f(l,{class:"has-navbar-spacing"})])})});export{je as default};
