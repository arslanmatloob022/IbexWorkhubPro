import{_ as a}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-ecdf18ea.js";import{_ as e}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-5f020270.js";import{_ as s}from"./WorkerTasks-36d350a0.js";import{_ as t}from"./VIconBox.vue_vue_type_style_index_0_lang-5a6bbdc9.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-b002f788.js";import{e as i,N as r,r as n,t as o,o as d,y as c,z as u,C as p,A as v,l as m,D as h,J as y,B as k,O as f,I as _,S as w,Y as g,P as b,H as j,K as x}from"./index-023a2237.js";import{F as T}from"./FullCalendar-6c94dac6.js";import{i as C}from"./index-f52ed8ce.js";import{u as I}from"./useAPI-329c7502.js";import{u as D}from"./useNotyf-c16238a4.js";import{u as M}from"./userSession-1b1da0d4.js";const A={class:"lifestyle-dashboard lifestyle-dashboard-v3"},P={class:"illustration-header"},N={class:"p-4"},W={class:"header-meta"},K={class:"summary-stats"},O={class:"summary-stat"},S=p("span",null,"Role",-1),V={class:"summary-stat"},F=p("span",null,"Status",-1),H={class:"summary-stat"},L=p("span",null,"Phone",-1),$={class:"summary-stat"},z=p("span",null,"Email",-1),B={class:"summary-stat h-hidden-tablet-p"},R=p("span",null,"Mail notify ",-1),U={class:"summary-stat h-hidden-tablet-p"},Y=p("span",null,"Password ",-1),q={class:"columns is-multiline is-flex-tablet-p"},E={class:"column is-3"},J={class:"health-tile"},X={class:"tile-head"},G=p("i",{"aria-hidden":"true",class:"fas fa-weight"},null,-1),Q={class:"dark-inverted"},Z=p("h3",{class:"dark-inverted"},"Total Tasks",-1),aa=p("p",null,"Number of tasks assigned within 30 Days duration",-1),ea={class:"column is-3"},sa={class:"health-tile"},ta={class:"tile-head"},la=p("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ia={class:"dark-inverted"},ra=p("h3",{class:"dark-inverted"},"Active Tasks",-1),na=p("p",null,"Tasks are currently active and worker notified",-1),oa={class:"column is-3"},da={class:"health-tile"},ca={class:"tile-head"},ua=p("i",{"aria-hidden":"true",class:"fas fa-heart"},null,-1),pa={class:"dark-inverted"},va=p("h3",{class:"dark-inverted"},"Pending Tasks",-1),ma=p("p",null,"Tasks that are pending and worker need to done.",-1),ha={class:"column is-3"},ya={class:"health-tile"},ka={class:"tile-head"},fa=p("i",{"aria-hidden":"true",class:"fas fa-weight"},null,-1),_a={class:"dark-inverted"},wa=p("h3",{class:"dark-inverted"},"Completed Tasks",-1),ga=p("p",null," The worker has done his job on these tasks and assure by the manager ",-1),ba={class:"columns is-multiline"},ja={class:"list-flex-toolbar is-reversed"},xa={class:"tabs-inner"},Ta={class:"tabs is-boxed"},Ca=[p("span",null,"Cards View",-1)],Ia=[p("span",null,"Calendar View",-1)],Da=[p("span",null,"Today Tasks",-1)],Ma=p("li",{class:"tab-naver"},null,-1),Aa={class:"column is-12"},Pa={key:0,class:"column is-12"},Na={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},Wa={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},Ka={style:{"margin-top":"8px","padding-right":"10px"}},Oa={key:1,class:"column is-12"},Sa=i({__name:"IbexWorkerProfile",setup(i){const Sa=M(),Va=D(),Fa=I(),Ha=r(),La=n([]);o();const $a=n("cards"),za=n(""),Ba=n(!1),Ra=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all"),n("");const Ua=n(!1),Ya=n([]),qa=n([]),Ea=n([]),Ja=n([]),Xa=n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),Ga=n({plugins:[C],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),Qa=n({});return d((async()=>{await(async()=>{try{Ua.value=!0;const a=await Fa.get(`/api/users/${Ha.params.id?Ha.params.id:Sa.user.id}`);Ra.value=a.data,Ua.value=!1}catch(a){console.log(a)}})(),await(async()=>{try{const a=await Fa.get(`/api/task/${Ha.params.id?Ha.params.id:Sa.user.id}/worker-tasks/`);Ya.value=a.data,console.log("worker tasks",Ya.value)}catch(a){Ya.value=[]}})(),(async(a=!1)=>{try{const e=await Fa.get(`/api/task/worker-today/${Ha.params.id?Ha.params.id:Sa.user.id}/`);Qa.value=e.data,a&&Va.green("Tasks list Refreshed")}catch(e){console.log(e)}})(),La.value=Ya.value.map((a=>({id:a.id,resourceId:a.project.id,start:a.startDate,end:a.endDate,title:a.title,color:a.color,description:a.description,workers:a.workers,borderColor:Xa[a.status],status:a.status}))),Ja.value=Ya.value.map((a=>({id:a.project.id,start:a.project.startDate,end:a.project.endDate,title:a.project.title,address:a.project.address,status:a.project.status,color:Xa[a.project.status]}))),qa.value=Ja.value,Ea.value=La.value,Ga.value={...Ga.value,resources:qa.value,events:Ea.value},console.log("tasks",Ga.value.events,"resources",Ga.value.resources)})),(i,r)=>{const n=l,o=t,d=s,C=e,I=a;return c(),u("div",A,[p("div",P,[p("div",N,[v(n,{size:"xl",squared:"",picture:m(Ra).avatar,alt:""},null,8,["picture"])]),p("div",W,[p("h3",null,[h(y(m(Ra)?.username)+" ",1),p("i",{onClick:r[0]||(r[0]=a=>{m(Ra).id}),class:"fas fa-pencil-alt ml-2","aria-hidden":"true"})]),p("div",K,[p("div",O,[p("span",null,y(m(Ra)?.role),1),S]),p("div",V,[p("span",null,y(m(Ra)?.is_active?"Active":" In-Active"),1),F]),p("div",H,[p("span",null,y(m(Ra)?.phoneNumber?m(Ra)?.phoneNumber:"N/A"),1),L]),p("div",$,[p("span",null,y(m(Ra)?.email),1),z]),p("div",B,[p("span",null,y(m(Ra).is_sentMail?"On":"Off"),1),R]),p("div",U,[p("span",null,[p("i",{onClick:r[1]||(r[1]=a=>{return e=m(Ra).id,za.value=e,void(Ba.value=!0);var e}),class:"fas fa-lock","aria-hidden":"true"})]),Y])])])]),p("div",q,[p("div",E,[p("div",J,[p("div",X,[v(o,{color:"primary"},{default:k((()=>[G])),_:1}),p("h4",null,[p("span",Q,y(m(Qa)?.stats?.pending+m(Qa)?.stats?.active+m(Qa)?.stats?.active),1)])]),Z,aa])]),p("div",ea,[p("div",sa,[p("div",ta,[v(o,{color:"primary"},{default:k((()=>[la])),_:1}),p("h4",null,[p("span",ia,y(m(Qa)?.stats?.active?m(Qa)?.stats?.active:0),1)])]),ra,na])]),p("div",oa,[p("div",da,[p("div",ca,[v(o,{color:"primary"},{default:k((()=>[ua])),_:1}),p("h4",null,[p("span",pa,y(m(Qa)?.stats?.pending?m(Qa)?.stats?.pending:0),1)])]),va,ma])]),p("div",ha,[p("div",ya,[p("div",ka,[v(o,{color:"primary"},{default:k((()=>[fa])),_:1}),p("h4",null,[p("span",_a,y(m(Qa)?.stats?.completed?m(Qa)?.stats?.completed:0),1)])]),wa,ga])])]),p("div",ba,[p("div",ja,[p("div",xa,[p("div",Ta,[p("ul",null,[p("li",{class:f(["cards"===m($a)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:r[2]||(r[2]=_(x((a=>$a.value="cards"),["prevent"]),["space"])),onClick:r[3]||(r[3]=a=>$a.value="cards")},Ca,32)],2),p("li",{class:f(["calendar"===m($a)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:r[4]||(r[4]=_(x((a=>$a.value="calendar"),["prevent"]),["space"])),onClick:r[5]||(r[5]=a=>$a.value="calendar")},Ia,32)],2),p("li",{class:f(["today"===m($a)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:r[6]||(r[6]=_(x((a=>$a.value="today"),["prevent"]),["space"])),onClick:r[7]||(r[7]=a=>$a.value="today")},Da,32)],2),Ma])])])]),w(p("div",Aa,[v(d,{workerId:m(Ha).params.id},null,8,["workerId"])],512),[[g,"cards"==m($a)]]),"calendar"==m($a)?(c(),u("div",Pa,[v(m(T),{options:m(Ga)},{eventContent:k((a=>[p("div",Na,[p("p",Wa,y(a.event.title),1),p("div",null,[p("p",Ka,y(new Date(a.event.start).toDateString())+" to "+y(new Date(a.event.end).toDateString()),1)])])])),_:1},8,["options"])])):b("",!0),"today"==m($a)?(c(),u("div",Oa,[v(C,{workerId:m(Ha).params.id},null,8,["workerId"])])):b("",!0)]),m(Ba)?(c(),j(I,{key:0,isModalOpen:m(Ba),userId:m(za),"onUpdate:closeModalHandler":r[8]||(r[8]=a=>Ba.value=!1)},null,8,["isModalOpen","userId"])):b("",!0)])}}});export{Sa as _};
