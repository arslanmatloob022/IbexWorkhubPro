import{_ as a}from"./VBlock.vue_vue_type_style_index_0_lang-2dd6e6c2.js";import{_ as e}from"./VAvatarStack.vue_vue_type_script_setup_true_lang-3ea996ee.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-ece7eefd.js";import{u as s}from"./useNotyf-0268ce1e.js";import{u as r}from"./useAPI-8d821f52.js";import{e as o,N as i,t as l,r as c,o as d,y as n,z as u,C as p,Q as m,R as _,l as k,H as f,B as v,A as y,P as g,J as h}from"./index-07330caa.js";const w={class:"list-widget is-straight"},j={class:"widget-head"},T=p("h3",{class:"dark-inverted"},"Tasks of Today",-1),b={class:"inner-list"},I={href:"#"},C=o({__name:"ProjectTodayTasks",props:{projectId:{default:""},straight:{type:Boolean},workerId:{}},setup(o){const C=o,x=r(),A=s();i(),l();const B=c({tasks:[{id:"1a82e8dc-496e-45be-a5f6-1b202abdadc8",workers:[{id:"fe8b01ec-1f56-4ecd-886e-31defc4a96a1",username:"Others",email:"others@gmail.com",role:"worker",avatar:"https://res.cloudinary.com/dcqeugna3/image/upload/v1/media/static/users_avatars/logo1_pfu1ge"}],color:"#2c3e50",title:"Fifth title",description:"Description",startDate:"2024-10-02",endDate:"2024-10-16",status:"active",is_active:!1,updated:"2024-10-05T05:29:28.348706Z",created:"2024-10-05T05:29:28.348727Z",costCode:"Code",quantity:"Quanityt",unit:"Unit",fileName:null,note:null,priority:"Medium",project:"e7f43430-677e-4b23-b420-fca1fe4310f2"}],stats:{active:1,completed:1,pending:1}}),D=async a=>{try{const e=await x.get(`/api/task/today-tasks/?project=${C.projectId}`);B.value=e.data.map((a=>({...a,workers:a.workers.map((a=>({...a,picture:a?.avatar,initials:a?.username?.slice(0,2).toUpperCase()})))}))),a&&A.green("Tasks list Refreshed"),console.log("data",B.value)}catch(e){console.log(e)}};return d((()=>{C.workerId?(async a=>{try{const e=await x.get(`/api/task/worker-today/${C.workerId}/`);B.value=e.data,a&&A.green("Tasks list Refreshed"),console.log("data",B.value)}catch(e){console.log(e)}})(!1):D(!1)})),(s,r)=>{const o=t,i=e,l=a;return n(),u("div",w,[p("div",j,[T,p("i",{onClick:r[0]||(r[0]=a=>D(!0)),style:{color:"var(--primary)"},class:"fas fa-redo cu-pointer","aria-hidden":"true"})]),p("div",b,[p("div",null,[(n(!0),u(m,null,_(k(B).tasks,(a=>(n(),f(l,{key:a.id,center:"",lighter:"",class:"inner-list-item"},{icon:v((()=>[y(o,{icon:"lucide:star","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:v((()=>[a.workers.length?(n(),f(i,{key:0,avatars:a.workers,size:"small",limit:3},null,8,["avatars"])):g("",!0)])),default:v((()=>[p("a",I,h(a.title),1),p("span",null,h(a.status),1)])),_:2},1024)))),128))])])])}}});export{C as _};
