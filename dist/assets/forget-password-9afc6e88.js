import{e as a,r as s,t as e,v as l,x as o,o as t,z as i,A as d,B as r,C as u,D as n,E as c,F as m,G as p,l as v,H as _,I as h,J as f,j as g,X as y,O as b,P as w,Q as j,R as x}from"./index-d3607b72.js";import{_ as k}from"./VCheckbox.vue_vue_type_style_index_0_lang-1887f335.js";import{_ as V}from"./VField.vue_vue_type_script_setup_true_lang-7194f2ec.js";import{_ as C}from"./VControl-af340e66.js";import{_ as P}from"./VInput.vue_vue_type_script_setup_true_lang-98d3f690.js";import{_ as A}from"./VLabel.vue_vue_type_script_setup_true_lang-d5394048.js";import{_ as I}from"./AnimatedLogo-0799626e.js";import{_ as S}from"./station-d527b828.js";import{u as q}from"./useNotyf-e593497f.js";import{u as L}from"./useAPI-f59c28d8.js";import{u as R}from"./layoutSwitcher-c4226c8c.js";import"./useVFieldContext-79f5d77a.js";import"./notyf-673ce986.js";import"./useThemeColors-49b0314a.js";import"./userSession-4db45a17.js";const z=a=>(w("data-v-7c3a154a"),a=a(),j(),a),D={class:"modern-login"},F=z((()=>n("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),U={class:"columns is-gapless is-vcentered"},B=y('<div class="column is-relative is-8 h-hidden-mobile h-hidden-tablet-p" data-v-7c3a154a><div class="hero is-fullheight is-image" data-v-7c3a154a><div class="hero-body" data-v-7c3a154a><div class="container" data-v-7c3a154a><div class="columns" data-v-7c3a154a><div class="column" data-v-7c3a154a><img style="height:460px;" class="hero-image" src="'+S+'" alt="" data-v-7c3a154a></div></div></div></div></div></div>',1),J={class:"column is-4 is-relative"},K={class:"top-tools"},N=["checked"],O=z((()=>n("span",null,null,-1))),X={class:"is-form"},E={class:"is-form-inner"},G=[z((()=>n("h2",null,"Reset Password",-1)))],H=["onSubmit"],M={class:"button-wrap has-help"},Q=x(a({__name:"forget-password",setup(a){R();const y=s("login"),w=s(!1),j=e(),x=l(),S=o(),z=q(),Q=L(),T=s(""),W=s(""),Y=s(""),Z=s(""),$=async()=>{if(!w.value){if(T.value!=W.value)return void z.error("Both password and confirm password  must be matched");w.value=!0;try{await Q.post("/api/auth/set-password/",{email:Z.value,password:T.value,token:Y.value,confirm_password:W.value});aa()}catch(a){w.value=!1,z.dismissAll(),z.error("Invalid or expired link, password update")}}},aa=()=>{w.value=!1,z.dismissAll(),z.success("Password updated successfully"),x.push("/")};t((()=>{Y.value=S.query.token,Z.value=S.query.email})),i({title:"Reset Password - Ibex"});const sa=s(!1),ea=s("Password"),la=()=>{ea.value="Password"===ea.value?"text":"Password"};return(a,s)=>{const e=I,l=d("RouterLink"),o=A,t=P,i=C,x=V,S=k,q=b;return r(),u("div",D,[F,n("div",U,[B,n("div",J,[n("div",K,[c(l,{to:"/",class:"top-logo"},{default:m((()=>[c(e,{width:"38px",height:"38px"})])),_:1}),n("label",{class:"dark-mode",tabindex:"0",role:"button",onKeydown:s[1]||(s[1]=p(h((a=>a.target.click()),["prevent"]),["space"]))},[n("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!v(j).isDark,onChange:s[0]||(s[0]=(...a)=>v(j).onChange&&v(j).onChange(...a))},null,40,N),O],32)]),n("div",X,[n("div",E,[n("div",{class:_(["form-text",["login"!==v(y)&&"is-hidden"]])},G,2),n("form",{method:"post","data-cy":"login-form",class:_([["login"!==v(y)&&"is-hidden"],"login-wrapper"]),onSubmit:h($,["prevent"])},[c(x,null,{default:m((()=>[c(i,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[f(" Password ")])),_:1}),c(t,{modelValue:v(T),"onUpdate:modelValue":s[2]||(s[2]=a=>g(T)?T.value=a:null),type:v(ea),required:"",minlength:"6"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(x,null,{default:m((()=>[c(i,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[f(" Confirm Password ")])),_:1}),c(t,{modelValue:v(W),"onUpdate:modelValue":s[3]||(s[3]=a=>g(W)?W.value=a:null),required:"",type:v(ea),minlength:"6"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(x,null,{default:m((()=>[c(i,{class:"is-flex"},{default:m((()=>[c(i,{raw:"",subcontrol:""},{default:m((()=>[c(S,{modelValue:v(sa),"onUpdate:modelValue":s[4]||(s[4]=a=>g(sa)?sa.value=a:null),label:"Show Password",color:"primary",onClick:la},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n("div",M,[c(q,{id:"login-button",loading:v(w),color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:m((()=>[f(" Submit ")])),_:1},8,["loading"])])],42,H)])])])])])}}}),[["__scopeId","data-v-7c3a154a"]]);export{Q as default};
