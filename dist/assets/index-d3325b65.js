import{_ as e}from"./VField.vue_vue_type_script_setup_true_lang-df70cfb6.js";import{_ as t}from"./VControl-f99a3ad4.js";import{_ as a}from"./VInput.vue_vue_type_script_setup_true_lang-29be2738.js";import{f as s,b as r,r as o,o as l,C as i,D as n,E as u,F as c,G as d,m as p,k as m,J as v,U as f,A as _,O as h,am as y}from"./index-9ef04237.js";import{F as j}from"./FullCalendar-6959ff0e.js";import{i as g}from"./index-04e05ac8.js";import{i as b}from"./index-5790eff9.js";import{u as k}from"./useNotyf-001b909d.js";import{u as w}from"./useAPI-fc2f6b33.js";import{u as x}from"./viewWrapper-e876e526.js";import{b as C}from"./route-block-83d24a4e.js";import"./VLabel.vue_vue_type_script_setup_true_lang-e928505a.js";import"./useVFieldContext-8dce0bfe.js";import"./index-37bedc79.js";import"./notyf-80a1de85.js";import"./useThemeColors-17c719a4.js";const I={class:"main-div-worker"},T=["onSubmit"],V={class:"datatable-toolbar"},W={class:"workers-task-calendar"},D={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},F={style:{"font-weight":"500","margin-bottom":"0px","padding-left":"10px"}},S=s({__name:"ProjectWorkerCalendar",setup(s){const _=w();r(),k();const h=o(!1);o(!1),o(""),o(!1),o("all");const y=o(""),x=o([]);o([]);const C=o([]);o(0),o(""),o("");const S=o(0),L=o(!0);o(!1),o(0),o({all:"all",active:"active",pending:"pending",completed:"completed"});const E=o({pending:"#8392ab",active:"#fbcf33",completed:"#82d616",canceled:"#344767"}),P=o({plugins:[g,b],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",themeSystem:"cerulean",resourceAreaWidth:"20%",resourceGroupField:"title",resourcesInitiallyExpanded:!1,selectable:!0,headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Workers",resources:[],resourceId:S.value}),A=e=>{let t=new Date(e);return t.setDate(t.getDate()+1),t.toISOString().slice(0,10)},M=()=>{let e=[],t=[];t=y.value?U.value.filter((e=>e.username.toLowerCase().includes(y.value.toLowerCase()))):U.value,t.forEach((t=>{e.push({id:t.id,title:t.username})})),P.value.resources=e},U=o([]),G=async()=>{try{h.value=!0,console.log("inside all projects func");const e=await _.get("/api/users/by-role/worker/",{});U.value=e.data,h.value=!1}catch(e){console.error(e),U.value=[],h.value=!1}},H=async()=>{try{const e=await _.get("/api/task/all-tasks/",{});x.value=e.data}catch(e){x.value=[]}};return l((async()=>{await Promise.all([G(),H()]),(()=>{console.log(C.value);const e=[],t=[];U.value.forEach((a=>{x.value.forEach((t=>{t.workers.includes(a.id)&&e.push({id:t.id,resourceId:a.id,project:t.project,start:t.startDate,end:A(t.endDate),title:t.title,color:t.color,description:t.description,borderColor:E[t.status],projectInfo:t.projectInfo})})),t.push({id:a.id,title:a.username})})),P.value.resources=t,P.value.events=[...e]})(),console.log("projects",P.value),L.value=!0})),(s,r)=>{const o=a,l=t,_=e;return i(),n("div",I,[u("form",{onSubmit:v(M,["prevent"])},[u("div",V,[c(_,{elevated:""},{default:d((()=>[c(l,{icon:"fas fa-search"},{default:d((()=>[c(o,{type:"text",placeholder:"Search worker...",modelValue:p(y),"onUpdate:modelValue":r[0]||(r[0]=e=>m(y)?y.value=e:null),onInput:r[1]||(r[1]=e=>M()),class:""},null,8,["modelValue"])])),_:1})])),_:1})])],40,T),u("div",W,[c(p(j),{options:p(P)},{eventContent:d((e=>[u("div",D,[u("p",F," ("+f(e.event.extendedProps.projectInfo.title)+") "+f(e.event.title),1)])])),_:1},8,["options"])])])}}}),L={class:"page-content-inner"},E=u("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),P=s({__name:"index",setup:e=>(x().setPageTitle("Workers Tasks"),_({title:"Workers tasks"}),(e,t)=>{const a=S;return i(),n("div",L,[(i(),h(y,{to:"[data-teleport-bg]"},[E])),c(a)])})});"function"==typeof C&&C(P);export{P as default};
