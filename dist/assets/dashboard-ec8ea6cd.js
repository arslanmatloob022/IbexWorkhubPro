import{_ as e}from"./VField.vue_vue_type_script_setup_true_lang-3f7007e1.js";import{_ as s}from"./VControl-15a2aeb5.js";import{_ as a,a as t}from"./VOption.vue_vue_type_style_index_0_lang-3cad5f01.js";import{u as o}from"./useAPI-f85d8e56.js";import{u as l}from"./useThemeColors-fc123429.js";import{A as i}from"./vue3-apexcharts.common-430c5f4c.js";import{u as n}from"./company-be40a74f.js";import{e as r,r as c,t as d,s as u,br as p,o as m,y as v,z as y,C as g,D as h,J as _,Q as f,R as b,A as w,B as x,H as k,l as j,P as C,W as S,X as A,L as P,v as I}from"./index-54a9a01d.js";import{u as D}from"./viewWrapper-b565bc40.js";import"./VLabel.vue_vue_type_script_setup_true_lang-997dbbc3.js";import"./useVFieldContext-ed921140.js";import"./userSession-58a3ddc7.js";import"./useNotyf-18e668a8.js";import"./notyf-85dfaa3b.js";import"./vue.runtime.esm-bundler-6cbae649.js";import"./useSupportElement-d4e5428a.js";const V=e=>(S("data-v-30a96e74"),e=e(),A(),e),L={class:"business-dashboard company-dashboard"},$={class:"columns is-multiline"},z={class:"column is-5"},J={class:"cu-text-primary",style:{transform:"translateY(-20px)","margin-left":"12px"}},R={class:"cus-black-heading",style:{color:"#090909"}},F={class:"is-flex space-between cu-align-center"},N=V((()=>g("h1",{class:"subtitle weighted"},"Compliance Industries",-1))),T={class:"is-flex justify-content-end",style:{"justify-content":"end"}},W={class:"industry-worker",style:{display:"inline-block","margin-bottom":"0"}},E={class:"industry-block"},M=["onClick"],O={class:""},Y={class:"is-block"},B=["src"],H={class:"titile is-6 pl-2",style:{"font-weight":"500"}},Q={class:"cus-stat-heading"},U=V((()=>g("p",null,null,-1))),X={key:0,class:"vr-line"},q={class:"columns is-multiline"},G={class:"column is-12"},K={class:"dashboard-card is-base-chart",style:{"background-color":"transparent","box-shadow":"none"}},Z={class:"content-box pl-0",style:{"padding-bottom":"10px"}},ee={class:"revenue-stats is-dark-bordered-12 is-flex is-justify-content-space-between is-align-items-center",style:{"border-bottom":"none"}},se=V((()=>g("div",{class:"revenue-stat",style:{"border-bottom":"none"}},[g("h1",{style:{color:"#000000a4"},class:"title is-5 is-flex"},[g("p",{class:"vr-line-main"}),g("div",{class:"ml-3"},"Profile Registration")])],-1))),ae={style:{width:"200px"}},te=P(r({__name:"SupplierDashboardTwo",setup(r){const S=o(),A=n(),P=l();c(""),c("");const I=d(),D=c([0,305,200,350,250,100,250,400,300,100,50]),V=u({series:[{name:"Profiles",data:[]}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[P.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},tooltip:{y:{formatter:function(e){return e}}}});c("2023"),u({height:295,type:"pie",series:[5672,832,1297,4515],options:{colors:["#00d0ff","#fd2d2c","#C449C2","#00d457"],labels:["Profiles","SIA Expired","Completed Profiles","Valid SIA"],responsive:[{breakpoint:480,options:{chart:{width:315,toolbar:{show:!1}},legend:{position:"top"}}}],legend:{position:"bottom",horizontalAlign:"center"}}});const te=c({total_workers:0,workers_by_month:[],sanction_last_update:null,bs7858:0,partners:0,warningProfiles:0,approvedReferences:0,refCount:0,customers:0,pendingReferences:0}),oe=c(!0),le=async(e="2024")=>{try{oe.value=!1;const s=await S.post(`v3/api/company/dashboard/${A.loggedCompany.id}/`,{year:e});te.value=s.data,V.value.series[0].data=D.value,oe.value=!0}catch(s){console.error("ok",s)}},ie=c({all:0,archived:0,industries:[]}),ne=async()=>{try{const e=await S.get(`/v3/api/company/${A.loggedCompany.id}/get_company_industry_workers_count/`);ie.value=e.data,console.log("counts",e.data)}catch(e){console.log(e)}},re=c([{id:"",colleagueImage:"",name:"",contactNumber:"",email:"",status:"",Sia:!0,profileAnomaly:""}]),ce=c({not_uploaded:0,expired:0,date_missing:0,expire_within_14_days:0}),de=async()=>{try{const e=await S.get(`/v3/api/worker/anomalies/${A.loggedCompany.id}/anomalies-stats/`);ce.value=e.data}catch(e){console.log(e)}};return p((async()=>{await le(),ne(),de()})),m((async()=>{await le(),(async()=>{const e=await S.get(`/v3/api/worker/company-workers/${A.loggedCompany.id}/`,{});re.value=e.data.results})(),ne(),de()})),(o,l)=>{const n=a,r=t,c=s,d=e;return v(),y("div",L,[g("div",$,[g("div",z,[g("h1",J,[h(" Sanction updated at: "),g("span",R,_((u=te.value.sanction_last_update,new Date(u).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}))),1)])])]),g("div",F,[N,g("div",T,[g("div",W,[g("div",E,[(v(!0),y(f,null,b(ie.value.industries,((e,s)=>(v(),y("div",{class:"industry-block cu-pointer",onClick:()=>{j(I).push(`/sidebar/company/workers?type=${e.name}`)}},[g("div",O,[g("div",Y,[g("img",{src:e.industryLogo,alt:"",srcset:"",style:{width:"22px"}},null,8,B),g("h6",H,[h(_(e.name)+" ",1),g("span",Q,"("+_(e.count)+")",1)])]),U]),s!==ie.value.industries.length-1?(v(),y("div",X)):C("",!0)],8,M)))),256))])])])]),g("div",q,[g("div",G,[g("div",K,[g("div",Z,[g("div",ee,[se,g("div",ae,[w(d,null,{default:x((()=>[w(c,{class:"has-icons-left",icon:"fas fa-globe"},{default:x((()=>[w(r,{onInput:l[0]||(l[0]=e=>{le(e.target.value)})},{default:x((()=>[w(n,{value:""},{default:x((()=>[h("Select Year")])),_:1}),w(n,{value:"2020"},{default:x((()=>[h("2020")])),_:1}),w(n,{value:"2021"},{default:x((()=>[h("2021")])),_:1}),w(n,{value:"2022"},{default:x((()=>[h("2022")])),_:1}),w(n,{value:"2023"},{default:x((()=>[h("2023")])),_:1}),w(n,{value:"2024"},{default:x((()=>[h("2024")])),_:1}),w(n,{value:"2025"},{default:x((()=>[h("2025")])),_:1})])),_:1})])),_:1})])),_:1})])])]),oe.value?(v(),k(j(i),{key:0,id:"line-stats-widget-chart",height:V.value.chart.height,type:V.value.chart.type,series:V.value.series,options:V.value},null,8,["height","type","series","options"])):C("",!0)])])])]);var u}}}),[["__scopeId","data-v-30a96e74"]]),oe={class:"page-content-inner"},le=r({__name:"dashboard",setup:e=>(D().setPageTitle("Dashboard"),I({title:"Partner - Arez"}),(e,s)=>{const a=te;return v(),y("div",oe,[w(a)])})});export{le as default};
