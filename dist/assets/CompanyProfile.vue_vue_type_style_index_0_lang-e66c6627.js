import{_ as e}from"./EditCompany.vue_vue_type_script_setup_true_lang-d77cbfba.js";import{_ as t}from"./VTabs.vue_vue_type_script_setup_true_lang-c4018005.js";import{_ as l}from"./TeamMembaresNetwork.vue_vue_type_style_index_0_lang-4261c07b.js";import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-534df148.js";import{e as s,r as i,o as n,B as o,N as r,F as c,D as d,K as u,l as p,W as m,E as y,C as v,M as g,J as f,I as h,O as x,a6 as _,U as b,V as w,H as k,T as C,R as T,A as q,a3 as A,j as I,w as D,G as z,P as O,Q as S,s as j,x as M,Z as V}from"./index-68d93679.js";import{_ as R}from"./VField.vue_vue_type_script_setup_true_lang-2b2e4149.js";import{_ as E}from"./VControl-2c1563a4.js";import{_ as N}from"./VRadio.vue_vue_type_style_index_0_lang-6b7b9c90.js";import{u as U}from"./useAPI-e8c71844.js";import{u as L}from"./useNotyf-f9383838.js";import{u as Q}from"./company-6c2ad0a7.js";import{_ as $}from"./SweetAlert.vue_vue_type_style_index_0_lang-d53fa087.js";import{_ as F}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-ea58435f.js";import{_ as P}from"./VFlex.vue_vue_type_style_index_0_lang-d296be36.js";import{_ as B}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-9a122840.js";import{_ as W}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-fd65817c.js";import{_ as H}from"./VFlexItem.vue_vue_type_style_index_0_lang-07b32b65.js";import{_ as Y}from"./VBlock.vue_vue_type_style_index_0_lang-f38dff50.js";import{_ as G}from"./VAvatar.vue_vue_type_style_index_0_lang-37c2b9fc.js";import{_ as J}from"./VDropdown.vue_vue_type_style_index_0_lang-c862c535.js";import{_ as K,a as Z}from"./search-4-dark-2b5b440c.js";import{_ as X}from"./VTag.vue_vue_type_style_index_0_lang-504b8098.js";import{_ as ee}from"./VTextarea.vue_vue_type_script_setup_true_lang-009ad0b2.js";import{_ as te}from"./VIconButton-677b27db.js";import{_ as le}from"./VFilePond.vue_vue_type_script_lang-83c402ce.js";import{a as ae}from"./useSupportElement-8c4eca99.js";import{_ as se}from"./VIconWrap.vue_vue_type_style_index_0_lang-86f1eab2.js";import{_ as ie}from"./VPeity.vue_vue_type_script_setup_true_lang-49ccb431.js";import{A as ne}from"./vue3-apexcharts.common-6d236a04.js";import{u as oe}from"./useThemeColors-61077c3c.js";const re={class:"modal-form columns is-multiline"},ce={class:"field column is-12 mb-0"},de=d("label",null,"Questoin Title: *",-1),ue={class:"control"},pe={class:"field column is-12 mb-0"},me=d("label",null,"Answer type: *",-1),ye={key:0,class:"field column is-12 mb-0"},ve=d("label",null,"Correct Answer: *",-1),ge={class:"control"},fe=s({__name:"WorkerQuestion",props:{QuestionModalOpen:{type:Boolean},type:{},industryID:{},questionId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,s=Q(),_=i(!1),b=L(),w=U(),k=i({id:0,title:"",type:"CheckBox",correctAnswer:"",questionFor:"",created_at:"",arezCompany:0,industry:0}),C=()=>{t("update:modalHandler",!1)},T=async()=>{try{const e={title:k.value.title,type:k.value.type,correctAnswer:k.value.correctAnswer,questionFor:l.type,arezCompany:s.loggedCompany.id,industry:l.industryID};if(l.questionId){const t=await w.patch(`/v3/api/partner/questions/${l.questionId}/`,e);console.log("question",t.data),b.success("Question updated succesfuly.")}else{const t=await w.post("/v3/api/partner/questions/",e);console.log("question",t.data),b.success("Question added succesfuly.")}t("update:OnSuccess",null)}catch(e){console.log(e)}};return n((()=>{l.questionId&&(async()=>{try{const e=await w.get(`/v3/api/partner/questions/${l.questionId}/`);k.value=e.data}catch(e){console.log(e)}})()})),(e,t)=>{const s=N,i=E,n=R,b=x,w=a;return o(),r(w,{is:"form",open:l.QuestionModalOpen,title:"Question",actions:"right",onSubmit:h(T,["prevent"]),onClose:C},{content:c((()=>[d("div",re,[d("div",ce,[de,d("div",ue,[u(d("input",{type:"text",name:"title","onUpdate:modelValue":t[0]||(t[0]=e=>p(k).title=e),class:"input is-primary-focus",placeholder:"Question Title"},null,512),[[m,p(k).title]])])]),d("div",pe,[me,y(n,{class:"is-flex"},{default:c((()=>[y(i,{raw:"",subcontrol:""},{default:c((()=>[y(s,{modelValue:p(k).type,"onUpdate:modelValue":t[1]||(t[1]=e=>p(k).type=e),value:"CheckBox",label:"Choice",color:"primary"},null,8,["modelValue"])])),_:1}),y(i,{raw:"",subcontrol:""},{default:c((()=>[y(s,{modelValue:p(k).type,"onUpdate:modelValue":t[2]||(t[2]=e=>p(k).type=e),value:"Input",label:"Text",color:"info"},null,8,["modelValue"])])),_:1})])),_:1})]),"CheckBox"==p(k).type?(o(),v("div",ye,[ve,d("div",ge,[y(n,{class:"is-flex"},{default:c((()=>[y(i,{raw:"",subcontrol:""},{default:c((()=>[y(s,{modelValue:p(k).correctAnswer,"onUpdate:modelValue":t[3]||(t[3]=e=>p(k).correctAnswer=e),value:"true",label:"Yes",color:"primary"},null,8,["modelValue"])])),_:1}),y(i,{raw:"",subcontrol:""},{default:c((()=>[y(s,{modelValue:p(k).correctAnswer,"onUpdate:modelValue":t[4]||(t[4]=e=>p(k).correctAnswer=e),value:"false",label:"NO",color:"info"},null,8,["modelValue"])])),_:1})])),_:1})])])):g("",!0)])])),action:c((()=>[y(b,{type:"submit",color:"primary",loading:p(_),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),he=_("elements",(()=>{const e=U(),t=i({url:"",file:"",title:""}),l=i(!1),a=i(!1),s=i([{id:"",title:"",icon:""}]),n=()=>{t.url=null,t.file=null,t.title=null};return{setIcon:async function(e){const a=s.value.find((t=>t.id==e.id));a?(t.value={url:a.icon,title:a.title},l.value=!1):console.error("Icon not found in template icons:",e)},loadIcons:async function(){a.value=!0;try{const t=await e.get("/v3/api/template-icons/");s.value=t.data,console.log("icons",s.value)}finally{a.value=!1}},openTemplateModal:()=>{l.value=!0},closeTemplateModal:()=>{l.value=!1,n()},clear:n,isOpenTemplateModal:l,templateIcons:s,loading:a,selectedIcon:t}})),xe={style:{"z-index":"10000"}},_e={class:"modal-form columns is-multiline"},be={class:"field column is-12 mb-0"},we={class:"indutryOptions"},ke=["onClick","src"],Ce=s({__name:"TemplateIcons",setup(e){const t=he(),l=i(!1),s=i("");return n((()=>{t.loadIcons()})),(e,i)=>{const n=E,r=R,u=x,m=a;return o(),v("div",xe,[y(m,{open:p(t).isOpenTemplateModal,title:"Select icon",size:"big",actions:"right",onClose:p(t).closeTemplateModal},{content:c((()=>[d("div",_e,[d("div",be,[y(r,null,{default:c((()=>[y(n,null,{default:c((()=>[d("div",we,[(o(!0),v(b,null,w(p(t).templateIcons,((e,l)=>(o(),v("div",{class:"options",key:l},[d("img",{onClick:()=>{p(t).setIcon(e),s.value=e.id},class:k(p(s)==e.id?"cus-img":""),src:e.icon},null,10,ke),d("p",null,C(e.title.length<8?e.title:`${e.title.slice(0,8)}... `),1)])))),128))])])),_:1})])),_:1}),y(r,{id:"interests",class:"p-0",label:""})])])])),action:c((()=>[y(u,{color:"primary",style:{display:"none"},loading:p(l),raised:""},{default:c((()=>[f(" Select")])),_:1},8,["loading"])])),cancel:c((()=>[y(u,{style:{display:"none"},onClick:p(t).closeTemplateModal,raised:""},{default:c((()=>[f("Close")])),_:1},8,["onClick"])])),_:1},8,["open","onClose"])])}}}),Te=T(Ce,[["__scopeId","data-v-cf66b438"]]),qe=d("h1",{class:"cus-stat-heading mb-3"}," Selecte industry to view related compliance template ",-1),Ae={class:"tabs-inner"},Ie={class:"tabs is-boxed"},De=["id"],ze=["onClick"],Oe={key:0,style:{"background-color":"transparent",border:"none"},class:"list-widget is-straight mt-0 mb-4"},Se={class:"widget-head"},je={class:"dark-inverted"},Me={class:"profile-body"},Ve={class:"tabs-wrapper is-flex space-between"},Re={class:"tabs-inner"},Ee={class:"tabs"},Ne=["onClick"],Ue=["onClick"],Le={class:"is-flex cus-align-center"},Qe={key:2,style:{display:"flex",gap:"16px","align-items":"center"}},$e=["onClick"],Fe=["src"],Pe={class:"meta"},Be={key:0,class:"tab-content is-active"},We={class:"cus-stat-heading"},He={class:"light-text"},Ye={class:"mt-2 mb-2",style:{display:"flex","flex-wrap":"wrap"}},Ge=["onClick"],Je=d("div",{class:"icon"},[d("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1),Ke=d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Info")],-1),Ze=[Je,Ke],Xe=d("hr",{class:"dropdown-divider"},null,-1),et=["onClick"],tt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),lt=d("div",{class:"meta"},[d("span",null,"Archive"),d("span",null,"Remove from list")],-1),at=[tt,lt],st=d("a",{href:"#"},null,-1),it={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},nt={class:"mt-1",href:"#",style:{color:"var(--light-text)","font-size":"12px"}},ot={class:"cus-align-center mt-2"},rt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ct={style:{color:"var(--light-text)","font-size":"12px"}},dt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ut={style:{color:"var(--light-text)","font-size":"12px"}},pt=d("hr",null,null,-1),mt=d("h2",{class:"cus-stat-heading"},"(Archived)",-1),yt={style:{display:"flex","flex-wrap":"wrap"}},vt=["onClick"],gt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),ft=d("div",{class:"meta"},[d("span",null,"Un-Archive"),d("span",null,"Remove from list")],-1),ht=[gt,ft],xt=d("a",{href:"#"},null,-1),_t={class:"is-flex mb-1",style:{display:"flex","justify-content":"space-between",width:"100%"}},bt={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},wt={class:"cus-align-center mt-2"},kt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Ct={style:{color:"var(--light-text)","font-size":"12px"}},Tt={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},qt={style:{color:"var(--light-text)","font-size":"12px"}},At={key:0},It=d("p",{class:""},"No document added for this industry",-1),Dt=[It],zt={key:1,class:"tab-content is-active"},Ot={style:{display:"flex","flex-wrap":"wrap"}},St=["onClick"],jt=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),Mt=d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit question")],-1),Vt=[jt,Mt],Rt=["onClick"],Et=d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),Nt=d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete question")],-1),Ut=[Et,Nt],Lt=d("a",{href:"#"},null,-1),Qt={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},$t={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Ft={key:0,class:"is-flex"},Pt=d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ",-1),Bt={key:1},Wt=[d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ------ ",-1)],Ht={key:0},Yt=[d("p",{class:""},"No question added for this industry",-1)],Gt={class:"widget-head"},Jt=d("h3",{class:"dark-inverted"},"Industry",-1),Kt={class:"tile-grid-item"},Zt={class:"tile-grid-item-inner placeload-wrap is-flex"},Xt=d("img",{class:"light-image",src:K,alt:""},null,-1),el=d("img",{class:"dark-image",src:Z,alt:""},null,-1),tl={class:"cus-justify-center"},ll=d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1),al={class:"modal-form columns is-multiline"},sl=d("div",{class:"field column is-12 mb-0"},[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"14px"}},[d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: "),f(" Introducing a new template document to our industry without affecting existing files. This action adds new documents and removes all other current ones. "),d("br")])])],-1),il={class:"field column is-12 mb-0"},nl=d("label",null,[f("To assign, type: "),d("span",{style:{"font-weight":"500"}},"Assign This Template"),f(" below:")],-1),ol={class:"control"},rl=s({__name:"PertnerCompanyDocuments",props:{users:{default:()=>[]},id:{},companyInfo:{}},setup(e){const t=e,l=Q();i(!1);const s=i(0),h=i(!1),_=U(),T=L();i(!1),i(!1),i(!1),i("update");const D=i(0);i({});const z=i(!1),O=i(0),S=i(!0),j=i(!1),M=i(""),V=i(0),R=i(0),E=i(!1),N=i(""),K=i(0),Z=i(!1),X=i(0),ee=i(0),te=i(0),le=i([{industry_id:"",industry_name:"",industry_logo:"",doc_count:"",docs:[{id:0,documentTitle:"",icon:"",subTitle:"",arezCompany:"",industry:"",step:"",archived:!1,expiryDateRequired:!1}],questions:[{id:0,title:"Fifth Question",type:"Input",correctAnswer:"",questionFor:"partner",created_at:"2024-03-19T10:45:58.093663Z",arezCompany:0,industry:0}]}]),ae=i([{id:1,title:"Limited Screening",subtitle:"Limited screening documents uploads are required during worker signup",step:"step_1"},{id:2,title:"Full Screening",subtitle:"Full screening documents may be uploaded after the worker's successful signup process",step:"step_2"}]),se=i({title:"",alertIcon:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});i({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0});const ie=i([{id:0,title:"",created_at:"",doc_count:0,industry:{id:0,name:"",industryLogo:""}}]),ne=async()=>{try{Z.value=!1,E.value=!1,h.value=!0;const e=await _.get(`v3/api/partner/company_document/${t.id}/get_documents_of_a_company/`,{});Z.value=!1;const a=e.data.map((e=>{const t=l.loggedCompany.industry.find((t=>t.id===e.industry_id));return{...e,industry_logo:t?.industryLogo||null,industry_name:t?.name||e.industry_name,activeTab:t?.id==ee.value?"ques":"docs"}}));l.loggedCompany.industry.forEach((t=>{e.data.some((e=>e.industry_id===t.id))||a.push({industry_id:t.id,industry_name:t.name,industry_logo:t.industryLogo,doc_count:0,docs:[],activeTab:"docs"})})),console.log("result array",l.loggedCompany.industry),le.value=a,te.value=le.value.length>0?le.value[0].industry_id:0,h.value=!1,setTimeout((()=>{window.location.hash=V.value}),1e3)}catch(e){console.error("ok",e)}},oe=(e,t)=>{D.value=e,S.value=t,console.log("the id "+e),O.value=3,se.value={title:"Archive this document?",alertIcon:"lnir lnir-alarm-2",subtitle:"This document will be archived, and it will be deleted  permanently after 30 days",btntext:"Yes, Archive it",isSweetAlertOpen:!0}},re=()=>{1==O.value?de():2==O.value?ce():3==O.value&&ue()},ce=async()=>{try{if("Assign This Template"!=M.value)return void T.error("Invalid Captcha Text");z.value=!0,se.value.isSweetAlertOpen=!1;const e=await _.post("/v3/api/partner/compliance/template/assign-template-to-company/",{company:t.id,template:s.value});j.value=!1,T.success(e.data),ne()}catch(e){T.error("Server error while assigning the template")}finally{z.value=!1,M.value=""}},de=async()=>{try{se.value.isSweetAlertOpen=!1;await _.delete(`/v3/api/partner/company_document/${D.value}/`,{});ne(),T.dismissAll(),T.success("Delete company document, Company Document")}catch(e){console.error("ok",e)}},ue=async()=>{try{se.value.isSweetAlertOpen=!1;await _.patch(`/v3/api/partner/company_document/${D.value}/archive-company-document/`,{archived:S.value});ne(),T.warning("Document archived")}catch(e){console.log(e)}};return n((()=>{ne(),(async()=>{try{const e=await _.get(`/v3/api/partner/compliance/template/get-company-indutries-tmeplates/${t.id}/`);ie.value=e.data,console.log(e.data)}catch(e){console.log(e)}})()})),(e,t)=>{const l=x,i=J,n=G,h=Y,O=H,S=W,U=B,L=P,Q=F,de=$,ue=a,pe=q("SupplierTemplateDocModal"),me=Te,ye=fe;return o(),v(b,null,[y(L,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap",styl:"just"},{default:c((()=>[qe,d("div",Ae,[d("div",Ie,[d("ul",null,[(o(!0),v(b,null,w(p(le),((e,t)=>(o(),v("li",{key:t,id:e.industry_id,class:k([e.industry_id===p(te)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:t=>{return l=e.industry_id,te.value=0,void(te.value=l);var l}},[d("span",null,C(e.industry_name),1)],8,ze)],10,De)))),128))])])]),0!=p(le).length?(o(!0),v(b,{key:0},w(p(le),((t,a)=>(o(),r(O,{key:a,id:t.industry_id},{default:c((()=>[e.GetLoadinG||t.industry_id!=p(te)?g("",!0):(o(),v("div",Oe,[d("div",Se,[d("h3",je,C(t.industry_name),1)]),d("div",Me,[d("div",Ve,[d("div",Re,[d("div",Ee,[d("ul",null,[d("li",{class:k(["docs"===t.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{t.activeTab="docs",ee.value=0}},[d("span",null,"Documents ("+C(t.doc_count)+")",1)],8,Ne)],2),d("li",{class:k(["ques"===t.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{t.activeTab="ques",ee.value=t.industry_id}},[d("span",null,"Questions ("+C(t.questions?t.questions.length:0)+")",1)],8,Ue)],2)])])]),d("div",Le,["ques"==t.activeTab?(o(),r(l,{key:0,light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{N.value="partner",K.value=t.industry_id,Z.value=!0,X.value=0},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Question ")])),_:2},1032,["onClick"])):g("",!0),"docs"==t.activeTab?(o(),r(l,{key:1,class:"mr-4",light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{D.value=0,R.value=t.industry_id,E.value=!0,e.scrollToIndustry=t.industry_id},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Document ")])),_:2},1032,["onClick"])):g("",!0),"docs"==t.activeTab?(o(),v("div",Qe,[y(i,{title:"Compliance Template",color:"primary",right:"",spaced:""},{content:c((()=>[(o(!0),v(b,null,w(p(ie),(e=>(o(),v("div",{key:e.id},[e.industry.id===t.industry_id?(o(),v("a",{key:0,onClick:()=>{s.value=e.id,V.value=t.industry_id,j.value=!0},class:"dropdown-item is-media"},[d("img",{class:"item-img",src:e.industry.industryLogo,alt:""},null,8,Fe),d("div",Pe,[d("span",null,C(e.title),1),d("span",null,C(e.industry.name)+" "+C(-e.doc_count?`(${e.doc_count})`:""),1)])],8,$e)):g("",!0)])))),128))])),_:2},1024)])):g("",!0)])])]),"docs"==t.activeTab?(o(),v("div",Be,[(o(!0),v(b,null,w(p(ae),(l=>(o(),v("div",{key:l.id},[d("h2",We,"("+C(l.title)+")",1),d("p",He,C(l.subtitle),1),d("div",Ye,[(o(!0),v(b,null,w(t.docs,((a,s)=>(o(),v("div",{key:a.id,class:""},[0==t.docs[s].archived&&t.docs[s].step==l.step?(o(),r(h,{key:0,center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px",border:"1px solid #89898930"}},{icon:c((()=>[y(n,{picture:a.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{D.value=a.id,E.value=!0,e.scrollToIndustry=t.industry_id}},Ze,8,Ge),Xe,d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(a.id,!0)},at,8,et)])),_:2},1024)])),default:c((()=>[st,d("span",it,C(a.documentTitle),1),d("a",nt,C(a.subTitle?a.subTitle.slice(0,190):"....")+" "+C(a.subTitle&&a.subTitle.length>190?"...":""),1),d("div",ot,[d("a",rt,[f("Expiry date: "),d("p",ct,C(a.expiryDateRequired?"Required":" Not required"),1)]),d("a",dt,[f("Document level: "),d("p",ut,C("step_1"==a.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))])])))),128)),pt,mt,d("div",yt,[(o(!0),v(b,null,w(t.docs,((e,l)=>(o(),v("div",{key:e.id,class:""},[1==t.docs[l].archived?(o(),r(h,{key:0,center:"",lighter:"",style:{margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px","background-color":"#fff",border:"1px solid rgba(110, 110, 110, 0.1)"}},{icon:c((()=>[y(n,{picture:e.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>oe(e.id,!1)},ht,8,vt)])),_:2},1024)])),default:c((()=>[xt,d("span",_t,C(e.documentTitle),1),d("a",bt,C(e.subTitle.slice(0,190))+" "+C(e.subTitle.length>190?"...":""),1),d("div",wt,[d("a",kt,[f("Expiry date: "),d("p",Ct,C(e.expiryDateRequired?"Required":" Not required"),1)]),d("a",Tt,[f("Document level: "),d("p",qt,C("step_1"==e.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))]),t.docs.length?g("",!0):(o(),v("div",At,Dt))])):g("",!0),"ques"==t.activeTab?(o(),v("div",zt,[d("div",Ot,[(o(!0),v(b,null,w(t.questions,((e,l)=>(o(),v("div",{key:e.id,class:""},[y(h,{center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"400px","margin-left":"50px",border:"2px solid rgba(110, 110, 110, 0.247)"}},{action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{N.value="worker",X.value=e.id,K.value=t.industry_id,Z.value=!0}},Vt,8,St),d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>(async e=>{try{await _.delete(`/v3/api/partner/questions/${e}/`),T.error("Question deleted successfuly"),ne()}catch(t){console.log(t)}})(e.id)},Ut,8,Rt)])),_:2},1024)])),default:c((()=>[Lt,d("span",Qt,C(e.title.slice(0,36)),1),d("a",$t," Type: "+C(e.type),1),e.correctAnswer?(o(),v("div",Ft,[Pt,d("a",{style:A([{"font-size":"13px"},{color:"true"==e.correctAnswer?"var(--primary)":"var(--danger)"}])},C("true"==e.correctAnswer?"Yes":"No"),5)])):(o(),v("div",Bt,Wt))])),_:2},1024)])))),128))]),t.docs.length?g("",!0):(o(),v("div",Ht,Yt))])):g("",!0)]))])),_:2},1032,["id"])))),128)):g("",!0),e.GetLoadinG?(o(),r(L,{key:1,"jusitfy-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap"},{default:c((()=>[(o(),v(b,null,w([0,1,2],(e=>d("div",{class:"list-widget is-straight",key:e},[d("div",Gt,[Jt,y(l,{color:"primary",icon:"fas fa-plus",rounded:"",style:{height:"27px","font-size":"10px"}},{default:c((()=>[f(" Document ")])),_:1})]),(o(),v(b,null,w(2,(e=>d("div",{key:e,class:"inner-list"},[d("div",Kt,[d("div",Zt,[y(S,{size:"medium"}),y(U,{width:"80%","last-line-width":"60%",class:"mx-2"})])])]))),64))]))),64))])),_:1})):g("",!0),0==p(le).length?(o(),r(Q,{key:2,title:"No Industry added to this company yet !",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n    search terms you've entered. Please try different search terms or\n    criteria.",larger:""},{image:c((()=>[Xt,el])),_:1})):g("",!0)])),_:1}),p(se).isSweetAlertOpen?(o(),r(de,{key:0,isSweetAlertOpen:p(se).isSweetAlertOpen,title:p(se).title,subtitle:p(se).subtitle,btntext:p(se).btntext,alertIcon:p(se).alertIcon,onConfirm:re,onCancel:()=>p(se).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","alertIcon","onCancel"])):g("",!0),y(ue,{open:p(j),title:"Assign Template",actions:"right",onClose:t[1]||(t[1]=e=>j.value=!1)},{content:c((()=>[d("div",tl,[ll,d("div",al,[sl,d("div",il,[nl,d("div",ol,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>I(M)?M.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,p(M)]])])])])])])),cancel:c((()=>[y(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:c((()=>[f("Close")])),_:1})])),action:c((()=>[y(l,{type:"submit",onClick:ce,color:"primary",loading:p(z),raised:""},{default:c((()=>[f("Assign it ")])),_:1},8,["loading"])])),_:1},8,["open"]),p(E)?(o(),r(pe,{key:1,docID:p(D),industry:p(R),CompanyDocModalOpen:p(E),"onUpdate:modalHandler":t[2]||(t[2]=()=>{E.value=!p(E)}),"onUpdate:OnSuccess":t[3]||(t[3]=()=>{ne()})},null,8,["docID","industry","CompanyDocModalOpen"])):g("",!0),y(me),p(Z)?(o(),r(ye,{key:2,questionId:p(X),type:p(N),industryID:p(K),QuestionModalOpen:p(Z),"onUpdate:modalHandler":t[4]||(t[4]=()=>{Z.value=!p(Z)}),"onUpdate:OnSuccess":ne},null,8,["questionId","type","industryID","QuestionModalOpen"])):g("",!0)],64)}}}),cl={class:"modal-form columns is-multiline cu-all-input"},dl={class:"field column is-12 mb-0",style:{display:"flex","justify-content":"center"}},ul={class:"field cu-align-center"},pl=d("label",{class:"light-weight"},"Icon:",-1),ml=[d("i",{style:{"font-size":"16px","font-weight":"500","margin-top":"5px"},"aria-hidden":"true",class:"iconify sidebar-svg","data-icon":"feather-plus"},null,-1)],yl={class:"control is-flex is-justify-content-center"},vl=["src"],gl={key:2},fl={class:"field column is-12 mb-0"},hl=d("label",{class:"light-weight"},"Document Title: *",-1),xl={class:"control"},_l={class:"column is-12"},bl={class:"columns mb-0"},wl={class:"field column is-12 mb-0"},kl=d("label",{class:"light-weight"},"Subtitle:",-1),Cl={class:"field column is-12 mb-0"},Tl={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},ql=d("label",{class:"light-weight"},"Document level:",-1),Al=[d("i",{style:{"font-size":"18px","font-weight":"500"},class:"iconify cu-pointer mt-1 ml-2","data-icon":"mingcute:question-fill"},null,-1)],Il={key:0,class:"field column is-12 mb-0"},Dl={class:"field columns space-between cu-align-center",style:{padding:"12px","border-radius":"8px"}},zl=d("label",{class:"light-weight"},"Expiry Date Required:",-1),Ol={key:1,class:"field column is-12 mb-0"},Sl=[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"12px"}},[d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Mandatory: "),f(" Mandatory document uploads are required during worker signup. "),d("br"),d("span",{style:{color:"var(--primary)","font-size":"14px","font-weight":"500"}},"Optional: "),f(" Documents may be uploaded after the worker's successful signup process. ")])],-1)],jl=s({__name:"WorkerTemplateDocModal",props:{CompanyDocModalOpen:{type:Boolean},industry:{},docID:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const l=e,s=Q(),_=i("update"),w=i(!0),k=i(!1),C=he(),T=L(),q=U(),I=i(!1),O=i({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0,icon_url:"",template:0}),S=()=>{t("update:modalHandler",!1)},j=async()=>{try{console.log("tempppp",l.industry),k.value=!0,O.value.icon_url=C.selectedIcon.url;const e=ae(O.value,["icon"]);if(l.docID){await q.patch(`/v3/api/company_document/${l.docID}/`,e)}else{e.append("industry",l.industry),e.append("arezCompany",s.loggedCompany.id);await q.post("/v3/api/company_document/",e)}t("update:OnSuccess",null),k.value=!1}catch(e){console.error(e),T.error("error accur ")}finally{k.value=!1}},M=(e,t)=>{const l=t.file;l&&(console.log(l),O.value={...O.value,icon:l})},V=(e,t)=>{O.value={...O.value,icon:null}};D(C,((e,t)=>{C.selectedIcon.url&&(O.value.icon=C.selectedIcon.url,console.log("add company",O.value),w.value=!1)}));const N=()=>{I.value=!I.value,console.log("calling")};return n((()=>{l.docID&&((async e=>{k.value=!0;const t=await q.get(`v3/api/company_document/${e}/`,{});O.value=t.data,console.log(t.data),k.value=!1})(l.docID),w.value=!1)})),(e,t)=>{const s=le,i=te,n=G,T=R,q=ee,D=E,U=X,L=x,Q=a,$=Te;return o(),v(b,null,[y(Q,{is:"form",open:l.CompanyDocModalOpen,title:"Compliance Document",actions:"right",onSubmit:h(j,["prevent"]),onClose:S},{content:c((()=>[d("div",cl,[d("div",dl,[y(T,{class:"column is-6"},{default:c((()=>[d("div",ul,[pl,d("a",{class:"search-link",tabindex:"0",role:"button",onClick:t[0]||(t[0]=()=>{p(C).openTemplateModal()})},ml)]),d("div",yl,[y(n,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:c((()=>[p(w)?(o(),r(s,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='fas fa-cloud-upload-alt' style='font-size:27px'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onAddfile:M,onRemovefile:V})):(o(),v("img",{key:0,class:"avatar",src:null==p(O).icon?"/images/avatars/placeholder.jpg":p(O).icon,alt:""},null,8,vl)),"update"==p(_)?(o(),v("span",gl,[p(w)?(o(),r(i,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:t[3]||(t[3]=z(h((e=>w.value=!1),["prevent"]),["space"])),onClick:t[4]||(t[4]=e=>w.value=!1)})):(o(),r(i,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:t[1]||(t[1]=z(h((e=>w.value=!0),["prevent"]),["space"])),onClick:t[2]||(t[2]=e=>w.value=!0)}))])):g("",!0)])),_:1})])])),_:1})]),d("div",fl,[hl,d("div",xl,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[5]||(t[5]=e=>p(O).documentTitle=e),required:"",class:"input is-primary-focus",placeholder:"Title"},null,512),[[m,p(O).documentTitle]])])]),d("div",_l,[d("div",bl,[d("div",wl,[kl,y(D,null,{default:c((()=>[y(q,{style:{"border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},modelValue:p(O).subTitle,"onUpdate:modelValue":t[6]||(t[6]=e=>p(O).subTitle=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])])]),d("div",Cl,[d("div",Tl,[d("div",{class:"field cu-align-center"},[ql,d("a",{class:"search-link light-text",tabindex:"0",role:"button",onClick:N},Al)]),y(D,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(U,{style:A([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_1"===p(O).step?"#2aac8e":"white",color:"step_1"===p(O).step?"white":""}]),label:"Mandatory",rounded:"",onClick:t[7]||(t[7]=()=>{p(O).step="step_1"})},null,8,["style"]),y(U,{style:A([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:"step_2"===p(O).step?"#2aac8e":"white",color:"step_2"===p(O).step?"white":""}]),label:"Optional",rounded:"",onClick:t[8]||(t[8]=()=>{p(O).step="step_2"})},null,8,["style"])])),_:1})])]),p(I)?g("",!0):(o(),v("div",Il,[d("div",Dl,[zl,y(D,{class:"mt-2 is-flex",raw:"",subcontrol:""},{default:c((()=>[y(U,{style:A([{cursor:"pointer","margin-right":"22px",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!1===p(O).expiryDateRequired?"#2aac8e":"white",color:!1===p(O).expiryDateRequired?"white":""}]),label:"No",rounded:"",onClick:t[9]||(t[9]=()=>{p(O).expiryDateRequired=!1})},null,8,["style"]),y(U,{style:A([{cursor:"pointer",color:"var(--light-text)",border:"1px solid #2aac8e",width:"80px",height:"34px",display:"flex","justify-content":"center","align-items":"center"},{backgroundColor:!0===p(O).expiryDateRequired?"#2aac8e":"white",color:!0===p(O).expiryDateRequired?"white":""}]),label:"Yes",rounded:"",onClick:t[10]||(t[10]=()=>{p(O).expiryDateRequired=!0})},null,8,["style"])])),_:1})])])),p(I)?(o(),v("div",Ol,Sl)):g("",!0)])])),action:c((()=>[y(L,{type:"submit",color:"primary",light:"",loading:p(k),raised:""},{default:c((()=>[f("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"]),y($)],64)}}}),Ml=e=>(O("data-v-f29f1c24"),e=e(),S(),e),Vl=Ml((()=>d("h1",{class:"cus-stat-heading mb-3"}," Selecte industry to view related compliance template ",-1))),Rl={class:"tabs-inner"},El={class:"tabs is-boxed"},Nl=["id"],Ul=["onClick"],Ll={key:0,style:{"background-color":"transparent",border:"none"},class:"list-widget is-straight mt-0 mb-4"},Ql={class:"widget-head"},$l={class:"dark-inverted"},Fl={class:"profile-body"},Pl={class:"tabs-wrapper is-flex space-between"},Bl={class:"tabs-inner"},Wl={class:"tabs"},Hl=["onClick"],Yl=["onClick"],Gl={class:"is-flex cus-align-center"},Jl={key:2,style:{display:"flex",gap:"16px","align-items":"center"}},Kl=["onClick"],Zl=["src"],Xl={class:"meta"},ea={key:0,class:"tab-content is-active"},ta={class:"cus-stat-heading"},la={class:"light-text"},aa={class:"mt-2 mb-2",style:{display:"flex","flex-wrap":"wrap"}},sa=["onClick"],ia=[Ml((()=>d("div",{class:"icon"},[d("i",{class:"lnil lnil-message-edit","aria-hidden":"true"})],-1))),Ml((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Info")],-1)))],na=Ml((()=>d("hr",{class:"dropdown-divider"},null,-1))),oa=["onClick"],ra=[Ml((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),Ml((()=>d("div",{class:"meta"},[d("span",null,"Archive"),d("span",null,"Remove from list")],-1)))],ca=Ml((()=>d("a",{href:"#"},null,-1))),da={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},ua={class:"mt-1",href:"#",style:{color:"var(--light-text)","font-size":"12px"}},pa={class:"cus-align-center mt-2"},ma={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ya={style:{color:"var(--light-text)","font-size":"12px"}},va={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},ga={style:{color:"var(--light-text)","font-size":"12px"}},fa=Ml((()=>d("hr",null,null,-1))),ha=Ml((()=>d("h2",{class:"cus-stat-heading"},"(Archived)",-1))),xa={style:{display:"flex","flex-wrap":"wrap"}},_a=["onClick"],ba=[Ml((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),Ml((()=>d("div",{class:"meta"},[d("span",null,"Un-Archive"),d("span",null,"Remove from list")],-1)))],wa=Ml((()=>d("a",{href:"#"},null,-1))),ka={class:"is-flex mb-1",style:{display:"flex","justify-content":"space-between",width:"100%"}},Ca={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Ta={class:"cus-align-center mt-2"},qa={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Aa={style:{color:"var(--light-text)","font-size":"12px"}},Ia={href:"#",style:{"font-size":"12px",color:"#333",display:"flex",gap:"4px"}},Da={style:{color:"var(--light-text)","font-size":"12px"}},za={key:0},Oa=[Ml((()=>d("p",{class:""},"No document added for this industry",-1)))],Sa={key:1,class:"tab-content is-active"},ja={style:{display:"flex","flex-wrap":"wrap"}},Ma=["onClick"],Va=[Ml((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),Ml((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit question")],-1)))],Ra=["onClick"],Ea=[Ml((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1))),Ml((()=>d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete question")],-1)))],Na=Ml((()=>d("a",{href:"#"},null,-1))),Ua={class:"is-flex",style:{display:"flex","justify-content":"space-between",width:"100%"}},La={href:"#",style:{color:"var(--light-text)","font-size":"12px"}},Qa={key:0,class:"is-flex"},$a=Ml((()=>d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ",-1))),Fa={key:1},Pa=[Ml((()=>d("span",{href:"#",class:"mr-1",style:{color:"var(--light-text)","font-size":"12px"}}," Correct Answer: ------ ",-1)))],Ba={key:0},Wa=[Ml((()=>d("p",{class:""},"No question added for this industry",-1)))],Ha={class:"widget-head"},Ya=Ml((()=>d("h3",{class:"dark-inverted"},"Industry",-1))),Ga={class:"tile-grid-item"},Ja={class:"tile-grid-item-inner placeload-wrap is-flex"},Ka=Ml((()=>d("img",{class:"light-image",src:K,alt:""},null,-1))),Za=Ml((()=>d("img",{class:"dark-image",src:Z,alt:""},null,-1))),Xa={class:"cus-justify-center"},es=Ml((()=>d("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1))),ts={class:"modal-form columns is-multiline"},ls=Ml((()=>d("div",{class:"field column is-12 mb-0"},[d("div",{class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},[d("p",{style:{"font-size":"14px"}},[d("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: "),f(" Introducing a new template document to our industry without affecting existing files. This action adds new documents and removes all other current ones. "),d("br")])])],-1))),as={class:"field column is-12 mb-0"},ss=Ml((()=>d("label",null,[f("To assign, type: "),d("span",{style:{"font-weight":"500"}},"Assign This Template"),f(" below:")],-1))),is={class:"control"},ns=T(s({__name:"CompanyDocuments",props:{users:{default:()=>[]},id:{},companyInfo:{}},setup(e){const t=e,l=Q();i(!1);const s=i(!1),h=U(),_=L();i(!1);const T=i(0),q=i(!1),D=i(0),z=i(!0),O=i(!1),S=i(""),j=i(0),M=i(0),V=i(!1),R=i(""),E=i(0),N=i(!1),K=i(0),Z=i(0),X=i(0),ee=i(0),te=i(0),le=i([{id:0,industry_id:"",industry_name:"",industry_logo:"",doc_count:"",docs:[{id:0,documentTitle:"",icon:"",subTitle:"",arezCompany:"",industry:"",step:"",archived:!1,expiryDateRequired:!1}],questions:[{id:0,title:"Fifth Question",type:"Input",correctAnswer:"",questionFor:"partner",created_at:"2024-03-19T10:45:58.093663Z",arezCompany:0,industry:0}]}]),ae=i([{id:1,title:"Limited Screening",subtitle:"Limited screening documents uploads are required during worker signup",step:"step_1"},{id:2,title:"Full Screening",subtitle:"Full screening documents may be uploaded after the worker's successful signup process",step:"step_2"}]),se=i({title:"",alertIcon:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});i({documentTitle:"",icon:null,subTitle:"",arezCompany:null,industry:null,step:"",expiryDateRequired:!0});const ie=i([{id:0,title:"",created_at:"",doc_count:0,industry:{id:0,name:"",industryLogo:""}}]),ne=async()=>{try{N.value=!1,V.value=!1,s.value=!0;const e=await h.get(`v3/api/company_document/${t.id}/get_documents_of_a_company/`,{});N.value=!1;const a=e.data.map((e=>{const t=l.loggedCompany.industry.find((t=>t.id===e.industry_id));return{...e,industry_logo:t?.industryLogo||null,industry_name:t?.name||e.industry_name,activeTab:t?.id==ee.value?"ques":"docs",currentSelectedIndustry:t?.id}}));l.loggedCompany.industry.forEach((t=>{e.data.some((e=>e.industry_id===t.id))||a.push({industry_id:t.id,industry_name:t.name,industry_logo:t.industryLogo,doc_count:0,docs:[],activeTab:"docs"})})),console.log("result array",l.loggedCompany.industry),le.value=a,te.value=le.value.length>0?le.value[0].industry_id:0,s.value=!1,setTimeout((()=>{window.location.hash=j.value}),1e3)}catch(e){console.error("ok",e)}},oe=(e,t)=>{T.value=e,z.value=t,console.log("the id "+e),D.value=3,se.value={title:"Archive this document?",alertIcon:"lnir lnir-alarm-2",subtitle:"This document will be archived, and it will be deleted  permanently after 30 days",btntext:"Yes, Archive it",isSweetAlertOpen:!0}},re=()=>{1==D.value?de():2==D.value?ce():3==D.value&&ue()},ce=async()=>{try{if("Assign This Template"!=S.value)return void _.error("Invalid Captcha Text");q.value=!0,se.value.isSweetAlertOpen=!1;const e=await h.post("/v3/api/compliance/template/assign-template-to-company/",{company:t.id,template:E.value});O.value=!1,_.success(e.data),ne()}catch(e){_.error("Server error while assigning the template")}finally{q.value=!1,S.value=""}},de=async()=>{try{se.value.isSweetAlertOpen=!1;await h.delete(`/v3/api/company_document/${T.value}/`,{});ne(),_.dismissAll(),_.success("Delete company document, Company Document")}catch(e){console.error("ok",e)}},ue=async()=>{try{se.value.isSweetAlertOpen=!1;await h.patch(`/v3/api/company_document/${T.value}/archive-company-document/`,{archived:z.value});ne(),_.warning("Document archived")}catch(e){console.log(e)}};return n((()=>{ne(),(async()=>{try{const e=await h.get(`/v3/api/compliance/template/get-company-indutries-tmeplates/${t.id}/`);ie.value=e.data,console.log(e.data)}catch(e){console.log(e)}})()})),(e,t)=>{const l=x,i=J,n=G,D=Y,z=H,U=W,L=B,Q=P,de=F,ue=$,pe=a,me=jl,ye=Te,ve=fe;return o(),v(b,null,[y(Q,{"jusitfy-content":"center","align-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap",styl:"just"},{default:c((()=>[Vl,d("div",Rl,[d("div",El,[d("ul",null,[(o(!0),v(b,null,w(p(le),((e,t)=>(o(),v("li",{key:t,id:e.industry_id,class:k([e.industry_id===p(te)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:t=>{return l=e.industry_id,te.value=0,void(te.value=l);var l}},[d("span",null,C(e.industry_name),1)],8,Ul)],10,Nl)))),128))])])]),0!=p(le).length?(o(!0),v(b,{key:0},w(p(le),((e,t)=>(o(),r(z,{key:t,id:e.industry_id},{default:c((()=>[p(s)||e.industry_id!=p(te)?g("",!0):(o(),v("div",Ll,[d("div",Ql,[d("h3",$l,C(e.industry_name),1)]),d("div",Fl,[d("div",Pl,[d("div",Bl,[d("div",Wl,[d("ul",null,[d("li",{class:k(["docs"===e.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{e.activeTab="docs",ee.value=0}},[d("span",null,"Documents ("+C(e.doc_count)+")",1)],8,Hl)],2),d("li",{class:k(["ques"===e.activeTab?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onClick:()=>{e.activeTab="ques",ee.value=e.industry_id}},[d("span",null,"Questions ("+C(e.questions?e.questions.length:0)+")",1)],8,Yl)],2)])])]),d("div",Gl,["ques"==e.activeTab?(o(),r(l,{key:0,light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{R.value="worker",Z.value=e.industry_id,N.value=!0,K.value=0},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Question ")])),_:2},1032,["onClick"])):g("",!0),"docs"==e.activeTab?(o(),r(l,{key:1,class:"mr-4",light:"",color:"primary",icon:"fas fa-plus",onClick:()=>{T.value=0,M.value=e.industry_id,V.value=!0,X.value=e.industry_id},style:{height:"34px","font-size":"12px"}},{default:c((()=>[f(" Document ")])),_:2},1032,["onClick"])):g("",!0),"docs"==e.activeTab?(o(),v("div",Jl,[y(i,{title:"Compliance Template",color:"primary",right:"",spaced:""},{content:c((()=>[(o(!0),v(b,null,w(p(ie),(t=>(o(),v("div",{key:t.id},[t.industry.id===e.industry_id?(o(),v("a",{key:0,onClick:()=>{E.value=t.id,j.value=e.industry_id,O.value=!0},class:"dropdown-item is-media"},[d("img",{class:"item-img",src:t.industry.industryLogo,alt:""},null,8,Zl),d("div",Xl,[d("span",null,C(t.title),1),d("span",null,C(t.industry.name)+" "+C(-t.doc_count?`(${t.doc_count})`:""),1)])],8,Kl)):g("",!0)])))),128))])),_:2},1024)])):g("",!0)])])]),"docs"==e.activeTab?(o(),v("div",ea,[(o(!0),v(b,null,w(p(ae),(t=>(o(),v("div",{key:t.id},[d("h2",ta,"("+C(t.title)+")",1),d("p",la,C(t.subtitle),1),d("div",aa,[(o(!0),v(b,null,w(e.docs,((l,a)=>(o(),v("div",{key:l.id,class:""},[0==e.docs[a].archived&&e.docs[a].step==t.step?(o(),r(D,{key:0,center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px",border:"1px solid #89898930"}},{icon:c((()=>[y(n,{picture:l.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:()=>{T.value=l.id,V.value=!0,X.value=e.industry_id}},ia,8,sa),na,d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(l.id,!0)},ra,8,oa)])),_:2},1024)])),default:c((()=>[ca,d("span",da,C(l.documentTitle),1),d("a",ua,C(l.subTitle?l.subTitle.slice(0,190):"....")+" "+C(l.subTitle&&l.subTitle.length>190?"...":""),1),d("div",pa,[d("a",ma,[f("Expiry date: "),d("p",ya,C(l.expiryDateRequired?"Required":" Not required"),1)]),d("a",va,[f("Document level: "),d("p",ga,C("step_1"==l.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))])])))),128)),fa,ha,d("div",xa,[(o(!0),v(b,null,w(e.docs,((t,l)=>(o(),v("div",{key:t.id,class:""},[1==e.docs[l].archived?(o(),r(D,{key:0,center:"",lighter:"",style:{margin:"10px","border-radius":"8px",padding:"12px",width:"590px","margin-left":"50px","background-color":"#fff",border:"1px solid rgba(110, 110, 110, 0.1)"}},{icon:c((()=>[y(n,{picture:t.icon,squared:!0,style:{"border-radius":"8px",padding:"2px"}},null,8,["picture"])])),action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>oe(t.id,!1)},ba,8,_a)])),_:2},1024)])),default:c((()=>[wa,d("span",ka,C(t.documentTitle),1),d("a",Ca,C(t.subTitle.slice(0,190))+" "+C(t.subTitle.length>190?"...":""),1),d("div",Ta,[d("a",qa,[f("Expiry date: "),d("p",Aa,C(t.expiryDateRequired?"Required":" Not required"),1)]),d("a",Ia,[f("Document level: "),d("p",Da,C("step_1"==t.step?"Mandatory":"Optional"),1)])])])),_:2},1024)):g("",!0)])))),128))]),e.docs.length?g("",!0):(o(),v("div",za,Oa))])):g("",!0),"ques"==e.activeTab?(o(),v("div",Sa,[d("div",ja,[(o(!0),v(b,null,w(e.questions,((t,l)=>(o(),v("div",{key:t.id,class:""},[y(D,{center:"",lighter:"",style:{"background-color":"#fff",margin:"10px","border-radius":"8px",padding:"12px",width:"400px","margin-left":"50px",border:"2px solid rgba(110, 110, 110, 0.247)"}},{action:c((()=>[y(i,{icon:"feather:more-vertical",spaced:"",right:""},{content:c((()=>[d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{R.value="worker",K.value=t.id,Z.value=e.industry_id,N.value=!0}},Va,8,Ma),d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:e=>(async e=>{try{await h.delete(`/v3/api/partner/questions/${e}/`),_.error("Question deleted successfuly"),ne()}catch(t){console.log(t)}})(t.id)},Ea,8,Ra)])),_:2},1024)])),default:c((()=>[Na,d("span",Ua,C(t.title.slice(0,36)),1),d("a",La," Type: "+C(t.type),1),t.correctAnswer?(o(),v("div",Qa,[$a,d("a",{style:A([{"font-size":"13px"},{color:"true"==t.correctAnswer?"var(--primary)":"var(--danger)"}])},C("true"==t.correctAnswer?"Yes":"No"),5)])):(o(),v("div",Fa,Pa))])),_:2},1024)])))),128))]),e.docs.length?g("",!0):(o(),v("div",Ba,Wa))])):g("",!0)]))])),_:2},1032,["id"])))),128)):g("",!0),p(s)?(o(),r(Q,{key:1,"jusitfy-content":"center",class:"is-block","align-items":"start","column-gap":"20px","row-gap":"20px","flex-wrap":"wrap"},{default:c((()=>[(o(),v(b,null,w([0,1,2],(e=>d("div",{class:"list-widget is-straight",key:e},[d("div",Ha,[Ya,y(l,{color:"primary",icon:"fas fa-plus",rounded:"",style:{height:"27px","font-size":"10px"}},{default:c((()=>[f(" Document ")])),_:1})]),(o(),v(b,null,w(2,(e=>d("div",{key:e,class:"inner-list"},[d("div",Ga,[d("div",Ja,[y(U,{size:"medium"}),y(L,{width:"80%","last-line-width":"60%",class:"mx-2"})])])]))),64))]))),64))])),_:1})):g("",!0),0==p(le).length?(o(),r(de,{key:2,title:"No Industry added to this company yet !",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n      search terms you've entered. Please try different search terms or\n      criteria.",larger:""},{image:c((()=>[Ka,Za])),_:1})):g("",!0)])),_:1}),p(se).isSweetAlertOpen?(o(),r(ue,{key:0,isSweetAlertOpen:p(se).isSweetAlertOpen,title:p(se).title,subtitle:p(se).subtitle,btntext:p(se).btntext,alertIcon:p(se).alertIcon,onConfirm:re,onCancel:()=>p(se).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","alertIcon","onCancel"])):g("",!0),y(pe,{open:p(O),title:"Assign Template",actions:"right",onClose:t[1]||(t[1]=e=>O.value=!1)},{content:c((()=>[d("div",Xa,[es,d("div",ts,[ls,d("div",as,[ss,d("div",is,[u(d("input",{type:"text",name:"documentTitle","onUpdate:modelValue":t[0]||(t[0]=e=>I(S)?S.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,p(S)]])])])])])])),cancel:c((()=>[y(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:c((()=>[f("Close")])),_:1})])),action:c((()=>[y(l,{type:"submit",onClick:ce,color:"primary",loading:p(q),raised:""},{default:c((()=>[f("Assign it ")])),_:1},8,["loading"])])),_:1},8,["open"]),p(V)?(o(),r(me,{key:1,docID:p(T),industry:p(M),CompanyDocModalOpen:p(V),"onUpdate:modalHandler":t[2]||(t[2]=()=>{V.value=!p(V)}),"onUpdate:OnSuccess":t[3]||(t[3]=()=>{ne()})},null,8,["docID","industry","CompanyDocModalOpen"])):g("",!0),y(ye),p(N)?(o(),r(ve,{key:2,questionId:p(K),type:p(R),industryID:p(Z),QuestionModalOpen:p(N),"onUpdate:modalHandler":t[4]||(t[4]=()=>{N.value=!p(N)}),"onUpdate:OnSuccess":ne},null,8,["questionId","type","industryID","QuestionModalOpen"])):g("",!0)],64)}}}),[["__scopeId","data-v-f29f1c24"]]),os={class:"personal-dashboard personal-dashboard-v1"},rs={class:"dashboard-body"},cs={class:"columns is-multiline"},ds={class:"column is-12"},us={class:"dashboard-card"},ps=s({__name:"CompanyRegisterWorkerChart",setup(e){const t=oe(),l=j({series:[{name:"Registered",data:[20,34,40,50,60,80,20,46,56,80,25,60]}],chart:{height:285,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(e){return e},offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],position:"top",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{max:100,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1,formatter:function(e){return e}}},colors:[t.primary,t.secondary,t.orange],title:{text:"Registered Workers",align:"left"}});return(e,t)=>(o(),v("div",os,[d("div",rs,[d("div",cs,[d("div",ds,[d("div",us,[y(p(ne),{height:p(l).chart.height,type:p(l).chart.type,series:p(l).series,options:p(l)},null,8,["height","type","series","options"])])])])])]))}}),ms={class:"profile-wrapper"},ys={class:"is-flex"},vs=["src"],gs={class:"title is-4 is-narrow ml-4 mt-4 mb-4"},fs={style:{display:"flex","padding-left":"10px","margin-left":"10px"}},hs={class:"mb-1 ml-0 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},xs={class:"profile-stat"},_s=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Name: ",-1),bs={style:{color:"var(--light-text)"}},ws={class:"profile-stat"},ks=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Email: ",-1),Cs={style:{color:"var(--light-text)"}},Ts={class:"mb-1 ml-4 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},qs={class:"profile-stat mr-2"},As=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Status: ",-1),Is={style:{color:"var(--light-text)"}},Ds={class:"profile-stat mr-3"},zs=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Phone: ",-1),Os={style:{color:"var(--light-text)"}},Ss={class:"mb-1 ml-4 p-0",style:{display:"flex","flex-direction":"column",gap:"10px"}},js={class:"profile-stat"},Ms=d("span",{style:{color:"var(--primary)"}},"Licences: ",-1),Vs={style:{color:"var(--light-text)"}},Rs={class:"profile-stat"},Es=d("span",{class:"mr-1",style:{color:"var(--primary)"}},"Workers: ",-1),Ns={class:"profile-stat"},Us=d("span",{style:{color:"var(--primary)"}},"Check workers Sanctions: ",-1),Ls={key:0},Qs={class:"profile-body"},$s={class:"columns"},Fs={class:"column is-8"},Ps={class:"profile-card"},Bs={class:"profile-card-section"},Ws=d("div",{class:"columns"},[d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#e3ffe3"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"20"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}}," Active Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#ffe3e3"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"10"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}}," Not-active Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#6c31a34a"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"30"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}},"Total Team Members")])])])]),d("div",{class:"column is-3"},[d("div",{class:"profile-card",style:{padding:"10px 0px 0px 0px",background:"#42d04d78"}},[d("div",{class:"profile-card-section no-padding"},[d("div",{class:"section-title is-block",style:{"text-align":"center"}},[d("h4",{style:{color:"#4e4e4e","font-size":"14px"}},"100"),d("h4",{class:"mt-1",style:{color:"#4e4e4e"}},"Total Registered Workers")])])])])],-1),Hs={class:"column is-4"},Ys={class:"profile-card"},Gs={class:"profile-card-section no-padding"},Js=d("div",{class:"section-title"},[d("h4",null,"Industries")],-1),Ks={class:"section-content"},Zs={class:"tools-wrapper"},Xs={class:"tools-item"},ei={class:"meta"},ti={class:"dark-inverted"},li={key:1},ai={key:2},si={key:3},ii=s({__name:"CompanyProfile",setup(a){const s=Q(),u=U(),m=L(),h=M(),x=i(!1);i("about");const _=s.loggedCompany.id,k=i(!1);i({});const T=V((()=>h.query.tab?h.query.tab:"about")),q=async()=>{try{x.value=!0;const e=await u.post("/v3/api/worker/sanction/update-workers/",{company:_});console.log("sanctions",e),x.value=!1,m.success("Worker sanctions list updated successfuly")}catch(e){m.error(e)}finally{x.value=!1}};console.log("active value "+T.value);const I=async()=>{s.loadCompany(s.loggedCompany.id)};return n((()=>{})),(a,i)=>{const n=te,u=ps,m=ie,D=se,z=ns,O=rl,S=l,j=t,M=e;return o(),v("div",ms,[d("div",{style:A([{backgroundImage:`linear-gradient(to right, ${p(s).loggedCompany.color}50, ${p(s).loggedCompany.color}30, ${p(s).loggedCompany.color}10)`},{padding:"20px 10px",display:"flex","margin-bottom":"12px",height:"180px","border-radius":"16px",border:"1px solid rgba(85, 85, 85, 0.164)"}])},[d("div",ys,[d("img",{class:"m-3",src:p(s).loggedCompany.compnayLogo?p(s).loggedCompany.compnayLogo:"/images/dummyShareProf/logo-placeholder.png",alt:"logo",style:{width:"120px",height:"auto","border-radius":"16px"}},null,8,vs),d("div",null,[d("h3",gs,[f(C(p(s).loggedCompany.companyName&&p(s).loggedCompany.companyName)+" ",1),d("i",{onClick:i[0]||(i[0]=e=>{k.value=!0}),"aria-hidden":"true",class:"lnil lnil-pencil",style:{cursor:"pointer","font-size":"16px",color:"var(--primary)"}})]),d("div",fs,[d("div",hs,[d("div",xs,[_s,d("span",bs,C(p(s).loggedCompany.companyRegisteredName),1)]),d("div",ws,[ks,d("span",Cs,C(p(s).loggedCompany.companyEmailAddress),1)])]),d("div",Ts,[d("div",qs,[As,d("span",Is,C(p(s).loggedCompany.activationStatus?"Active":"In-Active"),1)]),d("div",Ds,[zs,d("span",Os,C(p(s).loggedCompany.companyPhoneNumber),1)])]),d("div",Ss,[d("div",js,[Ms,d("span",Vs,C(p(s).loggedCompany.current_licence)+"+ ",1)]),d("div",Rs,[Es,d("span",{onClick:i[1]||(i[1]=()=>{T.value="workers"}),style:{color:"var(--light-text)"}},C(p(s).loggedCompany.managed_workers)+" Workers",1)])]),d("div",Ns,[Us,y(n,{onClick:q,style:{padding:"2px",width:"22px",height:"22px","padding-top":"4px"},color:"primary",outlined:"",loading:p(x),circle:"",icon:"fas fa-sync-alt"},null,8,["loading"])])])])])],4),y(j,{selected:p(T),class:"mt-4",type:"toggle",tabs:[{label:"Home",value:"about",icon:"lnil lnil-home"},{label:"Worker Compliance",value:"docs",icon:"lnil lnil-licencse"},{label:"Partner Compliance",value:"partner-doc",icon:"fas fa-users"},{label:"Controllers",value:"team-members",icon:"lnil lnil-users"}]},{tab:c((({activeValue:e})=>["about"===e?(o(),v("div",Ls,[d("div",Qs,[d("div",$s,[d("div",Fs,[d("div",Ps,[d("div",Bs,[Ws,y(u)])])]),d("div",Hs,[d("div",Ys,[d("div",Gs,[Js,d("div",Ks,[d("div",Zs,[(o(!0),v(b,null,w(p(s).loggedCompany.industry,(e=>(o(),v("div",Xs,[e.id?(o(),r(D,{key:0,picture:e.industryLogo,alt:"img"},{after:c((()=>[y(m,{type:"pie",values:[100,100],fill:["var(--primary)","transparent"],height:50,"inner-radius":22,width:50},null,8,["fill"])])),_:2},1032,["picture"])):g("",!0),d("div",ei,[d("span",ti,C(e.name),1)])])))),256))])])])])])])])])):g("",!0),"docs"!==e&&!p(h).query.compliance?g("",!0):(o(),v("div",li,[y(z,{id:p(_)},null,8,["id"])])),"partner-doc"!==e&&!p(h).query.compliance?g("",!0):(o(),v("div",ai,[y(O,{id:p(_)},null,8,["id"])])),"team-members"===e?(o(),v("div",si,[y(S)])):g("",!0)])),_:1},8,["selected"]),p(k)?(o(),r(M,{key:0,EditCompanyModalOpen:p(k),id:p(_),"onUpdate:handleUpdateEditCompanyModalOpen":i[2]||(i[2]=e=>k.value=e),"onUpdate:getAllCompanies":I},null,8,["EditCompanyModalOpen","id"])):g("",!0)])}}});export{ii as _};
