import{_ as s}from"./VModal.vue_vue_type_style_index_0_lang-2860b2b3.js";import{e as a,r as e,t as l,o,y as n,H as r,B as t,C as d,S as i,l as u,j as p,bU as c,A as m,D as v,K as w,E as f}from"./index-ff7bbf87.js";import{u as h}from"./useAPI-012a4cc1.js";import{u as y}from"./useNotyf-151d038a.js";const g={class:"modal-form columns is-multiline"},b={class:"column is-12"},P={class:"field"},_=d("label",null,"New Password:",-1),C={class:"control"},x=["type"],M={class:"column is-12"},j={class:"field"},k=d("label",null,"Confirm Password:",-1),A={class:"control"},N=["type"],O=d("label",null,"Show Password:",-1),S=a({__name:"ChangeMemberPassword",props:{ChangePasswordModalOpen:{type:Boolean,default:!1},id:{type:Number,default:0}},emits:["update:handleChangePasswordModalOpen","update:getTeamMembers"],setup(a,{emit:S}){const B=a,U=y(),V=h(),q=e(!1),D=e(""),I=e("");l();const z=e(!1),E=async()=>{if(!q.value){if(D.value!=I.value)return void U.error("Both password and confirm password  must be matched");q.value=!0;try{await V.post("/v3/api/account/auth/change-team-member-password/",{password:D.value,confirm_password:I.value,user:B.id});H()}catch(s){q.value=!1,U.dismissAll(),U.error("Inavlid link or expired, password update")}}},H=()=>{q.value=!1,U.dismissAll(),U.success("Password updated successfully"),K()},K=()=>{S("update:handleChangePasswordModalOpen",!1)},T=()=>{z.value=!z.value};return o((()=>{})),(a,e)=>{const l=f,o=s;return n(),r(o,{is:"form",open:B.ChangePasswordModalOpen,title:"Change Password",size:"small",actions:"right",onSubmit:w(E,["prevent"]),onClose:K,noclose:""},{content:t((()=>[d("div",g,[d("div",b,[d("div",P,[_,d("div",C,[i(d("input",{type:u(z)?"text":"password",name:"password",minlength:"8","onUpdate:modelValue":e[0]||(e[0]=s=>p(D)?D.value=s:null),required:"",class:"input",placeholder:"New password"},null,8,x),[[c,u(D)]])])])]),d("div",M,[d("div",j,[k,d("div",A,[i(d("input",{type:u(z)?"text":"password",name:"confirmPassword",minlength:"8","onUpdate:modelValue":e[1]||(e[1]=s=>p(I)?I.value=s:null),required:"",class:"input",placeholder:"Confirm password"},null,8,N),[[c,u(I)]])])])]),d("div",{class:"column is-12"},[d("div",{class:"field",style:{display:"flex","align-items":"center",gap:".5rem"}},[d("div",{class:"control"},[d("input",{type:"checkbox",class:"checkbox",onClick:T})]),O])])])])),action:t((()=>[m(l,{type:"submit",loading:u(q),color:"primary",raised:""},{default:t((()=>[v("Change Password")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{S as _};
