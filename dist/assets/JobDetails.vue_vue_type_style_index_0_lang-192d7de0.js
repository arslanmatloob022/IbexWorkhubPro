import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-caca132c.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-94f91073.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-80ecbb07.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-02cb7220.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-0e4c4287.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-0a972dbc.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-dbb018f8.js";import{_ as d}from"./VInput.vue_vue_type_script_setup_true_lang-3bde6f9f.js";import{_ as c}from"./VControl-46589ea0.js";import{f as u,b as r,r as p,w as m,$ as v,o as _,av as h,C as f,D as y,E as g,F as b,G as k,K as x,U as w,L as j,X as V,N as C,aS as T,m as U,O as S,V as I,W as P,P as A,al as M,Q as D,R as E,S as F,B as R,J as K,I as O,x as N,H as B,k as $,aB as J,y as H}from"./index-853bcf9f.js";import{_ as z,a as q}from"./search-4-dark-2b5b440c.js";import{u as G}from"./useAPI-c77048ff.js";import{u as W}from"./useNotyf-0e7f3e7b.js";import{_ as Z}from"./ExcelFileEditor-b4876481.js";import{b as Q,a as X,C as Y,f as ee}from"./useSupportElement-debaff47.js";import{_ as le}from"./VModal.vue_vue_type_style_index_0_lang-30c54744.js";import{_ as ae}from"./VLabel.vue_vue_type_script_setup_true_lang-6da5787f.js";import{_ as te}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-be092411.js";import{_ as se,a as ie}from"./ProjectFiles-94bba193.js";import{u as ne,_ as oe,a as de}from"./groupedCircleCharts-f7cedf96.js";import{b as ce,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-d6986d96.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-f1771b31.js";import{A as _e}from"./vue3-apexcharts.common-9ccb433b.js";import{u as he}from"./salesSparksChart-fae68a73.js";import{u as fe}from"./revenueAreaChart-53219e9d.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-713a4604.js";import{h as ge}from"./moment-1b9a430c.js";import{_ as be}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-e48dfed4.js";import{p as ke}from"./index-c1fc2d09.js";import{a as xe}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-ef155cce.js";import{_ as we}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-40f80785.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-3a97d518.js";import{o as Ve}from"./via-placeholder-24645670.js";import{_ as Ce}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-8fcb52da.js";import{_ as Te}from"./VDropdown.vue_vue_type_style_index_0_lang-0cb74a9e.js";import{_ as Ue}from"./VPlyr.vue_vue_type_style_index_0_lang-a726f29c.js";import{f as Se}from"./index-5fa9b154.js";import{_ as Ie}from"./UIWidget.vue_vue_type_style_index_0_lang-9a1fc237.js";import{_ as Pe}from"./JobTodos.vue_vue_type_style_index_0_lang-c75ba97c.js";import{_ as Ae}from"./UserCardDropdown-4b116dc8.js";import{_ as Me}from"./VTag.vue_vue_type_style_index_0_lang-e7a695ae.js";import{_ as De}from"./VIconBox.vue_vue_type_style_index_0_lang-c3523d38.js";import{_ as Ee}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-939db6cc.js";const Fe=e=>(D("data-v-6b746c41"),e=e(),E(),e),Le={class:"column is-12"},Re={class:"list-flex-toolbar is-reversed"},Ke={class:"columns is-multiline"},Oe={key:0,class:"column is-12 card p-4 curved mb-2"},Ne={class:"columns is-multiline"},Be={class:"column is-10"},$e={class:"column is-2"},Je=Fe((()=>g("img",{class:"light-image",src:z,alt:""},null,-1))),He=Fe((()=>g("img",{class:"dark-image",src:q,alt:""},null,-1))),ze={key:0,class:"column is-12 card p-4 curved mb-2"},qe={class:"columns is-multiline"},Ge={class:"column is-10"},We={class:"column is-2"},Ze={class:"is-flex space-between mb-4 bottom-border"},Qe={class:"title is-5 m-0"},Xe={class:"content"},Ye={class:"is-flex"},el={key:0,class:"columns is-multiline"},ll={class:"column is-6"},al={class:"column is-2"},tl={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},nl={class:"column is-2"},ol={class:"column is-2"},dl={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},rl={class:"is-flex columns is-multiline"},pl=u({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const u=e;r();const D=G(),E=W(),F=p(!1),L={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},R=p(!1),K=p(!1),O=p(!1),N=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),B=p(""),$=p(""),J=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),H=p({title:"",is_template:!1,object:u.objectId??"",description:""}),z=p({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await D.get(`/api/calculation-section/?object=${u.objectId??""}&user_id=${u.userId??""}&is_template=${u.fetchTemplates??""}`);N.value=e.data}catch(e){console.error(e)}finally{F.value=!1}},Z=async()=>{try{const e=H.value;await D.post("/api/calculation-section/",e);E.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{F.value=!1}};m((()=>J.value.width),(()=>{let e=0;e=J.value.height*J.value.width,J.value.item_area=e.toFixed(2)})),m((()=>J.value.item_unit_price),(()=>{let e=0;e=J.value.item_area*J.value.item_unit_price,J.value.item_total_price=e.toFixed(2)})),m((()=>J.value.quantity),(()=>{let e=0;e=J.value.item_total_price*J.value.quantity,J.value.grand_total_price=e.toFixed(2)}));const X=async()=>{try{const e=J.value;e.section=B.value;await D.post("/api/calculation-section-items/",e);E.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{F.value=!1}},Y=v((()=>{if($.value){const e=new RegExp($.value,"i");return N.value.filter((l=>l.title?.match(e)))}return N.value})),ee=async e=>{try{await D.delete(`/api/calculation-section/${e}/`),E.success("Section deleted successfully!"),q()}catch(l){console.error(l),E.error("Failed to delete sheet.")}};return _((async()=>{await q(),await q()})),(e,u)=>{const r=A,p=M,m=c,v=d,_=o,D=n,E=i,F=s,N=t,q=l,G=a,W=h("tooltip");return f(),y("div",Le,[g("div",Re,[b(p,null,{default:k((()=>[b(r,{icon:K.value?"fas fa-window-close":"fas fa-plus",color:K.value?"warning":"primary",class:"ml-2",raised:"",onClick:u[0]||(u[0]=e=>K.value=!K.value)},{default:k((()=>[x(w(K.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:u[1]||(u[1]=e=>K.value=!K.value)},{default:k((()=>[x("Import")])),_:1})])),_:1}),g("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>$.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,$.value]])])),_:1})])]),g("div",Ke,[b(T,{name:"translate-page-y"},{default:k((()=>[K.value?(f(),y("div",Oe,[g("div",Ne,[g("div",Be,[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:H.value.title,"onUpdate:modelValue":u[3]||(u[3]=e=>H.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(D,{modelValue:H.value.description,"onUpdate:modelValue":u[4]||(u[4]=e=>H.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",$e,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:Z},{default:k((()=>[x(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(E,{modelValue:H.value.is_template,"onUpdate:modelValue":u[5]||(u[5]=e=>H.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):C("",!0)])),_:1}),U(Y).length?C("",!0):(f(),S(F,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[Je,He])),_:1})),b(T,{name:"translate-page-y"},{default:k((()=>[O.value?(f(),y("div",ze,[g("div",qe,[g("div",Ge,[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":u[6]||(u[6]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(D,{modelValue:z.value.description,"onUpdate:modelValue":u[7]||(u[7]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",We,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:Z},{default:k((()=>[x(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(E,{modelValue:z.value.is_template,"onUpdate:modelValue":u[8]||(u[8]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):C("",!0)])),_:1}),b(T,{name:"from-bottom"},{default:k((()=>[U(Y).length?(f(!0),y(I,{key:0},P(U(Y),((e,l)=>(f(),y("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[g("div",Ze,[g("div",null,[g("h4",Qe,w(e.title),1),g("div",Xe,[g("p",null,w(U(Q)(e.created_at)),1)])]),g("div",Ye,[b(N,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),j(b(N,{icon:"fas fa-plus",color:R.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{B.value=e,R.value=!R.value,0==R.value&&(J.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[W,"Add Item",void 0,{rounded:!0,primary:!0}]]),j(b(N,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[W,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(N,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),R.value?(f(),y("div",el,[g("div",ll,[b(_,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":u[9]||(u[9]=e=>J.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",al,[b(_,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.height,"onUpdate:modelValue":u[10]||(u[10]=e=>J.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",tl,[b(_,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.width,"onUpdate:modelValue":u[11]||(u[11]=e=>J.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",sl,[b(_,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_area,"onUpdate:modelValue":u[12]||(u[12]=e=>J.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",il,[b(_,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.unit,"onUpdate:modelValue":u[13]||(u[13]=e=>J.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",nl,[b(_,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_unit_price,"onUpdate:modelValue":u[14]||(u[14]=e=>J.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ol,[b(_,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_total_price,"onUpdate:modelValue":u[15]||(u[15]=e=>J.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",dl,[b(_,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.quantity,"onUpdate:modelValue":u[16]||(u[16]=e=>J.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",cl,[b(_,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.grand_total_price,"onUpdate:modelValue":u[17]||(u[17]=e=>J.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ul,[b(r,{light:"",fullwidth:"",onClick:X,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[x("Add Item")])),_:1})])])):C("",!0),g("div",rl,[e.items.length?(f(),S(G,{key:0,class:"column is-12",data:e.items,columns:L,compact:""},{body:k((()=>[b(T,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(f(!0),y(I,null,P(e.items,(e=>(f(),y("div",{key:e.id,class:"flex-table-item"},[b(q,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,{column:{align:"end"}},{default:k((()=>[b(N,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(N,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):C("",!0)])])))),128)):C("",!0)])),_:1})])])}}}),ml=F(pl,[["__scopeId","data-v-6b746c41"]]),vl=e=>(D("data-v-00dd0426"),e=e(),E(),e),_l={key:1},hl={class:"columns is-multiline"},fl={class:"list-flex-toolbar is-reversed column is-12"},yl={class:"multiselect-single-label"},gl=["src"],bl=["src"],kl={class:"is-flex"},xl={class:"card p-4 curved is-flex space-between"},wl={class:"subtitle is-5 m-0"},jl={class:"content"},Vl={class:"is-flex"},Cl={class:"modal-form columns is-multiline"},Tl={class:"file has-name"},Ul={class:"file-label"},Sl=vl((()=>g("span",{class:"file-cta"},[g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})]),g("span",{class:"file-label"}," Choose a file… ")],-1))),Il={class:"file-name light-text"},Pl=u({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e,a=r();p(null);const s=G(),i=W(),n=p(!1);p([[""]]);const u=p([]),h=p([]),T=p(""),D=p(!1);p("");const E=p("");p("");const F=p(!1),L=p(0),O=p({file:"",title:"",user_id:a.user.id,object_id:l.objectId}),N=e=>{let l=e.target.files[0];O.value.file=l,E.value=l.name,O.value.title=l.name},B=p(""),$=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),J=async()=>{try{n.value=!0;const e=await s.get("/api/excel-files/");u.value=e.data}catch(e){console.error(e)}finally{n.value=!1}},H=(e="")=>{L.value=e,F.value=!0},z=p(!1),q=async()=>{try{z.value=!0;const e=X(O.value,[""]);await s.post("/api/excel-files/upload-excel/",e);J(),i.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,D.value=!1}};m((()=>B.value),(e=>{e&&(async e=>{try{z.value=!0,await s.post(`/api/excel-files/create-from-template/${e}/`),i.success("Sheet create successfully"),J()}catch(l){console.error(l)}finally{z.value=!1,D.value=!1}})(e)}));p("excel");const Y=v((()=>{if(T.value){const e=new RegExp(T.value,"i");return u.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return u.value.filter((e=>0==e.is_template))}));return v((()=>{if(T.value){const e=new RegExp(T.value,"i");return h.value.filter((l=>l.title?.match(e)))}return h.value})),_((async()=>{l.fetchAll&&await J(),l.userId&&(async()=>{try{n.value=!0;const e=await s.get(`/api/excel-files/by-user/${l.userId}/`);u.value=e.data}catch(e){console.error(e)}finally{n.value=!1}})(),(async()=>{try{n.value=!0;const e=await s.get("/api/excel-files/templates/");h.value=e.data,$.value=h.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{n.value=!1}})(),await J()})),(e,l)=>{const a=te,u=R("Multiselect"),r=c,p=o,m=A,v=M,_=t,h=Z,z=ae,G=d,W=le;return n.value?(f(),S(a,{key:0})):(f(),y("div",_l,[g("div",hl,[g("div",fl,[b(v,null,{default:k((()=>[b(p,{style:{width:"260px"}},{default:k((({id:e})=>[b(r,null,{default:k((()=>[b(u,{modelValue:B.value,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:$.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[g("div",yl,[g("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,gl),x(" "+w(e.name),1)])])),option:k((({option:e})=>[g("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,bl),x(" "+w(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(m,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>H())},{default:k((()=>[x("New Sheet")])),_:1}),b(m,{icon:"fas fa-upload",raised:"",light:"",onClick:l[2]||(l[2]=e=>D.value=!D.value),outlined:"",color:"primary"},{default:k((()=>[x(" File ")])),_:1})])),_:1}),g("div",kl,[b(r,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>T.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,T.value]])])),_:1})])]),(f(!0),y(I,null,P(U(Y),((e,l)=>(f(),y("div",{class:"column is-6",key:e.id},[g("div",xl,[g("div",null,[g("h4",wl,w(e.title),1),g("div",jl,[g("p",null,w(U(Q)(e.created_at)),1)])]),g("div",Vl,[b(_,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>H(e.id),"has-background":""},null,8,["onClick"]),b(_,{onClick:l=>(async e=>{try{await s.delete(`/api/excel-files/${e}/`),i.success("Sheet deleted successfully!"),J()}catch(l){console.error(l),i.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128))]),F.value?(f(),S(h,{key:0,class:"fullscreen","excel-file-modal":F.value,fileId:L.value,isTemplate:!1,"onUpdate:modalHandler":l[4]||(l[4]=e=>{F.value=!1,J()})},null,8,["excel-file-modal","fileId"])):C("",!0),b(W,{is:"form",open:D.value,title:"Upload Task File",size:"medium",actions:"right",onClose:l[7]||(l[7]=e=>D.value=!1),onSubmit:K(q,["prevent"])},{content:k((()=>[g("div",Cl,[b(p,{class:"column is-12"},{default:k((()=>[b(z,null,{default:k((()=>[x("File Title")])),_:1}),b(r,null,{default:k((()=>[b(G,{modelValue:O.value.title,"onUpdate:modelValue":l[5]||(l[5]=e=>O.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(p,{class:"column is-12",grouped:""},{default:k((()=>[b(r,null,{default:k((()=>[g("div",Tl,[g("label",Ul,[g("input",{onChange:N,class:"file-input",type:"file",name:"file",required:""},null,32),Sl,g("span",Il,w(E.value?E.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(m,{onClick:l[6]||(l[6]=e=>D.value=!1),raised:""},{default:k((()=>[x("Close")])),_:1})])),action:k((()=>[b(m,{type:"submit",color:"primary",raised:""},{default:k((()=>[x("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Al=F(Pl,[["__scopeId","data-v-00dd0426"]]),Ml={class:"columns is-multiline"},Dl={class:"column is-3"},El={class:"column is-3"},Fl={class:"column is-3"},Ll={class:"column is-3"},Rl={class:"column is-6"},Kl={class:"column is-6"},Ol={class:"column is-6"},Nl={class:"column is-6"},Bl={class:"column is-6"},$l={class:"column is-6"},Jl=u({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=he(),{revenueOptions:i}=fe(),{lineStatsChartOptions:n}=ce(),{flexRadialChartCircleOptions:o}=ue(),{flexRadialChartStripesOptions:d}=re(),{widgetGaugeGroup1Options:c,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ne();return(e,_)=>{const h=ve,x=me,w=oe,j=de;return f(),y("div",Ml,[g("div",Dl,[b(h,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark1",height:U(l).chart.height,type:U(l).chart.type,series:U(l).series,options:U(l)},null,8,["height","type","series","options"])])),_:1})]),g("div",El,[b(h,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark2",height:U(a).chart.height,type:U(a).chart.type,series:U(a).series,options:U(a)},null,8,["height","type","series","options"])])),_:1})]),g("div",Fl,[b(h,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark3",height:U(t).chart.height,type:U(t).chart.type,series:U(t).series,options:U(t)},null,8,["height","type","series","options"])])),_:1})]),g("div",Ll,[b(h,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark4",height:U(s).chart.height,type:U(s).chart.type,series:U(s).series,options:U(s)},null,8,["height","type","series","options"])])),_:1})]),g("div",Rl,[b(x,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(U(_e),{id:"line-stats-widget-chart",height:U(n).chart.height,type:U(n).chart.type,series:U(n).series,options:U(n)},null,8,["height","type","series","options"])])),_:1})]),g("div",Kl,[b(x,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(U(_e),{id:"line-stats-area-chart",height:U(i).chart.height,type:U(i).chart.type,series:U(i).series,options:U(i)},null,8,["height","type","series","options"])])),_:1})]),g("div",Ol,[b(w,{title:"Sales Revenue",straight:""},{default:k((()=>[b(U(_e),{id:"flex-stat-circle",height:U(o).chart.height,type:U(o).chart.type,series:U(o).series,options:U(o)},null,8,["height","type","series","options"])])),_:1})]),g("div",Nl,[b(w,{title:"Sales Revenue",straight:""},{default:k((()=>[b(U(_e),{id:"flex-stat-radial",height:U(d).chart.height,type:U(d).chart.type,series:U(d).series,options:U(d)},null,8,["height","type","series","options"])])),_:1})]),g("div",Bl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(U(_e),{id:"group-radial-1",height:U(p).chart.height,type:U(p).chart.type,series:U(p).series,options:U(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(U(_e),{id:"group-radial-2",height:U(m).chart.height,type:U(m).chart.type,series:U(m).series,options:U(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(U(_e),{id:"group-radial-3",height:U(v).chart.height,type:U(v).chart.type,series:U(v).series,options:U(v)},null,8,["height","type","series","options"])])),_:1})]),g("div",$l,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(U(_e),{id:"group-gauge-1",height:U(c).chart.height,type:U(c).chart.type,series:U(c).series,options:U(c)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(U(_e),{id:"group-gauge-2",height:U(u).chart.height,type:U(u).chart.type,series:U(u).series,options:U(u)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(U(_e),{id:"group-gauge-3",height:U(r).chart.height,type:U(r).chart.type,series:U(r).series,options:U(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Hl=e=>(D("data-v-1f68036b"),e=e(),E(),e),zl={class:"timeline-wrapper"},ql=Hl((()=>g("div",{class:"timeline-header"},null,-1))),Gl={class:"timeline-wrapper-inner"},Wl={class:"timeline-container"},Zl={class:"timeline-item is-unread"},Ql={class:"date"},Xl={class:"content-wrap"},Yl={class:"content-box"},ea=Hl((()=>g("div",{class:"status"},null,-1))),la={class:"box-text"},aa={class:"meta-text"},ta=["innerHTML"],sa=u({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=G(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return _((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=ye;return f(),y("div",zl,[ql,g("div",Gl,[g("div",Wl,[(f(!0),y(I,null,P(U(t),(e=>(f(),y("div",Zl,[g("div",Ql,[g("span",null,w(U(ge)(e.timestamp).format("ddd, mm yyyy")),1)]),g("div",{class:O(["dot",s[e.action]])},null,2),g("div",Xl,[g("div",Yl,[ea,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),g("div",la,[g("div",aa,[g("p",null,[g("span",null,w(e.actor_info?.username??"N/A")+" "+w(e.actor_info?.last_name??"N/A"),1),g("span",{class:"log-message",innerHTML:e.message},null,8,ta)]),g("span",null,w(U(ge)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),ia=F(sa,[["__scopeId","data-v-1f68036b"]]),na={class:"table is-striped is-fullwidth"},oa=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Job"),g("th",{scope:"col"},"ID"),g("th",{scope:"col"},"Title"),g("th",{scope:"col"},"Status"),g("th",{scope:"col"},"Total Price"),g("th",{scope:"col"},"Total Tax"),g("th",{scope:"col"},"Amount Paid"),g("th",{scope:"col"},"Balance"),g("th",{scope:"col"},"Deadline"),g("th",{scope:"col"},"Date Paid"),g("th",{scope:"col"},"Files"),g("th",{scope:"col",class:"is-end"},"Actions")])],-1),da=g("td",null,"Tina",-1),ca=g("td",null,"Bergmann",-1),ua=g("td",null,"Sales",-1),ra=g("td",null,"Tina",-1),pa=g("td",null,"Bergmann",-1),ma=g("td",null,"Sales",-1),va=g("td",null,"Tina",-1),_a=g("td",null,"Bergmann",-1),ha=g("td",null,"Sales",-1),fa=g("td",null,"Bergmann",-1),ya=g("td",null,"Sales",-1),ga={class:"is-end"},ba={class:"is-flex is-justify-content-flex-end"},ka=g("td",null,"Tina",-1),xa=g("td",null,"Bergmann",-1),wa=g("td",null,"Sales",-1),ja=g("td",null,"Tina",-1),Va=g("td",null,"Bergmann",-1),Ca=g("td",null,"Sales",-1),Ta=g("td",null,"Tina",-1),Ua=g("td",null,"Bergmann",-1),Sa=g("td",null,"Sales",-1),Ia=g("td",null,"Bergmann",-1),Pa=g("td",null,"Sales",-1),Aa={class:"is-end"},Ma={class:"is-flex is-justify-content-flex-end"},Da=g("td",null,"Tina",-1),Ea=g("td",null,"Bergmann",-1),Fa=g("td",null,"Sales",-1),La=g("td",null,"Tina",-1),Ra=g("td",null,"Bergmann",-1),Ka=g("td",null,"Sales",-1),Oa=g("td",null,"Tina",-1),Na=g("td",null,"Bergmann",-1),Ba=g("td",null,"Sales",-1),$a=g("td",null,"Bergmann",-1),Ja=g("td",null,"Sales",-1),Ha={class:"is-end"},za={class:"is-flex is-justify-content-flex-end"},qa=g("td",null,"Tina",-1),Ga=g("td",null,"Bergmann",-1),Wa=g("td",null,"Sales",-1),Za=g("td",null,"Tina",-1),Qa=g("td",null,"Bergmann",-1),Xa=g("td",null,"Sales",-1),Ya=g("td",null,"Tina",-1),et=g("td",null,"Bergmann",-1),lt=g("td",null,"Sales",-1),at=g("td",null,"Bergmann",-1),tt=g("td",null,"Sales",-1),st={class:"is-end"},it={class:"is-flex is-justify-content-flex-end"},nt=u({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;N();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=be;return f(),y("table",na,[oa,g("tbody",null,[g("tr",null,[da,ca,ua,ra,pa,ma,va,_a,ha,fa,ya,g("td",ga,[g("div",ba,[b(a)])])]),g("tr",null,[ka,xa,wa,ja,Va,Ca,Ta,Ua,Sa,Ia,Pa,g("td",Aa,[g("div",Ma,[b(a)])])]),g("tr",null,[Da,Ea,Fa,La,Ra,Ka,Oa,Na,Ba,$a,Ja,g("td",Ha,[g("div",za,[b(a)])])]),g("tr",null,[qa,Ga,Wa,Za,Qa,Xa,Ya,et,lt,at,tt,g("td",st,[g("div",it,[b(a)])])])])])}}}),ot={class:"table is-striped is-fullwidth"},dt=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"First Name"),g("th",{scope:"col"},"Last Name"),g("th",{scope:"col"},"Position"),g("th",{scope:"col",class:"is-end"},[g("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ct=g("td",null,"Tina",-1),ut=g("td",null,"Bergmann",-1),rt=g("td",null,"Head of Sales",-1),pt={class:"is-end"},mt={class:"is-flex is-justify-content-flex-end"},vt=g("td",null,"John",-1),_t=g("td",null,"Wistmus",-1),ht=g("td",null,"Senior Executive",-1),ft={class:"is-end"},yt={class:"is-flex is-justify-content-flex-end"},gt=g("td",null,"Sam",-1),bt=g("td",null,"Watson",-1),kt=g("td",null,"Software Engineer",-1),xt={class:"is-end"},wt={class:"is-flex is-justify-content-flex-end"},jt=g("td",null,"Jolaine",-1),Vt=g("td",null,"Joestar",-1),Ct=g("td",null,"HR Manager",-1),Tt={class:"is-end"},Ut={class:"is-flex is-justify-content-flex-end"},St=g("td",null,"Anders",-1),It=g("td",null,"Jensen",-1),Pt=g("td",null,"Accountant",-1),At={class:"is-end"},Mt={class:"is-flex is-justify-content-flex-end"},Dt=u({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;N();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=be;return f(),y("table",ot,[dt,g("tbody",null,[g("tr",null,[ct,ut,rt,g("td",pt,[g("div",mt,[b(a)])])]),g("tr",null,[vt,_t,ht,g("td",ft,[g("div",yt,[b(a)])])]),g("tr",null,[gt,bt,kt,g("td",xt,[g("div",wt,[b(a)])])]),g("tr",null,[jt,Vt,Ct,g("td",Tt,[g("div",Ut,[b(a)])])]),g("tr",null,[St,It,Pt,g("td",At,[g("div",Mt,[b(a)])])])])])}}}),Et={class:"columns is-multiline"},Ft={class:"column is-12"},Lt={class:"toolbar"},Rt={class:"tabs-inner"},Kt={class:"tabs"},Ot=g("span",null,"Estimate",-1),Nt=[Ot],Bt=g("span",null,"Budget",-1),$t=[Bt],Jt=g("span",null,"Owner Invoice",-1),Ht=[Jt],zt=g("li",{class:"tab-naver"},null,-1),qt={key:0,class:"column is-12"},Gt={key:1,class:"column is-12"},Wt={key:2,class:"column is-12"},Zt=u({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;N();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Dt,s=nt;return f(),y("div",Et,[g("div",Ft,[g("div",Lt,[g("div",Rt,[g("div",Kt,[g("ul",null,[g("li",{class:O(["estimate"===U(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=B(K((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},Nt,32)],2),g("li",{class:O(["budget"===U(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=B(K((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},$t,32)],2),g("li",{class:O(["invoice"===U(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=B(K((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Ht,32)],2),zt])])])])]),"estimate"===U(a)?(f(),y("div",qt,[b(t)])):C("",!0),"budget"===U(a)?(f(),y("div",Gt)):C("",!0),"invoice"===U(a)?(f(),y("div",Wt,[b(s)])):C("",!0)])}}}),Qt={class:"user-grid-toolbar"},Xt=g("span",{class:"icon"},[g("i",{class:"fas fa-plus"})],-1),Yt=g("span",null,"Progress",-1),es={class:"user-grid user-grid-v1"},ls={class:"columns is-multiline"},as={class:"grid-item"},ts={class:"is-flex"},ss=u({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=c,n=R("Multiselect"),d=o,u=A,r=M,p=J,m=je,v=we;return f(),y("div",null,[g("div",Qt,[b(i,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>$(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,U(l)]])])),_:1}),b(r,null,{default:k((()=>[b(d,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:U(a),"onUpdate:modelValue":s[1]||(s[1]=e=>$(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,null,{default:k((()=>[Xt,Yt])),_:1})])),_:1})]),g("div",es,[g("div",ls,[(f(),y(I,null,P(20,(e=>g("div",{key:e,class:"column is-3"},[g("div",as,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),g("div",ts,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),is={key:1},ns={class:"card-grid-toolbar"},os={class:"buttons"},ds=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),cs=g("span",null,"Progress",-1),us={class:"card-grid card-grid-v4"},rs=g("img",{class:"light-image",src:z,alt:""},null,-1),ps=g("img",{class:"dark-image",src:q,alt:""},null,-1),ms=["href","title"],vs=["src","alt"],_s={class:"card-grid-item-content"},hs={class:"dark-inverted"},fs={key:0},ys=g("summary",null,"Read More",-1),gs={key:0,class:"card-grid-item-footer"},bs={class:"meta"},ks={class:"dark-inverted"},xs=u({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=G(),t=p(""),i=p(!1),n=p(!1),d=p(0),u=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const h=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return _((()=>{"job"===l.type&&m()})),(e,a)=>{const r=ss,p=c,v=R("Multiselect"),_=o,M=A,D=s,E=ye,F=xe;return U(i)?(f(),S(r,{key:0})):(f(),y("div",is,[g("div",ns,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>$(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,U(t)]])])),_:1}),g("div",os,[b(_,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:U(d),"onUpdate:modelValue":a[1]||(a[1]=e=>$(d)?d.value=e:null),options:u,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(M,{onClick:a[2]||(a[2]=e=>n.value=!U(n)),color:"primary",raised:""},{default:k((()=>[ds,cs])),_:1})])]),g("div",us,[b(D,{class:O([0!==U(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[rs,ps])),_:1},8,["class"]),b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(f(!0),y(I,null,P(U(h),(e=>(f(),y("div",{key:e.id,class:"column is-3"},[g("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[g("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>U(Ve)(400,300))},null,40,vs),g("div",_s,[g("h3",hs,w(e.title?e.title:"No Title"),1),g("p",null,[x(w(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(f(),y("details",fs,[ys,x(" "+w(e.description?e.description:""),1)])):C("",!0)])]),e.uploaded_by_info?(f(),y("div",gs,[b(E,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),g("div",bs,[g("span",ks,w(e.uploaded_by_info.username??"N/A")+" "+w(e.uploaded_by_info.last_name??""),1),g("span",null,w(U(Q)(e.created_at)),1)])])):C("",!0)],8,ms)])))),128))])),_:1})]),U(n)?(f(),S(F,{key:0,job:l.object,openProgressModal:U(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):C("",!0)]))}}}),ws={class:"modal-form columns is-multiline"},js={class:"column is-full"},Vs={class:"field"},Cs=g("label",{class:"label"},"Title ",-1),Ts={class:"control"},Us={class:"field column is-half"},Ss={class:"file"},Is={class:"file-label"},Ps={class:"file-cta"},As=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Ms={class:"file-label"},Ds=u({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;p(null);const t=G(),s=W(),i=p(!1),n=r(),d=()=>{l("close:ModalHandler",!1)},u=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),m=async()=>{try{i.value=!0;const e=X(u.value,["file"]);await t.post("/api/attachment/",e);Y({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${u.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),d()}catch(e){console.log(e)}finally{i.value=!1}},v=p(""),h=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(u.value.file=a,v.value=a.name)};return _((()=>{})),(e,l)=>{const t=c,s=o,n=A,r=le;return f(),S(r,{is:"form",open:a.openFileModal,title:"Add Progress",size:"medium",actions:"right",onSubmit:K(m,["prevent"]),onClose:d},{content:k((()=>[g("div",ws,[g("div",js,[g("div",Vs,[Cs,g("div",Ts,[j(g("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>U(u).title=e)},null,512),[[V,U(u).title]])])])]),g("div",Us,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Ss,[g("label",Is,[g("input",{onChange:h,class:"file-input",type:"file",name:"resume"},null,32),g("span",Ps,[As,g("span",Ms,w(U(v)?U(v):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:k((()=>[b(n,{type:"submit",color:"primary",loading:U(i),raised:""},{default:k((()=>[x(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(n,{color:"light",onClick:d,raised:""},{default:k((()=>[x("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Es={key:0,class:"modal-form"},Fs=["src"],Ls=["src"],Rs=["src"],Ks=["src"],Os={key:1,class:"modal-form"},Ns=g("h1",{class:"title is-5"},"No media file attached",-1),Bs=[Ns],$s=u({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return _((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Ue,n=A,o=le;return f(),S(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(f(),y("div",Es,[a.document?.includes(".pdf")?(f(),y("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Fs)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(f(),y("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ls)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(f(),y("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Rs)):C("",!0),a.document?.includes(".mp4")?(f(),S(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(f(),y("img",{key:4,src:a.document,alt:""},null,8,Ks))])):(f(),y("div",Os,Bs))])),cancel:k((()=>[b(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[x("Close")])),_:1})])),_:1},8,["open","title"])}}}),Js={class:"tile-grid-item"},Hs={class:"tile-grid-item-inner"},zs=["src"],qs={class:"meta"},Gs={class:"dark-inverted"},Ws=g("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),Zs=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),g("div",{class:"meta"},[g("span",null,"Download"),g("span",null,"Download this file")],-1)],Qs=g("hr",{class:"dropdown-divider"},null,-1),Xs=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete this file")],-1)],Ys=u({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=p("");return(e,d)=>{const c=Te;return f(),y("div",null,[g("div",Js,[g("div",Hs,[g("img",{onClick:d[0]||(d[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,zs),g("div",qs,[g("span",Gs,w(a.document.title??"N/A"),1),g("span",null,[g("span",null,w(a.document?.file_info?.size??0)+" MB",1),Ws,g("span",null,"At:"+w(U(ee)(a.document.created_at)),1)])]),b(c,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[g("a",{role:"menuitem",onClick:d[1]||(d[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},Zs),Qs,g("a",{role:"menuitem",onClick:d[2]||(d[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},Xs)])),_:1})])]),U(s)?(f(),S($s,{key:0,openDocViewModal:U(s),document:U(t),DocumentType:U(o),title:U(i),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):C("",!0)])}}}),ei={key:1},li={class:"tile-grid-toolbar"},ai={class:"buttons"},ti=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),si=g("span",null,"File",-1),ii={class:"tile-grid tile-grid-v2"},ni=g("img",{class:"light-image",src:z,alt:""},null,-1),oi=g("img",{class:"dark-image",src:q,alt:""},null,-1),di=u({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{}},setup(e){const l=e,a=W(),t=G(),i=p(""),n=p(0),d=p(""),u=p(!1),r=p(!1),m=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),h=["All Files","Recently Updated","My Files","Team Files","Deprecated"],x=async(e="proposal_formats")=>{try{u.value=!0;const e=await t.get(`/api/attachment/by-object/${l.objectId}/?type=${l.docType}`);m.value=e.data}catch(a){console.log(a)}finally{u.value=!1}},w=async e=>{try{const s=await t.delete(`/api/attachment/${e}/`);Y({object_type:"files",object_id:l.objectId,action:"DELETE",message:`Deleted a file named <b>${s.data.title}</b>.`,performedOnName:"job"}),a.purple("File Deleted Successfully"),x()}catch(s){console.log(s)}},M=v((()=>i.value?m.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):m.value));return _((()=>{x()})),(e,a)=>{const t=te,p=c,m=R("Multiselect"),v=o,_=A,D=s,E=Ys,F=Ds;return f(),y("div",null,[U(u)?(f(),S(t,{key:0,rows:4})):(f(),y("div",ei,[g("div",li,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>$(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,U(i)]])])),_:1}),g("div",ai,[b(v,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(m,{modelValue:U(n),"onUpdate:modelValue":a[1]||(a[1]=e=>$(n)?n.value=e:null),options:h,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(_,{onClick:a[2]||(a[2]=e=>(d.value=l.docType,void(r.value=!r.value))),color:"primary",raised:""},{default:k((()=>[ti,si])),_:1})])]),g("div",ii,[0!=U(M).length||U(u)?C("",!0):(f(),S(D,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ni,oi])),_:1})),g("div",null,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(f(!0),y(I,null,P(U(M),(e=>(f(),y("div",{key:e.id,class:"column is-4"},[b(E,{document:e,onDeleteSelectedFile:w},null,8,["document"])])))),128))])),_:1})])]),U(r)?(f(),S(F,{key:0,openFileModal:U(r),object:l.objectId,type:U(d),"onClose:ModalHandler":a[3]||(a[3]=e=>r.value=!1),"onUpdate:OnSuccess":x},null,8,["openFileModal","object","type"])):C("",!0)]))])}}}),ci={class:"tabs-inner"},ui={class:"tabs is-boxed"},ri=[g("span",null,"Documents",-1)],pi=[g("span",null,"Photos",-1)],mi=[g("span",null,"Videos",-1)],vi=g("li",{class:"tab-naver"},null,-1),_i={key:0},hi={class:"tabs-inner"},fi={class:"tabs"},yi=[g("span",null,"Contracts",-1)],gi=[g("span",null,"Customer Estimates",-1)],bi=[g("span",null,"Job Scope",-1)],ki=[g("span",null,"Asbestos & Lead Report",-1)],xi=[g("span",null,"Permits",-1)],wi=[g("span",null,"Bids & Material",-1)],ji=[g("span",null,"Miscellaneous",-1)],Vi=[g("span",null,"Uploaded Files",-1)],Ci=[g("span",null,"Calculations",-1)],Ti=g("li",{class:"tab-naver"},null,-1),Ui={class:"tile-grid tile-grid-v2"},Si=g("img",{class:"light-image",src:z,alt:""},null,-1),Ii=g("img",{class:"dark-image",src:q,alt:""},null,-1),Pi={key:0},Ai={key:1},Mi={key:2},Di={key:3},Ei={key:4},Fi={key:5},Li={key:6},Ri={key:7},Ki={key:8},Oi={key:1},Ni={class:"tabs-inner"},Bi={class:"tabs"},$i=[g("span",null,"Site Visit Photos",-1)],Ji=[g("span",null,"Inspiration Photos",-1)],Hi=[g("span",null,"Trade Photos",-1)],zi=[g("span",null,"Design Approval Photos",-1)],qi=g("li",{class:"tab-naver"},null,-1),Gi={class:"tile-grid tile-grid-v2"},Wi=g("img",{class:"light-image",src:z,alt:""},null,-1),Zi=g("img",{class:"dark-image",src:q,alt:""},null,-1),Qi={key:0},Xi={key:1},Yi={key:2},en={key:3},ln={key:2},an={class:"tabs-inner"},tn={class:"tabs"},sn=[g("span",null,"Job videos",-1)],nn=[g("span",null,"Other videos",-1)],on=g("li",{class:"tab-naver"},null,-1),dn={class:"tile-grid tile-grid-v2"},cn=g("img",{class:"light-image",src:z,alt:""},null,-1),un=g("img",{class:"dark-image",src:q,alt:""},null,-1),rn={key:0},pn={key:1},mn=u({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo"],setup(e,{emit:l}){const a=e;W();const t=G(),i=p("");p(0);const n=p(""),o=p("contracts"),d=p(!1),c=p([]),u=p("documents"),r=p("site_visits"),m=p("job_videos"),h=v((()=>i.value?Se.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Se)),x=()=>{l("getProjectInfo",null)},w=async(e="contracts")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);c.value=l.data}catch(l){console.log(l)}};return _((()=>{w()})),(e,l)=>{const t=s,i=di,c=se,p=Al,v=Ds;return f(),y("div",null,[g("div",ci,[g("div",ui,[g("ul",null,[g("li",{class:O(["documents"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=B(K((e=>u.value="documents"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>u.value="documents")},ri,32)],2),g("li",{class:O(["photos"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=B(K((e=>u.value="photos"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>u.value="photos")},pi,32)],2),g("li",{class:O(["videos"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=B(K((e=>u.value="videos"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>u.value="videos")},mi,32)],2),vi])])]),"documents"==U(u)?(f(),y("div",_i,[g("div",hi,[g("div",fi,[g("ul",null,[g("li",{class:O(["contracts"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[6]||(l[6]=B(K((e=>w("contracts")),["prevent"]),["space"])),onClick:l[7]||(l[7]=e=>w("contracts"))},yi,32)],2),g("li",{class:O(["estimates"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[8]||(l[8]=B(K((e=>w("estimates")),["prevent"]),["space"])),onClick:l[9]||(l[9]=e=>w("estimates"))},gi,32)],2),g("li",{class:O(["job_scope"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[10]||(l[10]=B(K((e=>o.value="job_scope"),["prevent"]),["space"])),onClick:l[11]||(l[11]=e=>o.value="job_scope")},bi,32)],2),g("li",{class:O(["asbestos"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[12]||(l[12]=B(K((e=>o.value="asbestos"),["prevent"]),["space"])),onClick:l[13]||(l[13]=e=>o.value="asbestos")},ki,32)],2),g("li",{class:O(["permits"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[14]||(l[14]=B(K((e=>o.value="permits"),["prevent"]),["space"])),onClick:l[15]||(l[15]=e=>o.value="permits")},xi,32)],2),g("li",{class:O(["material"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[16]||(l[16]=B(K((e=>o.value="material"),["prevent"]),["space"])),onClick:l[17]||(l[17]=e=>o.value="material")},wi,32)],2),g("li",{class:O(["miscellaneous"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[18]||(l[18]=B(K((e=>o.value="miscellaneous"),["prevent"]),["space"])),onClick:l[19]||(l[19]=e=>o.value="miscellaneous")},ji,32)],2),g("li",{class:O(["files"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[20]||(l[20]=B(K((e=>w("files")),["prevent"]),["space"])),onClick:l[21]||(l[21]=e=>w("files"))},Vi,32)],2),g("li",{class:O(["calculations"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[22]||(l[22]=B(K((e=>w("calculations")),["prevent"]),["space"])),onClick:l[23]||(l[23]=e=>w("calculations"))},Ci,32)],2),Ti])])]),g("div",Ui,[b(t,{class:O([0!==U(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Si,Ii])),_:1},8,["class"]),"contracts"==U(o)?(f(),y("div",Pi,[b(i,{"doc-type":"contracts","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"estimates"==U(o)?(f(),y("div",Ai,[b(i,{"doc-type":"estimates","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"job_scope"==U(o)?(f(),y("div",Mi,[b(i,{"doc-type":"job_scope","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"asbestos"==U(o)?(f(),y("div",Di,[b(i,{"doc-type":"asbestos","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"permits"==U(o)?(f(),y("div",Ei,[b(i,{"doc-type":"permits","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"material"==U(o)?(f(),y("div",Fi,[b(i,{"doc-type":"material","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"miscellaneous"==U(o)?(f(),y("div",Li,[b(i,{"doc-type":"miscellaneous","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"files"==U(o)?(f(),y("div",Ri,[b(c,{projectId:a.leadId,files:a.uploaded_files,"onUpdate:onUploadFile":x},null,8,["projectId","files"])])):C("",!0),"calculations"==U(o)?(f(),y("div",Ki,[b(p)])):C("",!0)])])):C("",!0),"photos"==U(u)?(f(),y("div",Oi,[g("div",Ni,[g("div",Bi,[g("ul",null,[g("li",{class:O(["site_visits"===U(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[24]||(l[24]=B(K((e=>w("site_visits")),["prevent"]),["space"])),onClick:l[25]||(l[25]=e=>{w("site_visits"),r.value="site_visits"})},$i,32)],2),g("li",{class:O(["inspiration_photos"===U(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[26]||(l[26]=B(K((e=>w("inspiration_photos")),["prevent"]),["space"])),onClick:l[27]||(l[27]=e=>{w("inspiration_photos"),r.value="inspiration_photos"})},Ji,32)],2),g("li",{class:O(["trade_photos"===U(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[28]||(l[28]=B(K((e=>w("trade_photos")),["prevent"]),["space"])),onClick:l[29]||(l[29]=e=>{w("trade_photos"),r.value="trade_photos"})},Hi,32)],2),g("li",{class:O(["design_approval"===U(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[30]||(l[30]=B(K((e=>w("design_approval")),["prevent"]),["space"])),onClick:l[31]||(l[31]=e=>{w("design_approval"),r.value="design_approval"})},zi,32)],2),qi])])]),g("div",Gi,[b(t,{class:O([0!==U(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Wi,Zi])),_:1},8,["class"]),"site_visits"==U(r)?(f(),y("div",Qi,[b(i,{"doc-type":"site_visits","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"inspiration_photos"==U(r)?(f(),y("div",Xi,[b(i,{"doc-type":"inspiration_photos","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"trade_photos"==U(r)?(f(),y("div",Yi,[b(i,{"doc-type":"trade_photos","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"design_approval"==U(r)?(f(),y("div",en,[b(i,{"doc-type":"design_approval","object-id":a.leadId},null,8,["object-id"])])):C("",!0)])])):C("",!0),"videos"==U(u)?(f(),y("div",ln,[g("div",an,[g("div",tn,[g("ul",null,[g("li",{class:O(["job_videos"===U(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[32]||(l[32]=B(K((e=>w("job_videos")),["prevent"]),["space"])),onClick:l[33]||(l[33]=e=>{m.value="job_videos",w("job_videos")})},sn,32)],2),g("li",{class:O(["other_videos"===U(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[34]||(l[34]=B(K((e=>w("other_videos")),["prevent"]),["space"])),onClick:l[35]||(l[35]=e=>{m.value="other_videos",w("other_videos")})},nn,32)],2),on])])]),g("div",dn,[b(t,{class:O([0!==U(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[cn,un])),_:1},8,["class"]),"job_videos"==U(m)?(f(),y("div",rn,[b(i,{"doc-type":"job_videos","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"other_videos"==U(m)?(f(),y("div",pn,[b(i,{"doc-type":"other_videos","object-id":a.leadId},null,8,["object-id"])])):C("",!0)])])):C("",!0),U(d)?(f(),S(v,{key:3,openFileModal:U(d),object:a.leadId,type:U(n),"onClose:ModalHandler":l[36]||(l[36]=e=>d.value=!1),"onUpdate:OnSuccess":w},null,8,["openFileModal","object","type"])):C("",!0)])}}}),vn={class:"business-dashboard hr-dashboard"},_n={class:"columns is-multiline"},hn={class:"column is-12"},fn={class:"columns is-multiline"},yn={class:"column is-12"},gn={class:"block-header"},bn={class:"left"},kn={class:"current-user"},xn={class:"center"},wn=g("h4",{class:"block-heading"},"Address",-1),jn={class:"block-text"},Vn=g("br",null,null,-1),Cn=g("br",null,null,-1),Tn={class:"right"},Un=g("h4",{class:"block-heading"},"Managers",-1),Sn={class:"candidates"},In=g("button",null,[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),Pn={class:"column is-12"},An={class:"toolbar"},Mn={class:"tabs-inner"},Dn={class:"tabs is-boxed"},En=[g("span",null,"Job Management",-1)],Fn=[g("span",null,"Documents/Files",-1)],Ln=[g("span",null,"Proposals",-1)],Rn=[g("span",null,"Tasks",-1)],Kn=[g("span",null,"Activities",-1)],On=[g("span",null,"Job progress",-1)],Nn=[g("span",null,"Calculations",-1)],Bn=[g("span",null,"Finance",-1)],$n=[g("span",null,"Report",-1)],Jn=g("li",{class:"tab-naver"},null,-1),Hn={key:0,class:"column is-12"},zn={class:"columns is-multiline"},qn={class:"column is-8"},Gn={class:"columns is-multiline"},Wn={class:"column is-12"},Zn={class:"feed-settings"},Qn=g("h3",{class:"dark-inverted"},"Job feeds",-1),Xn={class:"buttons"},Yn={class:"column is-4"},eo={class:"side-text"},lo=g("h3",{class:"dark-inverted"},"Job Description",-1),ao=["innerHTML"],to=g("a",{class:"action-link",tabindex:"0"},"Read More",-1),so={class:"column is-7 is-offset-1"},io={class:"incoming"},no=g("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),oo=g("div",null,[g("span",{class:"item-name dark-inverted"},"Messages"),g("span",{class:"item-meta"},[g("span",null,"Inbox messages")])],-1),co=g("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),uo=g("div",null,[g("span",{class:"item-name dark-inverted"},"Tasks"),g("span",{class:"item-meta"},[g("span",null,"Pending tasks")])],-1),ro={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},po={key:4,class:"light-text"},mo={class:"column is-12"},vo={class:"recent-rookies"},_o=g("div",{class:"recent-rookies-header"},[g("h3",{class:"dark-inverted"},"Internal Users"),g("a",{class:"action-link",tabindex:"0"},"View All")],-1),ho={class:"columns is-multiline user-grid user-grid-v4"},fo={class:"column is-4"},yo={class:"grid-item"},go={class:"dark-inverted"},bo={class:"capitalized"},ko={class:"button-wrap has-text-centered"},xo={class:"column is-4"},wo={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},jo=g("div",{class:"widget-toolbar"},[g("div",{class:"left"},[g("a",{class:"action-icon"},[g("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),g("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),g("div",{class:"center"},[g("h3",null,"October 2020")]),g("div",{class:"right"},[g("a",{class:"action-icon"},[g("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),g("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),Vo=g("table",{class:"calendar"},[g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Mon"),g("th",{scope:"col"},"Tue"),g("th",{scope:"col"},"Wed"),g("th",{scope:"col"},"Thu"),g("th",{scope:"col"},"Fri"),g("th",{scope:"col"},"Sat"),g("th",{scope:"col"},"Sun")])]),g("tbody",null,[g("tr",null,[g("td",{class:"prev-month"},"29"),g("td",{class:"prev-month"},"30"),g("td",{class:"prev-month"},"31"),g("td",null,"1"),g("td",null,"2"),g("td",null,"3"),g("td",null,"4")]),g("tr",null,[g("td",null,"5"),g("td",null,"6"),g("td",null,"7"),g("td",null,"8"),g("td",null,"9"),g("td",null,"10"),g("td",null,"11")]),g("tr",null,[g("td",null,"12"),g("td",null,"13"),g("td",null,"14"),g("td",null,"15"),g("td",null,"16"),g("td",null,"17"),g("td",{class:"current-day"},"18")]),g("tr",null,[g("td",null,"19"),g("td",null,"20"),g("td",null,"21"),g("td",null,"22"),g("td",null,"23"),g("td",null,"24"),g("td",null,"25")]),g("tr",null,[g("td",null,"26"),g("td",null,"27"),g("td",null,"28"),g("td",null,"29"),g("td",null,"30"),g("td",null,"31"),g("td",{class:"next-month"},"1")])])],-1),Co={key:1,class:"column is-12"},To={key:2,class:"column is-12"},Uo={class:"tabs-inner"},So={class:"tabs is-boxed"},Io=[g("span",null,"Proposals",-1)],Po=[g("span",null,"Grouped Proposals",-1)],Ao={key:0},Mo={key:1},Do={key:3,class:"column is-12"},Eo={key:4,class:"column is-12"},Fo={key:5,class:"column is-12"},Lo={key:6,class:"column is-12"},Ro={key:7,class:"column is-12"},Ko={key:8,class:"column is-12"},Oo={key:9,class:"column is-12"},No={class:"tabs-inner"},Bo={class:"tabs is-boxed"},$o=[g("span",null,"Excel Sheets",-1)],Jo=[g("span",null,"Custom Calculations",-1)],Ho={key:0},zo={key:1},qo=u({__name:"JobDetails",setup(l){const t=H();N();const s=G();W();const i=p(!1),n=p(""),o=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const d=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),c=p("excel"),u=p("management"),r=p("childProposals"),m=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],v={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let V;const T=async()=>{try{i.value=!0;const e=await s.get(`/api/project/${t.params.id}/detail/`);d.value=e.data,e.data.latitude&&((e,l)=>{if(V&&V.remove(),V=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(V),e&&l){const a=[e,l];L.marker(a).addTo(V),V.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{i.value=!1}},M=p([]);return _((()=>{T()})),(l,i)=>{const p=ye,_=A,V=De,D=Me,E=a,F=Ae,L=Pe,R=Ie,N=mn,$=di,J=Ce,H=xs,z=Zt,q=ia,G=Jl,W=ie,Z=Al,Q=ml,X=e,Y=h("tooltip");return f(),y("div",vn,[g("div",_n,[g("div",hn,[g("div",fn,[g("div",yn,[g("div",gn,[g("div",bn,[g("div",kn,[b(p,{size:"large",picture:"lead"==U(d).current_state?"/icons/lead-shield-96.png":"/icons/job-sheild.png",squared:""},null,8,["picture"]),g("h3",null,w(U(d).title?U(d).title:"No Title"),1)])]),g("div",xn,[wn,g("p",jn,[x(w(U(d).address?U(d).address:"No Address Added")+" ",1),Vn,x(" "+w(U(d).city?U(d).city:"No City Added")+", "+w(U(d).state?U(d).state:"No State Added")+" ",1),Cn,x(" "+w(U(d).zip_code?U(d).zip_code:"No Zip Code Added"),1)])]),g("div",Tn,[Un,g("div",Sn,[(f(!0),y(I,null,P(U(d).managers_list,(e=>j((f(),S(p,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[Y,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),In]),b(_,{class:"mt-1",onClick:i[0]||(i[0]=e=>{return l=U(t).params.id,n.value=l,void(o.value=!0);var l}),bold:"",fullwidth:"","dark-outlined":""},{default:k((()=>[x(" Update "+w("lead"==U(d).current_state?"lead":"job"),1)])),_:1})])])]),g("div",Pn,[g("div",An,[g("div",Mn,[g("div",Dn,[g("ul",null,[g("li",{class:O(["management"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[1]||(i[1]=B(K((e=>u.value="management"),["prevent"]),["space"])),onClick:i[2]||(i[2]=e=>u.value="management")},En,32)],2),g("li",{class:O(["documents"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[3]||(i[3]=B(K((e=>u.value="documents"),["prevent"]),["space"])),onClick:i[4]||(i[4]=e=>u.value="documents")},Fn,32)],2),g("li",{class:O(["proposals"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[5]||(i[5]=B(K((e=>u.value="proposals"),["prevent"]),["space"])),onClick:i[6]||(i[6]=e=>u.value="proposals")},Ln,32)],2),g("li",{class:O(["tasks"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[7]||(i[7]=B(K((e=>u.value="tasks"),["prevent"]),["space"])),onClick:i[8]||(i[8]=e=>u.value="tasks")},Rn,32)],2),g("li",{class:O(["activities"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[9]||(i[9]=B(K((e=>u.value="activities"),["prevent"]),["space"])),onClick:i[10]||(i[10]=e=>u.value="activities")},Kn,32)],2),g("li",{class:O(["progress"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[11]||(i[11]=B(K((e=>u.value="progress"),["prevent"]),["space"])),onClick:i[12]||(i[12]=e=>u.value="progress")},On,32)],2),g("li",{class:O(["calculations"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[13]||(i[13]=B(K((e=>u.value="calculations"),["prevent"]),["space"])),onClick:i[14]||(i[14]=e=>u.value="calculations")},Nn,32)],2),g("li",{class:O(["finance"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[15]||(i[15]=B(K((e=>u.value="finance"),["prevent"]),["space"])),onClick:i[16]||(i[16]=e=>u.value="finance")},Bn,32)],2),g("li",{class:O(["report"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[17]||(i[17]=B(K((e=>u.value="report"),["prevent"]),["space"])),onClick:i[18]||(i[18]=e=>u.value="report")},$n,32)],2),Jn])])])])]),"management"===U(u)?(f(),y("div",Hn,[g("div",zn,[g("div",qn,[g("div",Gn,[g("div",Wn,[g("div",Zn,[Qn,g("div",Xn,[(f(!0),y(I,null,P(U(d).tags,((e,l)=>(f(),y("button",{key:l,class:"button is-selected is-light is-dark-outlined"},w(e),1)))),128))])])]),g("div",Yn,[g("div",eo,[lo,g("div",{innerHTML:U(d).notes},null,8,ao),to])]),g("div",so,[g("div",io,[b(E,{rounded:"",data:m,columns:v},{"body-cell":k((({row:e,column:l,value:a})=>["type"===l.key&&"messages"===e.type?(f(),y(I,{key:0},[b(V,{color:"green"},{default:k((()=>[no])),_:1}),oo],64)):"type"===l.key&&"tasks"===e.type?(f(),y(I,{key:1},[b(V,{color:"orange"},{default:k((()=>[co])),_:1}),uo],64)):"status"===l.key?(f(),y(I,{key:2},["new"===e.status?(f(),S(D,{key:0,rounded:"",color:"success",label:"New"})):(f(),S(D,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(f(),y("a",ro,"Open")):(f(),y("span",po,w(a),1))])),_:1})])]),g("div",mo,[g("div",vo,[_o,g("div",ho,[(f(!0),y(I,null,P(U(d).sales_people_info,(e=>(f(),y("div",fo,[g("div",yo,[b(F),b(p,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),g("h3",go,w(e.username??"N/A")+" "+w(e.last_name??""),1),g("p",bo,w(e.role),1),g("div",ko,[b(_,{color:"primary",raised:""},{default:k((()=>[x(" View Profile ")])),_:1})])])])))),256))])])])])]),g("div",xo,["management"===U(u)?(f(),y("div",wo)):C("",!0),b(L,{project:U(t).params.id},null,8,["project"]),b(R,{class:"picker-widget"},{header:k((()=>[jo])),body:k((()=>[Vo])),_:1})])])])):C("",!0),"documents"===U(u)?(f(),y("div",Co,[b(N,{leadId:U(t).params.id,uploaded_files:U(d).uploaded_files,getProjectInfo:T},null,8,["leadId","uploaded_files"])])):C("",!0),"proposals"===U(u)?(f(),y("div",To,[g("div",Uo,[g("div",So,[g("ul",null,[g("li",{class:O(["childProposals"===U(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[19]||(i[19]=B(K((e=>r.value="childProposals"),["prevent"]),["space"])),onClick:i[20]||(i[20]=e=>r.value="childProposals")},Io,32)],2),g("li",{class:O(["groupedProposals"===U(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[21]||(i[21]=B(K((e=>r.value="groupedProposals"),["prevent"]),["space"])),onClick:i[22]||(i[22]=e=>{r.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await s.get(`/api/attachment/by-object/${t.params.id}/?type=${e}`);M.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},Po,32)],2)])])]),"childProposals"==U(r)?(f(),y("div",Ao,[b(Ee,{"lead-id":U(t).params.id,onUpdateCompany:T},null,8,["lead-id"])])):C("",!0),"groupedProposals"==U(r)?(f(),y("div",Mo,[b($,{"doc-type":"proposal_formats","object-id":U(t).params.id},null,8,["object-id"])])):C("",!0)])):C("",!0),"activities"===U(u)?(f(),y("div",Do,[b(J,{jobId:U(t).params.id},null,8,["jobId"])])):C("",!0),"progress"===U(u)?(f(),y("div",Eo,[b(H,{object:U(t).params.id,type:"job"},null,8,["object"])])):C("",!0),"finance"===U(u)?(f(),y("div",Fo,[b(z)])):C("",!0),"activityLogs"===U(u)?(f(),y("div",Lo,[b(q,{object_id:U(t).params.id||U(d).id,object_type:"lead"},null,8,["object_id"])])):C("",!0),"report"===U(u)?(f(),y("div",Ro,[b(G)])):C("",!0),"tasks"===U(u)?(f(),y("div",Ko,[b(W,{projectID:U(t).params.id},null,8,["projectID"])])):C("",!0),"calculations"===U(u)?(f(),y("div",Oo,[g("div",No,[g("div",Bo,[g("ul",null,[g("li",{class:O(["excel"===U(c)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[23]||(i[23]=B(K((e=>c.value="excel"),["prevent"]),["space"])),onClick:i[24]||(i[24]=e=>c.value="excel")},$o,32)],2),g("li",{class:O(["custom"===U(c)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[25]||(i[25]=B(K((e=>c.value="custom"),["prevent"]),["space"])),onClick:i[26]||(i[26]=e=>c.value="custom")},Jo,32)],2)])])]),"excel"==U(c)?(f(),y("div",Ho,[b(Z)])):C("",!0),"custom"==U(c)?(f(),y("div",zo,[b(Q,{objectId:U(t).params.id},null,8,["objectId"])])):C("",!0)])):C("",!0)])])]),U(o)?(f(),S(X,{key:0,addUpdateLeadModal:U(o),leadId:U(n),"onUpdate:modalHandler":i[27]||(i[27]=e=>o.value=!1),"onUpdate:OnSuccess":T},null,8,["addUpdateLeadModal","leadId"])):C("",!0)])}}});export{qo as _};
