import{r as e,e as l,o as a,B as t,C as o,D as i,U as s,V as n,T as u,l as r,E as d,P as c,Q as p,R as m,s as _,b as v,_ as b,N as f,F as y,K as h,W as g,J as k,M as C,I as V,a4 as T,O as P,Z as w,j as U,X as x,A as M,H as I,G as N}from"./index-3c9acd8a.js";import{_ as A}from"./VModal.vue_vue_type_style_index_0_lang-a1ce0dc3.js";import{_ as D}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-a3692d3b.js";import{u as O}from"./useNotyf-f196b4fe.js";import{_ as S}from"./VInput.vue_vue_type_script_setup_true_lang-7b458631.js";import{_ as j}from"./VTextarea.vue_vue_type_script_setup_true_lang-3e893bc7.js";import{_ as q}from"./VCheckbox.vue_vue_type_style_index_0_lang-66798efb.js";import{_ as E}from"./VField.vue_vue_type_script_setup_true_lang-769495f6.js";import{_ as H}from"./VControl-812f66fd.js";import{_ as L,a as B}from"./VOption.vue_vue_type_style_index_0_lang-8ded9393.js";import{u as R}from"./useAPI-92f64e01.js";import{a as F}from"./useSupportElement-bf3d0144.js";import{u as G}from"./userSession-fda79979.js";import{_ as Q}from"./VAvatar.vue_vue_type_style_index_0_lang-6c80847a.js";import{_ as Z}from"./VRadio.vue_vue_type_style_index_0_lang-08b5acc4.js";import{_ as W}from"./VCollapse.vue_vue_type_style_index_0_lang-049ec7ce.js";const z=e([{id:"12347",title:"Electrical Wiring",cost_code:"040100",cost_type:"Material",unit_cost:20,quantity:500,unit:"meters",total_cost:1e4,price:750,markup:15,markup_type:"percentage",markup_value:1500,markup_amount:3e3,unit_price:50,tax_rate:7.5,client_price:12000.9,total_price:9e3,builder_cost:825,group_price:78987,grand_total:12325,total_markup:9874567,mark_as:"catalogue_item",description:"Electrical wiring and related materials.",internal_notes:"Include wiring for backup generator.",created_by:"user125",created_date:"2024-12-22T12:00:00Z",updated_by:"user125",updated_date:"2024-12-22T13:00:00Z",approved_by:"manager458",approval_date:"2024-12-22T18:00:00Z",status:"pending",category:"Electrical",tags:["wiring","electrical","materials"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!1},front_end_elements:{highlighted:!1,background_color:"#f0f0f0",font_color:"#000000",display_order:3,editable:!0}},{id:"56789",title:"Plumbing Fixtures",cost_code:"050200",cost_type:"Labor",unit_cost:45,quantity:200,unit:"hours",total_cost:9e3,price:1500,markup:20,markup_type:"percentage",markup_value:1800,markup_amount:3600,unit_price:75,tax_rate:8,client_price:12000.9,total_price:10800,builder_cost:950,group_price:67890,grand_total:13200,total_markup:1234567,mark_as:"custom_item",description:"Installation of plumbing fixtures.",internal_notes:"Check water pressure before installation.",created_by:"user456",created_date:"2024-11-30T09:00:00Z",updated_by:"user456",updated_date:"2024-12-01T10:00:00Z",approved_by:"manager123",approval_date:"2024-12-01T15:00:00Z",status:"approved",category:"Plumbing",tags:["plumbing","fixtures","labor"],attachments:[],visibility:{admin:!0,internal_only:!0,shared_with_client:!1},front_end_elements:{highlighted:!0,background_color:"#ffffff",font_color:"#333333",display_order:1,editable:!1}},{id:"90123",title:"HVAC Installation",cost_code:"070300",cost_type:"Service",unit_cost:75,quantity:50,unit:"units",total_cost:3750,client_price:12000.9,price:850,markup:10,markup_type:"fixed",markup_value:850,markup_amount:1700,unit_price:95,tax_rate:6.5,total_price:4200,builder_cost:1025,group_price:56789,grand_total:15500,total_markup:654321,mark_as:"service_item",description:"HVAC system installation and setup.",internal_notes:"Ensure proper duct sealing.",created_by:"user789",created_date:"2024-12-10T14:00:00Z",updated_by:"user789",updated_date:"2024-12-15T11:30:00Z",approved_by:"manager567",approval_date:"2024-12-16T09:00:00Z",status:"completed",category:"HVAC",tags:["HVAC","installation","service"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!0},front_end_elements:{highlighted:!0,background_color:"#e6e6e6",font_color:"#111111",display_order:2,editable:!0}},{id:"34567",title:"Roofing Materials",cost_code:"080500",cost_type:"Material",unit_cost:30,quantity:1e3,unit:"sheets",total_cost:3e4,client_price:12000.9,price:1200,markup:25,markup_type:"percentage",markup_value:3e3,markup_amount:7500,unit_price:90,tax_rate:9,total_price:32700,builder_cost:1125,group_price:43210,grand_total:37500,total_markup:98765,mark_as:"material_item",description:"High-quality roofing materials.",internal_notes:"Ensure weather-resistant properties.",created_by:"user321",created_date:"2024-12-05T08:00:00Z",updated_by:"user321",updated_date:"2024-12-06T12:00:00Z",approved_by:"manager789",approval_date:"2024-12-07T14:00:00Z",status:"pending",category:"Roofing",tags:["roofing","materials","construction"],attachments:[],visibility:{admin:!1,internal_only:!0,shared_with_client:!0},front_end_elements:{highlighted:!1,background_color:"#dddddd",font_color:"#444444",display_order:4,editable:!1}}]),J=e({ItemNumber:"No#",Title:"Title",Unit:"Cost Code",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",UnitPrice:"Unit Price",Price:"Price",TotalPrice:"Total Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",ClientPrice:"Client Price",Profit:"Profit",Notes:"Internal Notes"}),K=e({ItemNumber:"id",Title:"title",Unit:"cost_code",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",BuilderCost:"builder_cost",Markup:"markup",MarkupAmount:"markup_amount",UnitPrice:"unit_price",Price:"price",TotalPrice:"total_price",GroupPrice:"group_price",TotalCost:"total_cost",TotalMarkup:"total_markup",ClientPrice:"client_price",Profit:"profit",Notes:"internal_notes"}),$={class:"datatable-wrapper mt-0"},X={class:"table-container"},Y={class:"table datatable-table is-fullwidth",id:"external-events"},ee=(e=>(c("data-v-ed40bf7b"),e=e(),p(),e))((()=>i("th",null,"Actions",-1))),le=["data-event","onDragstart","onDrop"],ae=l({__name:"CostItemsTable",props:{columnsToShow:{}},setup(l){const c=l;O(),e(42),e(["ItemNumber","Description","Quantity","Unit","UnitCost","ClientPrice"]);const p=e({ItemNumber:"No#",Title:"Title",Unit:"Cost Code",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",UnitPrice:"Unit Price",Price:"Price",TotalPrice:"Total Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",ClientPrice:"Client Price",Profit:"Profit",Notes:"Internal Notes"}),m=e({ItemNumber:"id",Title:"title",Unit:"cost_code",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",BuilderCost:"builder_cost",Markup:"markup",MarkupAmount:"markup_amount",UnitPrice:"unit_price",Price:"price",TotalPrice:"total_price",GroupPrice:"group_price",TotalCost:"total_cost",TotalMarkup:"total_markup",ClientPrice:"client_price",Profit:"profit",Notes:"internal_notes"}),_=e(null),v=e=>{e.preventDefault()};return a((()=>{})),(e,l)=>{const a=D;return t(),o("div",$,[i("div",X,[i("table",Y,[i("thead",null,[(t(!0),o(s,null,n(c.columnsToShow,((e,l)=>(t(),o("th",{key:l},u(r(p)[e]),1)))),128)),ee]),i("tbody",null,[(t(!0),o(s,null,n(r(z),((e,l)=>(t(),o("tr",{class:"events",key:e.id,"data-event":JSON.stringify(e),draggable:"true",onDragstart:e=>(e=>{_.value=e})(l),onDrop:()=>(e=>{if(null!==_.value&&_.value!==e){const l=z.value[_.value];z.value.splice(_.value,1),z.value.splice(e,0,l)}_.value=null})(l),onDragover:v},[(t(!0),o(s,null,n(c.columnsToShow,((l,a)=>(t(),o("td",{key:a},u(e[r(m)[l]]),1)))),128)),i("td",null,[d(a)])],40,le)))),128))])])])])}}}),te=m(ae,[["__scopeId","data-v-ed40bf7b"]]),oe={class:"modal-form columns is-multiline"},ie={class:"columns is-multiline"},se={class:"field column is-12 mb-0"},ne=i("label",null,"Title: ",-1),ue={class:"control"},re={class:"field column is-6"},de=i("label",{for:""},"Cost Type",-1),ce={class:"field column is-6"},pe=i("label",{for:""},"Catalog",-1),me={class:"field column is-6"},_e=i("label",{for:""},"Mark As",-1),ve={class:"field column is-6"},be=i("label",{for:""},"Cost Code *",-1),fe={class:"field column is-6"},ye=i("label",{for:""},"Group",-1),he={class:"field column is-12 mb-0"},ge=i("label",{for:"",class:"label"},"Description",-1),ke={class:"field column is-12 mb-0"},Ce=i("label",{for:"",class:"label"},"Internal Notes",-1),Ve={class:"columns is-multiline"},Te={class:"field column is-6"},Pe=i("label",null,"Unit Cost",-1),we={class:"field column is-6"},Ue=i("label",null,"Quantity",-1),xe={class:"field column is-6"},Me=i("label",null,"Unit",-1),Ie={class:"field column is-6"},Ne=i("label",null,"Builder Cost",-1),Ae={class:"field column is-6"},De=i("label",null,"Markup",-1),Oe={class:"field column is-6"},Se=i("label",null,"Client Price",-1),je={class:"field column is-6"},qe=i("label",null,"Margin",-1),Ee=l({__name:"EstimateCostItemModal",props:{costItemModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:c}){const p=l,m=_();G();const w=O(),U=R(),x=e(!1);e({}),e(!1),e([]),e([]),e([]);const M=e({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:"",includeInCatalog:!1,markAs:"",group:""}),I=e([{value:"labour",label:"Labour"},{value:"material",label:"Material"},{value:"equipment",label:"Equipment"},{value:"subcontractor",label:"Subcontractor"},{value:"other",label:"Others"}]),N=e([{value:"bid",label:"Bid"},{value:"allowance",label:"Allowance"}]);e([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const D=async()=>{try{x.value=!0;const e=F(M.value,["profileImageURL"]);await U.post("/v3/api/worker/",e);Q(),w.dismissAll(),w.success("New worker added, New Worker")}catch(e){w.error(` ${e}, New Worker`)}finally{x.value=!1}},Q=()=>{c("update:modalHandler",!1)},Z=v((()=>b((()=>import("./ckeditor-a3d148eb.js").then((e=>e.c))),["assets/ckeditor-a3d148eb.js","assets/index-3c9acd8a.js","assets/index-51c76962.css","assets/vue.runtime.esm-bundler-c9dc3540.js"]).then((e=>e.default.component)))),W={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return a((async()=>{m.value=await b((()=>import("./ckeditor-dc66b1b5.js").then((e=>e.c))),["assets/ckeditor-dc66b1b5.js","assets/index-3c9acd8a.js","assets/index-51c76962.css"]).then((e=>e.default))})),(e,l)=>{const a=L,c=B,_=H,v=E,b=q,w=j,U=T,O=S,R=P,F=A;return t(),f(F,{is:"form",open:p.costItemModal,title:"Cost Item ",size:"xl",actions:"right",onSubmit:V(D,["prevent"]),onClose:Q},{content:y((()=>[i("div",oe,[d(U,{class:"column is-12"},{default:y((()=>[i("div",ie,[i("div",se,[ne,i("div",ue,[h(i("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>r(M).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[g,r(M).title]])])]),i("div",re,[de,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(c,{modelValue:r(M).costType,"onUpdate:modelValue":l[1]||(l[1]=e=>r(M).costType=e)},{default:y((()=>[(t(!0),o(s,null,n(r(I),((e,l)=>(t(),f(a,{value:e.value},{default:y((()=>[k(u(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),i("div",ce,[pe,d(v,{class:"is-flex"},{default:y((()=>[d(_,{raw:"",subcontrol:""},{default:y((()=>[d(b,{modelValue:r(M).includeInCatalog,"onUpdate:modelValue":l[2]||(l[2]=e=>r(M).includeInCatalog=e),label:"Include item in Catalog"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",me,[_e,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(c,{modelValue:r(M).markAs,"onUpdate:modelValue":l[3]||(l[3]=e=>r(M).markAs=e)},{default:y((()=>[(t(!0),o(s,null,n(r(N),((e,l)=>(t(),f(a,{value:e.value},{default:y((()=>[k(u(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),i("div",ve,[be,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(c,{modelValue:r(M).costType,"onUpdate:modelValue":l[4]||(l[4]=e=>r(M).costType=e)},{default:y((()=>[(t(!0),o(s,null,n(r(I),((e,l)=>(t(),f(a,{value:e.value},{default:y((()=>[k(u(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),i("div",fe,[ye,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(c,{modelValue:r(M).costType,"onUpdate:modelValue":l[5]||(l[5]=e=>r(M).costType=e)},{default:y((()=>[(t(!0),o(s,null,n(r(I),((e,l)=>(t(),f(a,{value:e.value},{default:y((()=>[k(u(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),i("div",he,[ge,r(m)?(t(),f(r(Z),{key:0,modelValue:r(M).description,"onUpdate:modelValue":l[6]||(l[6]=e=>r(M).description=e),editor:r(m),config:W},null,8,["modelValue","editor"])):C("",!0)]),i("div",ke,[Ce,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(w,{modelValue:r(M).internalNotes,"onUpdate:modelValue":l[7]||(l[7]=e=>r(M).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1}),d(U,{class:"column is-12 mt-3"},{default:y((()=>[i("div",Ve,[i("div",Te,[Pe,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).unitCost,"onUpdate:modelValue":l[8]||(l[8]=e=>r(M).unitCost=e),type:"number",name:"unitCost",placeholder:"Unit cost"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",we,[Ue,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).unitCost,"onUpdate:modelValue":l[9]||(l[9]=e=>r(M).unitCost=e),type:"number",name:"quantity",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",xe,[Me,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).unit,"onUpdate:modelValue":l[10]||(l[10]=e=>r(M).unit=e),type:"number",name:"unit",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",Ie,[Ne,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).unit,"onUpdate:modelValue":l[11]||(l[11]=e=>r(M).unit=e),type:"number",name:"builderCost",placeholder:"Builder cost"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",Ae,[De,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).markup,"onUpdate:modelValue":l[12]||(l[12]=e=>r(M).markup=e),type:"number",name:"markup",placeholder:"Markup"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",Oe,[Se,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).clientPrice,"onUpdate:modelValue":l[13]||(l[13]=e=>r(M).clientPrice=e),type:"number",name:"markup",placeholder:"Client Price"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",je,[qe,d(v,null,{default:y((()=>[d(_,null,{default:y((()=>[d(O,{modelValue:r(M).margin,"onUpdate:modelValue":l[14]||(l[14]=e=>r(M).margin=e),type:"number",name:"markup",placeholder:"Margin"},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1})])])),action:y((()=>[d(R,{loading:r(x),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:y((()=>[k("Add Item")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),He={class:"columns is-multiline"},Le=i("div",{class:"column is-9"},[i("h1",{class:"title is-5 m-1 p-0"},"Preview Lead Proposal"),i("p",{class:"m-1"}," Below is a preview of the proposal that will be sent as a link to the email addresses on this client contact. The proposal can be accessed through the link while it is Released. ")],-1),Be={class:"column is-4"},Re=i("h1",{class:"subtitle is-5 is-bold"},"Layout Options",-1),Fe=i("h1",{class:"subtitle is-6 mb-0"},"Header",-1),Ge=i("h1",{class:"subtitle is-6 mb-0"},"Body",-1),Qe={class:"column is-4"},Ze=i("h1",{class:"subtitle is-5 is-bold"},"Customer Information",-1),We={class:"column is-4"},ze=i("h1",{class:"subtitle is-5 is-bold"},"Company Information",-1),Je={class:"column is-12"},Ke={class:"invoice-wrapper"},$e=x('<div class="invoice-header"><div class="left"><h3>Proposal-ID PD-456-14</h3></div><div class="right"><div class="controls"><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:printer"></i></a><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:download-cloud"></i></a><a class="action"><i aria-hidden="true" class="iconify" data-icon="feather:mail"></i></a></div></div></div>',1),Xe={class:"invoice-body"},Ye={class:"invoice-card"},el={class:"invoice-section is-flex is-bordered"},ll=i("div",{class:"meta"},null,-1),al=i("div",{class:"end"},[i("span",null,"PO Box 242"),i("span",null,"Evergreen, CO 80437-0242"),i("span",null,"Phone: 720 272-9061"),i("span",null,"Premium Trades for Premier Builders")],-1),tl=i("div",{class:"invoice-section is-flex is-bordered"},[i("div",{class:"meta"},[i("h3",null,"Client Name"),i("span",null,"Client Phone"),i("span",null,"25724 Independence Trail Evergreen, CO 80439")]),i("div",{class:"end is-left"},[i("h3",null,"Friday Jan 17, 2025"),i("p",null," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quod equidem non reprehendo. ")])],-1),ol={class:"invoice-section"},il={class:"responsive-table"},sl={class:"invoice-section is-flex mt-0 pt-0"},nl={class:"end is-left"},ul={class:"text-right"},rl=i("p",null,"Mentioned price are final",-1),dl=l({__name:"ProposalPreview",props:{columnsToShow:{}},setup(l){const a=l,c=e([{name:"Website Redesign",unit:"hrs",quantity:54,rate:24},{name:"Logo Design",unit:"hrs",quantity:12,rate:24},{name:"Custom Illustrations",unit:"hrs",quantity:7,rate:32}]);w((()=>{const e=c.value.reduce(((e,l)=>e+l.quantity*l.rate),0),l=.1*e;return[{label:"Subtotal",value:e},{label:"Taxes",value:l},{label:"Total",value:e+l}]}));const p=e(""),m=e(!0),_=e(!0),v=e(!0),b=e(!0),f=w((()=>z.value.reduce(((e,l)=>e+l.price*l.quantity),0)));return(e,l)=>{const c=Z,h=H,g=E,k=q,C=Q;return t(),o("div",He,[Le,i("div",Be,[Re,Fe,d(g,null,{default:y((()=>[d(h,{class:"flex-columns"},{default:y((()=>[d(c,{modelValue:r(p),"onUpdate:modelValue":l[0]||(l[0]=e=>U(p)?p.value=e:null),value:"center",label:"Centralized",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),d(c,{modelValue:r(p),"onUpdate:modelValue":l[1]||(l[1]=e=>U(p)?p.value=e:null),value:"split",label:"Space between",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"])])),_:1})])),_:1}),Ge,d(g,null,{default:y((()=>[d(h,{class:"flex-columns"},{default:y((()=>[d(c,{modelValue:r(m),"onUpdate:modelValue":l[2]||(l[2]=e=>U(m)?m.value=e:null),value:"column",label:"Columns",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),d(c,{modelValue:r(m),"onUpdate:modelValue":l[3]||(l[3]=e=>U(m)?m.value=e:null),value:"multiline",label:"Multiline",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"]),d(c,{modelValue:r(m),"onUpdate:modelValue":l[4]||(l[4]=e=>U(m)?m.value=e:null),value:"none",label:"None",name:"outlined_radio",color:"info",class:"m-0 p-2"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",Qe,[Ze,d(g,{class:"flex-columns"},{default:y((()=>[d(h,{raw:"",subcontrol:""},{default:y((()=>[d(k,{class:"mt-2 p-0",modelValue:r(_),"onUpdate:modelValue":l[5]||(l[5]=e=>U(_)?_.value=e:null),label:"Show Client Contact and Phone",color:"info"},null,8,["modelValue"])])),_:1}),d(h,{raw:"",subcontrol:""},{default:y((()=>[d(k,{class:"mt-4 p-0",modelValue:r(v),"onUpdate:modelValue":l[6]||(l[6]=e=>U(v)?v.value=e:null),label:"Show Address"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",We,[ze,d(g,{class:"flex-columns"},{default:y((()=>[d(h,{raw:"",subcontrol:""},{default:y((()=>[d(k,{class:"mt-2 p-0",modelValue:r(b),"onUpdate:modelValue":l[7]||(l[7]=e=>U(b)?b.value=e:null),label:"Show Company One Liner"},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",Je,[i("div",Ke,[$e,i("div",Xe,[i("div",Ye,[i("div",el,[d(C,{size:"xl",picture:"/logos/IbexFavicon.png"}),ll,al]),tl,i("div",ol,[i("table",il,[i("thead",null,[(t(!0),o(s,null,n(a.columnsToShow,((e,l)=>(t(),o("th",{key:l},u(r(J)[e]),1)))),128))]),i("tbody",null,[(t(!0),o(s,null,n(r(z),((e,l)=>(t(),o("tr",{key:e.id},[(t(!0),o(s,null,n(a.columnsToShow,((l,a)=>(t(),o("td",{key:a},u(e[r(K)[l]]),1)))),128))])))),128))])])]),i("div",sl,[i("div",nl,[i("h3",ul,"Total Price: $"+u(r(f)),1),rl])])])])])])])}}}),cl={class:"columns is-multiline"},pl={class:"column is-12 is-flex space-between"},ml=i("div",null,[i("h1",{class:"title is-4"},"Proposal Worksheet")],-1),_l={class:"tabs-wrapper column is-12 m-0"},vl={class:"tabs-inner mt-4"},bl={class:"tabs is-boxed"},fl=[i("span",null,"Worksheet",-1)],yl=[i("span",null,"Format",-1)],hl=[i("span",null,"Preview",-1)],gl={key:0,class:"column is-12"},kl={key:1,class:"column is-12"},Cl={class:"columns is-multiline"},Vl=i("div",{class:"column is-12",style:{"text-align":"center"}},[i("h1",{class:"title is-4"},"Connect your clients to their projects"),i("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),Tl={class:"column is-12"},Pl={key:2,class:"column is-12"},wl=l({__name:"WorksheetItems",props:{leadProposalModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:s}){const n=_();G(),O(),R(),e(!1),e({}),e(!1);const u=e(["ItemNumber","Description","Quantity","Unit","UnitCost","ClientPrice"]),c=[{value:"ItemNumber",label:"Item Number"},{value:"Title",label:"Title"},{value:"Unit",label:"Unit"},{value:"Description",label:"Description"},{value:"CostType",label:"Cost Type"},{value:"Quantity",label:"Quantity"},{value:"UnitCost",label:"Unit Cost"},{value:"BuilderCost",label:"Builder Cost"},{value:"Markup",label:"Markup"},{value:"MarkupAmount",label:"Markup Amount"},{value:"UnitPrice",label:"Unit Price"},{value:"Price",label:"Price"},{value:"TotalPrice",label:"Total Price"},{value:"GroupPrice",label:"Group Price"},{value:"TotalCost",label:"Total Cost"},{value:"TotalMarkup",label:"Total Markup"},{value:"ClientPrice",label:"Client Price"},{value:"Profit",label:"Profit"},{value:"Notes",label:"Notes"}];e({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""}),e({title:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[]}),e([{value:"all",label:"All"},{value:"contact",label:"Contact Form"},{value:"google",label:"Google"},{value:"referral",label:"Referral"}]),e([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const p=e("worksheet");v((()=>b((()=>import("./ckeditor-a3d148eb.js").then((e=>e.c))),["assets/ckeditor-a3d148eb.js","assets/index-3c9acd8a.js","assets/index-51c76962.css","assets/vue.runtime.esm-bundler-c9dc3540.js"]).then((e=>e.default.component))));const m=e(!1);return a((async()=>{n.value=await b((()=>import("./ckeditor-dc66b1b5.js").then((e=>e.c))),["assets/ckeditor-dc66b1b5.js","assets/index-3c9acd8a.js","assets/index-51c76962.css"]).then((e=>e.default))})),(e,l)=>{const a=P,s=te,n=M("Multiselect"),_=H,v=E,b=T,h=dl,g=Ee;return t(),o("div",null,[i("div",cl,[i("div",pl,[ml,i("div",null,[d(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"info",onClick:l[0]||(l[0]=e=>m.value=!r(m))},{default:y((()=>[k("Import")])),_:1}),d(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"primary",onClick:l[1]||(l[1]=e=>m.value=!r(m))},{default:y((()=>[k("Add From")])),_:1}),d(a,{size:"small",light:"",outlined:"",color:"warning",onClick:l[2]||(l[2]=e=>m.value=!r(m))},{default:y((()=>[k("Add Item")])),_:1})])]),i("div",_l,[i("div",vl,[i("div",bl,[i("ul",null,[i("li",{class:I(["worksheet"===r(p)?"is-active":"not-active"])},[i("a",{tabindex:"0",role:"button",onKeydown:l[3]||(l[3]=N(V((e=>p.value="worksheet"),["prevent"]),["space"])),onClick:l[4]||(l[4]=e=>p.value="worksheet")},fl,32)],2),i("li",{class:I(["format"===r(p)?"is-active":"not-active"])},[i("a",{tabindex:"0",role:"button",onKeydown:l[5]||(l[5]=N(V((e=>p.value="format"),["prevent"]),["space"])),onClick:l[6]||(l[6]=e=>p.value="format")},yl,32)],2),i("li",{class:I(["preview"===r(p)?"is-active":"not-active"])},[i("a",{tabindex:"0",role:"button",onKeydown:l[7]||(l[7]=N(V((e=>p.value="preview"),["prevent"]),["space"])),onClick:l[8]||(l[8]=e=>p.value="preview")},hl,32)],2)])])])]),"worksheet"===r(p)?(t(),o("div",gl,[d(s,{columnsToShow:r(u)},null,8,["columnsToShow"])])):C("",!0),"format"===r(p)?(t(),o("div",kl,[i("div",Cl,[d(v,{label:"Choose what to show to lead",class:"column is-12"},{default:y((({id:e})=>[d(_,null,{default:y((()=>[d(n,{modelValue:r(u),"onUpdate:modelValue":l[9]||(l[9]=e=>U(u)?u.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:c,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1})]),d(b,{class:"columns is-multiline m-0"},{default:y((()=>[Vl,i("div",Tl,[d(s,{columnsToShow:r(u)},null,8,["columnsToShow"])])])),_:1})])):C("",!0),"preview"===r(p)?(t(),o("div",Pl,[d(h,{columnsToShow:r(u)},null,8,["columnsToShow"])])):C("",!0)]),r(m)?(t(),f(g,{key:0,costItemModal:r(m),"onUpdate:modalHandler":l[10]||(l[10]=e=>m.value=!1)},null,8,["costItemModal"])):C("",!0)])}}}),Ul={class:"modal-form columns is-multiline"},xl={class:"field column is-6 mb-0"},Ml=i("label",null,"Title: *",-1),Il={class:"control"},Nl={class:"column is-6"},Al={class:"body-inner-content"},Dl={class:"field columns is-multiline mb-0"},Ol={class:"field column is-12 mb-0"},Sl=i("label",{for:"",class:"label"},"Internal Notes",-1),jl={class:"field column is-12 mb-0"},ql=i("label",{for:"",class:"label"},"Introductory Text",-1),El={class:"field column is-12 mb-0"},Hl=i("label",{for:"",class:"label"},"Closing Text",-1),Ll={key:0,class:"column is-12"},Bl={key:1,class:"column is-12"},Rl=i("div",{class:"column is-12",style:{"text-align":"center"}},[i("h1",{class:"title is-4"},"Connect your clients to their projects"),i("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),Fl={key:2},Gl=[i("p",null,"preview",-1)],Ql=l({__name:"LeadProposalModal",props:{leadProposalModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:s}){const n=l,u=_();G();const c=O(),p=R(),m=e(!1);e({}),e(!1),e([]),e([]),e([]);const w=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];e({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const U=e({title:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});e([{value:"all",label:"All"},{value:"contact",label:"Contact Form"},{value:"google",label:"Google"},{value:"referral",label:"Referral"}]),e([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const x=async()=>{try{m.value=!0;const e=F(U.value,["profileImageURL"]);await p.post("/v3/api/worker/",e);M(),c.dismissAll(),c.success("New worker added, New Worker")}catch(e){c.error(` ${e}, New Worker`)}finally{m.value=!1}},M=()=>{s("update:modalHandler",!1)},I=e("worksheet"),N=v((()=>b((()=>import("./ckeditor-a3d148eb.js").then((e=>e.c))),["assets/ckeditor-a3d148eb.js","assets/index-3c9acd8a.js","assets/index-51c76962.css","assets/vue.runtime.esm-bundler-c9dc3540.js"]).then((e=>e.default.component)))),D={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return a((async()=>{u.value=await b((()=>import("./ckeditor-dc66b1b5.js").then((e=>e.c))),["assets/ckeditor-dc66b1b5.js","assets/index-3c9acd8a.js","assets/index-51c76962.css"]).then((e=>e.default))})),(e,l)=>{const a=Z,s=H,c=E,p=j,_=W,v=wl,b=te,O=T,S=P,q=A;return t(),f(q,{is:"form",open:n.leadProposalModal,title:"Lead Proposal",size:"xl",actions:"right",onSubmit:V(x,["prevent"]),onClose:M},{content:y((()=>[i("div",Ul,[i("div",xl,[Ml,i("div",Il,[h(i("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>r(U).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[g,r(U).title]])])]),i("div",Nl,[d(c,{class:"m-0 p-0",label:"Type"},{default:y((()=>[d(s,null,{default:y((()=>[d(a,{modelValue:r(U).type,"onUpdate:modelValue":l[1]||(l[1]=e=>r(U).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),d(a,{modelValue:r(U).type,"onUpdate:modelValue":l[2]||(l[2]=e=>r(U).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),d(a,{modelValue:r(U).type,"onUpdate:modelValue":l[3]||(l[3]=e=>r(U).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),d(_,{items:w,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":y((e=>[i("div",Al,[i("div",Dl,[i("div",Ol,[Sl,d(c,null,{default:y((()=>[d(s,null,{default:y((()=>[d(p,{modelValue:r(U).internalNotes,"onUpdate:modelValue":l[4]||(l[4]=e=>r(U).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),i("div",jl,[ql,r(u)?(t(),f(r(N),{key:0,modelValue:r(U).introductoryText,"onUpdate:modelValue":l[5]||(l[5]=e=>r(U).introductoryText=e),editor:r(u),config:D},null,8,["modelValue","editor"])):C("",!0)]),i("div",El,[Hl,r(u)?(t(),f(r(N),{key:0,modelValue:r(U).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>r(U).introductoryText=e),editor:r(u),config:D},null,8,["modelValue","editor"])):C("",!0)])])])])),_:1}),"worksheet"===r(I)?(t(),o("div",Ll,[d(v)])):C("",!0),"format"===r(I)?(t(),o("div",Bl,[d(O,{class:"columns is-multiline m-0"},{default:y((()=>[Rl,d(b)])),_:1})])):C("",!0),"preview"===r(I)?(t(),o("div",Fl,Gl)):C("",!0)])])),action:y((()=>[d(S,{loading:r(m),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:y((()=>[k("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{Ql as _};
