import{_ as e}from"./ProposalViewModal.vue_vue_type_style_index_0_lang-e648600d.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-3558ed0e.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-2d874af3.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-90e261b6.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-65a810a7.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-1caf3097.js";import{_ as o}from"./VTag.vue_vue_type_style_index_0_lang-e7ba4eb5.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-9bfebca7.js";import{f as d,x as u,r as c,$ as p,o as _,av as m,C as v,D as f,m as y,O as g,E as b,F as h,G as j,L as k,X as x,k as w,K as C,N as A,V,W as S,aS as I,P,al as O,U as L,J as $,A as U}from"./index-d4aaa0a5.js";import{_ as M}from"./VDropdown.vue_vue_type_style_index_0_lang-2e67e981.js";import{_ as T}from"./VField.vue_vue_type_script_setup_true_lang-fbb3636f.js";import{_ as N}from"./VControl-f3a4bf8b.js";import{_ as D}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-84684b42.js";import{_ as E,a as F}from"./search-4-dark-2b5b440c.js";import{u as J}from"./useAPI-80978494.js";import{u as R}from"./useNotyf-13881fb3.js";import{f as W,g as B}from"./useSupportElement-2bc9df64.js";import{g as H}from"./estimatesScripts-31a0b471.js";import{h as q}from"./moment-1b9a430c.js";import{u as z}from"./viewWrapper-35be8064.js";import{b as K}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-6536c3a1.js";import"./VRadio.vue_vue_type_style_index_0_lang-211aa38b.js";import"./VLabel.vue_vue_type_script_setup_true_lang-97d35fe1.js";import"./useVFieldContext-1cf397e9.js";import"./CreateProposalTasksModal-c4368d3d.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-cb126257.js";import"./VInput.vue_vue_type_script_setup_true_lang-b90dec33.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-0a3c84b8.js";import"./VOption.vue_vue_type_style_index_0_lang-242d5c34.js";import"./costItems-22ded6e8.js";import"./VIconButton-25c5fb17.js";import"./company-48a68e5d.js";import"./V-Snack.vue_vue_type_style_index_0_lang-8117aa90.js";import"./VIcon.vue_vue_type_script_setup_true_lang-c65c74a6.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-559e89dc.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-67e94be3.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-bb7540f3.js";import"./ckeditor-91974270.js";import"./vue.runtime.esm-bundler-6dea18eb.js";import"./ckeditor-a700613f.js";import"./VFlex.vue_vue_type_style_index_0_lang-c8e523b2.js";import"./useDropdown-b1120210.js";import"./VPlaceloadWrap-08494893.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-1a25780c.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-3f9670aa.js";import"./notyf-9a886cb1.js";import"./useThemeColors-519b0132.js";const Q={key:1},X={class:"list-flex-toolbar flex-list-v1"},Y=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Ascending"),b("span",null,"Alphabetical Ascending Sorting")],-1)],Z=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Descending"),b("span",null,"Alphabetical Descending Sorting")],-1)],G=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Most Recent"),b("span",null,"Sort most recently created")],-1)],ee=[b("div",{class:"icon"},[b("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Most Old"),b("span",null,"Sort the most oldest")],-1)],ae={class:"page-content-inner"},le={class:"flex-list-wrapper flex-list-v1"},te=b("img",{class:"light-image",src:E,alt:""},null,-1),se=b("img",{class:"dark-image",src:F,alt:""},null,-1),ne={key:0,class:"show-text-200"},ie={class:"item-name"},oe={class:"item-meta"},re={key:1,class:"show-text-200"},de={class:"item-name dark-inverted"},ue={class:"item-meta"},ce={class:"item-name dark-inverted show-text-200"},pe={class:"item-meta show-text-200"},_e={class:"item-name dark-inverted"},me={class:"item-meta"},ve=["onClick"],fe=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),b("div",{class:"meta"},[b("span",null,"View"),b("span",null,"View user details")],-1)],ye=["onClick"],ge=[b("div",{class:"icon"},[b("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),b("div",{class:"meta"},[b("span",null,"Add Proposals"),b("span",null,"Add new proposal to lead")],-1)],be=["onClick"],he=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),b("div",{class:"meta"},[b("span",null,"Edit"),b("span",null,"Update Lead Info")],-1)],je=b("hr",{class:"dropdown-divider"},null,-1),ke=["onClick"],xe=[b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),b("div",{class:"meta"},[b("span",null,"Delete"),b("span",null,"Delete Proposal Permanently")],-1)],we=d({__name:"JobsList",setup(d){const U=u(),E=R(),F=J(),z=c(),K=c({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),we=c(42),Ce=c(!1);c([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]);const Ae={username:{label:"Contractor/Client",grow:!0},location:{label:"Job",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},Ve=async()=>{try{z.value=!0;const e=await F.get("/api/project/project-jobs/");K.value=e.data}catch(e){E.error(` ${e}, Lead`)}finally{z.value=!1}},Se=c(""),Ie=e=>{Se.value=e,Ce.value=!0},Pe=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Oe=async()=>{try{z.value=!0;await F.delete(`/api/project/${Se.value}/`);E.success("Proposal delete successfully"),Ve()}catch(e){E.error(` ${e}, Proposal`),E.error("Something went wrong please try later")}finally{z.value=!1,Pe.value.isSweetAlertOpen=!1}},Le=c("");c("");const $e=c(!1),Ue=p((()=>{if(Le.value){const e=new RegExp(Le.value,"i");return K.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return K.value})),Me=c(""),Te=(e="")=>{Me.value=e},Ne=p((()=>{let e=Ue.value||[];return Me.value?[...e].sort(((e,a)=>"ascending"===Me.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===Me.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===Me.value?q(a.created).valueOf()-q(e.created).valueOf():"old"===Me.value?q(e.created).valueOf()-q(a.created).valueOf():0)):Ue.value}));return _((()=>{Ve()})),(d,u)=>{const c=D,p=N,_=T,E=M,F=P,J=O,R=r,q=n,K=o,Ue=i,Me=s,De=t,Ee=l,Fe=a,Je=e,Re=m("tooltip");return v(),f("div",null,[y(z)?(v(),g(c,{key:0})):(v(),f("div",Q,[b("div",X,[h(_,null,{default:j((()=>[h(p,{icon:"feather:search"},{default:j((()=>[k(b("input",{"onUpdate:modelValue":u[0]||(u[0]=e=>w(Le)?Le.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[x,y(Le)]])])),_:1})])),_:1}),h(E,{title:"Apply sorting",spaced:""},{content:j((()=>[b("a",{onClick:u[1]||(u[1]=e=>Te("ascending")),class:"dropdown-item is-media"},Y),b("a",{onClick:u[2]||(u[2]=e=>Te("descending")),class:"dropdown-item is-media is-active"},Z),b("a",{onClick:u[3]||(u[3]=e=>Te("new")),class:"dropdown-item is-media"},G),b("a",{onClick:u[4]||(u[4]=e=>Te("old")),class:"dropdown-item is-media"},ee)])),_:1}),h(J,null,{default:j((()=>[h(F,{onClick:u[5]||(u[5]=e=>Ie("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:j((()=>[C(" Lead Opportunity ")])),_:1})])),_:1})]),b("div",ae,[b("div",le,[y(Ne)?.length?A("",!0):(v(),g(R,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:j((()=>[te,se])),_:1})),y(Ne)?.length?(v(),g(Me,{key:1,data:y(Ne),columns:Ae,compact:""},{body:j((()=>[h(I,{name:"list",tag:"div",class:"flex-list-inner"},{default:j((()=>[(v(!0),f(V,null,S(y(Ne),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[h(q,{onClick:()=>{y(U).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[e.clientInfo?(v(),f("div",ne,[b("span",ie,L(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),b("span",oe,[b("span",null,L(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):A("",!0),e.contractor_info?(v(),f("div",re,[b("span",de,L(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),b("span",ue,[b("span",null,L(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):A("",!0)])),_:2},1032,["onClick"]),h(q,{onClick:()=>{y(U).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:j((()=>[b("div",null,[b("span",ce,L(e.title?e.title:"N/A"),1),b("span",pe,[b("span",null,L(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),h(q,{onClick:()=>{y(U).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[b("div",null,[b("span",_e,L(y(W)(e.created)),1),b("span",me,[b("span",null,"At:"+L(y(B)(e.created)),1)])])])),_:2},1032,["onClick"]),h(q,{onClick:()=>{y(U).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:j((()=>[h(K,{color:y(H)[e.status],rounded:""},{default:j((()=>[C(L(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),h(q,{onClick:()=>{y(U).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:j((()=>[b("div",null,[(v(!0),f(V,null,S(e.managers_list,(e=>k((v(),g(Ue,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Re,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),h(q,{column:{align:"end"}},{default:j((()=>[h(E,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:j((({close:a})=>[b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(U).push(`/sidebar/dashboard/jobs/${e.id}`)}},fe,8,ve),b("a",{role:"menuitem",onClick:a=>{return l=e.id,Se.value=l,void($e.value=!$e.value);var l},class:"dropdown-item is-media"},ge,8,ye),b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:$((a=>Ie(e.id)),["prevent"])},he,8,be),je,b("a",{role:"menuitem",class:"dropdown-item is-media",onClick:$((a=>{return l=e.id,Se.value=l,void(Pe.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var l}),["prevent"])},xe,8,ke)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):A("",!0),y(Ne)?.length>5?(v(),g(De,{key:2,"current-page":y(we),"onUpdate:currentPage":u[6]||(u[6]=e=>w(we)?we.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):A("",!0)])])])),y(Ce)?(v(),g(Ee,{key:2,addUpdateLeadModal:y(Ce),leadId:y(Se),"onUpdate:modalHandler":u[7]||(u[7]=e=>Ce.value=!1),"onUpdate:OnSuccess":Ve},null,8,["addUpdateLeadModal","leadId"])):A("",!0),y(Pe).isSweetAlertOpen?(v(),g(Fe,{key:3,isSweetAlertOpen:y(Pe).isSweetAlertOpen,title:y(Pe).title,subtitle:y(Pe).subtitle,loading:y(z),btntext:y(Pe).btntext,onConfirm:Oe,onCancel:()=>y(Pe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):A("",!0),y($e)?(v(),g(Je,{key:4,"lead-proposal-modal":y($e),"lead-id":y(Se),"onUpdate:modalHandler":u[8]||(u[8]=e=>$e.value=!1),"onUpdate:OnSuccess":Ve},null,8,["lead-proposal-modal","lead-id"])):A("",!0)])}}}),Ce=d({__name:"index",setup:e=>(z().setPageTitle("Jobs"),U({title:"Jobs - Ibex"}),(e,a)=>{const l=we;return v(),f("div",null,[h(l)])})});"function"==typeof K&&K(Ce);export{Ce as default};
