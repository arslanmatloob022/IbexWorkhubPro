import{_ as e}from"./VProgress.vue_vue_type_style_index_0_lang-ddf030ee.js";import{_ as a}from"./VInput.vue_vue_type_script_setup_true_lang-6b48240a.js";import{e as l,r as s,o as t,M as o,y as n,z as i,C as r,A as c,B as p,l as d,j as u,J as m,S as v,T as f,D as y,U as _,E as h,v as b,H as g,ak as k}from"./index-ff7bbf87.js";import{_ as x}from"./VTextarea.vue_vue_type_script_setup_true_lang-fdccf4a1.js";import{_ as C}from"./VField.vue_vue_type_script_setup_true_lang-1ed6489f.js";import{_ as V}from"./VControl-93b25ec3.js";import{_ as w}from"./VAvatar.vue_vue_type_style_index_0_lang-10b28821.js";import{u as j}from"./useAPI-012a4cc1.js";import{u as P}from"./incomeHistoryChart-62f315a1.js";import{u as A}from"./useNotyf-151d038a.js";import{u as T}from"./viewWrapper-ba318039.js";import"./useVFieldContext-9b429c03.js";import"./VLabel.vue_vue_type_script_setup_true_lang-5300933d.js";import"./userSession-2a179692.js";import"./useThemeColors-47c73328.js";import"./notyf-31a7ca09.js";const D={class:"banking-dashboard banking-dashboard-v1"},I={class:"columns is-multiline"},S={class:"column is-12"},U={class:"columns is-multiline"},B={class:"column is-6"},L={class:"dashboard-card is-contacts"},E=r("div",{class:"title-wrap"},[r("h3",{class:"dark-inverted"},"Send money to")],-1),M=r("div",{class:"people-wrap"},[r("div",{class:"actions"},[r("span",null,"Clients")])],-1),z={class:"transfer-form"},Y={class:"multiselect-single-label"},q={class:"select-label-text"},F={class:"select-label-text"},Q={class:"field"},R=r("label",null,"Amount",-1),X={class:"field has-addons"},H={class:"field-addon-body"},N=r("div",{class:"control"},[r("span",{class:"select currency-select"},[r("select",null,[r("option",null,"$")])])],-1),O={class:"control is-expanded"},G={class:"field"},J=r("label",null,"Description",-1),K=r("p",{class:"context-text"}," Please enter amount you want your client to pay with small description. ",-1),W={class:"submit-wrap"},Z={class:"column is-6"},$={class:"dashboard-card"},ee=r("div",{class:"title-wrap"},[r("h3",{class:"dark-inverted"},"Payment links")],-1),ae={class:"context-text"},le={class:"dashboard-card","data-toggle":"popover","data-pop-mode":"hover","data-pop-width":"220","data-pop-title":"Level 3","data-pop-content":"Awesome! You're already a level 3 customer. Keep up for more.","data-pop-position":"auto","data-pop-icon":"lnil lnil-crown-alt-1","data-pop-iconbg":"green"},se=r("div",{class:"title-wrap"},[r("h3",{class:"dark-inverted"},"Overall Progress"),r("span",{class:"title-meta dark-inverted"},"Lvl 3")],-1),te={class:"progress-wrap m-b-10 m-t-10"},oe=_('<p class="context-text"> This is your Vuero customer level. Reach out higher levels to unlock achievements, special gifts, and more. </p><div class="level is-mobile"><div class="level-left"></div><div class="level-right"><div class="level-item"><a class="action-link" tabindex="0">Details</a></div></div></div>',2),ne=l({__name:"IbexPaymentModule",setup(l){const _=j(),b=A(),g=s({amount:0,description:""}),k=s(!1),T=s({payments:[],count:0}),ne=s(["default"]),ie=s([]),re=s(!1),ce=s(!1),pe=s({success:!0,msg:"payment link has been successfully created",resp:{id:"PAYID-M4BCCXQ345677503C442360B",intent:"sale",state:"created",payer:{payment_method:"paypal"},transactions:[{amount:{total:"10.00",currency:"USD"},description:"Desc",related_resources:[]}],create_time:"2024-10-06T05:34:22Z",links:[{href:"https://api.sandbox.paypal.com/v1/payments/payment/PAYID-M4BCCXQ345677503C442360B",rel:"self",method:"GET"},{href:"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4812231612231625T",rel:"approval_url",method:"REDIRECT"},{href:"https://api.sandbox.paypal.com/v1/payments/payment/PAYID-M4BCCXQ345677503C442360B/execute",rel:"execute",method:"POST"}]}});P(),s(0);const de=e=>{e?navigator.clipboard.writeText(e).then((()=>{b.success("Link copied to clipboard!")})).catch((e=>{b.error("Failed to copy the link: ",e)})):b.error("No link to copy!")},ue=async()=>{try{ce.value=!0;const e=await _.post("/api/paypal/create-link/",{amount:g.value.amount,description:g.value.description});pe.value=e.data,b.success("link Created")}catch(e){b.success("Something went wrong")}finally{ce.value=!1}};return t((()=>{(async()=>{try{re.value=!0;const e=await _.get("/api/users/by-role/client/",{});ie.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{re.value=!1}})(),(async()=>{try{k.value=!0;const e=await _.get("/api/paypal/payments/");T.value=e.data}catch(e){console.log(e)}finally{k.value=!1}})()})),(l,s)=>{const t=w,_=o("Multiselect"),b=V,k=C,j=x,P=h,A=a,T=e;return n(),i("div",D,[r("div",I,[r("div",S,[r("div",U,[r("div",B,[r("div",L,[E,M,r("div",z,[c(k,{class:"is-image-select has-curved-images"},{default:p((()=>[c(b,null,{default:p((()=>[c(_,{modelValue:d(ne),"onUpdate:modelValue":s[0]||(s[0]=e=>u(ne)?ne.value=e:null),placeholder:"Select a client",label:"name","max-height":145,options:d(ie)},{singlelabel:p((({value:e})=>[r("div",Y,[c(t,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),r("span",q,m(e.name),1)])])),option:p((({option:e})=>[c(t,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),r("span",F,m(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),r("div",Q,[R,r("div",X,[r("div",H,[N,r("div",O,[v(r("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>d(g).amount=e),class:"input",type:"number",placeholder:"Amount of money"},null,512),[[f,d(g).amount]])])])])]),r("div",G,[J,c(k,null,{default:p((()=>[c(b,null,{default:p((()=>[c(j,{modelValue:d(g).description,"onUpdate:modelValue":s[2]||(s[2]=e=>d(g).description=e),class:"is-primary-focus",rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})]),K,r("div",W,[c(P,{onClick:ue,color:"info",size:"big",fullwidth:"",loading:d(ce),raised:"",bold:"",icon:"lnir lnir-paypal"},{default:p((()=>[y(" Create Payment link ")])),_:1},8,["loading"])])])])]),r("div",Z,[r("div",$,[ee,c(k,{label:"Client link",addons:""},{default:p((()=>[c(b,{expanded:""},{default:p((()=>[c(A,{type:"text",modelValue:d(pe).resp.links[1].href,"onUpdate:modelValue":s[3]||(s[3]=e=>d(pe).resp.links[1].href=e),class:"input",placeholder:"Approved link..."},null,8,["modelValue"])])),_:1}),c(b,null,{default:p((()=>[c(P,{onClick:s[4]||(s[4]=e=>de(d(pe).resp.links[1].href)),class:"cu-pointer",color:"primary",icon:"fas fa-envelope"},{default:p((()=>[y(" Send ")])),_:1})])),_:1})])),_:1}),c(k,{label:"Client link",addons:""},{default:p((()=>[c(b,{expanded:""},{default:p((()=>[c(A,{type:"text",modelValue:d(pe).resp.links[1].href,"onUpdate:modelValue":s[5]||(s[5]=e=>d(pe).resp.links[1].href=e),class:"input",placeholder:"Approved link..."},null,8,["modelValue"])])),_:1}),c(b,null,{default:p((()=>[c(P,{icon:"fas fa-copy",onClick:s[6]||(s[6]=e=>de(d(pe).resp.links[1].href)),class:"cu-pointer",color:"primary"},{default:p((()=>[y(" Copy ")])),_:1})])),_:1})])),_:1}),c(k,{label:"Check Status Link",addons:""},{default:p((()=>[c(b,{expanded:""},{default:p((()=>[c(A,{type:"text",modelValue:d(pe).resp.links[0].href,"onUpdate:modelValue":s[7]||(s[7]=e=>d(pe).resp.links[0].href=e),class:"input",placeholder:"Approved link..."},null,8,["modelValue"])])),_:1}),c(b,null,{default:p((()=>[c(P,{icon:"fas fa-refresh",class:"cu-pointer",color:"primary"},{default:p((()=>[y(" Verify ")])),_:1})])),_:1})])),_:1}),r("p",ae,m(d(pe).msg?d(pe).msg:"Link not generated yet"),1)]),r("div",le,[se,r("div",te,[c(T,{size:"tiny",value:65})]),oe])])])])])])}}}),ie={class:"page-content-inner"},re=r("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),ce=l({__name:"index",setup:e=>(T().setPageTitle("Ibex Payment"),b({title:"Ibex Payment"}),(e,a)=>{const l=ne;return n(),i("div",ie,[(n(),g(k,{to:"[data-teleport-bg]"},[re])),c(l,{class:"has-navbar-spacing"})])})});export{ce as default};
