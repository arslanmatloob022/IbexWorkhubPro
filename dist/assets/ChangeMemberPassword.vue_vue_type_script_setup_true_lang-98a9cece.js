import{_ as s}from"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import{e as a,r as e,L as l,o,v as n,F as r,z as d,A as t,R as i,l as u,j as p,bU as c,y as m,B as v,I as w,C as f}from"./index-a3511ab8.js";import{u as h}from"./useAPI-2f913358.js";import{u as y}from"./useNotyf-bee6672a.js";const g={class:"modal-form columns is-multiline"},b={class:"column is-12"},P={class:"field"},_=t("label",null,"New Password:",-1),C={class:"control"},x=["type"],M={class:"column is-12"},j={class:"field"},k=t("label",null,"Confirm Password:",-1),A={class:"control"},N=["type"],O=t("label",null,"Show Password:",-1),U=a({__name:"ChangeMemberPassword",props:{ChangePasswordModalOpen:{type:Boolean,default:!1},id:{type:Number,default:0}},emits:["update:handleChangePasswordModalOpen","update:getTeamMembers"],setup(a,{emit:U}){const B=a,I=y(),S=h(),V=e(!1),q=e(""),z=e("");l();const F=e(!1),L=async()=>{if(!V.value){if(q.value!=z.value)return void I.error("Both password and confirm password  must be matched");V.value=!0;try{await S.post("/v3/api/account/auth/change-team-member-password/",{password:q.value,confirm_password:z.value,user:B.id});R()}catch(s){V.value=!1,I.dismissAll(),I.error("Inavlid link or expired, password update")}}},R=()=>{V.value=!1,I.dismissAll(),I.success("Password updated successfully"),T()},T=()=>{U("update:handleChangePasswordModalOpen",!1)},X=()=>{F.value=!F.value};return o((()=>{})),(a,e)=>{const l=f,o=s;return n(),r(o,{is:"form",open:B.ChangePasswordModalOpen,title:"Change Password",size:"small",actions:"right",onSubmit:w(L,["prevent"]),onClose:T,noclose:""},{content:d((()=>[t("div",g,[t("div",b,[t("div",P,[_,t("div",C,[i(t("input",{type:u(F)?"text":"password",name:"password",minlength:"8","onUpdate:modelValue":e[0]||(e[0]=s=>p(q)?q.value=s:null),required:"",class:"input",placeholder:"New password"},null,8,x),[[c,u(q)]])])])]),t("div",M,[t("div",j,[k,t("div",A,[i(t("input",{type:u(F)?"text":"password",name:"confirmPassword",minlength:"8","onUpdate:modelValue":e[1]||(e[1]=s=>p(z)?z.value=s:null),required:"",class:"input",placeholder:"Confirm password"},null,8,N),[[c,u(z)]])])])]),t("div",{class:"column is-12"},[t("div",{class:"field",style:{display:"flex","align-items":"center",gap:".5rem"}},[t("div",{class:"control"},[t("input",{type:"checkbox",class:"checkbox",onClick:X})]),O])])])])),action:d((()=>[m(l,{type:"submit",loading:u(V),color:"primary",raised:""},{default:d((()=>[v("Change Password")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{U as _};
