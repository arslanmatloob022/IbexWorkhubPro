import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-26365933.js";import{_ as l,a as t}from"./ProjectFiles-4dade17e.js";import{c as a,_ as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-43b37b2d.js";import{_ as i}from"./VIconWrap.vue_vue_type_style_index_0_lang-ca10a85d.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-ccc6f0c7.js";import{_ as n}from"./VCheckbox.vue_vue_type_style_index_0_lang-fcc9a914.js";import{_ as d}from"./VTextarea.vue_vue_type_script_setup_true_lang-26beab82.js";import{_ as c}from"./VField.vue_vue_type_script_setup_true_lang-a24b3711.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-9158e8fb.js";import{_ as r}from"./VControl-3bb8ca86.js";import{f as p,b as m,r as v,w as _,$ as h,o as f,av as y,C as b,D as g,E as k,F as x,G as w,K as j,U as C,L as V,X as U,N as T,aS as I,m as S,O as D,V as F,W as P,P as A,al as M,Q as E,R as O,S as K,B as R,J as $,I as N,x as B,H,k as J,aB as z,y as q}from"./index-59087729.js";import{_ as G,a as W}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-4e2a55eb.js";import{u as Q}from"./useNotyf-e01b2c26.js";import{_ as X}from"./ExcelFileEditor-48fd3cfb.js";import{b as Y,a as ee,C as le,f as te}from"./useSupportElement-28005199.js";import{_ as ae}from"./VModal.vue_vue_type_style_index_0_lang-c4d57d17.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-0c7a8079.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-4e2bfa41.js";import{u as oe,_ as ne,a as de}from"./groupedCircleCharts-d67beefa.js";import{b as ce,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-dcf3a899.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-dba1895c.js";import{A as _e}from"./vue3-apexcharts.common-b4d89fef.js";import{u as he}from"./salesSparksChart-fc8fdc9f.js";import{u as fe}from"./revenueAreaChart-8de2d1a4.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-4d717fec.js";import{h as be}from"./moment-1b9a430c.js";import{_ as ge}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-c411d7a8.js";import{p as ke}from"./index-c1fc2d09.js";import{a as xe}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-9f0abe3a.js";import{_ as we}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-b0ad0f28.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-a9d15252.js";import{o as Ce}from"./via-placeholder-24645670.js";import{_ as Ve}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-55239fb0.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-3bcd9fd1.js";import{_ as Te}from"./VDropdown.vue_vue_type_style_index_0_lang-e3c76c61.js";import{_ as Ie}from"./VPlyr.vue_vue_type_style_index_0_lang-d563702a.js";import{f as Se}from"./index-5fa9b154.js";import{_ as De}from"./UIWidget.vue_vue_type_style_index_0_lang-d6bb1460.js";import{_ as Fe}from"./JobTodos.vue_vue_type_style_index_0_lang-5d9253ad.js";import{_ as Pe}from"./UserCardDropdown-ff7e5c2b.js";import{_ as Ae}from"./VTag.vue_vue_type_style_index_0_lang-485b1003.js";import{_ as Me}from"./VIconBox.vue_vue_type_style_index_0_lang-17d00b85.js";import{_ as Ee}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-e0261822.js";const Oe=e=>(E("data-v-6b746c41"),e=e(),O(),e),Ke={class:"column is-12"},Le={class:"list-flex-toolbar is-reversed"},Re={class:"columns is-multiline"},$e={key:0,class:"column is-12 card p-4 curved mb-2"},Ne={class:"columns is-multiline"},Be={class:"column is-10"},He={class:"column is-2"},Je=Oe((()=>k("img",{class:"light-image",src:G,alt:""},null,-1))),ze=Oe((()=>k("img",{class:"dark-image",src:W,alt:""},null,-1))),qe={key:0,class:"column is-12 card p-4 curved mb-2"},Ge={class:"columns is-multiline"},We={class:"column is-10"},Ze={class:"column is-2"},Qe={class:"is-flex space-between mb-4 bottom-border"},Xe={class:"title is-5 m-0"},Ye={class:"content"},el={class:"is-flex"},ll={key:0,class:"columns is-multiline"},tl={class:"column is-6"},al={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},ol={class:"column is-2"},nl={class:"column is-2"},dl={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},rl={class:"column is-2"},pl={class:"is-flex columns is-multiline"},ml=p({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m();const t=Z(),p=Q(),E=v(!1),O={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},K=v(!1),L=v(!1),R=v(!1),$=v([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),N=v(""),B=v(""),H=v({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),J=v({title:"",is_template:!1,object:l.objectId??"",description:""}),z=v({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await t.get(`/api/calculation-section/?object=${l.objectId??""}&user_id=${l.userId??""}&is_template=${l.fetchTemplates??""}`);$.value=e.data}catch(e){console.error(e)}finally{E.value=!1}},G=async()=>{try{const e=J.value;await t.post("/api/calculation-section/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{E.value=!1}};_((()=>H.value.width),(()=>{let e=0;e=H.value.height*H.value.width,H.value.item_area=e.toFixed(2)})),_((()=>H.value.item_unit_price),(()=>{let e=0;e=H.value.item_area*H.value.item_unit_price,H.value.item_total_price=e.toFixed(2)})),_((()=>H.value.quantity),(()=>{let e=0;e=H.value.item_total_price*H.value.quantity,H.value.grand_total_price=e.toFixed(2)}));const W=async()=>{try{const e=H.value;e.section=N.value;await t.post("/api/calculation-section-items/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{E.value=!1}},X=h((()=>{if(B.value){const e=new RegExp(B.value,"i");return $.value.filter((l=>l.title?.match(e)))}return $.value})),ee=async e=>{try{await t.delete(`/api/calculation-section/${e}/`),p.success("Section deleted successfully!"),q()}catch(l){console.error(l),p.error("Failed to delete sheet.")}};return f((async()=>{await q(),await q()})),(e,l)=>{const t=A,p=M,m=r,v=u,_=c,h=d,f=n,E=o,$=i,q=a,Z=s,Q=y("tooltip");return b(),g("div",Ke,[k("div",Le,[x(p,null,{default:w((()=>[x(t,{icon:L.value?"fas fa-window-close":"fas fa-plus",color:L.value?"warning":"primary",class:"ml-2",raised:"",onClick:l[0]||(l[0]=e=>L.value=!L.value)},{default:w((()=>[j(C(L.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),x(t,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>L.value=!L.value)},{default:w((()=>[j("Import")])),_:1})])),_:1}),k("div",null,[x(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>B.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,B.value]])])),_:1})])]),k("div",Re,[x(I,{name:"translate-page-y"},{default:w((()=>[L.value?(b(),g("div",$e,[k("div",Ne,[k("div",Be,[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:J.value.title,"onUpdate:modelValue":l[3]||(l[3]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(h,{modelValue:J.value.description,"onUpdate:modelValue":l[4]||(l[4]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",He,[x(t,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:w((()=>[j(" Add Section")])),_:1}),x(m,{raw:"",subcontrol:""},{default:w((()=>[x(f,{modelValue:J.value.is_template,"onUpdate:modelValue":l[5]||(l[5]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),S(X).length?T("",!0):(b(),D(E,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:w((()=>[Je,ze])),_:1})),x(I,{name:"translate-page-y"},{default:w((()=>[R.value?(b(),g("div",qe,[k("div",Ge,[k("div",We,[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:z.value.title,"onUpdate:modelValue":l[6]||(l[6]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(h,{modelValue:z.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",Ze,[x(t,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:w((()=>[j(" Add Section")])),_:1}),x(m,{raw:"",subcontrol:""},{default:w((()=>[x(f,{modelValue:z.value.is_template,"onUpdate:modelValue":l[8]||(l[8]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):T("",!0)])),_:1}),x(I,{name:"from-bottom"},{default:w((()=>[S(X).length?(b(!0),g(F,{key:0},P(S(X),((e,a)=>(b(),g("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[k("div",Qe,[k("div",null,[k("h4",Xe,C(e.title),1),k("div",Ye,[k("p",null,C(S(Y)(e.created_at)),1)])]),k("div",el,[x($,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),V(x($,{icon:"fas fa-plus",color:K.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{N.value=e,K.value=!K.value,0==K.value&&(H.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),V(x($,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),x($,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),K.value?(b(),g("div",ll,[k("div",tl,[x(_,{label:"Title"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.title,"onUpdate:modelValue":l[9]||(l[9]=e=>H.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",al,[x(_,{label:"Height"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.height,"onUpdate:modelValue":l[10]||(l[10]=e=>H.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",sl,[x(_,{label:"Width"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.width,"onUpdate:modelValue":l[11]||(l[11]=e=>H.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",il,[x(_,{label:"Area"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.item_area,"onUpdate:modelValue":l[12]||(l[12]=e=>H.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ol,[x(_,{label:"Unit"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.unit,"onUpdate:modelValue":l[13]||(l[13]=e=>H.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",nl,[x(_,{label:"Unit Price"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.item_unit_price,"onUpdate:modelValue":l[14]||(l[14]=e=>H.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",dl,[x(_,{label:"Total Price"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.item_total_price,"onUpdate:modelValue":l[15]||(l[15]=e=>H.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",cl,[x(_,{label:"Quantity"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.quantity,"onUpdate:modelValue":l[16]||(l[16]=e=>H.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ul,[x(_,{label:"Grand Total"},{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:H.value.grand_total_price,"onUpdate:modelValue":l[17]||(l[17]=e=>H.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",rl,[x(t,{light:"",fullwidth:"",onClick:W,color:"primary",outlined:"",class:"mt-5"},{default:w((()=>[j("Add Item")])),_:1})])])):T("",!0),k("div",pl,[e.items.length?(b(),D(Z,{key:0,class:"column is-12",data:e.items,columns:O,compact:""},{body:w((()=>[x(I,{name:"list",tag:"div",class:"flex-list-inner"},{default:w((()=>[(b(!0),g(F,null,P(e.items,(e=>(b(),g("div",{key:e.id,class:"flex-table-item"},[x(q,{column:{grow:!0},"data-th":"Label"},{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,null,{default:w((()=>[x(_,null,{default:w((()=>[x(m,null,{default:w((()=>[x(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),x(q,{column:{align:"end"}},{default:w((()=>[x($,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),x($,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):T("",!0)])])))),128)):T("",!0)])),_:1})])])}}}),vl=K(ml,[["__scopeId","data-v-6b746c41"]]),_l=e=>(E("data-v-ce90a5fa"),e=e(),O(),e),hl={key:1},fl={class:"columns is-multiline"},yl={class:"list-flex-toolbar is-reversed column is-12"},bl={class:"multiselect-single-label"},gl=["src"],kl=["src"],xl={class:"is-flex"},wl={class:"card p-4 curved is-flex space-between"},jl={class:"subtitle is-5 m-0"},Cl={class:"content"},Vl={class:"is-flex"},Ul={key:1},Tl=_l((()=>k("h1",{class:"title is-4"},"No File Uploaded",-1))),Il=[Tl],Sl={class:"modal-form columns is-multiline"},Dl={class:"file has-name"},Fl={class:"file-label"},Pl=_l((()=>k("span",{class:"file-cta"},[k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})]),k("span",{class:"file-label"}," Choose a file… ")],-1))),Al={class:"file-name light-text"},Ml=p({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m(),v(null);const t=Z(),a=Q(),s=v(!1);v([[""]]);const o=v([]),n=v([]),d=v(""),p=v(!1);v("");const y=v("");v("");const I=v(!1),E=v(0),O=v({file:"",title:"",object:l.objectId}),K=e=>{let l=e.target.files[0];O.value.file=l,y.value=l.name,O.value.title=l.name},L=v(""),N=v([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),B=async()=>{try{s.value=!0;const e=await t.get(`/api/excel-files/?object=${l.objectId}`);o.value=e.data}catch(e){console.error(e)}finally{s.value=!1}},H=(e="")=>{E.value=e,I.value=!0},J=v(!1),z=async()=>{try{J.value=!0;const e=ee(O.value,[""]);await t.post("/api/excel-files/upload-excel/",e);B(),a.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{J.value=!1,p.value=!1}};_((()=>L.value),(e=>{e&&(async e=>{try{J.value=!0,await t.post(`/api/excel-files/create-from-template/${e}/`),a.success("Sheet create successfully"),B()}catch(l){console.error(l)}finally{J.value=!1,p.value=!1}})(e)}));v("excel");const q=h((()=>{if(d.value){const e=new RegExp(d.value,"i");return o.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return o.value.filter((e=>0==e.is_template))}));return h((()=>{if(d.value){const e=new RegExp(d.value,"i");return n.value.filter((l=>l.title?.match(e)))}return n.value})),f((async()=>{l.fetchAll&&await B(),l.userId&&(async()=>{try{s.value=!0;const e=await t.get(`/api/excel-files/by-user/${l.userId}/`);o.value=e.data}catch(e){console.error(e)}finally{s.value=!1}})(),(async()=>{try{s.value=!0;const e=await t.get("/api/excel-files/templates/");n.value=e.data,N.value=n.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{s.value=!1}})(),await B()})),(e,o)=>{const n=ie,m=R("Multiselect"),v=r,_=c,h=A,f=M,J=i,G=X,W=se,Z=u,Q=ae;return s.value?(b(),D(n,{key:0})):(b(),g("div",hl,[k("div",fl,[k("div",yl,[x(f,null,{default:w((()=>[x(_,{style:{width:"260px"}},{default:w((({id:e})=>[x(v,null,{default:w((()=>[x(m,{modelValue:L.value,"onUpdate:modelValue":o[0]||(o[0]=e=>L.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:N.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:w((({value:e})=>[k("div",bl,[k("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,gl),j(" "+C(e.name),1)])])),option:w((({option:e})=>[k("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,kl),j(" "+C(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),x(h,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:o[1]||(o[1]=e=>H())},{default:w((()=>[j("New Sheet")])),_:1}),x(h,{icon:"fas fa-upload",raised:"",light:"",onClick:o[2]||(o[2]=e=>p.value=!p.value),outlined:"",color:"primary"},{default:w((()=>[j(" File ")])),_:1})])),_:1}),k("div",xl,[x(v,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>d.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,d.value]])])),_:1})])]),S(q).length?(b(!0),g(F,{key:0},P(S(q),((e,l)=>(b(),g("div",{class:"column is-6",key:e.id},[k("div",wl,[k("div",null,[k("h4",jl,C(e.title),1),k("div",Cl,[k("p",null,C(S(Y)(e.created_at)),1)])]),k("div",Vl,[x(J,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>H(e.id),"has-background":""},null,8,["onClick"]),x(J,{onClick:l=>(async e=>{try{await t.delete(`/api/excel-files/${e}/`),a.success("Sheet deleted successfully!"),B()}catch(l){console.error(l),a.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(b(),g("div",Ul,Il))]),I.value?(b(),D(G,{key:0,class:"fullscreen","excel-file-modal":I.value,fileId:E.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":o[4]||(o[4]=e=>{I.value=!1,B()})},null,8,["excel-file-modal","fileId","object-id"])):T("",!0),x(Q,{is:"form",open:p.value,title:"Upload Task File",size:"medium",actions:"right",onClose:o[7]||(o[7]=e=>p.value=!1),onSubmit:$(z,["prevent"])},{content:w((()=>[k("div",Sl,[x(_,{class:"column is-12"},{default:w((()=>[x(W,null,{default:w((()=>[j("File Title")])),_:1}),x(v,null,{default:w((()=>[x(Z,{modelValue:O.value.title,"onUpdate:modelValue":o[5]||(o[5]=e=>O.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),x(_,{class:"column is-12",grouped:""},{default:w((()=>[x(v,null,{default:w((()=>[k("div",Dl,[k("label",Fl,[k("input",{onChange:K,class:"file-input",type:"file",name:"file",required:""},null,32),Pl,k("span",Al,C(y.value?y.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:w((()=>[x(h,{onClick:o[6]||(o[6]=e=>p.value=!1),raised:""},{default:w((()=>[j("Close")])),_:1})])),action:w((()=>[x(h,{type:"submit",color:"primary",raised:""},{default:w((()=>[j("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),El=K(Ml,[["__scopeId","data-v-ce90a5fa"]]),Ol={class:"columns is-multiline"},Kl={class:"column is-3"},Ll={class:"column is-3"},Rl={class:"column is-3"},$l={class:"column is-3"},Nl={class:"column is-6"},Bl={class:"column is-6"},Hl={class:"column is-6"},Jl={class:"column is-6"},zl={class:"column is-6"},ql={class:"column is-6"},Gl=p({__name:"JobReport",setup(e){const{spark1:l,spark2:t,spark3:a,spark4:s}=he(),{revenueOptions:i}=fe(),{lineStatsChartOptions:o}=ce(),{flexRadialChartCircleOptions:n}=ue(),{flexRadialChartStripesOptions:d}=re(),{widgetGaugeGroup1Options:c,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=oe();return(e,_)=>{const h=ve,f=me,y=ne,j=de;return b(),g("div",Ol,[k("div",Kl,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark1",height:S(l).chart.height,type:S(l).chart.type,series:S(l).series,options:S(l)},null,8,["height","type","series","options"])])),_:1})]),k("div",Ll,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark2",height:S(t).chart.height,type:S(t).chart.type,series:S(t).series,options:S(t)},null,8,["height","type","series","options"])])),_:1})]),k("div",Rl,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark3",height:S(a).chart.height,type:S(a).chart.type,series:S(a).series,options:S(a)},null,8,["height","type","series","options"])])),_:1})]),k("div",$l,[x(h,{straight:""},{default:w((()=>[x(S(_e),{id:"widget-spark4",height:S(s).chart.height,type:S(s).chart.type,series:S(s).series,options:S(s)},null,8,["height","type","series","options"])])),_:1})]),k("div",Nl,[x(f,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:w((()=>[x(S(_e),{id:"line-stats-widget-chart",height:S(o).chart.height,type:S(o).chart.type,series:S(o).series,options:S(o)},null,8,["height","type","series","options"])])),_:1})]),k("div",Bl,[x(f,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:w((()=>[x(S(_e),{id:"line-stats-area-chart",height:S(i).chart.height,type:S(i).chart.type,series:S(i).series,options:S(i)},null,8,["height","type","series","options"])])),_:1})]),k("div",Hl,[x(y,{title:"Sales Revenue",straight:""},{default:w((()=>[x(S(_e),{id:"flex-stat-circle",height:S(n).chart.height,type:S(n).chart.type,series:S(n).series,options:S(n)},null,8,["height","type","series","options"])])),_:1})]),k("div",Jl,[x(y,{title:"Sales Revenue",straight:""},{default:w((()=>[x(S(_e),{id:"flex-stat-radial",height:S(d).chart.height,type:S(d).chart.type,series:S(d).series,options:S(d)},null,8,["height","type","series","options"])])),_:1})]),k("div",zl,[x(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:w((()=>[x(S(_e),{id:"group-radial-1",height:S(p).chart.height,type:S(p).chart.type,series:S(p).series,options:S(p)},null,8,["height","type","series","options"])])),chart2:w((()=>[x(S(_e),{id:"group-radial-2",height:S(m).chart.height,type:S(m).chart.type,series:S(m).series,options:S(m)},null,8,["height","type","series","options"])])),chart3:w((()=>[x(S(_e),{id:"group-radial-3",height:S(v).chart.height,type:S(v).chart.type,series:S(v).series,options:S(v)},null,8,["height","type","series","options"])])),_:1})]),k("div",ql,[x(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:w((()=>[x(S(_e),{id:"group-gauge-1",height:S(c).chart.height,type:S(c).chart.type,series:S(c).series,options:S(c)},null,8,["height","type","series","options"])])),chart2:w((()=>[x(S(_e),{id:"group-gauge-2",height:S(u).chart.height,type:S(u).chart.type,series:S(u).series,options:S(u)},null,8,["height","type","series","options"])])),chart3:w((()=>[x(S(_e),{id:"group-gauge-3",height:S(r).chart.height,type:S(r).chart.type,series:S(r).series,options:S(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Wl=e=>(E("data-v-1f68036b"),e=e(),O(),e),Zl={class:"timeline-wrapper"},Ql=Wl((()=>k("div",{class:"timeline-header"},null,-1))),Xl={class:"timeline-wrapper-inner"},Yl={class:"timeline-container"},et={class:"timeline-item is-unread"},lt={class:"date"},tt={class:"content-wrap"},at={class:"content-box"},st=Wl((()=>k("div",{class:"status"},null,-1))),it={class:"box-text"},ot={class:"meta-text"},nt=["innerHTML"],dt=p({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,t=Z(),a=v([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await t.get(`/api/activity-logs/?object_id=${l.object_id}`);a.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const t=ye;return b(),g("div",Zl,[Ql,k("div",Xl,[k("div",Yl,[(b(!0),g(F,null,P(S(a),(e=>(b(),g("div",et,[k("div",lt,[k("span",null,C(S(be)(e.timestamp).format("ddd, mm yyyy")),1)]),k("div",{class:N(["dot",s[e.action]])},null,2),k("div",tt,[k("div",at,[st,x(t,{picture:e.actor_info?.avatar},null,8,["picture"]),k("div",it,[k("div",ot,[k("p",null,[k("span",null,C(e.actor_info?.username??"N/A")+" "+C(e.actor_info?.last_name??"N/A"),1),k("span",{class:"log-message",innerHTML:e.message},null,8,nt)]),k("span",null,C(S(be)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),ct=K(dt,[["__scopeId","data-v-1f68036b"]]),ut={class:"table is-striped is-fullwidth"},rt=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Job"),k("th",{scope:"col"},"ID"),k("th",{scope:"col"},"Title"),k("th",{scope:"col"},"Status"),k("th",{scope:"col"},"Total Price"),k("th",{scope:"col"},"Total Tax"),k("th",{scope:"col"},"Amount Paid"),k("th",{scope:"col"},"Balance"),k("th",{scope:"col"},"Deadline"),k("th",{scope:"col"},"Date Paid"),k("th",{scope:"col"},"Files"),k("th",{scope:"col",class:"is-end"},"Actions")])],-1),pt=k("td",null,"Tina",-1),mt=k("td",null,"Bergmann",-1),vt=k("td",null,"Sales",-1),_t=k("td",null,"Tina",-1),ht=k("td",null,"Bergmann",-1),ft=k("td",null,"Sales",-1),yt=k("td",null,"Tina",-1),bt=k("td",null,"Bergmann",-1),gt=k("td",null,"Sales",-1),kt=k("td",null,"Bergmann",-1),xt=k("td",null,"Sales",-1),wt={class:"is-end"},jt={class:"is-flex is-justify-content-flex-end"},Ct=k("td",null,"Tina",-1),Vt=k("td",null,"Bergmann",-1),Ut=k("td",null,"Sales",-1),Tt=k("td",null,"Tina",-1),It=k("td",null,"Bergmann",-1),St=k("td",null,"Sales",-1),Dt=k("td",null,"Tina",-1),Ft=k("td",null,"Bergmann",-1),Pt=k("td",null,"Sales",-1),At=k("td",null,"Bergmann",-1),Mt=k("td",null,"Sales",-1),Et={class:"is-end"},Ot={class:"is-flex is-justify-content-flex-end"},Kt=k("td",null,"Tina",-1),Lt=k("td",null,"Bergmann",-1),Rt=k("td",null,"Sales",-1),$t=k("td",null,"Tina",-1),Nt=k("td",null,"Bergmann",-1),Bt=k("td",null,"Sales",-1),Ht=k("td",null,"Tina",-1),Jt=k("td",null,"Bergmann",-1),zt=k("td",null,"Sales",-1),qt=k("td",null,"Bergmann",-1),Gt=k("td",null,"Sales",-1),Wt={class:"is-end"},Zt={class:"is-flex is-justify-content-flex-end"},Qt=k("td",null,"Tina",-1),Xt=k("td",null,"Bergmann",-1),Yt=k("td",null,"Sales",-1),ea=k("td",null,"Tina",-1),la=k("td",null,"Bergmann",-1),ta=k("td",null,"Sales",-1),aa=k("td",null,"Tina",-1),sa=k("td",null,"Bergmann",-1),ia=k("td",null,"Sales",-1),oa=k("td",null,"Bergmann",-1),na=k("td",null,"Sales",-1),da={class:"is-end"},ca={class:"is-flex is-justify-content-flex-end"},ua=p({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,t=ke;B();const a=v("");return v(l.activeTab),h((()=>{if(a.value){const e=new RegExp(a.value,"i");return t.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return t})),(e,l)=>{const t=ge;return b(),g("table",ut,[rt,k("tbody",null,[k("tr",null,[pt,mt,vt,_t,ht,ft,yt,bt,gt,kt,xt,k("td",wt,[k("div",jt,[x(t)])])]),k("tr",null,[Ct,Vt,Ut,Tt,It,St,Dt,Ft,Pt,At,Mt,k("td",Et,[k("div",Ot,[x(t)])])]),k("tr",null,[Kt,Lt,Rt,$t,Nt,Bt,Ht,Jt,zt,qt,Gt,k("td",Wt,[k("div",Zt,[x(t)])])]),k("tr",null,[Qt,Xt,Yt,ea,la,ta,aa,sa,ia,oa,na,k("td",da,[k("div",ca,[x(t)])])])])])}}}),ra={class:"table is-striped is-fullwidth"},pa=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"First Name"),k("th",{scope:"col"},"Last Name"),k("th",{scope:"col"},"Position"),k("th",{scope:"col",class:"is-end"},[k("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ma=k("td",null,"Tina",-1),va=k("td",null,"Bergmann",-1),_a=k("td",null,"Head of Sales",-1),ha={class:"is-end"},fa={class:"is-flex is-justify-content-flex-end"},ya=k("td",null,"John",-1),ba=k("td",null,"Wistmus",-1),ga=k("td",null,"Senior Executive",-1),ka={class:"is-end"},xa={class:"is-flex is-justify-content-flex-end"},wa=k("td",null,"Sam",-1),ja=k("td",null,"Watson",-1),Ca=k("td",null,"Software Engineer",-1),Va={class:"is-end"},Ua={class:"is-flex is-justify-content-flex-end"},Ta=k("td",null,"Jolaine",-1),Ia=k("td",null,"Joestar",-1),Sa=k("td",null,"HR Manager",-1),Da={class:"is-end"},Fa={class:"is-flex is-justify-content-flex-end"},Pa=k("td",null,"Anders",-1),Aa=k("td",null,"Jensen",-1),Ma=k("td",null,"Accountant",-1),Ea={class:"is-end"},Oa={class:"is-flex is-justify-content-flex-end"},Ka=p({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,t=ke;B();const a=v("");return v(l.activeTab),h((()=>{if(a.value){const e=new RegExp(a.value,"i");return t.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return t})),(e,l)=>{const t=ge;return b(),g("table",ra,[pa,k("tbody",null,[k("tr",null,[ma,va,_a,k("td",ha,[k("div",fa,[x(t)])])]),k("tr",null,[ya,ba,ga,k("td",ka,[k("div",xa,[x(t)])])]),k("tr",null,[wa,ja,Ca,k("td",Va,[k("div",Ua,[x(t)])])]),k("tr",null,[Ta,Ia,Sa,k("td",Da,[k("div",Fa,[x(t)])])]),k("tr",null,[Pa,Aa,Ma,k("td",Ea,[k("div",Oa,[x(t)])])])])])}}}),La={class:"columns is-multiline"},Ra={class:"column is-12"},$a={class:"toolbar"},Na={class:"tabs-inner"},Ba={class:"tabs"},Ha=k("span",null,"Estimate",-1),Ja=[Ha],za=k("span",null,"Budget",-1),qa=[za],Ga=k("span",null,"Owner Invoice",-1),Wa=[Ga],Za=k("li",{class:"tab-naver"},null,-1),Qa={key:0,class:"column is-12"},Xa={key:1,class:"column is-12"},Ya={key:2,class:"column is-12"},es=p({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;B();const t=v("estimate"),a=v("");return h((()=>{if(a.value){const e=new RegExp(a.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const a=Ka,s=ua;return b(),g("div",La,[k("div",Ra,[k("div",$a,[k("div",Na,[k("div",Ba,[k("ul",null,[k("li",{class:N(["estimate"===S(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=H($((e=>t.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>t.value="estimate")},Ja,32)],2),k("li",{class:N(["budget"===S(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=H($((e=>t.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>t.value="budget")},qa,32)],2),k("li",{class:N(["invoice"===S(t)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=H($((e=>t.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>t.value="invoice")},Wa,32)],2),Za])])])])]),"estimate"===S(t)?(b(),g("div",Qa,[x(a)])):T("",!0),"budget"===S(t)?(b(),g("div",Xa)):T("",!0),"invoice"===S(t)?(b(),g("div",Ya,[x(s)])):T("",!0)])}}}),ls={class:"user-grid-toolbar"},ts=k("span",{class:"icon"},[k("i",{class:"fas fa-plus"})],-1),as=k("span",null,"Progress",-1),ss={class:"user-grid user-grid-v1"},is={class:"columns is-multiline"},os={class:"grid-item"},ns={class:"is-flex"},ds=p({__name:"JobProgressLoader",setup(e){const l=v(""),t=v(0),a=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=r,o=R("Multiselect"),n=c,d=A,u=M,p=z,m=je,v=we;return b(),g("div",null,[k("div",ls,[x(i,{icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>J(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,S(l)]])])),_:1}),x(u,null,{default:w((()=>[x(n,{class:"h-hidden-mobile"},{default:w((()=>[x(i,null,{default:w((()=>[x(o,{modelValue:S(t),"onUpdate:modelValue":s[1]||(s[1]=e=>J(t)?t.value=e:null),options:a,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),x(d,null,{default:w((()=>[ts,as])),_:1})])),_:1})]),k("div",ss,[k("div",is,[(b(),g(F,null,P(20,(e=>k("div",{key:e,class:"column is-3"},[k("div",os,[x(p,{height:"160px",centered:"",class:"mb-2"}),x(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),k("div",ns,[x(v,{size:"small",class:"mx-1"}),x(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),cs={key:1},us={class:"card-grid-toolbar"},rs={class:"buttons"},ps=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ms=k("span",null,"Progress",-1),vs={class:"card-grid card-grid-v4"},_s=k("img",{class:"light-image",src:G,alt:""},null,-1),hs=k("img",{class:"dark-image",src:W,alt:""},null,-1),fs=["href","title"],ys=["src","alt"],bs={class:"card-grid-item-content"},gs={class:"dark-inverted"},ks={key:0},xs=k("summary",null,"Read More",-1),ws={key:0,class:"card-grid-item-footer"},js={class:"meta"},Cs={class:"dark-inverted"},Vs=p({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,t=Z(),a=v(""),s=v(!1),i=v(!1),n=v(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],u=v([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),p=async()=>{try{s.value=!0;const e=await t.get(`/api/job-progress/by-job/${l.object}/`);u.value=e.data}catch(e){console.log(e)}finally{s.value=!1}};h((()=>u.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const m=h((()=>{if(a.value){const e=new RegExp(a.value,"i");return console.log(e),u.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return u.value}));return f((()=>{"job"===l.type&&p()})),(e,t)=>{const u=ds,v=r,_=R("Multiselect"),h=c,f=A,y=o,M=ye,E=xe;return S(s)?(b(),D(u,{key:0})):(b(),g("div",cs,[k("div",us,[x(v,{icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>J(a)?a.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,S(a)]])])),_:1}),k("div",rs,[x(h,{class:"h-hidden-mobile"},{default:w((()=>[x(v,null,{default:w((()=>[x(_,{modelValue:S(n),"onUpdate:modelValue":t[1]||(t[1]=e=>J(n)?n.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),x(f,{onClick:t[2]||(t[2]=e=>i.value=!S(i)),color:"primary",raised:""},{default:w((()=>[ps,ms])),_:1})])]),k("div",vs,[x(y,{class:N([0!==S(m).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[_s,hs])),_:1},8,["class"]),x(I,{name:"list",tag:"div",class:"columns is-multiline"},{default:w((()=>[(b(!0),g(F,null,P(S(m),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[k("img",{src:e.file,alt:e.title,onErrorOnce:t[3]||(t[3]=e=>S(Ce)(400,300))},null,40,ys),k("div",bs,[k("h3",gs,C(e.title?e.title:"No Title"),1),k("p",null,[j(C(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(b(),g("details",ks,[xs,j(" "+C(e.description?e.description:""),1)])):T("",!0)])]),e.uploaded_by_info?(b(),g("div",ws,[x(M,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),k("div",js,[k("span",Cs,C(e.uploaded_by_info.username??"N/A")+" "+C(e.uploaded_by_info.last_name??""),1),k("span",null,C(S(Y)(e.created_at)),1)])])):T("",!0)],8,fs)])))),128))])),_:1})]),S(i)?(b(),D(E,{key:0,job:l.object,openProgressModal:S(i),"onUpdate:OnSuccess":p,"onClose:ModalHandler":t[4]||(t[4]=e=>i.value=!1)},null,8,["job","openProgressModal"])):T("",!0)]))}}}),Us={class:"modal-form columns is-multiline"},Ts={class:"column is-full"},Is={class:"field"},Ss=k("label",{class:"label"},"Title ",-1),Ds={class:"control"},Fs={class:"field column is-half"},Ps={class:"file"},As={class:"file-label"},Ms={class:"file-cta"},Es=k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})],-1),Os={class:"file-label"},Ks=p({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e;v(null);const a=Z(),s=Q(),i=v(!1),o=m(),n=()=>{l("close:ModalHandler",!1)},d=v({type:t.type,object:t.object,title:"",uploaded_by:o.user.id,file:null}),u=async()=>{try{i.value=!0;const e=ee(d.value,["file"]);await a.post("/api/attachment/",e);le({object_type:"files",object_id:t.object,action:"CREATE",message:`Uploaded new file named <b>${d.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),n()}catch(e){console.log(e)}finally{i.value=!1}},p=v(""),_=e=>{const l=e.target,t=l.files?.[0];l.value="",t&&(d.value.file=t,p.value=t.name)};return f((()=>{})),(e,l)=>{const a=r,s=c,o=A,m=ae;return b(),D(m,{is:"form",open:t.openFileModal,title:"Add Progress",size:"medium",actions:"right",onSubmit:$(u,["prevent"]),onClose:n},{content:w((()=>[k("div",Us,[k("div",Ts,[k("div",Is,[Ss,k("div",Ds,[V(k("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>S(d).title=e)},null,512),[[U,S(d).title]])])])]),k("div",Fs,[x(s,{grouped:""},{default:w((()=>[x(a,null,{default:w((()=>[k("div",Ps,[k("label",As,[k("input",{onChange:_,class:"file-input",type:"file",name:"resume"},null,32),k("span",Ms,[Es,k("span",Os,C(S(p)?S(p):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:w((()=>[x(o,{type:"submit",color:"primary",loading:S(i),raised:""},{default:w((()=>[j(" Save")])),_:1},8,["loading"])])),cancel:w((()=>[x(o,{color:"light",onClick:n,raised:""},{default:w((()=>[j("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Ls={key:0,class:"modal-form"},Rs=["src"],$s=["src"],Ns=["src"],Bs=["src"],Hs={key:1,class:"modal-form"},Js=k("h1",{class:"title is-5"},"No media file attached",-1),zs=[Js],qs=p({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",t.document)})),(e,l)=>{const i=Ie,o=A,n=ae;return b(),D(n,{is:"form",open:t.openDocViewModal,title:t.title?t.title:"Attached Document",size:"xl",actions:"right",onClose:a},{content:w((()=>[t.document?(b(),g("div",Ls,[t.document?.includes(".pdf")?(b(),g("iframe",{key:0,src:`${t.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Rs)):t.document?.toLowerCase().includes(".doc")||t.document?.toLowerCase().includes(".docx")?(b(),g("iframe",{key:1,src:s(t.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,$s)):t.document?.toLowerCase().includes(".xls")||t.document?.toLowerCase().includes(".xlsx")?(b(),g("iframe",{key:2,src:s(t.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ns)):T("",!0),t.document?.includes(".mp4")?(b(),D(i,{key:3,ratio:"4by3",source:t.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(b(),g("img",{key:4,src:t.document,alt:""},null,8,Bs))])):(b(),g("div",Hs,zs))])),cancel:w((()=>[x(o,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:w((()=>[j("Close")])),_:1})])),_:1},8,["open","title"])}}}),Gs={class:"tile-grid-item"},Ws={class:"tile-grid-item-inner"},Zs=["src"],Qs={class:"meta"},Xs={class:"dark-inverted"},Ys=k("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),ei=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),li=k("div",{class:"meta"},[k("span",null,"Download"),k("span",null,"Download this file")],-1),ti=[ei,li],ai=k("hr",{class:"dropdown-divider"},null,-1),si=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),ii=k("div",{class:"meta"},[k("span",null,"Delete"),k("span",null,"Delete this file")],-1),oi=[si,ii],ni=p({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const t=e,a=v(""),s=v(!1),i=v(""),o={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},n=v("");return(e,d)=>{const c=Te;return b(),g("div",null,[k("div",Gs,[k("div",Ws,[k("img",{onClick:d[0]||(d[0]=e=>{return l=t.document,a.value=l.file_info?.url,n.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:o[t.document?.file_info?.type]},null,8,Zs),k("div",Qs,[k("span",Xs,C(t.document.title??"N/A"),1),k("span",null,[k("span",null,C(t.document?.file_info?.size??0)+" MB",1),Ys,k("span",null,"At:"+C(S(te)(t.document.created_at)),1)])]),x(c,{icon:"feather:more-vertical",spaced:"",right:""},{content:w((()=>[k("a",{role:"menuitem",onClick:d[1]||(d[1]=e=>(async(e,l)=>{try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");const a=await t.blob(),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(t){console.error("Download failed:",t)}})(t.document.file,t.document.title)),class:"dropdown-item is-media"},ti),ai,k("a",{role:"menuitem",onClick:d[2]||(d[2]=e=>{return a=t.document.id,void l("deleteSelectedFile",a);var a}),class:"dropdown-item is-media"},oi)])),_:1})])]),S(s)?(b(),D(qs,{key:0,openDocViewModal:S(s),document:S(a),DocumentType:S(n),title:S(i),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):T("",!0)])}}}),di={key:1},ci={class:"tile-grid-toolbar"},ui={class:"buttons"},ri=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),pi=k("span",null,"File",-1),mi=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),vi=k("span",null,"Delete Folder",-1),_i={class:"tile-grid tile-grid-v2"},hi=k("img",{class:"light-image",src:G,alt:""},null,-1),fi=k("img",{class:"dark-image",src:W,alt:""},null,-1),yi=p({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const t=e,a=Q(),s=Z(),i=v(""),n=v(0),d=v(""),u=v(!1),p=v(!1),m=v([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),_=["All Files","Recently Updated","My Files","Team Files","Deprecated"];v("");const y=v({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),j=()=>{y.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},C=async()=>{try{const e=await s.delete(`/api/media-folder/${t.folderId}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),a.purple("Folder Deleted Successfully"),y.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},M=async(e="proposal_formats")=>{try{u.value=!0;const e=await s.get(`/api/attachment/by-object/${t.objectId}/?type=${t.docType}`);m.value=e.data}catch(l){console.log(l)}finally{u.value=!1}},E=async e=>{try{const l=await s.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:t.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),a.purple("File Deleted Successfully"),M()}catch(l){console.log(l)}},O=h((()=>i.value?m.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):m.value));return f((()=>{M()})),(e,l)=>{const a=ie,s=r,m=R("Multiselect"),v=c,h=A,f=o,K=ni,L=Ue,$=Ks;return b(),g("div",null,[S(u)?(b(),D(a,{key:0,rows:4})):(b(),g("div",di,[k("div",ci,[x(s,{icon:"feather:search"},{default:w((()=>[V(k("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>J(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,S(i)]])])),_:1}),k("div",ui,[x(v,{class:"h-hidden-mobile"},{default:w((()=>[x(s,null,{default:w((()=>[x(m,{modelValue:S(n),"onUpdate:modelValue":l[1]||(l[1]=e=>J(n)?n.value=e:null),options:_,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),x(h,{onClick:l[2]||(l[2]=e=>(d.value=t.docType,void(p.value=!p.value))),color:"primary",raised:""},{default:w((()=>[ri,pi])),_:1}),x(h,{onClick:j,color:"danger",raised:""},{default:w((()=>[mi,vi])),_:1})])]),k("div",_i,[0!=S(O).length||S(u)?T("",!0):(b(),D(f,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[hi,fi])),_:1})),k("div",null,[x(I,{name:"list",tag:"div",class:"columns is-multiline"},{default:w((()=>[(b(!0),g(F,null,P(S(O),(e=>(b(),g("div",{key:e.id,class:"column is-4"},[x(K,{document:e,onDeleteSelectedFile:E},null,8,["document"])])))),128))])),_:1})])]),S(y).isSweetAlertOpen?(b(),D(L,{key:0,isSweetAlertOpen:S(y).isSweetAlertOpen,title:S(y).title,subtitle:S(y).subtitle,btntext:S(y).btntext,onConfirm:C,onCancel:()=>S(y).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):T("",!0),S(p)?(b(),D($,{key:1,openFileModal:S(p),object:t.objectId,type:S(d),"onClose:ModalHandler":l[3]||(l[3]=e=>p.value=!1),"onUpdate:OnSuccess":M},null,8,["openFileModal","object","type"])):T("",!0)]))])}}}),bi={class:"columns is-multiline"},gi={class:"column is-12"},ki={class:"column is-12"},xi=p({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},folderId:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const t=e,a=v(!1),s=Z(),i=Q(),o=()=>{l("update:modalHandler",!1)},n=v({id:"",type:t.type,object:t.object,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),p=async()=>{try{a.value=!0;const e=ee(n.value,[""]);await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),o()}catch(e){console.log(e)}finally{a.value=!1}};return f((()=>{(async()=>{try{a.value=!0;const e=ee(n.value,[""]);await s.post(`/api/attachment/${t.folderId}/`,e),i.success("File Uploaded successfully")}catch(e){console.log(e)}finally{a.value=!1}})()})),(e,l)=>{const s=u,i=r,m=c,v=d,_=A,h=ae;return b(),D(h,{is:"form",open:t.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:$(p,["prevent"]),onClose:l[2]||(l[2]=e=>o())},{content:w((()=>[k("div",bi,[k("div",gi,[x(m,{label:"Title *"},{default:w((()=>[x(i,null,{default:w((()=>[x(s,{modelValue:S(n).title,"onUpdate:modelValue":l[0]||(l[0]=e=>S(n).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ki,[x(m,{label:"Description (Optional)"},{default:w((()=>[x(i,null,{default:w((()=>[x(v,{modelValue:S(n).description,"onUpdate:modelValue":l[1]||(l[1]=e=>S(n).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:w((()=>[x(_,{loading:S(a),type:"submit",color:"warning",raised:""},{default:w((()=>[j("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),wi={class:"toolbar-header toolbar is-flex space-between"},ji={class:"tabs-inner"},Ci={class:"tabs is-boxed"},Vi=[k("span",null,"Documents",-1)],Ui=[k("span",null,"Photos",-1)],Ti=[k("span",null,"Videos",-1)],Ii=k("li",{class:"tab-naver"},null,-1),Si={key:0},Di={class:"toolbar-header toolbar is-flex space-between"},Fi={class:"tabs-inner"},Pi={class:"tabs"},Ai=[k("span",null,"Grouped Proposals",-1)],Mi=[k("span",null,"Contracts",-1)],Ei=[k("span",null,"Customer Estimates",-1)],Oi=[k("span",null,"Job Scope",-1)],Ki=[k("span",null,"Asbestos & Lead Report",-1)],Li=[k("span",null,"Permits",-1)],Ri=[k("span",null,"Bids & Material",-1)],$i=[k("span",null,"Miscellaneous",-1)],Ni=[k("span",null,"Uploaded Files",-1)],Bi=[k("span",null,"Calculations",-1)],Hi=["onKeydown","onClick"],Ji={class:"is-cus-active"},zi=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],qi=k("li",{class:"tab-naver"},null,-1),Gi={class:"tile-grid tile-grid-v2"},Wi=k("img",{class:"light-image",src:G,alt:""},null,-1),Zi=k("img",{class:"dark-image",src:W,alt:""},null,-1),Qi={key:0},Xi={key:1},Yi={key:2},eo={key:3},lo={key:4},to={key:5},ao={key:6},so={key:7},io={key:8},oo={key:9},no={key:0},co={key:1},uo={class:"tabs-inner"},ro={class:"tabs"},po=[k("span",null,"Site Visit Photos",-1)],mo=[k("span",null,"Inspiration Photos",-1)],vo=[k("span",null,"Trade Photos",-1)],_o=[k("span",null,"Design Approval Photos",-1)],ho=["onKeydown","onClick"],fo={class:"is-cus-active"},yo=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],bo=k("li",{class:"tab-naver"},null,-1),go={class:"tile-grid tile-grid-v2"},ko=k("img",{class:"light-image",src:G,alt:""},null,-1),xo=k("img",{class:"dark-image",src:W,alt:""},null,-1),wo={key:0},jo={key:1},Co={key:2},Vo={key:3},Uo={key:0},To={key:2},Io={class:"tabs-inner"},So={class:"tabs"},Do=[k("span",null,"Job videos",-1)],Fo=[k("span",null,"Other videos",-1)],Po=["onKeydown","onClick"],Ao={class:"is-cus-active"},Mo=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],Eo=k("li",{class:"tab-naver"},null,-1),Oo={class:"tile-grid tile-grid-v2"},Ko=k("img",{class:"light-image",src:G,alt:""},null,-1),Lo=k("img",{class:"dark-image",src:W,alt:""},null,-1),Ro={key:0},$o={key:1},No={key:0},Bo=p({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo"],setup(e,{emit:t}){const a=e;Q();const s=Z(),i=v("");v(0);const n=v(""),d=v("contracts"),c=v(!1),u=v([]),r=v("documents"),p=v("site_visits"),m=v("job_videos"),_=h((()=>i.value?Se.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Se)),y=()=>{t("getProjectInfo",null)},j=async(e="contracts")=>{try{d.value=e;const l=await s.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},V=v(""),U=v(!1),I=v([]),A=v([]),M=v([]),E=(e="")=>{V.value=e,U.value=!U.value},O=async(e="")=>{try{const l=await s.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?I.value=l.data:"photos"===e?A.value=l.data:"videos"===e&&(M.value=l.data)}catch(l){console.log(l)}},K=(e="documents")=>{"documents"===e?O("documents"):"photos"===e?O("photos"):"videos"===e&&O("videos")};return f((()=>{j(),K("documents")})),(e,t)=>{const s=o,i=yi,u=l,v=El,h=Ks,f=xi;return b(),g("div",null,[k("div",wi,[k("div",ji,[k("div",Ci,[k("ul",null,[k("li",{class:N(["documents"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=H($((e=>r.value="documents"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>{r.value="documents",K("documents")})},Vi,32)],2),k("li",{class:N(["photos"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=H($((e=>r.value="photos"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>{r.value="photos",K("photos")})},Ui,32)],2),k("li",{class:N(["videos"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=H($((e=>r.value="videos"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>{r.value="videos",K("videos")})},Ti,32)],2),Ii])])])]),"documents"==S(r)?(b(),g("div",Si,[k("div",Di,[k("div",Fi,[k("div",Pi,[k("ul",null,[k("li",{class:N(["proposal_formats"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=H($((e=>j("proposal_formats")),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>j("proposal_formats"))},Ai,32)],2),k("li",{class:N(["contracts"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=H($((e=>j("contracts")),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>j("contracts"))},Mi,32)],2),k("li",{class:N(["estimates"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=H($((e=>j("estimates")),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>j("estimates"))},Ei,32)],2),k("li",{class:N(["job_scope"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=H($((e=>d.value="job_scope"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>d.value="job_scope")},Oi,32)],2),k("li",{class:N(["asbestos"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=H($((e=>d.value="asbestos"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>d.value="asbestos")},Ki,32)],2),k("li",{class:N(["permits"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[16]||(t[16]=H($((e=>d.value="permits"),["prevent"]),["space"])),onClick:t[17]||(t[17]=e=>d.value="permits")},Li,32)],2),k("li",{class:N(["material"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[18]||(t[18]=H($((e=>d.value="material"),["prevent"]),["space"])),onClick:t[19]||(t[19]=e=>d.value="material")},Ri,32)],2),k("li",{class:N(["miscellaneous"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[20]||(t[20]=H($((e=>d.value="miscellaneous"),["prevent"]),["space"])),onClick:t[21]||(t[21]=e=>d.value="miscellaneous")},$i,32)],2),k("li",{class:N(["files"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[22]||(t[22]=H($((e=>j("files")),["prevent"]),["space"])),onClick:t[23]||(t[23]=e=>j("files"))},Ni,32)],2),k("li",{class:N(["calculations"===S(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[24]||(t[24]=H($((e=>j("calculations")),["prevent"]),["space"])),onClick:t[25]||(t[25]=e=>j("calculations"))},Bi,32)],2),(b(!0),g(F,null,P(S(I),(e=>(b(),g("li",{key:e.id,class:N([S(d)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>j(e.title)},[k("span",null,C(e.title),1)],40,Hi)],2)))),128)),k("li",Ji,[k("a",{tabindex:"0",role:"button",onKeydown:t[26]||(t[26]=H($((e=>E("documents")),["prevent"]),["space"])),onClick:t[27]||(t[27]=e=>E("documents"))},zi,32)]),qi])])])]),k("div",Gi,[x(s,{class:N([0!==S(_).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[Wi,Zi])),_:1},8,["class"]),"contracts"==S(d)?(b(),g("div",Qi,[x(i,{onDeleteFolderUpdate:t[28]||(t[28]=e=>K("documents")),"doc-type":"contracts","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"estimates"==S(d)?(b(),g("div",Xi,[x(i,{onDeleteFolderUpdate:t[29]||(t[29]=e=>K("documents")),"doc-type":"estimates","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"proposal_formats"==S(d)?(b(),g("div",Yi,[x(i,{onDeleteFolderUpdate:t[30]||(t[30]=e=>K("documents")),"doc-type":"proposal_formats","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"job_scope"==S(d)?(b(),g("div",eo,[x(i,{onDeleteFolderUpdate:t[31]||(t[31]=e=>K("documents")),"doc-type":"job_scope","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"asbestos"==S(d)?(b(),g("div",lo,[x(i,{onDeleteFolderUpdate:t[32]||(t[32]=e=>K("documents")),"doc-type":"asbestos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"permits"==S(d)?(b(),g("div",to,[x(i,{onDeleteFolderUpdate:t[33]||(t[33]=e=>K("documents")),"doc-type":"permits","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"material"==S(d)?(b(),g("div",ao,[x(i,{onDeleteFolderUpdate:t[34]||(t[34]=e=>K("documents")),"doc-type":"material","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"miscellaneous"==S(d)?(b(),g("div",so,[x(i,{onDeleteFolderUpdate:t[35]||(t[35]=e=>K("documents")),"doc-type":"miscellaneous","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"files"==S(d)?(b(),g("div",io,[x(u,{projectId:a.leadId,files:a.uploaded_files,"onUpdate:onUploadFile":y},null,8,["projectId","files"])])):T("",!0),"calculations"==S(d)?(b(),g("div",oo,[x(v)])):T("",!0),(b(!0),g(F,null,P(S(I),(e=>(b(),g("div",{key:e.id},[S(d)==e.title?(b(),g("div",no,[x(i,{onDeleteFolderUpdate:t[36]||(t[36]=e=>K("documents")),"doc-type":e.title,"object-id":a.leadId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),"photos"==S(r)?(b(),g("div",co,[k("div",uo,[k("div",ro,[k("ul",null,[k("li",{class:N(["site_visits"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[37]||(t[37]=H($((e=>j("site_visits")),["prevent"]),["space"])),onClick:t[38]||(t[38]=e=>{j("site_visits"),p.value="site_visits"})},po,32)],2),k("li",{class:N(["inspiration_photos"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[39]||(t[39]=H($((e=>j("inspiration_photos")),["prevent"]),["space"])),onClick:t[40]||(t[40]=e=>{j("inspiration_photos"),p.value="inspiration_photos"})},mo,32)],2),k("li",{class:N(["trade_photos"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[41]||(t[41]=H($((e=>j("trade_photos")),["prevent"]),["space"])),onClick:t[42]||(t[42]=e=>{j("trade_photos"),p.value="trade_photos"})},vo,32)],2),k("li",{class:N(["design_approval"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[43]||(t[43]=H($((e=>j("design_approval")),["prevent"]),["space"])),onClick:t[44]||(t[44]=e=>{j("design_approval"),p.value="design_approval"})},_o,32)],2),(b(!0),g(F,null,P(S(A),(e=>(b(),g("li",{key:e.id,class:N([S(p)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),p.value=e.title}},[k("span",null,C(e.title),1)],40,ho)],2)))),128)),k("li",fo,[k("a",{tabindex:"0",role:"button",onKeydown:t[45]||(t[45]=H($((e=>E("photos")),["prevent"]),["space"])),onClick:t[46]||(t[46]=e=>E("photos"))},yo,32)]),bo])])]),k("div",go,[x(s,{class:N([0!==S(_).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[ko,xo])),_:1},8,["class"]),"site_visits"==S(p)?(b(),g("div",wo,[x(i,{onDeleteFolderUpdate:t[47]||(t[47]=e=>K("photos")),"doc-type":"site_visits","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"inspiration_photos"==S(p)?(b(),g("div",jo,[x(i,{onDeleteFolderUpdate:t[48]||(t[48]=e=>K("photos")),"doc-type":"inspiration_photos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"trade_photos"==S(p)?(b(),g("div",Co,[x(i,{onDeleteFolderUpdate:t[49]||(t[49]=e=>K("photos")),"doc-type":"trade_photos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"design_approval"==S(p)?(b(),g("div",Vo,[x(i,{onDeleteFolderUpdate:t[50]||(t[50]=e=>K("photos")),"doc-type":"design_approval","object-id":a.leadId},null,8,["object-id"])])):T("",!0),(b(!0),g(F,null,P(S(A),(e=>(b(),g("div",{key:e.id},[S(p)==e.title?(b(),g("div",Uo,[x(i,{onDeleteFolderUpdate:t[51]||(t[51]=e=>K("photos")),"doc-type":e.title,"object-id":a.leadId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),"videos"==S(r)?(b(),g("div",To,[k("div",Io,[k("div",So,[k("ul",null,[k("li",{class:N(["job_videos"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[52]||(t[52]=H($((e=>j("job_videos")),["prevent"]),["space"])),onClick:t[53]||(t[53]=e=>{m.value="job_videos",j("job_videos")})},Do,32)],2),k("li",{class:N(["other_videos"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:t[54]||(t[54]=H($((e=>j("other_videos")),["prevent"]),["space"])),onClick:t[55]||(t[55]=e=>{m.value="other_videos",j("other_videos")})},Fo,32)],2),(b(!0),g(F,null,P(S(M),(e=>(b(),g("li",{key:e.id,class:N([S(m)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:H($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),m.value=e.title}},[k("span",null,C(e.title),1)],40,Po)],2)))),128)),k("li",Ao,[k("a",{tabindex:"0",role:"button",onKeydown:t[56]||(t[56]=H($((e=>E("videos")),["prevent"]),["space"])),onClick:t[57]||(t[57]=e=>E("videos"))},Mo,32)]),Eo])])]),k("div",Oo,[x(s,{class:N([0!==S(_).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[Ko,Lo])),_:1},8,["class"]),"job_videos"==S(m)?(b(),g("div",Ro,[x(i,{onDeleteFolderUpdate:t[58]||(t[58]=e=>K("videos")),"doc-type":"job_videos","object-id":a.leadId},null,8,["object-id"])])):T("",!0),"other_videos"==S(m)?(b(),g("div",$o,[x(i,{"doc-type":"other_videos","object-id":a.leadId,onDeleteFolderUpdate:t[59]||(t[59]=e=>K("videos"))},null,8,["object-id"])])):T("",!0),(b(!0),g(F,null,P(S(M),(e=>(b(),g("div",{key:e.id},[S(m)==e.title?(b(),g("div",No,[x(i,{"doc-type":e.title,"object-id":a.leadId,folderId:e.id,onDeleteFolderUpdate:t[60]||(t[60]=e=>K("videos"))},null,8,["doc-type","object-id","folderId"])])):T("",!0)])))),128))])])):T("",!0),S(c)?(b(),D(h,{key:3,openFileModal:S(c),object:a.leadId,type:S(n),"onClose:ModalHandler":t[61]||(t[61]=e=>c.value=!1),"onUpdate:OnSuccess":j},null,8,["openFileModal","object","type"])):T("",!0),S(U)?(b(),D(f,{key:4,"open-create-folder-modal":S(U),type:S(V),object:a.leadId,"onUpdate:modalHandler":t[62]||(t[62]=e=>U.value=!1),"onUpdate:onSuccess":t[63]||(t[63]=e=>K(S(V)))},null,8,["open-create-folder-modal","type","object"])):T("",!0)])}}}),Ho={class:"business-dashboard hr-dashboard"},Jo={class:"columns is-multiline"},zo={class:"column is-12"},qo={class:"columns is-multiline"},Go={class:"column is-12"},Wo={class:"block-header"},Zo={class:"left"},Qo={class:"current-user"},Xo={class:"center"},Yo=k("h4",{class:"block-heading"},"Address",-1),en={class:"block-text"},ln=k("br",null,null,-1),tn=k("br",null,null,-1),an={class:"right"},sn=k("h4",{class:"block-heading"},"Managers",-1),on={class:"candidates"},nn=k("button",null,[k("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),dn={class:"column is-12"},cn={class:"toolbar"},un={class:"tabs-inner"},rn={class:"tabs is-boxed"},pn=[k("span",null,"Job Management",-1)],mn=[k("span",null,"Documents/Files",-1)],vn=[k("span",null,"Proposals",-1)],_n=[k("span",null,"Tasks",-1)],hn=[k("span",null,"Activities",-1)],fn=[k("span",null,"Job progress",-1)],yn=[k("span",null,"Calculations",-1)],bn=[k("span",null,"Finance",-1)],gn=[k("span",null,"Report",-1)],kn=k("li",{class:"tab-naver"},null,-1),xn={key:0,class:"column is-12"},wn={class:"columns is-multiline"},jn={class:"column is-8"},Cn={class:"columns is-multiline"},Vn={class:"column is-12"},Un={class:"feed-settings"},Tn=k("h3",{class:"dark-inverted"},"Job feeds",-1),In={class:"buttons"},Sn={class:"column is-4"},Dn={class:"side-text"},Fn=k("h3",{class:"dark-inverted"},"Job Description",-1),Pn=["innerHTML"],An=k("a",{class:"action-link",tabindex:"0"},"Read More",-1),Mn={class:"column is-7 is-offset-1"},En={class:"incoming"},On=k("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),Kn=k("div",null,[k("span",{class:"item-name dark-inverted"},"Messages"),k("span",{class:"item-meta"},[k("span",null,"Inbox messages")])],-1),Ln=k("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),Rn=k("div",null,[k("span",{class:"item-name dark-inverted"},"Tasks"),k("span",{class:"item-meta"},[k("span",null,"Pending tasks")])],-1),$n={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},Nn={key:4,class:"light-text"},Bn={class:"column is-12"},Hn={class:"recent-rookies"},Jn=k("div",{class:"recent-rookies-header"},[k("h3",{class:"dark-inverted"},"Internal Users"),k("a",{class:"action-link",tabindex:"0"},"View All")],-1),zn={class:"columns is-multiline user-grid user-grid-v4"},qn={class:"column is-4"},Gn={class:"grid-item"},Wn={class:"dark-inverted"},Zn={class:"capitalized"},Qn={class:"button-wrap has-text-centered"},Xn={class:"column is-4"},Yn={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},ed=k("div",{class:"widget-toolbar"},[k("div",{class:"left"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),k("div",{class:"center"},[k("h3",null,"October 2020")]),k("div",{class:"right"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),ld=k("table",{class:"calendar"},[k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Mon"),k("th",{scope:"col"},"Tue"),k("th",{scope:"col"},"Wed"),k("th",{scope:"col"},"Thu"),k("th",{scope:"col"},"Fri"),k("th",{scope:"col"},"Sat"),k("th",{scope:"col"},"Sun")])]),k("tbody",null,[k("tr",null,[k("td",{class:"prev-month"},"29"),k("td",{class:"prev-month"},"30"),k("td",{class:"prev-month"},"31"),k("td",null,"1"),k("td",null,"2"),k("td",null,"3"),k("td",null,"4")]),k("tr",null,[k("td",null,"5"),k("td",null,"6"),k("td",null,"7"),k("td",null,"8"),k("td",null,"9"),k("td",null,"10"),k("td",null,"11")]),k("tr",null,[k("td",null,"12"),k("td",null,"13"),k("td",null,"14"),k("td",null,"15"),k("td",null,"16"),k("td",null,"17"),k("td",{class:"current-day"},"18")]),k("tr",null,[k("td",null,"19"),k("td",null,"20"),k("td",null,"21"),k("td",null,"22"),k("td",null,"23"),k("td",null,"24"),k("td",null,"25")]),k("tr",null,[k("td",null,"26"),k("td",null,"27"),k("td",null,"28"),k("td",null,"29"),k("td",null,"30"),k("td",null,"31"),k("td",{class:"next-month"},"1")])])],-1),td={key:1,class:"column is-12"},ad={key:2,class:"column is-12"},sd={class:"tabs-inner"},id={class:"tabs is-boxed"},od=[k("span",null,"Proposals",-1)],nd=[k("span",null,"Grouped Proposals",-1)],dd={key:0},cd={key:1},ud={key:3,class:"column is-12"},rd={key:4,class:"column is-12"},pd={key:5,class:"column is-12"},md={key:6,class:"column is-12"},vd={key:7,class:"column is-12"},_d={key:8,class:"column is-12"},hd={key:9,class:"column is-12"},fd={class:"tabs-inner"},yd={class:"tabs is-boxed"},bd=[k("span",null,"Excel Sheets",-1)],gd=[k("span",null,"Custom Calculations",-1)],kd={key:0},xd={key:1},wd={key:10},jd=p({__name:"JobDetails",setup(a){const i=q();B();const o=Z();Q();const n=v(!1),d=v(""),c=v(!1);v(null),v("Untitled"),v({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const u=v({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),r=v("excel"),p=v("management"),m=v("childProposals"),_=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],h={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let U;const I=async()=>{try{n.value=!0;const e=await o.get(`/api/project/${i.params.id}/detail/`);u.value=e.data,e.data.latitude&&((e,l)=>{if(U&&U.remove(),U=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(U),e&&l){const t=[e,l];L.marker(t).addTo(U),U.setView(t,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{n.value=!1}},M=v([]);return f((()=>{I()})),(a,n)=>{const v=ye,f=A,U=Me,E=Ae,O=s,K=Pe,L=Fe,R=De,B=Bo,J=yi,z=Ve,q=Vs,G=es,W=ct,Z=Gl,Q=t,X=El,Y=vl,ee=l,le=e,te=y("tooltip");return b(),g("div",Ho,[k("div",Jo,[k("div",zo,[k("div",qo,[k("div",Go,[k("div",Wo,[k("div",Zo,[k("div",Qo,[x(v,{size:"large",picture:"lead"==S(u).current_state?"/icons/lead-shield-96.png":"/icons/job-sheild.png",squared:""},null,8,["picture"]),k("h3",null,C(S(u).title?S(u).title:"No Title"),1)])]),k("div",Xo,[Yo,k("p",en,[j(C(S(u).address?S(u).address:"No Address Added")+" ",1),ln,j(" "+C(S(u).city?S(u).city:"No City Added")+", "+C(S(u).state?S(u).state:"No State Added")+" ",1),tn,j(" "+C(S(u).zip_code?S(u).zip_code:"No Zip Code Added"),1)])]),k("div",an,[sn,k("div",on,[(b(!0),g(F,null,P(S(u).managers_list,(e=>V((b(),D(v,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[te,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),nn]),x(f,{class:"mt-1",onClick:n[0]||(n[0]=e=>{return l=S(i).params.id,d.value=l,void(c.value=!0);var l}),bold:"",fullwidth:"","dark-outlined":""},{default:w((()=>[j(" Update "+C("lead"==S(u).current_state?"lead":"job"),1)])),_:1})])])]),k("div",dn,[k("div",cn,[k("div",un,[k("div",rn,[k("ul",null,[k("li",{class:N(["management"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=H($((e=>p.value="management"),["prevent"]),["space"])),onClick:n[2]||(n[2]=e=>p.value="management")},pn,32)],2),k("li",{class:N(["documents"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=H($((e=>p.value="documents"),["prevent"]),["space"])),onClick:n[4]||(n[4]=e=>p.value="documents")},mn,32)],2),k("li",{class:N(["proposals"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=H($((e=>p.value="proposals"),["prevent"]),["space"])),onClick:n[6]||(n[6]=e=>p.value="proposals")},vn,32)],2),k("li",{class:N(["tasks"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=H($((e=>p.value="tasks"),["prevent"]),["space"])),onClick:n[8]||(n[8]=e=>p.value="tasks")},_n,32)],2),k("li",{class:N(["activities"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[9]||(n[9]=H($((e=>p.value="activities"),["prevent"]),["space"])),onClick:n[10]||(n[10]=e=>p.value="activities")},hn,32)],2),k("li",{class:N(["progress"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[11]||(n[11]=H($((e=>p.value="progress"),["prevent"]),["space"])),onClick:n[12]||(n[12]=e=>p.value="progress")},fn,32)],2),k("li",{class:N(["calculations"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[13]||(n[13]=H($((e=>p.value="calculations"),["prevent"]),["space"])),onClick:n[14]||(n[14]=e=>p.value="calculations")},yn,32)],2),k("li",{class:N(["finance"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[15]||(n[15]=H($((e=>p.value="finance"),["prevent"]),["space"])),onClick:n[16]||(n[16]=e=>p.value="finance")},bn,32)],2),k("li",{class:N(["report"===S(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[17]||(n[17]=H($((e=>p.value="report"),["prevent"]),["space"])),onClick:n[18]||(n[18]=e=>p.value="report")},gn,32)],2),kn])])])])]),"management"===S(p)?(b(),g("div",xn,[k("div",wn,[k("div",jn,[k("div",Cn,[k("div",Vn,[k("div",Un,[Tn,k("div",In,[(b(!0),g(F,null,P(S(u).tags,((e,l)=>(b(),g("button",{key:l,class:"button is-selected is-light is-dark-outlined"},C(e),1)))),128))])])]),k("div",Sn,[k("div",Dn,[Fn,k("div",{innerHTML:S(u).notes},null,8,Pn),An])]),k("div",Mn,[k("div",En,[x(O,{rounded:"",data:_,columns:h},{"body-cell":w((({row:e,column:l,value:t})=>["type"===l.key&&"messages"===e.type?(b(),g(F,{key:0},[x(U,{color:"green"},{default:w((()=>[On])),_:1}),Kn],64)):"type"===l.key&&"tasks"===e.type?(b(),g(F,{key:1},[x(U,{color:"orange"},{default:w((()=>[Ln])),_:1}),Rn],64)):"status"===l.key?(b(),g(F,{key:2},["new"===e.status?(b(),D(E,{key:0,rounded:"",color:"success",label:"New"})):(b(),D(E,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(b(),g("a",$n,"Open")):(b(),g("span",Nn,C(t),1))])),_:1})])]),k("div",Bn,[k("div",Hn,[Jn,k("div",zn,[(b(!0),g(F,null,P(S(u).sales_people_info,(e=>(b(),g("div",qn,[k("div",Gn,[x(K),x(v,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),k("h3",Wn,C(e.username??"N/A")+" "+C(e.last_name??""),1),k("p",Zn,C(e.role),1),k("div",Qn,[x(f,{color:"primary",raised:""},{default:w((()=>[j(" View Profile ")])),_:1})])])])))),256))])])])])]),k("div",Xn,["management"===S(p)?(b(),g("div",Yn)):T("",!0),x(L,{project:S(i).params.id},null,8,["project"]),x(R,{class:"picker-widget"},{header:w((()=>[ed])),body:w((()=>[ld])),_:1})])])])):T("",!0),"documents"===S(p)?(b(),g("div",td,[x(B,{leadId:S(i).params.id,uploaded_files:S(u).uploaded_files,getProjectInfo:I},null,8,["leadId","uploaded_files"])])):T("",!0),"proposals"===S(p)?(b(),g("div",ad,[k("div",sd,[k("div",id,[k("ul",null,[k("li",{class:N(["childProposals"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[19]||(n[19]=H($((e=>m.value="childProposals"),["prevent"]),["space"])),onClick:n[20]||(n[20]=e=>m.value="childProposals")},od,32)],2),k("li",{class:N(["groupedProposals"===S(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[21]||(n[21]=H($((e=>m.value="groupedProposals"),["prevent"]),["space"])),onClick:n[22]||(n[22]=e=>{m.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await o.get(`/api/attachment/by-object/${i.params.id}/?type=${e}`);M.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},nd,32)],2)])])]),"childProposals"==S(m)?(b(),g("div",dd,[x(Ee,{"lead-id":S(i).params.id,onUpdateCompany:I},null,8,["lead-id"])])):T("",!0),"groupedProposals"==S(m)?(b(),g("div",cd,[x(J,{"doc-type":"proposal_formats","object-id":S(i).params.id},null,8,["object-id"])])):T("",!0)])):T("",!0),"activities"===S(p)?(b(),g("div",ud,[x(z,{jobId:S(i).params.id},null,8,["jobId"])])):T("",!0),"progress"===S(p)?(b(),g("div",rd,[x(q,{object:S(i).params.id,type:"job"},null,8,["object"])])):T("",!0),"finance"===S(p)?(b(),g("div",pd,[x(G)])):T("",!0),"activityLogs"===S(p)?(b(),g("div",md,[x(W,{object_id:S(i).params.id||S(u).id,object_type:"lead"},null,8,["object_id"])])):T("",!0),"report"===S(p)?(b(),g("div",vd,[x(Z)])):T("",!0),"tasks"===S(p)?(b(),g("div",_d,[x(Q,{projectID:S(i).params.id},null,8,["projectID"])])):T("",!0),"calculations"===S(p)?(b(),g("div",hd,[k("div",fd,[k("div",yd,[k("ul",null,[k("li",{class:N(["excel"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[23]||(n[23]=H($((e=>r.value="excel"),["prevent"]),["space"])),onClick:n[24]||(n[24]=e=>r.value="excel")},bd,32)],2),k("li",{class:N(["custom"===S(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:n[25]||(n[25]=H($((e=>r.value="custom"),["prevent"]),["space"])),onClick:n[26]||(n[26]=e=>r.value="custom")},gd,32)],2)])])]),"excel"==S(r)?(b(),g("div",kd,[x(X,{objectId:S(i).params.id},null,8,["objectId"])])):T("",!0),"custom"==S(r)?(b(),g("div",xd,[x(Y,{objectId:S(i).params.id},null,8,["objectId"])])):T("",!0)])):T("",!0),"files"==S(p)?(b(),g("div",wd,[x(ee,{projectId:S(i).params.id,files:S(u).uploaded_files,"onUpdate:onUploadFile":I},null,8,["projectId","files"])])):T("",!0)])])]),S(c)?(b(),D(le,{key:0,addUpdateLeadModal:S(c),leadId:S(d),"onUpdate:modalHandler":n[27]||(n[27]=e=>c.value=!1),"onUpdate:OnSuccess":I},null,8,["addUpdateLeadModal","leadId"])):T("",!0)])}}});export{jd as _};
