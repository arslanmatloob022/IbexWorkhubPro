import{_ as e}from"./ProposalViewModal.vue_vue_type_style_index_0_lang-8692c692.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-d2e67747.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-ad90c463.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-c7a10a0b.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-2e756945.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-32355ab6.js";import{_ as o}from"./VAvatar.vue_vue_type_style_index_0_lang-8252aa84.js";import{_ as r}from"./VTag.vue_vue_type_style_index_0_lang-a4c61571.js";import{_ as u}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-cc0e0f70.js";import{e as d,r as c,v as _,Z as p,o as m,au as v,B as f,C as y,l as g,N as b,D as h,E as j,F as x,K as k,W as w,j as V,J as C,U as A,V as S,M as I,aR as L,O as P,ak as O,T,I as U,z as $}from"./index-6ec76f2c.js";import{_ as N,a as D}from"./VOption.vue_vue_type_style_index_0_lang-84b07de9.js";import{_ as M}from"./VField.vue_vue_type_script_setup_true_lang-12cdb0f5.js";import{_ as F}from"./VControl-cd7a06dd.js";import{_ as E}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-dbf0ab88.js";import{_ as W,a as z}from"./search-4-dark-2b5b440c.js";import{u as H}from"./useAPI-75ddec04.js";import{u as B}from"./useNotyf-f5a64182.js";import{e as J,g as R}from"./useSupportElement-51074a9f.js";import{g as Z,b as Y}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-5dd3307e.js";import{u as K}from"./viewWrapper-442db619.js";import{b as Q}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-4619ed61.js";import"./VRadio.vue_vue_type_style_index_0_lang-49fb15a5.js";import"./VLabel.vue_vue_type_script_setup_true_lang-890769c0.js";import"./useVFieldContext-9f8928d8.js";import"./CreateProposalTasksModal-da0d1627.js";import"./userSession-d90803bf.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-0ddcd2a4.js";import"./VInput.vue_vue_type_script_setup_true_lang-94e4ee6c.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-a79f9266.js";import"./VIconButton-79dc9d51.js";import"./costItems-cc57c928.js";import"./V-Snack.vue_vue_type_style_index_0_lang-ff52b2f2.js";import"./VIcon.vue_vue_type_script_setup_true_lang-94f24f7b.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-89ea351c.js";import"./ckeditor-847d623f.js";import"./vue.runtime.esm-bundler-c71197d8.js";import"./ckeditor-e831084b.js";import"./VFlex.vue_vue_type_style_index_0_lang-b3c54b82.js";import"./useDropdown-ca6d335e.js";import"./VPlaceloadWrap-8c7451bd.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-47df2e29.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-72130ba3.js";import"./notyf-0decad19.js";import"./useThemeColors-610dce37.js";const q={key:1},G={class:"list-flex-toolbar flex-list-v1"},X={class:"page-content-inner"},ee={class:"flex-list-wrapper flex-list-v1"},ae=h("img",{class:"light-image",src:W,alt:""},null,-1),le=h("img",{class:"dark-image",src:z,alt:""},null,-1),te={class:"item-name dark-inverted show-text-200"},se={class:"item-meta show-text-200"},ne={key:0,class:"show-text-200"},ie={class:"item-name"},oe={class:"item-meta"},re={key:1,class:"show-text-200"},ue={class:"item-name"},de={class:"item-meta"},ce={class:"item-name"},_e={class:"item-meta"},pe=["onClick"],me=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),h("div",{class:"meta"},[h("span",null,"View"),h("span",null,"View user details")],-1)],ve=["onClick"],fe=[h("div",{class:"icon"},[h("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Add Proposals"),h("span",null,"Add new proposal to lead")],-1)],ye=["onClick"],ge=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Update Lead Info")],-1)],be=h("hr",{class:"dropdown-divider"},null,-1),he=["onClick"],je=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),h("div",{class:"meta"},[h("span",null,"Delete"),h("span",null,"Delete Proposal Permanently")],-1)],xe=d({__name:"LeadsList",setup(d){const $=c(""),W=_(),z=B(),K=H(),Q=c(),xe=c({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),ke=c(42),we=c(""),Ve=c(""),Ce=c(!1),Ae=c(!1),Se=c([{value:"open",label:"Open"},{value:"sold",label:"Sold"},{value:"lost",label:"Lost"},{value:"onHold",label:"On hold"}]),Ie={location:{label:"Job",grow:!0},username:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Lead Status",industry:"Manager",actions:{label:"Actions",align:"end"}},Le=async()=>{try{Q.value=!0;const e=await K.get("/api/project/project-leads/");xe.value=e.data}catch(e){z.error(` ${e}, Lead`)}finally{Q.value=!1}},Pe=e=>{$.value=e,Ae.value=!0},Oe=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Te=async()=>{try{Q.value=!0;await K.delete(`/api/project/${$.value}/`);z.info("Lead deleted successfully"),Le()}catch(e){z.error(` ${e}, Lead`),z.error("Something went wrong please try later")}finally{Q.value=!1,Oe.value.isSweetAlertOpen=!1}},Ue=p((()=>{if(we.value){const e=new RegExp(we.value,"i");return xe.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created?.match(e)))}return xe.value})),$e=p((()=>Ve.value?Ue.value?.filter((e=>e.leadStatus==Ve.value)):Ue.value));return m((()=>{Le()})),(d,c)=>{const _=E,p=F,m=M,z=N,H=D,B=P,K=O,xe=u,Ue=n,Ne=r,De=o,Me=i,Fe=s,Ee=t,We=l,ze=a,He=e,Be=v("tooltip");return f(),y("div",null,[g(Q)?(f(),b(_,{key:0})):(f(),y("div",q,[h("div",G,[j(m,null,{default:x((()=>[j(p,{icon:"feather:search"},{default:x((()=>[k(h("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>V(we)?we.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,g(we)]])])),_:1})])),_:1}),j(m,null,{default:x((()=>[j(p,{class:"has-icons-left",icon:"fas fa-globe"},{default:x((()=>[j(H,{modelValue:g(Ve),"onUpdate:modelValue":c[1]||(c[1]=e=>V(Ve)?Ve.value=e:null)},{default:x((()=>[j(z,{value:""},{default:x((()=>[C(" All ")])),_:1}),(f(!0),y(A,null,S(g(Se),(e=>(f(),b(z,{value:e.value},{default:x((()=>[C(T(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1}),j(K,null,{default:x((()=>[j(B,{onClick:c[2]||(c[2]=e=>Pe("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:x((()=>[C(" Lead Opportunity ")])),_:1})])),_:1})]),h("div",X,[h("div",ee,[g($e)?.length?I("",!0):(f(),b(xe,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[ae,le])),_:1})),g($e)?.length?(f(),b(Fe,{key:1,data:g($e),columns:Ie,compact:""},{body:x((()=>[j(L,{name:"list",tag:"div",class:"flex-list-inner"},{default:x((()=>[(f(!0),y(A,null,S(g($e),(e=>(f(),y("div",{key:e.id,class:"flex-table-item"},[j(Ue,{onClick:()=>{g(W).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:x((()=>[h("div",null,[h("span",te,T(e.title?e.title:"N/A"),1),h("span",se,[h("span",null,T(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),j(Ue,{onClick:()=>{g(W).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:x((()=>[e.clientInfo?(f(),y("div",ne,[h("span",ie,T(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),h("span",oe,[h("span",null,T(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):e.contractor_info?(f(),y("div",re,[h("span",ue,T(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),h("span",de,[h("span",null,T(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):I("",!0)])),_:2},1032,["onClick"]),j(Ue,{onClick:()=>{g(W).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:x((()=>[h("div",null,[h("span",ce,T(g(J)(e.created)),1),h("span",_e,[h("span",null,"At:"+T(g(R)(e.created)),1)])])])),_:2},1032,["onClick"]),j(Ue,{onClick:()=>{g(W).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:x((()=>[j(Ne,{color:g(Z)[e.leadStatus],rounded:""},{default:x((()=>[C(T(g(Y)[e.leadStatus]),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),j(Ue,{onClick:()=>{g(W).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:x((()=>[h("div",null,[(f(!0),y(A,null,S(e.managers_list,(e=>k((f(),b(De,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Be,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),j(Ue,{column:{align:"end"}},{default:x((()=>[j(Me,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:x((({close:a})=>[h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{g(W).push(`/sidebar/dashboard/jobs/${e.id}`)}},me,8,pe),h("a",{role:"menuitem",onClick:a=>{return l=e.id,$.value=l,void(Ce.value=!Ce.value);var l},class:"dropdown-item is-media"},fe,8,ve),h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>Pe(e.id)),["prevent"])},ge,8,ye),be,h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:U((a=>{return l=e.id,$.value=l,void(Oe.value={title:"Delete Lead?",subtitle:"Are you sure to delete this Lead? After delete you will not be able to recover it again.",btntext:"Delete",isSweetAlertOpen:!0});var l}),["prevent"])},je,8,he)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):I("",!0),g($e)?.length>5?(f(),b(Ee,{key:2,"current-page":g(ke),"onUpdate:currentPage":c[3]||(c[3]=e=>V(ke)?ke.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):I("",!0)])])])),g(Ae)?(f(),b(We,{key:2,addUpdateLeadModal:g(Ae),leadId:g($),"onUpdate:modalHandler":c[4]||(c[4]=e=>Ae.value=!1),"onUpdate:OnSuccess":Le},null,8,["addUpdateLeadModal","leadId"])):I("",!0),g(Oe).isSweetAlertOpen?(f(),b(ze,{key:3,isSweetAlertOpen:g(Oe).isSweetAlertOpen,title:g(Oe).title,subtitle:g(Oe).subtitle,loading:g(Q),btntext:g(Oe).btntext,onConfirm:Te,onCancel:()=>g(Oe).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):I("",!0),g(Ce)?(f(),b(He,{key:4,"lead-proposal-modal":g(Ce),"lead-id":g($),"onUpdate:modalHandler":c[5]||(c[5]=e=>Ce.value=!1),"onUpdate:OnSuccess":Le},null,8,["lead-proposal-modal","lead-id"])):I("",!0)])}}}),ke=d({__name:"index",setup:e=>(K().setPageTitle("Leads"),$({title:"Leads - Ibex"}),(e,a)=>{const l=xe;return f(),y("div",null,[j(l)])})});"function"==typeof Q&&Q(ke);export{ke as default};
