import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-0f37c66f.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-d72081e6.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-93b1c51f.js";import{_ as s}from"./VAvatar.vue_vue_type_style_index_0_lang-17f6d66a.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-05fd7e90.js";import{e as t,r as n,Z as c,o,au as d,B as r,C as u,D as p,E as m,F as v,K as h,W as k,l as g,j as f,H as y,G as _,T as w,U as b,V as C,N as j,M as x,ak as D,I as T,P as S,Q as A,R as E,A as I,aR as W,J as P}from"./index-5ef4b004.js";import{_ as V}from"./VControl-b58d2761.js";import{_ as O,a as $}from"./projects-dark-4a371d8a.js";import{u as L}from"./useNotyf-25049f18.js";import{u as N}from"./useAPI-9ed6129f.js";import{u as M}from"./userSession-03919bcf.js";import{c as R,_ as U}from"./VFlexTable.vue_vue_type_style_index_0_lang-d4b70ca1.js";import{_ as z}from"./VTag.vue_vue_type_style_index_0_lang-1e828c4f.js";import{_ as K,a as F}from"./search-4-dark-2b5b440c.js";import{p as H}from"./index-c1fc2d09.js";import{_ as q}from"./VField.vue_vue_type_script_setup_true_lang-3b3b84f8.js";import{_ as J}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-02ee5366.js";import{_ as Q}from"./having-coffee-37a7bbcc.js";import{_ as Y}from"./having-coffee-dark-4694625e.js";const B=e=>(S("data-v-13f04d27"),e=e(),A(),e),G={class:"list-flex-toolbar is-reversed"},X={class:"tabs-inner"},Z={class:"tabs"},ee=B((()=>p("span",null,"All",-1))),le=[ee],ae=B((()=>p("span",null,"Active",-1))),se=[ae],ie=B((()=>p("span",null,"Pending",-1))),te=[ie],ne=B((()=>p("span",null,"Completed",-1))),ce=[ne],oe=B((()=>p("li",{class:"tab-naver"},null,-1))),de={class:"flex-list-wrapper flex-list-v2"},re={key:0,class:"tab-content is-active"},ue={class:"all-projects"},pe={class:"all-projects-header"},me={class:"header-item"},ve={class:"item-inner"},he=B((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),ke=B((()=>p("p",null,"Total Tasks",-1))),ge={class:"header-item"},fe={class:"item-inner"},ye=B((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),_e=B((()=>p("p",null,"Completed Tasks",-1))),we={class:"header-item"},be={class:"item-inner"},Ce=B((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),je=B((()=>p("p",null,"Pending Tasks",-1))),xe={class:"header-item"},De={class:"item-inner"},Te=B((()=>p("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),Se=B((()=>p("p",null,"Active Tasks",-1))),Ae={key:0,class:"columns is-multiline projects-card-grid"},Ee={class:"column is-6"},Ie={class:"grid-item"},We={class:"top-section"},Pe={class:"head"},Ve=["onClick"],Oe=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],$e=["onClick"],Le=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],Ne=["onClick"],Me=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],Re=B((()=>p("hr",{class:"dropdown-divider"},null,-1))),Ue=["onClick"],ze=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],Ke=["onClick"],Fe=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],He={class:"body"},qe={class:"bottom-section"},Je={key:0,class:"foot-block"},Qe=B((()=>p("h4",{class:"heading"},"Sub Contractor",-1))),Ye={class:"developers"},Be={key:1,class:"foot-block"},Ge=B((()=>p("h4",{class:"heading"},"Worker(s)",-1))),Xe={class:"developers"},Ze={class:"foot-block"},el=B((()=>p("h4",{class:"heading"},"Start date",-1))),ll={class:"foot-block"},al=B((()=>p("h4",{class:"heading"},"End date",-1))),sl={class:"foot-block"},il=B((()=>p("h4",{class:"heading"},"Status",-1))),tl=B((()=>p("img",{class:"light-image is-larger",src:O,alt:""},null,-1))),nl=B((()=>p("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),cl={key:1,class:"tab-content is-active"},ol={class:"all-projects"},dl={key:0,class:"columns is-multiline projects-card-grid"},rl={class:"column is-6"},ul={class:"grid-item"},pl={class:"top-section"},ml={class:"head"},vl=["onClick"],hl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],kl=["onClick"],gl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],fl=["onClick"],yl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],_l=B((()=>p("hr",{class:"dropdown-divider"},null,-1))),wl=["onClick"],bl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],Cl=["onClick"],jl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],xl={class:"body"},Dl={class:"bottom-section"},Tl={class:"foot-block"},Sl=B((()=>p("h4",{class:"heading"},"Worker(s)",-1))),Al={class:"developers"},El={class:"foot-block"},Il=B((()=>p("h4",{class:"heading"},"Start date",-1))),Wl={class:"foot-block"},Pl=B((()=>p("h4",{class:"heading"},"End date",-1))),Vl={class:"foot-block"},Ol=B((()=>p("h4",{class:"heading"},"Status",-1))),$l=B((()=>p("img",{class:"light-image is-larger",src:O,alt:""},null,-1))),Ll=B((()=>p("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),Nl={key:2,class:"tab-content is-active"},Ml={class:"all-projects"},Rl={key:0,class:"columns is-multiline projects-card-grid"},Ul={class:"column is-6"},zl={class:"grid-item"},Kl={class:"top-section"},Fl={class:"head"},Hl=["onClick"],ql=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],Jl=["onClick"],Ql=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],Yl=["onClick"],Bl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],Gl=B((()=>p("hr",{class:"dropdown-divider"},null,-1))),Xl=["onClick"],Zl=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],ea=["onClick"],la=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],aa={class:"body"},sa={class:"bottom-section"},ia={class:"foot-block"},ta=B((()=>p("h4",{class:"heading"},"Worker(s)",-1))),na={class:"developers"},ca={class:"foot-block"},oa=B((()=>p("h4",{class:"heading"},"Start date",-1))),da={class:"foot-block"},ra=B((()=>p("h4",{class:"heading"},"End date",-1))),ua={class:"foot-block"},pa=B((()=>p("h4",{class:"heading"},"Status",-1))),ma=B((()=>p("img",{class:"light-image is-larger",src:O,alt:""},null,-1))),va=B((()=>p("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),ha={key:3,class:"tab-content is-active"},ka={class:"all-projects"},ga={key:0,class:"columns is-multiline projects-card-grid"},fa={class:"column is-6"},ya={class:"grid-item"},_a={class:"top-section"},wa={class:"head"},ba=["onClick"],Ca=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Active"),p("span",null,"Start work on this task")],-1)))],ja=["onClick"],xa=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Pending"),p("span",null,"Waiting to work on")],-1)))],Da=["onClick"],Ta=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Completed"),p("span",null,"Mark task as completed")],-1)))],Sa=B((()=>p("hr",{class:"dropdown-divider"},null,-1))),Aa=["onClick"],Ea=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Task detail")],-1)))],Ia=["onClick"],Wa=[B((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),B((()=>p("div",{class:"meta"},[p("span",null,"Delete "),p("span",null,"Delete this task")],-1)))],Pa={class:"body"},Va={class:"bottom-section"},Oa={class:"foot-block"},$a=B((()=>p("h4",{class:"heading"},"Worker(s)",-1))),La={class:"developers"},Na={class:"foot-block"},Ma=B((()=>p("h4",{class:"heading"},"Start date",-1))),Ra={class:"foot-block"},Ua=B((()=>p("h4",{class:"heading"},"End date",-1))),za={class:"foot-block"},Ka=B((()=>p("h4",{class:"heading"},"Status",-1))),Fa=B((()=>p("img",{class:"light-image is-larger",src:O,alt:""},null,-1))),Ha=B((()=>p("img",{class:"dark-image is-larger",src:$,alt:""},null,-1))),qa=E(t({__name:"WorkerTasks",props:{projectID:{default:""},workerId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(t,{emit:S}){const A=t,E=N(),I=L(),W=n(""),P=M(),O=n(""),$=n("all"),R=n(0),U=n(!1),z=n(!1),K=n(0);n({});const F=n("");n([{value:"active",name:"Active"},{value:"pending",name:"Pre Construction"},{value:"completed",name:"Completed"},{value:"cancelled",name:"cancelled"}]),n([{id:0,username:"",email:"",phoneNumber:""}]);const H=n([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),q=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),J=e=>{K.value=e,q.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},Q=async()=>{try{U.value=!0;const e=await E.get(`/api/task/${A.workerId?A.workerId:P.user.id}/worker-tasks/`);H.value=e.data,console.log(e.data),U.value=!1}catch(e){console.log(e)}},Y=c((()=>{let e=H.value.filter((e=>"active"==e.status));return S("update:completedTasks",e.length),e.length})),B=c((()=>{let e=H.value.filter((e=>"pending"==e.status));return S("update:activeTasks",e.length),e.length})),ee=c((()=>H.value.filter((e=>"completed"==e.status)).length)),ae=e=>{F.value=e,z.value=!0},ie=()=>{Q(),z.value=!1,F.value=""},ne=async(e,l)=>{try{U.value=!0;await E.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});Q(),I.success(`Task set to ${l} successfully`),R.value=0,U.value=!1}catch(a){console.log(a)}},qa=async()=>{try{U.value=!0;const e=await E.delete(`/api/task/${K.value}/`);console.log(e),I.success("Task deleted successfully"),Q(),q.value.isSweetAlertOpen=!1,R.value=0}catch(e){console.log(e)}finally{U.value=!1}},Ja=c((()=>{if(O.value){const e=new RegExp(O.value,"i");return H.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return H.value.filter((e=>"completed"!=e.status))})),Qa=c((()=>{if(O.value){const e=new RegExp(O.value,"i");return H.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return H.value.filter((e=>"completed"==e.status))})),Ya=c((()=>{if(O.value){const e=new RegExp(O.value,"i");return H.value.filter((l=>"active"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return H.value.filter((e=>"active"==e.status))})),Ba=c((()=>{if(O.value){const e=new RegExp(O.value,"i");return H.value.filter((l=>"pending"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return H.value.filter((e=>"pending"==e.status))}));return o((()=>{Q()})),(t,n)=>{const c=V,o=D,S=i,E=s,I=a,P=l,L=e,N=d("tooltip");return r(),u(b,null,[p("div",null,[p("div",G,[m(o,null,{default:v((()=>[m(c,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:v((()=>[h(p("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>f(O)?O.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,g(O)]])])),_:1})])),_:1}),p("div",X,[p("div",Z,[p("ul",null,[p("li",{class:y(["all"===g($)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[1]||(n[1]=_(T((e=>$.value="all"),["prevent"]),["space"])),onClick:n[2]||(n[2]=e=>$.value="all")},le,32)],2),p("li",{class:y(["active"===g($)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[3]||(n[3]=_(T((e=>$.value="active"),["prevent"]),["space"])),onClick:n[4]||(n[4]=e=>$.value="active")},se,32)],2),p("li",{class:y(["pending"===g($)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[5]||(n[5]=_(T((e=>$.value="pending"),["prevent"]),["space"])),onClick:n[6]||(n[6]=e=>$.value="pending")},te,32)],2),p("li",{class:y(["completed"===g($)&&"is-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:n[7]||(n[7]=_(T((e=>$.value="completed"),["prevent"]),["space"])),onClick:n[8]||(n[8]=e=>$.value="completed")},ce,32)],2),oe])])])]),p("div",de,["all"===g($)?(r(),u("div",re,[p("div",ue,[p("div",pe,[p("div",me,[p("div",ve,[he,p("span",null,w(g(H).length),1),ke])]),p("div",ge,[p("div",fe,[ye,p("span",null,w(g(ee)),1),_e])]),p("div",we,[p("div",be,[Ce,p("span",null,w(g(B)),1),je])]),p("div",xe,[p("div",De,[Te,p("span",null,w(g(Y)),1),Se])])]),g(Ja).length?(r(),u("div",Ae,[(r(!0),u(b,null,C(g(Ja),(e=>(r(),u("div",Ee,[p("div",Ie,[p("div",We,[p("div",Pe,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Oe,8,Ve),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Le,8,$e),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Me,8,Ne),Re,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},ze,8,Ue),p("a",{onClick:l=>J(e.id),role:"menuitem",class:"dropdown-item is-media"},Fe,8,Ke)])),_:2},1024)]),p("div",He,[p("p",null,w(e.description),1)])]),p("div",qe,[e.supplier?(r(),u("div",Je,[Qe,p("div",Ye,[h(m(E,{picture:e.supplier?.avatar,size:"small",color:"primary",initials:e.supplier?.avatar?"":e.supplier?.username.slice(0,2)},null,8,["picture","initials"]),[[N,`${e?.supplier?.username}`,void 0,{rounded:!0,info:!0}]])])])):x("",!0),e.workers?.length?(r(),u("div",Be,[Ge,p("div",Xe,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])])):x("",!0),p("div",Ze,[el,p("p",null,w(e.startDate),1)]),p("div",ll,[al,p("p",null,w(e.endDate),1)]),p("div",sl,[il,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:v((()=>[tl,nl])),_:1}))])])):"active"===g($)?(r(),u("div",cl,[p("div",ol,[g(Ya).length?(r(),u("div",dl,[(r(!0),u(b,null,C(g(Ya),(e=>(r(),u("div",rl,[p("div",ul,[p("div",pl,[p("div",ml,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},hl,8,vl),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},gl,8,kl),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},yl,8,fl),_l,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},bl,8,wl),p("a",{onClick:l=>J(e.id),role:"menuitem",class:"dropdown-item is-media"},jl,8,Cl)])),_:2},1024)]),p("div",xl,[p("p",null,w(e.description),1)])]),p("div",Dl,[p("div",Tl,[Sl,p("div",Al,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),p("div",El,[Il,p("p",null,w(e.startDate),1)]),p("div",Wl,[Pl,p("p",null,w(e.endDate),1)]),p("div",Vl,[Ol,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:v((()=>[$l,Ll])),_:1}))])])):"pending"===g($)?(r(),u("div",Nl,[p("div",Ml,[g(Ba).length?(r(),u("div",Rl,[(r(!0),u(b,null,C(g(Ba),(e=>(r(),u("div",Ul,[p("div",zl,[p("div",Kl,[p("div",Fl,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},ql,8,Hl),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Ql,8,Jl),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Bl,8,Yl),Gl,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Zl,8,Xl),p("a",{onClick:l=>J(e.id),role:"menuitem",class:"dropdown-item is-media"},la,8,ea)])),_:2},1024)]),p("div",aa,[p("p",null,w(e.description),1)])]),p("div",sa,[p("div",ia,[ta,p("div",na,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),p("div",ca,[oa,p("p",null,w(e.startDate),1)]),p("div",da,[ra,p("p",null,w(e.endDate),1)]),p("div",ua,[pa,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:v((()=>[ma,va])),_:1}))])])):"completed"===g($)?(r(),u("div",ha,[p("div",ka,[g(Qa).length?(r(),u("div",ga,[(r(!0),u(b,null,C(g(Qa),(e=>(r(),u("div",fa,[p("div",ya,[p("div",_a,[p("div",wa,[p("h3",null,w(e.title),1),m(S,{icon:"feather:more-vertical",spaced:"",right:""},{content:v((()=>[p("a",{onClick:l=>ne(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ca,8,ba),p("a",{onClick:l=>ne(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},xa,8,ja),p("a",{onClick:l=>ne(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Ta,8,Da),Sa,p("a",{onClick:l=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},Ea,8,Aa),p("a",{onClick:l=>J(e.id),role:"menuitem",class:"dropdown-item is-media"},Wa,8,Ia)])),_:2},1024)]),p("div",Pa,[p("p",null,w(e.description),1)])]),p("div",Va,[p("div",Oa,[$a,p("div",La,[(r(!0),u(b,null,C(e.workers,(e=>h((r(),j(E,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[N,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),p("div",Na,[Ma,p("p",null,w(e.startDate),1)]),p("div",Ra,[Ua,p("p",null,w(e.endDate),1)]),p("div",za,[Ka,p("p",null,w(e.status),1)])])])])))),256))])):(r(),j(I,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:v((()=>[Fa,Ha])),_:1}))])])):x("",!0)])]),g(q).isSweetAlertOpen?(r(),j(P,{key:0,isSweetAlertOpen:g(q).isSweetAlertOpen,title:g(q).title,subtitle:g(q).subtitle,btntext:g(q).btntext,onConfirm:qa,loading:g(U),onCancel:()=>g(q).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):x("",!0),g(z)?(r(),j(L,{key:1,projectID:A.projectID,isOpen:g(z),taskIdSelected:g(F),startDate:g(W),"onUpdate:modalHandler":ie,"onUpdate:OnSuccess":Q},null,8,["projectID","isOpen","taskIdSelected","startDate"])):x("",!0)],64)}}}),[["__scopeId","data-v-13f04d27"]]),Ja={class:"flex-list-wrapper flex-list-v2"},Qa=p("img",{class:"light-image",src:K,alt:""},null,-1),Ya=p("img",{class:"dark-image",src:F,alt:""},null,-1),Ba={key:1,class:"tab-content is-active"},Ga={class:"item-name dark-inverted show-text-200"},Xa={class:"item-meta"},Za={class:"link-text"},es={class:"light-text"},ls={class:"light-text"},as={key:2,class:"tab-content is-active"},ss=p("img",{class:"light-image is-larger",src:O,alt:""},null,-1),is=p("img",{class:"dark-image is-larger",src:$,alt:""},null,-1),ts=t({__name:"ChronicTasksList",props:{tasks:{default:{}}},setup(e){const l=e,s=H,i=n(""),t=n("active"),o={picture:{label:"Task",media:!0,grow:!0},customer:"Start ",industry:"End",status:"Quantity",team:{label:"Unit",cellClass:"h-hidden-tablet-p"},actions:{label:"Cost code",align:"end"}},d={completed:"primary",pending:"warning",active:"info",canceled:"danger"},h=c((()=>{if(i.value){const e=new RegExp(i.value,"i");return s.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return s}));return(e,s)=>{const i=a,n=I("Tippy"),c=R,k=z,f=U;return r(),u("div",null,[p("div",Ja,["active"===g(t)&&0===g(h).length?(r(),j(i,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[Qa,Ya])),_:1})):x("",!0),"active"===g(t)?(r(),u("div",Ba,[l.tasks?(r(),j(f,{key:0,data:g(h),columns:o,rounded:""},{body:v((()=>[m(W,{name:"list",tag:"div",class:"flex-list-inner"},{default:v((()=>[(r(!0),u(b,null,C(l.tasks,(e=>(r(),u("div",{key:e.id,class:"flex-table-item"},[m(c,{column:{media:!0,grow:!0}},{default:v((()=>[p("div",null,[p("span",Ga,w(e.title?e.title:""),1),p("span",Xa,[m(n,{trigger:"click"},{content:v((()=>[P(w(e.description?e.description:""),1)])),default:v((()=>[p("span",Za,w(e.description?.length>40?e.description?.slice(0,40):e.description.length<40?e.description:""),1)])),_:2},1024)])])])),_:2},1024),m(c,null,{default:v((()=>[p("span",es,w(e.startDate?e.startDate:""),1)])),_:2},1024),m(c,null,{default:v((()=>[p("span",ls,w(e.endDate?e.endDate:""),1)])),_:2},1024),m(c,null,{default:v((()=>[m(k,{outlined:"",color:"info",rounded:""},{default:v((()=>[P(w(e.quantity?e.quantity:""),1)])),_:2},1024)])),_:2},1024),m(c,{class:"h-hidden-tablet-p"},{default:v((()=>[m(k,{outlined:"",color:"primary",rounded:""},{default:v((()=>[P(w(e.unit?e.unit:"N/A"),1)])),_:2},1024)])),_:2},1024),m(c,{column:{align:"end"}},{default:v((()=>[m(k,{outlined:"",color:d[e.status],rounded:""},{default:v((()=>[P(w(e.status?e.status:""),1)])),_:2},1032,["color"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):x("",!0)])):"closed"===g(t)?(r(),u("div",as,[m(i,{title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n              start closing off projects, they will be showing up in here."},{image:v((()=>[ss,is])),_:1})])):x("",!0)])])}}}),ns={key:0},cs={key:1},os={class:"list-view-toolbar"},ds=p("div",{class:"tabs-inner"},null,-1),rs={class:"list-view list-view-v2"},us={class:"list-view-inner"},ps={class:"list-view-item"},ms={class:"list-view-item-inner"},vs={class:"meta-left"},hs={class:"info-text"},ks=p("i",{class:"lnir lnir-star-empty","aria-hidden":"true"},null,-1),gs=["innerHTML"],fs=p("div",{class:"meta-right"},null,-1),ys={class:"list-view-inner"},_s=p("img",{class:"light-image",src:Q,alt:""},null,-1),ws=p("img",{class:"dark-image",src:Y,alt:""},null,-1),bs=t({__name:"ChronicTasksView",props:{supplierId:{default:""},projectID:{default:""},workerId:{default:""},userId:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(e,{emit:l}){const s=e,i=n("active"),t=n(""),d=n(!1),_=n([]),j=N(),D=c((()=>{if(t.value){const e=new RegExp(t.value,"i");return _.value.filter((l=>l.title.match(e)||l.description.match(e)))}return _.value}));return o((()=>{(async()=>{try{d.value=!0;const e=await j.get(`/api/task/project-wise-tasks/${s.userId}/`);_.value=e.data,console.log("chronic tasks",e.data),d.value=!1}catch(e){console.log(e)}})()})),(e,l)=>{const s=J,n=V,c=q,o=a,_=ts;return g(d)?(r(),u("div",ns,[m(s)])):(r(),u("div",cs,[p("div",os,[m(c,null,{default:v((()=>[m(n,{icon:"feather:search"},{default:v((()=>[h(p("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>f(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[k,g(t)]])])),_:1})])),_:1}),ds]),(r(!0),u(b,null,C(g(D),(e=>(r(),u("div",{key:e.id,class:"page-content-inner mb-6"},[p("div",rs,[p("div",{id:"active-items-tab",class:y(["tab-content",["active"===g(i)&&"is-active"]])},[p("div",us,[m(W,{name:"list-complete",tag:"div"},{default:v((()=>[p("div",ps,[p("div",ms,[p("div",vs,[p("h3",null,[p("span",hs,[ks,P(w(e.title),1)])]),e.description?(r(),u("div",{key:0,innerHTML:e.description},null,8,gs)):x("",!0),p("span",null,[p("span",null," Timeline: "+w(e.startDate?e.startDate:"N/A")+" to "+w(e.endDate?e.endDate:"N/A"),1)])]),fs])])])),_:2},1024)])],2),p("div",{id:"inactive-items-tab",class:y(["tab-content",["inactive"===g(i)&&"is-active"]])},[p("div",ys,[m(o,{title:"There are no inactive properties.",subtitle:"Looks like there are no inactive properties to display. You can\n                disable and also enable a property from the property settings.",larger:""},{image:v((()=>[_s,ws])),_:1})])],2)]),m(_,{tasks:e.filtered_tasks},null,8,["tasks"])])))),128))]))}}});export{bs as _,qa as a};
