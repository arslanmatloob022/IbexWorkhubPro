import{e,r as l,o as a,A as t,B as o,C as n,E as i,F as s,l as r,j as u,D as d,U as c,V as m,J as p,T as _,N as v,M as f,P as b,Q as y,R as g,s as h,b as k,_ as V,K as x,W as w,I as C,a4 as T,O as P,H as I,G as U}from"./index-67ab4c5c.js";import{_ as M}from"./VModal.vue_vue_type_style_index_0_lang-c0dc0a8e.js";import{_ as j}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-cd0be661.js";import{_ as N}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-be4e3d0a.js";import{_ as O}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-d7737798.js";import{_ as q}from"./VField.vue_vue_type_script_setup_true_lang-c10b4195.js";import{_ as A}from"./VControl-6f918ee4.js";import{_ as D,a as L}from"./search-7-dark-1c30f387.js";import{u as E}from"./useNotyf-3d9d3b2a.js";import{_ as F}from"./VInput.vue_vue_type_script_setup_true_lang-6e7deff6.js";import{_ as H}from"./VTextarea.vue_vue_type_script_setup_true_lang-9de255dc.js";import{_ as R}from"./VCheckbox.vue_vue_type_style_index_0_lang-e7255f7c.js";import{_ as S,a as Z}from"./VOption.vue_vue_type_style_index_0_lang-fa5d0d1a.js";import{u as W}from"./useAPI-af66b40f.js";import{a as G}from"./useSupportElement-4983785e.js";import{u as B}from"./userSession-6cdea213.js";import{_ as Q}from"./VCollapse.vue_vue_type_style_index_0_lang-f0623622.js";import{_ as z}from"./VRadio.vue_vue_type_style_index_0_lang-43f88454.js";const K=e=>(b("data-v-6277dcd0"),e=e(),y(),e),J={class:"datatable-wrapper"},$={class:"table-container"},X={class:"table datatable-table is-fullwidth",id:"external-events"},Y=K((()=>d("thead",null,[d("th",null,"Items"),d("th",null,"Description"),d("th",null,"Quantity"),d("th",null,"Unit"),d("th",null,"Unit Cost"),d("th",null,"Markup"),d("th",null,"Margin"),d("th",null,"Client Price"),d("th",null,"Profit"),d("th",null,"Internal Notes")],-1))),ee=["data-event","onDragstart","onDrop"],le={class:"is-flex"},ae=K((()=>d("i",{class:"lnir lnir-sort",style:{cursor:"grab"},"aria-hidden":"true"},null,-1))),te={class:"flex-media"},oe={class:"meta"},ne=K((()=>d("img",{class:"light-image",src:D,alt:""},null,-1))),ie=K((()=>d("img",{class:"dark-image",src:L,alt:""},null,-1))),se=g(e({__name:"CostItemsTable",setup(e){E();const b=l(42);l("");const y=l([]),g=[{value:"Items",label:"Items"},{value:"Description",label:"Description"},{value:"Quantity",label:"Quantity"},{value:"Unit",label:"Unit"},{value:"UnitCost",label:"Unit Cost"},{value:"Markup",label:"Markup"},{value:"Margin",label:"Margin"},{value:"ClientPrice",label:"Client Price"},{value:"Profit",label:"Profit"},{value:"Internal Notes",label:"Internal Notes"}],h=l([{id:"12345",title:"Framing Labor",cost_code:"030500",cost_type:"Labor",unit_cost:50,quantity:100,unit:"hours",total_cost:5e3,markup:10,markup_type:"percentage",markup_value:500,tax_rate:7.5,tax_value:375,grand_total:5875,description:"Labor costs for framing the structure.",internal_notes:"Ensure all workers have completed safety training.",created_by:"user123",created_date:"2024-12-22T14:45:00Z",updated_by:"user123",updated_date:"2024-12-22T15:00:00Z",approved_by:"manager456",approval_date:"2024-12-23T10:00:00Z",status:"approved",category:"Construction",tags:["labor","framing","construction"],attachments:[{file_name:"worker_safety_checklist.pdf",file_url:"https://example.com/files/worker_safety_checklist.pdf",uploaded_date:"2024-12-21T12:00:00Z"}],visibility:{internal_only:!1,shared_with_client:!0},dependencies:[{dependency_id:"56789",type:"preceding_task",title:"Foundation Completed"}],front_end_elements:{highlighted:!0,background_color:"#f8f9fa",font_color:"#000000",display_order:1,editable:!0},back_end_elements:{database_table:"cost_items",api_endpoint:"/api/cost-items",validation_rules:{unit_cost:"numeric|min:0",quantity:"integer|min:1",markup:"numeric|min:0|max:100",tax_rate:"numeric|min:0|max:100"}}},{id:"12346",title:"Foundation Material",cost_code:"010100",cost_type:"Material",unit_cost:75,quantity:200,unit:"cubic meters",total_cost:15e3,markup:5,markup_type:"percentage",markup_value:750,tax_rate:7.5,tax_value:1125,grand_total:16875,description:"Materials for building the foundation.",internal_notes:"Order from preferred supplier for better pricing.",created_by:"user124",created_date:"2024-12-22T10:00:00Z",updated_by:"user124",updated_date:"2024-12-22T11:00:00Z",approved_by:"manager457",approval_date:"2024-12-22T15:00:00Z",status:"approved",category:"Materials",tags:["foundation","materials","construction"],attachments:[{file_name:"foundation_blueprint.pdf",file_url:"https://example.com/files/foundation_blueprint.pdf",uploaded_date:"2024-12-21T08:00:00Z"}],visibility:{internal_only:!1,shared_with_client:!0},dependencies:[],front_end_elements:{highlighted:!1,background_color:"#ffffff",font_color:"#000000",display_order:2,editable:!0},back_end_elements:{database_table:"cost_items",api_endpoint:"/api/cost-items",validation_rules:{unit_cost:"numeric|min:0",quantity:"integer|min:1",markup:"numeric|min:0|max:100",tax_rate:"numeric|min:0|max:100"}}},{id:"12347",title:"Electrical Wiring",cost_code:"040100",cost_type:"Material",unit_cost:20,quantity:500,unit:"meters",total_cost:1e4,markup:15,markup_type:"percentage",markup_value:1500,tax_rate:7.5,tax_value:825,grand_total:12325,description:"Electrical wiring and related materials.",internal_notes:"Include wiring for backup generator.",created_by:"user125",created_date:"2024-12-22T12:00:00Z",updated_by:"user125",updated_date:"2024-12-22T13:00:00Z",approved_by:"manager458",approval_date:"2024-12-22T18:00:00Z",status:"pending",category:"Electrical",tags:["wiring","electrical","materials"],attachments:[],visibility:{internal_only:!1,shared_with_client:!1},dependencies:[],front_end_elements:{highlighted:!1,background_color:"#f0f0f0",font_color:"#000000",display_order:3,editable:!0},back_end_elements:{database_table:"cost_items",api_endpoint:"/api/cost-items",validation_rules:{unit_cost:"numeric|min:0",quantity:"integer|min:1",markup:"numeric|min:0|max:100",tax_rate:"numeric|min:0|max:100"}}},{id:"12348",title:"Painting Services",cost_code:"060200",cost_type:"Labor",unit_cost:40,quantity:150,unit:"hours",total_cost:6e3,markup:12,markup_type:"percentage",markup_value:720,tax_rate:7.5,tax_value:504,grand_total:7224,description:"Labor costs for painting the interiors.",internal_notes:"Use eco-friendly paints.",created_by:"user126",created_date:"2024-12-22T09:00:00Z",updated_by:"user126",updated_date:"2024-12-22T10:00:00Z",approved_by:"manager459",approval_date:"2024-12-22T14:00:00Z",status:"approved",category:"Painting",tags:["painting","labor","interior"],attachments:[],visibility:{internal_only:!1,shared_with_client:!0},dependencies:[],front_end_elements:{highlighted:!1,background_color:"#ffffff",font_color:"#000000",display_order:4,editable:!0},back_end_elements:{database_table:"cost_items",api_endpoint:"/api/cost-items",validation_rules:{unit_cost:"numeric|min:0",quantity:"integer|min:1",markup:"numeric|min:0|max:100",tax_rate:"numeric|min:0|max:100"}}}]),k=l(null),V=e=>{e.preventDefault()};return a((()=>{})),(e,l)=>{const a=t("Multiselect"),x=A,w=q,C=O,T=N,P=j;return o(),n("div",null,[i(w,{label:"Choose what to show to lead"},{default:s((({id:e})=>[i(x,null,{default:s((()=>[i(a,{modelValue:r(y),"onUpdate:modelValue":l[0]||(l[0]=e=>u(y)?y.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:g,placeholder:"Add tags"},null,8,["modelValue","attrs"])])),_:2},1024)])),_:1}),d("div",J,[d("div",$,[d("table",X,[Y,d("tbody",null,[(o(!0),n(c,null,m(r(h),((e,l)=>(o(),n("tr",{class:"events",key:e.id,"data-event":JSON.stringify(e),draggable:"true",onDragstart:e=>(e=>{k.value=e})(l),onDrop:()=>(e=>{if(null!==k.value&&k.value!==e){const l=h.value[k.value];h.value.splice(k.value,1),h.value.splice(e,0,l)}k.value=null})(l),onDragover:V},[d("td",null,[d("div",le,[ae,p(" "+_(e.id),1)])]),d("td",null,[d("div",te,[d("div",oe,[d("h3",null,_(e.title),1),d("span",null,_(e.approved_by),1)])])]),d("td",null,_(e.category),1),d("td",null,_(e.cost_code),1),d("td",null,_(e.cost_type),1),d("td",null,_(e.grand_total),1),d("td",null,_(e.markup),1),d("td",null,_(e.markup_value),1),d("td",null,_(e.internal_notes),1),d("td",null,[i(C)])],40,ee)))),128))])])]),0===r(h).length?(o(),v(T,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the search terms\n            you've entered. Please try different search terms or criteria.",larger:""},{image:s((()=>[ne,ie])),_:1})):f("",!0)]),r(h).length>5?(o(),v(P,{key:0,"current-page":r(b),"onUpdate:currentPage":l[1]||(l[1]=e=>u(b)?b.value=e:null),"item-per-page":10,"total-items":873,"max-links-displayed":7,"no-router":"",class:"mt-4"},null,8,["current-page"])):f("",!0)])}}}),[["__scopeId","data-v-6277dcd0"]]),re={class:"modal-form columns is-multiline"},ue={class:"columns is-multiline"},de={class:"field column is-12 mb-0"},ce=d("label",null,"Title: ",-1),me={class:"control"},pe={class:"field column is-6"},_e=d("label",{for:""},"Cost Type",-1),ve={class:"field column is-6"},fe=d("label",{for:""},"Catalog",-1),be={class:"field column is-6"},ye=d("label",{for:""},"Mark As",-1),ge={class:"field column is-6"},he=d("label",{for:""},"Cost Code *",-1),ke={class:"field column is-6"},Ve=d("label",{for:""},"Group",-1),xe={class:"field column is-12 mb-0"},we=d("label",{for:"",class:"label"},"Description",-1),Ce={class:"field column is-12 mb-0"},Te=d("label",{for:"",class:"label"},"Internal Notes",-1),Pe={class:"columns is-multiline"},Ie={class:"field column is-6"},Ue=d("label",null,"Unit Cost",-1),Me={class:"field column is-6"},je=d("label",null,"Quantity",-1),Ne={class:"field column is-6"},Oe=d("label",null,"Unit",-1),qe={class:"field column is-6"},Ae=d("label",null,"Builder Cost",-1),De={class:"field column is-6"},Le=d("label",null,"Markup",-1),Ee={class:"field column is-6"},Fe=d("label",null,"Client Price",-1),He={class:"field column is-6"},Re=d("label",null,"Margin",-1),Se=e({__name:"EstimateCostItemModal",props:{costItemModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const u=e,b=h();B();const y=E(),g=W(),I=l(!1);l({}),l(!1),l([]),l([]),l([]);const U=l({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:"",includeInCatalog:!1,markAs:"",group:""}),j=l([{value:"labour",label:"Labour"},{value:"material",label:"Material"},{value:"equipment",label:"Equipment"},{value:"subcontractor",label:"Subcontractor"},{value:"other",label:"Others"}]),N=l([{value:"bid",label:"Bid"},{value:"allowance",label:"Allowance"}]);l([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const O=async()=>{try{I.value=!0;const e=G(U.value,["profileImageURL"]);await g.post("/v3/api/worker/",e);D(),y.dismissAll(),y.success("New worker added, New Worker")}catch(e){y.error(` ${e}, New Worker`)}finally{I.value=!1}},D=()=>{t("update:modalHandler",!1)},L=k((()=>V((()=>import("./ckeditor-813352b3.js").then((e=>e.c))),["assets/ckeditor-813352b3.js","assets/index-67ab4c5c.js","assets/index-9c693d35.css","assets/vue.runtime.esm-bundler-b114774f.js"]).then((e=>e.default.component)))),Q={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return a((async()=>{b.value=await V((()=>import("./ckeditor-773f50dd.js").then((e=>e.c))),["assets/ckeditor-773f50dd.js","assets/index-67ab4c5c.js","assets/index-9c693d35.css"]).then((e=>e.default))})),(e,l)=>{const a=S,t=Z,y=A,g=q,h=R,k=H,V=T,E=F,W=P,G=M;return o(),v(G,{is:"form",open:u.costItemModal,title:"Cost Item ",size:"xl",actions:"right",onSubmit:C(O,["prevent"]),onClose:D},{content:s((()=>[d("div",re,[i(V,{class:"column is-12"},{default:s((()=>[d("div",ue,[d("div",de,[ce,d("div",me,[x(d("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>r(U).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[w,r(U).title]])])]),d("div",pe,[_e,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(t,{modelValue:r(U).costType,"onUpdate:modelValue":l[1]||(l[1]=e=>r(U).costType=e)},{default:s((()=>[(o(!0),n(c,null,m(r(j),((e,l)=>(o(),v(a,{value:e.value},{default:s((()=>[p(_(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),d("div",ve,[fe,i(g,{class:"is-flex"},{default:s((()=>[i(y,{raw:"",subcontrol:""},{default:s((()=>[i(h,{modelValue:r(U).includeInCatalog,"onUpdate:modelValue":l[2]||(l[2]=e=>r(U).includeInCatalog=e),label:"Include item in Catalog"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",be,[ye,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(t,{modelValue:r(U).markAs,"onUpdate:modelValue":l[3]||(l[3]=e=>r(U).markAs=e)},{default:s((()=>[(o(!0),n(c,null,m(r(N),((e,l)=>(o(),v(a,{value:e.value},{default:s((()=>[p(_(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),d("div",ge,[he,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(t,{modelValue:r(U).costType,"onUpdate:modelValue":l[4]||(l[4]=e=>r(U).costType=e)},{default:s((()=>[(o(!0),n(c,null,m(r(j),((e,l)=>(o(),v(a,{value:e.value},{default:s((()=>[p(_(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),d("div",ke,[Ve,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(t,{modelValue:r(U).costType,"onUpdate:modelValue":l[5]||(l[5]=e=>r(U).costType=e)},{default:s((()=>[(o(!0),n(c,null,m(r(j),((e,l)=>(o(),v(a,{value:e.value},{default:s((()=>[p(_(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1})]),d("div",xe,[we,r(b)?(o(),v(r(L),{key:0,modelValue:r(U).description,"onUpdate:modelValue":l[6]||(l[6]=e=>r(U).description=e),editor:r(b),config:Q},null,8,["modelValue","editor"])):f("",!0)]),d("div",Ce,[Te,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(k,{modelValue:r(U).internalNotes,"onUpdate:modelValue":l[7]||(l[7]=e=>r(U).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1}),i(V,{class:"column is-12 mt-3"},{default:s((()=>[d("div",Pe,[d("div",Ie,[Ue,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).unitCost,"onUpdate:modelValue":l[8]||(l[8]=e=>r(U).unitCost=e),type:"number",name:"unitCost",placeholder:"Unit cost"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",Me,[je,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).unitCost,"onUpdate:modelValue":l[9]||(l[9]=e=>r(U).unitCost=e),type:"number",name:"quantity",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",Ne,[Oe,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).unit,"onUpdate:modelValue":l[10]||(l[10]=e=>r(U).unit=e),type:"number",name:"unit",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",qe,[Ae,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).unit,"onUpdate:modelValue":l[11]||(l[11]=e=>r(U).unit=e),type:"number",name:"builderCost",placeholder:"Builder cost"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",De,[Le,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).markup,"onUpdate:modelValue":l[12]||(l[12]=e=>r(U).markup=e),type:"number",name:"markup",placeholder:"Markup"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",Ee,[Fe,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).clientPrice,"onUpdate:modelValue":l[13]||(l[13]=e=>r(U).clientPrice=e),type:"number",name:"markup",placeholder:"Client Price"},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",He,[Re,i(g,null,{default:s((()=>[i(y,null,{default:s((()=>[i(E,{modelValue:r(U).margin,"onUpdate:modelValue":l[14]||(l[14]=e=>r(U).margin=e),type:"number",name:"markup",placeholder:"Margin"},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1})])])),action:s((()=>[i(W,{loading:r(I),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:s((()=>[p("Add Item")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Ze={class:"columns is-multiline"},We={class:"column is-12 is-flex space-between"},Ge=d("div",null,[d("h1",{class:"title is-4"},"Proposal Worksheet")],-1),Be={class:"tabs-wrapper column is-12 m-0"},Qe={class:"tabs-inner mt-4"},ze={class:"tabs is-boxed"},Ke=[d("span",null,"Worksheet",-1)],Je=[d("span",null,"Format",-1)],$e=[d("span",null,"Preview",-1)],Xe={key:0,class:"column is-12"},Ye={key:1,class:"column is-12"},el=d("div",{class:"column is-12",style:{"text-align":"center"}},[d("h1",{class:"title is-4"},"Connect your clients to their projects"),d("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),ll={key:2},al=[d("p",null,"preview",-1)],tl=e({__name:"WorksheetItems",props:{leadProposalModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const u=h();B(),E(),W(),l(!1),l({}),l(!1),l([]),l([]),l([]),l({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""}),l({title:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[]}),l([{value:"all",label:"All"},{value:"contact",label:"Contact Form"},{value:"google",label:"Google"},{value:"referral",label:"Referral"}]),l([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const c=l("worksheet");k((()=>V((()=>import("./ckeditor-813352b3.js").then((e=>e.c))),["assets/ckeditor-813352b3.js","assets/index-67ab4c5c.js","assets/index-9c693d35.css","assets/vue.runtime.esm-bundler-b114774f.js"]).then((e=>e.default.component))));const m=l(!1);return a((async()=>{u.value=await V((()=>import("./ckeditor-773f50dd.js").then((e=>e.c))),["assets/ckeditor-773f50dd.js","assets/index-67ab4c5c.js","assets/index-9c693d35.css"]).then((e=>e.default))})),(e,l)=>{const a=P,t=se,u=T,_=Se;return o(),n("div",null,[d("div",Ze,[d("div",We,[Ge,d("div",null,[i(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"info",onClick:l[0]||(l[0]=e=>m.value=!r(m))},{default:s((()=>[p("Import")])),_:1}),i(a,{size:"small",light:"",outlined:"",class:"mr-2",color:"primary",onClick:l[1]||(l[1]=e=>m.value=!r(m))},{default:s((()=>[p("Add From")])),_:1}),i(a,{size:"small",light:"",outlined:"",color:"warning",onClick:l[2]||(l[2]=e=>m.value=!r(m))},{default:s((()=>[p("Add Item")])),_:1})])]),d("div",Be,[d("div",Qe,[d("div",ze,[d("ul",null,[d("li",{class:I(["worksheet"===r(c)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onKeydown:l[3]||(l[3]=U(C((e=>c.value="worksheet"),["prevent"]),["space"])),onClick:l[4]||(l[4]=e=>c.value="worksheet")},Ke,32)],2),d("li",{class:I(["format"===r(c)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onKeydown:l[5]||(l[5]=U(C((e=>c.value="format"),["prevent"]),["space"])),onClick:l[6]||(l[6]=e=>c.value="format")},Je,32)],2),d("li",{class:I(["preview"===r(c)?"is-active":"not-active"])},[d("a",{tabindex:"0",role:"button",onKeydown:l[7]||(l[7]=U(C((e=>c.value="preview"),["prevent"]),["space"])),onClick:l[8]||(l[8]=e=>c.value="preview")},$e,32)],2)])])])]),"worksheet"===r(c)?(o(),n("div",Xe,[i(t)])):f("",!0),"format"===r(c)?(o(),n("div",Ye,[i(u,{class:"columns is-multiline"},{default:s((()=>[el,i(t)])),_:1})])):f("",!0),"preview"===r(c)?(o(),n("div",ll,al)):f("",!0)]),r(m)?(o(),v(_,{key:0,costItemModal:r(m),"onUpdate:modalHandler":l[9]||(l[9]=e=>m.value=!1)},null,8,["costItemModal"])):f("",!0)])}}}),ol={class:"modal-form columns is-multiline"},nl={class:"field column is-6 mb-0"},il=d("label",null,"Title: *",-1),sl={class:"control"},rl={class:"column is-6"},ul={class:"body-inner-content"},dl={class:"field columns is-multiline mb-0"},cl={class:"field column is-12 mb-0"},ml=d("label",{for:"",class:"label"},"Internal Notes",-1),pl={class:"field column is-12 mb-0"},_l=d("label",{for:"",class:"label"},"Introductory Text",-1),vl={class:"field column is-12 mb-0"},fl=d("label",{for:"",class:"label"},"Closing Text",-1),bl={key:0,class:"column is-12"},yl={key:1,class:"column is-12"},gl=d("div",{class:"column is-12",style:{"text-align":"center"}},[d("h1",{class:"title is-4"},"Connect your clients to their projects"),d("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),hl={key:2},kl=[d("p",null,"preview",-1)],Vl=e({__name:"LeadProposalModal",props:{leadProposalModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:t}){const u=e,c=h();B();const m=E(),_=W(),b=l(!1);l({}),l(!1),l([]),l([]),l([]);const y=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];l({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const g=l({title:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});l([{value:"all",label:"All"},{value:"contact",label:"Contact Form"},{value:"google",label:"Google"},{value:"referral",label:"Referral"}]),l([{value:"open",label:"Open"},{value:"inProgress",label:"In Progress"},{value:"onHold",label:"On Hold"},{value:"pending",label:"Pending"},{value:"lost",label:"Lost"},{value:"sold",label:"sold"},{value:"noOpportunity",label:"No Opportunity"}]);const I=async()=>{try{b.value=!0;const e=G(g.value,["profileImageURL"]);await _.post("/v3/api/worker/",e);U(),m.dismissAll(),m.success("New worker added, New Worker")}catch(e){m.error(` ${e}, New Worker`)}finally{b.value=!1}},U=()=>{t("update:modalHandler",!1)},j=l("worksheet"),N=k((()=>V((()=>import("./ckeditor-813352b3.js").then((e=>e.c))),["assets/ckeditor-813352b3.js","assets/index-67ab4c5c.js","assets/index-9c693d35.css","assets/vue.runtime.esm-bundler-b114774f.js"]).then((e=>e.default.component)))),O={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return a((async()=>{c.value=await V((()=>import("./ckeditor-773f50dd.js").then((e=>e.c))),["assets/ckeditor-773f50dd.js","assets/index-67ab4c5c.js","assets/index-9c693d35.css"]).then((e=>e.default))})),(e,l)=>{const a=z,t=A,m=q,_=H,h=Q,k=tl,V=se,D=T,L=P,E=M;return o(),v(E,{is:"form",open:u.leadProposalModal,title:"Lead Proposal",size:"xl",actions:"right",onSubmit:C(I,["prevent"]),onClose:U},{content:s((()=>[d("div",ol,[d("div",nl,[il,d("div",sl,[x(d("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>r(g).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[w,r(g).title]])])]),d("div",rl,[i(m,{class:"m-0 p-0",label:"Type"},{default:s((()=>[i(t,null,{default:s((()=>[i(a,{modelValue:r(g).type,"onUpdate:modelValue":l[1]||(l[1]=e=>r(g).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),i(a,{modelValue:r(g).type,"onUpdate:modelValue":l[2]||(l[2]=e=>r(g).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),i(a,{modelValue:r(g).type,"onUpdate:modelValue":l[3]||(l[3]=e=>r(g).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),i(h,{items:y,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":s((e=>[d("div",ul,[d("div",dl,[d("div",cl,[ml,i(m,null,{default:s((()=>[i(t,null,{default:s((()=>[i(_,{modelValue:r(g).internalNotes,"onUpdate:modelValue":l[4]||(l[4]=e=>r(g).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),d("div",pl,[_l,r(c)?(o(),v(r(N),{key:0,modelValue:r(g).introductoryText,"onUpdate:modelValue":l[5]||(l[5]=e=>r(g).introductoryText=e),editor:r(c),config:O},null,8,["modelValue","editor"])):f("",!0)]),d("div",vl,[fl,r(c)?(o(),v(r(N),{key:0,modelValue:r(g).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>r(g).introductoryText=e),editor:r(c),config:O},null,8,["modelValue","editor"])):f("",!0)])])])])),_:1}),"worksheet"===r(j)?(o(),n("div",bl,[i(k)])):f("",!0),"format"===r(j)?(o(),n("div",yl,[i(D,{class:"columns is-multiline m-0"},{default:s((()=>[gl,i(V)])),_:1})])):f("",!0),"preview"===r(j)?(o(),n("div",hl,kl)):f("",!0)])])),action:s((()=>[i(L,{loading:r(b),type:"submit",color:"primary",icon:"fas fa-plus",raised:""},{default:s((()=>[p("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}});export{Vl as _};
