import{_ as e}from"./AddJobsModal-c3f59bec.js";import{_ as a}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-19353aec.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{e as l,L as s,r as n,Z as i,o,v as r,x as c,A as d,l as u,F as m,z as p,O as g,y as f,B as v,H as y,P as _,Q as h,j as k,C as b,a3 as x,V as I,W as w,J as C,M as j,aR as S,_ as V,N as A,G as P,I as R,ad as z,t as M,w as T,K as J}from"./index-a3511ab8.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-ee2cd179.js";import{_ as L}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{_ as U,a as E}from"./search-4-dark-2b5b440c.js";import{_ as N,c as $}from"./VFlexTable.vue_vue_type_style_index_0_lang-ab11cfa6.js";import{_ as D}from"./VDropdown.vue_vue_type_style_index_0_lang-dab44eb0.js";import{_ as K}from"./VAvatarStack.vue_vue_type_script_setup_true_lang-863f7240.js";import{_ as F}from"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import{_ as O}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-203bc318.js";import{u as B}from"./useAPI-2f913358.js";import{u as Z}from"./company-ca9a809c.js";import{u as H}from"./useNotyf-bee6672a.js";import{_ as Y}from"./VPageContent-10843df6.js";import{_ as q,a as G,b as Q,c as X,d as ee,e as ae,f as te,g as le,h as se}from"./dragula-18dd3962.js";import{_ as ne}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-ab5188b6.js";import{_ as ie}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-66b5c7cb.js";import{_ as oe}from"./VIconBox.vue_vue_type_style_index_0_lang-51da0b67.js";import{_ as re}from"./VInput.vue_vue_type_script_setup_true_lang-17074c81.js";import{_ as ce}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as de}from"./VControl-f6dba4dd.js";import{u as ue}from"./viewWrapper-a34f2b5b.js";import"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import"./VCollapse.vue_vue_type_style_index_0_lang-fbcf2e46.js";import"./VIcon.vue_vue_type_script_setup_true_lang-639bef4b.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-e1d809a1.js";import"./useVFieldContext-f66aca7a.js";import"./VSwitchSegment.vue_vue_type_style_index_0_lang-17e4fc05.js";import"./VLabel.vue_vue_type_script_setup_true_lang-dfa6e2cd.js";import"./VFlex.vue_vue_type_style_index_0_lang-2a70d1e0.js";import"./useDropdown-4068e34e.js";import"./VPlaceloadWrap-71c29bf4.js";import"./userSession-1e35e5f3.js";import"./useSupportElement-ec851bb5.js";import"./notyf-bdcd12d6.js";import"./useThemeColors-9cb1eefd.js";const me=e=>(I("data-v-8c7edbd9"),e=e(),w(),e),pe={class:"page-content-inner"},ge={class:"flex-list-wrapper flex-list-v1"},fe=me((()=>d("img",{class:"light-image",src:U,alt:""},null,-1))),ve=me((()=>d("img",{class:"dark-image",src:E,alt:""},null,-1))),ye={class:"row mb-3"},_e={class:"columns is-multiline"},he={class:"column is-12 is-flex"},ke={class:"cu-card-container"},be=["onClick"],xe={style:{display:"flex","flex-direction":"column","justify-content":"space-between"}},Ie={class:"manager-div"},we={class:"user-details content cu-pointer"},Ce={class:"title mb-1"},je={class:"is-small-bold"},Se={class:"manager-div mt-3 mb-2"},Ve=["onClick","src"],Ae={class:"user-details content cu-pointer"},Pe=["onClick"],Re={class:"title mb-0"},ze={key:0,class:"mt-2",style:{"background-color":"#05d69e09",padding:"2px","border-radius":"3px"}},Me=me((()=>d("p",{class:""},[d("span",{class:"light-text"}," Site: ")],-1))),Te={class:"mb-0"},Je={class:"title",style:{"font-size":"12px"}},We={class:"is-small-bold"},Le={class:"is-small-bold"},Ue={class:"cus-light-text"},Ee={class:"worker-div mt-4"},Ne=me((()=>d("h1",null,"Assigned Workers:",-1))),$e=C(l({__name:"CardsView",props:{tasks:{type:Array,default:[]},loading:{type:Boolean,default:!1}},setup(e){const l=e,I=s(),w=n(1),C=n([]),j=n("created"),S=e=>{switch(e){case"waitingRAMS":return"#f0d9f0";case"readyToStart":return"#dce4fb";case"started":return"#fcefe8";case"completed":return"#c1efd2";default:return"#f3f1f1"}},V=e=>{I.push({name:"/sidebar/company/jobs/[id]",params:{id:e}})},A=e=>{j.value=e,C.value=l.tasks.filter((e=>e.state==j.value))},P=i((()=>C.value));return o((()=>{C.value=l.tasks})),(e,s)=>{const n=L,i=W,o=b,I=t,R=a;return r(),c("div",null,[d("div",pe,[d("div",ge,[u(C).length?g("",!0):(r(),m(n,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:p((()=>[fe,ve])),_:1})),d("div",null,[e.$props.loading?(r(),m(i,{key:0})):g("",!0),d("div",ye,[d("div",_e,[d("div",he,[f(o,{onClick:s[0]||(s[0]=e=>A("created")),class:"ml-4 cus-tag-button",rounded:"",color:"created"==u(j)?"dark":"white",elevated:""},{default:p((()=>[v("New Jobs ("+y(l.tasks.filter((e=>"created"===e.state)).length)+") ",1)])),_:1},8,["color"]),f(o,{onClick:s[1]||(s[1]=e=>A("readyToStart")),class:"ml-2 cus-tag-button",rounded:"",color:"readyToStart"==u(j)?"dark":"white"},{default:p((()=>[v("Ready To Start ("+y(l.tasks.filter((e=>"readyToStart"===e.state)).length)+") ",1)])),_:1},8,["color"]),f(o,{onClick:s[2]||(s[2]=e=>A("started")),class:"ml-2 cus-tag-button",color:"started"==u(j)?"dark":"white",rounded:""},{default:p((()=>[v("In Progress ("+y(l.tasks.filter((e=>"started"===e.state)).length)+") ",1)])),_:1},8,["color"]),f(o,{onClick:s[3]||(s[3]=e=>A("waitingRAMS")),class:"ml-2 cus-tag-button",rounded:"",color:"waitingRAMS"==u(j)?"dark":"white"},{default:p((()=>[v("Pending Checks ("+y(l.tasks.filter((e=>"waitingRAMS"===e.state)).length)+") ",1)])),_:1},8,["color"]),f(o,{onClick:s[4]||(s[4]=e=>A("completed")),class:"ml-2 cus-tag-button",color:"completed"==u(j)?"dark":"white",rounded:""},{default:p((()=>[v("Completed Job ("+y(l.tasks.filter((e=>"completed"===e.state)).length)+") ",1)])),_:1},8,["color"])])])]),d("section",null,[d("div",ke,[(r(!0),c(_,null,h(u(P),(a=>(r(),c("div",{style:x([{"min-height":"18rem"},{backgroundImage:`linear-gradient(-175deg, white 60%, ${S(a.state)}90)`}]),class:"cus-card",key:a.id},[d("i",{onClick:e=>V(a.id),class:"fas fa-external-link-square-alt expand-icon","aria-hidden":"true"},null,8,be),d("div",xe,[d("div",null,[d("div",Ie,[d("div",we,[d("h3",null,y(a&&a.title?a.title:"-----"),1),d("p",Ce,[v(" Id: "),d("span",je,y(a&&a.externalId?a.externalId:"-----"),1)])])]),d("div",Se,[d("img",{class:"user-image cu-pointer",onClick:()=>{V(a.id)},src:a.managerInfo&&a.managerInfo.profileImage?a.managerInfo.profileImage:"/images/avatars/placeholder.jpg",alt:"User 1"},null,8,Ve),d("div",Ae,[d("h3",{onClick:()=>{e.$router.push(`/sidebar/company/jobs/${a.id}`)}},y(a.managerInfo&&a.managerInfo.first_name?a.managerInfo.first_name:"-----")+" "+y(a.managerInfo&&a.managerInfo.last_name?a.managerInfo.last_name:""),9,Pe),d("p",Re,y(a.managerInfo&&a.managerInfo.email?a.managerInfo.email:"-----"),1)])])]),a.siteInfo?(r(),c("div",ze,[Me,d("h3",Te,y(a?.siteInfo?.name),1),d("p",Je,[v(" Incharge : "),d("span",We,y(a.siteInfo&&a.siteInfo.inchargeName?a.siteInfo.inchargeName:""),1)]),d("p",Le,y(a.siteInfo&&a.siteInfo.postcode?a.siteInfo.postcode:"")+" ("+y(a.siteInfo&&a.siteInfo.city?a.siteInfo.city:"")+") ",1),d("p",Ue,y(a.siteInfo&&a.siteInfo.address?a.siteInfo.address:""),1)])):g("",!0),d("div",Ee,[Ne,d("div",null,[(r(!0),c(_,null,h(a.assignedWorkers,(e=>(r(),m(I,{key:e.id,size:"small",picture:e&&e.profileImageURL?e.profileImageURL:""},null,8,["picture"])))),128))])])])],4)))),128))])])]),u(C).length>5?(r(),m(R,{key:1,"current-page":u(w),"onUpdate:currentPage":s[5]||(s[5]=e=>k(w)?w.value=e:null),"item-per-page":10,"total-items":u(C).length,"max-links-displayed":7,"no-router":""},null,8,["current-page","total-items"])):g("",!0)])])])}}}),[["__scopeId","data-v-8c7edbd9"]]),De=e=>(I("data-v-1bf473a9"),e=e(),w(),e),Ke={class:"page-content-inner"},Fe={class:"flex-list-wrapper flex-list-v1"},Oe=De((()=>d("img",{class:"light-image",src:U,alt:""},null,-1))),Be=De((()=>d("img",{class:"dark-image",src:E,alt:""},null,-1))),Ze={class:"item-name dark-inverted"},He={class:"item-meta"},Ye={class:"item-name dark-inverted"},qe={class:"item-meta"},Ge={class:"light-text"},Qe=["onClick"],Xe=[De((()=>d("div",{class:"icon"},[d("i",{class:"lnil lnil-tab","aria-hidden":"true"})],-1))),De((()=>d("div",{class:"meta"},[d("span",null,"RAMS"),d("span",null,"Manage RAMS")],-1)))],ea=["onClick"],aa=[De((()=>d("div",{class:"icon"},[d("i",{class:"lnil lnil-tab","aria-hidden":"true"})],-1))),De((()=>d("div",{class:"meta"},[d("span",null,"CPP"),d("span",null,"Manage CPP")],-1)))],ta=["onClick"],la=[De((()=>d("div",{class:"icon"},[d("i",{"aria-hidden":"true",class:"lnil lnil-bubble"})],-1))),De((()=>d("div",{class:"meta"},[d("span",null,"Edit"),d("span",null,"Edit Job")],-1)))],sa=De((()=>d("hr",{class:"dropdown-divider"},null,-1))),na=De((()=>d("a",{role:"menuitem",href:"#",class:"dropdown-item is-media"},[d("div",{class:"icon"},[d("i",{class:"lnir lnir-archive","aria-hidden":"true"})]),d("div",{class:"meta"},[d("span",null,"Delete"),d("span",null,"Delete job")])],-1))),ia=C(l({__name:"JobsView",props:{tasks:{}},setup(e){const l=e;Z(),j(),H(),B();const o=n(!1),b=s(),x=n(!1),I=n(0),w=n(1);n("");const C=n([]),V=n(3);n([]);const A={title:{label:"Job",grow:!0},manager:{label:"Manager",grow:!0},externalID:"External ID",isWorkWithContractor:"Type",type:"Status",status:"workers",actions:{label:"Actions",align:"end"}};n([{id:1,title:"job title",description:"desc goes here",externalId:"extr-123",state:"contractor",createdAt:"2024-05-01T09:45:53.627773Z",updatedAt:"2024-05-01T09:45:53.627796Z",manager:null}]);const P=e=>{b.push({name:"/sidebar/company/jobs/[id]",params:{id:e}})},R=e=>{switch(e){case"created":return"Created";case"started":return"In Progress";case"waitingRAMS":return"Pending for Checks";case"readyToStart":return"Ready to Start";case"completed":return"Job Completed"}},z=e=>{switch(e){case"created":return"secondary";case"started":return"info";case"waitingRAMS":return"warning";case"readyToStart":return"success";case"completed":return"primary"}},M=i((()=>(C.value=l.tasks,C.value)));return(e,l)=>{const s=L,n=O,i=$,b=t,j=F,T=K,J=D,W=N,U=a;return r(),c("div",null,[d("div",Ke,[d("div",Fe,[u(M).length?g("",!0):(r(),m(s,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:p((()=>[Oe,Be])),_:1})),u(o)?(r(),m(n,{key:1})):g("",!0),u(M).length?(r(),m(W,{key:2,data:u(M),columns:A,compact:""},{body:p((()=>[f(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:p((()=>[(r(!0),c(_,null,h(u(M),(e=>(r(),c("div",{key:e.id,class:"flex-table-item"},[f(i,{column:{media:!0,grow:!0},"data-th":"Label",class:"cu-pointer",onClick:a=>P(e.id)},{default:p((()=>[d("div",null,[d("span",Ze,y(e.title||e.title.length>10?e.title.slice(0,36):"")+"...",1),d("span",He,[d("span",null,y(e.description&&e.description.length>60?e.description.slice(0,50):"")+"...",1)])])])),_:2},1032,["onClick"]),f(i,{column:{media:!0,grow:!0},"data-th":"Label"},{default:p((()=>[f(b,{picture:e.managerInfo&&e.managerInfo.profileImage?e.managerInfo.profileImage:""},null,8,["picture"]),d("div",null,[d("span",Ye,y(e.managerInfo&&e.managerInfo.first_name?e.managerInfo.first_name:"Not Assigned")+" "+y(e.managerInfo&&e.managerInfo.last_name?e.managerInfo.last_name:""),1),d("span",qe,[d("span",null,y(e.managerInfo&&e.managerInfo.email?e.managerInfo.email:""),1)])])])),_:2},1024),f(i,null,{default:p((()=>[f(j,{color:"primary",light:""},{default:p((()=>[v(" Ext-"+y(e.externalId?e.externalId:""),1)])),_:2},1024)])),_:2},1024),f(i,null,{default:p((()=>[d("span",Ge,y(e.isWorkWithContractor?"Contractor":"Self Serve"),1)])),_:2},1024),f(i,{column:{align:"center"}},{default:p((()=>[f(j,{color:z(e.state)},{default:p((()=>[v(y(R(e.state)),1)])),_:2},1032,["color"])])),_:2},1024),f(i,null,{default:p((()=>[f(T,{avatars:e.imagesList,size:"small",limit:3,class:"is-pushed-mobile"},null,8,["avatars"])])),_:2},1024),f(i,{column:{align:"end"}},{default:p((()=>[f(J,{icon:"feather:more-vertical",spaced:"",right:""},{content:p((()=>[e.isWorkWithContractor?(r(),c("a",{key:0,role:"menuitem",class:"dropdown-item is-media",onClick:a=>P(e.id)},Xe,8,Qe)):(r(),c("a",{key:1,role:"menuitem",class:"dropdown-item is-media",onClick:a=>P(e.id)},aa,8,ea)),d("a",{role:"menuitem",class:"dropdown-item is-media",onClick:a=>{return t=e.id,I.value=t,void(x.value=!0);var t}},la,8,ta),sa,na])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):g("",!0),u(C).length>5?(r(),m(U,{key:3,"current-page":u(w),"onUpdate:currentPage":l[0]||(l[0]=e=>k(w)?w.value=e:null),"item-per-page":10,"total-items":u(C).length,"max-links-displayed":u(V),"no-router":""},null,8,["current-page","total-items","max-links-displayed"])):g("",!0)])])])}}}),[["__scopeId","data-v-1bf473a9"]]),oa=["data-id","onClick"],ra={class:"card-body"},ca={class:"mb-2",style:{display:"flex","align-items":"center","justify-content":"space-between"}},da={class:"card-title"},ua=d("span",{class:"light-text"},"#",-1),ma={class:"is-flex"},pa={class:"card-title"},ga={key:0,class:"mt-3",style:{"background-color":"#05d69e09",padding:"2px","border-radius":"3px"}},fa={class:"is-flex"},va={class:"ml-2"},ya={class:"card-title"},_a={class:"cus-light-text"},ha={key:1,class:"mt-4",style:{"background-color":"#05d69e09",padding:"2px","border-radius":"3px"}},ka=d("p",{class:"card-title"},[d("span",{class:"light-text"}," Site: ")],-1),ba={class:"card-title"},xa={class:"cus-light-text"},Ia={class:"cus-light-text"},wa={class:"kanban-card-stats"},Ca=d("p",null,"Assigned Workers",-1),ja=d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:clock"},null,-1),Sa=l({__name:"KanbanCard",props:{tasks:{}},setup(e){const a=e,l=s();return o((()=>{})),(e,s)=>{const n=F,i=t,o=K;return r(!0),c(_,null,h(a.tasks,(e=>(r(),c("div",{key:e.id,class:"kanban-card gelatine cu-pointer","data-id":e.id,onClick:a=>{return t=e.id,void l.push({name:"/sidebar/company/jobs/[id]",params:{id:t}});var t}},[d("div",ra,[d("div",ca,[d("p",da,[ua,v(" 00"+y(e.id),1)]),f(n,null,{default:p((()=>[v("Ext-ID: "+y(e.externalId?e.externalId:""),1)])),_:2},1024)]),d("div",ma,[d("h4",pa,y(e.title?e.title:""),1),f(i,{picture:e&&e.cuCompanyLogo?e.cuCompanyLogo:""},null,8,["picture"])]),e.manager?(r(),c("div",ga,[d("div",fa,[f(i,{picture:e.managerInfo&&e.managerInfo.profileImage?e.managerInfo.profileImage:""},null,8,["picture"]),d("div",va,[d("p",ya,y(e.managerInfo&&e.managerInfo.first_name?e.managerInfo.first_name:"")+" "+y(e.managerInfo&&e.managerInfo.last_name?e.managerInfo.last_name:""),1),d("p",_a,y(e.managerInfo&&e.managerInfo.email?e.managerInfo.email:""),1)])])])):g("",!0),e.site?(r(),c("div",ha,[ka,d("p",ba,y(e?.siteInfo?.name),1),d("p",xa,y(e.siteInfo&&e.siteInfo.postcode?e.siteInfo.postcode:"")+" ("+y(e.siteInfo&&e.siteInfo.city?e.siteInfo.city:"")+") ",1),d("p",Ia,y(e.siteInfo&&e.siteInfo.address?e.siteInfo.address:""),1)])):g("",!0),d("div",wa,[d("span",null,[Ca,ja,v(" "+y(e.createdAt.slice(0,10)),1)]),f(o,{size:"small",avatars:e.workerPics},null,8,["avatars"])])])],8,oa)))),128)}}}),Va={class:"columns is-kanban-wrapper"},Aa={class:"collapsed-content"},Pa=[d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"},null,-1)],Ra={class:"task-count"},za=d("div",{class:"collapsed-text"},"New Jobs",-1),Ma={class:"expanded-content"},Ta={class:"column-title"},Ja=d("input",{type:"text",class:"input is-small rename-input is-hidden"},null,-1),Wa=d("span",{class:"column-name"},"New Jobs",-1),La={class:"task-count"},Ua={key:0,class:"kanban-empty"},Ea=[d("img",{class:"empty-state theme-image light-image-block",src:G,alt:""},null,-1),d("img",{class:"empty-state theme-image dark-image-block",src:Q,alt:""},null,-1),d("p",{class:"empty-text"}," There are no tasks in Waiting RAMS / CCP at the moment. ",-1)],Na={class:"collapsed-content"},$a=[d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"},null,-1)],Da={class:"task-count"},Ka=d("div",{class:"collapsed-text"},"Ready for checks (RAMS / CCP)",-1),Fa={class:"expanded-content"},Oa={class:"column-title"},Ba=d("input",{type:"text",class:"input is-small rename-input is-hidden"},null,-1),Za=d("span",{class:"column-name"},"Pending for Checks (RAMS/CPP)",-1),Ha={class:"task-count"},Ya={key:0,class:"kanban-empty"},qa=[d("img",{class:"empty-state theme-image light-image-block",src:G,alt:""},null,-1),d("img",{class:"empty-state theme-image dark-image-block",src:Q,alt:""},null,-1),d("p",{class:"empty-text"}," There are no tasks in Waiting RAMS / CCP at the moment. ",-1)],Ga={class:"collapsed-content"},Qa=[d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"},null,-1)],Xa={class:"task-count"},et=d("div",{class:"collapsed-text"},"Ready to start",-1),at={class:"expanded-content"},tt={class:"column-title"},lt=d("input",{type:"text",class:"input is-small rename-input is-hidden"},null,-1),st=d("span",{class:"column-name"},"Ready to start",-1),nt={class:"task-count"},it={key:0,class:"kanban-empty"},ot=[d("img",{class:"empty-state theme-image light-image-block",src:X,alt:""},null,-1),d("img",{class:"empty-state theme-image dark-image-block",src:ee,alt:""},null,-1),d("p",{class:"empty-text"},[d("span",null,"There are no tasks marked as Waiting RAMS for now."),d("a",{href:"#",class:"button v-button is-outlined is-rounded is-fullwidth"}," Create Task ")],-1)],rt={class:"collapsed-content"},ct=[d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"},null,-1)],dt={class:"task-count"},ut=d("div",{class:"collapsed-text"},"In Progress",-1),mt={class:"expanded-content"},pt={class:"column-title"},gt=d("input",{type:"text",class:"input is-small rename-input is-hidden"},null,-1),ft=d("span",{class:"column-name"},"In Progress",-1),vt={class:"task-count"},yt={key:0,class:"kanban-empty"},_t=[d("img",{class:"empty-state theme-image light-image-block",src:ae,alt:""},null,-1),d("img",{class:"empty-state theme-image dark-image-block",src:te,alt:""},null,-1),d("p",{class:"empty-text"}," No tasks are being started at the moment. ",-1)],ht={class:"collapsed-content"},kt=[d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"},null,-1)],bt={class:"task-count"},xt=d("div",{class:"collapsed-text"},"Completed",-1),It={class:"expanded-content"},wt={class:"column-title"},Ct=d("input",{type:"text",class:"input is-small rename-input is-hidden"},null,-1),jt=d("span",{class:"column-name"},"Completed",-1),St={class:"task-count"},Vt={key:0,class:"kanban-empty"},At=[d("img",{class:"empty-state theme-image light-image-block",src:le,alt:""},null,-1),d("img",{class:"empty-state theme-image dark-image-block",src:se,alt:""},null,-1),d("p",{class:"empty-text"},"You have no completed bounties.",-1)],Pt=l({__name:"kanbanEditor",props:{tasks:{type:Array,default:[]},loading:{type:Boolean,default:!1}},setup(a){const t=a,l=n(),s=n(),v=n(),_=n(),h=n(),k=n(!1),b=n(!1),x=n(!1),I=n(!1),w=n(!1),C=n([]),j=n(!1),S=n(0),z=i((()=>t.tasks)),M=i((()=>z.value.filter((e=>"created"===e.state)))),T=i((()=>z.value.filter((e=>"readyToStart"===e.state)))),J=i((()=>z.value.filter((e=>"waitingRAMS"===e.state)))),W=i((()=>z.value.filter((e=>"started"===e.state)))),L=i((()=>z.value.filter((e=>"completed"===e.state))));function U(e){if(e){if(e.classList.contains("kanban-card")){const a=e.dataset.id;if(a){const e=C.find((e=>e.id===a));if(e)return"completed"===e.state||"created"===e.state}}return e.classList.contains("kanban-empty")}return!0}function E(e,a){if(e&&a){const a=e.dataset.id,t=e.dataset.state;if(a&&t){const e=C.find((e=>e.id===a));e&&(e.state=t)}}}return o((()=>{window.global=window,V((()=>import("./dragula-c33ded41.js").then((e=>e.d))),["assets/dragula-c33ded41.js","assets/index-a3511ab8.js","assets/index-f7887a14.css"]).then((e=>{if(l.value&&s.value&&v.value&&_.value&&h.value){(0,e.default)([l.value,s.value,v.value,_.value,h.value],{invalid:U}).on("drop",E)}}))})),(t,l)=>{const n=q,i=Sa,o=e,C=Y;return r(),m(C,{class:"kanban-content"},{default:p((()=>[d("div",Va,[d("div",{class:A(["column",[k.value&&"is-1 is-mini",!k.value&&"is-one-fifth"]])},[d("div",{class:A(["kanban-column",[k.value&&"is-collapsed",0===u(M).length&&"is-empty"]]),style:{"background-color":"#f3f1f1"}},[d("div",Aa,[d("div",{class:"expand-button",tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=P(R((e=>k.value=!1),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>k.value=!1)},Pa,32),d("div",null,[d("span",Ra,y(u(M).length),1)]),za]),d("div",Ma,[d("div",Ta,[Ja,d("h3",null,[Wa,d("span",La,y(u(M).length),1)]),f(n,{onCollapse:l[2]||(l[2]=e=>b.value=!0)})]),d("div",{ref_key:"progressContainer",ref:s,"data-state":"readyToStart"},[0===u(M).length?(r(),c("div",Ua,Ea)):g("",!0),f(i,{tasks:u(M)},null,8,["tasks"])],512)])],2)],2),d("div",{class:A(["column",[b.value&&"is-1 is-mini",!b.value&&"is-one-fifth"]])},[d("div",{class:A(["kanban-column can-drag",[b.value&&"is-collapsed",0===u(T).length&&"is-empty"]]),style:{"background-color":"#f0d9f0"}},[d("div",Na,[d("div",{class:"expand-button",tabindex:"0",role:"button",onKeydown:l[3]||(l[3]=P(R((e=>b.value=!1),["prevent"]),["space"])),onClick:l[4]||(l[4]=e=>b.value=!1)},$a,32),d("div",null,[d("span",Da,y(u(T).length),1)]),Ka]),d("div",Fa,[d("div",Oa,[Ba,d("h3",null,[Za,d("span",Ha,y(u(J).length),1)]),f(n,{onCollapse:l[5]||(l[5]=e=>b.value=!0)})]),d("div",{ref_key:"progressContainer",ref:s,"data-state":"readyToStart"},[0===u(J).length?(r(),c("div",Ya,qa)):g("",!0),f(i,{tasks:u(J)},null,8,["tasks"])],512)])],2)],2),d("div",{class:A(["column",[x.value&&"is-1 is-mini",!x.value&&"is-one-fifth"]])},[d("div",{class:A(["kanban-column can-drag",[x.value&&"is-collapsed",0===u(J).length&&"is-empty"]]),style:{"background-color":"#dce4fb"}},[d("div",Ga,[d("div",{class:"expand-button",tabindex:"0",role:"button",onKeydown:l[6]||(l[6]=P(R((e=>x.value=!1),["prevent"]),["space"])),onClick:l[7]||(l[7]=e=>x.value=!1)},Qa,32),d("div",null,[d("span",Xa,y(u(T).length),1)]),et]),d("div",at,[d("div",tt,[lt,d("h3",null,[st,d("span",nt,y(u(T).length),1)]),f(n,{onCollapse:l[8]||(l[8]=e=>x.value=!0)})]),d("div",{ref_key:"readyContainer",ref:v,"data-state":"waitingRAMS"},[0===u(T).length?(r(),c("div",it,ot)):g("",!0),f(i,{tasks:u(T)},null,8,["tasks"])],512)])],2)],2),d("div",{class:A(["column",[I.value&&"is-1 is-mini",!I.value&&"is-one-fifth"]])},[d("div",{class:A(["kanban-column can-drag",[I.value&&"is-collapsed",0===u(W).length&&"is-empty"]]),style:{"background-color":"#fcefe8"}},[d("div",rt,[d("div",{class:"expand-button",tabindex:"0",role:"button",onKeydown:l[9]||(l[9]=P(R((e=>I.value=!1),["prevent"]),["space"])),onClick:l[10]||(l[10]=e=>I.value=!1)},ct,32),d("div",null,[d("span",dt,y(u(W).length),1)]),ut]),d("div",mt,[d("div",pt,[gt,d("h3",null,[ft,d("span",vt,y(u(W).length),1)]),f(n,{onCollapse:l[11]||(l[11]=e=>I.value=!0)})]),d("div",{ref_key:"reviewContainer",ref:_,"data-state":"started"},[0===u(W).length?(r(),c("div",yt,_t)):g("",!0),f(i,{tasks:u(W)},null,8,["tasks"])],512)])],2)],2),d("div",{class:A(["column",[w.value&&"is-1 is-mini",!w.value&&"is-one-fifth"]])},[d("div",{class:A(["kanban-column",[w.value&&"is-collapsed",0===u(L).length&&"is-empty"]]),style:{"background-color":"#c1efd2"}},[d("div",ht,[d("div",{class:"expand-button",tabindex:"0",role:"button",onKeydown:l[12]||(l[12]=P(R((e=>w.value=!1),["prevent"]),["space"])),onClick:l[13]||(l[13]=e=>w.value=!1)},kt,32),d("div",null,[d("span",bt,y(u(L).length),1)]),xt]),d("div",It,[d("div",wt,[Ct,d("h3",null,[jt,d("span",St,y(u(L).length),1)]),f(n,{onCollapse:l[14]||(l[14]=e=>w.value=!0)})]),d("div",{ref_key:"completedContainer",ref:h,"data-state":"completed"},[0===u(L).length?(r(),c("div",Vt,At)):g("",!0),f(i,{loading:a.loading,tasks:u(L)},null,8,["loading","tasks"])],512)])],2)],2)]),j.value?(r(),m(o,{key:0,jobId:S.value,AddJobModalOpen:j.value,"onUpdate:modalHandler":l[15]||(l[15]=e=>j.value=!1),"onUpdate:onSuccess":t.getJobs},null,8,["jobId","AddJobModalOpen","onUpdate:onSuccess"])):g("",!0)])),_:1})}}}),Rt={class:"user-grid user-grid-v1"},zt={class:"columns is-multiline"},Mt={class:"grid-item"},Tt={class:"people"},Jt=l({__name:"CardPlaceload",setup:e=>(n(""),n(0),(e,a)=>{const t=ie,l=ne,s=b,n=z;return r(),c("div",null,[d("div",Rt,[d("div",zt,[(r(),c(_,null,h(5,(e=>d("div",{key:e,class:"column is-3"},[d("div",Mt,[f(t,{size:"big",centered:"",class:"mb-2"}),f(l,{class:"mb-4",width:"80%",lines:3,"last-line-width":"60%",centered:""}),d("div",Tt,[f(t,{size:"small",class:"mx-1"}),f(t,{size:"small",class:"mx-1"}),f(t,{size:"small",class:"mx-1"}),f(t,{size:"small",class:"mx-1"})]),f(n,null,{default:p((()=>[f(s,{placeload:"100%","dark-outlined":""},{default:p((()=>[v(" loading ... ")])),_:1}),f(s,{placeload:"100%","dark-outlined":""},{default:p((()=>[v(" loading ... ")])),_:1})])),_:1})])]))),64))])])])})}),Wt=e=>(I("data-v-8a43ed77"),e=e(),w(),e),Lt={class:"page-content-inner"},Ut={class:"is-flex",style:{gap:"20px","margin-bottom":"16px","align-items":"stretch"}},Et={style:{"margin-left":"1rem","font-weight":"500","font-size":"1.3rem",color:"#555",transform:"translateY(0.5rem)"}},Nt={class:"multiselect-single-label",style:{"background-color":"transparent"}},$t=["src"],Dt={class:"",style:{display:"flex","flex-direction":"column",gap:"0.3rem"}},Kt={class:"",style:{display:"flex","align-items":"center",gap:"0.5rem"}},Ft=["src"],Ot={style:{display:"flex","flex-direction":"column",gap:"0.3rem"}},Bt={style:{color:"#444","font-size":"1.2rem","font-weight":"500"}},Zt={style:{color:"#666","font-size":"1rem"}},Ht=Wt((()=>d("span",{style:{color:"#444"}},"Email:",-1))),Yt=Wt((()=>d("div",{class:"",style:{"background-color":"lightgrey",height:"42px",width:"7px","border-radius":"10px"}},null,-1))),qt={style:{height:"max-content"}},Gt={class:"cus-card",style:{"background-color":"#f3f1f1",display:"flex","flex-direction":"column",gap:"2px","text-align":"left",height:"110px"}},Qt={style:{color:"#3b4b4ca1 !important","font-size":"20px","margin-bottom":"17px"},class:"title"},Xt=Wt((()=>d("p",{style:{color:"#3b4b4ca1 !important","font-size":"16px","font-weight":"500"}}," New Jobs ",-1))),el={style:{height:"max-content"}},al={class:"cus-card",style:{"background-color":"#c449c230",display:"flex","flex-direction":"column",gap:"2px","text-align":"left",height:"110px"}},tl={style:{color:"#c449c2 !important","font-size":"20px","margin-bottom":"17px"},class:"title"},ll=Wt((()=>d("p",{style:{color:"#c449c2 !important","font-size":"16px","font-weight":"500"}}," RAMS / CPP ",-1))),sl={class:"cus-card",style:{"background-color":"#5887ff30","text-align":"left",height:"110px"}},nl={class:"is-flex",style:{"justify-content":"space-between"}},il={class:""},ol={style:{color:"#5887ff !important","font-size":"20px"},class:"title mb-0"},rl=Wt((()=>d("p",{class:"",style:{color:"#5887ff !important","font-size":"16px","font-weight":"500"}}," Ready to Start ",-1))),cl={class:"cus-card",style:{"background-color":"#fcefe8","text-align":"left",height:"110px"}},dl={style:{color:"#eb6c32c4 !important","font-size":"20px"},class:"title mb-0"},ul=Wt((()=>d("p",{style:{color:"#eb6c32c4 !important","font-size":"16px","font-weight":"500"}}," In Progress ",-1))),ml={class:"cus-card",style:{"background-color":"#41d5784f","text-align":"left",height:"110px"}},pl={style:{color:"#32b064 !important","font-size":"20px"},class:"title mb-0"},gl=Wt((()=>d("p",{class:"",style:{color:"#32b064 !important","font-size":"16px","font-weight":"500"}}," Completed ",-1))),fl={class:"kanban-toolbar"},vl=Wt((()=>d("i",{class:"fas fa-tv","aria-hidden":"true"},null,-1))),yl=Wt((()=>d("i",{class:"lnil lnil-thumbnail","aria-hidden":"true"},null,-1))),_l=Wt((()=>d("i",{class:"lnil lnil-list-alt","aria-hidden":"true"},null,-1))),hl={key:0},kl={key:1},bl={key:2},xl=C(l({__name:"index",setup(a){const t=B(),l=ue(),s=n("kanbanView"),_=n(0),h=n(!1),x=Z(),I=n("");let w=n([]);const C=n(""),j=n([]),S=n(!1);l.setPageTitle("Jobs"),M({title:"Jobs - Arez"});const V=n([]),A=()=>{h.value=!0},P=e=>{const a=V.value.find((a=>a.state===e));return a?a.count:0},R=async()=>{try{S.value=!0;const{data:e}=await t.get(`/v3/api/vixen-job/${x.loggedCompany.id}/company/?customer_company=${C.value}`);e.forEach((e=>{let a=[];e.assignedWorkers.forEach((e=>{a.push({picture:e.profileImageURL})})),e.workerPics=a})),j.value=e,console.log("receiving",j.value),S.value=!1}catch(e){console.log(e)}finally{S.value=!1}},z=i((()=>(console.log("computed called"),I.value?j.value.filter((e=>e.title.match(new RegExp(I.value,"i")))):j.value)));return T(C,((e,a)=>{R()})),o((()=>{R(),(async()=>{try{const{data:e}=await t.get(`/v3/api/vixen-job/stats/${x.loggedCompany.id}`);V.value=e}catch(e){console.log(e)}})(),(async()=>{try{const e=await t.get(`/v3/api/customer-company/company/${x.loggedCompany.id}`);w.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png",email:e.email}))),w.value.unshift({value:"",name:"All",icon:x.loggedCompany.compnayLogo})}catch(e){console.log(e)}})()})),(a,t)=>{const l=J("Multiselect"),n=de,i=ce,o=re,x=b,j=oe,V=Jt,M=Pt,T=ia,W=$e,L=e;return r(),c("div",Lt,[d("div",Ut,[f(i,{class:"pl-2"},{default:p((({id:e})=>[f(n,{class:"placement-wrapper"},{default:p((()=>[d("span",Et,"All Clients ("+y(u(w).length>10?u(w).length:"0"+u(w).length)+")",1),f(l,{style:{width:"100%",height:"55px","border-radius":"1rem","background-color":"transparent !important",border:"none",outline:"none"},modelValue:u(C),"onUpdate:modelValue":t[0]||(t[0]=e=>k(C)?C.value=e:null),attrs:{id:e},placeholder:"Select a customer company",label:"name",options:u(w),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect"},{singlelabel:p((({value:e})=>[d("div",Nt,[d("img",{style:{width:"30px","border-radius":"0.5rem"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,$t),v(" "+y(e.name),1)])])),option:p((({option:e})=>[d("div",Dt,[d("div",Kt,[d("img",{style:{width:"40px","border-radius":"0.5rem"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Ft),d("div",Ot,[d("span",Bt,y(e.name),1),d("span",Zt,[Ht,v(" "+y(e.email),1)])])])])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),Yt,d("div",qt,[d("div",Gt,[d("p",Qt,y(P("created")),1),Xt])]),d("div",el,[d("div",al,[d("p",tl,y(P("waitingRAMS")),1),ll])]),d("div",null,[d("div",sl,[d("div",nl,[d("div",il,[d("p",ol,y(P("readyToStart")),1)])]),rl])]),d("div",null,[d("div",cl,[d("p",dl,y(P("started")),1),ul])]),d("div",null,[d("div",ml,[d("p",pl,y(P("completed")),1),gl])])]),d("div",fl,[f(i,{raw:""},{default:p((()=>[f(n,{icon:"feather:search"},{default:p((()=>[f(o,{modelValue:u(I),"onUpdate:modelValue":t[1]||(t[1]=e=>k(I)?I.value=e:null),placeholder:"Search..."},null,8,["modelValue"])])),_:1})])),_:1}),f(x,{color:"primary mr-5",onClick:A,style:{float:"right"},icon:"fas fa-plus"},{default:p((()=>[v(" Create Job ")])),_:1}),f(j,{class:"mr-4 cu-pointer",size:"medium",onClick:t[2]||(t[2]=e=>s.value="kanbanView"),color:["kanbanView"==u(s)?"primary":""]},{default:p((()=>[vl])),_:1},8,["color"]),f(j,{class:"mr-4 cu-pointer",size:"medium",onClick:t[3]||(t[3]=e=>s.value="cardView"),color:["cardView"==u(s)?"primary":""]},{default:p((()=>[yl])),_:1},8,["color"]),f(j,{class:"mr-4 cu-pointer",size:"medium",onClick:t[4]||(t[4]=e=>s.value="listView"),color:["listView"==u(s)?"primary":""]},{default:p((()=>[_l])),_:1},8,["color"])]),"kanbanView"==u(s)?(r(),c("div",hl,[u(S)?(r(),m(V,{key:0})):g("",!0),u(S)?g("",!0):(r(),m(M,{key:1,tasks:u(z)},null,8,["tasks"]))])):g("",!0),"listView"==u(s)?(r(),c("div",kl,[f(T,{tasks:u(z),loading:u(S)},null,8,["tasks","loading"])])):g("",!0),"cardView"==u(s)?(r(),c("div",bl,[f(W,{tasks:u(z),loading:u(S)},null,8,["tasks","loading"])])):g("",!0),u(h)?(r(),m(L,{key:3,AddJobModalOpen:u(h),jobId:u(_),"onUpdate:modalHandler":t[5]||(t[5]=e=>h.value=!1),"onUpdate:onSuccess":R},null,8,["AddJobModalOpen","jobId"])):g("",!0)])}}}),[["__scopeId","data-v-8a43ed77"]]);export{xl as default};
