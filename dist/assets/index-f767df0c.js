import{_ as e}from"./AddUpdateUser.vue_vue_type_script_setup_true_lang-67242a1b.js";import{_ as t}from"./SweetAlert.vue_vue_type_style_index_0_lang-dc1a89b9.js";import{_ as s}from"./VProgress.vue_vue_type_style_index_0_lang-69739893.js";import{_ as a}from"./VAvatar.vue_vue_type_style_index_0_lang-89006900.js";import{_ as l}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-d460f775.js";import{e as i,r as n,Z as r,o,M as u,l as c,y as d,H as _,z as p,C as v,A as m,B as g,S as f,T as y,j as k,O as b,Q as h,R as w,aR as x,P as j,E as A,J as S,D as V,N as C,v as O}from"./index-ed878baa.js";import{_ as P}from"./VField.vue_vue_type_script_setup_true_lang-63cc4033.js";import{_ as U}from"./VControl-71751153.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-47d1ceb3.js";import{_ as I,a as D}from"./search-4-dark-2b5b440c.js";import{u as M}from"./useAPI-4dbd45d9.js";import{u as E}from"./useNotyf-51dcaca9.js";import{u as T}from"./viewWrapper-5df11b72.js";import"./VModal.vue_vue_type_style_index_0_lang-f6e4e1bc.js";import"./VRadio.vue_vue_type_style_index_0_lang-fa9c2a36.js";import"./VLabel.vue_vue_type_script_setup_true_lang-cb6c0e84.js";import"./useVFieldContext-9a447149.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-71c71ccf.js";import"./VIcon.vue_vue_type_script_setup_true_lang-63563bed.js";import"./VFilePond.vue_vue_type_script_lang-01536164.js";import"./VInput.vue_vue_type_script_setup_true_lang-8eedbc96.js";import"./useSupportElement-c53eaf20.js";import"./userSession-3fb9a025.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-566dd4d9.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-b5c04341.js";import"./notyf-fd8b7ffd.js";import"./useThemeColors-be929954.js";const L={key:1},R={class:"card-grid-toolbar"},z={class:"buttons"},F=v("span",{class:"icon"},[v("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),H=v("span",null," Worker",-1),$={class:"card-grid card-grid-v1"},B=v("img",{class:"light-image",src:I,alt:""},null,-1),N=v("img",{class:"dark-image",src:D,alt:""},null,-1),J={class:"card-grid-item"},K={class:"card-grid-item-body"},Q={class:"left"},X={class:"meta"},Z={class:"dark-inverted"},q={class:"right"},G={class:"social-links"},Y=["onClick"],ee=[v("i",{class:"success-text fas fa-check-circle","aria-hidden":"true"},null,-1)],te=["onClick"],se=[v("i",{class:"fas fa-ban warning-text","aria-hidden":"true"},null,-1)],ae={key:2,channel:"Twitter",class:"social-link"},le=[v("i",{class:"fas fa-envelope warning-text","aria-hidden":"true"},null,-1)],ie=["onClick"],ne=[v("i",{"aria-hidden":"true",class:"fas fa-edit info-text"},null,-1)],re=["onClick"],oe=[v("i",{"aria-hidden":"true",class:"fas fa-trash danger-text"},null,-1)],ue={class:"card-grid-item-footer"},ce={class:"left"},de={class:"progress-stats"},_e=v("span",{class:"dark-inverted"},"Progress",-1),pe={class:"progress-bar"},ve={class:"right"},me={class:"buttons"},ge=i({__name:"IbexWorkers",setup(i){const C=M(),O=E(),I=n(""),D=n(""),T=n(0),ge=n(""),fe=n(!1),ye=["All","UI/UX Design","Web Development","Software Eng.","Business"],ke=n(!1),be=n(null),he=n(null),we=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),xe=n({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),je=n([{id:"",active_tasks:0,completed_tasks:2,cancelled_tasks:0,pending_tasks:13,password:"",last_login:null,date_joined:"",email:"",role:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1,avatar:null}]),Ae=(e="")=>{ge.value=e,fe.value=!fe.value},Se=r((()=>I.value?je.value.filter((e=>e.username.match(new RegExp(I.value,"i"))||e.email.match(new RegExp(I.value,"i")))):je.value)),Ve=e=>{be.value=e.id,he.value=e.is_active,we.value.title="Change Status",we.value.btntext=""+(e.is_active?"In-Activate":"Activate"),we.value.subtitle=he.value?"After this User will not be able to login into the system":"From now this user will be able to login and perform all activities",we.value.isSweetAlertOpen=!0},Ce=async()=>{try{ke.value=!0,await C.delete(`/api/users/${D.value}/`,{}),await Oe(),O.green("Worker deleted successfully")}catch(e){console.log(e),O.error("Error while deleting")}finally{ke.value=!1}},Oe=async()=>{try{ke.value=!0;const e=await C.get("/api/users/workers/",{});je.value=e.data.map((e=>({...e,progress:e.active_tasks+e.pending_tasks+e.cancelled_tasks/e.completed_tasks}))),console.log("data",je.value)}catch(e){console.log(e)}finally{ke.value=!1}},Pe=async()=>{try{ke.value=!0;const e=await C.patch(`/api/users/${be.value}/`,{is_active:!he.value});await Oe(),O.success(he.value?"Worker set inactive successfully":"Worker set active successfully"),we.value.isSweetAlertOpen=!1,console.log(e)}catch(e){console.log(e)}finally{ke.value=!1}};return o((()=>{Oe()})),(i,n)=>{const r=W,o=U,C=u("Multiselect"),O=P,M=A,E=l,be=a,he=s,je=t,Ue=e;return c(ke)?(d(),_(r,{key:0})):(d(),p("div",L,[v("div",R,[m(o,{icon:"feather:search"},{default:g((()=>[f(v("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>k(I)?I.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[y,c(I)]])])),_:1}),v("div",z,[m(O,{class:"h-hidden-mobile"},{default:g((()=>[m(o,null,{default:g((()=>[m(C,{modelValue:c(T),"onUpdate:modelValue":n[1]||(n[1]=e=>k(T)?T.value=e:null),options:ye,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),m(M,{onClick:n[2]||(n[2]=e=>Ae()),color:"primary",raised:""},{default:g((()=>[F,H])),_:1})])]),v("div",$,[m(E,{class:b([0!==c(Se).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[B,N])),_:1},8,["class"]),m(x,{name:"list",tag:"div",class:"columns is-multiline"},{default:g((()=>[(d(!0),p(h,null,w(c(Se),((e,t)=>(d(),p("div",{key:t,class:"column is-6"},[v("div",J,[v("div",K,[v("div",Q,[m(be,{size:"big",picture:e?.avatar},null,8,["picture"]),v("div",X,[v("span",Z,S(e.username),1),v("span",null,S(e.role),1)])]),v("div",q,[v("div",G,[e.is_active?(d(),p("a",{key:0,onClick:t=>Ve(e),channel:"Linkedin",class:"social-link"},ee,8,Y)):(d(),p("a",{key:1,onClick:t=>Ve(e),channel:"Linkedin",class:"social-link"},se,8,te)),e.is_sentMail?(d(),p("a",ae,le)):j("",!0),v("a",{channel:"Dribbble",onClick:t=>Ae(e.id),class:"social-link"},ne,8,ie),v("a",{channel:"Dribbble",onClick:t=>{return s=e,D.value=s.id,void(xe.value={title:`Delete ${s.username}?`,subtitle:"After deleting this worker you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var s},class:"social-link"},oe,8,re)])])]),v("div",ue,[v("div",ce,[v("div",de,[_e,v("span",null,S(e.progress?e.progress:"0")+"%",1)]),v("div",pe,[m(he,{size:"tiny",value:e.progress?e.progress:0},null,8,["value"])])]),v("div",ve,[v("div",me,[m(M,{to:`/sidebar/dashboard/workers/${e.id}`,"dark-outlined":"",rounded:""},{default:g((()=>[V(" View Profile ")])),_:2},1032,["to"])])])])])])))),128))])),_:1})]),c(we).isSweetAlertOpen?(d(),_(je,{key:0,loading:c(ke),isSweetAlertOpen:c(we).isSweetAlertOpen,title:c(we).title,subtitle:c(we).subtitle,btntext:c(we).btntext,onConfirm:Pe,onCancel:()=>c(we).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0),c(xe).isSweetAlertOpen?(d(),_(je,{key:1,loading:c(ke),isSweetAlertOpen:c(xe).isSweetAlertOpen,title:c(xe).title,subtitle:c(xe).subtitle,btntext:c(xe).btntext,onConfirm:Ce,onCancel:()=>c(xe).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):j("",!0),c(fe)?(d(),_(Ue,{key:2,"is-modal-open":c(fe),"user-role":"worker","user-id":c(ge),"onUpdate:closeModalHandler":n[3]||(n[3]=e=>fe.value=!1),"onUpdate:actionUpdateHandler":Oe},null,8,["is-modal-open","user-id"])):j("",!0)]))}}}),fe={class:"page-content-inner"},ye=i({__name:"index",setup(e){C();return T().setPageTitle("Workers"),O({title:"Workers - Ibex"}),(e,t)=>{const s=ge;return d(),p("div",fe,[m(s)])}}});export{ye as default};
