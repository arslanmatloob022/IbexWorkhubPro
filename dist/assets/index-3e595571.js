import{_ as e}from"./ProposalViewModal.vue_vue_type_style_index_0_lang-c2445ea0.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-3bead4b7.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-8234e931.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-09b9ddc3.js";import{_ as s,c as n}from"./VFlexTable.vue_vue_type_style_index_0_lang-0234ae06.js";import{_ as i}from"./VAvatar.vue_vue_type_style_index_0_lang-c58b961b.js";import{_ as o}from"./VTag.vue_vue_type_style_index_0_lang-d9bbc019.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-18f4b9ee.js";import{f as d,x as c,r as u,$ as p,o as m,av as _,C as v,D as f,m as y,O as b,E as h,F as g,G as k,L as j,X as w,k as C,K as x,I as A,H as I,N as V,V as P,W as S,aS as O,P as $,al as N,J as L,U,A as D}from"./index-ff07ea10.js";import{_ as M}from"./VDropdown.vue_vue_type_style_index_0_lang-813e7a1a.js";import{_ as T}from"./VField.vue_vue_type_script_setup_true_lang-402029c8.js";import{_ as E}from"./VControl-c42c36b2.js";import{_ as J}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-395e7e22.js";import{_ as F,a as z}from"./search-4-dark-2b5b440c.js";import{u as H}from"./useAPI-93c1587d.js";import{u as K}from"./useNotyf-88b03f41.js";import{f as R,h as W}from"./useSupportElement-dad956f5.js";import{g as X}from"./estimatesScripts-c4963377.js";import{h as B}from"./moment-1b9a430c.js";import{u as Z}from"./viewWrapper-3dade7bf.js";import{b as q}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-9a56314a.js";import"./VRadio.vue_vue_type_style_index_0_lang-d2adaf32.js";import"./VLabel.vue_vue_type_script_setup_true_lang-a0fe1228.js";import"./useVFieldContext-a4477f7f.js";import"./CreateProposalTasksModal-18146bcf.js";import"./UnitAddUpdateModal.vue_vue_type_script_setup_true_lang-b4331b10.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-bd6c9ada.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-08f82aec.js";import"./VInput.vue_vue_type_script_setup_true_lang-be3c37d5.js";import"./VOption.vue_vue_type_style_index_0_lang-49f5ec94.js";import"./costItems-e8325ea7.js";import"./VIconButton-90529c70.js";import"./company-dd8e29e1.js";import"./V-Snack.vue_vue_type_style_index_0_lang-055e35bb.js";import"./VIcon.vue_vue_type_script_setup_true_lang-fb2b2f09.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-8dcd8f87.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-952779b6.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-51dcc091.js";import"./ckeditor-0e3656ea.js";import"./vue.runtime.esm-bundler-a3daba1d.js";import"./ckeditor-cf155aca.js";import"./VFlex.vue_vue_type_style_index_0_lang-105919fa.js";import"./useDropdown-2b82935e.js";import"./VPlaceloadWrap-8e5d128c.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-e5c912f8.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-ae25c60f.js";import"./notyf-e25917ec.js";import"./useThemeColors-98b3f666.js";const G={key:1},Q={class:"list-flex-toolbar"},Y=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Ascending"),h("span",null,"Alphabetical Ascending Sorting")],-1)],ee=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Descending"),h("span",null,"Alphabetical Descending Sorting")],-1)],ae=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Most Recent"),h("span",null,"Sort most recently created")],-1)],le=[h("div",{class:"icon"},[h("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Most Old"),h("span",null,"Sort the most oldest")],-1)],te={class:"page-content-inner"},se={class:"flex-list-wrapper flex-list-v1"},ne={class:"tabs-wrapper column is-12"},ie={class:"tabs-inner"},oe={class:"tabs is-toggle"},re=[h("span",null,"All Jobs",-1)],de=[h("span",null,"Completed Jobs",-1)],ce=h("li",{class:"tab-naver"},null,-1),ue=h("img",{class:"light-image",src:F,alt:""},null,-1),pe=h("img",{class:"dark-image",src:z,alt:""},null,-1),me={key:1},_e={key:0,class:"show-text-200"},ve={class:"item-name"},fe={class:"item-meta"},ye={key:1,class:"show-text-200"},be={class:"item-name dark-inverted"},he={class:"item-meta"},ge={class:"item-name dark-inverted show-text-200"},ke={class:"item-meta show-text-200"},je={class:"item-name dark-inverted"},we={class:"item-meta"},Ce=["onClick"],xe=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),h("div",{class:"meta"},[h("span",null,"View"),h("span",null,"View user details")],-1)],Ae=["onClick"],Ie=[h("div",{class:"icon"},[h("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Add Proposals"),h("span",null,"Add new proposal to lead")],-1)],Ve=["onClick"],Pe=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Update Lead Info")],-1)],Se=h("hr",{class:"dropdown-divider"},null,-1),Oe=["onClick"],$e=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),h("div",{class:"meta"},[h("span",null,"Delete"),h("span",null,"Delete Proposal Permanently")],-1)],Ne={key:2},Le={key:0,class:"show-text-200"},Ue={class:"item-name"},De={class:"item-meta"},Me={key:1,class:"show-text-200"},Te={class:"item-name dark-inverted"},Ee={class:"item-meta"},Je={class:"item-name dark-inverted show-text-200"},Fe={class:"item-meta show-text-200"},ze={class:"item-name dark-inverted"},He={class:"item-meta"},Ke=["onClick"],Re=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),h("div",{class:"meta"},[h("span",null,"View"),h("span",null,"View user details")],-1)],We=["onClick"],Xe=[h("div",{class:"icon"},[h("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),h("div",{class:"meta"},[h("span",null,"Add Proposals"),h("span",null,"Add new proposal to lead")],-1)],Be=["onClick"],Ze=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Update Lead Info")],-1)],qe=h("hr",{class:"dropdown-divider"},null,-1),Ge=["onClick"],Qe=[h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),h("div",{class:"meta"},[h("span",null,"Delete"),h("span",null,"Delete Proposal Permanently")],-1)],Ye=d({__name:"JobsList",setup(d){const D=c(),F=K(),z=H(),Z=u(),q=u("all"),Ye=u({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),ea=u(42),aa=u("");u("");const la=u(!1),ta=u(!1);u([{value:"Open",label:"Open"},{value:"Sold",label:"Sold"},{value:"Lost",label:"Lost"},{value:"onHold",label:"On hold"}]);const sa={username:{label:"Contractor/Client",grow:!0},location:{label:"Job",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},na=u([]),ia=async()=>{try{Z.value=!0;const e=await z.get("/api/project/project-jobs/");Ye.value=e.data.filter((e=>"completed"==e.status)),na.value=e.data.filter((e=>"completed"!=e.status))}catch(e){F.error(` ${e}, Lead`)}finally{Z.value=!1}},oa=u(""),ra=e=>{oa.value=e,ta.value=!0},da=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ca=e=>{oa.value=e,da.value={title:"Delete Proposal?",subtitle:"Are you sure to delete this proposal? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0}},ua=async()=>{try{Z.value=!0;await z.delete(`/api/project/${oa.value}/`);F.success("Proposal delete successfully"),ia()}catch(e){F.error(` ${e}, Proposal`),F.error("Something went wrong please try later")}finally{Z.value=!1,da.value.isSweetAlertOpen=!1}},pa=e=>{oa.value=e,la.value=!la.value},ma=p((()=>{if(aa.value){const e=new RegExp(aa.value,"i");return na.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return na.value})),_a=u(""),va=(e="")=>{_a.value=e},fa=p((()=>{let e=ma.value||[];return _a.value?[...e].sort(((e,a)=>"ascending"===_a.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===_a.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===_a.value?B(a.created).valueOf()-B(e.created).valueOf():"old"===_a.value?B(e.created).valueOf()-B(a.created).valueOf():0)):ma.value})),ya=p((()=>{if(aa.value){const e=new RegExp(aa.value,"i");return Ye.value.filter((a=>a.title?.match(e)||a.address?.match(e)||a.clientInfo?.username?.match(e)||a.clientInfo?.last_name?.match(e)||a.clientInfo?.username?.match(e)||a.city?.match(e)||a.created_at?.match(e)))}return Ye.value}));return m((()=>{ia()})),(d,c)=>{const u=J,p=E,m=T,F=M,z=$,H=N,K=r,B=n,Ye=o,na=i,ma=s,_a=t,ba=l,ha=a,ga=e,ka=_("tooltip");return v(),f("div",null,[y(Z)?(v(),b(u,{key:0})):(v(),f("div",G,[h("div",Q,[g(m,null,{default:k((()=>[g(p,{icon:"feather:search"},{default:k((()=>[j(h("input",{"onUpdate:modelValue":c[0]||(c[0]=e=>C(aa)?aa.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[w,y(aa)]])])),_:1})])),_:1}),g(F,{title:"Apply sorting",spaced:""},{content:k((()=>[h("a",{onClick:c[1]||(c[1]=e=>va("ascending")),class:"dropdown-item is-media"},Y),h("a",{onClick:c[2]||(c[2]=e=>va("descending")),class:"dropdown-item is-media is-active"},ee),h("a",{onClick:c[3]||(c[3]=e=>va("new")),class:"dropdown-item is-media"},ae),h("a",{onClick:c[4]||(c[4]=e=>va("old")),class:"dropdown-item is-media"},le)])),_:1}),g(H,null,{default:k((()=>[g(z,{onClick:c[5]||(c[5]=e=>ra("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:k((()=>[x(" Lead Opportunity ")])),_:1})])),_:1})]),h("div",te,[h("div",se,[h("div",ne,[h("div",ie,[h("div",oe,[h("ul",null,[h("li",{class:A(["all"===y(q)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:c[6]||(c[6]=I(L((e=>q.value="all"),["prevent"]),["space"])),onClick:c[7]||(c[7]=e=>q.value="all")},re,32)],2),h("li",{class:A(["completed"===y(q)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:c[8]||(c[8]=I(L((e=>q.value="completed"),["prevent"]),["space"])),onClick:c[9]||(c[9]=e=>q.value="completed")},de,32)],2),ce])])])]),y(fa)?.length?V("",!0):(v(),b(K,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ue,pe])),_:1})),"all"===y(q)?(v(),f("div",me,[y(fa)?.length?(v(),b(ma,{key:0,data:y(fa),columns:sa,compact:""},{body:k((()=>[g(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(v(!0),f(P,null,S(y(fa),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:k((()=>[e.clientInfo?(v(),f("div",_e,[h("span",ve,U(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),h("span",fe,[h("span",null,U(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):V("",!0),e.contractor_info?(v(),f("div",ye,[h("span",be,U(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),h("span",he,[h("span",null,U(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):V("",!0)])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:k((()=>[h("div",null,[h("span",ge,U(e.title?e.title:"N/A"),1),h("span",ke,[h("span",null,U(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:k((()=>[h("div",null,[h("span",je,U(y(R)(e.created)),1),h("span",we,[h("span",null,"At:"+U(y(W)(e.created)),1)])])])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:k((()=>[g(Ye,{class:"capitalized",color:y(X)[e.status],rounded:""},{default:k((()=>[x(U(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:k((()=>[h("div",null,[(v(!0),f(P,null,S(e.managers_list,(e=>j((v(),b(na,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[ka,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),g(B,{column:{align:"end"}},{default:k((()=>[g(F,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:k((({close:a})=>[h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)}},xe,8,Ce),h("a",{role:"menuitem",onClick:a=>pa(e.id),class:"dropdown-item is-media"},Ie,8,Ae),h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:L((a=>ra(e.id)),["prevent"])},Pe,8,Ve),Se,h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:L((a=>ca(e.id)),["prevent"])},$e,8,Oe)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):V("",!0),y(fa)?.length>5?(v(),b(_a,{key:1,"current-page":y(ea),"onUpdate:currentPage":c[10]||(c[10]=e=>C(ea)?ea.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):V("",!0)])):V("",!0),"completed"===y(q)?(v(),f("div",Ne,[y(ya)?.length?(v(),b(ma,{key:0,data:y(ya),columns:sa,compact:""},{body:k((()=>[g(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(v(!0),f(P,null,S(y(ya),(e=>(v(),f("div",{key:e.id,class:"flex-table-item"},[g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:k((()=>[e.clientInfo?(v(),f("div",Le,[h("span",Ue,U(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),h("span",De,[h("span",null,U(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):V("",!0),e.contractor_info?(v(),f("div",Me,[h("span",Te,U(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),h("span",Ee,[h("span",null,U(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):V("",!0)])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:k((()=>[h("div",null,[h("span",Je,U(e.title?e.title:"N/A"),1),h("span",Fe,[h("span",null,U(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:k((()=>[h("div",null,[h("span",ze,U(y(R)(e.created)),1),h("span",He,[h("span",null,"At:"+U(y(W)(e.created)),1)])])])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:k((()=>[g(Ye,{class:"capitalized",color:y(X)[e.status],rounded:""},{default:k((()=>[x(U(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),g(B,{onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:k((()=>[h("div",null,[(v(!0),f(P,null,S(e.managers_list,(e=>j((v(),b(na,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[ka,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),g(B,{column:{align:"end"}},{default:k((()=>[g(F,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:k((({close:a})=>[h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{y(D).push(`/sidebar/dashboard/jobs/${e.id}`)}},Re,8,Ke),h("a",{role:"menuitem",onClick:a=>pa(e.id),class:"dropdown-item is-media"},Xe,8,We),h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:L((a=>ra(e.id)),["prevent"])},Ze,8,Be),qe,h("a",{role:"menuitem",class:"dropdown-item is-media",onClick:L((a=>ca(e.id)),["prevent"])},Qe,8,Ge)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):V("",!0),y(ya)?.length>5?(v(),b(_a,{key:1,"current-page":y(ea),"onUpdate:currentPage":c[11]||(c[11]=e=>C(ea)?ea.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):V("",!0)])):V("",!0)])])])),y(ta)?(v(),b(ba,{key:2,addUpdateLeadModal:y(ta),leadId:y(oa),"onUpdate:modalHandler":c[12]||(c[12]=e=>ta.value=!1),"onUpdate:OnSuccess":ia},null,8,["addUpdateLeadModal","leadId"])):V("",!0),y(da).isSweetAlertOpen?(v(),b(ha,{key:3,isSweetAlertOpen:y(da).isSweetAlertOpen,title:y(da).title,subtitle:y(da).subtitle,loading:y(Z),btntext:y(da).btntext,onConfirm:ua,onCancel:()=>y(da).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):V("",!0),y(la)?(v(),b(ga,{key:4,"lead-proposal-modal":y(la),"lead-id":y(oa),"onUpdate:modalHandler":c[13]||(c[13]=e=>la.value=!1),"onUpdate:OnSuccess":ia},null,8,["lead-proposal-modal","lead-id"])):V("",!0)])}}}),ea=d({__name:"index",setup:e=>(Z().setPageTitle("Jobs"),D({title:"Jobs - Ibex"}),(e,a)=>{const l=Ye;return v(),f("div",null,[g(l)])})});"function"==typeof q&&q(ea);export{ea as default};
