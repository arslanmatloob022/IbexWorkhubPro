import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-4e1acbcc.js";import{c as t,u as a}from"./CreateProposalTasksModal-7c7276b8.js";import{f as l,aw as o,m as s,$ as i,C as n,D as r,Z as d,r as u,o as p,B as c,O as _,G as m,E as f,F as g,V as y,W as v,K as b,N as h,J as k,P as C,Q as w,R as P,S as T,k as V,aS as x,U as S}from"./index-99e15d25.js";import{_ as M}from"./VTextarea.vue_vue_type_script_setup_true_lang-646ee24f.js";import{_ as j}from"./VInput.vue_vue_type_script_setup_true_lang-1069e5b5.js";import{_ as I}from"./VField.vue_vue_type_script_setup_true_lang-0a6f32d2.js";import{_ as U}from"./VControl-d58d6ce6.js";import{_ as A}from"./VRadio.vue_vue_type_style_index_0_lang-bad19ce8.js";import{_ as q}from"./VLabel.vue_vue_type_script_setup_true_lang-0d8baa39.js";import{_ as R}from"./V-Snack.vue_vue_type_style_index_0_lang-6994e0c2.js";import{_ as G}from"./VIcon.vue_vue_type_script_setup_true_lang-85af6c15.js";import{u as E}from"./useAPI-c55c1b44.js";import{c as H}from"./costItems-bbbb123a.js";import{u as L}from"./useNotyf-b5c4c6a6.js";import{_ as Z}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-ecf55c35.js";import{_ as D,c as $}from"./VFlexTable.vue_vue_type_style_index_0_lang-66aa0732.js";import{_ as B}from"./VCheckbox.vue_vue_type_style_index_0_lang-b94018db.js";import{_ as O}from"./VTag.vue_vue_type_style_index_0_lang-e95af7d6.js";import{_ as F}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-566a44c3.js";import{_ as N,a as Q}from"./search-4-dark-2b5b440c.js";import{d as z}from"./useSupportElement-dd6ff5a3.js";import{_ as J}from"./VAvatar.vue_vue_type_style_index_0_lang-9690dec4.js";const W={class:"v-grid"},K=l({__name:"VGrid",props:{inline:{type:Boolean},gridTemplateColumns:{default:"none"},gridTemplateRows:{default:"none"},gridTemplateAreas:{default:"none"},columnGap:{default:"normal"},rowGap:{default:"normal"},justifyItems:{default:"initial"},alignItems:{default:"initial"},justifyContent:{default:"initial"},alignContent:{default:"initial"},placeContent:{default:"normal"},gridAutoColumns:{default:"auto"},gridAutoRows:{default:"auto"},gridAutoFlow:{default:"row"}},setup(e){const t=e;o((e=>({"36a9ff9c":s(a),"644edfcf":t.gridTemplateColumns,"13ee8f27":t.gridTemplateRows,"68f4ddf8":t.gridTemplateAreas,"3f6d0412":t.columnGap,"9b29192c":t.rowGap,"6ce21d44":t.justifyItems,"274efcee":t.alignItems,"5c2c4e97":t.justifyContent,"1a5afffc":t.alignContent,68195080:t.placeContent,d4bc820c:t.gridAutoColumns,"07161048":t.gridAutoRows,"0721119e":t.gridAutoFlow})));const a=i((()=>t.inline?"inline-grid":"grid"));return(e,t)=>(n(),r("div",W,[d(e.$slots,"default")]))}}),X={class:"v-grid-item"},Y=l({__name:"VGridItem",props:{gridColumnStart:{default:"auto"},gridColumnEnd:{default:"auto"},gridRowStart:{default:"auto"},gridRowEnd:{default:"auto"},justifySelf:{default:"auto"},alignSelf:{default:"auto"},placeSelf:{default:"auto"}},setup(e){const t=e;return o((e=>({"639fd2f2":t.gridColumnStart,"0928fb6b":t.gridColumnEnd,"58f2dc22":t.gridRowStart,"690c909b":t.gridRowEnd,"4e453368":t.justifySelf,"3160ef46":t.alignSelf,"2e640d42":t.placeSelf}))),(e,t)=>(n(),r("div",X,[d(e.$slots,"default")]))}}),ee={class:"columns is-multiline"},te={class:"column is-12"},ae=(e=>(w("data-v-9236e8e6"),e=e(),P(),e))((()=>f("div",{class:"column is-12 p-0 m-0"},[f("hr")],-1))),le={class:"column is-12"},oe={class:"column is-12"},se={key:0,class:"column is-12"},ie={class:"column is-12"},ne={class:"column is-12"},re=T(l({__name:"MergeProposalModal",props:{groupProposalModal:{type:Boolean,default:!1},leadID:{default:""},selectedProposals:{default:[]}},emits:["update:modalHandler","update:OnSuccess","removeProposal"],setup(t,{emit:a}){const l=t,o=u(!1),i=E(),d=L(),w=u(!1),P=u([{value:"",label:""}]);u([{id:"",proposalAmount:0,title:"",approval_deadline:"",internal_notes:"",introductory_text:"",closing_text:"",payment_status:"",type:"",status:"",created_at:"",updated_at:"",job:""}]);const T=l.selectedProposals.map((e=>e.id)),V=u({title:"",type:"combined",description:"",proposals:T,trades:[],columns_to_show:[]}),x=()=>{a("update:modalHandler",!1)},S=async()=>{try{o.value=!0;let e=V.value;1==w.value?e.columns_to_show=JSON.stringify(V.value.columns_to_show):e.columns_to_show=[],e.proposals=JSON.stringify(V.value.proposals);const t=await i.post("/api/lead-proposal/merge-proposals/",e,{responseType:"blob"}),a=new Blob([t.data],{type:"application/pdf"}),l=window.URL.createObjectURL(a),s=document.createElement("a");s.href=l,s.download="Merged_Proposal.pdf",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(l),x(),d.success("Proposal grouped successfully and saved in documents list")}catch(e){console.log("error found")}finally{o.value=!1}};return p((()=>{(async()=>{try{const e=await i.get("/api/cost-category/");P.value=e.data.map((e=>({value:e.id,label:e.name})))}catch(e){console.log(e)}})()})),(t,i)=>{const d=G,u=R,p=Y,T=K,E=q,L=A,Z=U,D=I,$=j,B=c("Multiselect"),O=M,F=C,N=e;return n(),_(N,{is:"form",open:l.groupProposalModal,title:"Group Proposal",size:"large",actions:"right",onSubmit:k(S,["prevent"]),onClose:x},{content:m((()=>[f("div",ee,[f("div",te,[g(T,null,{default:m((()=>[g(p,null,{default:m((()=>[(n(!0),r(y,null,v(l.selectedProposals,(e=>(n(),_(u,{title:e.title,white:"",class:"m-1",icon:"lnir lnir-envelope"},{default:m((()=>[g(d,{onClick:t=>(e=>{a("removeProposal",e)})(e),icon:"lucide:x"},null,8,["onClick"])])),_:2},1032,["title"])))),256))])),_:1})])),_:1})]),ae,f("div",le,[g(D,null,{default:m((()=>[g(E,{style:{color:"var(--info) !important"}},{default:m((()=>[b("Select Group Type")])),_:1}),g(Z,null,{default:m((()=>[g(L,{modelValue:s(V).type,"onUpdate:modelValue":i[0]||(i[0]=e=>s(V).type=e),value:"combined",label:"Combine Proposals",name:"outlined_squared_radio",color:"warning",square:""},null,8,["modelValue"]),g(L,{modelValue:s(V).type,"onUpdate:modelValue":i[1]||(i[1]=e=>s(V).type=e),value:"trade",label:"Trade Proposal",name:"outlined_squared_radio",color:"primary",square:""},null,8,["modelValue"]),g(L,{modelValue:s(V).type,"onUpdate:modelValue":i[2]||(i[2]=e=>s(V).type=e),value:"summary",label:"Summary Proposal",name:"outlined_squared_radio",color:"info",square:""},null,8,["modelValue"]),g(L,{modelValue:s(V).type,"onUpdate:modelValue":i[3]||(i[3]=e=>s(V).type=e),value:"report",label:"Report",name:"outlined_squared_radio",color:"success",square:""},null,8,["modelValue"])])),_:1})])),_:1})]),f("div",oe,[g(D,{label:"Proposal Title *"},{default:m((()=>[g(Z,null,{default:m((()=>[g($,{modelValue:s(V).title,"onUpdate:modelValue":i[4]||(i[4]=e=>s(V).title=e),placeholder:"Enter Group Proposal Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),s(w)?(n(),r("div",se,[g(D,{label:"Choose what to merge in show in group proposal"},{default:m((({id:e})=>[g(Z,null,{default:m((()=>[g(B,{modelValue:s(V).columns_to_show,"onUpdate:modelValue":i[5]||(i[5]=e=>s(V).columns_to_show=e),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:s(H),placeholder:"Add columns"},null,8,["modelValue","attrs","options"])])),_:2},1024)])),_:1})])):h("",!0),f("div",ie,["trade"==s(V).type?(n(),_(D,{key:0,label:"Select the trades to merge"},{default:m((({id:e})=>[g(Z,null,{default:m((()=>[g(B,{modelValue:s(V).trades,"onUpdate:modelValue":i[6]||(i[6]=e=>s(V).trades=e),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:s(P),placeholder:"Select Trade"},null,8,["modelValue","attrs","options"])])),_:2},1024)])),_:1})):h("",!0)]),f("div",ne,[g(D,{label:"Group Description"},{default:m((()=>[g(Z,null,{default:m((()=>[g(O,{modelValue:s(V).description,"onUpdate:modelValue":i[7]||(i[7]=e=>s(V).description=e),placeholder:"Enter Group Proposal Title",rows:"3",type:"text"},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:m((()=>[g(F,{loading:s(o),type:"submit",color:"warning",raised:""},{default:m((()=>[b("Group Proposals")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),[["__scopeId","data-v-9236e8e6"]]),de=e=>(w("data-v-1cbfdf6b"),e=e(),P(),e),ue={class:"columns is-multiline"},pe={class:"column is-12 is-flex space-between"},ce=de((()=>f("div",null,null,-1))),_e={class:"is-flex"},me={class:"column is-12"},fe={class:"flex-list-wrapper flex-list-v2"},ge=de((()=>f("img",{class:"light-image",src:N,alt:""},null,-1))),ye=de((()=>f("img",{class:"dark-image",src:Q,alt:""},null,-1))),ve={class:"tab-content is-active"},be={class:"item-name dark-inverted"},he={class:"item-meta"},ke={class:"light-text"},Ce=T(l({__name:"ProposalGroupModal",props:{leadProposalListModal:{type:Boolean},leadID:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(a,{emit:l}){const o=a,d=u([{id:"",proposalAmount:0,title:"",approval_deadline:"",internal_notes:"",introductory_text:"",closing_text:"",payment_status:"",type:"",status:"",created_at:"",updated_at:"",job:""}]),k=u("combine"),w=u(!1),P=u("active"),T=E(),M=u([]),j=u([{value:"",label:""}]),A=u(!1),q=u([]);q.value.map((e=>e.id));const R=u(""),G={picture:{label:"Proposal",grow:!0,media:!0},customer:"Type",industry:"Amount",status:"Status",team:{label:"Payment"},actions:{label:"Select",align:"end"}},H=u(!1),L=e=>{const t=q.value.findIndex((t=>t.id===e.id));-1!==t?q.value.splice(t,1):q.value.push(e)},N=i((()=>{if(R.value){const e=new RegExp(R.value,"i");return d.value.filter((t=>t.title.match(e)||t.description.match(e)))}return d.value})),Q=()=>{l("update:modalHandler",!1)};return p((()=>{(async()=>{try{w.value=!0;const e=await T.get(`/api/lead-proposal/by-project/${o.leadID}/`);d.value=e.data}catch(e){console.log(e)}finally{w.value=!1}})(),(async()=>{try{const e=await T.get("/api/cost-trade/");j.value=e.data.map((e=>({value:e.id,label:e.name})))}catch(e){console.log(e)}})()})),(a,l)=>{const i=c("Multiselect"),d=U,u=I,p=C,T=F,R=$,E=O,J=B,W=D,K=Z,X=re,Y=t,ee=e;return n(),_(ee,{is:"form",open:o.leadProposalListModal,title:"Proposal List",size:"xl",actions:"right",onClose:Q},{content:m((()=>[f("div",ue,[f("div",pe,[ce,f("div",_e,["trade"==s(k)?(n(),_(u,{key:0,style:{width:"340px"}},{default:m((({id:e})=>[g(d,null,{default:m((()=>[g(i,{modelValue:s(M),"onUpdate:modelValue":l[0]||(l[0]=e=>V(M)?M.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:s(j),placeholder:"Select Trades"},null,8,["modelValue","attrs","options"])])),_:2},1024)])),_:1})):h("",!0),g(p,{class:"ml-2",onClick:l[1]||(l[1]=e=>A.value=!s(A)),raised:"",color:"warning",light:"",outlined:"",icon:"lnil lnil-files-alt",disabled:!s(q).length},{default:m((()=>[b(" Group Proposal ")])),_:1},8,["disabled"]),g(p,{class:"ml-2",raised:"",icon:"fas fa-envelope",color:"info",light:"",disabled:!s(q).length,outlined:"",onClick:l[2]||(l[2]=e=>{H.value=!H.value})},{default:m((()=>[b(" Send ")])),_:1},8,["disabled"])])]),f("div",me,[f("div",fe,["active"===s(P)&&0===s(N).length?(n(),_(T,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:m((()=>[ge,ye])),_:1})):h("",!0),f("div",ve,[s(N).length?(n(),_(W,{key:0,data:s(N),columns:G,rounded:""},{body:m((()=>[g(x,{name:"list",tag:"div",class:"flex-list-inner"},{default:m((()=>[(n(!0),r(y,null,v(s(N),(e=>(n(),r("div",{key:e.id,class:"flex-table-item"},[g(R,{column:{media:!0,grow:!0}},{default:m((()=>[f("div",null,[f("span",be,S(e.title??"N/A"),1),f("span",he,[f("span",null,S(s(z)(e.created_at)),1)])])])),_:2},1024),g(R,null,{default:m((()=>[g(E,null,{default:m((()=>[b(S(e.type),1)])),_:2},1024)])),_:2},1024),g(R,null,{default:m((()=>[f("span",ke,"$"+S(e.proposalAmount),1)])),_:2},1024),g(R,null,{default:m((()=>[g(E,{rounded:""},{default:m((()=>[b(S(e.status),1)])),_:2},1024)])),_:2},1024),g(R,null,{default:m((()=>[g(E,{rounded:""},{default:m((()=>[b(S(e.status),1)])),_:2},1024)])),_:2},1024),g(R,{column:{align:"end"}},{default:m((()=>[g(d,{raw:"",subcontrol:""},{default:m((()=>[g(J,{onClick:()=>{L(e)},modelValue:e.payment_status,"onUpdate:modelValue":t=>e.payment_status=t,label:"",color:"primary"},null,8,["onClick","modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):h("",!0),s(N).length>5?(n(),_(K,{key:1,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":7})):h("",!0)])])]),s(A)?(n(),_(X,{key:0,groupProposalModal:s(A),selectedProposals:s(q),onRemoveProposal:L,"onUpdate:modalHandler":l[3]||(l[3]=e=>A.value=!s(A))},null,8,["groupProposalModal","selectedProposals"])):h("",!0),s(H)?(n(),_(Y,{key:1,proposalSenderModal:s(H),selectedProposalsIds:s(q),"onUpdate:modalHandler":l[4]||(l[4]=e=>H.value=!1)},null,8,["proposalSenderModal","selectedProposalsIds"])):h("",!0)])])),action:m((()=>[g(p,{loading:s(w),style:{display:"none"},color:"warning",raised:"",onClick:Q},{default:m((()=>[b("Close")])),_:1},8,["loading"])])),_:1},8,["open"])}}}),[["__scopeId","data-v-1cbfdf6b"]]),we=u([{id:"12347",title:"Electrical Wiring",cost_code:"040100",cost_type:"Material",unit_cost:20,quantity:500,unit:"meters",total_cost:1e4,price:750,markup:15,markup_type:"percentage",markup_value:1500,markup_amount:3e3,unit_price:50,tax_rate:7.5,client_price:12000.9,total_price:9e3,builder_cost:825,group_price:78987,grand_total:12325,total_markup:9874567,mark_as:"catalogue_item",description:"Electrical wiring and related materials.",internal_notes:"Include wiring for backup generator.",created_by:"user125",created_date:"2024-12-22T12:00:00Z",updated_by:"user125",updated_date:"2024-12-22T13:00:00Z",approved_by:"manager458",approval_date:"2024-12-22T18:00:00Z",status:"pending",category:"Electrical",tags:["wiring","electrical","materials"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!1},front_end_elements:{highlighted:!1,background_color:"#f0f0f0",font_color:"#000000",display_order:3,editable:!0}},{id:"56789",title:"Plumbing Fixtures",cost_code:"050200",cost_type:"Labor",unit_cost:45,quantity:200,unit:"hours",total_cost:9e3,price:1500,markup:20,markup_type:"percentage",markup_value:1800,markup_amount:3600,unit_price:75,tax_rate:8,client_price:12000.9,total_price:10800,builder_cost:950,group_price:67890,grand_total:13200,total_markup:1234567,mark_as:"custom_item",description:"Installation of plumbing fixtures.",internal_notes:"Check water pressure before installation.",created_by:"user456",created_date:"2024-11-30T09:00:00Z",updated_by:"user456",updated_date:"2024-12-01T10:00:00Z",approved_by:"manager123",approval_date:"2024-12-01T15:00:00Z",status:"approved",category:"Plumbing",tags:["plumbing","fixtures","labor"],attachments:[],visibility:{admin:!0,internal_only:!0,shared_with_client:!1},front_end_elements:{highlighted:!0,background_color:"#ffffff",font_color:"#333333",display_order:1,editable:!1}},{id:"90123",title:"HVAC Installation",cost_code:"070300",cost_type:"Service",unit_cost:75,quantity:50,unit:"units",total_cost:3750,client_price:12000.9,price:850,markup:10,markup_type:"fixed",markup_value:850,markup_amount:1700,unit_price:95,tax_rate:6.5,total_price:4200,builder_cost:1025,group_price:56789,grand_total:15500,total_markup:654321,mark_as:"service_item",description:"HVAC system installation and setup.",internal_notes:"Ensure proper duct sealing.",created_by:"user789",created_date:"2024-12-10T14:00:00Z",updated_by:"user789",updated_date:"2024-12-15T11:30:00Z",approved_by:"manager567",approval_date:"2024-12-16T09:00:00Z",status:"completed",category:"HVAC",tags:["HVAC","installation","service"],attachments:[],visibility:{admin:!0,internal_only:!1,shared_with_client:!0},front_end_elements:{highlighted:!0,background_color:"#e6e6e6",font_color:"#111111",display_order:2,editable:!0}},{id:"34567",title:"Roofing Materials",cost_code:"080500",cost_type:"Material",unit_cost:30,quantity:1e3,unit:"sheets",total_cost:3e4,client_price:12000.9,price:1200,markup:25,markup_type:"percentage",markup_value:3e3,markup_amount:7500,unit_price:90,tax_rate:9,total_price:32700,builder_cost:1125,group_price:43210,grand_total:37500,total_markup:98765,mark_as:"material_item",description:"High-quality roofing materials.",internal_notes:"Ensure weather-resistant properties.",created_by:"user321",created_date:"2024-12-05T08:00:00Z",updated_by:"user321",updated_date:"2024-12-06T12:00:00Z",approved_by:"manager789",approval_date:"2024-12-07T14:00:00Z",status:"pending",category:"Roofing",tags:["roofing","materials","construction"],attachments:[],visibility:{admin:!1,internal_only:!0,shared_with_client:!0},front_end_elements:{highlighted:!1,background_color:"#dddddd",font_color:"#444444",display_order:4,editable:!1}}]);u({CostCode:"Cost Code",Title:"Title",Unit:"Unit",Description:"Description",CostType:"Cost Type",MarkAs:"Mark As",Quantity:"Quantity",UnitCost:"Unit Cost",BuilderCost:"Builder Cost",Markup:"Markup",MarkupAmount:"Markup Amount",Status:"Status",ClientPrice:"Client Price",GroupPrice:"Group Price",TotalCost:"Total Cost",TotalMarkup:"Total Markup",Profit:"Profit",Notes:"Internal Notes",State:"State"}),u({CostCode:"cost_code",Title:"title",Unit:"unit",Description:"description",CostType:"cost_type",MarkAs:"mark_as",Quantity:"quantity",UnitCost:"unit_cost",ClientPrice:"total_price",BuilderCost:"builder_cost",Markup:"markup",Status:"status",GroupPrice:"group_amount",TotalMarkup:"total_markup",Profit:"profit",Notes:"internal_notes",MarkupAmount:"markup_amount"});const Pe={class:"columns is-multiline"},Te={class:"column is-12"},Ve={class:"invoice-wrapper"},xe=f("div",{class:"invoice-header"},[f("div",{class:"left"},[f("h3",null,"Proposal-ID PD-456-14")]),f("div",{class:"right"},[f("div",{class:"controls"},[f("a",{class:"action"},[f("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:printer"})]),f("a",{class:"action"},[f("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:download-cloud"})]),f("a",{class:"action"},[f("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:mail"})])])])],-1),Se={class:"invoice-body"},Me={class:"invoice-card"},je={class:"invoice-section is-flex is-bordered"},Ie=f("div",{class:"meta"},null,-1),Ue=f("div",{class:"end"},[f("span",null,"PO Box 242"),f("span",null,"Evergreen, CO 80437-0242"),f("span",null,"Phone: 720 272-9061"),f("span",null,"Premium Trades for Premier Builders")],-1),Ae=f("div",{class:"invoice-section is-flex is-bordered"},[f("div",{class:"meta"},[f("h3",null,"Client Name"),f("span",null,"Client Phone"),f("span",null,"25724 Independence Trail Evergreen, CO 80439")]),f("div",{class:"end is-left"},[f("h3",null,"Friday Jan 17, 2025"),f("p",null," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quod equidem non reprehendo. ")])],-1),qe={key:0,class:"invoice-section"},Re={class:"responsive-table"},Ge=f("br",null,null,-1),Ee=["innerHTML"],He={class:"invoice-section is-flex mt-0 pt-0"},Le={class:"end is-left"},Ze={class:"text-right"},De=f("p",null,"Mentioned price are final",-1),$e=l({__name:"ProposalViewModal",props:{previewModal:{type:Boolean},columnsToShow:{default:!1},proposalId:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(t,{emit:l}){const o=t,d=E();a();const c=u([{name:"Website Redesign",unit:"hrs",quantity:54,rate:24},{name:"Logo Design",unit:"hrs",quantity:12,rate:24},{name:"Custom Illustrations",unit:"hrs",quantity:7,rate:32}]);i((()=>{const e=c.value.reduce(((e,t)=>e+t.quantity*t.rate),0),t=.1*e;return[{label:"Subtotal",value:e},{label:"Taxes",value:t},{label:"Total",value:e+t}]}));const k=["Item","Description","Unit Cost","Qty","Unit","Builder Cost","Markup","Total Price"];u(""),u(!0),u(!0),u(!0),u(!0);const w=i((()=>we.value.reduce(((e,t)=>e+t.price*t.quantity),0))),P=u(!1);u({id:"c897de41-609f-4a20-8d79-0537b6a873d6",title:"Test Lead's Proposal",approval_deadline:"2025-01-30",internal_notes:null,introductory_text:null,closing_text:null,payment_status:"Pending",type:"proposal",status:"pending",created_at:"2025-01-21T19:08:06.509861Z",updated_at:"2025-01-21T19:08:06.509875Z",job:"da0aa7c1-3744-4856-a637-e5a821f5ec7e"});const T=u([{id:"5e7d026a-b392-47e9-9d24-58fbc1de12c5",index:1,title:"Test Lead Proposal Item",description:"<p>Description</p>",type:"",quantity:100,unit:"Sq ft",unit_cost:"10.00",markup:"150.00",total_price:"1150.00",cost_code:"11012",cost_type:"material",builder_cost:"1000.00",margin:"1.00",profit:"0.00",internal_notes:"Internal notes",mark_as:"bid",state:"active",group_amount:"0.00",status:null,created_at:"2025-01-23T18:25:46.392750Z",proposal:"c897de41-609f-4a20-8d79-0537b6a873d6"}]),V=()=>{l("update:modalHandler",!1)},x=async()=>{try{const e=await d.get(`api/cost/by-proposal/${o.proposalId}/`);T.value=e.data}catch(e){console.log(e)}};return p((()=>{(async()=>{try{P.value=!0,await d.get(`/api/lead-proposal/${o.proposalId}/`),x()}catch(e){console.log(e)}finally{P.value=!1}})()})),(t,a)=>{const l=J,i=C,d=e;return n(),_(d,{is:"form",open:o.previewModal,title:"Cost Item ",size:"xl",actions:"right",onClose:V},{content:m((()=>[f("div",Pe,[f("div",Te,[f("div",Ve,[xe,f("div",Se,[f("div",Me,[f("div",je,[g(l,{size:"xl",picture:"/logos/IbexFavicon.png"}),Ie,Ue]),Ae,s(T).length?(n(),r("div",qe,[f("table",Re,[f("thead",null,[(n(),r(y,null,v(k,((e,t)=>f("th",{key:t},S(e),1))),64))]),f("tbody",null,[(n(!0),r(y,null,v(s(T),((e,t)=>(n(),r("tr",{key:e.id},[f("td",null,[f("span",null,S(e.title),1),Ge,f("span",null,S(e.cost_code),1)]),f("td",null,[f("span",{innerHTML:e.description},null,8,Ee)]),f("td",null,[f("span",null," $"+S(e.unit_cost),1)]),f("td",null,[f("span",null,S(e.quantity),1)]),f("td",null,[f("span",null,S(e.unit),1)]),f("td",null,[f("span",null," $"+S(e.builder_cost),1)]),f("td",null,[f("span",null," $"+S(e.markup),1)]),f("td",null,[f("span",null," $"+S(e.total_price),1)])])))),128))])])])):h("",!0),f("div",He,[f("div",Le,[f("h3",Ze,"Total Price: $"+S(s(w)),1),De])])])])])])])])),action:m((()=>[g(i,{loading:s(P),type:"submit",color:"warning",raised:"",onClick:V},{default:m((()=>[b("Close")])),_:1},8,["loading"])])),_:1},8,["open"])}}});export{$e as _,Ce as a};
