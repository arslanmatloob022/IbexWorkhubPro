import{_ as e}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-c1b9a9d5.js";import{_ as s}from"./JobTodos.vue_vue_type_style_index_0_lang-06f5cf5b.js";import{_ as a}from"./UserProfileInfo-b8fc558f.js";import{_ as l}from"./AddUpdateUser-42e22554.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-ecf55c35.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-e95af7d6.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-9690dec4.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-566a44c3.js";import{f as o,r as u,$ as p,o as _,C as c,D as d,m as v,O as m,E as y,F as k,G as g,L as f,k as j,X as b,U as x,K as h,I as w,V,W as C,aS as I,N as P,P as T,y as S,H as A,J as U,A as K}from"./index-99e15d25.js";import{_ as M}from"./VField.vue_vue_type_script_setup_true_lang-0a6f32d2.js";import{_ as W}from"./VControl-d58d6ce6.js";import{_ as B}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-3972c039.js";import{_ as F,a as L}from"./search-1-dark-61831a90.js";import{u as O}from"./useAPI-c55c1b44.js";import{u as E}from"./useNotyf-b5c4c6a6.js";import{_ as N,a as R}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-861de133.js";import{_ as H}from"./WorkerCalendar.vue_vue_type_style_index_0_lang-2c1ab529.js";import{u as J}from"./viewWrapper-f7e223f8.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-694f4f5c.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-8a94bc3b.js";import"./VModal.vue_vue_type_style_index_0_lang-4e1acbcc.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-646ee24f.js";import"./useVFieldContext-c40a6a91.js";import"./VInput.vue_vue_type_script_setup_true_lang-1069e5b5.js";import"./VOption.vue_vue_type_style_index_0_lang-9bcebb03.js";import"./useSupportElement-dd6ff5a3.js";import"./estimatesScripts-43ca9e77.js";import"./VIcon.vue_vue_type_script_setup_true_lang-85af6c15.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-dfcd1980.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-a7e06dff.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-5c82d083.js";import"./search-3-dark-1eb6ae2e.js";import"./VBlock.vue_vue_type_style_index_0_lang-8b260d30.js";import"./VIconButton-11100a3f.js";import"./having-coffee-dark-69a7d2f6.js";import"./moment-bad41465.js";import"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-73352461.js";import"./VLabel.vue_vue_type_script_setup_true_lang-0d8baa39.js";import"./VIconBox.vue_vue_type_style_index_0_lang-2a71b0d4.js";import"./route-block-83d24a4e.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-7659fadc.js";import"./VFilePond.vue_vue_type_script_lang-43d81b4d.js";import"./VFlex.vue_vue_type_style_index_0_lang-4d46da06.js";import"./VPlaceloadWrap-154df3c1.js";import"./notyf-4c2a0882.js";import"./useThemeColors-a20eef99.js";import"./TaskInfoModal.vue_vue_type_script_setup_true_lang-f1d6bab1.js";import"./search-6-dark-6c9b195a.js";import"./via-placeholder-24645670.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-8400ca94.js";import"./UpdateTask.vue_vue_type_script_setup_true_lang-26bdef58.js";import"./VDropdown.vue_vue_type_style_index_0_lang-005157a7.js";import"./useDropdown-19db524c.js";import"./projects-dark-4a371d8a.js";import"./VFlexTable.vue_vue_type_style_index_0_lang-66aa0732.js";import"./search-4-dark-2b5b440c.js";import"./index-c1fc2d09.js";import"./FullCalendar-c763dd03.js";import"./index-37bedc79.js";import"./index-04e05ac8.js";const $={key:1},z={class:"list-view-toolbar"},D={class:"list-info"},q={key:0},G={key:1},X={class:"buttons"},Y={class:"page-content-inner"},Z={class:"list-view list-view-v1"},Q=y("img",{class:"light-image",src:F,alt:""},null,-1),ee=y("img",{class:"dark-image",src:L,alt:""},null,-1),se={class:"list-view-inner"},ae={class:"list-view-item-inner"},le={class:"meta-left"},te=y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),ie={class:"meta-right"},ne={class:"tags"},re={class:"stats"},oe={class:"stat"},ue=y("span",null,"Status",-1),pe=y("div",{class:"separator"},null,-1),_e={class:"stat"},ce=y("span",null,"Active tasks",-1),de=y("div",{class:"separator"},null,-1),ve={class:"stat"},me=y("span",null,"Pending tasks",-1),ye=o({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(e){const s=e,a=O();E();const o=u(!1),S=u({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),A=u(""),U=p((()=>A.value?S.value.filter((e=>e.username.match(new RegExp(A.value,"i"))||e.email.match(new RegExp(A.value,"i")))):S.value));console.log(U.value);const K=u(!1),F=()=>{K.value=!0},L=async()=>{try{o.value=!0;const e=await a.get(`/api/users/workers/?supplier=${s.supplierId}`);S.value=e.data}catch(e){console.log(e)}finally{o.value=!1}};return _((()=>{L()})),(e,a)=>{const u=B,p=W,_=M,S=T,O=r,E=n,N=i,R=t,H=l;return c(),d(V,null,[v(o)?(c(),m(u,{key:0})):(c(),d("div",$,[y("div",z,[k(_,null,{default:g((()=>[k(p,{icon:"feather:search"},{default:g((()=>[f(y("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>j(A)?A.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,v(A)]])])),_:1})])),_:1}),y("div",D,[1===v(U).length?(c(),d("span",q,"1 record found")):(c(),d("span",G,x(v(U).length)+" records found",1))]),y("div",X,[k(S,{color:"primary",onClick:F,icon:"fas fa-plus",elevated:""},{default:g((()=>[h(" Worker ")])),_:1})])]),y("div",Y,[y("div",Z,[k(O,{class:w([0!==v(U).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[Q,ee])),_:1},8,["class"]),y("div",se,[k(I,{name:"list-complete",tag:"div"},{default:g((()=>[(c(!0),d(V,null,C(v(U),((e,s)=>(c(),d("div",{key:s,class:"list-view-item"},[y("div",ae,[k(E,{picture:e.avatar,size:"large"},null,8,["picture"]),y("div",le,[y("h3",null,x(e.username),1),y("span",null,[te,y("span",null,x(e.email),1)])]),y("div",ie,[y("div",ne,[k(N,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),y("div",re,[y("div",oe,[y("span",null,x(e.is_active?"Active":"In-Active"),1),ue]),pe,y("div",_e,[y("span",null,x(e.active_tasks),1),ce]),de,y("div",ve,[y("span",null,x(e.pending_tasks),1),me])])])])])))),128))])),_:1})])]),v(U).length>5?(c(),m(R,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):P("",!0)])])),v(K)?(c(),m(H,{key:2,isModalOpen:v(K),supplierId:s.supplierId,userRole:"worker","onUpdate:closeModalHandler":a[1]||(a[1]=e=>K.value=!1),"onUpdate:actionUpdateHandler":L},null,8,["isModalOpen","supplierId"])):P("",!0)],64)}}}),ke={class:"lifestyle-dashboard lifestyle-dashboard-v3"},ge={class:"illustration-header"},fe={class:"p-4"},je={class:"header-meta"},be={class:"summary-stats"},xe={class:"summary-stat"},he=y("span",null,"Role",-1),we={class:"summary-stat"},Ve=y("span",null,"Email",-1),Ce={class:"tabs-wrapper"},Ie={class:"tabs-inner"},Pe={class:"tabs is-boxed",slider:""},Te=[y("span",null,"Tasks",-1)],Se=[y("span",null,"Workers",-1)],Ae=[y("span",null,"Profile Info",-1)],Ue=[y("span",null,"Todos",-1)],Ke=[y("span",null,"Activities",-1)],Me=y("li",{class:"tab-naver"},null,-1),We={key:0,class:"columns is-multiline is-flex-tablet-p"},Be={class:"list-flex-toolbar is-reversed"},Fe={class:"tabs-inner"},Le={class:"tabs is-boxed"},Oe=[y("span",null,"Tasks Calendar",-1)],Ee=[y("span",null,"Chronic View",-1)],Ne=[y("span",null,"Tasks",-1)],Re=y("li",{class:"tab-naver"},null,-1),He={key:0,class:"column is-12"},Je={key:1,class:"column is-12"},$e={key:2,class:"column is-12"},ze={key:1,class:"columns is-multiline is-flex-tablet-p"},De={class:"column is-12"},qe={key:2,class:"columns is-multiline is-flex-tablet-p"},Ge={class:"column is-12"},Xe={key:3,class:"columns is-multiline is-flex-tablet-p"},Ye={class:"column is-12"},Ze={key:4,class:"column is-12"},Qe=o({__name:"SubContractorProfile",setup(l){const t=O(),i=S(),r=u(!1),o=u("tasks"),p=u("calendar"),m=u({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});return _((async()=>{await(async()=>{try{r.value=!0;const e=await t.get(`/api/users/${i.params.id}`);m.value=e.data}catch(e){console.log(e)}finally{r.value=!1}})()})),(l,t)=>{const u=n,_=H,g=N,f=R,j=ye,b=a,h=s,V=e;return c(),d("div",ke,[y("div",ge,[y("div",fe,[k(u,{size:"xl",squared:"",picture:v(m).avatar,alt:""},null,8,["picture"])]),y("div",je,[y("h3",null,x(v(r)?"Loading...":v(m)?.username)+" "+x(v(m).last_name?v(m).last_name:""),1),y("div",be,[y("div",xe,[y("span",null,x(v(r)?"Loading...":"Subcontractor"),1),he]),y("div",we,[y("span",null,x(v(r)?"Loading...":v(m)?.email),1),Ve])])])]),y("div",Ce,[y("div",Ie,[y("div",Pe,[y("ul",null,[y("li",{class:w(["tasks"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=A(U((e=>o.value="tasks"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>o.value="tasks")},Te,32)],2),y("li",{class:w(["workers"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=A(U((e=>o.value="workers"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>o.value="workers")},Se,32)],2),y("li",{class:w(["profile"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=A(U((e=>o.value="profile"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>o.value="profile")},Ae,32)],2),y("li",{class:w(["todos"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=A(U((e=>o.value="todos"),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>o.value="todos")},Ue,32)],2),y("li",{class:w(["activities"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=A(U((e=>o.value="activities"),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>o.value="activities")},Ke,32)],2),Me])])])]),"tasks"==v(o)?(c(),d("div",We,[y("div",Be,[y("div",Fe,[y("div",Le,[y("ul",null,[y("li",{class:w(["calendar"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=A(U((e=>p.value="calendar"),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>p.value="calendar")},Oe,32)],2),y("li",{class:w(["chronic"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=A(U((e=>p.value="chronic"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>p.value="chronic")},Ee,32)],2),y("li",{class:w(["tasks"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=A(U((e=>p.value="tasks"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>p.value="tasks")},Ne,32)],2),Re])])])]),"calendar"==v(p)?(c(),d("div",He,[k(_,{"worker-id":v(i).params.id},null,8,["worker-id"])])):P("",!0),"chronic"==v(p)?(c(),d("div",Je,[k(g,{userId:v(i).params.id},null,8,["userId"])])):P("",!0),"tasks"==v(p)?(c(),d("div",$e,[k(f,{workerId:v(i).params.id},null,8,["workerId"])])):P("",!0)])):P("",!0),"workers"==v(o)?(c(),d("div",ze,[y("div",De,[k(j,{"supplier-id":v(i).params.id},null,8,["supplier-id"])])])):P("",!0),"profile"==v(o)?(c(),d("div",qe,[y("div",Ge,[k(b,{"user-data":v(m)},null,8,["user-data"])])])):P("",!0),"todos"==v(o)?(c(),d("div",Xe,[y("div",Ye,[k(h,{user:v(i).params.id},null,8,["user"])])])):P("",!0),"activities"===v(o)?(c(),d("div",Ze,[k(V,{user:v(i).params.id},null,8,["user"])])):P("",!0)])}}}),es={class:""},ss=o({__name:"[id]",setup:e=>(J().setPageTitle("Sub-Contractor Info"),K({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Qe;return c(),d("div",es,[k(a)])})});export{ss as default};
