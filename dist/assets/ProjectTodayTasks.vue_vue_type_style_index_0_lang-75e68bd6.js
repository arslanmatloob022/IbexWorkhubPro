import{_ as a}from"./VBlock.vue_vue_type_style_index_0_lang-21a39d16.js";import{_ as e}from"./VAvatarStack.vue_vue_type_script_setup_true_lang-d432fbac.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-5b8fbb19.js";import{u as t}from"./useNotyf-d70c19fd.js";import{u as r}from"./useAPI-a1737641.js";import{f as o,b as l,r as i,o as c,C as n,D as d,E as u,m as k,V as p,W as y,F as v,G as _,O as g,N as m,U as f}from"./index-5abab93c.js";const h={class:"list-widget is-straight"},w={class:"widget-head"},j=u("h3",{class:"dark-inverted"},"Today Tasks",-1),T={key:0,class:"inner-list"},I={href:"#"},b={key:1,class:"inner-list"},x=u("a",{href:"#"},"No Tasks Found Of This Day.",-1),C=u("span",null,"Today",-1),D=o({__name:"ProjectTodayTasks",props:{projectId:{default:""},straight:{type:Boolean,default:!1},workerId:{default:""}},setup(o){const D=o,N=l(),V=r(),R=t(),$=i({tasks:[{id:"",workers:[{id:"",username:"",email:"",role:"",avatar:""}],color:"",title:"",description:"",startDate:"",endDate:"",status:"",is_active:!1,updated:"",created:"",costCode:"",quantity:"",unit:"",fileName:null,note:null,priority:"",project:""}],stats:{active:1,completed:1,pending:1}}),A=async a=>{try{const e=await V.get(`/api/task/today-tasks/?project=${D.projectId}`);$.value=e.data.map((a=>({...a,workers:a.workers.map((a=>({...a,picture:a?.avatar,initials:a?.username?.slice(0,2).toUpperCase()})))}))),a&&R.green("Tasks list Refreshed"),console.log("data",$.value)}catch(e){console.log(e)}};return c((()=>{D.workerId?(async a=>{try{const e=await V.get(`/api/task/worker-today/${D.workerId}/`);$.value=e.data,a&&R.green("Tasks list Refreshed"),console.log("data",$.value)}catch(e){console.log(e)}})(!1):"worker"==N.user.role?(async a=>{try{const e=await V.get(`/api/task/worker-today/${N.user.id}/`);$.value=e.data,a&&R.green("Tasks list Refreshed"),console.log("data",$.value)}catch(e){console.log(e)}})(!1):A(!1)})),(t,r)=>{const o=s,l=e,i=a;return n(),d("div",h,[u("div",w,[j,u("i",{onClick:r[0]||(r[0]=a=>A(!0)),style:{color:"var(--primary)"},class:"fas fa-redo cu-pointer","aria-hidden":"true"})]),k($).length?(n(),d("div",T,[u("div",null,[(n(!0),d(p,null,y(k($),(a=>(n(),g(i,{key:a.id,center:"",lighter:"",class:"inner-list-item"},{icon:_((()=>[v(o,{icon:"lucide:clock","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:_((()=>[a.workers.length?(n(),g(l,{key:0,avatars:a.workers,size:"small",limit:3},null,8,["avatars"])):m("",!0)])),default:_((()=>[u("a",I,f(a.title),1),u("span",null,f(a.status),1)])),_:2},1024)))),128))])])):(n(),d("div",b,[u("div",null,[v(i,{center:"",lighter:"",class:"inner-list-item"},{icon:_((()=>[v(o,{icon:"lucide:check","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:_((()=>[v(o,{color:"success","has-background":"","has-large-icon":"",icon:"fas fa-check-circle"})])),default:_((()=>[x,C])),_:1})])]))])}}});export{D as _};
