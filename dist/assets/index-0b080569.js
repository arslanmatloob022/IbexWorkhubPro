import{_ as e}from"./VIconWrap.vue_vue_type_style_index_0_lang-e2d8a9f9.js";import{e as a,r as l,o as t,M as s,y as n,z as o,C as i,K as u,A as r,B as c,l as d,J as p,D as m,Q as _,R as v,j as f,P as y,E as b,v as h,H as g,ak as k}from"./index-7be7d1bb.js";import{_ as V}from"./VInput.vue_vue_type_script_setup_true_lang-6985f439.js";import{_ as x,a as j}from"./VOption.vue_vue_type_style_index_0_lang-f51746ef.js";import{_ as C}from"./VLabel.vue_vue_type_script_setup_true_lang-c3311fad.js";import{_ as w}from"./VField.vue_vue_type_script_setup_true_lang-d98d89da.js";import{_ as A}from"./VControl-60718a89.js";import{_ as P}from"./VAvatar.vue_vue_type_style_index_0_lang-a221efad.js";import{u as S}from"./useAPI-eca7f1d0.js";import{u as I}from"./useNotyf-c87475ff.js";import{a as U}from"./useSupportElement-6b28cd6e.js";import{u as q}from"./viewWrapper-bbf53eb9.js";import{b as z}from"./route-block-83d24a4e.js";import"./via-placeholder-24645670.js";import"./useVFieldContext-754f7226.js";import"./userSession-54ceea75.js";import"./notyf-50d5b9b0.js";import"./useThemeColors-4ee63079.js";const F={class:"banking-dashboard banking-dashboard-v1"},T={class:"columns is-multiline"},L={class:"column is-12"},N={class:"columns is-multiline"},O={class:"column is-6"},B={class:"dashboard-card is-contacts"},M=i("div",{class:"title-wrap"},[i("h3",{class:"dark-inverted"},"Create link")],-1),$=["onSubmit"],E={class:"transfer-form"},J=i("label",{for:""}," Client",-1),Q={class:"multiselect-single-label"},W={class:"select-label-text"},D={class:"select-label-text"},H=["onSubmit"],K={class:"column is-12 p-0 mt-2"},R={class:"amount-item mb-2"},G={class:"is-bold"},X=i("br",null,null,-1),Y={class:"submit-wrap mt-5"},Z={class:"column is-6"},ee={class:"dashboard-card"},ae=i("div",{class:"title-wrap"},[i("h3",{class:"dark-inverted"},"Payment links")],-1),le={key:0,class:"context-text"},te=a({__name:"IbexPaymentModule",setup(a){const h=S(),g=I();l(!1);const k=l(""),q=l([]),z=l(!1);l(!1);const te=l(!1),se=l({payment_method:"us_bank_account",description:"",client:""}),ne=l({title:"",amount:0,quantity:1}),oe=l([]),ie=()=>{oe.value.push(ne.value),ne.value={title:"",amount:0,quantity:1}},ue=async()=>{try{te.value=!0;const e=U(se.value,[""]);e.append("itemsList",JSON.stringify(oe.value)),e.append("enableTax","False");const a=await h.post("/api/paypal/stripe-session-new/",e);k.value=a.data.url,g.success("link Created")}catch(e){g.error("Something went wrong")}finally{te.value=!1}};return t((()=>{(async()=>{try{z.value=!0;const e=await h.get("/api/users/by-role/client/",{});q.value=e.data.map((e=>({value:e.id,name:e.username,icon:e.avatar})))}catch(e){console.log(e)}finally{z.value=!1}})()})),(a,l)=>{const t=P,h=s("Multiselect"),S=A,I=w,U=C,z=x,re=j,ce=V,de=b,pe=e;return n(),o("div",F,[i("div",T,[i("div",L,[i("div",N,[i("div",O,[i("div",B,[M,i("form",{action:"",onSubmit:u(ue,["prevent"])},[i("div",E,[r(I,{class:"is-image-select has-curved-images"},{default:c((()=>[J,r(S,null,{default:c((()=>[r(h,{modelValue:d(se).client,"onUpdate:modelValue":l[0]||(l[0]=e=>d(se).client=e),placeholder:"Select a client",label:"name","max-height":145,options:d(q)},{singlelabel:c((({value:e})=>[i("div",Q,[r(t,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),i("span",W,p(e.name),1)])])),option:c((({option:e})=>[r(t,{class:"select-option-icon",size:"xs",squared:"",picture:e.icon},null,8,["picture"]),i("span",D,p(e.name),1)])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),r(I,{class:"field column is-12 p-0"},{default:c((()=>[r(U,{for:""},{default:c((()=>[m("Pay by")])),_:1}),r(re,{modelValue:d(se).payment_method,"onUpdate:modelValue":l[1]||(l[1]=e=>d(se).payment_method=e)},{default:c((()=>[r(z,{value:"us_bank_account"},{default:c((()=>[m("US Bank Account")])),_:1}),r(z,{value:"card"},{default:c((()=>[m("Credit Card")])),_:1}),r(z,{value:"both"},{default:c((()=>[m("Any")])),_:1})])),_:1},8,["modelValue"])])),_:1}),i("form",{action:"post",onSubmit:u(ie,["prevent"])},[r(I,null,{default:c((()=>[r(U,null,{default:c((()=>[m("Title")])),_:1}),r(S,null,{default:c((()=>[r(ce,{required:"",modelValue:d(ne).title,"onUpdate:modelValue":l[2]||(l[2]=e=>d(ne).title=e),type:"text",placeholder:"Item title"},null,8,["modelValue"])])),_:1})])),_:1}),r(I,{class:"field column is-12 p-0"},{default:c((()=>[r(U,null,{default:c((()=>[m("Amount in ($)")])),_:1}),r(S,null,{default:c((()=>[r(ce,{required:"",modelValue:d(ne).amount,"onUpdate:modelValue":l[3]||(l[3]=e=>d(ne).amount=e),type:"number",step:"0",placeholder:"Amount in $"},null,8,["modelValue"])])),_:1})])),_:1}),r(de,{type:"submit",color:"info",size:"big",fullwidth:"",loading:d(te),raised:"",bold:""},{default:c((()=>[m(" Add Item ")])),_:1},8,["loading"])],40,H),i("div",K,[(n(!0),o(_,null,v(d(oe),((e,a)=>(n(),o("div",R,[i("p",null,[i("span",null,p(a+1)+". ",1),i("span",G,p(e.title),1),X,i("span",null,"Amount: $"+p(e.amount),1)]),r(pe,{onClick:e=>(e=>{se.value.itemsList.splice(e,1)})(a),color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])))),256))]),i("div",Y,[r(de,{type:"submit",color:"primary",size:"big",fullwidth:"",loading:d(te),raised:"",bold:""},{default:c((()=>[m(" Create Payment link ")])),_:1},8,["loading"])])])],40,$)])]),i("div",Z,[i("div",ee,[ae,r(I,{label:"Checkout link",addons:""},{default:c((()=>[r(S,{expanded:""},{default:c((()=>[r(ce,{type:"text",modelValue:d(k),"onUpdate:modelValue":l[4]||(l[4]=e=>f(k)?k.value=e:null),class:"input",placeholder:"link..."},null,8,["modelValue"])])),_:1}),r(S,null,{default:c((()=>[r(de,{icon:"fas fa-copy",onClick:l[5]||(l[5]=e=>{var a;(a=d(k))?navigator.clipboard.writeText(a).then((()=>{g.success("Link copied to clipboard!")})).catch((e=>{g.error("Failed to copy the link: ",e)})):g.error("No link to copy!")}),class:"cu-pointer",color:"primary"},{default:c((()=>[m(" Copy ")])),_:1})])),_:1})])),_:1}),d(k)?(n(),o("p",le," payment link has been successfully created ")):y("",!0)])])])])])])}}}),se={class:"page-content-inner"},ne=i("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),oe=a({__name:"index",setup:e=>(q().setPageTitle("Ibex Payment"),h({title:"Ibex Payment"}),(e,a)=>{const l=te;return n(),o("div",se,[(n(),g(k,{to:"[data-teleport-bg]"},[ne])),r(l,{class:"has-navbar-spacing"})])})});"function"==typeof z&&z(oe);export{oe as default};
