import{s as e}from"./index-35f65aad.js";import{b as t}from"./index-8023ccec.js";const a=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],r={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...a,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...a],h2:[["className","sr-only"]],img:[...a,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...a,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...a],table:[...a],ul:[...a,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},s={}.hasOwnProperty;function o(e,t){if(t&&"object"==typeof t){const a=t;switch("string"==typeof a.type?a.type:""){case"comment":return function(e,t){if(e.schema.allowComments){const e="string"==typeof t.value?t.value:"",a=e.indexOf("--\x3e"),r={type:"comment",value:a<0?e:e.slice(0,a)};return l(r,t),r}}(e,a);case"doctype":return function(e,t){if(e.schema.allowDoctypes){const e={type:"doctype"};return l(e,t),e}}(e,a);case"element":return function(e,t){const a="string"==typeof t.tagName?t.tagName:"";e.stack.push(a);const r=n(e,t.children),o=function(e,t){const a=e.stack[e.stack.length-1],r=e.schema.attributes,o=e.schema.required,n=r&&s.call(r,a)?r[a]:void 0,i=r&&s.call(r,"*")?r["*"]:void 0,l=t&&"object"==typeof t?t:{},u={};let f;for(f in l)if(s.call(l,f)){const t=l[f];let a=c(e,p(n,f),f,t);null==a&&(a=c(e,p(i,f),f,t)),null!=a&&(u[f]=a)}if(o&&s.call(o,a)){const e=o[a];for(f in e)s.call(e,f)&&!s.call(u,f)&&(u[f]=e[f])}return u}(e,t.properties);e.stack.pop();let i=!1;if(a&&"*"!==a&&(!e.schema.tagNames||e.schema.tagNames.includes(a))&&(i=!0,e.schema.ancestors&&s.call(e.schema.ancestors,a))){const t=e.schema.ancestors[a];let r=-1;for(i=!1;++r<t.length;)e.stack.includes(t[r])&&(i=!0)}if(!i)return e.schema.strip&&!e.schema.strip.includes(a)?r:void 0;const u={type:"element",tagName:a,properties:o,children:r};return l(u,t),u}(e,a);case"root":return function(e,t){const a=n(e,t.children),r={type:"root",children:a};return l(r,t),r}(e,a);case"text":return function(e,t){const a="string"==typeof t.value?t.value:"",r={type:"text",value:a};return l(r,t),r}(0,a)}}}function n(e,t){const a=[];if(Array.isArray(t)){const r=t;let s=-1;for(;++s<r.length;){const t=o(e,r[s]);t&&(Array.isArray(t)?a.push(...t):a.push(t))}}return a}function c(e,t,a,r){return t?Array.isArray(r)?function(e,t,a,r){let s=-1;const o=[];for(;++s<r.length;){const n=i(e,t,a,r[s]);"number"!=typeof n&&"string"!=typeof n||o.push(n)}return o}(e,t,a,r):i(e,t,a,r):void 0}function i(e,t,a,r){if(("boolean"==typeof r||"number"==typeof r||"string"==typeof r)&&function(e,t,a){const r=e.schema.protocols&&s.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!r||0===r.length)return!0;const o=String(a),n=o.indexOf(":"),c=o.indexOf("?"),i=o.indexOf("#"),l=o.indexOf("/");if(n<0||l>-1&&n>l||c>-1&&n>c||i>-1&&n>i)return!0;let p=-1;for(;++p<r.length;){const e=r[p];if(n===e.length&&o.slice(0,e.length)===e)return!0}return!1}(e,a,r)){if("object"==typeof t&&t.length>1){let e=!1,a=0;for(;++a<t.length;){const s=t[a];if(s&&"object"==typeof s&&"flags"in s){if(s.test(String(r))){e=!0;break}}else if(s===r){e=!0;break}}if(!e)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(a)?e.schema.clobberPrefix+r:r}}function l(a,r){const s=t(r);r.data&&(a.data=e(r.data)),s&&(a.position=s)}function p(e,t){let a,r=-1;if(e)for(;++r<e.length;){const s=e[r],o="string"==typeof s?s:s[0];if(o===t)return s;"data*"===o&&(a=s)}if(t.length>4&&"data"===t.slice(0,4).toLowerCase())return a}function u(e){return function(t){const a=function(e,t){let a={type:"root",children:[]};const s=o({schema:t?{...r,...t}:r,stack:[]},e);return s&&(Array.isArray(s)?1===s.length?a=s[0]:a.children=s:a=s),a}(t,e);return a}}export{u as default,r as defaultSchema};
