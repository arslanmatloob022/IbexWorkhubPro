import{_ as a}from"./VModal.vue_vue_type_style_index_0_lang-223b58b5.js";import{f as s,r as e,b as t,o as l,C as i,O as o,G as n,E as r,L as c,m as d,X as u,F as p,U as m,K as f,J as _,P as b,$ as v,D as g,I as k,V as y,W as h,N as j,H as D,a5 as T}from"./index-4fc915ed.js";import{_ as x}from"./VField.vue_vue_type_script_setup_true_lang-e4aad524.js";import{_ as C}from"./VControl-81c54741.js";import{_ as M}from"./VTextarea.vue_vue_type_script_setup_true_lang-4085b052.js";import{u as w}from"./useNotyf-bdfe2d53.js";import{u as A}from"./useAPI-8b259595.js";import{a as N,C as P,e as S}from"./useSupportElement-c90ba03d.js";import{_ as V}from"./VAvatar.vue_vue_type_style_index_0_lang-ee596545.js";import{_ as H}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-993f8723.js";import{_ as I,a as E}from"./search-6-dark-6c9b195a.js";import{p as z}from"./index-3bcaad34.js";import{o as L}from"./via-placeholder-24645670.js";import{_ as O}from"./VCardAction.vue_vue_type_script_setup_true_lang-45def5d4.js";const U={class:"modal-form columns is-multiline"},W={class:"column is-full"},F={class:"field"},K=r("label",{class:"label"},"Title ",-1),R={class:"control"},$={class:"column is-full"},B={class:"field"},q=r("label",{class:"label"},"Description ",-1),G={class:"field column is-half"},J={class:"file"},X={class:"file-label"},Z={class:"file-cta"},Q=r("span",{class:"file-icon"},[r("i",{class:"fas fa-cloud-upload-alt"})],-1),Y={class:"file-label"},aa=s({__name:"AddProgressModal",props:{openProgressModal:{type:Boolean},job:{},task:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(s,{emit:v}){const g=s;e(null);const k=A(),y=w(),h=e(!1),j=t(),D=()=>{v("close:ModalHandler",!1)},T=e({title:"",description:"",job:g.job,task:g.task,uploaded_by:j.user.id,file:null}),S=async()=>{try{h.value=!0;const a=N(T.value,["file"]);await k.post("/api/job-progress/",a);P({object_type:"files",object_id:g.job,action:"CREATE",message:`added new progress titled <b>${T.value.title}</b>.`,performedOnName:"job"}),y.success("Progress added successfully!"),v("update:OnSuccess",null),D()}catch(a){console.log(a)}finally{h.value=!1}},V=e(""),H=a=>{const s=a.target,e=s.files?.[0];s.value="",e&&(T.value.file=e,V.value=e.name)};return l((()=>{})),(s,e)=>{const t=M,l=C,v=x,k=b,y=a;return i(),o(y,{is:"form",open:g.openProgressModal,title:"Attach File",size:"medium",actions:"right",onSubmit:_(S,["prevent"]),onClose:D},{content:n((()=>[r("div",U,[r("div",W,[r("div",F,[K,r("div",R,[c(r("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":e[0]||(e[0]=a=>d(T).title=a)},null,512),[[u,d(T).title]])])])]),r("div",$,[r("div",B,[q,p(l,null,{default:n((()=>[p(t,{modelValue:d(T).description,"onUpdate:modelValue":e[1]||(e[1]=a=>d(T).description=a),class:"is-primary-focus",rows:"2",placeholder:"Description"},null,8,["modelValue"])])),_:1})])]),r("div",G,[p(v,{grouped:""},{default:n((()=>[p(l,null,{default:n((()=>[r("div",J,[r("label",X,[r("input",{onChange:H,class:"file-input",type:"file",name:"resume"},null,32),r("span",Z,[Q,r("span",Y,m(d(V)?d(V):"Choose a fileâ€¦"),1)])])])])),_:1})])),_:1})])])])),action:n((()=>[p(k,{type:"submit",color:"primary",loading:d(h),raised:""},{default:n((()=>[f(" Save")])),_:1},8,["loading"])])),cancel:n((()=>[p(k,{color:"light",onClick:D,raised:""},{default:n((()=>[f("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),sa={class:"tile-grid-toolbar"},ea=r("input",{class:"input custom-text-filter",placeholder:"Search..."},null,-1),ta={class:"buttons"},la=r("span",{class:"icon"},[r("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ia=r("span",null,"Progress",-1),oa={class:"tile-grid tile-grid-v3"},na=r("img",{class:"light-image",src:I,alt:""},null,-1),ra=r("img",{class:"dark-image",src:E,alt:""},null,-1),ca={class:"tile is-ancestor columns is-multiline"},da={class:"tile is-parent column is-12"},ua={class:"tile is-child tile-grid-item is-medium"},pa={class:"tile-grid-item-inner"},ma=["src","alt"],fa={class:"meta"},_a={class:"tile-title"},ba={class:"dark-inverted"},va={class:"tile-meta"},ga={class:"meta-inner"},ka={class:"dark-inverted"},ya=s({__name:"ProgressMedia",props:{object:{},type:{},taskData:{}},setup(a){const s=a,t=A(),c=e(""),u=e(!1),f=v((()=>c.value?z.filter((a=>a.title.match(new RegExp(c.value,"i"))||a.author.name.match(new RegExp(c.value,"i")))):z));e(0);const _=e([{id:"65f77998-8cbb-4d6a-acfd-100f9a117386",uploaded_by_info:{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",last_name:null,email:"testworker@gmail.com",role:"worker",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/availalbe.png"},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/job_progress/Screenshot_from_2025-03-06_17-04-21.png",name:"Screenshot_from_2025-03-06_17-04-21.png",type:"png",size:.16},progress:0,title:"Test 1",description:"description of the progress",created_at:"2025-03-06T18:07:35.239784Z",file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/job_progress/Screenshot_from_2025-03-06_17-04-21.png",job:"751b95b2-9961-45a0-948c-96f85cea6a52",task:"894767a3-516e-4bd8-931d-76e36f99d7a8",uploaded_by:"937a8b15-62b4-4576-98af-2e53ecb90e46"}]);return l((()=>{(async()=>{try{const a=await t.get(`/api/job-progress/by-task/${s.object}/`);_.value=a.data}catch(a){console.log(a)}})()})),(a,e)=>{const t=C,l=b,c=H,v=V,D=aa;return i(),g("div",null,[r("div",sa,[p(t,{icon:"feather:search"},{default:n((()=>[ea])),_:1}),r("div",ta,[p(l,{onClick:e[0]||(e[0]=a=>u.value=!d(u)),color:"primary",raised:""},{default:n((()=>[la,ia])),_:1})])]),r("div",oa,[p(c,{class:k([0!==d(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:n((()=>[na,ra])),_:1},8,["class"]),r("div",ca,[(i(!0),g(y,null,h(d(_),(a=>(i(),g("div",da,[r("a",ua,[r("div",pa,[r("img",{src:a.file,alt:a.title,onErrorOnce:e[1]||(e[1]=a=>d(L)(400,300))},null,40,ma),r("div",fa,[r("div",_a,[r("h3",ba,m(a.title??"N/A"),1),r("p",null,m(a.description??"N/A"),1)]),r("div",va,[p(v,{picture:a.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),r("div",ga,[r("span",ka,m(a.uploaded_by_info.username??"N/A")+" "+m(a.uploaded_by_info.last_name??"N/A"),1),r("span",null,m(d(S)(a.created_at)),1)])])])])])])))),256))])]),d(u)?(i(),o(D,{key:0,task:s.object,job:s.taskData.project.id,openProgressModal:d(u),"onUpdate:OnSuccess":e[2]||(e[2]=a=>u.value=!1),"onClose:ModalHandler":e[3]||(e[3]=a=>u.value=!1)},null,8,["task","job","openProgressModal"])):j("",!0)])}}}),ha={class:"columns is-multiline"},ja={class:"tabs-wrapper column is-12 mb-0"},Da={class:"tabs is-boxed"},Ta=[r("span",null,"Task Info",-1)],xa=[r("span",null,"Task Progress",-1)],Ca={key:0,class:"column is-12 py-0"},Ma={class:"columns is-multiline px-2 py-0"},wa={class:"column is-12 p-0 mb-2"},Aa=r("h1",{class:"subtitle is-5 mb-1"},"Task info",-1),Na=["innerHTML"],Pa={class:"is-bold"},Sa={class:"is-bold"},Va={class:"is-bold"},Ha={class:"is-bold"},Ia={class:"column is-12 p-0 mb-2"},Ea=r("h1",{class:"subtitle is-5 mb-1"},"Project Info",-1),za={class:"is-bold"},La={class:"is-bold"},Oa=["innerHTML"],Ua={class:"column is-12 p-0"},Wa=r("h1",{class:"subtitle is-5 mb-1"},"Workers",-1),Fa={key:1,class:"column is-12 py-0"},Ka=s({__name:"TaskInfoModal",props:{taskDetailModal:{type:Boolean},taskData:{},taskId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(s,{emit:t}){const l=s,c=e("info"),u=()=>{t("update:modalHandler",!0)};return(s,e)=>{const t=T,v=O,x=ya,C=b,M=a;return l.taskDetailModal?(i(),o(M,{key:0,open:l.taskDetailModal,title:"Task Info",actions:"right",size:"medium",onClose:u},{content:n((()=>[r("div",ha,[r("div",ja,[r("div",Da,[r("ul",null,[r("li",{class:k(["info"===d(c)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:e[0]||(e[0]=D(_((a=>c.value="info"),["prevent"]),["space"])),onClick:e[1]||(e[1]=a=>c.value="info")},Ta,32)],2),r("li",{class:k(["progress"===d(c)?"is-active":"not-active"])},[r("a",{tabindex:"0",role:"button",onKeydown:e[2]||(e[2]=D(_((a=>c.value="progress"),["prevent"]),["space"])),onClick:e[3]||(e[3]=a=>c.value="progress")},xa,32)],2)])])]),"info"==d(c)?(i(),g("div",Ca,[r("div",Ma,[r("div",wa,[p(t,{elevated:"",class:""},{default:n((()=>[Aa,r("p",null,[f(" Description: "),r("span",{innerHTML:l.taskData?.description,class:"is-bold"},null,8,Na)]),r("p",null,[f(" Duration: "),r("span",Pa,m(l.taskData?.startDate?l.taskData?.startDate:"N/A"),1),f(" to "),r("span",Sa,m(l.taskData?.endDate?l.taskData?.endDate:"N/A"),1)]),r("p",null,[f(" Unit: "),r("span",Va,m(l.taskData?.unit?l.taskData?.unit:"N/A"),1)]),r("p",null,[f(" Note: "),r("span",Ha,m(l.taskData?.note?l.taskData?.note:"N/A"),1)])])),_:1})]),r("div",Ia,[p(t,{elevated:""},{default:n((()=>[Ea,r("p",null,[f(" Name: "),r("span",za,m(l.taskData?.project?.title?l.taskData?.project?.title:"N/A"),1)]),r("p",null,[f(" Address: "),r("span",La,m(l.taskData?.project?.address?l.taskData?.project?.address:"N/A"),1)]),r("div",null,[f(" Description: "),r("div",{innerHTML:l.taskData?.project?.description,class:"is-bold"},null,8,Oa)])])),_:1})]),r("div",Ua,[Wa,l.taskData?.workers?.length?(i(!0),g(y,{key:0},h(l.taskData?.workers,(a=>(i(),o(v,{avatar:a.avatar?a.avatar:"https://media.cssninja.io/content/avatars/19.jpg",title:a.username,subtitle:a.email},null,8,["avatar","title","subtitle"])))),256)):j("",!0)])])])):j("",!0),"progress"==d(c)?(i(),g("div",Fa,[p(x,{object:l.taskId,taskData:l.taskData},null,8,["object","taskData"])])):j("",!0)])])),action:n((()=>[p(C,{style:{display:"none"},color:"primary",raised:""},{default:n((()=>[f(" Confirm ")])),_:1})])),cancel:n((()=>[p(C,{onClick:u,raised:""},{default:n((()=>[f(" Close ")])),_:1})])),_:1},8,["open"])):j("",!0)}}});export{Ka as _};
