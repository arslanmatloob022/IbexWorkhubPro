import{d as e}from"./index-ed878baa.js";import{u as o}from"./userSession-3fb9a025.js";import{u as r}from"./useAPI-4dbd45d9.js";import{u as s}from"./layoutSwitcher-f8c4f03b.js";import{u as t}from"./company-42f77a6b.js";import"./useNotyf-51dcaca9.js";import"./notyf-fd8b7ffd.js";import"./useThemeColors-be929954.js";import"./useSupportElement-c53eaf20.js";const i=s(),a=e((async({router:e,pinia:s})=>{const a=o(s);if(r(),t(),a.isLoggedIn)try{i.setDynamicLayoutId("sideblock-default")}catch(l){a.logoutUser()}e.beforeEach((e=>e.meta.requiresAuth&&!a.isLoggedIn||0==e.meta.isManagerAllowed&&"manager"===a.user.role||!a.isLoggedIn||0==e.meta.isContractorAllowed&&"contractor"===a.user.role||!a.isLoggedIn||0==e.meta.isSupplierAllowed&&"supplier"===a.user.role||!a.isLoggedIn||0==e.meta.isWorkerAllowed&&"worker"===a.user.role||!a.isLoggedIn||0==e.meta.isClientAllowed&&"client"===a.user.role||!a.isLoggedIn?{name:"/auth/login",query:{redirect:e.fullPath}}:void console.log("dfghjlkkl",e.meta)))}));export{a as default};
