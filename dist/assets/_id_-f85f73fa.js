import{_ as e}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-4231b166.js";import{_ as s}from"./JobTodos.vue_vue_type_style_index_0_lang-d8879f94.js";import{_ as a}from"./UserProfileInfo-374525a4.js";import{_ as l}from"./AddUpdateUser-fd6e913b.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-6e27e47d.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-b282a1fc.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-126af53b.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-c023af97.js";import{f as o,r as u,$ as p,o as _,C as c,D as d,m as v,O as m,E as y,F as k,G as g,L as f,k as j,X as b,U as x,K as h,I as w,V,W as C,aS as I,N as P,P as T,y as A,H as S,J as K,A as M}from"./index-20f8c9bb.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-a7f96560.js";import{_ as F}from"./VControl-1dea0aef.js";import{_ as L}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-6e2be513.js";import{_ as W,a as E}from"./search-1-dark-61831a90.js";import{u as N}from"./useAPI-27d1f5b9.js";import{u as O}from"./useNotyf-a0c4e9d8.js";import{_ as R,a as $}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-63e9203d.js";import{_ as B}from"./WorkerCalendar.vue_vue_type_style_index_0_lang-de077f7a.js";import{u as J}from"./viewWrapper-d2c972bc.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-746c52ed.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-cfa6f801.js";import"./VModal.vue_vue_type_style_index_0_lang-7fd2b60f.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-5538e8e0.js";import"./useVFieldContext-594bc116.js";import"./VInput.vue_vue_type_script_setup_true_lang-1908486a.js";import"./VOption.vue_vue_type_style_index_0_lang-81d9963b.js";import"./useSupportElement-45a47b9e.js";import"./estimatesScripts-ec0a46d0.js";import"./VIcon.vue_vue_type_script_setup_true_lang-ed49088e.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-6acf40a2.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-91e319ba.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-4a512fd6.js";import"./search-3-dark-1eb6ae2e.js";import"./VBlock.vue_vue_type_style_index_0_lang-cdafe918.js";import"./VIconButton-5073be3f.js";import"./having-coffee-dark-69a7d2f6.js";import"./moment-bad41465.js";import"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-e2bc916b.js";import"./VLabel.vue_vue_type_script_setup_true_lang-22b4b636.js";import"./VIconBox.vue_vue_type_style_index_0_lang-2e797d0b.js";import"./route-block-83d24a4e.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-2afeb0a9.js";import"./VFilePond.vue_vue_type_script_lang-b235c6da.js";import"./VFlex.vue_vue_type_style_index_0_lang-66da4be8.js";import"./VPlaceloadWrap-b90fe03c.js";import"./notyf-5081edbe.js";import"./useThemeColors-e310ca2c.js";import"./TaskInfoModal.vue_vue_type_script_setup_true_lang-019e5c58.js";import"./search-6-dark-6c9b195a.js";import"./via-placeholder-24645670.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-726666a8.js";import"./UpdateTask.vue_vue_type_script_setup_true_lang-3d0481d0.js";import"./VDropdown.vue_vue_type_style_index_0_lang-140c425d.js";import"./useDropdown-816de300.js";import"./projects-dark-4a371d8a.js";import"./VFlexTable.vue_vue_type_style_index_0_lang-d7d3a964.js";import"./search-4-dark-2b5b440c.js";import"./index-c1fc2d09.js";import"./FullCalendar-8db4b0b6.js";import"./index-37bedc79.js";import"./index-04e05ac8.js";const D={key:1},H={class:"list-view-toolbar"},z={class:"list-info"},G={key:0},X={key:1},q={class:"buttons"},Q={class:"page-content-inner"},Y={class:"list-view list-view-v1"},Z=y("img",{class:"light-image",src:W,alt:""},null,-1),ee=y("img",{class:"dark-image",src:E,alt:""},null,-1),se={class:"list-view-inner"},ae={class:"list-view-item-inner"},le={class:"meta-left"},te=y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),ie={class:"meta-right"},ne={class:"tags"},re={class:"stats"},oe={class:"stat"},ue=y("span",null,"Status",-1),pe=y("div",{class:"separator"},null,-1),_e={class:"stat"},ce=y("span",null,"Active tasks",-1),de=y("div",{class:"separator"},null,-1),ve={class:"stat"},me=y("span",null,"Pending tasks",-1),ye=o({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(e){const s=e,a=N();O();const o=u(!1),A=u({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),S=u(""),K=p((()=>S.value?A.value.filter((e=>e.username.match(new RegExp(S.value,"i"))||e.email.match(new RegExp(S.value,"i")))):A.value));console.log(K.value);const M=u(!1),W=()=>{M.value=!0},E=async()=>{try{o.value=!0;const e=await a.get(`/api/users/workers/?supplier=${s.supplierId}`);A.value=e.data}catch(e){console.log(e)}finally{o.value=!1}};return _((()=>{E()})),(e,a)=>{const u=L,p=F,_=U,A=T,N=r,O=n,R=i,$=t,B=l;return c(),d(V,null,[v(o)?(c(),m(u,{key:0})):(c(),d("div",D,[y("div",H,[k(_,null,{default:g((()=>[k(p,{icon:"feather:search"},{default:g((()=>[f(y("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>j(S)?S.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,v(S)]])])),_:1})])),_:1}),y("div",z,[1===v(K).length?(c(),d("span",G,"1 record found")):(c(),d("span",X,x(v(K).length)+" records found",1))]),y("div",q,[k(A,{color:"primary",onClick:W,icon:"fas fa-plus",elevated:""},{default:g((()=>[h(" Worker ")])),_:1})])]),y("div",Q,[y("div",Y,[k(N,{class:w([0!==v(K).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[Z,ee])),_:1},8,["class"]),y("div",se,[k(I,{name:"list-complete",tag:"div"},{default:g((()=>[(c(!0),d(V,null,C(v(K),((e,s)=>(c(),d("div",{key:s,class:"list-view-item"},[y("div",ae,[k(O,{picture:e.avatar,size:"large"},null,8,["picture"]),y("div",le,[y("h3",null,x(e.username),1),y("span",null,[te,y("span",null,x(e.email),1)])]),y("div",ie,[y("div",ne,[k(R,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),y("div",re,[y("div",oe,[y("span",null,x(e.is_active?"Active":"In-Active"),1),ue]),pe,y("div",_e,[y("span",null,x(e.active_tasks),1),ce]),de,y("div",ve,[y("span",null,x(e.pending_tasks),1),me])])])])])))),128))])),_:1})])]),v(K).length>5?(c(),m($,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):P("",!0)])])),v(M)?(c(),m(B,{key:2,isModalOpen:v(M),supplierId:s.supplierId,userRole:"worker","onUpdate:closeModalHandler":a[1]||(a[1]=e=>M.value=!1),"onUpdate:actionUpdateHandler":E},null,8,["isModalOpen","supplierId"])):P("",!0)],64)}}}),ke={class:"lifestyle-dashboard lifestyle-dashboard-v3"},ge={class:"illustration-header"},fe={class:"p-4"},je={class:"header-meta"},be={class:"summary-stats"},xe={class:"summary-stat"},he=y("span",null,"Role",-1),we={class:"summary-stat"},Ve=y("span",null,"Email",-1),Ce={class:"tabs-wrapper"},Ie={class:"tabs-inner"},Pe={class:"tabs is-boxed",slider:""},Te=[y("span",null,"Tasks",-1)],Ae=[y("span",null,"Workers",-1)],Se=[y("span",null,"Profile Info",-1)],Ke=[y("span",null,"Todos",-1)],Me=[y("span",null,"Activities",-1)],Ue=y("li",{class:"tab-naver"},null,-1),Fe={key:0,class:"columns is-multiline is-flex-tablet-p"},Le={class:"list-flex-toolbar is-reversed"},We={class:"tabs-inner"},Ee={class:"tabs is-boxed"},Ne=[y("span",null,"Tasks Calendar",-1)],Oe=[y("span",null,"Chronic View",-1)],Re=[y("span",null,"Tasks",-1)],$e=y("li",{class:"tab-naver"},null,-1),Be={key:0,class:"column is-12"},Je={key:1,class:"column is-12"},De={key:2,class:"column is-12"},He={key:1,class:"columns is-multiline is-flex-tablet-p"},ze={class:"column is-12"},Ge={key:2,class:"columns is-multiline is-flex-tablet-p"},Xe={class:"column is-12"},qe={key:3,class:"columns is-multiline is-flex-tablet-p"},Qe={class:"column is-12"},Ye={key:4,class:"column is-12"},Ze=o({__name:"SubContractorProfile",setup(l){const t=N(),i=A(),r=u(!1),o=u("tasks"),p=u("calendar"),m=u({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});return _((async()=>{await(async()=>{try{r.value=!0;const e=await t.get(`/api/users/${i.params.id}`);m.value=e.data}catch(e){console.log(e)}finally{r.value=!1}})()})),(l,t)=>{const u=n,_=B,g=R,f=$,j=ye,b=a,h=s,V=e;return c(),d("div",ke,[y("div",ge,[y("div",fe,[k(u,{size:"xl",squared:"",picture:v(m).avatar,alt:""},null,8,["picture"])]),y("div",je,[y("h3",null,x(v(r)?"Loading...":v(m)?.username)+" "+x(v(m).last_name?v(m).last_name:""),1),y("div",be,[y("div",xe,[y("span",null,x(v(r)?"Loading...":"Subcontractor"),1),he]),y("div",we,[y("span",null,x(v(r)?"Loading...":v(m)?.email),1),Ve])])])]),y("div",Ce,[y("div",Ie,[y("div",Pe,[y("ul",null,[y("li",{class:w(["tasks"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=S(K((e=>o.value="tasks"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>o.value="tasks")},Te,32)],2),y("li",{class:w(["workers"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=S(K((e=>o.value="workers"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>o.value="workers")},Ae,32)],2),y("li",{class:w(["profile"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=S(K((e=>o.value="profile"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>o.value="profile")},Se,32)],2),y("li",{class:w(["todos"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=S(K((e=>o.value="todos"),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>o.value="todos")},Ke,32)],2),y("li",{class:w(["activities"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=S(K((e=>o.value="activities"),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>o.value="activities")},Me,32)],2),Ue])])])]),"tasks"==v(o)?(c(),d("div",Fe,[y("div",Le,[y("div",We,[y("div",Ee,[y("ul",null,[y("li",{class:w(["calendar"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=S(K((e=>p.value="calendar"),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>p.value="calendar")},Ne,32)],2),y("li",{class:w(["chronic"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=S(K((e=>p.value="chronic"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>p.value="chronic")},Oe,32)],2),y("li",{class:w(["tasks"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=S(K((e=>p.value="tasks"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>p.value="tasks")},Re,32)],2),$e])])])]),"calendar"==v(p)?(c(),d("div",Be,[k(_,{"worker-id":v(i).params.id},null,8,["worker-id"])])):P("",!0),"chronic"==v(p)?(c(),d("div",Je,[k(g,{userId:v(i).params.id},null,8,["userId"])])):P("",!0),"tasks"==v(p)?(c(),d("div",De,[k(f,{workerId:v(i).params.id},null,8,["workerId"])])):P("",!0)])):P("",!0),"workers"==v(o)?(c(),d("div",He,[y("div",ze,[k(j,{"supplier-id":v(i).params.id},null,8,["supplier-id"])])])):P("",!0),"profile"==v(o)?(c(),d("div",Ge,[y("div",Xe,[k(b,{"user-data":v(m)},null,8,["user-data"])])])):P("",!0),"todos"==v(o)?(c(),d("div",qe,[y("div",Qe,[k(h,{user:v(i).params.id},null,8,["user"])])])):P("",!0),"activities"===v(o)?(c(),d("div",Ye,[k(V,{user:v(i).params.id},null,8,["user"])])):P("",!0)])}}}),es={class:""},ss=o({__name:"[id]",setup:e=>(J().setPageTitle("Sub-Contractor Info"),M({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ze;return c(),d("div",es,[k(a)])})});export{ss as default};
