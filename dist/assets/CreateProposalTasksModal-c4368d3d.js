import{f as e,s as a,b as l,r as o,o as t,B as s,C as n,O as i,G as r,F as d,m as c,k as u,E as p,U as m,K as v,J as _,P as f,a7 as b,$ as y,e as h,_ as g,w as I,L as w,X as k,N as C,D as P,V as D,W as S,a5 as V,a1 as x,Y as j,Q as T,R as O,S as U,j as M,aS as L,I as A,H as F}from"./index-d4aaa0a5.js";import{_ as $}from"./VModal.vue_vue_type_style_index_0_lang-6536c3a1.js";import{_ as E}from"./VField.vue_vue_type_script_setup_true_lang-fbb3636f.js";import{_ as H}from"./VControl-f3a4bf8b.js";import{u as R}from"./useAPI-80978494.js";import{u as N}from"./useNotyf-13881fb3.js";import{a as q}from"./useSupportElement-2bc9df64.js";import{_ as B}from"./VTextarea.vue_vue_type_script_setup_true_lang-cb126257.js";import{_ as J}from"./VInput.vue_vue_type_script_setup_true_lang-b90dec33.js";import{_ as z}from"./VCheckbox.vue_vue_type_style_index_0_lang-0a3c84b8.js";import{_ as W,a as G}from"./VOption.vue_vue_type_style_index_0_lang-242d5c34.js";import{s as K,g as Q,a as Y,c as X}from"./costItems-22ded6e8.js";import{_ as Z}from"./VIconButton-25c5fb17.js";import{u as ee}from"./company-48a68e5d.js";import{_ as ae}from"./SweetAlert.vue_vue_type_style_index_0_lang-3558ed0e.js";import{_ as le}from"./VDropdown.vue_vue_type_style_index_0_lang-2e67e981.js";const oe={class:"multiselect-single-label"},te={class:"select-label-text"},se={class:"select-label-text"},ne=e({__name:"CostByCatalog",props:{centeredActionsOpen:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:b}){const y=e;a(),l();const h=N(),g=R();o(!1);const I=o(!1),w=o([]),k=o(""),C=o([]),P=()=>{b("update:modalHandler",!1)},D=()=>{b("update:OnSuccess",null)};return t((async()=>{(async()=>{try{I.value=!0;const e=await g.get("/api/cost/catalogs/");C.value=e.data,w.value=e.data.map((e=>({value:e.id,name:e.title})))}catch(e){console.log(e)}finally{I.value=!1}})()})),(e,a)=>{const l=s("Multiselect"),o=H,t=E,b=f,I=$;return n(),i(I,{open:y.centeredActionsOpen,actions:"right",is:"form",title:"Create Cost item",onSubmit:a[1]||(a[1]=_((e=>(async()=>{const e=C.value.find((e=>e.id==k.value));e?console.log("Matched Item:",e):console.log("No item found with the given ID.");const a=q(e,[]);try{await g.post("/api/cost/",a),P(),D(),h.success("Item added successfully.")}catch(l){h.error("Failed try again")}})()),["prevent"])),onClose:P},{content:r((()=>[d(t,{class:"is-image-select m-b-80",label:"Selecte Catalog"},{default:r((({id:e})=>[d(o,null,{default:r((()=>[d(l,{modelValue:c(k),"onUpdate:modelValue":a[0]||(a[0]=e=>u(k)?k.value=e:null),attrs:{id:e},placeholder:"Select a catalog",label:"name",options:c(w)},{singlelabel:r((({value:e})=>[p("div",oe,[p("span",te,m(e.name),1)])])),option:r((({option:e})=>[p("span",se,m(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})])),action:r((()=>[d(b,{color:"primary",raised:"",type:"submit"},{default:r((()=>[v(" Confirm ")])),_:1})])),_:1},8,["open"])}}}),ie=b("useProposal",(()=>{const e=o(!0),a=N(),l=R(),t=o("");o("");const s=o([]),n=o([]),i=o({id:"",jobInfo:{id:"",sales_people_info:[],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},managers_list:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:0,longitude:0,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]},proposalAmount:0,title:"",approval_deadline:"",internal_notes:"",introductory_text:"",closing_text:"",payment_status:"",type:"",status:"",columns_to_show:[],created_at:"",updated_at:"",job:""}),r=o([{id:"",index:0,title:"",description:"",type:"",quantity:0,unit:"",unit_cost:"",markup:"",total_price:"",cost_code:"",cost_type:"",builder_cost:"",margin:"",profit:"",internal_notes:"",mark_as:"",state:"",group_amount:"",status:null,created_at:"",proposal:""}]);return{loading:e,proposalCostItems:r,leadProposalFormData:i,companyProposalsList:s,leadProposalsList:n,getLeadProposals:async o=>{try{o.value=o,e.value=!0;const a=await l.get(`/api/lead-proposal/by-job/${o.value}/`);n.value=a.data}catch(t){a.error(` ${t}, Lead`)}finally{e.value=!1}},getProposalDetail:async e=>{try{const a=await l.get(`/api/lead-proposal/${e}/detail/`);i.value=a.data,K.value=a.data.columns_to_show}catch(a){console.log(a)}},getCompanyProposals:async()=>{try{e.value=!0;const a=await l.get("/api/lead-proposal/");s.value=a.data}catch(o){a.error(` ${o}, Lead`)}finally{e.value=!1}},getProposalCostItems:async function(e){try{t.value=e;const a=await l.get(`/api/cost/by-proposal/${e}/`);r.value=a.data}catch(a){console.log(a)}},clearProposalId:function(){t.value="",r.value=[]}}})),re=b("useCostCode",(()=>{const e=o(!0),a=N(),l=R(),t=o("");o("");const s=o([]),n=o([{value:"",label:"",labour_cost:"",unit_cost:0,worker_cost:0,unit:"--"}]),i=o([]);return{loading:e,companyProposalsList:s,costCodesList:n,costCodesWholeList:i,getLeadProposals:async o=>{try{o.value=o,e.value=!0;const a=await l.get(`/api/lead-proposal/by-job/${o.value}/`);n.value=a.data}catch(t){a.error(` ${t}, Lead`)}finally{e.value=!1}},getProposalDetail:async e=>{try{const a=await l.get(`/api/lead-proposal/${e}/detail/`);K.value=a.data.columns_to_show}catch(a){console.log(a)}},getCostCodesHandler:async()=>{try{e.value=!0;const a=await l.get("/api/cost-code/");i.value=a.data,n.value=a.data.map((e=>({value:e.id,label:e.name,labour_cost:e.labour_cost,unit_cost:e.unit_cost??0,worker_cost:e.worker_cost??0,unit:e.unit??"--"})))}catch(a){console.log(a)}finally{e.value=!1}},getProposalCostItems:async function(e){try{t.value=e;await l.get(`/api/cost/by-proposal/${e}/`)}catch(a){console.log(a)}},clearProposalId:function(){t.value=""}}})),de={class:"modal-form columns is-multiline"},ce={class:"columns is-multiline"},ue={class:"field column is-6 mb-0"},pe=p("label",null,"Title: ",-1),me={class:"control"},ve=["disabled"],_e={class:"multiselect-single-label"},fe={class:"select-label-text"},be={class:"select-label-text"},ye={key:1,class:"field column is-6"},he=p("label",{for:""},"Cost Type",-1),ge={key:2,class:"field column is-3"},Ie=p("label",{for:""},"Add to catalogue",-1),we={class:"field column is-3"},ke=p("label",{for:""},"Mark As",-1),Ce={class:"field column is-6"},Pe=p("label",null,"Cost Code *",-1),De={class:"field column is-6"},Se=p("label",{for:""},"Group Cost",-1),Ve={class:"field column is-12 mb-0"},xe=p("label",{for:"",class:"label"},"Description",-1),je={class:"field column is-12 mb-0"},Te=p("label",{for:"",class:"label"},"Internal Notes",-1),Oe={class:"columns is-multiline"},Ue={class:"field column is-6"},Me=p("label",null,"Unit Cost",-1),Le={class:"field column is-6"},Ae=p("label",null,"Quantity",-1),Fe={class:"field column is-6"},$e=p("label",null,"Unit",-1),Ee={class:"field column is-6"},He=p("label",null,"Builder Cost",-1),Re={class:"field column is-6"},Ne=p("label",null,"Markup (%)",-1),qe={class:"field column is-6"},Be=p("label",null,"Total Price",-1),Je={class:"field column is-6"},ze=p("label",null,"Margin (%)",-1),We={class:"field column is-6"},Ge=p("label",null,"Worker Cost",-1),Ke=e({__name:"EstimateCostItemModal",props:{costItemModal:{type:Boolean},proposalId:{},previousItemIndex:{},costItemId:{},previewCostItems:{type:Boolean},costMode:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:b}){const x=e,j=a(),T=re(),O=ie();l();const U=N(),M=R(),L=o(!1),A=o(""),F=o([]),K=o([]),Q=o({previousItemIndex:0,index:0,id:"",type:"",total_price:0,cost_code:"",cost_type:"",builder_cost:0,internal_notes:"",mark_as:"",state:"",title:"",description:"",quantity:0,unit:"",unit_cost:0,markup:0,margin:0,profit:0,worker_cost:0,group:"",catalog:!1,proposal:x.proposalId}),Y=o([{value:"labour",label:"Labour"},{value:"material",label:"Material"},{value:"equipment",label:"Equipment"},{value:"subcontractor",label:"Subcontractor"},{value:"other",label:"Others"}]),X=o([{value:"11011",label:"Labour"},{value:"11012",label:"Material"},{value:"11013",label:"Equipment"},{value:"11014",label:"Subcontractor"},{value:"11015",label:"Others"}]),Z=o([{value:"bid",label:"Bid"},{value:"allowance",label:"Allowance"}]),ee=async()=>{try{L.value=!0;const e=q(Q.value,[]);if(null!==x.proposalId&&void 0!==x.proposalId&&e.append("proposal",x.proposalId.toString()),x.costItemId){await M.patch(`/api/cost/${x.costItemId}/`,e)}else{const a=await M.post("/api/cost/",e);if(Q.value.catalog){await M.post(`/api/cost/${a.data.id}/create-catalog/`)}O.getProposalDetail(x.proposalId)}ae(),le(),U.success("Item added successfully.")}catch(e){U.error(` ${e}, New Worker`)}finally{L.value=!1}},ae=()=>{b("update:modalHandler",!1)},le=()=>{b("update:OnSuccess",null)};o(0),o(0);const oe=y((()=>Q.value.unit_cost*Q.value.quantity));o(0),o(0);const te=y((()=>Q.value.markup>0?oe.value+oe.value*Q.value.markup/100:Q.value.margin>0?oe.value/(1-Q.value.margin/100):oe.value));y((()=>(te.value-oe.value)/oe.value*100)),y((()=>(te.value-oe.value)/te.value*100)),h((()=>g((()=>import("./ckeditor-91974270.js").then((e=>e.c))),["assets/ckeditor-91974270.js","assets/index-d4aaa0a5.js","assets/index-0e8a40a3.css","assets/vue.runtime.esm-bundler-6dea18eb.js"]).then((e=>e.default.component))));const se=o(!1),ne=o([]),Ke=o(!1),Qe=()=>{if(Q.value.internal_notes){const e=T.costCodesList.find((e=>e.label?.match(Q.value.internal_notes)));e&&(console.log("matched",e.value),Q.value.cost_code=e.value,Q.value.internal_notes.includes("...")?(Q.value.internal_notes="",Q.value.internal_notes="..."):Q.value.internal_notes=""),Q.value.title||(Q.value.title="...")}},Ye=o([{id:"",title:"",value:"",description:"",is_active:!0,created_at:"",updated_at:""}]);return I(A,((e,a)=>{const l=F.value.find((e=>e.id==A.value));if(l){const{id:e,proposal_id:a,...o}=l;Q.value=o}})),t((async()=>{j.value=await g((()=>import("./ckeditor-a700613f.js").then((e=>e.c))),["assets/ckeditor-a700613f.js","assets/index-d4aaa0a5.js","assets/index-0e8a40a3.css"]).then((e=>e.default)),x.previousItemIndex&&(Q.value.previousItemIndex=x.previousItemIndex),x.costItemId&&(async()=>{try{se.value=!0;const e=await M.get(`/api/cost/${x.costItemId}/`);Q.value=e.data,Qe()}catch(e){console.log(e)}finally{se.value=!1}})(),(async()=>{try{se.value=!0;const e=await M.get("/api/units/");Ye.value=e.data}catch(e){console.log(e)}finally{se.value=!1}})(),(async()=>{try{Ke.value=!0;const e=await M.get("/api/cost-code/");ne.value=e.data,X.value=e.data.map((e=>({value:e.id,label:e.name,labour_cost:e.labour_cost,unit_cost:e.unit_cost??0,worker_cost:e.worker_cost??0,unit:e.unit??"--"})))}catch(e){console.log(e)}finally{Ke.value=!1}})(),(async()=>{try{se.value=!0;const e=await M.get("/api/cost/catalogs/");F.value=e.data,K.value=e.data.map((e=>({value:e.id,name:e.title})))}catch(e){console.log(e)}finally{se.value=!1}})(),Qe()})),(e,a)=>{const l=s("Multiselect"),o=H,t=E,b=W,y=G,h=z,g=J,I=B,j=V,O=f,U=$;return n(),i(U,{is:"form",open:x.costItemModal,title:"catalog"==x.costMode?"Update Catalog":"Cost Item ",size:"xl",actions:"right",onSubmit:_(ee,["prevent"]),onClose:ae},{content:r((()=>[p("div",de,[d(j,{class:"column is-12"},{default:r((()=>[p("div",ce,[p("div",ue,[pe,p("div",me,[w(p("input",{type:"text",name:"firstName","onUpdate:modelValue":a[0]||(a[0]=e=>c(Q).title=e),required:"",disabled:x.previewCostItems,class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,8,ve),[[k,c(Q).title]])])]),"catalog"!==x.costMode?(n(),i(t,{key:0,class:"column is-6 m-0",label:"Import cost code from catalogue"},{default:r((({id:e})=>[d(o,null,{default:r((()=>[d(l,{modelValue:c(A),"onUpdate:modelValue":a[1]||(a[1]=e=>u(A)?A.value=e:null),attrs:{id:e},placeholder:"Import from cost code",label:"name",options:c(K)},{singlelabel:r((({value:e})=>[p("div",_e,[p("span",fe,m(e.name),1)])])),option:r((({option:e})=>[p("span",be,m(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})):C("",!0),"catalog"!==x.costMode?(n(),P("div",ye,[he,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(y,{modelValue:c(Q).cost_type,"onUpdate:modelValue":a[2]||(a[2]=e=>c(Q).cost_type=e),disabled:x.previewCostItems},{default:r((()=>[(n(!0),P(D,null,S(c(Y),((e,a)=>(n(),i(b,{value:e.value},{default:r((()=>[v(m(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1})])):C("",!0),x.costItemId?C("",!0):(n(),P("div",ge,[Ie,p("div",null,[d(o,{raw:"",subcontrol:""},{default:r((()=>[d(h,{modelValue:c(Q).catalog,"onUpdate:modelValue":a[3]||(a[3]=e=>c(Q).catalog=e),label:"Create template",color:"info"},null,8,["modelValue"])])),_:1})])])),p("div",we,[ke,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(y,{modelValue:c(Q).mark_as,"onUpdate:modelValue":a[4]||(a[4]=e=>c(Q).mark_as=e),disabled:x.previewCostItems},{default:r((()=>[(n(!0),P(D,null,S(c(Z),((e,a)=>(n(),i(b,{value:e.value},{default:r((()=>[v(m(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",Ce,[Pe,d(t,null,{default:r((({id:e})=>[d(o,null,{default:r((()=>[d(l,{required:"",modelValue:c(Q).cost_code,"onUpdate:modelValue":a[5]||(a[5]=e=>c(Q).cost_code=e),disabled:x.previewCostItems,attrs:{id:e},searchable:!0,options:c(T).costCodesList,placeholder:"Select a cost code"},null,8,["modelValue","disabled","attrs","options"])])),_:2},1024)])),_:1})]),p("div",De,[Se,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(Q).group,"onUpdate:modelValue":a[6]||(a[6]=e=>c(Q).group=e),name:"gcost",placeholder:"Group Cost"},null,8,["modelValue"])])),_:1})])),_:1})]),p("div",Ve,[xe,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(I,{modelValue:c(Q).description,"onUpdate:modelValue":a[7]||(a[7]=e=>c(Q).description=e),disabled:x.previewCostItems,rows:"4",placeholder:"Description..."},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",je,[Te,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(I,{modelValue:c(Q).internal_notes,"onUpdate:modelValue":a[8]||(a[8]=e=>c(Q).internal_notes=e),disabled:x.previewCostItems,rows:"3",placeholder:"Internal notes..."},null,8,["modelValue","disabled"])])),_:1})])),_:1})])])])),_:1}),d(j,{class:"column is-12 mt-3"},{default:r((()=>[p("div",Oe,[p("div",Ue,[Me,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(Q).unit_cost,"onUpdate:modelValue":a[9]||(a[9]=e=>c(Q).unit_cost=e),disabled:x.previewCostItems,type:"number",name:"unitCost",step:"any",placeholder:"Unit cost"},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",Le,[Ae,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(Q).quantity,"onUpdate:modelValue":a[10]||(a[10]=e=>c(Q).quantity=e),disabled:x.previewCostItems,type:"number",name:"quantity",step:"any",placeholder:"Quantity"},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",Fe,[$e,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(y,{disabled:x.previewCostItems,modelValue:c(Q).unit,"onUpdate:modelValue":a[11]||(a[11]=e=>c(Q).unit=e)},{default:r((()=>[d(b,{value:""},{default:r((()=>[v(" Select Unit ")])),_:1}),(n(!0),P(D,null,S(c(Ye),(e=>(n(),i(b,{value:e.value},{default:r((()=>[v(m(e.title)+" ("+m(e.value)+") ",1)])),_:2},1032,["value"])))),256))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1})]),p("div",Ee,[He,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(oe),"onUpdate:modelValue":a[12]||(a[12]=e=>u(oe)?oe.value=e:null),disabled:x.previewCostItems,type:"number",step:"any",name:"builderCost",placeholder:"Builder cost"},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",Re,[Ne,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(Q).markup,"onUpdate:modelValue":a[13]||(a[13]=e=>c(Q).markup=e),disabled:x.previewCostItems,type:"number",name:"markup",step:"any",placeholder:"Markup"},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",qe,[Be,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(te),"onUpdate:modelValue":a[14]||(a[14]=e=>u(te)?te.value=e:null),disabled:x.previewCostItems,type:"number",name:"markup",step:"any",placeholder:"Total Price"},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",Je,[ze,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(Q).margin,"onUpdate:modelValue":a[15]||(a[15]=e=>c(Q).margin=e),disabled:x.previewCostItems,type:"number",name:"markup",step:"any",placeholder:"Margin"},null,8,["modelValue","disabled"])])),_:1})])),_:1})]),p("div",We,[Ge,d(t,null,{default:r((()=>[d(o,null,{default:r((()=>[d(g,{modelValue:c(Q).worker_cost,"onUpdate:modelValue":a[16]||(a[16]=e=>c(Q).worker_cost=e),type:"number",name:"workerCost",step:"any",placeholder:"Worker Cost"},null,8,["modelValue"])])),_:1})])),_:1})])])])),_:1})])])),action:r((()=>[d(O,{loading:c(L),type:"submit",color:"primary",icon:x.costItemId?"":"fas fa-plus",raised:""},{default:r((()=>[v(m(x.costItemId?"Update":"Add"),1)])),_:1},8,["loading","icon"])])),_:1},8,["open","title","onSubmit"])}}}),Qe={class:"modal-form columns is-multiline"},Ye={class:"column is-full"},Xe={class:"field"},Ze=p("label",{class:"label"},"Send To ",-1),ea={class:"control"},aa={class:"column is-full"},la={class:"field"},oa=p("label",{class:"label"},"Subject ",-1),ta={class:"control"},sa={class:"field column is-full mt-5"},na=p("label",{class:"label"},"Message",-1),ia=p("i",{class:"feather:mail"},null,-1),ra=e({__name:"SendProposalEmailModal",props:{proposalSenderModal:{type:Boolean},proposalData:{},columnsToShow:{},selectedProposalsIds:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const s=e,u=ie(),m=R(),b=N(),y=o(!1),I=a(),D=window.origin;o(`${D}/proposal-view/?proposal=${s.proposalData?.id}`);const S=()=>{l("update:modalHandler",!1)},V=s.selectedProposalsIds.map((e=>e.id)),j=s.selectedProposalsIds.map((e=>e.proposalAmount)).map(((e,a)=>`<li>Total of proposal ${a+1}:<b> $${e} </b></li>`)).join("<br>"),T=V.map(((e,a)=>`<a href="${D}/proposal-view/?proposal=${e}" style="color: #007bff; text-decoration: none; font-weight: bold;">View Proposal ${a+1}, </a>`)).join("<br>"),O=o({email:u.leadProposalFormData?.jobInfo?.clientInfo?.email?u.leadProposalFormData?.jobInfo?.clientInfo?.email:"N/A",subject:`Proposal ${u.leadProposalFormData?.jobInfo?.title} `,message:`<p><b>Hi ${u.leadProposalFormData?.jobInfo?.clientInfo?.username?u.leadProposalFormData?.jobInfo?.clientInfo?.username:"N/A"} ${u.leadProposalFormData?.jobInfo?.clientInfo?.last_name?u.leadProposalFormData?.jobInfo?.clientInfo?.last_name:""},</b></p>\n\n  <p>We hope this message finds you well.</p>\n\n  <p>\n    Please find attached a detailed proposal outlining the cost items associated with the services/products we will be providing.\n    We have carefully curated this proposal to ensure complete transparency and alignment with your expectations.\n  </p>\n\n  <p>\n    Actions required for all proposals, and uou can review the full proposal(s), including the cost breakdown, by clicking the link below: <br />\n    ${T}\n  </p>\n\n  <p><b>Respectively proposal(s) amount are:</b></p>\n  <ul>\n    ${j}\n  </ul>\n\n  <p>\n    If you have any questions or require further clarification, feel free to reach out to us at your earliest convenience.\n    We are here to assist you.\n  </p>\n\n  <p>Thank you for trusting <b>Ibex Team</b> with your project.</p>\n\n  <p><b>Best Regards,</b><br />\n    Ibex Team\n  </p>`,link:T[0],columns:["cost_code","title","description","unit_cost"],showClient:!0,proposal_ids:V}),U=async()=>{try{y.value=!0;let e=O.value;e.proposal_ids=JSON.stringify(O.value.proposal_ids),e.columns=JSON.stringify(O.value.columns);await m.post("/api/lead-proposal/send-proposal-template/",e);b.success("Email sent successfully"),S()}catch(e){console.log(e)}finally{y.value=!1}},M=h((()=>g((()=>import("./ckeditor-91974270.js").then((e=>e.c))),["assets/ckeditor-91974270.js","assets/index-d4aaa0a5.js","assets/index-0e8a40a3.css","assets/vue.runtime.esm-bundler-6dea18eb.js"]).then((e=>e.default.component)))),L={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px",maxHeight:"600px"};return t((async()=>{I.value=await g((()=>import("./ckeditor-a700613f.js").then((e=>e.c))),["assets/ckeditor-a700613f.js","assets/index-d4aaa0a5.js","assets/index-0e8a40a3.css"]).then((e=>e.default))})),(e,a)=>{const l=f,o=$;return n(),P("div",null,[d(x,{name:"fade-slow"},{default:r((()=>[d(o,{is:"form",open:s.proposalSenderModal,title:"Send Proposal",size:"large",actions:"right",onSubmit:_(U,["prevent"]),onClose:S},{content:r((()=>[p("div",Qe,[p("div",Ye,[p("div",Xe,[Ze,p("div",ea,[w(p("input",{type:"email",required:"",class:"input",placeholder:"Enter Mail","onUpdate:modelValue":a[0]||(a[0]=e=>c(O).email=e)},null,512),[[k,c(O).email]])])])]),p("div",aa,[p("div",la,[oa,p("div",ta,[w(p("input",{type:"text",required:"",class:"input",placeholder:"Enter mail subject","onUpdate:modelValue":a[1]||(a[1]=e=>c(O).subject=e)},null,512),[[k,c(O).subject]])])])]),p("div",sa,[na,c(I)?(n(),i(c(M),{key:0,modelValue:c(O).message,"onUpdate:modelValue":a[2]||(a[2]=e=>c(O).message=e),editor:c(I),config:L},null,8,["modelValue","editor"])):C("",!0)])])])),action:r((()=>[d(l,{type:"submit",color:"primary",loading:c(y),raised:""},{default:r((()=>[ia,v(" Send Proposal")])),_:1},8,["loading"])])),cancel:r((()=>[d(l,{color:"light",onClick:S,raised:""},{default:r((()=>[v("Close ")])),_:1})])),_:1},8,["open","onSubmit"])])),_:1})])}}}),da=R();N();const ca=o(0),ua=async e=>{try{ca.value=3;const a=await da.get(`/api/lead-proposal/${e.id}/download/`,{responseType:"blob"}),l=new Blob([a.data],{type:"application/pdf"}),o=document.createElement("a");o.href=URL.createObjectURL(l),o.download=`Proposal-${e.title}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href)}catch(a){console.error("Error downloading PDF:",a)}finally{ca.value=0}},pa=async e=>{try{ca.value=1;const a=await da.get(`/api/lead-proposal/${e}/download/`,{responseType:"blob"}),l=new Blob([a.data],{type:"application/pdf"}),o=URL.createObjectURL(l),t=window.open(o,"_blank");t?t.onload=()=>{try{t.print()}catch(e){console.error("Error triggering print:",e)}finally{URL.revokeObjectURL(o)}}:console.error("Failed to open PDF in a new window.")}catch(a){console.error("Error printing PDF:",a)}finally{ca.value=0}},ma=e=>(T("data-v-82ab10b5"),e=e(),O(),e),va={class:"columns is-multiline"},_a=ma((()=>p("div",{class:"column is-9"},[p("h1",{class:"title is-5 m-1 p-0"},"Preview Lead Proposal"),p("p",{class:"m-1"}," Below is a preview of the proposal that will be sent as a link to the email addresses on this client contact. The proposal can be accessed through the link while it is Released. ")],-1))),fa={class:"column is-12"},ba={class:"invoice-wrapper"},ya={class:"invoice-header"},ha={class:"left"},ga={class:"right"},Ia={class:"controls"},wa=[ma((()=>p("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:printer"},null,-1)))],ka=[ma((()=>p("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:download-cloud"},null,-1)))],Ca=[ma((()=>p("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:mail"},null,-1)))],Pa={class:"invoice-body"},Da={class:"invoice-card"},Sa={class:"invoice-section is-flex pt-0"},Va=["src"],xa=ma((()=>p("div",{class:"meta"},null,-1))),ja={class:"end is-right"},Ta=ma((()=>p("span",null,"PO Box 242",-1))),Oa=ma((()=>p("span",null,"Evergreen, CO 80437-0242",-1))),Ua=ma((()=>p("span",null,"Phone: 720 272-9061",-1))),Ma={class:"invoice-section is-flex"},La={class:"meta"},Aa={key:0},Fa={key:1},$a={key:3},Ea={class:"end is-left"},Ha={class:"invoice-section"},Ra={class:"responsive-table"},Na=["innerHTML"],qa={key:1},Ba={key:2},Ja={key:3},za={key:4},Wa={key:5},Ga={key:6},Ka={key:7},Qa={key:8},Ya={key:9},Xa={class:"invoice-section is-flex mt-0 pt-0"},Za={class:"end is-left"},el={class:"text-right"},al=j('<div class="invoice-section is-flex mt-0 pt-0" data-v-82ab10b5><div class="footer" data-v-82ab10b5><h1 class="subtitle is-6 py-0 mb-0" data-v-82ab10b5> I confirm that my action here represents my electronic signature and is binding. </h1><div class="footer-meta" data-v-82ab10b5><p data-v-82ab10b5>Signature:</p><div data-v-82ab10b5></div></div><div class="footer-meta" data-v-82ab10b5><p data-v-82ab10b5>Date:</p><div data-v-82ab10b5></div></div><div class="footer-meta" data-v-82ab10b5><p class="no-wrap" data-v-82ab10b5>Print Name:</p><div data-v-82ab10b5></div></div></div></div>',1),ll=U(e({__name:"ProposalPreview",props:{columnsToShow:{},proposalData:{}},setup(e){const a=e,l=ee(),s=ie(),r=o(!1),d=o([]),u=o([]),v=o({}),_=()=>{u.value.push(a.proposalData),v.value=a.proposalData,d.value=s.leadProposalFormData.columns_to_show,r.value=!r.value};function f(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}const b=o({proposal:"Proposal",change_order:"Change Order",draft:"Draft"});return t((()=>{})),(e,o)=>{const t=Z,d=ra;return n(),P("div",va,[_a,p("div",fa,[p("div",ba,[p("div",ya,[p("div",ha,[p("h3",null," Proposal-ID "+m(c(s).leadProposalFormData?.id.slice(0,8)),1)]),p("div",ga,[p("div",Ia,[1==c(ca)?(n(),i(t,{key:0,color:"primary",outlined:"",size:"small",loading:"",circle:"",icon:"lucide:plus"})):(n(),P("a",{key:1,class:"action",onClick:o[0]||(o[0]=e=>c(pa)(c(s).leadProposalFormData?.id))},wa)),3==c(ca)?(n(),i(t,{key:2,color:"primary",outlined:"",size:"small",loading:"",circle:"",icon:"lucide:plus"})):(n(),P("a",{key:3,class:"action",onClick:o[1]||(o[1]=e=>c(ua)(c(s).leadProposalFormData))},ka)),p("a",{class:"action",onClick:_},Ca)])])]),p("div",Pa,[p("div",Da,[p("div",Sa,[p("img",{style:{height:"160px",padding:"0",margin:"0"},src:c(l).currentCompany.invoice_header_logo},null,8,Va),xa,p("div",ja,[Ta,Oa,Ua,p("span",null,m(c(l).currentCompany.branding_line),1)])]),p("div",Ma,[p("div",La,[c(s).leadProposalFormData?.jobInfo?.title?(n(),P("h3",Aa,m(c(s).leadProposalFormData?.jobInfo?.title?c(s).leadProposalFormData?.jobInfo?.title:""),1)):C("",!0),c(s).leadProposalFormData?.jobInfo?.clientInfo?(n(),P("span",Fa,m(c(s).leadProposalFormData?.jobInfo?.clientInfo?.username??"")+" "+m(c(s).leadProposalFormData?.jobInfo?.clientInfo?.last_name??""),1)):(n(),P("span",$a,m(c(s).leadProposalFormData?.jobInfo?.contractor_info?.email?c(s).leadProposalFormData?.jobInfo?.contractor_info?.email:""),1)),p("span",null,m(c(b)[c(s).leadProposalFormData?.type]),1)]),p("div",Ea,[p("h3",null,m(c(s).leadProposalFormData?.title),1),p("p",null,m(c(s).leadProposalFormData?.jobInfo?.address??""),1)])]),p("div",Ha,[p("table",Ra,[p("thead",null,[(n(!0),P(D,null,S(a.columnsToShow,((e,a)=>(n(),P("th",{key:a},m(c(Q)[e]),1)))),128))]),p("tbody",null,[(n(!0),P(D,null,S(c(s).proposalCostItems,((e,l)=>(n(),P("tr",{key:e.id},[(n(!0),P(D,null,S(a.columnsToShow,((a,l)=>(n(),P("td",{key:l},["description"===a?(n(),P("div",{key:0,innerHTML:e[c(Y)[a]]},null,8,Na)):"cost_code"===a?(n(),P("span",qa,m(e?.cost_code_info?.name),1)):"unit_cost"===a?(n(),P("span",Ba,m(f(e?.unit_cost)),1)):"margin"===a?(n(),P("span",Ja,m(f(e?.margin)),1)):"markup"===a?(n(),P("span",za,m(f(e?.markup)),1)):"builder_cost"===a?(n(),P("span",Wa,m(f(e?.builder_cost)),1)):"total_price"===a?(n(),P("span",Ga,m(f(e?.total_price)),1)):"profit"===a?(n(),P("span",Ka,m(f(e?.profit)),1)):"group_amount"===a?(n(),P("span",Qa,m(f(e?.group_amount)),1)):(n(),P("span",Ya,m(e[c(Y)[a]]),1))])))),128))])))),128))])])]),p("div",Xa,[p("div",Za,[p("h3",el," Total Price: "+m(f(c(s).leadProposalFormData?.proposalAmount)),1)])]),al])])])]),c(r)?(n(),i(d,{key:0,proposalSenderModal:c(r),selectedProposalsIds:c(u),proposalData:a.proposalData,columnsToShow:a.columnsToShow,"onUpdate:modalHandler":o[2]||(o[2]=e=>{r.value=!1,u.value=[]})},null,8,["proposalSenderModal","selectedProposalsIds","proposalData","columnsToShow"])):C("",!0)])}}}),[["__scopeId","data-v-82ab10b5"]]),ol=e=>(T("data-v-33d2a12b"),e=e(),O(),e),tl={class:"datatable-wrapper mt-0"},sl={class:"table-container"},nl={class:"table datatable-table is-fullwidth",id:"external-events"},il=ol((()=>p("th",null,null,-1))),rl=ol((()=>p("th",null,"Actions",-1))),dl=["data-event","onDragstart","onDrop","onDblclick"],cl={class:"is-relative"},ul=["onClick"],pl=["innerHTML"],ml={key:1},vl={key:2},_l=["onClick"],fl=[ol((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-briefcase"})],-1))),ol((()=>p("div",{class:"meta"},[p("span",null,"Edit"),p("span",null,"Edit Cost Item")],-1)))],bl=ol((()=>p("hr",{class:"dropdown-divider"},null,-1))),yl=["onClick"],hl=[ol((()=>p("div",{class:"icon"},[p("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),ol((()=>p("div",{class:"meta"},[p("span",null,"Remove"),p("span",null,"Remove from list")],-1)))],gl=e({__name:"CostItemsTable",props:{columnsToShow:{},itemsList:{},proposalId:{}},setup(e){const a=e,l=R(),s=o(""),u=o(!1),v=ie(),f=N(),b=o(""),y=o(0),h=o(""),g=o(!1),w=o(!1),k=o({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),V=e=>{e.preventDefault()},x=e=>{e.preventDefault(),e.currentTarget?.classList.add("drag-over")},j=e=>{e.preventDefault(),e.currentTarget?.classList.remove("drag-over")},T=async()=>{try{w.value=!0;await l.delete(`/api/cost/${h.value}/`);U(),k.value.isSweetAlertOpen=!1,f.success("Cost item deleted")}catch(e){console.log(e)}finally{w.value=!1}},O=(e,a=!1)=>{h.value=e.id,g.value=a,b.value=e.proposal,u.value=!u.value},U=()=>{v.getProposalCostItems(b.value)};return I((()=>a.columnsToShow),((e,o)=>{e&&JSON.stringify(e)!==JSON.stringify(o)&&(async()=>{try{a.proposalId&&await l.patch(`/api/lead-proposal/${a.proposalId}/`,{columns_to_show:JSON.stringify(a.columnsToShow)}),v.getProposalDetail(a.proposalId)}catch(e){f.error("Something went wrong, try again")}})()}),{deep:!0}),t((()=>{})),(e,o)=>{const t=le,f=ae,I=Ke;return n(),P("div",tl,[p("div",sl,[p("table",nl,[p("thead",null,[il,(n(!0),P(D,null,S(a.columnsToShow,((e,a)=>(n(),P("th",{key:a},m(c(Q)[e]),1)))),128)),rl]),p("tbody",null,[c(v).proposalCostItems.length>0?(n(!0),P(D,{key:0},S(c(v).proposalCostItems,((e,o)=>(n(),P("tr",{key:e.id,"data-event":JSON.stringify(e),draggable:"true",onDragstart:a=>{return l=e.id,s.value=l,void console.log("Drag started for ID:",l);var l},onDrop:a=>(e=>{console.log("Dropped on ID:",e);const a=v.proposalCostItems.find((e=>e.id===s.value)),o=v.proposalCostItems.find((a=>a.id===e));if(a&&o){l.post("/api/cost/drag-drop-items/",{dragged_item_id:a.id,dropped_item_id:o.id});const e=v.proposalCostItems.indexOf(a),t=v.proposalCostItems.indexOf(o);e>=0&&t>=0&&(v.proposalCostItems.splice(e,1),v.proposalCostItems.splice(t,0,a))}else console.error("Dragged or Dropped Item not found");s.value=null})(e.id),onDragover:V,onDragenter:x,onDragleave:j,onDblclick:a=>O(e,!1),class:"draggable-item events"},[p("td",cl,[p("i",{style:{position:"absolute",bottom:"-7px",left:"1px",cursor:"pointer","z-index":"99","font-weight":"600"},onClick:a=>(e=>{b.value=e.proposal,y.value=e.index,u.value=!u.value})(e),class:"lnir lnir-circle-plus info-text","aria-hidden":"true"},null,8,ul)]),(n(!0),P(D,null,S(a.columnsToShow,((a,l)=>(n(),P("td",{key:l},["description"===a?(n(),P("div",{key:0,class:"custom-description",innerHTML:e[c(Y)[a]]},null,8,pl)):(n(),P("span",ml,m(e[c(Y)[a]]),1)),"cost_code"===a?(n(),P("span",vl,m(e?.cost_code_info?.name),1)):C("",!0)])))),128)),p("td",null,[d(t,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:"",up:"",style:{"z-index":"99"}},{content:r((({close:a})=>[p("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:_((()=>{O(e,!1),a()}),["prevent"])},fl,8,_l),bl,p("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:_((()=>{(e=>{h.value=e.id,b.value=e.proposal,k.value={title:"Are you sure?",subtitle:"You will not be able to recover this cost item!",btntext:"Delete",isSweetAlertOpen:!0}})(e),a()}),["prevent"])},hl,8,yl)])),_:2},1024)])],40,dl)))),128)):C("",!0)])])]),c(k).isSweetAlertOpen?(n(),i(f,{key:0,isSweetAlertOpen:c(k).isSweetAlertOpen,title:c(k).title,subtitle:c(k).subtitle,btntext:c(k).btntext,onConfirm:T,onCancel:()=>c(k).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0),c(u)?(n(),i(I,{key:1,costItemModal:c(u),proposalId:c(b),costItemId:c(h),previousItemIndex:c(y),previewCostItems:c(g),"onUpdate:modalHandler":o[0]||(o[0]=e=>{u.value=!1,h.value=""}),"onUpdate:OnSuccess":U},null,8,["costItemModal","proposalId","costItemId","previousItemIndex","previewCostItems"])):C("",!0)])}}}),Il=U(gl,[["__scopeId","data-v-33d2a12b"]]),wl={class:"columns is-multiline"},kl={class:"column is-12 is-flex space-between"},Cl=p("div",null,[p("h1",{class:"title is-4"},"Proposal Worksheet")],-1),Pl={key:0,class:"column is-12"},Dl={class:"tabs-wrapper column is-12 m-0"},Sl={class:"tabs-inner mt-4"},Vl={class:"tabs is-boxed"},xl=[p("span",null,"Worksheet",-1)],jl=[p("span",null,"Format",-1)],Tl=[p("span",null,"Preview",-1)],Ol={key:0,class:"column is-12"},Ul={key:0,class:"column is-12"},Ml=p("div",{class:"column is-12",style:{"text-align":"center"}},[p("h1",{class:"title is-4"},"Connect your clients to their projects"),p("h1",{class:"title is-5"}," Create a client contact and assign them to jobs and lead opportunities effortlessly. ")],-1),Ll={class:"column is-12"},Al={key:0,class:"column is-12"},Fl=e({__name:"WorksheetItems",props:{leadProposalModal:{type:Boolean},proposalId:{},proposalData:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const m=e,b=R(),y=N(),w=a(),k=ie(),D=o(!1),S=o(!1),x=o(!1),j=o("worksheet");h((()=>g((()=>import("./ckeditor-91974270.js").then((e=>e.c))),["assets/ckeditor-91974270.js","assets/index-d4aaa0a5.js","assets/index-0e8a40a3.css","assets/vue.runtime.esm-bundler-6dea18eb.js"]).then((e=>e.default.component))));const T=async()=>{try{k.getProposalCostItems(m.proposalId)}catch(e){console.log(e)}};return I((()=>K.value),((e,a)=>{e&&JSON.stringify(e)!==JSON.stringify(a)&&(async()=>{try{m.proposalId&&await b.patch(`/api/lead-proposal/${m.proposalId}/`,{columns_to_show:JSON.stringify(K.value)}),k.getProposalDetail(m.proposalId)}catch(e){y.error("Something went wrong, try again")}})()}),{deep:!0}),t((async()=>{w.value=await g((()=>import("./ckeditor-a700613f.js").then((e=>e.c))),["assets/ckeditor-a700613f.js","assets/index-d4aaa0a5.js","assets/index-0e8a40a3.css"]).then((e=>e.default)),m.proposalId&&(T(),k.getProposalDetail(m.proposalId))})),M((()=>{k.clearProposalId()})),(e,a)=>{const l=f,o=s("Multiselect"),t=H,b=E,y=Il,h=V,g=ll,I=Ke,w=ne;return n(),P("div",null,[p("div",wl,[p("div",kl,[Cl,p("div",null,[d(l,{size:"small",light:"",outlined:"",icon:"fas fa-cogs",class:"mr-2",color:c(S)?"danger":"warning",onClick:a[0]||(a[0]=e=>S.value=!c(S))},{default:r((()=>[v("Customize Columns")])),_:1},8,["color"]),d(l,{size:"small",light:"",outlined:"",color:"primary",onClick:a[1]||(a[1]=e=>D.value=!c(D))},{default:r((()=>[v("Add Item")])),_:1})])]),d(L,{class:"fade-slow",name:"fade-slow"},{default:r((()=>[c(S)?(n(),P("div",Pl,[d(b,{label:"Choose what to show to lead",class:"column is-12"},{default:r((({id:e})=>[d(t,null,{default:r((()=>[d(o,{modelValue:c(K),"onUpdate:modelValue":a[2]||(a[2]=e=>u(K)?K.value=e:null),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:c(X),placeholder:"Add columns"},null,8,["modelValue","attrs","options"])])),_:2},1024)])),_:1})])):C("",!0)])),_:1}),p("div",Dl,[p("div",Sl,[p("div",Vl,[p("ul",null,[p("li",{class:A(["worksheet"===c(j)?"is-active":"not-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:a[3]||(a[3]=F(_((e=>j.value="worksheet"),["prevent"]),["space"])),onClick:a[4]||(a[4]=e=>j.value="worksheet")},xl,32)],2),p("li",{class:A(["format"===c(j)?"is-active":"not-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:a[5]||(a[5]=F(_((e=>j.value="format"),["prevent"]),["space"])),onClick:a[6]||(a[6]=e=>j.value="format")},jl,32)],2),p("li",{class:A(["preview"===c(j)?"is-active":"not-active"])},[p("a",{tabindex:"0",role:"button",onKeydown:a[7]||(a[7]=F(_((e=>j.value="preview"),["prevent"]),["space"])),onClick:a[8]||(a[8]=e=>j.value="preview")},Tl,32)],2)])])])]),d(L,{class:"fade-slow",name:"slide-x"},{default:r((()=>["worksheet"===c(j)?(n(),P("div",Ol,[d(y,{columnsToShow:c(K),proposalId:m.proposalId},null,8,["columnsToShow","proposalId"])])):C("",!0)])),_:1}),d(L,{class:"fade-slow",name:"slide-x"},{default:r((()=>["format"===c(j)?(n(),P("div",Ul,[d(h,{class:"columns is-multiline m-0"},{default:r((()=>[Ml,p("div",Ll,[d(y,{columnsToShow:c(K),proposalId:m.proposalId},null,8,["columnsToShow","proposalId"])])])),_:1})])):C("",!0)])),_:1}),d(L,{class:"fade-slow",name:"slide-x"},{default:r((()=>["preview"===c(j)?(n(),P("div",Al,[d(g,{proposalData:m.proposalData,proposalId:m.proposalId,columnsToShow:c(K)},null,8,["proposalData","proposalId","columnsToShow"])])):C("",!0)])),_:1})]),c(D)?(n(),i(I,{key:0,costItemModal:c(D),proposalId:m.proposalId,"onUpdate:modalHandler":a[9]||(a[9]=e=>D.value=!1),"onUpdate:OnSuccess":T},null,8,["costItemModal","proposalId"])):C("",!0),c(x)?(n(),i(w,{key:1,centeredActionsOpen:c(x),proposalId:m.proposalId,"onUpdate:modalHandler":a[10]||(a[10]=e=>x.value=!1),"onUpdate:OnSuccess":T},null,8,["centeredActionsOpen","proposalId"])):C("",!0)])}}}),$l=e=>(T("data-v-0317543a"),e=e(),O(),e),El={class:"columns is-multiline"},Hl=$l((()=>p("div",{class:"column is-2"},null,-1))),Rl={class:"column is-8"},Nl=$l((()=>p("div",{class:"column is-2"},null,-1))),ql=$l((()=>p("div",{class:"column is-2"},null,-1))),Bl=$l((()=>p("div",{class:"column is-8"},[p("p",null," All the tasks will be generated and will start from the date you will put. ")],-1))),Jl=$l((()=>p("div",{class:"column is-2"},null,-1))),zl=e({__name:"CreateProposalTasksModal",props:{createProposalTasksModal:{type:Boolean,default:!1},proposalId:{default:""}},emits:["closeModalHandler","update:OnSuccess"],setup(e,{emit:a}){const l=e,s=N(),m=R(),b=o(""),y=o(!1),h=()=>{a("update:OnSuccess",null),a("closeModalHandler",!1)},g=async()=>{try{await m.post("/api/lead-proposal/create-tasks/",{start:b.value,proposal:l.proposalId});s.success("Tasks of this proposal are created in calendar successfully."),h()}catch(e){console.log(e),s.error("Something went wrong, please review the cost codes")}};return t((()=>{})),(e,a)=>{const o=J,t=H,s=E,m=f,I=$;return n(),i(I,{is:"form",open:l.createProposalTasksModal,title:"Generate Tasks",size:"small",actions:"center",onSubmit:_(g,["prevent"]),onClose:h},{content:r((()=>[p("div",El,[Hl,p("div",Rl,[d(s,{label:"Enter Tasks Starting Date"},{default:r((()=>[d(t,null,{default:r((()=>[d(o,{modelValue:c(b),"onUpdate:modelValue":a[0]||(a[0]=e=>u(b)?b.value=e:null),required:"",name:"startDate",type:"date"},null,8,["modelValue"])])),_:1})])),_:1})]),Nl,ql,Bl,Jl])])),cancel:r((()=>[d(m,{light:"",onClick:a[1]||(a[1]=e=>h())},{default:r((()=>[v("Cancel")])),_:1})])),action:r((()=>[d(m,{loading:c(y),type:"submit",color:"info",light:"",raised:""},{default:r((()=>[v("Generate")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Wl=U(zl,[["__scopeId","data-v-0317543a"]]);export{Fl as _,ra as a,Wl as b,Ke as c,re as d,ua as e,ie as u};
