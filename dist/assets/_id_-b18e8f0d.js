import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-97b92f26.js";import{_ as l,a,b as t}from"./RotaView-adcfced5.js";import{_ as s}from"./VModal.vue_vue_type_style_index_0_lang-4f4f36ea.js";import{e as i,N as n,t as o,r,o as c,y as d,z as u,A as m,B as p,C as v,l as f,P as y,H as h,I as g,K as b,j as _,S as w,T as x,D as k,Q as C,R as S,J as A,a3 as N,E as I,W as V,X as T,L as D,G as j,a0 as R,aB as O,O as E,Z as U,M as L,Y as z,aR as M,f as q,al as P,n as $,i as F,w as B,aq as W,h as Y,a7 as H,U as K,s as G,av as X,aa as J,v as Z,ak as Q}from"./index-236e42c8.js";import{_ as ee}from"./VSwitchSegment.vue_vue_type_style_index_0_lang-c9b994c5.js";import{_ as le}from"./VControl-48568c4a.js";import{_ as ae,a as te}from"./VOption.vue_vue_type_style_index_0_lang-e491d2fd.js";import{_ as se}from"./VField.vue_vue_type_script_setup_true_lang-7ffe74ec.js";import{_ as ie}from"./VAvatar.vue_vue_type_style_index_0_lang-c705536c.js";import{_ as ne}from"./VIconButton-40cb2c1b.js";import{u as oe,a as re}from"./useAPI-bc0008ee.js";import{u as ce}from"./useNotyf-d45cea71.js";import{u as de}from"./company-883d4b6a.js";import{m as ue}from"./upload-3-1296d71e.js";import{a as me,f as pe,b as ve,C as fe,s as ye}from"./useSupportElement-44c75f51.js";import{u as he}from"./userSession-19a11b55.js";import{_ as ge}from"./VInput.vue_vue_type_script_setup_true_lang-60c6a1c0.js";import{_ as be}from"./VIMaskInput.vue_vue_type_script_lang-67893ecc.js";import{_ as _e}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-2ed5badb.js";import{_ as we}from"./favicon_512x512-95354c31.js";import{_ as xe}from"./BScertificate-27cd76da.js";import{_ as ke}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-a0ca9a0a.js";import{_ as Ce}from"./VDropdown.vue_vue_type_style_index_0_lang-e2d54742.js";import{_ as Se}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-7c6df71c.js";import{_ as Ae,a as Ne}from"./projects-dark-4a371d8a.js";import{_ as Ie}from"./VTextarea.vue_vue_type_script_setup_true_lang-3bb654ed.js";import{_ as Ve}from"./QuestionsOfMembers.vue_vue_type_script_setup_true_lang-5c404479.js";import{_ as Te}from"./VIconBox.vue_vue_type_style_index_0_lang-0580a9c9.js";import{_ as De}from"./VIconWrap.vue_vue_type_style_index_0_lang-32a4ccc4.js";import{c as je,_ as Re}from"./VFlexTable.vue_vue_type_style_index_0_lang-33659a9d.js";import{_ as Oe}from"./VTag.vue_vue_type_style_index_0_lang-e0e424bb.js";import{_ as Ee}from"./VProgress.vue_vue_type_style_index_0_lang-dc4ef1e1.js";import{_ as Ue,a as Le}from"./search-4-dark-2b5b440c.js";import{i as ze,F as Me}from"./index-c9a5c805.js";import{_ as qe}from"./VBlock.vue_vue_type_style_index_0_lang-3957c872.js";import{_ as Pe}from"./sia-476d3e58.js";import{_ as $e}from"./VLabel.vue_vue_type_script_setup_true_lang-c77fec83.js";import{_ as Fe}from"./VMessage.vue_vue_type_style_index_0_lang-33e4bc7c.js";import{_ as Be}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-f27c7b81.js";import{_ as We}from"./VRangeRating-623f205e.js";import{_ as Ye}from"./pdf-9ba17336.js";import{A as He}from"./vue3-apexcharts.common-2029c972.js";import{u as Ke}from"./useThemeColors-955ff7a5.js";import{u as Ge}from"./viewWrapper-fe155b42.js";import"./VCollapse.vue_vue_type_style_index_0_lang-0413c4e1.js";import"./VIcon.vue_vue_type_script_setup_true_lang-38cefdf1.js";import"./VTags.vue_vue_type_script_setup_true_lang-3af502dd.js";import"./index-5dc2bf65.js";import"./useVFieldContext-c5a054a2.js";import"./notyf-449e07c4.js";import"./useDropdown-ffb1b2c3.js";import"./VPlaceloadWrap-bc8e99f5.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-6ffedf0f.js";import"./VFlex.vue_vue_type_style_index_0_lang-3d28ad31.js";import"./via-placeholder-24645670.js";import"./vue.runtime.esm-bundler-32c1ddbe.js";const Xe=e=>(V("data-v-2d017789"),e=e(),T(),e),Je={class:"modal-form columns cu-all-input is-multiline"},Ze={class:"column is-12 mb-0"},Qe={class:"columns mb-0 p-0"},el=Xe((()=>v("label",null,"Profile :",-1))),ll={class:"control is-flex is-justify-content-center"},al=["src"],tl={key:1},sl={class:"column is-6 mb-0 p-0"},il={class:"field column is-12 mb-0 pt-0"},nl=Xe((()=>v("label",null,"First Name: *",-1))),ol={class:"control"},rl={class:"field column is-12 mb-0"},cl=Xe((()=>v("label",null,"Last Name: ",-1))),dl={class:"control"},ul={class:"field column is-6 mb-0"},ml=Xe((()=>v("label",null,"Email Address: *",-1))),pl={class:"control"},vl={class:"field column is-6 mb-0"},fl=Xe((()=>v("label",null,"Phone Number: ",-1))),yl={class:"control"},hl={class:"field column is-6 mb-0"},gl=Xe((()=>v("label",null,"Industry: * ",-1))),bl={class:"field column is-6 mb-0"},_l=Xe((()=>v("label",null,"Supplier: ",-1))),wl={class:"field column is-6 mb-0"},xl=Xe((()=>v("label",null,"Archive: ",-1))),kl={class:"field column is-6 mb-0"},Cl=Xe((()=>v("label",null,"Activation Code: ",-1))),Sl={class:"control"},Al={class:"field column is-6 mb-0"},Nl=Xe((()=>v("label",null,"Post Code:",-1))),Il={class:"control"},Vl={class:"field column is-6 mb-0"},Tl=Xe((()=>v("label",null,"Home Address: ",-1))),Dl={class:"control"},jl={class:"field column is-6 mb-0"},Rl=Xe((()=>v("label",null,"Transport: ",-1))),Ol={class:"field column is-6 mb-0"},El=Xe((()=>v("label",null,"Line Manager: ",-1))),Ul={class:"control"},Ll={class:"field column is-6 mb-0"},zl=Xe((()=>v("label",null,"External ID: ",-1))),Ml={class:"control"},ql={class:"field column is-6 mb-0"},Pl=Xe((()=>v("label",null,"Company ID Card Number: ",-1))),$l={class:"control"},Fl={class:"field column is-6 mb-0",style:{position:"relative"}},Bl={class:"control"},Wl={key:0,style:{position:"absolute",bottom:"80px","background-color":"white",width:"350px"}},Yl={class:"colorContainer"},Hl=["onClick"],Kl={key:0,class:"fas fa-check","aria-hidden":"true"},Gl=["loading"],Xl=i({__name:"EditWorker",props:{EditCompanyModalOpen:{type:Boolean,default:!1},id:{type:Number,default:0},getAllWorkers:Function},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:a}){const t=e,i=he();n();const V=o(),T=de(),D=ce(),j=oe(),R=r(!1),O=r(!1),E=r("update"),U=r(!1),L=r(!1),z=r(!1),M=r(""),q=r({id:0,backgroundColor:"",created_at:""}),P=r([{id:0,backgroundColor:"",created_at:""}]),$=r({message:"You are deleting this worker, after this action the worker will be removed permanently from the system.",captionText:"Delete this worker"}),F=r({id:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:"",lineManager:"",homeAddress:"",archive:!1,profileImageURL:null,externalID:" ",compnayIdCardNumber:" ",compnayIdCardExpiryDate:" ",industry:"",arezCompany:"",activatiactivationCodeonCode:"",status:!1,postCode:"",latitude:0,longitude:0,transport:"",bgColor:"",activationCode:""}),B=r({}),W=T.suppliers?T.suppliers:[],Y=T.loggedCompany.industry?T.loggedCompany.industry:[],H=async()=>{try{R.value=!0,console.log(F.value.status);const e=me(F.value,["profileImageURL"]);e.append("archive",F.value.archive);await j.patch(`/v3/api/worker/${t.id}/`,e);G(),D.dismissAll(),R.value=!1,D.success("worker updated, worker"),a("update:OnSuccess",null)}catch(e){console.error(e);let l=e.response.data??{};Object.values(l).forEach((e=>{e.forEach((e=>{console.log(e),D.error(` ${e}, New worker`)}))}))}finally{R.value=!1}},K=e=>{"industry"!==e.name?"transport"!==e.name?"supplier"!==e.name?B.value={...B.value,[e.target.name]:e.target.value}:B.value={...B.value,[e.name]:e.value}:B.value={...B.value,[e.name]:e.value}:B.value={...B.value,[e.name]:e.value}},G=()=>{a("update:modalHandler",!1),F.value={id:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:"",lineManager:"",homeAddress:"",profileImageURL:null,externalID:" ",compnayIdCardNumber:" ",compnayIdCardExpiryDate:" ",industry:"",arezCompany:"",supplier:0}},X=async()=>{try{const e=await j.get("/v3/api/worker/bgcolor/",{});P.value=e.data;let l=e.data.find((e=>e.id===F.value.bgColor));console.log(l),l&&(q.value=l)}catch(e){}},J=()=>{L.value=!L.value},Z=async()=>{try{await j.delete(`/v3/api/worker/${t.id}/`);U.value=!1,G(),t.getAllWorkers&&t.getAllWorkers(),V.push("/sidebar/company/workers?type=All"),D.dismissAll(),D.error("Worker deleted permanently.")}catch(e){return e}},Q=e=>{const l=function(e){const l=e.split(","),a=l[0].indexOf("base64")>=0?atob(l[1]):decodeURI(l[1]),t=l[0].split(":")[1].split(";")[0],s=new Uint8Array(a.length);for(let i=0;i<a.length;i++)s[i]=a.charCodeAt(i);return new Blob([s],{type:t})}(e);F.value.profileImageURL=l,M.value=e,console.log("Image URl:",e)};const pe=async()=>{try{const e=await re.get(`https://maps.googleapis.com/maps/api/geocode/json?address=${F.value.postCode}&key=AIzaSyDWHedwkLGGa4_3XgPqYxIzMkFpOdKJRik`);"OK"===e.data.status?(F.value.homeAddress=e.data.results[0].formatted_address,F.value.latitude=e.data.results[0].geometry.location.lat,F.value.longitude=e.data.results[0].geometry.location.lng,D.success("Address Added")):"ZERO_RESULTS"===e.data.status&&D.error("Invalid Post-Code")}catch(e){D.error("Invalid Post-Code"),console.error(e)}};return c((()=>{(async()=>{try{R.value=!0;const e=await j.get(`/v3/api/worker/${t.id}/`,{});F.value=e.data,M.value=e.data.profileImageURL,R.value=!1,X()}catch(e){R.value=!1,console.error("ok",e)}})()})),(e,a)=>{const n=ne,o=ie,r=se,c=ae,V=te,T=le,D=ee,j=I,X=s,oe=l;return d(),u(C,null,[m(X,{is:"form",open:t.EditCompanyModalOpen,title:"Edit worker",size:"big",actions:"right",onSubmit:b(H,["prevent"]),onClose:G,noclose:""},{content:p((()=>[v("div",Je,[v("div",Ze,[v("div",Qe,[m(r,{class:"column is-6"},{default:p((()=>[el,v("div",ll,[m(o,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:p((()=>[f(O)?y("",!0):(d(),u("img",{key:0,class:"avatar",src:f(M)?f(M):"/images/avatars/placeholder.jpg",alt:""},null,8,al)),"update"==f(E)?(d(),u("span",tl,[f(O)?(d(),h(n,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:a[2]||(a[2]=g(b((e=>O.value=!1),["prevent"]),["space"])),onClick:a[3]||(a[3]=e=>O.value=!1)})):(d(),h(n,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:a[0]||(a[0]=g(b((e=>O.value=!0),["prevent"]),["space"])),onClick:a[1]||(a[1]=()=>{z.value=!f(z)})}))])):y("",!0)])),_:1}),m(f(ue),{field:"img",onCropSuccess:Q,modelValue:f(z),"onUpdate:modelValue":a[4]||(a[4]=e=>_(z)?z.value=e:null),noRotate:!1,noSquare:!1,langType:"en","img-format":"png/jpg"},null,8,["modelValue"])])])),_:1}),v("div",sl,[v("div",il,[nl,v("div",ol,[w(v("input",{type:"text",name:"firstName","onUpdate:modelValue":a[5]||(a[5]=e=>f(F).firstName=e),onChange:a[6]||(a[6]=e=>K(e)),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"First Name"},null,544),[[x,f(F).firstName]])])]),v("div",rl,[cl,v("div",dl,[w(v("input",{type:"text",name:"lastName","onUpdate:modelValue":a[7]||(a[7]=e=>f(F).lastName=e),onChange:a[8]||(a[8]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Last Name"},null,544),[[x,f(F).lastName]])])])])])]),v("div",ul,[ml,v("div",pl,[w(v("input",{type:"email",name:"emailAddress","onUpdate:modelValue":a[9]||(a[9]=e=>f(F).emailAddress=e),onChange:a[10]||(a[10]=e=>K(e)),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Email Address"},null,544),[[x,f(F).emailAddress]])])]),v("div",vl,[fl,v("div",yl,[w(v("input",{type:"tel",name:"phoneNumber","onUpdate:modelValue":a[11]||(a[11]=e=>f(F).phoneNumber=e),onChange:a[12]||(a[12]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Phone Number"},null,544),[[x,f(F).phoneNumber]])])]),v("div",hl,[gl,m(r,null,{default:p((()=>[m(T,null,{default:p((()=>[m(V,{modelValue:f(F).industry,"onUpdate:modelValue":a[13]||(a[13]=e=>f(F).industry=e),onInput:a[14]||(a[14]=e=>K({name:"industry",value:e.target.value})),name:"industry",required:"",class:"is-rounded"},{default:p((()=>[m(c,{value:""},{default:p((()=>[k("Select Industry")])),_:1}),(d(!0),u(C,null,S(f(Y),((e,l)=>(d(),h(c,{value:e.id,key:l},{default:p((()=>[k(A(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(r,{id:"interests",class:"pb-4",label:""})]),v("div",bl,[_l,m(r,null,{default:p((()=>[m(T,null,{default:p((()=>[m(V,{disabled:"partner"==f(i).user.role,modelValue:f(F).supplier,"onUpdate:modelValue":a[15]||(a[15]=e=>f(F).supplier=e),onInput:a[16]||(a[16]=e=>K({name:"supplier",value:e.target.value})),name:"industry",class:"is-rounded"},{default:p((()=>[m(c,{value:""},{default:p((()=>[k("Select Supplier")])),_:1}),(d(!0),u(C,null,S(f(W),((e,l)=>(d(),h(c,{value:e.id,key:l},{default:p((()=>[k(A(e.supplierName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1}),m(r,{id:"interests",class:"pb-4",label:""})]),v("div",wl,[xl,v("span",null,[m(r,{horizontal:""},{default:p((()=>[m(T,null,{default:p((()=>[m(D,{modelValue:f(F).archive,"onUpdate:modelValue":a[17]||(a[17]=e=>f(F).archive=e),color:"success","label-true":"Archive","label-false":"Un-Archive"},null,8,["modelValue"])])),_:1})])),_:1})])]),v("div",kl,[Cl,v("div",Sl,[w(v("input",{type:"text",name:"activationCode","onUpdate:modelValue":a[18]||(a[18]=e=>f(F).activationCode=e),onChange:a[19]||(a[19]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Activation Code"},null,544),[[x,f(F).activationCode]])])]),v("div",Al,[Nl,v("div",Il,[w(v("input",{type:"text",name:"postCode","onUpdate:modelValue":a[20]||(a[20]=e=>f(F).postCode=e),onBlur:pe,onChange:a[21]||(a[21]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Post Code"},null,544),[[x,f(F).postCode]])])]),v("div",Vl,[Tl,v("div",Dl,[w(v("input",{type:"text",name:"homeAddress","onUpdate:modelValue":a[22]||(a[22]=e=>f(F).homeAddress=e),onChange:a[23]||(a[23]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Home Address"},null,544),[[x,f(F).homeAddress]])])]),v("div",jl,[Rl,m(r,null,{default:p((()=>[m(T,null,{default:p((()=>[m(V,{modelValue:f(F).transport,"onUpdate:modelValue":a[25]||(a[25]=e=>f(F).transport=e),onInput:a[26]||(a[26]=e=>K({name:"transport",value:e.target.value})),name:"transport",class:"is-rounded"},{default:p((()=>[m(c,{modelValue:f(F).transport,"onUpdate:modelValue":a[24]||(a[24]=e=>f(F).transport=e)},{default:p((()=>[k("Transport ?")])),_:1},8,["modelValue"]),m(c,{value:"Car"},{default:p((()=>[k("Car")])),_:1}),m(c,{value:"Public"},{default:p((()=>[k("Public")])),_:1}),m(c,{value:"Commercial"},{default:p((()=>[k("Commercial")])),_:1}),m(c,{value:"Bicycle"},{default:p((()=>[k("Bicycle")])),_:1}),m(c,{value:"Bike"},{default:p((()=>[k("Bike")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(r,{id:"interests",class:"pb-4",label:""})]),v("div",Ol,[El,v("div",Ul,[w(v("input",{type:"text",name:"lineManager","onUpdate:modelValue":a[27]||(a[27]=e=>f(F).lineManager=e),onChange:a[28]||(a[28]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Line Manager"},null,544),[[x,f(F).lineManager]])])]),v("div",Ll,[zl,v("div",Ml,[w(v("input",{type:"text",name:"externalID","onUpdate:modelValue":a[29]||(a[29]=e=>f(F).externalID=e),onChange:a[30]||(a[30]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"External ID"},null,544),[[x,f(F).externalID]])])]),v("div",ql,[Pl,v("div",$l,[w(v("input",{type:"text",name:"compnayIdCardNumber","onUpdate:modelValue":a[31]||(a[31]=e=>f(F).compnayIdCardNumber=e),onChange:a[32]||(a[32]=e=>K(e)),class:"input is-primary-focus is-primary-focus",placeholder:"Company ID Card Number"},null,544),[[x,f(F).compnayIdCardNumber]])])]),v("div",Fl,[v("label",null,[k("Select Profile Background Color: "),v("i",{style:{color:"var(--primary)","margin-left":"20px"},onClick:J,class:"fas fa-paint-brush","aria-hidden":"true"})]),v("div",Bl,[v("div",null,[v("div",{onClick:J,class:"color-pellate"},[v("div",{class:"current-color-div",style:N({backgroundImage:f(q).backgroundColor})},null,4)])])]),f(L)?(d(),u("div",Wl,[v("div",Yl,[v("div",{class:"close-btn"},[v("i",{onClick:J,class:"lnir lnir-close","aria-hidden":"true"})]),(d(!0),u(C,null,S(f(P),((e,l)=>(d(),u("div",{key:e.id,onClick:l=>(e=>{q.value=e,B.value={...B.value,bgColor:e.id}})(e),style:N({backgroundImage:e.backgroundColor}),class:"colorDiv"},[f(q)==e?(d(),u("i",Kl)):y("",!0)],12,Hl)))),128))])])):y("",!0)])])])),cancel:p((()=>[v("a",{style:{"margin-right":"480px","text-decoration":"underline","font-weight":"500",color:"red"},onClick:a[33]||(a[33]=()=>{U.value=!f(U)}),loading:f(R),color:"danger",raised:""},"Delete",8,Gl)])),action:p((()=>[m(j,{type:"submit",loading:f(R),color:"primary",raised:""},{default:p((()=>[k("Update")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"]),f(U)?(d(),h(oe,{key:0,actionVerificationModal:f(U),message:f($).message,captionText:f($).captionText,"onUpdate:OnSuccess":Z},null,8,["actionVerificationModal","message","captionText"])):y("",!0)],64)}}}),Jl=D(Xl,[["__scopeId","data-v-2d017789"]]),Zl={class:"modal-form columns is-multiline"},Ql={class:"mb-3 is-reversed",style:{width:"100%"}},ea=i({__name:"VeriffLink",props:{veriffModal:{type:Boolean},id:{},email:{},phone:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;j();const t=oe(),i=r(!1),n=ce(),o=r(""),y=r(!1),h=r(!1),g=()=>{l("update:modalHandler",!1)};return c((()=>{(async()=>{try{const e=await t.post("/v3/api/worker/veriff/create-session/",{worker:a.id});o.value=e.data.verification.url}catch(e){console.log(e)}})()})),(e,l)=>{const r=ge,c=le,w=I,x=se,C=s;return d(),u("template",null,[m(R,{name:"fade-slow"},{default:p((()=>[m(C,{is:"form",open:a.veriffModal,title:"Send Veriff Link",size:"small",actions:"right",onClose:g,class:"crete-link-modal"},{content:p((()=>[v("div",Zl,[v("div",Ql,[m(x,{addons:""},{default:p((()=>[m(c,{expanded:""},{default:p((()=>[m(r,{modelValue:f(o),"onUpdate:modelValue":l[0]||(l[0]=e=>_(o)?o.value=e:null),type:"text",class:"input",placeholder:"Find a repository"},null,8,["modelValue"])])),_:1}),m(c,null,{default:p((()=>[m(w,{icon:"fas fa-copy",onClick:l[1]||(l[1]=e=>{return l=f(o),navigator.clipboard.writeText(l),void n.success("Link Copied");var l}),color:"primary"},{default:p((()=>[k(" Link ")])),_:1})])),_:1})])),_:1}),v("div",null,[v("form",{onSubmit:l[3]||(l[3]=b((e=>(async()=>{try{y.value=!0,await t.post(`/v3/api/worker/veriff/${a.id}/send-veriff-email/`,{link:o.value,email:a.email}),n.success("Invitation Email sent successfully")}catch{n.error("Invalid email address")}finally{y.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[m(x,{style:{width:"100%"},addons:""},{default:p((()=>[m(c,{expanded:""},{default:p((()=>[m(r,{modelValue:a.email,"onUpdate:modelValue":l[2]||(l[2]=e=>a.email=e),type:"email",class:"input",placeholder:"example@gmail.com"},null,8,["modelValue"])])),_:1}),m(c,null,{default:p((()=>[m(w,{type:"submit",icon:"feather:mail",loading:f(y),color:"primary"},{default:p((()=>[k(" Mail ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)]),v("div",null,[v("form",{onSubmit:l[5]||(l[5]=b((e=>(async()=>{try{h.value=!0,await t.post("/v3/api/worker/worker_invitation/send-invitation-sms/",{message:o.value,phone:a.phone}),n.success("Invitation SMS sent successfully")}catch{n.error("Invalid phone number")}finally{h.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[m(x,{style:{width:"100%"},addons:""},{default:p((()=>[m(c,{expanded:""},{default:p((()=>[m(r,{modelValue:a.phone,"onUpdate:modelValue":l[4]||(l[4]=e=>a.phone=e),pattern:"^\\+44\\d{10}$",type:"phone",class:"input",required:"",placeholder:"+4400000000"},null,8,["modelValue"])])),_:1}),m(c,null,{default:p((()=>[m(w,{type:"submit",icon:"feather:message-circle",loading:f(y),color:"primary"},{default:p((()=>[k(" SMS ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)])])])])),action:p((()=>[m(w,{style:{display:"none"},type:"submit",color:"primary",rounded:"",loading:f(i),icon:"fas fa-link",raised:""},{default:p((()=>[k(" Create")])),_:1},8,["loading"])])),cancel:p((()=>[m(w,{style:{display:"none"},rounded:"",color:"light",onClick:g,raised:""},{default:p((()=>[k("Close ")])),_:1})])),_:1},8,["open"])])),_:1})])}}}),la=D(ea,[["__scopeId","data-v-ad47fc25"]]),aa=v("div",{class:"form-layout is-separate"},[v("div",{class:"form-outer"},[v("div",{class:"form-body"},[v("div",{class:"form-section p-4"},[v("div",{class:"columns is-multiline"},[v("div",{class:"column is-12 is-flex"},[v("img",{style:{width:"auto",height:"40px"},src:we}),v("div",null,[v("h3",{style:{"font-size":"20px",color:"var(--primary)"},class:"cus-stat-heading ml-4 mt-0"},"Arez"),v("h3",{style:{"font-size":"12px"},class:"cus-stat-heading ml-4 mt-0"},"The Compliance Manager")])]),v("div",{class:"column is-6"})])])])])],-1),ta={class:"columns is-multiline px-5"},sa={key:0,class:"column is-6 is-flex"},ia=v("h1",{class:"is-bold"},"Unique ID: ",-1),na={class:"is-bold ml-2"},oa={key:1,class:"column is-6 is-flex"},ra={key:2,class:"column is-6 is-flex"},ca=v("h1",{class:"is-bold"},"Designated At: ",-1),da={class:"is-bold ml-2"},ua={key:3,class:"column is-6 is-flex"},ma={key:4,class:"column is-6 is-flex"},pa=v("h1",{class:"is-bold"},"Updated At: ",-1),va={class:"is-bold ml-2"},fa={key:5,class:"column is-6 is-flex"},ya={key:6,class:"column is-6 is-flex"},ha=v("h1",{class:"is-bold"},"UN Reference Number:",-1),ga={class:"is-bold ml-2"},ba={key:7,class:"column is-6 is-flex"},_a={class:"column is-12 is-flex"},wa=v("h1",{class:"is-bold"},"Regime Name:",-1),xa={class:"is-bold ml-2"},ka={key:8,class:"column is-12 is-flex"},Ca={key:9,class:"column is-6 is-flex"},Sa=v("h1",{class:"is-bold"},"Individual Entity Ship:",-1),Aa={class:"is-bold ml-2"},Na={key:10,class:"column is-6 is-flex"},Ia={class:"column is-6 is-flex"},Va=v("h1",{class:"is-bold"},"Designated source:",-1),Ta={class:"is-bold ml-2"},Da={key:11,class:"column is-6 is-flex"},ja={class:"column is-12 is-flex"},Ra=v("h1",{class:"is-bold"},"Sanctions imposed:",-1),Oa={class:"is-bold ml-2"},Ea={key:12,class:"column is-6 is-flex"},Ua={key:13,class:"column is-12"},La=v("h1",{class:"is-bold"},"Names:",-1),za={class:"is-flex",style:{"flex-wrap":"wrap"}},Ma={class:"is-bold",style:{"white-space":"nowrap"}},qa={key:14,class:"column is-12 is-flex"},Pa={key:15,class:"column is-12"},$a=v("h1",{class:"is-bold"},"Addresses:",-1),Fa={key:16,class:"column is-12 is-flex"},Ba={key:17,class:"column is-12"},Wa=v("h1",{class:"is-bold"},"Other information:",-1),Ya={class:"is-bold"},Ha={key:18,class:"column is-12 is-flex"},Ka=i({__name:"SanctionList",props:{openSanctionModal:{type:Boolean},firstName:{},lastName:{}},emits:["update:openSanctionModal"],setup(e,{emit:l}){const a=e,t=oe(),i=r(!0),n=r(!1),o=r({id:0,last_updated:"",date_designated:"",unique_id:"",ofsi_group_id:0,un_reference_number:"",regime_name:"",individual_entity_ship:"",designation_source:"",sanctions_imposed:"",other_information:"",names:[],addresses:[]}),g=()=>{l("update:openSanctionModal",!1)};return c((async()=>{await(async()=>{try{n.value=!0;const e=await t.get(`/v3/api/worker/sanction/detail-through-name/${a.firstName} ${a.lastName}/`);o.value=e.data.sanction,i.value=!0,n.value=!1}catch(e){console.log(e)}})()})),(e,l)=>{const a=O,t=_e,r=I,c=s;return d(),h(c,{is:"form",open:f(i),title:"Sanctions Detail",size:"big",actions:"right",onClose:g},{content:p((()=>[aa,v("div",ta,[f(n)?y("",!0):(d(),u("div",sa,[ia,v("p",na,A(f(o).unique_id),1)])),f(n)?(d(),u("div",oa,[m(a,{height:"20px",width:"40%",class:"mx-2"}),m(a,{height:"20px",width:"40%",class:"mx-2 ml-2"})])):y("",!0),f(n)?y("",!0):(d(),u("div",ra,[ca,v("p",da,A(f(o).date_designated?f(o).date_designated.slice(0,10):"Not mentioned"),1)])),f(n)?(d(),u("div",ua,[m(a,{height:"20px",width:"40%",class:"mx-2"}),m(a,{height:"20px",width:"40%",class:"mx-2 ml-2"})])):y("",!0),f(n)?y("",!0):(d(),u("div",ma,[pa,v("p",va,A(f(o).last_updated),1)])),f(n)?(d(),u("div",fa,[m(a,{height:"20px",width:"40%",class:"mx-2"}),m(a,{height:"20px",width:"40%",class:"mx-2 ml-2"})])):y("",!0),f(n)?y("",!0):(d(),u("div",ya,[ha,v("p",ga,A(f(o).un_reference_number),1)])),f(n)?(d(),u("div",ba,[m(a,{height:"20px",width:"40%",class:"mx-2"}),m(a,{height:"20px",width:"40%",class:"mx-2 ml-2"})])):y("",!0),v("div",_a,[wa,v("p",xa,A(f(o).regime_name),1)]),f(n)?(d(),u("div",ka,[m(a,{height:"20px",width:"20%",class:"mx-2"}),m(a,{height:"20px",width:"70%",class:"mx-2 ml-2"})])):y("",!0),f(n)?y("",!0):(d(),u("div",Ca,[Sa,v("p",Aa,A(f(o).individual_entity_ship),1)])),f(n)?(d(),u("div",Na,[m(a,{height:"20px",width:"40%",class:"mx-2"}),m(a,{height:"20px",width:"40%",class:"mx-2 ml-2"})])):y("",!0),v("div",Ia,[Va,v("p",Ta,A(f(o).designation_source),1)]),f(n)?(d(),u("div",Da,[m(a,{height:"20px",width:"40%",class:"mx-2"}),m(a,{height:"20px",width:"40%",class:"mx-2 ml-2"})])):y("",!0),v("div",ja,[Ra,v("p",Oa,A(f(o).sanctions_imposed),1)]),f(n)?(d(),u("div",Ea,[m(a,{height:"20px",width:"20%",class:"mx-2"}),m(a,{height:"20px",width:"70%",class:"mx-2 ml-2"})])):y("",!0),f(n)?y("",!0):(d(),u("div",Ua,[La,v("div",za,[(d(!0),u(C,null,S(f(o).names,(e=>(d(),u("div",{key:e},[v("p",Ma,A(e)+" ,",1)])))),128))])])),f(n)?(d(),u("div",qa,[m(t,{lines:2,width:"90%","last-line-width":"25%"})])):y("",!0),f(n)?y("",!0):(d(),u("div",Pa,[$a,(d(!0),u(C,null,S(f(o).addresses,(e=>(d(),u("p",{key:e,class:"is-bold"},A(e)+",",1)))),128))])),f(n)?(d(),u("div",Fa,[m(t,{lines:2,width:"90%","last-line-width":"50%"})])):y("",!0),f(n)?y("",!0):(d(),u("div",Ba,[Wa,v("p",Ya,A(f(o).other_information),1)])),f(n)?(d(),u("div",Ha,[m(t,{lines:4,width:"75%","last-line-width":"25%"})])):y("",!0)])])),cancel:p((()=>[m(r,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:p((()=>[k("Close")])),_:1})])),_:1},8,["open"])}}}),Ga=v("button",{style:{display:"none"}},"close",-1),Xa=i({__name:"TimeSheetDetail",props:{timeSheetDetailModal:{type:Boolean},timesheetId:{}},emits:["update:modalHandler"],setup(e,{emit:l}){const t=e,i=()=>{l("update:modalHandler",!1)};return c((()=>{})),(e,l)=>{const n=a,o=s;return d(),h(o,{open:t.timeSheetDetailModal,title:"Worker Activity",size:"xl",actions:"right",onClose:i},{content:p((()=>[m(n,{timesheetId:t.timesheetId},null,8,["timesheetId"])])),action:p((()=>[])),cancel:p((()=>[Ga])),_:1},8,["open"])}}}),Ja=e=>(V("data-v-78b0dd3e"),e=e(),T(),e),Za={class:"timeline-wrapper"},Qa=Ja((()=>v("div",{class:"timeline-header"},null,-1))),et={class:"timeline-wrapper-inner"},lt={class:"timeline-container"},at={class:"timeline-item is-unread"},tt={class:"date"},st=Ja((()=>v("div",{class:"dot is-success"},null,-1))),it={class:"content-wrap"},nt=["onClick"],ot=Ja((()=>v("div",{class:"no-status"},null,-1))),rt={class:"container"},ct={class:"half"},dt={class:"",style:{display:"flex","align-items":"center"}},ut={class:"box-text"},mt={class:"meta-text"},pt={class:""},vt=Ja((()=>v("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1))),ft={class:"half"},yt={class:"",style:{display:"flex","align-items":"center"}},ht={class:"box-text"},gt={class:"meta-text"},bt={style:{display:"flex"}},_t=Ja((()=>v("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1))),wt={class:"box-end"},xt=Ja((()=>v("div",{class:"icon"},[v("i",{"aria-hidden":"true",class:"lnil lnil-bubble"})],-1))),kt=Ja((()=>v("div",{class:"meta"},[v("span",null,"Activity"),v("span",null,"View activity of Timesheet")],-1))),Ct=[xt,kt],St=Ja((()=>v("img",{class:"light-image is-larger",src:Ae,alt:""},null,-1))),At=Ja((()=>v("img",{class:"dark-image is-larger",src:Ne,alt:""},null,-1))),Nt=i({__name:"WorkerTimeSheet",props:{id:{type:String,default:0}},setup(e){oe();const l=r(!1),a=r(!1),t=r(0),s=r([]);return c((()=>{})),(e,i)=>{const n=Se,o=ie,r=Ce,c=ke,g=Xa;return d(),u("div",Za,[Qa,v("div",et,[v("div",lt,[f(l)?(d(),h(n,{key:0})):y("",!0),(d(!0),u(C,null,S(f(s),(e=>(d(),u("div",at,[v("div",tt,[v("span",null,A(f(pe)(e.created_at)),1)]),st,v("div",it,[v("div",{class:"content-box",onClick:()=>{a.value=!0,t.value=e.timeSheetID}},[ot,v("div",rt,[v("div",ct,[v("div",dt,[m(o,{picture:e.bookOnImageURL,squared:"",size:"medium"},null,8,["picture"]),v("div",ut,[v("div",mt,[v("p",null,[v("span",null,A(f(ve)(e.bookOnTime)),1)]),v("span",pt,[vt,k(" "+A(e.bookOnLocation&&e.bookOnLocation.length>90?e.bookOnLocation.slice(0,90)+"...":e.bookOnLocation),1)])])])])]),v("div",ft,[v("div",yt,[m(o,{picture:e.bookOffImageURL,squared:"",size:"medium"},null,8,["picture"]),v("div",ht,[v("div",gt,[v("p",null,[v("span",null,A(f(ve)(e.bookOffTime)),1)]),v("span",bt,[_t,k(" "+A(e.bookOffLocation&&e.bookOffLocation.length>90?e.bookOffLocation.slice(0,90)+"...":e.bookOffLocation),1)])])])])])]),v("div",wt,[m(r,{icon:"feather:more-vertical",spaced:"",right:""},{content:p((()=>[v("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:i[0]||(i[0]=e=>a.value=!0)},Ct)])),_:1})])],8,nt)])])))),256)),0==f(s).length?(d(),h(c,{key:1,title:"No Activity found.",subtitle:"Looks like you don't have done any activity on this worker yet as you will do anything, that will be showing up in here."},{image:p((()=>[St,At])),_:1})):y("",!0)])]),f(a)?(d(),h(g,{key:0,timeSheetDetailModal:f(a),timesheetId:f(t),"onUpdate:modalHandler":i[1]||(i[1]=()=>{a.value=!1})},null,8,["timeSheetDetailModal","timesheetId"])):y("",!0)])}}}),It=D(Nt,[["__scopeId","data-v-78b0dd3e"]]),Vt=e=>(V("data-v-43920bbc"),e=e(),T(),e),Tt={class:"timeline-wrapper"},Dt=Vt((()=>v("div",{class:"timeline-header"},null,-1))),jt={class:"timeline-wrapper-inner"},Rt={class:"timeline-container"},Ot={class:"timeline-item is-unread"},Et={class:"date"},Ut={class:"content-wrap"},Lt={class:"content-box"},zt={key:0,class:"status"},Mt={key:1,class:"no-status"},qt={class:"box-text"},Pt={class:"meta-text"},$t=["innerHTML"],Ft=Vt((()=>v("div",{class:"box-end"},null,-1))),Bt=Vt((()=>v("img",{class:"light-image is-larger",src:Ae,alt:""},null,-1))),Wt=Vt((()=>v("img",{class:"dark-image is-larger",src:Ne,alt:""},null,-1))),Yt=D(i({__name:"WorkerActivityLogs",props:{id:{type:String,default:0},worker:{type:Object,default:{}}},setup(e){const l=e,a=oe(),t=r(!1),s=r([]),i={get:"is-success",post:"is-info",patch:"is-warning",delete:"is-danger"};return c((()=>{(async()=>{t.value=!0;try{const e=await a.get(`/v3/api/account/actions/${l.id}/worker-activity-logs/`,{});s.value=e.data,t.value=!1}catch(e){console.log(e)}})()})),(e,l)=>{const a=Se,n=ie,o=ke;return d(),u("div",Tt,[Dt,v("div",jt,[v("div",Rt,[f(t)?(d(),h(a,{key:0})):y("",!0),(d(!0),u(C,null,S(f(s),(e=>{return d(),u("div",Ot,[v("div",Et,[v("span",null,A((l=e.action_datetime.slice(0,10),new Date(l).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}))),1)]),v("div",{class:E(["dot",i[e.method]])},null,2),v("div",Ut,[v("div",Lt,[e.performedById===e.objectId?(d(),u("div",zt)):(d(),u("div",Mt)),m(n,{picture:e.performer_detail.profileImage},null,8,["picture"]),v("div",qt,[v("div",Pt,[v("p",null,[v("span",{style:N({color:""+(e.performedById===e.objectId?"var(--red)":"")})},A(e.performer_detail.first_name)+" "+A(e.performer_detail.last_name)+". ",5),v("span",{class:"action-message",innerHTML:e.message},null,8,$t)]),v("span",null,A(e.action_datetime.slice(11,16)),1)])]),Ft])])]);var l})),256)),f(s).length<1?(d(),h(o,{key:1,title:"No Activity found.",subtitle:"Looks like you don't have done any activity on this worker yet as you will do anything, that will be showing up in here."},{image:p((()=>[Bt,Wt])),_:1})):y("",!0)])])])}}}),[["__scopeId","data-v-43920bbc"]]),Ht=e=>(V("data-v-50e7445e"),e=e(),T(),e),Kt={class:"tab-content is-active"},Gt=Ht((()=>v("div",{class:"section-title mt-0",style:{display:"flex","justify-content":"space-between"}},null,-1))),Xt={class:"columns is-multiline"},Jt={class:"column is-7 is-flex space-between"},Zt=Ht((()=>v("h6",{style:{"white-space":"nowrap"},class:"cus-main-heading mr-3 ml-1 mt-5"}," Approval Requests ",-1))),Qt={class:"cu-align-center"},es={key:0,style:{"font-weight":"600",color:"var(--primary)","margin-left":"8px"}},ls={class:"column is-5 mt-4"},as={class:"list-flex-toolbar is-reversed"},ts={class:"buttons"},ss={class:"column is-12"},is={class:"light-text item-meta",style:{"font-weight":"500"}},ns={class:"item-name dark-inverted"},os={class:"item-meta"},rs={class:"light-text item-meta"},cs={class:"light-text item-meta"},ds=["onClick"],us=Ht((()=>v("h6",{style:{"font-weight":"500","font-size":"20px","text-align":"left","margin-bottom":"6px","padding-left":"2px"}}," Timeline ",-1))),ms={class:"p-2",style:{}},ps={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"white"}},vs={class:"item-name dark-inverted",style:{"font-weight":"500"}},fs=Ht((()=>v("hr",null,null,-1))),ys={class:"columns is-multiline"},hs={class:"column is-8"},gs=Ht((()=>v("div",{class:"is-flex space-between mb-4"},[v("h6",{class:"cus-main-heading ml-1 mb-2"},"Employment References")],-1))),bs=["id"],_s={class:"is-flex"},ws={class:"dark-text light-weight mb-1"},xs={class:"is-flex cu-align-center"},ks={style:{"font-weight":"500","font-size":"17px",color:"#000"}},Cs={style:{"margin-left":"6px","white-space":"nowrap","font-weight":"500","font-size":"12px",color:"#666"}},Ss={style:{display:"flex",width:"100%",gap:"16px","justify-content":"flex-end",cursor:"pointer"}},As={class:"row mt-4"},Ns={class:"columns is multiline"},Is={class:"column is-2"},Vs={class:"light-dark weighted"},Ts={class:"column is-2"},Ds={class:"light-dark weighted"},js={class:"column is-2"},Rs={class:"light-dark weighted"},Os={class:"column is-2"},Es=Ht((()=>v("hr",null,null,-1))),Us={class:"columns is multiline"},Ls={class:"column is-2"},zs={class:"light-dark weighted"},Ms={class:"column is-2"},qs={class:"light-dark weighted"},Ps={class:"column is-2"},$s={class:"light-dark weighted"},Fs={class:"column is-2"},Bs={class:"light-dark weighted"},Ws=["onClick"],Ys={class:"column is-2"},Hs={class:"columns is multiline"},Ks={class:"column is-12"},Gs={key:0,class:"light-dark light-weight",style:{}},Xs={class:"column is-4 mt-6"},Js={class:"profile-card is-relative mt-0"},Zs={class:"profile-card-section no-padding"},Qs=Ht((()=>v("div",{class:"section-title"},[v("h5",{style:{"font-weight":"500",color:"#444"}}," Reference Requests To Employee ")],-1))),ei={class:"section-content no-padding"},li=Ht((()=>v("i",{class:"fas fa-circle",style:{color:"var(--info)","font-size":"10px"},"aria-hidden":"true"},null,-1))),ai={class:"ml-6",style:{"font-weight":"500"}},ti={class:"ml-6",style:{"font-weight":"500"}},si={style:{width:"80px"}},ii=["onClick"],ni=Ht((()=>v("img",{class:"light-image",src:Ue,alt:""},null,-1))),oi=Ht((()=>v("img",{class:"dark-image",src:Le,alt:""},null,-1))),ri={class:"tab-content is-active"},ci={class:"is-flex is-align-items-center is-justify-content-space-between"},di={class:"is-flex is-align-items-center"},ui=Ht((()=>v("p",{class:"title is-6 is-narrow toc-ignore ml-3"}," Employement Reference Details ",-1))),mi={class:"is-flex is-justify-content-space-between"},pi=Ht((()=>v("hr",null,null,-1))),vi={class:"columns is-raised s-card"},fi=Ht((()=>v("div",{class:"column is-2"},[v("div",{class:"content"},[v("ol",{class:"",style:{"list-style-type":"none","font-weight":"bold"}},[v("li",null,"Referee Name:"),v("li",null,"Rferee Contact:"),v("li",null,"Job Title:"),v("li",null,"Employed From:"),v("li",null,"Is Date Confirmed?:")])])],-1))),yi={class:"column is-2"},hi={class:"content mb-4"},gi={style:{"list-style-type":"none"}},bi={key:0},_i={key:1},wi=Ht((()=>v("div",{class:"column is-2"},[v("div",{class:"content"},[v("ol",{style:{"list-style-type":"none","font-weight":"bold"}},[v("li",null,"Referee Email:"),v("li",null,"No of Requests:"),v("li",null,"Alternate Proof:"),v("li",null,"Employed To:"),v("li",null,"Verbal Confirmation")])])],-1))),xi={class:"column is-2"},ki={class:"content"},Ci={style:{"list-style-type":"none"}},Si={style:{width:"100%","word-wrap":"break-word"}},Ai={class:"is-flex is-align-items-center"},Ni={key:0},Ii=Ht((()=>v("i",{class:"iconify","data-icon":"feather:upload-cloud","aria-hidden":"true"},null,-1))),Vi=Ht((()=>v("div",{class:"column is-2"},[v("div",{class:"content"},[v("ol",{style:{"list-style-type":"none","font-weight":"bold"}},[v("li",null,"Company Name:"),v("li",null,"Last Request Date:"),v("li",null,"Reference Documnet:"),v("li",null,"Months/Years:"),v("li",null,"Employee Name:")])])],-1))),Ti={class:"column is-2"},Di={class:"content"},ji={style:{"list-style-type":"none"}},Ri={class:"is-flex is-align-items-center"},Oi={key:0},Ei=Ht((()=>v("i",{class:"iconify","data-icon":"feather:upload-cloud","aria-hidden":"true"},null,-1))),Ui={class:"modal-form"},Li={class:"columns"},zi={class:"column is-half"},Mi={class:"field"},qi=Ht((()=>v("label",{class:"label"},"Employement Type",-1))),Pi={class:"control"},$i={class:"multiselect-single-label"},Fi={class:"select-label-text"},Bi={class:"select-label-text"},Wi={class:"column is-half"},Yi={class:"field"},Hi=Ht((()=>v("label",{class:"label"},"Referee Name *",-1))),Ki={class:"control"},Gi={class:"columns"},Xi={class:"column is-half"},Ji={class:"field"},Zi=Ht((()=>v("label",{class:"label"},"Referee Phone ",-1))),Qi={class:"control"},en={class:"column is-half"},ln={class:"field"},an=Ht((()=>v("label",{class:"label"},"Referee Email *",-1))),tn={class:"control"},sn=Ht((()=>v("hr",null,null,-1))),nn={class:"columns"},on={class:"column is-half"},rn={class:"field"},cn=Ht((()=>v("label",{class:"label"},"Company *",-1))),dn={class:"control"},un={class:"column is-half"},mn={class:"field"},pn=Ht((()=>v("label",{class:"label"},"Job Title *",-1))),vn={class:"control"},fn={class:"columns"},yn={class:"column is-half"},hn={class:"field"},gn=Ht((()=>v("label",{class:"label"},"Employment Start Date *",-1))),bn={class:"control"},_n={class:"column is-half"},wn={class:"field"},xn=Ht((()=>v("label",{class:"label"},"Employment End Date *",-1))),kn={class:"control"},Cn={class:"modal-form"},Sn={class:"columns"},An={class:"column is-half"},Nn={class:"field"},In=Ht((()=>v("label",{class:"label"},"Employement Type",-1))),Vn={class:"control"},Tn={class:"multiselect-single-label"},Dn={class:"select-label-text"},jn={class:"select-label-text"},Rn={class:"column is-half"},On={class:"field"},En=Ht((()=>v("label",{class:"label"},"Job Title ",-1))),Un={class:"control"},Ln={class:"columns"},zn={class:"column is-half"},Mn={class:"field"},qn=Ht((()=>v("label",{class:"label"},"Employement Start Date *",-1))),Pn={class:"control"},$n={class:"column is-half"},Fn={class:"field"},Bn=Ht((()=>v("label",{class:"label"},"Employement End Date *",-1))),Wn={class:"control"},Yn=Ht((()=>v("hr",null,null,-1))),Hn=Ht((()=>v("span",{style:{"font-weight":"bold","line-height":"3"}},"Referee Information",-1))),Kn={class:"columns"},Gn={class:"column is-half"},Xn={class:"field"},Jn=Ht((()=>v("label",{class:"label"},"Referee Name ",-1))),Zn={class:"control"},Qn={class:"column is-half"},eo={class:"field"},lo=Ht((()=>v("label",{class:"label"},"Referee Email *",-1))),ao={class:"control"},to={class:"columns"},so={class:"column is-half"},io={class:"field"},no=Ht((()=>v("label",{class:"label"},"Company ",-1))),oo={class:"control"},ro={class:"column is-half"},co={class:"field"},uo=Ht((()=>v("label",{class:"label"},"Referee Phone ",-1))),mo={class:"control"},po={class:"d-flex justify-center"},vo={class:"modal-form"},fo=["src"],yo=["src"],ho={class:"content rounded px-5"},go={class:"field mb-6"},bo=Ht((()=>v("label",{class:"label"},"Link :",-1))),_o={class:"field"},wo=Ht((()=>v("label",{class:"label"},"Email",-1))),xo=i({__name:"WorkerRefrence",props:{id:{type:String,default:0},worker:{type:Object,default:{}}},setup(l){const a=l,t=n(),i=ce(),o=oe(),g=r(!1),V=r(!1),T=r(!1),D=r(""),j=r(!1),R=r("");r("");const O=r(""),E=r(!1),q=r(!1),P=r(0),$=r(""),F=r({}),B=r(!1),W=r([]),Y=r(null),H=r({}),K=r([]),G=r({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),X=r({title:"",subtitle:"test",isRequestSweetAlertOpen:!1,btntext:"text"}),J=r({title:"",subtitle:"test",isDeleteRequestInfoSweetAlertOpen:!1,btntext:"text"}),Z=r({title:"",subtitle:"test",isEmailSweetAlertOpen:!1,btntext:"text"}),Q=r({id:0,refereeEmail:"",refereeName:"",refereeContact:"",jobTitle:"",employedFrom:"",employedTo:"",duration:"",companyName:"",worker:"",noOfRequests:"",lastRequestDate:"",alternateProof:"",referenceDocument:"",isDatesConfirmed:"",verbalConfirmationDate:"",isCompleted:"",status:"",type:"",created_at:"",refereeStatus:"",comment:""}),ee=r({id:0,refereeEmail:"",refereeName:"",refereeContact:"",jobTitle:"",employedFrom:"",employedTo:"",companyName:"",duration:"",worker:"",noOfRequests:"",lastRequestDate:"",alternateProof:"",referenceDocument:"",isDatesConfirmed:"",verbalConfirmationDate:"",isCompleted:"",status:"",type:"",created_at:"",comment:"",refereeStatus:""}),ae=[],te={Id:"Ref Id",reference:{label:"Referee",grow:!0},type:"Type",Name:"Position",Requested:"Requested",Status:"Status",Completed:"Completed at",actions:{label:"Actions",align:"end"}},ie=r([{id:0,reference:{id:0,refereeName:"",refereeEmail:"",refereeContact:"",jobTitle:"",companyName:"",alternateProof:null,referenceDocument:null,type:"",refereeStatus:"",status:"",employedFrom:"",employedTo:"",created_at:"",updated_at:"",noOfRequests:0,lastRequestDate:null,isDatesConfirmed:!1,verbalConfirmationDate:null,isCompleted:!1,worker:0,comment:"",created_by:0},status:"",token:"",completedAt:null,created_at:""}]);r("Pending");const ne=r({Pending:"warning",Approved:"primary",Rejected:"danger"});r({Employment:"info",Acdamin:"primary",Activity:"danger"});const re=r({refereeEmail:"",refereeName:"",refereeContact:"",jobTitle:"",employedFrom:"",employedTo:"",companyName:"",type:"Employment",worker:""}),de=e=>{console.log(e),Q.value=e,q.value=!0},ue=e=>{$.value=e,Y.value&&Y.value.click()},me=async e=>{const l=e.target,a=l.files?.[0];await pe(ee.value.id,{[$.value]:a}),(async e=>{try{const l=await o.get(`/v3/api/worker/reference/${e}/`);ee.value=l.data,console.log("reference updated",ee.value)}catch{}})(ee.value.id)},pe=async(e,l)=>{console.log(l),await o.patch(`/v3/api/worker/reference/${e}/`,l),_e(),i.success("Reference updated")},ve=async e=>{try{B.value=!0;await o.post(`/v3/api/worker/reference/${H.value.id}/send-reference-mail/`,{email:e});fe({message:"sent <b>Employment Reference</b> by email",objectId:t.params.id,method:"patch"}),i.success("Email sent succesfully"),V.value=!1}catch(l){i.error("Error while sending email"),V.value=!1}finally{B.value=!1}},ye=e=>{re.value={...re.value,[e.target.name]:e.target.value}},he=e=>{console.log(F.value),F.value={...F.value,[e.target.name]:e.target.value}},be=async()=>{console.log(re.value),re.value={...re.value,worker:a.id};try{j.value=!0;await o.post("/v3/api/worker/reference/",re.value);i.success("New reference added"),fe({message:"added a new <b>Reference</b>",objectId:t.params.id,method:"patch"}),j.value=!1,g.value=!1,_e(),re.value={refereeEmail:"",refereeName:"",refereeContact:"",jobTitle:"",employedFrom:"",employedTo:"",companyName:"",type:"Employment",worker:""}}catch{j.value=!1,i.error("Error accured")}},_e=async()=>{const e=await o.get(`/v3/api/worker/reference/worker-references/${a.id}/`);ae.length=0,W.value=e.data,console.log("resources",W.value),ae.push(...e.data),R.value="fa",R.value="",$e()},we=e=>{P.value=e,G.value={title:"Are you sure?",subtitle:"You will not be able to recover this reference!",btntext:"Yes, Delete it",isSweetAlertOpen:!0}},xe=async()=>{try{j.value=!0,Z.value.isEmailSweetAlertOpen=!1;const e=await o.post("v3/api/worker/reference_requests/",{reference:P.value});i.success("Mail sent succesfuly"),console.log(e),Fe(),_e(),Be()}catch(e){console.log(e),j.value=!1}finally{j.value=!1}},Ce=async()=>{console.log(P.value),G.value.isSweetAlertOpen=!1,await o.delete(`v3/api/worker/reference/${P.value}`),i.success("Reference deleted successfully"),P.value=0,E.value=!1,_e()},Se=async()=>{console.log(P.value),X.value.isRequestSweetAlertOpen=!1,await o.delete(`/v3/api/worker/reference_requests/${P.value}/`),i.error("Request deleted successfully"),P.value=0,E.value=!1,Fe(),Be()},Ae=async()=>{console.log(P.value),J.value.isDeleteRequestInfoSweetAlertOpen=!1,await o.delete(`v3/api/worker/reference_tokens/${P.value}/`),i.error("Request record deleted successfully"),P.value=0,E.value=!1,Fe(),Be()},Ne=(e,l)=>{const a=l;if(e&&a){const l=new Date(e),t=new Date(a).getTime()-l.getTime(),s=Math.floor(t/2592e6),i=Math.floor(s/12);return`${i}Yr - ${s%12}Mo - ${Math.floor(i%365)}Dy`}return"N/A"},Ie=U((()=>{if(R.value){const e=new RegExp(R.value,"i");return ae.filter((l=>l.refereeName.match(e)||l.refereeEmail.match(e)))}return ae})),Ve=U((()=>W.value.filter((e=>"Approved"==e.status)).length)),Ue=new Date;Ue.setFullYear(Ue.getFullYear()-5);const Le=Ue.toISOString().slice(0,10);Ue.getFullYear();const qe=r({plugins:[ze],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimeline5Year",height:"auto",resourceAreaWidth:"10%",selectable:!0,now:Le,headerToolbar:{left:"",center:"",right:""},droppable:!0,editable:!0,views:{resourceTimeline5Year:{type:"resourceTimeline",duration:{years:6},slotDuration:{months:2},slotWidth:10}},resourceAreaHeaderContent:"Companies",eventClick:e=>{console.log("event",e.event.id),console.log("clicked");const l=document.getElementById(`ref-${e.event.id}`);l&&l.scrollIntoView({behavior:"smooth",block:"start"})}}),Pe={Pending:"#FAAD42",Approved:"#05D69E",Rejected:"#E62864"},$e=()=>{console.log("references",ae);const e=ae.map(((e,l)=>({id:e.id,resourceId:e.id,start:e.employedFrom,end:e.employedTo,title:e.companyName,jobTitle:e.jobTitle,status:e.status,color:Pe[e.status]}))),l=ae.map(((e,l)=>({id:e.id,title:e.companyName,jobTitle:e.jobTitle,status:e.status,color:Pe[e.status]})));qe.value.resources=l,console.log("options",qe.value),qe.value.events=e},Fe=async()=>{try{const e=await o.get(`/v3/api/worker/reference_requests/${a.id}/worker/`);ie.value=e.data,console.log("requests",ie.value)}catch(e){console.log(e)}},Be=async()=>{try{const e=await o.get(`/v3/api/worker/reference/worker-reference-requests/${a.id}/`);K.value=e.data}catch(e){console.log(e)}};return c((async()=>{Fe(),await _e(),Be(),console.log("no",Ve)})),(l,n)=>{const r=Ee,c=I,U=le,$=je,B=Oe,W=Re,ae=De,oe=L("P"),ce=ke,pe=Te,Ue=L("Multiselect"),Le=se,ze=s,Pe=ge,$e=e;return d(),u(C,null,[v("div",null,[v("input",{ref_key:"fileInput",ref:Y,type:"file",style:{display:"none"},onChange:me,accept:"image/*,application/pdf"},null,544),w(v("div",Kt,[Gt,v("div",Xt,[v("div",Jt,[Zt,v("div",Qt,[m(r,{class:"mb-1",style:{height:"18px",width:"300px"},value:f(Ve)?f(Ve)/f(Ie).length*100:0},null,8,["value"]),f(Ve)?(d(),u("p",es,A((f(Ve)/f(Ie).length*100).toFixed(2))+"% ",1)):y("",!0)])]),v("div",ls,[v("div",as,[v("div",ts,[m(c,{color:"info",onClick:n[0]||(n[0]=e=>(async()=>{try{V.value=!0;const e=window.location.origin,l=await o.post("/v3/api/worker/reference/create-reference-link/",{worker:a.id});H.value=l.data,O.value=`${e}/add-reference/${l.data.token}`,Be()}catch(e){console.error(e)}})()),icon:"fas fa-link",elevated:""},{default:p((()=>[k(" Reference link ")])),_:1}),m(c,{color:"primary",onClick:n[1]||(n[1]=()=>{g.value=!f(g)}),icon:"fas fa-plus",elevated:""},{default:p((()=>[k(" Reference ")])),_:1}),m(U,{icon:"feather:search"},{default:p((()=>[w(v("input",{"onUpdate:modelValue":n[2]||(n[2]=e=>_(R)?R.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[x,f(R)]])])),_:1})])])]),v("div",ss,[f(Ie).length?(d(),h(W,{key:0,class:"mb-4",data:f(ie),columns:te,rounded:""},{body:p((()=>[m(M,{name:"list",tag:"div",class:"flex-list-inner"},{default:p((()=>[(d(!0),u(C,null,S(f(ie),((e,l)=>(d(),u("div",{key:l,class:"flex-table-item",style:{cursor:"pointer"}},[m($,{column:{grow:!1}},{default:p((()=>[v("div",null,[v("span",is,"REF-9876"+A(e.reference.id),1)])])),_:2},1024),m($,{column:{media:!0,grow:!0}},{default:p((()=>[v("div",null,[v("span",ns,A(e.reference.refereeName),1),v("span",os,[v("span",null,A(e.reference.refereeEmail),1)])])])),_:2},1024),m($,null,{default:p((()=>[v("div",null,[v("span",rs,A(e.reference.type),1)])])),_:2},1024),m($,null,{default:p((()=>[v("span",cs,A(e.reference.jobTitle),1)])),_:2},1024),m($,null,{default:p((()=>[m(B,{color:"light"},{default:p((()=>[k(A(e.created_at.slice(0,10)),1)])),_:2},1024)])),_:2},1024),m($,null,{default:p((()=>[m(B,{color:f(ne)[e.status]},{default:p((()=>[k(A(e.status),1)])),_:2},1032,["color"])])),_:2},1024),m($,{column:{align:"start"}},{default:p((()=>[m(B,{color:"light"},{default:p((()=>[k(A(e.completedAt?e.completedAt.slice(0,10):"-- -- ----"),1)])),_:2},1024)])),_:2},1024),m($,{column:{align:"end"}},{default:p((()=>[v("i",{onClick:l=>{return a=e.id,P.value=a,X.value={title:"Are you sure?",subtitle:"You want to delete this Request permanentaly ?",btntext:"Yes, Delete it",isRequestSweetAlertOpen:!0},void Be();var a},class:"fas fa-trash-alt cu-pointer cus-del-icon","aria-hidden":"true"},null,8,ds)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):(d(),h(B,{key:1,color:"warning",class:"mb-2 ml-5"},{default:p((()=>[k("No Request sent to the Referee yet")])),_:1}))])]),us,m(f(Me),{options:f(qe)},{eventContent:p((e=>[v("div",ms,[v("p",ps,[m(B,{light:"",color:"info",class:"mr-5"},{default:p((()=>[v("span",vs,"REF-9876"+A(e.event.id),1)])),_:2},1024),k(" "+A(e.event.extendedProps.jobTitle)+" -- "+A(e.event.extendedProps.status),1)])])])),_:1},8,["options"]),fs,v("div",ys,[v("div",hs,[gs,(d(!0),u(C,null,S(f(Ie),((e,l)=>(d(),u("div",{key:l,style:{"background-color":"#fff","border-radius":"16px"},class:"p-6 mb-4",id:`ref-${e.id}`},[v("div",_s,[v("div",null,[v("p",ws,"REF-9876"+A(e.id),1),v("div",xs,[v("h1",ks,A(e.companyName),1),v("h3",Cs," (Mail sent: "+A(e.mails_sent)+" time) ",1)])]),v("div",Ss,[m(ae,{icon:"feather:edit-2",onClick:l=>de(e),color:"info"},null,8,["onClick"]),m(ae,{onClick:l=>we(e.id),icon:"feather:trash",color:"danger"},null,8,["onClick"])])]),v("div",As,[v("div",Ns,[v("div",Is,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Type")])),_:1}),v("p",Vs,A(e.type),1)]),v("div",Ts,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Company")])),_:1}),v("p",Ds,A(e.companyName?e.companyName:"Not Mentioned"),1)]),v("div",js,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Requested At")])),_:1}),v("p",Rs,A(e.created_at?e.created_at.slice(0,10):"-- -- ----"),1)]),v("div",Os,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Status")])),_:1}),v("p",{style:N({color:`var(--${f(ne)[e.status]})`}),class:"light-dark weighted"},A(e.status),5)])]),Es,v("div",Us,[v("div",Ls,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Start Date")])),_:1}),v("p",zs,A(e.employedFrom),1)]),v("div",Ms,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("End Date")])),_:1}),v("p",qs,A(e.employedTo),1)]),v("div",Ps,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Position")])),_:1}),v("p",$s,A(e.jobTitle),1)]),v("div",Fs,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Verification")])),_:1}),v("p",Bs,[v("a",{style:{color:"var(--primary)","text-decoration":"underline"},onClick:l=>{return a=e.id,P.value=a,Z.value={title:"Sending mail?",subtitle:"An automated generated email will be sent to the referee",btntext:"Yes, Send",isEmailSweetAlertOpen:!0},void Be();var a},class:"cu-pointer"}," Send email ",8,Ws)])]),v("div",Ys,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Contact status")])),_:1}),v("p",{style:N({color:"Contacted"==e.refereeStatus?"var(--primary)":"var(--info)"}),class:"light-dark weighted"},A(e.refereeStatus),5)])]),v("div",Hs,[v("div",Ks,[m(oe,{style:{"font-size":"15px","font-weight":"400",color:"#898989"}},{default:p((()=>[k("Comment:")])),_:1}),e.comment?(d(),u("p",Gs,A(e.comment),1)):y("",!0),e.comment?y("",!0):(d(),h(B,{key:1},{default:p((()=>[k("No comments added yet")])),_:1}))])])])],8,bs)))),128))]),v("div",Xs,[v("div",Js,[v("div",Zs,[Qs,v("div",ei,[(d(!0),u(C,null,S(f(K),(e=>(d(),u("div",{key:e.id,style:{display:"flex","align-items":"center"},class:"mb-2"},[li,v("p",ai,A(e.created_at.slice(0,10)),1),v("p",ti,A(e.created_at.slice(11,16)),1),v("div",si,[m(B,{class:"ml-6",color:"Pending"==e.status?"light":"purple"},{default:p((()=>[k(A(e.status),1)])),_:2},1032,["color"])]),v("i",{class:"fas fa-trash-alt ml-6 cu-pointer cus-del-icon",onClick:l=>{return a=e.id,P.value=a,J.value={title:"Are you sure?",subtitle:"You want to delete this referee request record permanentaly ?",btntext:"Yes, Delete",isDeleteRequestInfoSweetAlertOpen:!0},void Be();var a},style:{},"aria-hidden":"true"},null,8,ii)])))),128)),0==f(K).length?(d(),h(B,{key:0,color:"warning",class:"mb-5 ml-5"},{default:p((()=>[k(" No Request sent to the Referee yet")])),_:1})):y("",!0)])])])])]),0==f(Ie).length?(d(),h(ce,{key:0,title:"No Reference is added for this employee.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n\t\t\t\t\t\tsearch terms you've entered. Please try different search terms or\n\t\t\t\t\t\tcriteria.",larger:""},{image:p((()=>[ni,oi])),_:1})):y("",!0)],512),[[z,!f(E)]]),w(v("section",ri,[v("div",ci,[v("div",di,[v("i",{class:"fas fa-arrow-left","aria-hidden":"true",onClick:n[3]||(n[3]=e=>E.value=!1),style:{cursor:"pointer"}}),ui]),v("div",mi,[m(c,{class:"ml-3 mr-3",color:"info",icon:"fas fa-edit",onClick:n[4]||(n[4]=e=>de(l.item))},{default:p((()=>[k(" Edit ")])),_:1}),m(c,{color:"danger",icon:"fas fa-trash-alt",onClick:n[5]||(n[5]=e=>we(f(ee).id))},{default:p((()=>[k(" Delete ")])),_:1})])]),pi,v("div",vi,[fi,v("div",yi,[v("div",hi,[v("ol",gi,[v("li",null,A(f(ee).refereeName?f(ee).refereeName:"--"),1),v("li",null,A(f(ee).refereeContact?f(ee).refereeContact:"--"),1),v("li",null,A(f(ee).jobTitle?f(ee).jobTitle:"--"),1),v("li",null,A(f(ee).employedFrom?f(ee).employedFrom:"--"),1),f(ee).isDatesConfirmed?(d(),u("li",bi,[m(B,{color:"primary",icon:"fas fa-question-circle",label:"Confirmed",rounded:"",elevated:""})])):(d(),u("li",_i,[m(B,{color:"danger",icon:"fas fa-question-circle",label:"not Confirmed",rounded:"",elevated:""})]))])])]),wi,v("div",xi,[v("div",ki,[v("ol",Ci,[v("li",Si,A(f(ee).refereeEmail?f(ee).refereeEmail:"--"),1),v("li",null,A(f(ee).noOfRequests?f(ee).noOfRequests:"--"),1),v("li",null,[v("div",Ai,[f(ee).alternateProof?(d(),u("div",Ni,[f(ee).alternateProof.includes(".pdf")?(d(),u("i",{key:0,onClick:n[6]||(n[6]=()=>{T.value=!0,D.value=f(ee).alternateProof}),class:"fas fa-file-pdf mr-5","aria-hidden":"true",style:{cursor:"pointer",color:"var(--primary)","font-size":"20px"}})):(d(),u("i",{key:1,class:"fas fa-file-pdf mr-5","aria-hidden":"true",onClick:n[7]||(n[7]=()=>{T.value=!0,D.value=f(ee).alternateProof}),style:{cursor:"pointer",color:"var(--pink)","font-size":"20px"}}))])):y("",!0),m(pe,{size:"small",color:"info",style:{cursor:"pointer"},rounded:"",onClick:n[8]||(n[8]=()=>ue("alternateProof"))},{default:p((()=>[Ii])),_:1})])]),v("li",null,A(f(ee).employedTo?f(ee).employedTo:"--"),1),v("li",null,A(f(ee).verbalConfirmationDate?f(ee).verbalConfirmationDate:"--"),1)])])]),Vi,v("div",Ti,[v("div",Di,[v("ol",ji,[v("li",null,A(f(ee).companyName?f(ee).companyName:"--"),1),v("li",null,A(f(ee).lastRequestDate?f(ee).lastRequestDate:"--"),1),v("li",null,[v("div",Ri,[f(ee).referenceDocument?(d(),u("div",Oi,[f(ee).referenceDocument.includes(".pdf")?(d(),u("i",{key:0,onClick:n[9]||(n[9]=()=>{T.value=!0,D.value=f(ee).referenceDocument}),class:"fas fa-file-pdf mr-5","aria-hidden":"true",style:{cursor:"pointer",color:"var(--primary)","font-size":"20px"}})):(d(),u("i",{key:1,class:"fas fa-file-image mr-5","aria-hidden":"true",onClick:n[10]||(n[10]=()=>{T.value=!0,D.value=f(ee).referenceDocument}),style:{cursor:"pointer",color:"var(--primary)","font-size":"20px"}}))])):y("",!0),m(pe,{size:"small",color:"info",style:{cursor:"pointer"},rounded:"",onClick:n[11]||(n[11]=()=>ue("referenceDocument"))},{default:p((()=>[Ei])),_:1})])]),v("li",null,A(Ne(f(ee).employedFrom,f(ee).employedTo)),1),v("li",null,A(a.worker.firstName),1)])])])])],512),[[z,f(E)]]),m(ze,{is:"form",open:f(q),title:"Update Employment Reference",size:"big",actions:"right",onSubmit:n[27]||(n[27]=b((e=>(async()=>{console.log("edit form submit");try{j.value=!0,await o.patch(`/v3/api/worker/reference/${Q.value.id}/`,F.value),q.value=!1,i.success("Reference Updated"),fe({message:"edited <b>Employment Reference</b>",objectId:t.params.id,method:"patch"}),j.value=!1,_e()}catch{j.value=!1}})()),["prevent"])),onClose:n[28]||(n[28]=e=>q.value=!1)},{content:p((()=>[v("div",Ui,[v("div",Li,[v("div",zi,[v("div",Mi,[qi,v("div",Pi,[m(Le,{class:"is-image-select"},{default:p((({id:e})=>[m(U,null,{default:p((()=>[m(Ue,{modelValue:f(Q).type,"onUpdate:modelValue":n[12]||(n[12]=e=>f(Q).type=e),attrs:{id:e},placeholder:"Select a type",autocomplete:"type",label:"name",options:[{value:"Employment",name:"Employement"},{value:"Acdamin",name:"Academia"},{value:"Activity",name:"Activity"}]},{singlelabel:p((({value:e})=>[v("div",$i,[v("span",Fi,A(e.name),1)])])),option:p((({option:e})=>[v("span",Bi,A(e.name),1)])),_:2},1032,["modelValue","attrs"])])),_:2},1024)])),_:1})])])]),v("div",Wi,[v("div",Yi,[Hi,v("div",Ki,[w(v("input",{type:"text",name:"refereeName",required:"",class:"input",onChange:n[13]||(n[13]=e=>he(e)),placeholder:"Referee Name","onUpdate:modelValue":n[14]||(n[14]=e=>f(Q).refereeName=e)},null,544),[[x,f(Q).refereeName]])])])])]),v("div",Gi,[v("div",Xi,[v("div",Ji,[Zi,v("div",Qi,[w(v("input",{type:"tel",name:"refereeContact",class:"input",onChange:n[15]||(n[15]=e=>he(e)),placeholder:"Referee Phone","onUpdate:modelValue":n[16]||(n[16]=e=>f(Q).refereeContact=e)},null,544),[[x,f(Q).refereeContact]])])])]),v("div",en,[v("div",ln,[an,v("div",tn,[w(v("input",{type:"email",name:"refereeEmail",required:"",class:"input",onChange:n[17]||(n[17]=e=>he(e)),placeholder:"Referee Email","onUpdate:modelValue":n[18]||(n[18]=e=>f(Q).refereeEmail=e)},null,544),[[x,f(Q).refereeEmail]])])])])]),sn,v("div",nn,[v("div",on,[v("div",rn,[cn,v("div",dn,[w(v("input",{type:"text",name:"companyName",class:"input",required:"",placeholder:"Company","onUpdate:modelValue":n[19]||(n[19]=e=>f(Q).companyName=e),onChange:n[20]||(n[20]=e=>he(e))},null,544),[[x,f(Q).companyName]])])])]),v("div",un,[v("div",mn,[pn,v("div",vn,[w(v("input",{type:"text",name:"jobTitle",required:"",class:"input",onChange:n[21]||(n[21]=e=>he(e)),placeholder:"Job Title ","onUpdate:modelValue":n[22]||(n[22]=e=>f(Q).jobTitle=e)},null,544),[[x,f(Q).jobTitle]])])])])]),v("div",fn,[v("div",yn,[v("div",hn,[gn,v("div",bn,[w(v("input",{type:"date",name:"employedFrom",required:"",class:"input",onChange:n[23]||(n[23]=e=>he(e)),placeholder:"Referee email","onUpdate:modelValue":n[24]||(n[24]=e=>f(Q).employedFrom=e)},null,544),[[x,f(Q).employedFrom]])])])]),v("div",_n,[v("div",wn,[xn,v("div",kn,[w(v("input",{type:"date",name:"employedTo",required:"",class:"input",onChange:n[25]||(n[25]=e=>he(e)),placeholder:"Referee email","onUpdate:modelValue":n[26]||(n[26]=e=>f(Q).employedTo=e)},null,544),[[x,f(Q).employedTo]])])])])])])])),action:p((()=>[m(c,{type:"submit",color:"primary",loading:f(j),raised:""},{default:p((()=>[k("Update")])),_:1},8,["loading"])])),_:1},8,["open"]),m(ze,{is:"form",open:f(g),title:"Add Employement Reference",size:"big",actions:"right",onSubmit:b(be,["prevent"]),onClose:n[44]||(n[44]=e=>g.value=!1)},{content:p((()=>[v("div",Cn,[v("div",Sn,[v("div",An,[v("div",Nn,[In,v("div",Vn,[m(Le,{class:"is-image-select"},{default:p((({id:e})=>[m(U,null,{default:p((()=>[m(Ue,{modelValue:f(re).type,"onUpdate:modelValue":n[29]||(n[29]=e=>f(re).type=e),attrs:{id:e},placeholder:"Select a type",autocomplete:"type",label:"name",options:[{value:"Employment",name:"Employement"},{value:"Acdamin",name:"Academia"},{value:"Activity",name:"Activity"}]},{singlelabel:p((({value:e})=>[v("div",Tn,[v("span",Dn,A(e.name),1)])])),option:p((({option:e})=>[v("span",jn,A(e.name),1)])),_:2},1032,["modelValue","attrs"])])),_:2},1024)])),_:1})])])]),v("div",Rn,[v("div",On,[En,v("div",Un,[w(v("input",{type:"text",name:"jobTitle",onChange:n[30]||(n[30]=e=>ye(e)),class:"input",placeholder:"Job title","onUpdate:modelValue":n[31]||(n[31]=e=>f(re).jobTitle=e)},null,544),[[x,f(re).jobTitle]])])])])]),v("div",Ln,[v("div",zn,[v("div",Mn,[qn,v("div",Pn,[w(v("input",{type:"date",name:"employedFrom",required:"",onChange:n[32]||(n[32]=e=>ye(e)),class:"input",placeholder:"Start date","onUpdate:modelValue":n[33]||(n[33]=e=>f(re).employedFrom=e)},null,544),[[x,f(re).employedFrom]])])])]),v("div",$n,[v("div",Fn,[Bn,v("div",Wn,[w(v("input",{type:"date",name:"employedTo",required:"",onChange:n[34]||(n[34]=e=>ye(e)),class:"input",placeholder:"End date","onUpdate:modelValue":n[35]||(n[35]=e=>f(re).employedTo=e)},null,544),[[x,f(re).employedTo]])])])])]),Yn,Hn,v("div",Kn,[v("div",Gn,[v("div",Xn,[Jn,v("div",Zn,[w(v("input",{type:"text",name:"refereeName",onChange:n[36]||(n[36]=e=>ye(e)),class:"input",placeholder:"Referee name","onUpdate:modelValue":n[37]||(n[37]=e=>f(re).refereeName=e)},null,544),[[x,f(re).refereeName]])])])]),v("div",Qn,[v("div",eo,[lo,v("div",ao,[w(v("input",{type:"email",name:"refereeEmail",required:"",onChange:n[38]||(n[38]=e=>ye(e)),class:"input",placeholder:"Referee email","onUpdate:modelValue":n[39]||(n[39]=e=>f(re).refereeEmail=e)},null,544),[[x,f(re).refereeEmail]])])])])]),v("div",to,[v("div",so,[v("div",io,[no,v("div",oo,[w(v("input",{type:"text",name:"companyName",onChange:n[40]||(n[40]=e=>ye(e)),class:"input",placeholder:"Company","onUpdate:modelValue":n[41]||(n[41]=e=>f(re).companyName=e)},null,544),[[x,f(re).companyName]])])])]),v("div",ro,[v("div",co,[uo,v("div",mo,[w(v("input",{type:"tel",name:"refereeContact",onChange:n[42]||(n[42]=e=>ye(e)),class:"input",placeholder:"Referee phone","onUpdate:modelValue":n[43]||(n[43]=e=>f(re).refereeContact=e)},null,544),[[x,f(re).refereeContact]])])])])])])])),action:p((()=>[v("div",po,[m(c,{type:"submit",icon:"fas fa-plus",loading:f(j),color:"primary",raised:""},{default:p((()=>[k(" Create Reference ")])),_:1},8,["loading"])])])),cancel:p((()=>[m(c,{style:{display:"none"}},{default:p((()=>[k("Close")])),_:1})])),_:1},8,["open","onSubmit"]),m(ze,{title:"PDF File",open:f(T),size:"big",actions:"right",onClose:n[46]||(n[46]=e=>T.value=!1)},{content:p((()=>[v("div",vo,[f(D).includes(".pdf")?(d(),u("iframe",{key:0,src:f(D),style:{width:"100%",height:"800px",border:"none"}},"\n            Oops! an error has occurred.\n          ",8,fo)):(d(),u("img",{key:1,src:f(D),alt:""},null,8,yo))])])),action:p((()=>[])),cancel:p((()=>[m(c,{rounded:"",onClick:n[45]||(n[45]=e=>T.value=!1)},{default:p((()=>[k(" Close ")])),_:1})])),_:1},8,["open"]),m(ze,{title:"Reference link",size:"small",open:f(V),actions:"right",onClose:n[53]||(n[53]=e=>V.value=!1)},{content:p((()=>[v("div",ho,[v("div",go,[bo,m(Le,{addons:""},{default:p((()=>[m(U,{expanded:""},{default:p((()=>[m(Pe,{modelValue:f(O),"onUpdate:modelValue":n[47]||(n[47]=e=>_(O)?O.value=e:null),type:"text",class:"input",placeholder:l.Loading?"Loading...":"Invitation Link"},null,8,["modelValue","placeholder"])])),_:1}),m(U,null,{default:p((()=>[m(c,{icon:"fas fa-copy",onClick:n[48]||(n[48]=e=>{return l=f(O),navigator.clipboard.writeText(l),i.success("Link copied"),void fe({message:"shared <b>Employment Reference</b> through link",objectId:t.params.id,method:"patch"});var l}),color:"info"},{default:p((()=>[k(" Copy ")])),_:1})])),_:1})])),_:1})]),v("div",_o,[wo,m(Le,{addons:""},{default:p((()=>[m(U,{expanded:""},{default:p((()=>[m(Pe,{modelValue:a.worker.emailAddress,"onUpdate:modelValue":n[49]||(n[49]=e=>a.worker.emailAddress=e),type:"email",name:"employedFrom",class:"input",placeholder:"Email address"},null,8,["modelValue"])])),_:1}),m(U,null,{default:p((()=>[m(c,{icon:"fas fa-envelope",onClick:n[50]||(n[50]=e=>ve(a.worker.emailAddress)),color:"primary"},{default:p((()=>[k(" Send ")])),_:1})])),_:1})])),_:1})])])])),action:p((()=>[m(c,{onClick:n[51]||(n[51]=e=>ve(a.worker.emailAddress)),color:"primary",style:{display:"none"},raised:"",icon:"fas fa-envelope"},{default:p((()=>[k("Send ")])),_:1})])),cancel:p((()=>[m(c,{onClick:n[52]||(n[52]=e=>V.value=!1),style:{display:"none"}},{default:p((()=>[k("Close")])),_:1})])),_:1},8,["open"])]),f(G).isSweetAlertOpen?(d(),h($e,{key:0,isSweetAlertOpen:f(G).isSweetAlertOpen,title:f(G).title,subtitle:f(G).subtitle,btntext:f(G).btntext,onConfirm:Ce,onCancel:()=>f(G).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):y("",!0),f(X).isRequestSweetAlertOpen?(d(),h($e,{key:1,isRequestSweetAlertOpen:f(X).isRequestSweetAlertOpen,title:f(X).title,subtitle:f(X).subtitle,btntext:f(X).btntext,onConfirm:Se,onCancel:()=>f(X).isRequestSweetAlertOpen=!1},null,8,["isRequestSweetAlertOpen","title","subtitle","btntext","onCancel"])):y("",!0),f(J).isDeleteRequestInfoSweetAlertOpen?(d(),h($e,{key:2,isDeleteRequestInfoSweetAlertOpen:f(J).isDeleteRequestInfoSweetAlertOpen,title:f(J).title,subtitle:f(J).subtitle,btntext:f(J).btntext,onConfirm:Ae,onCancel:()=>f(J).isDeleteRequestInfoSweetAlertOpen=!1},null,8,["isDeleteRequestInfoSweetAlertOpen","title","subtitle","btntext","onCancel"])):y("",!0),f(Z).isEmailSweetAlertOpen?(d(),h($e,{key:3,isEmailSweetAlertOpen:f(Z).isEmailSweetAlertOpen,title:f(Z).title,subtitle:f(Z).subtitle,btntext:f(Z).btntext,onConfirm:xe,onCancel:()=>f(Z).isEmailSweetAlertOpen=!1},null,8,["isEmailSweetAlertOpen","title","subtitle","btntext","onCancel"])):y("",!0)],64)}}}),ko=D(xo,[["__scopeId","data-v-50e7445e"]]),Co={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},So={itemsToShow:{default:Co.itemsToShow,type:Number},itemsToScroll:{default:Co.itemsToScroll,type:Number},wrapAround:{default:Co.wrapAround,type:Boolean},throttle:{default:Co.throttle,type:Number},snapAlign:{default:Co.snapAlign,validator:e=>["start","end","center","center-even","center-odd"].includes(e)},transition:{default:Co.transition,type:Number},breakpoints:{default:Co.breakpoints,type:Object},autoplay:{default:Co.autoplay,type:Number},pauseAutoplayOnHover:{default:Co.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:Co.mouseDrag,type:Boolean},touchDrag:{default:Co.touchDrag,type:Boolean},dir:{default:Co.dir,validator:e=>["rtl","ltr"].includes(e)},i18n:{default:Co.i18n,type:Object},settings:{default:()=>({}),type:Object}};function Ao({val:e,max:l,min:a}){return l<a?e:Math.min(Math.max(e,a),l)}function No(e){return e?e.reduce(((e,l)=>{var a;return l.type===C?[...e,...No(l.children)]:"CarouselSlide"===(null===(a=l.type)||void 0===a?void 0:a.name)?[...e,l]:e}),[]):[]}function Io({val:e,max:l,min:a=0}){return e>l?Io({val:e-(l+1),max:l,min:a}):e<a?Io({val:e+(l+1),max:l,min:a}):e}function Vo(e="",l={}){return Object.entries(l).reduce(((e,[l,a])=>e.replace(`{${l}}`,String(a))),e)}var To,Do=i({name:"ARIA",setup(){const e=H("config",q(Object.assign({},Co))),l=H("currentSlide",r(0)),a=H("slidesCount",r(0));return()=>Y("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},Vo(e.i18n.itemXofY,{currentSlide:l.value+1,slidesCount:a.value}))}}),jo=i({name:"Carousel",props:So,setup(e,{slots:l,emit:a,expose:t}){var s;const i=r(null),n=r([]),o=r(0),d=r(0),u=q(Object.assign({},Co));let m,p=Object.assign({},Co);const v=r(null!==(s=e.modelValue)&&void 0!==s?s:0),f=r(0),y=r(0),h=r(0),g=r(0);let b,_;function w(){m=Object.assign({},e.breakpoints),p=Object.assign(Object.assign(Object.assign({},p),e),{i18n:Object.assign(Object.assign({},p.i18n),e.i18n),breakpoints:void 0}),k(p)}function x(){if(!m||!Object.keys(m).length)return;const e=Object.keys(m).map((e=>Number(e))).sort(((e,l)=>+l-+e));let l=Object.assign({},p);e.some((e=>{const a=window.matchMedia(`(min-width: ${e}px)`).matches;return a&&(l=Object.assign(Object.assign({},l),m[e])),a})),k(l)}function k(e){Object.entries(e).forEach((([e,l])=>u[e]=l))}P("config",u),P("slidesCount",d),P("currentSlide",v),P("maxSlide",h),P("minSlide",g),P("slideWidth",o);const C=function(e,l){let a;return function(...t){a&&clearTimeout(a),a=setTimeout((()=>{e(...t),a=null}),l)}}((()=>{x(),A(),S()}),16);function S(){if(!i.value)return;const e=i.value.getBoundingClientRect();o.value=e.width/u.itemsToShow}function A(){d.value<=0||(y.value=Math.ceil((d.value-1)/2),h.value=function({config:e,slidesCount:l}){const{snapAlign:a,wrapAround:t,itemsToShow:s=1}=e;if(t)return Math.max(l-1,0);let i;switch(a){case"start":i=l-s;break;case"end":i=l-1;break;case"center":case"center-odd":i=l-Math.ceil((s-.5)/2);break;case"center-even":i=l-Math.ceil(s/2);break;default:i=0}return Math.max(i,0)}({config:u,slidesCount:d.value}),g.value=function({config:e,slidesCount:l}){const{wrapAround:a,snapAlign:t,itemsToShow:s=1}=e;let i=0;if(a||s>l)return i;switch(t){case"start":default:i=0;break;case"end":i=s-1;break;case"center":case"center-odd":i=Math.floor((s-1)/2);break;case"center-even":i=Math.floor((s-2)/2)}return i}({config:u,slidesCount:d.value}),u.wrapAround||(v.value=Ao({val:v.value,max:h.value,min:g.value})))}c((()=>{$((()=>S())),setTimeout((()=>S()),1e3),x(),M(),window.addEventListener("resize",C,{passive:!0}),a("init")})),F((()=>{_&&clearTimeout(_),b&&clearInterval(b),window.removeEventListener("resize",C,{passive:!0})}));let N=!1;const I={x:0,y:0},V={x:0,y:0},T=q({x:0,y:0}),D=r(!1),j=r(!1),R=()=>{D.value=!0},O=()=>{D.value=!1};function E(e){["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||(N="touchstart"===e.type,N||e.preventDefault(),!N&&0!==e.button||K.value||(I.x=N?e.touches[0].clientX:e.clientX,I.y=N?e.touches[0].clientY:e.clientY,document.addEventListener(N?"touchmove":"mousemove",L,!0),document.addEventListener(N?"touchend":"mouseup",z,!0)))}const L=function(e,l){let a;return l?function(...t){const s=this;a||(e.apply(s,t),a=!0,setTimeout((()=>a=!1),l))}:e}((e=>{j.value=!0,V.x=N?e.touches[0].clientX:e.clientX,V.y=N?e.touches[0].clientY:e.clientY;const l=V.x-I.x,a=V.y-I.y;T.y=a,T.x=l}),u.throttle);function z(){const e="rtl"===u.dir?-1:1,l=.4*Math.sign(T.x),a=Math.round(T.x/o.value+l)*e;if(a&&!N){const e=l=>{window.removeEventListener("click",e,!0)};window.addEventListener("click",e,!0)}G(v.value-a),T.x=0,T.y=0,j.value=!1,document.removeEventListener(N?"touchmove":"mousemove",L,!0),document.removeEventListener(N?"touchend":"mouseup",z,!0)}function M(){!u.autoplay||u.autoplay<=0||(b=setInterval((()=>{u.pauseAutoplayOnHover&&D.value||X()}),u.autoplay))}function H(){b&&(clearInterval(b),b=null),M()}const K=r(!1);function G(e){const l=u.wrapAround?e:Ao({val:e,max:h.value,min:g.value});v.value===l||K.value||(a("slide-start",{slidingToIndex:e,currentSlideIndex:v.value,prevSlideIndex:f.value,slidesCount:d.value}),K.value=!0,f.value=v.value,v.value=l,_=setTimeout((()=>{if(u.wrapAround){const t=Io({val:l,max:h.value,min:0});t!==v.value&&(v.value=t,a("loop",{currentSlideIndex:v.value,slidingToIndex:e}))}a("update:modelValue",v.value),a("slide-end",{currentSlideIndex:v.value,prevSlideIndex:f.value,slidesCount:d.value}),K.value=!1,H()}),u.transition))}function X(){G(v.value+u.itemsToScroll)}function J(){G(v.value-u.itemsToScroll)}const Z={slideTo:G,next:X,prev:J};P("nav",Z),P("isSliding",K);const Q=U((()=>function({config:e,currentSlide:l,slidesCount:a}){const{snapAlign:t,wrapAround:s,itemsToShow:i=1}=e;let n=l;switch(t){case"center":case"center-odd":n-=(i-1)/2;break;case"center-even":n-=(i-2)/2;break;case"end":n-=i-1}return s?n:Ao({val:n,max:a-i,min:0})}({config:u,currentSlide:v.value,slidesCount:d.value})));P("slidesToScroll",Q);const ee=U((()=>{const e="rtl"===u.dir?-1:1,l=Q.value*o.value*e;return{transform:`translateX(${T.x-l}px)`,transition:`${K.value?u.transition:0}ms`,margin:u.wrapAround?`0 -${d.value*o.value}px`:"",width:"100%"}}));function le(){w(),x(),A(),S(),H()}Object.keys(So).forEach((l=>{["modelValue"].includes(l)||B((()=>e[l]),le)})),B((()=>e.modelValue),(e=>{e!==v.value&&G(Number(e))})),B(d,A),a("before-init"),w();const ae={config:u,slidesCount:d,slideWidth:o,next:X,prev:J,slideTo:G,currentSlide:v,maxSlide:h,minSlide:g,middleSlide:y};t({updateBreakpointsConfigs:x,updateSlidesData:A,updateSlideWidth:S,initDefaultConfigs:w,restartCarousel:le,slideTo:G,next:X,prev:J,nav:Z,data:ae});const te=l.default||l.slides,se=l.addons,ie=q(ae);return()=>{const e=No(null==te?void 0:te(ie)),l=(null==se?void 0:se(ie))||[];e.forEach(((e,l)=>e.props.index=l));let a=e;if(u.wrapAround){const l=e.map(((l,a)=>W(l,{index:-e.length+a,isClone:!0,key:`clone-before-${a}`}))),t=e.map(((l,a)=>W(l,{index:e.length+a,isClone:!0,key:`clone-after-${a}`})));a=[...l,...e,...t]}n.value=e,d.value=Math.max(e.length,1);const t=Y("ol",{class:"carousel__track",style:ee.value,onMousedownCapture:u.mouseDrag?E:null,onTouchstartPassiveCapture:u.touchDrag?E:null},a),s=Y("div",{class:"carousel__viewport"},t);return Y("section",{ref:i,class:{carousel:!0,"is-sliding":K.value,"is-dragging":j.value,"is-hover":D.value,"carousel--rtl":"rtl"===u.dir},dir:u.dir,"aria-label":u.i18n.ariaGallery,tabindex:"0",onMouseenter:R,onMouseleave:O},[s,l,Y(Do)])}}});!function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"}(To||(To={}));const Ro={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};const Oo=e=>{const l=H("config",q(Object.assign({},Co))),a=String(e.name),t=`icon${a.charAt(0).toUpperCase()+a.slice(1)}`;if(!a||"string"!=typeof a||!(a in To))return;const s=Y("path",{d:Ro[a]}),i=l.i18n[t]||e.title||a,n=Y("title",i);return Y("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":i},[n,s])};Oo.props={name:String,title:String};const Eo=(e,{slots:l,attrs:a})=>{const{next:t,prev:s}=l||{},i=H("config",q(Object.assign({},Co))),n=H("maxSlide",r(1)),o=H("minSlide",r(1)),c=H("currentSlide",r(1)),d=H("nav",{}),{dir:u,wrapAround:m,i18n:p}=i,v="rtl"===u;return[Y("button",{type:"button",class:["carousel__prev",!m&&c.value<=o.value&&"carousel__prev--disabled",null==a?void 0:a.class],"aria-label":p.ariaPreviousSlide,onClick:d.prev},(null==s?void 0:s())||Y(Oo,{name:v?"arrowRight":"arrowLeft"})),Y("button",{type:"button",class:["carousel__next",!m&&c.value>=n.value&&"carousel__next--disabled",null==a?void 0:a.class],"aria-label":p.ariaNextSlide,onClick:d.next},(null==t?void 0:t())||Y(Oo,{name:v?"arrowLeft":"arrowRight"}))]},Uo=()=>{const e=H("config",q(Object.assign({},Co))),l=H("maxSlide",r(1)),a=H("minSlide",r(1)),t=H("currentSlide",r(1)),s=H("nav",{}),i=e=>Io({val:t.value,max:l.value,min:0})===e,n=[];for(let o=a.value;o<l.value+1;o++){const l=Y("button",{type:"button",class:{"carousel__pagination-button":!0,"carousel__pagination-button--active":i(o)},"aria-label":Vo(e.i18n.ariaNavigateToSlide,{slideNumber:o+1}),onClick:()=>s.slideTo(o)}),a=Y("li",{class:"carousel__pagination-item",key:o},l);n.push(a)}return Y("ol",{class:"carousel__pagination"},n)};var Lo=i({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:l}){const a=H("config",q(Object.assign({},Co))),t=H("currentSlide",r(0)),s=H("slidesToScroll",r(0)),i=H("isSliding",r(!1)),n=U((()=>e.index===t.value)),o=U((()=>e.index===t.value-1)),c=U((()=>e.index===t.value+1)),d=U((()=>{const l=Math.floor(s.value),t=Math.ceil(s.value+a.itemsToShow-1);return e.index>=l&&e.index<=t}));return()=>{var t;return Y("li",{style:{width:100/a.itemsToShow+"%"},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":d.value,"carousel__slide--active":n.value,"carousel__slide--prev":o.value,"carousel__slide--next":c.value,"carousel__slide--sliding":i.value},"aria-hidden":!d.value},null===(t=l.default)||void 0===t?void 0:t.call(l,{isActive:n.value,isClone:e.isClone,isPrev:o.value,isNext:c.value,isSliding:i.value,isVisible:d.value}))}}});const zo=e=>(V("data-v-1380b223"),e=e(),T(),e),Mo={class:"tab-content is-active"},qo={class:"columns mt-1"},Po={key:0,class:"column is-12"},$o=K('<div class="row" data-v-1380b223><div class="columns is-multiline mb-1" style="padding:0px 4px;" data-v-1380b223><div class="box-cell column is-2" data-v-1380b223><h1 style="color:var(--light-text);" data-v-1380b223>Last Updated</h1></div><div class="box-cell column is-2" data-v-1380b223><h1 style="color:var(--light-text);" data-v-1380b223>Status</h1></div><div class="box-cell column is-2" data-v-1380b223><h1 style="color:var(--light-text);" data-v-1380b223>Person Name</h1></div><div class="box-cell column is-2" data-v-1380b223><h1 style="color:var(--light-text);" data-v-1380b223>Country</h1></div><div class="box-cell column is-2" data-v-1380b223><h1 style="color:var(--light-text);" data-v-1380b223>Documents</h1></div><div class="box-cell column is-2" data-v-1380b223><h1 style="color:var(--light-text);" data-v-1380b223>Detail</h1></div></div></div>',1),Fo={class:"row"},Bo={class:"columns is-multiline cu-flex-center"},Wo={class:"box-cell column is-2"},Yo={class:"box-cell column is-2"},Ho={class:"box-cell column is-2"},Ko={class:"box-cell column is-2"},Go={class:"box-cell column is-2"},Xo={class:"box-cell column is-2"},Jo={key:0,clas:"detail-info "},Zo=zo((()=>v("div",{class:"row mb-1"},[v("h1",{style:{"font-size":"14px"},class:"light-text ml-4"},"Response")],-1))),Qo={class:"row mb-6"},er={class:"columns is-multiline"},lr=zo((()=>v("div",{class:"box-cell column is-1"},[v("div",{class:"is-flex"},[v("img",{style:{width:"60px","margin-left":"14px","margin-top":"8px"},src:"/images/Logo.svg"})])],-1))),ar={class:"box-cell column is-2"},tr={class:"is-flex mt-2"},sr={class:"mt-0",style:{color:"#52c528"}},ir={class:"is-flex weighted"},nr=zo((()=>v("div",{style:{"margin-left":"14px","border-radius":"6px","background-color":"var(--primary)",padding:"2px",width:"3%"}},null,-1))),or={class:"row p-4",style:{"margin-bottom":"20px"}},rr={class:"columns is-multiline"},cr={class:"column is-5"},dr={class:"columns is-multiline"},ur={class:"box-cell column is-4"},mr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Name:")],-1))),pr={class:"is-flex mb-2"},vr={style:{"font-size":"14px"}},fr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Date of birth:")],-1))),yr={class:"is-flex mb-2"},hr={style:{"font-size":"14px"}},gr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Nationality:")],-1))),br={class:"is-flex mb-2"},_r={style:{"font-size":"14px"}},wr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"PEP Sanction:")],-1))),xr={class:"is-flex mb-2"},kr={style:{"font-size":"14px"}},Cr={class:"box-cell column is-4"},Sr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Type:")],-1))),Ar={class:"is-flex mb-2"},Nr={style:{"font-size":"14px"}},Ir=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Number:")],-1))),Vr={class:"is-flex mb-2"},Tr={style:{"font-size":"14px"}},Dr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Country:")],-1))),jr={class:"is-flex mb-2"},Rr={style:{"font-size":"14px"}},Or=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Valid Until:")],-1))),Er={class:"is-flex mb-2"},Ur={style:{"font-size":"14px"}},Lr={class:"box-cell column is-4"},zr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"IP:")],-1))),Mr={class:"is-flex mb-2"},qr={style:{"font-size":"14px"}},Pr=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Accepted Time:")],-1))),$r={class:"is-flex mb-2"},Fr={style:{"font-size":"14px"}},Br=zo((()=>v("div",{class:"is-flex mb-1"},[v("div",{class:"light-text"},"Decision Time:")],-1))),Wr={class:"is-flex mb-2"},Yr={style:{"font-size":"14px"}},Hr={class:"column is-7"},Kr={class:"columns is-multiline"},Gr={class:"column box-cell column is-4"},Xr=zo((()=>v("h1",{style:{"text-align":"center"}},"Portrait",-1))),Jr={style:{height:"300px"}},Zr=["src"],Qr={key:1},ec={class:"box-cell column is-4"},lc=zo((()=>v("h1",{style:{"text-align":"center"}},"Document front",-1))),ac={style:{height:"300px"}},tc=["src"],sc={key:1},ic={class:"box-cell column is-4"},nc=zo((()=>v("h1",{style:{"text-align":"center"}},"Document Back",-1))),oc={style:{height:"300px"}},rc=["src"],cc={key:1},dc={key:1,style:{width:"100%",display:"flex","justify-content":"center"}},uc=i({__name:"VeriffResponse",props:{id:{type:String,default:0}},setup(e){const l=e;n(),ce();const a=oe();r({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),r(!1),r(""),r([]);const t=r([{id:11,worker:"8107",status:"pending",link_id:"a20b94b9-cd2a-455d-bb2a-1007cb17ac95",veriff_response:null,created_at:"2024-03-07T08:55:40.832036Z",updated_at:"2024-03-07T08:55:40.832056Z"}]),s=r([]),i={Notstarted:"warning",declined:"danger",approved:"primary",pending:"info"};return c((async()=>{(async()=>{try{const e=await a.get(`/v3/api/worker/veriff/${l.id}/worker/`,{});console.log("resopnse data",e.data);let i=e.data;i.forEach((e=>{e.frontDoc=e.veriff_media.filter((e=>e.context.includes("document-front"))),e.docBack=e.veriff_media.filter((e=>e.context.includes("document-back"))),e.face=e.veriff_media.filter((e=>e.context.includes("face"))),s.value=e.face,e.openDetail=!1})),t.value=i,console.log("mediaaa",i)}catch(e){console.log(e)}})()})),(e,l)=>{const a=I,s=Oe;return d(),u("div",null,[v("div",Mo,[v("div",qo,[f(t).length>0?(d(),u("div",Po,[$o,(d(!0),u(C,null,S(f(t),((e,l)=>(d(),u("div",{key:l,class:"cus-card mb-3",style:{"padding-left":"16px"}},[v("div",Fo,[v("div",Bo,[v("div",Wo,[v("h3",null,A(e.updated_at?e.updated_at.slice(0,10):"-----"),1)]),v("div",Yo,[m(a,{color:i[e.status.replace(" ","")],style:{width:"max-content"},light:""},{default:p((()=>[k(A(e.status?e.status.replace(/^\w/,(e=>e.toUpperCase())):"-- --"),1)])),_:2},1032,["color"])]),v("div",Ho,[v("h3",null,A(e.veriff_response?e.veriff_response.verification.person.firstName:"Not found"),1)]),v("div",Ko,[v("h3",null,A(e.veriff_response?e.veriff_response.verification.document.country:"----"),1)]),v("div",Go,[v("h3",null,A(e.veriff_response?e.veriff_response.verification.document.type:"----"),1)]),v("div",Xo,[m(a,{color:e.veriff_response?"primary":"light",light:"",disable:!e.veriff_response,onClick:()=>{e.veriff_response&&(e.openDetail=!e.openDetail)}},{default:p((()=>[k("View "),v("i",{class:E(e.openDetail?"lnir lnir-chevron-up ml-2":"lnir lnir-chevron-down ml-2"),"aria-hidden":"true"},null,2)])),_:2},1032,["color","disable","onClick"])])]),e.openDetail?(d(),u("div",Jo,[Zo,v("div",Qo,[v("div",er,[lr,v("div",ar,[v("div",tr,[v("h1",sr,A(e.veriff_response.verification.status?e.veriff_response.verification.status.replace(/^\w/,(e=>e.toUpperCase())):""),1)]),v("div",ir,A(e.veriff_response.verification.reason),1)])]),nr]),v("div",or,[v("div",rr,[v("div",cr,[v("div",dr,[v("div",ur,[v("div",null,[mr,v("div",pr,[v("span",vr,A(e.veriff_response?e.veriff_response.verification.person.firstName:"Pending"),1)])]),v("div",null,[fr,v("div",yr,[v("span",hr,A(e.veriff_response?e.veriff_response.verification.person.dateOfBirth:"Pending"),1)])]),v("div",null,[gr,v("div",br,[v("span",_r,A(e.veriff_response&&e.veriff_response.verification.person.nationality?e.veriff_response.verification.person.nationality:"Not found"),1)])]),v("div",null,[wr,v("div",xr,[v("span",kr,A(e.veriff_response&&e.veriff_response.verification.person.pepSanctionMatch?"Match":"No match"),1)])])]),v("div",Cr,[v("div",null,[Sr,v("div",Ar,[v("span",Nr,A(e.veriff_response?e.veriff_response.verification.document.type:"Pending"),1)])]),v("div",null,[Ir,v("div",Vr,[v("span",Tr,A(e.veriff_response?e.veriff_response.verification.document.number:"Pending"),1)])]),v("div",null,[Dr,v("div",jr,[v("span",Rr,A(e.veriff_response&&e.veriff_response.verification.document.country?e.veriff_response.verification.document.country:"Not found"),1)])]),v("div",null,[Or,v("div",Er,[v("span",Ur,A(e.veriff_response&&e.veriff_response.verification.document.validUntil?e.veriff_response.verification.document.validUntil:"No match"),1)])])]),v("div",Lr,[v("div",null,[zr,v("div",Mr,[v("span",qr,A(e.veriff_response.technicalData.ip?e.veriff_response.technicalData.ip:"Not found"),1)])]),v("div",null,[Pr,v("div",$r,[v("span",Fr,A(e.veriff_response.verification.acceptanceTime?e.veriff_response.verification.acceptanceTime.slice(0,10):"-----")+" - "+A(e.veriff_response.verification.acceptanceTime?e.veriff_response.verification.acceptanceTime.slice(11,16):"-- -- "),1)])]),v("div",null,[Br,v("div",Wr,[v("span",Yr,A(e.veriff_response.verification.decisionTime?e.veriff_response.verification.decisionTime.slice(0,10):"-- ----")+" - "+A(e.veriff_response.verification.decisionTime?e.veriff_response.verification.decisionTime.slice(11,16):"-- ----"),1)])])])])]),v("div",Hr,[v("div",Kr,[v("div",Gr,[Xr,e.face.length?(d(),h(f(jo),{key:0,style:{"overflow-x":"clip"},"items-to-show":1},{addons:p((()=>[m(f(Eo)),m(f(Uo))])),default:p((()=>[(d(!0),u(C,null,S(e.face,(e=>(d(),h(f(Lo),{style:{height:"300px","overflow-x":"clip"},key:e.id},{default:p((()=>[v("div",Jr,[v("img",{style:{height:"300px"},src:e.media},null,8,Zr)])])),_:2},1024)))),128))])),_:2},1024)):(d(),u("h2",Qr,"No image found"))]),v("div",ec,[lc,e.frontDoc.length?(d(),h(f(jo),{key:0,style:{"overflow-x":"clip"},"items-to-show":1},{addons:p((()=>[m(f(Eo)),m(f(Uo))])),default:p((()=>[(d(!0),u(C,null,S(e.frontDoc,(e=>(d(),h(f(Lo),{style:{height:"300px","overflow-x":"clip"},key:e.id},{default:p((()=>[v("div",ac,[v("img",{style:{height:"300px"},src:e.media},null,8,tc)])])),_:2},1024)))),128))])),_:2},1024)):(d(),u("h2",sc,"No image found"))]),v("div",ic,[nc,e.docBack.length?(d(),h(f(jo),{key:0,style:{"overflow-x":"clip"},"items-to-show":1},{addons:p((()=>[m(f(Eo)),m(f(Uo))])),default:p((()=>[(d(!0),u(C,null,S(e.docBack,(e=>(d(),h(f(Lo),{style:{height:"300px","overflow-x":"clip"},key:e.id},{default:p((()=>[v("div",oc,[v("img",{style:{height:"300px"},src:e.media},null,8,rc)])])),_:2},1024)))),128))])),_:2},1024)):(d(),u("h2",cc,"No image found"))])])])])])])):y("",!0)])])))),128))])):(d(),u("div",dc,[m(s,{class:"cus-main-heading",color:"info",style:{"text-align":"center"}},{default:p((()=>[k("No resquest sent yet !")])),_:1})]))])])])}}}),mc=D(uc,[["__scopeId","data-v-1380b223"]]),pc={class:"profile-card-section no-padding"},vc={class:"section-content no-padding"},fc={class:"tools-wrapper"},yc={class:"banking-dashboard banking-dashboard-v1"},hc={class:"columns is-multiline"},gc={class:"",style:{width:"100%"}},bc={class:"dashboard-card is-credit-cards column is-12"},_c={class:"card-block"},wc={class:"columns is-multiline"},xc={style:{width:"100%"}},kc={class:"card-block-inner is-dark-bordered-12"},Cc={style:{width:"420px",height:"max-content"},class:"credit-card is-theme-1"},Sc={class:"top"},Ac={class:"card-number"},Nc={class:"mt-3",style:{"font-size":"1rem"}},Ic={class:"mt-1",style:{"font-size":"1.5rem"}},Vc={key:0,src:Pe,alt:""},Tc={class:"card-number mt-2"},Dc={style:{"font-size":"1rem"}},jc={class:"card-number mt-1"},Rc={style:{"font-size":"1rem"}},Oc={class:"bottom"},Ec={key:0},Uc={key:1},Lc=i({__name:"WorkerSiaCard",props:{siaCard:{}},setup(e){const l=e;return c((()=>{})),(e,a)=>(d(),u("div",pc,[v("div",vc,[v("div",fc,[v("div",yc,[v("div",hc,[v("div",gc,[v("div",bc,[v("div",_c,[v("div",wc,[v("div",xc,[v("div",kc,[v("div",Cc,[v("div",Sc,[v("div",Ac,[v("div",null,[v("span",Nc,A(l.siaCard?l.siaCard.licenceNumber:"----"),1),v("span",Ic,A(l.siaCard?l.siaCard.firstName:"No license")+" "+A(l.siaCard?l.siaCard.surName:""),1)]),l.siaCard?(d(),u("img",Vc)):y("",!0)]),v("div",Tc,[v("span",Dc,A(l.siaCard?l.siaCard.licenceSector:"----"),1)]),v("div",jc,[v("span",Rc,A(l.siaCard?l.siaCard.role:"----"),1)])]),v("div",Oc,[l.siaCard?(d(),u("span",Ec,"SIA Licence")):(d(),u("span",Uc,"----"))])])])])])])])])])])])])]))}}),zc={class:"banking-dashboard banking-dashboard-v1"},Mc={class:"columns is-multiline"},qc={class:"column is-12"},Pc={class:"dashboard-card is-credit-cards"},$c={class:"title-wrap"},Fc=v("h3",{class:"dark-inverted"},"My Licences",-1),Bc={class:"card-block"},Wc={class:"columns is-multiline"},Yc={style:{display:"flex","flex-direction":"column","align-items":"center","margin-bottom":"18px"}},Hc={class:"info-block-inner"},Kc={class:"info-block-line"},Gc=v("h4",{class:"dark-inverted"},"Verify",-1),Xc=["onClick"],Jc=v("i",{class:"iconify","data-icon":"feather:refresh-ccw","aria-hidden":"true",style:{color:"var(--primary)","margin-right":"8px",cursor:"pointer"}},null,-1),Zc={class:"info-block-line"},Qc=v("h4",{class:"dark-inverted"},"Status",-1),ed=v("i",{"aria-hidden":"true",class:"fas fa-circle text-success",style:{color:"var(--primary)"}},null,-1),ld={class:"info-block-line"},ad=v("h4",{class:"dark-inverted"},"Expires in",-1),td=v("div",{class:"info-block-line"},[v("h4",{class:"dark-inverted"},"Type"),v("span",{class:"has-image"}," SIA card ")],-1),sd={class:"column is-12 pb-5"},id=v("img",{class:"light-image",src:Ue,alt:""},null,-1),nd=v("img",{class:"dark-image",src:Le,alt:""},null,-1),od={class:"modal-form"},rd={class:"stats-wrapper"},cd={class:"columns is-multiline is-flex-tablet-p"},dd=["onClick"],ud=["src"],md=v("label",{for:""},"SIA Licence Number *",-1),pd=i({__name:"WorkerLicences",props:{id:{type:String,default:0}},setup(l){const a=l,t=n(),i=oe(),o=ce(),g=r(0),w=r(!1),x=r(0),N=r(!1),V=r(""),T=r(!1),D=r({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),j=r([{id:0,firstName:"",surName:"",licenceNumber:"",role:"",licenceSector:"",expiryDate:"",status:!1,statusExplanation:"",additionalLicenceConditions:"",isDefault:!1,created_at:"",worker:""}]),R=[{name:"Security",icon:"/images/photo/Security-Guarding.png"},{name:"CIVT",icon:"/images/photo/CVIT.png"},{name:"CCTV",icon:"/images/photo/CCTV.png"},{name:"Door Supervisor",icon:"/images/photo/Door-Supervision.png"},{name:"Close Protection",icon:"/images/photo/Close-Protection.png"},{name:"Key Holding",icon:"/images/photo/Key-Holding.png"},{name:"Veichile Immoblishing",icon:"/images/photo/Vehicle-Immobilising.png"},{name:"K9",icon:"/images/photo/K9.png"}],O=async()=>{try{if(V.value.length<16)return void o.error("Please enter valid SIA");N.value=!0;await i.post(`/v3/api/worker/worker_sia/${a.id}/add_sia_licence/`,{siaNumber:V.value});o.success("worker updated, worker"),fe({message:"added worker <b>licence</b>",objectId:t.params.id,method:"patch"}),N.value=!1,w.value=!1,V.value="",L()}catch(e){N.value=!1,o.error("Invalid SIA or worker with this SIA already register")}},U=async()=>{try{D.value.isSweetAlertOpen=!1;await i.delete(`/v3/api/worker/worker_sia/${g.value}/`,{});o.dismissAll(),o.success("Delete worker licence, Worker"),L()}catch{}},L=async()=>{try{j.value=[];const e=await i.get(`/v3/api/worker/worker_sia/${a.id}/get-worker-sia/`,{});j.value=e.data,console.log(e.data)}catch(e){console.error("ok",e)}};return c((()=>{L()})),(l,a)=>{const n=I,r=Lc,c=ke,g=xe,L=qe,z=be,M=le,q=se,P=s,$=e;return d(),u(C,null,[v("div",zc,[v("div",Mc,[v("div",qc,[v("div",Pc,[v("div",$c,[Fc,v("div",null,[m(n,{color:"primary",icon:"fas fa-plus",elevated:"",onClick:a[0]||(a[0]=e=>w.value=!0)},{default:p((()=>[k(" Licence ")])),_:1})])]),v("div",Bc,[v("div",Wc,[(d(!0),u(C,null,S(f(j),((e,l)=>(d(),u("div",{key:l,class:"column is-4"},[v("div",Yc,[m(r,{style:{width:"400px"},"sia-card":e},null,8,["sia-card"])]),v("div",Hc,[v("div",Kc,[Gc,v("span",{onClick:l=>(async e=>{try{(await i.post(`v3/api/worker/worker_sia/${t.params.id}/verify-sia-number/`,{siaNumber:e})).data&&o.success("Licence Verified, Verify")}catch(l){o.error("Licence Unverified")}})(e.licenceNumber)},[Jc,k(" Verify again ")],8,Xc)]),v("div",Zc,[Qc,v("span",null,[ed,k(" "+A(e.status?"Active":"InActive"),1)])]),v("div",ld,[ad,v("span",null,A(e.expiryDate),1)]),td])])))),128)),v("div",sd,[0==f(j).length?(d(),h(c,{key:0,title:"No Licence is added for this employee.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:p((()=>[id,nd])),_:1})):y("",!0)])])])])])])]),f(T)?(d(),h(g,{key:0})):y("",!0),m(P,{is:"form",open:f(w),onSubmit:b(O,["prevent"]),title:"Add Licence",size:"big",actions:"right",onClose:a[2]||(a[2]=e=>w.value=!1)},{content:p((()=>[v("div",od,[v("div",rd,[v("div",cd,[(d(),u(C,null,S(R,((e,l)=>v("div",{key:l,class:"column is-3"},[v("div",{class:E(["dashboard-card",f(x)==l?"active-licence":""]),style:{height:"150px"},onClick:e=>x.value=l},[m(L,{style:{cursor:"pointer","flex-direction":"column","align-items":"center","justify-content":"center","text-align":"center",gap:"10px","font-size":"0.75rem"},title:e.name,center:""},{icon:p((()=>[v("img",{src:e.icon,alt:""},null,8,ud)])),_:2},1032,["title"])],10,dd)]))),64)),m(q,{class:"column is-6"},{default:p((({id:e})=>[md,m(M,null,{default:p((()=>[m(z,{id:e,modelValue:f(V),"onUpdate:modelValue":a[1]||(a[1]=e=>_(V)?V.value=e:null),autocomplete:"cc-csc",required:"",class:"input",options:{mask:"0000000000000000"},placeholder:"SIA Number"},null,8,["id","modelValue"])])),_:2},1024)])),_:1})])])])])),action:p((()=>[m(n,{type:"submit",color:"primary",loading:f(N),icon:"fa fa-plus",raised:""},{default:p((()=>[k("Licence")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"]),f(D).isSweetAlertOpen?(d(),h($,{key:1,isSweetAlertOpen:f(D).isSweetAlertOpen,title:f(D).title,subtitle:f(D).subtitle,btntext:f(D).btntext,onConfirm:U,onCancel:()=>f(D).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):y("",!0)],64)}}}),vd=e=>(V("data-v-e5a83033"),e=e(),T(),e),fd=vd((()=>v("h4",null,"Comments",-1))),yd=vd((()=>v("i",{class:"fas fa-plus","aria-hidden":"true",style:{color:"var(--primary-light-12)","font-size":"9px"}},null,-1))),hd={class:"section-content"},gd={class:"network-notifications"},bd={key:1,class:"noteInput"},_d=["onMouseover"],wd={class:"noteContent"},xd=["onClick"],kd=[vd((()=>v("i",{style:{color:"#2db998"},class:"lnir lnir-close"},null,-1)))],Cd=i({__name:"WorkerComments",props:{id:{type:String,default:0},worker:{type:Object,default:{}}},setup(e){const l=e,a=ce(),t=oe(),s=n(),i=r(!0),o=r(null),f=r(!1),b=r(!1),_=r(""),w=r([{id:0,content:"",created_at:"",created_by:{first_name:"",last_name:""}}]),x=()=>{b.value=!1},N=()=>{f.value=!f.value},V=async()=>{if(_.value)try{let e={content:_.value,worker:l.id};_.value="";const i=await t.post("/v3/api/worker/notes/",e);w.value.push(i.data),T(),fe({message:"added a <b>comment</b>",objectId:s.params.id,method:"post"}),a.success("note added")}catch(e){console.log(e)}},T=async()=>{try{const e=await t.get(`/v3/api/worker/notes/${l.id}/notes-worker/`);console.log(e.data),w.value=e.data??[]}catch(e){console.error("ok",e)}};return c((()=>{T()})),(e,l)=>{const n=Oe,r=ge,c=le,D=se,j=I;return d(),u(C,null,[v("div",{class:"section-title"},[fd,v("button",{onClick:N,class:"add-btn"},[yd,k(" Add ")])]),v("div",hd,[v("div",gd,[0==w.value.length?(d(),h(n,{key:0,color:"solid",label:"No comments are available.",rounded:""})):y("",!0),f.value?(d(),u("div",bd,[m(D,null,{default:p((()=>[m(c,{icon:"lnil lnil-plus"},{default:p((()=>[i.value?(d(),h(r,{key:0,onBlur:V,modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),onKeyup:l[1]||(l[1]=g((()=>{V()}),["enter"])),placeholder:"Enter Comment",type:"text"},null,8,["modelValue"])):y("",!0)])),_:1})])),_:1}),m(D,{style:{display:"flex","align-items":"center","justify-content":"flex-end"}},{default:p((()=>[m(j,{color:"primary",outlined:"",onClick:l[2]||(l[2]=()=>{_.value.length>0&&V()})},{default:p((()=>[k("Save")])),_:1})])),_:1})])):y("",!0),(d(!0),u(C,null,S(w.value,((e,l)=>(d(),u("div",{class:"noteBlock",key:e.id,"data-cy":"dark-mode-toggle",onMouseover:e=>(e=>{b.value=!0,o.value=e})(l),onMouseleave:x},[v("div",wd,[v("p",null,A(e.content),1),v("p",null,A(e.created_by.first_name&&e.created_by.first_name)+" "+A(e.created_by.last_name&&e.created_by.last_name)+" | "+A(e.created_at&&e.created_at.slice(0,10)),1)]),b.value&&o.value===l?(d(),u("button",{key:0,class:"DelBtn",elevated:"",onClick:l=>(async e=>{try{const l=w.value.findIndex((l=>l.id===e));-1!==l&&w.value.splice(l,1),await t.delete(`/v3/api/worker/notes/${e}`),fe({message:"deleted a <b>comment</b>",objectId:s.params.id,method:"delete"}),a.warning("note deleted"),T()}catch(l){console.log(l)}})(e.id)},kd,8,xd)):y("",!0)],40,_d)))),128))])])],64)}}}),Sd=D(Cd,[["__scopeId","data-v-e5a83033"]]),Ad=e=>(V("data-v-80c29675"),e=e(),T(),e),Nd={class:"lifestyle-dashboard lifestyle-dashboard-v1"},Id={class:"row"},Vd=Ad((()=>v("div",{class:"wrapper-anim"},[v("div",{class:"box-anim"},[v("div"),v("div"),v("div"),v("div"),v("div"),v("div"),v("div"),v("div"),v("div"),v("div")])],-1))),Td={class:"dashboard-header"},Dd={class:"avatar-container",style:{"border-radius":"22px","min-width":"170px",border:"0px solid #fff"}},jd=["src"],Rd={class:"header-meta"},Od={class:"username-wrap"},Ed={class:"username ml-6"},Ud={class:"user-rating is-block"},Ld={class:"ratings"},zd={style:{color:"white !important","font-size":"23px","font-weight":"700 !important","margin-top":"0px"}},Md={style:{"white-space":"nowrap"}},qd={class:"username-wrap"},Pd={class:"switches mt-1"},$d={class:"username cu-align-cen\\ter"},Fd={class:"",style:{"font-weight":"400",color:"white"}},Bd={class:"switches mt-3"},Wd={class:"ml-0",style:{"font-weight":"400",color:"white"}},Yd={key:0,src:"/images/icons/workerProfile/whatsapp.webp",style:{width:"20px",height:"20px","margin-left":"14px"}},Hd=Ad((()=>v("div",{class:"switches mt-0"},[v("div",{class:"username cu-align-center"})],-1))),Kd=Ad((()=>v("div",{class:"is-divider-vertical"},null,-1))),Gd={class:"header-meta",style:{"margin-inline-start":"27px"}},Xd={class:"user-switch"},Jd={class:"username-wrap"},Zd={class:"switches mb-0"},Qd={class:"username"},eu=Ad((()=>v("span",{style:{"font-weight":"500","margin-left":"4px",color:"white"}}," Account Status:",-1))),lu={class:"switches mb-0 mt-0"},au={class:"username cu-align-center"},tu=Ad((()=>v("span",{style:{"font-weight":"500","margin-left":"4px",color:"white"}},"Activation Code:",-1))),su={style:{"letter-spacing":"1px",color:"white"}},iu={class:"switches mb-0 mt-1"},nu={class:"username cu-align-center"},ou=Ad((()=>v("span",{style:{"white-space":"nowrap","font-weight":"500","margin-left":"4px",color:"white"}},"Veriff Status: ",-1))),ru={style:{fontSize:"15px",marginLeft:"2px",color:"white"}},cu={class:"switches mb-0 mt-1"},du={class:"username cu-pointer cu-align-center"},uu=Ad((()=>v("span",{style:{color:"white","font-weight":"500","margin-left":"4px"}},"UK sanctions:",-1))),mu=Ad((()=>v("div",{class:"is-divider-vertical"},null,-1))),pu={class:"header-meta"},vu={class:"user-switch space-between"},fu={class:"username-wrap"},yu={class:"switches mb-0 is-flex"},hu={class:"username"},gu=Ad((()=>v("span",{style:{"font-weight":"500","margin-left":"4px",color:"white"}},"BS7858:",-1))),bu={key:0},_u=Ad((()=>v("div",{class:"switches"},[v("div",{class:"username"},[v("span",{style:{"font-weight":"500",color:"white"}},"Current Industries:")])],-1))),wu={class:"switches"},xu={class:"username",style:{gap:"20px"}},ku=["onClick"],Cu=["src"],Su={class:"header-meta",style:{"margin-top":"-12px"}},Au={class:"user-switch space-between"},Nu={class:"username-wrap"},Iu={class:"switches mb-4 is-flex"},Vu={class:"username"},Tu={class:"header-meta"},Du={class:"user-switch"},ju={class:"cus-justify-center"},Ru=Ad((()=>v("i",{class:"fas fa-share","aria-hidden":"true"},null,-1))),Ou=Ad((()=>v("i",{class:"fas fa-edit","aria-hidden":"true"},null,-1))),Eu={class:"link-message"},Uu={key:0,class:"mb-3 list-flex-toolbar is-reversed"},Lu=Ad((()=>v("i",{class:"fas fa-copy mr-1 cus-onhover",style:{cursor:"pointer",color:"var(--info)","font-size":"large"},"aria-hidden":"true"},null,-1))),zu=Ad((()=>v("br",null,null,-1))),Mu=Ad((()=>v("i",{class:"fas fa-copy mr-1 cus-onhover",style:{cursor:"pointer",color:"var(--info)","font-size":"large"},"aria-hidden":"true"},null,-1))),qu=Ad((()=>v("i",{class:"iconify","data-icon":"feather:alert-triangle","aria-hidden":"true"},null,-1))),Pu={class:"profile-wrapper mt-0",style:{width:"100%"}},$u={class:"profile-body"},Fu={class:"tabs-wrapper"},Bu={class:"tabs-inner mt-4"},Wu={class:"tabs is-toggle"},Yu=[Ad((()=>v("span",null,"Profile",-1)))],Hu=[Ad((()=>v("span",null,"Licence",-1)))],Ku=[Ad((()=>v("span",null,"References",-1)))],Gu=[Ad((()=>v("span",null,"Identity Verification",-1)))],Xu=[Ad((()=>v("span",null,"Comments",-1)))],Ju=[Ad((()=>v("span",null,"Questions",-1)))],Zu=[Ad((()=>v("span",null,"Warnings",-1)))],Qu=[Ad((()=>v("span",null,"Logs",-1)))],em=[Ad((()=>v("span",null,"Timesheet",-1)))],lm=[Ad((()=>v("span",null,"Worker Rota",-1)))],am={class:"tab-content is-active"},tm={class:"columns"},sm={class:"column is-8"},im={class:"profile-card"},nm={class:"profile-card-section"},om={class:"section-content"},rm={class:"column"},cm={key:0,class:"incoming"},dm={class:"cus-docTitles"},um={id:"titles"},mm={class:"item-name mb-1 dark-inverted"},pm={key:0,style:{width:"12px",height:"12px"},src:"/images/docmandatory.png"},vm={class:"item-meta"},fm={key:0,style:{color:"var(--light-text)","font-weight":"500"},class:"cu-pointer"},ym={class:"item-meta"},hm={class:"cu-pointer cus-sub-title"},gm={key:0,class:"item-meta"},bm=["onClick"],_m={key:0,style:{position:"absolute","background-color":"#fff",padding:"6px",width:"220px"}},wm={key:0,id:"cus-toggle-center",class:"navbar-item is-theme-toggle cell-end"},xm={class:"theme-toggle"},km=["onUpdate:modelValue","onClick"],Cm=Ad((()=>v("span",{class:"toggler"},[v("span",{class:"dark"},[v("i",{class:"iconify","data-icon":"feather:check","aria-hidden":"true"})]),v("span",{class:"light"},[v("i",{class:"iconify","data-icon":"feather:x","aria-hidden":"true"})])],-1))),Sm={key:1,id:"cus-toggle-center",class:"navbar-item is-theme-toggle"},Am={class:"theme-toggle"},Nm=["onUpdate:modelValue","onClick"],Im=Ad((()=>v("span",{class:"toggler",style:{"border-color":"var(\n                                          --primary-grey\n                                        ) !important"}},[v("span",{class:"cus-dark"},[v("i",{color:"info",class:"iconify","data-icon":"feather:check","aria-hidden":"true"})]),v("span",{class:"light",style:{"background-color":"var(\n                                            --primary-grey\n                                          ) !important"}},[v("i",{color:"info",class:"iconify","data-icon":"feather:x","aria-hidden":"true"})])],-1))),Vm={key:0},Tm={key:0},Dm=["onClick"],jm={key:1},Rm={class:"png-icon"},Om=["onClick"],Em=Ad((()=>v("i",{class:"iconify","data-icon":"feather:upload-cloud","aria-hidden":"true"},null,-1))),Um=Ad((()=>v("i",{class:"iconify","data-icon":"feather:trash-2","aria-hidden":"true"},null,-1))),Lm={key:1},zm={class:"column is-4"},Mm={class:"profile-card is-relative"},qm={class:"profile-card-section no-padding cus-comment"},Pm=K('<div class="profile-card is-relative" data-v-80c29675><div class="profile-card-section no-padding" data-v-80c29675><div class="section-title" data-v-80c29675><h4 data-v-80c29675>Location</h4></div><div class="section-content no-padding" data-v-80c29675><div id="myMap" style="height:300px;width:100%;border-radius:10px;" data-v-80c29675></div></div></div></div>',1),$m={class:"profile-card is-relative"},Fm={class:"profile-card-section no-padding"},Bm=Ad((()=>v("div",{class:"section-title"},[v("h4",null,"License")],-1))),Wm={class:"section-content no-padding"},Ym={class:"tools-wrapper"},Hm={class:"banking-dashboard banking-dashboard-v1"},Km={class:"columns is-multiline"},Gm={class:"column is-12",style:{width:"max-content"}},Xm={class:"tab-content is-active"},Jm={key:0},Zm={class:"list-flex-toolbar mb-3 mt-2"},Qm=Ad((()=>v("h6",{class:"cus-main-heading ml-1"},"Veriff Requests",-1))),ep={class:"buttons"},lp=Ad((()=>v("span",null,[v("img",{src:"/images/veriff-logo-round.svg",style:{width:"auto",height:"20px","margin-top":"4px","margin-right":"6px","border-radius":"6px"}})],-1))),ap=Ad((()=>v("h5",{class:"light-text mr-4",style:{"font-weight":"500"}}," Send Veriff link ",-1))),tp={key:1,class:"tab-content is-active"},sp={key:2,class:"tab-content is-active"},ip={key:3,class:"tab-content is-active"},np={key:4,class:"tab-content is-active"},op={key:5,class:"tab-content is-active"},rp={key:6,class:"tab-content is-active"},cp={key:7,class:"tab-content is-active"},dp={class:"columns is-multiline"},up={key:1,class:"column is-6"},mp=Ad((()=>v("label",{class:"light-text mb-2"},"SIA Number :",-1))),pp={class:"modal-form"},vp=["src"],fp=["src"],yp=i({__name:"WorkerProfile",setup(l){const a=o(),i=Ke(),_=n(),x=oe(),V=r(!1),T=r(!1),D=r([]),j=ce(),R=r(!1);r(!1);const O=r(""),L=r(0),M=r(null),q=r({}),P=r("personal"),$=r(!1),F=r(!0),W=r(0),Y=r(""),H=r(0),K=r(""),Z=r(""),Q=r(!1),ae=r(0),te=r(""),re=r(""),de=r(!1),ue=r(""),me=r(""),pe=r(!1),ve=r(!1),he=r(0),_e=r(!1),we=r("worker"),ke=r(""),Ce=r({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});r({id:0,last_updated:"",date_designated:"",unique_id:"",ofsi_group_id:0,un_reference_number:"",regime_name:"",individual_entity_ship:"",designation_source:"",sanctions_imposed:"",other_information:"",names:[],addresses:[]});const Ae=r({id:0,firstName:"",lastName:"",emailAddress:"",phoneNumber:"",lineManager:"",homeAddress:"",profileImageURL:null,externalID:" ",compnayIdCardNumber:" ",compnayIdCardExpiryDate:" ",signedDeclerationForm:" ",veriffStatus:"",sanctionStatus:!1,warning:!1,warningMessage:"",default_sia:{id:0,firstName:"",surName:"",licenceNumber:"",role:"",licenceSector:"",expiryDate:"",status:!1,statusExplanation:"",additionalLicenceConditions:"",isDefault:!1,created_at:"",updated_at:"",worker:0},industry:{id:0,name:"",industryLogo:""},arezCompany:"",status:!1,postCode:"",rating:0,activationCode:"",transport:"",archive:!1,bs7858:!1,profileStat:{percentage:"56"},pre_industries:[{id:0,name:"",industryLogo:""}],bgColor:{id:1,backgroundColor:"linear-gradient(to right, #1D2671, #C33764)"}}),Ne={documentTitle:{label:"Documents",grow:!1,media:!0},status:{label:"Status",align:"center"},actions:{label:"Actions",align:"end"}},De=async(e,l)=>{try{const a=new window.FormData;for(const e in l)a.append(e,l[e]);await x.patch(`/v3/api/worker/document/${e}/`,a);"status"in l?fe({message:`Updated the status of <b> ${l.docTitle} </b> to <b>${1==l.status?"Approved":"Disapproved"}.</b>`,objectId:_.params.id,method:"patch"}):"expiryDate"in l&&fe({message:`update the expiry date of <b>${l.docTitle}</b> to <b>${l.expiryDate}</b>`,objectId:_.params.id,method:"patch"}),j.dismissAll(),j.success("worker document updated, Worker"),ze(),Ee(!1),he.value=0}catch(a){console.error("ok",a)}},je=async(e,l,a=!0)=>{try{const t=new window.FormData;for(const e in l)t.append(e,l[e]);await x.patch(`/v3/api/worker/${e}/`,t);j.dismissAll(),j.success("Worker  updated successfuly"),a&&Le()}catch(t){console.error("ok",t)}},Ee=e=>{let l=D.value;const a=l.findIndex((e=>e.id===q.value.id));-1!==a&&(l[a].loading=e),D.value=[...l]},Ue=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(Ee(!0),q.value.worker?De(q.value.id,{document:a}):(async(e,l)=>{try{let a={status:!1,worker:_.params.id,companyDocument:e.id,document:l};const t=new window.FormData;for(const e in a)t.append(e,a[e]);console.log(e),await x.post("/v3/api/worker/document/",t),fe({message:`added a document  <b>${e.documentTitle}</b>`,objectId:_.params.id,method:"post"}),ze()}catch(a){j.error("Please reduce file size to upload")}finally{Ee(!1)}})(q.value,a),fe({message:`updated <b> ${q.value.documentTitle} </b> document.`,objectId:_.params.id,method:"patch"}))},Le=async()=>{try{V.value=!0;const e=await x.get(`/v3/api/worker/${_.params.id}/profile/`,{});Ae.value=e.data,ke.value=e.data.default_sia?e.data.default_sia.licenceNumber:"",0==Ae.value.pre_industries.length&&Ae.value.pre_industries.push(e.data.industry),e.data.latitude?Je(e.data.latitude,e.data.longitude):Je(51.4497984,-.3464489),ze(),V.value=!1}catch(e){console.error("ok",e)}},ze=async()=>{try{F&&(T.value=!0,F.value=!1);const e=await x.get(`/v3/api/worker/document/${_.params.id}/get_documents_of_a_worker/`,{});T.value=!1,D.value=e.data}catch(e){T.value=!1,console.error("ok",e)}},Me=e=>{navigator.clipboard.writeText(e),j.success("Activation code copied"),fe({message:"shared profile using <b> share link </b>",objectId:_.params.id,method:"patch"})},Pe=()=>{2==H.value?ll():1==H.value?Qe():3==H.value&&al()},Ge=()=>{H.value=3;let e=`Yes, ${Ae.value.status?"In-Active":"Active"} it`;Ce.value={title:"Are you sure?",subtitle:"This worker will be "+(Ae.value.status?"In-Active":"Active"),btntext:e,isSweetAlertOpen:!0}};let Xe={};const Je=(e,l)=>{let a={lat:e,lng:length};Xe=new google.maps.Map(document.getElementById("myMap"),{center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:l},map:Xe,title:"Worker"})},Ze=()=>{je(Ae.value.id,{bs7858:!Ae.value.bs7858},!1)},Qe=async()=>{try{Ce.value.isSweetAlertOpen=!1;await x.delete(`/v3/api/worker/document/${L.value}/`,{});ze(),fe({message:`deleted <b>${me.value}</b> document`,objectId:_.params.id,method:"delete"}),j.dismissAll(),j.success("Delete worker document, Worker"),H.value=0}catch(e){console.error("ok",e)}},el=G({series:[0],chart:{height:160,type:"radialBar",toolbar:{show:!1}},colors:[i.accent],plotOptions:{radialBar:{hollow:{size:"40%"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontWeight:500,offsetY:-10,color:i.lightText},value:{show:!0,fontWeight:600,color:"#fff",fontSize:"16px",offsetY:-10}}}},labels:[""]}),ll=()=>{Ce.value.isSweetAlertOpen=!1,je(Ae.value.id,{industry:ae.value}),fe({message:`switched to the <b>${ue.value}</b> industry`,objectId:_.params.id,method:"patch"}),H.value=0},al=()=>{je(Ae.value.id,{status:Ae.value.status},!1),fe({message:`change status to <b>${Ae.value.status?"Active":"In-Active"}</b>`,objectId:_.params.id,method:"patch"}),Ce.value.isSweetAlertOpen=!1,H.value=0},tl=()=>{je(Ae.value.id,{warning:!Ae.value.warning},!1),fe({message:`Set to <b>${Ae.value.warning?"Clear":"Warning"}</b>`,objectId:_.params.id,method:"patch"}),P.value="warnings"},sl=()=>{je(Ae.value.id,{warningMessage:Ae.value.warningMessage},!1)},il=()=>{Ae.value.sanctionStatus&&(ve.value=!ve.value)},nl=()=>{const e=encodeURIComponent(Ae.value.firstName+" "+Ae.value.lastName);window.open(`/worker-certificate?name=${e}`,"_blank")},ol=()=>{const e={name:encodeURIComponent(Ae.value.firstName+""+Ae.value.lastName)};a.push({query:e,replace:!0}),_e.value=!_e.value},rl=async()=>{try{if(ke.value.length<16)return j.error("Invalid Number");(await x.post(`v3/api/worker/worker_sia/${_.params.id}/verify-sia-number/`,{siaNumber:ke.value})).data&&j.success("Licence Verified, Verify")}catch(e){j.error("Licence Unverified")}},cl=U((()=>Ae.value.warningMessage?Ae.value.warningMessage.slice(0,80):Ae.value.warningMessage));return B((()=>_.params.id),(async()=>{Le()})),c((async()=>{await Le()})),(l,a)=>{const i=We,n=le,o=se,r=ee,c=Oe,x=Be,T=Fe,j=Te,U=qe,F=Se,B=ie,G=$e,oe=ge,ce=ne,Ee=Re,ze=Sd,Ke=Lc,Xe=pd,Je=I,Qe=mc,ll=ko,al=Yt,dl=Ve,ul=Ie,ml=It,pl=t,vl=xe,fl=s,yl=Ka,hl=be,gl=la,bl=Jl,_l=e,wl=X("tooltip");return d(),u(C,null,[v("div",Nd,[v("div",{class:"dashboard-header-wrapper mb-6",style:N({backgroundImage:Ae.value.bgColor.backgroundColor})},[v("div",Id,[Vd,v("div",Td,[v("div",Dd,[v("img",{size:"medium",style:{"border-radius":"15px"},src:Ae.value.profileImageURL?Ae.value.profileImageURL:"/images/avatars/placeholder.jpg"},null,8,jd)]),v("div",Rd,[v("div",Od,[v("div",Ed,[v("div",Ud,[v("div",Ld,[m(o,null,{default:p((()=>[m(n,null,{default:p((()=>[m(i,{onClick:a[0]||(a[0]=e=>(()=>{const e={rating:Ae.value.rating};je(Ae.value.id,e,!1),fe({message:`updated rating to <b>${Ae.value.rating} </b> stars`,objectId:_.params.id,method:"patch"})})()),"readonly:false":"",modelValue:Ae.value.rating,"onUpdate:modelValue":a[1]||(a[1]=e=>Ae.value.rating=e)},null,8,["modelValue"])])),_:1})])),_:1})]),v("h3",zd,[v("span",Md,A(Ae.value.firstName)+" "+A(Ae.value.lastName),1)])]),v("div",qd,[v("div",Pd,[v("div",$d,[v("span",Fd,A(Ae.value.emailAddress),1)])]),v("div",Bd,[v("div",{class:"username cu-pointer cu-align-center",onClick:a[2]||(a[2]=e=>{return l=Ae.value.phoneNumber,ye(l),void fe({message:"started chat on <b>WhatsApp</b>",objectId:_.params.id,method:"patch"});var l})},[v("span",Wd,A(Ae.value.phoneNumber),1),Ae.value.phoneNumber?(d(),u("img",Yd)):y("",!0)])]),Hd])])])]),Kd,v("div",Gd,[v("div",Xd,[v("div",Jd,[v("div",Zd,[v("div",Qd,[eu,m(o,{horizontal:"",style:{"margin-top":"-3px"}},{default:p((()=>[m(n,null,{default:p((()=>[m(r,{onClick:Ge,modelValue:Ae.value.status,"onUpdate:modelValue":a[3]||(a[3]=e=>Ae.value.status=e),"label-true":"",color:"primary",style:{color:"#f1f1f1"}},null,8,["modelValue"])])),_:1})])),_:1})])]),v("div",lu,[v("div",au,[tu,v("span",su,[k(A(Ae.value.activationCode?Ae.value.activationCode:"-----")+" ",1),v("i",{onClick:a[4]||(a[4]=e=>Me(Ae.value.activationCode)),class:"fas fa-copy mr-1 cus-onhover","aria-hidden":"true"})])])]),v("div",iu,[v("div",nu,[ou,v("span",ru,A(Ae.value.veriffStatus.charAt(0).toUpperCase()+Ae.value.veriffStatus.slice(1)),1),"No attempt"==Ae.value.veriffStatus?(d(),h(c,{key:0,style:{cursor:"pointer"},color:"warning",outlined:"",label:"Create link",curved:"",elevated:"",onClick:a[5]||(a[5]=()=>{pe.value=!pe.value})})):y("",!0)])]),v("div",cu,[v("div",du,[uu,v("span",{class:"ml-1 cu-pointer",onClick:il,style:N({fontWeight:"400",textDecoration:Ae.value.sanctionStatus?"underline":"",color:(Ae.value.sanctionStatus,"#fff")})},A(Ae.value.sanctionStatus?"Not Cleared":"Cleared"),5)])])])])]),mu,v("div",pu,[v("div",vu,[v("div",fu,[v("div",yu,[v("div",hu,[gu,m(o,{horizontal:"",style:{"margin-top":"-3px"}},{default:p((()=>[m(n,null,{default:p((()=>[m(x,{onClick:Ze,modelValue:Ae.value.bs7858,"onUpdate:modelValue":a[6]||(a[6]=e=>Ae.value.bs7858=e),"label-true":"",color:"primary",style:{color:"#f1f1f1"}},null,8,["modelValue"])])),_:1})])),_:1}),Ae.value.bs7858?(d(),u("span",bu,[v("img",{onClick:ol,class:"cu-pointer",style:{height:"24px",width:"auto"},src:"/images/view-48.png"})])):y("",!0)])]),_u,v("div",wu,[v("div",xu,[(d(!0),u(C,null,S(Ae.value.pre_industries,((e,l)=>w((d(),u("span",{key:l,class:E(Ae.value.industry.name!=e.name?"":"cus-default"),onClick:l=>(e=>{H.value=2,ae.value=e.id,ue.value=e.name,Ce.value={title:"Are you sure?",subtitle:"Your documents and other informations will be changed according to your industry.",btntext:"Yes, switch it",isSweetAlertOpen:!0}})(e),style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",color:"white"}},[e.id?(d(),u("img",{key:0,src:e.industryLogo,style:{width:"42px",height:"42px",padding:"1px","border-radius":"6px"}},null,8,Cu)):y("",!0),v("span",{class:"active-industry",style:N({backgroundColor:Ae.value.industry.name==e.name?"":"#F5F5F5",color:Ae.value.industry.name==e.name?"":"black"})},A(e.name),5)],10,ku)),[[wl,"Switch industry",void 0,{primary:!0,top:!0,rounded:!0}]]))),128))])])])])]),v("div",Su,[v("div",Au,[v("div",Nu,[v("div",Iu,[v("div",Vu,[m(o,null,{default:p((()=>[m(n,null,{default:p((()=>[m(x,{onClick:tl,color:"warning",modelValue:Ae.value.warning,"onUpdate:modelValue":a[7]||(a[7]=e=>Ae.value.warning=e),label:"Set warning"},null,8,["modelValue"])])),_:1})])),_:1})])])])])]),v("div",Tu,[v("div",Du,[v("div",ju,[m(f(He),{id:"radial-circle",class:"circle-chart-wrapper",height:f(el).chart.height,type:f(el).chart.type,series:[Ae.value.profileStat?Ae.value.profileStat.percentage:0],options:f(el)},null,8,["height","type","series","options"])])])])]),v("button",{onClick:a[8]||(a[8]=()=>{K.value=`https://vms.arez.io/worker-profile/share/?id=${Ae.value.id}&code=${Ae.value.activationCode}`,Q.value=!0,Z.value=`https://vms.arez.io/worker-profile/?code=${Ae.value.activationCode}`}),rounded:"",color:"solid",label:"Error",class:"share-btn",style:{color:"#fff"}},[Ru,k(" Share ")]),w((d(),u("button",{onClick:a[9]||(a[9]=()=>{W.value=Ae.value.id,$.value=!0}),class:"edit-btn tooltip-custom-class",style:{color:"#fff"}},[Ou,k(" Edit ")])),[[wl,"Edit Woker Profile",void 0,{success:!0,bottom:!0,rounded:!0}]]),v("div",Eu,[Q.value?(d(),u("div",Uu,[m(T,{color:"primary",class:"is-flex copyLinkStyle",closable:"",onClose:a[12]||(a[12]=e=>Q.value=!1)},{default:p((()=>[k(A(K.value)+" ",1),w((d(),h(c,{style:{"background-color":"transparent"},onClick:a[10]||(a[10]=e=>Me(K.value))},{default:p((()=>[Lu])),_:1})),[[wl,"Copy Link",void 0,{rounded:!0,info:!0}]]),zu,k(" "+A(Z.value)+" ",1),w((d(),h(c,{style:{"background-color":"transparent"},onClick:a[11]||(a[11]=e=>Me(Z.value))},{default:p((()=>[Mu])),_:1})),[[wl,"Copy Link",void 0,{rounded:!0,info:!0}]])])),_:1})])):y("",!0)]),Ae.value.warning?(d(),h(U,{key:0,title:"Warning Note",class:"cus-warning-block mt-1 column dark-text col-12",subtitle:f(cl)},{icon:p((()=>[m(j,{color:"warning",rounded:""},{default:p((()=>[qu])),_:1})])),_:1},8,["subtitle"])):y("",!0)])],4),v("div",Pu,[v("div",$u,[v("div",Fu,[v("div",Bu,[v("div",Wu,[v("ul",null,[v("li",{class:E(["personal"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[13]||(a[13]=g(b((e=>P.value="personal"),["prevent"]),["space"])),onClick:a[14]||(a[14]=e=>P.value="personal")},Yu,32)],2),v("li",{class:E(["licence"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[15]||(a[15]=g(b((e=>P.value="licence"),["prevent"]),["space"])),onClick:a[16]||(a[16]=e=>P.value="licence")},Hu,32)],2),v("li",{class:E(["reference"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[17]||(a[17]=g(b((e=>P.value="reference"),["prevent"]),["space"])),onClick:a[18]||(a[18]=e=>P.value="reference")},Ku,32)],2),v("li",{class:E(["veriffTab"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[19]||(a[19]=g(b((e=>P.value="veriffTab"),["prevent"]),["space"])),onClick:a[20]||(a[20]=e=>P.value="veriffTab")},Gu,32)],2),v("li",{class:E(["comments"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[21]||(a[21]=g(b((e=>P.value="comments"),["prevent"]),["space"])),onClick:a[22]||(a[22]=e=>P.value="comments")},Xu,32)],2),v("li",{class:E(["questions"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[23]||(a[23]=g(b((e=>P.value="questions"),["prevent"]),["space"])),onClick:a[24]||(a[24]=e=>P.value="questions")},Ju,32)],2),v("li",{class:E(["warnings"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[25]||(a[25]=g(b((e=>P.value="warnings"),["prevent"]),["space"])),onClick:a[26]||(a[26]=e=>P.value="warnings")},Zu,32)],2),v("li",{class:E(["activity"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[27]||(a[27]=g(b((e=>P.value="activity"),["prevent"]),["space"])),onClick:a[28]||(a[28]=e=>P.value="activity")},Qu,32)],2),v("li",{class:E(["timeSheet"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onKeydown:a[29]||(a[29]=g(b((e=>P.value="timeSheet"),["prevent"]),["space"])),onClick:a[30]||(a[30]=e=>P.value="timeSheet")},em,32)],2),v("li",{class:E(["worker-rota"===P.value?"is-active":"not-active"])},[v("a",{tabindex:"0",role:"button",onClick:a[31]||(a[31]=e=>P.value="worker-rota")},lm)],2)])])]),w(v("div",am,[v("div",tm,[v("div",sm,[v("div",im,[v("div",nm,[V.value?(d(),h(F,{key:0})):y("",!0),v("input",{ref_key:"fileInput",ref:M,type:"file",style:{display:"none"},onChange:Ue,accept:"image/*,application/pdf"},null,544),v("div",om,[v("div",rm,[D.value.length>0?(d(),u("div",cm,[m(Ee,{rounded:"",data:D.value,columns:Ne,class:"noborder",id:"doc-table"},{"body-cell":p((({row:e,column:l,value:t})=>["documentTitle"===l.key?(d(),u(C,{key:0},[m(B,{picture:e.icon,squared:!0},null,8,["picture"]),v("div",dm,[v("div",um,[v("span",mm,[k(A(e.documentTitle)+" ",1),"step_1"==e.step?(d(),u("img",pm)):y("",!0)]),v("span",vm,[e.expiryDateRequired?w((d(),u("span",fm," Date required",512)),[[z,!e.expiryDate]]):y("",!0)]),v("span",ym,[v("span",hm,A(e.subTitle&&e.subTitle.length>60?e.subTitle.slice(0,69):"Not Added")+"...",1)]),e.expiryDateRequired&&e.document?(d(),u("span",gm,[v("span",{style:N({color:e.expiryDate?"var(--primary)":"var(--danger)"}),class:"cu-pointer"},"Expiry date: "+A(e.expiryDate),5),v("i",{onClick:l=>{return a=e.id,t=e.expiryDate,te.value=t,void(he.value=a);var a,t},class:"lnil lnil-pencil ml-2 cu-pointer",style:{color:"var(--primary)","font-size":"10px"},"aria-hidden":"true"},null,8,bm)])):y("",!0)])]),he.value==e.id?(d(),u("div",_m,[m(o,null,{default:p((()=>[v("i",{class:"lnil lnil-close cu-pointer",onClick:a[32]||(a[32]=()=>{he.value=0}),style:{float:"right"},"aria-hidden":"true"}),m(G,null,{default:p((()=>[k("Enter expiry date :")])),_:1}),m(n,null,{default:p((()=>[m(oe,{modelValue:te.value,"onUpdate:modelValue":a[33]||(a[33]=e=>te.value=e),onChange:l=>De(e.id,{expiryDate:te.value,docTitle:Y.value}),type:"Date",placeholder:"Document expiry date"},null,8,["modelValue","onChange"])])),_:2},1024)])),_:2},1024)])):y("",!0)],64)):"status"===l.key?(d(),u(C,{key:1},[e.worker?(d(),u("div",wm,[v("label",xm,[w(v("input",{id:"navbar-night-toggle--daynight","onUpdate:modelValue":l=>e.status=l,onClick:l=>De(e.id,{status:!e.status,docTitle:e.documentTitle}),"data-cy":"dark-mode-toggle",type:"checkbox"},null,8,km),[[J,e.status]]),Cm])])):(d(),u("div",Sm,[v("label",Am,[w(v("input",{style:{"background-color":"var(info) !important"},disabled:"","onUpdate:modelValue":l=>e.status=l,onClick:l=>De(e.id,{status:!e.status,docTitle:e.documentTitle}),"data-cy":"dark-mode-toggle",type:"checkbox"},null,8,Nm),[[J,e.status]]),Im])]))],64)):"actions"===l.key?(d(),u(C,{key:2},[e.document?(d(),u("div",Vm,[e.document.includes(".pdf")?(d(),u("div",Tm,[v("img",{onClick:()=>{O.value=e.document,re.value=e.id,de.value=e.expiryDateRequired,R.value=!0,Y.value=e.documentTitle,te.value=e.expiryDate},class:"image-icon",src:Ye,alt:"",style:{"margin-right":"10px",width:"34px",height:"34px",cursor:"pointer","border-radius":"50%"}},null,8,Dm)])):(d(),u("div",jm,[v("div",Rm,[v("i",{onClick:()=>{O.value=e.document,R.value=!0,re.value=e.id,de.value=e.expiryDateRequired,Y.value=e.documentTitle,te.value=e.expiryDate},class:"fas fa-file-image",style:{"font-size":"18px",cursor:"pointer",color:"var(--primary)"}},null,8,Om)])]))])):y("",!0),e.loading?y("",!0):(d(),h(j,{key:1,size:"small",color:"info",style:{cursor:"pointer"},rounded:"",onClick:()=>(e=>{q.value=e,M.value&&M.value.click()})(e)},{default:p((()=>[Em])),_:2},1032,["onClick"])),e.loading?(d(),h(ce,{key:2,color:"primary",outlined:"",loading:"",circle:"",icon:"feather:plus"})):y("",!0),e.worker?(d(),h(j,{key:3,size:"small",color:"danger",class:"ml-3",style:{cursor:"pointer"},rounded:"",onClick:l=>(e=>{H.value=1,L.value=e.id,me.value=e.documentTitle,Ce.value={title:"Are you sure?",subtitle:"You will not be able to recover this Worker Document!",btntext:"Yes, Delete it",isSweetAlertOpen:!0}})(e)},{default:p((()=>[Um])),_:2},1032,["onClick"])):y("",!0)],64)):y("",!0)])),_:1},8,["data"])])):(d(),u("div",Lm,[m(c,{color:"solid",label:"No Documents Are Available!",rounded:""})]))])])])])]),v("div",zm,[v("div",Mm,[v("i",{class:"fas fa-expand-arrows-alt expand-arrow",style:{color:"var(--primary-light-12)",cursor:"pointer",position:"absolute",top:"10px",right:"10px"},"aria-hidden":"true",onClick:a[34]||(a[34]=e=>P.value="comments")}),v("div",qm,[m(ze,{id:f(_).params.id},null,8,["id"])])]),Pm,v("div",$m,[v("i",{class:"fas fa-expand-arrows-alt expand-arrow",style:{color:"var(--primary-light-12)",cursor:"pointer",position:"absolute",top:"10px",right:"10px"},"aria-hidden":"true",onClick:a[35]||(a[35]=e=>P.value="licence")}),v("div",Fm,[Bm,v("div",Wm,[v("div",Ym,[v("div",Hm,[v("div",Km,[v("div",Gm,[m(Ke,{style:{width:"max-content"},siaCard:Ae.value.default_sia},null,8,["siaCard"])])])])])])])])])])],512),[[z,"personal"===P.value]]),w(v("div",Xm,[m(Xe,{id:f(_).params.id},null,8,["id"])],512),[[z,"licence"==P.value]]),"veriffTab"===P.value?(d(),u("div",Jm,[v("div",Zm,[Qm,v("div",ep,[lp,ap,m(Je,{color:"info",onClick:a[36]||(a[36]=()=>{pe.value=!pe.value}),icon:"fas fa-link",elevated:""},{default:p((()=>[k(" Create link ")])),_:1})])]),m(Qe,{id:f(_).params.id},null,8,["id"])])):y("",!0),"reference"===P.value?(d(),u("div",tp,[m(ll,{id:f(_).params.id,worker:Ae.value},null,8,["id","worker"])])):y("",!0),"activity"===P.value?(d(),u("div",sp,[m(al,{id:f(_).params.id,worker:Ae.value},null,8,["id","worker"])])):y("",!0),"comments"===P.value?(d(),u("div",ip,[m(ze,{id:f(_).params.id},null,8,["id"])])):y("",!0),"questions"===P.value?(d(),u("div",np,[m(dl,{type:we.value,memberId:f(_).params.id},null,8,["type","memberId"])])):y("",!0),"warnings"===P.value?(d(),u("div",op,[m(o,null,{default:p((()=>[m(n,null,{default:p((()=>[m(ul,{style:{"border-radius":"15px !important","background-color":"#f5f5f5 !important",border:"none !important",padding:"16px 20px !important"},onBlur:sl,modelValue:Ae.value.warningMessage,"onUpdate:modelValue":a[37]||(a[37]=e=>Ae.value.warningMessage=e),class:"textarea is-warning-focus",rows:"2",placeholder:"Enter warning note..."},null,8,["modelValue"])])),_:1})])),_:1})])):y("",!0),"timeSheet"===P.value?(d(),u("div",rp,[m(ml,{id:f(_).params.id,worker:Ae.value},null,8,["id","worker"])])):y("",!0),"worker-rota"===P.value?(d(),u("div",cp,[m(pl,{workerId:f(_).params.id},null,8,["workerId"])])):y("",!0)])])])]),m(fl,{is:"form",open:_e.value,title:Y.value,size:"big",actions:"right",onClose:a[38]||(a[38]=e=>_e.value=!1)},{content:p((()=>[m(vl)])),action:p((()=>[m(Je,{color:"primary",onClick:nl,raised:""},{default:p((()=>[k("Print")])),_:1})])),_:1},8,["open","title"]),ve.value?(d(),h(yl,{key:0,firstName:Ae.value.firstName,lastName:Ae.value.lastName,openSanctionModal:ve.value,"onUpdate:openSanctionModal":a[39]||(a[39]=e=>ve.value=e)},null,8,["firstName","lastName","openSanctionModal"])):y("",!0),m(fl,{is:"form",open:R.value,title:Y.value,size:"big",actions:"right",onClose:a[43]||(a[43]=e=>R.value=!1)},{content:p((()=>[v("div",dp,[de.value?(d(),h(o,{key:0,class:E("SIA Card"==Y.value?"column is-6":"column is-12")},{default:p((()=>[m(G,null,{default:p((()=>[k("Document expiry date :")])),_:1}),m(n,null,{default:p((()=>[m(oe,{modelValue:te.value,"onUpdate:modelValue":a[40]||(a[40]=e=>te.value=e),onChange:a[41]||(a[41]=e=>De(re.value,{expiryDate:te.value,docTitle:Y.value})),type:"Date",placeholder:"Document expiry date"},null,8,["modelValue"])])),_:1})])),_:1},8,["class"])):y("",!0),"SIA Card"==Y.value?(d(),u("div",up,[mp,m(o,{addons:"",class:"mt-1"},{default:p((()=>[m(n,{expanded:""},{default:p((()=>[m(hl,{modelValue:ke.value,"onUpdate:modelValue":a[42]||(a[42]=e=>ke.value=e),required:"",class:"input",id:"siacard",options:{mask:"0000000000000000"},placeholder:"SIA Number"},null,8,["modelValue"])])),_:1}),m(n,null,{default:p((()=>[m(Je,{onClick:rl,color:"primary",rounded:""},{default:p((()=>[k(" Verify ")])),_:1})])),_:1})])),_:1}),v("label",{class:E([Ae.value.default_sia&&Ae.value.default_sia.status?"light-text":"danger-text","mb-2"])},"Status: "+A(Ae.value.default_sia&&Ae.value.default_sia.status?"Approved":"Un-approved"),3)])):y("",!0)]),v("div",pp,[O.value.includes(".pdf")?(d(),u("iframe",{key:0,src:O.value,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,vp)):(d(),u("img",{key:1,src:O.value,alt:""},null,8,fp))])])),cancel:p((()=>[m(Je,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:p((()=>[k("Close")])),_:1})])),_:1},8,["open","title"]),pe.value?(d(),h(gl,{key:1,veriffModal:pe.value,id:Ae.value.id,email:Ae.value.emailAddress,phone:Ae.value.phoneNumber,"onUpdate:modalHandler":a[44]||(a[44]=e=>pe.value=e)},null,8,["veriffModal","id","email","phone"])):y("",!0),$.value?(d(),h(bl,{key:2,EditCompanyModalOpen:$.value,id:W.value,"onUpdate:modalHandler":a[45]||(a[45]=e=>$.value=e),"onUpdate:OnSuccess":Le},null,8,["EditCompanyModalOpen","id"])):y("",!0),Ce.value.isSweetAlertOpen?(d(),h(_l,{key:3,isSweetAlertOpen:Ce.value.isSweetAlertOpen,title:Ce.value.title,subtitle:Ce.value.subtitle,btntext:Ce.value.btntext,onConfirm:Pe,onCancel:()=>Ce.value.isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):y("",!0)],64)}}}),hp=D(yp,[["__scopeId","data-v-80c29675"]]),gp={class:""},bp=v("div",{class:"lifestyle-dashboard-bg"},null,-1),_p=i({__name:"[id]",setup:e=>(Ge().setPageTitle("Worker Info"),Z({title:"Workers - Arez"}),(e,l)=>{const a=hp;return d(),u("div",gp,[(d(),h(Q,{to:"[data-teleport-bg]"},[bp])),m(a)])})});export{_p as default};
