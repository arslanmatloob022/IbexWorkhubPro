import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-1b39e94b.js";import{F as t}from"./FullCalendar-5e3a85da.js";import{i as a}from"./index-55eb4335.js";import{u as s}from"./useAPI-ced16a91.js";import{u as r}from"./useNotyf-e356c569.js";import{u as o}from"./userSession-c7ee6e07.js";import{e as i,x as l,r as n,o as c,B as d,C as u,D as p,E as v,F as m,T as k,l as f,N as w,M as g,U as y}from"./index-e91e92d7.js";const j={class:"lifestyle-dashboard lifestyle-dashboard-v3"},D={class:"columns is-multiline"},h={class:"column is-12"},b=["onClick"],_={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},T={style:{"margin-top":"8px","padding-right":"10px",color:"#f1f1f1"}},x=i({__name:"WorkerCalendar",props:{projectID:{default:""},workerId:{default:""}},setup(i){const x=i,I=o(),C=r(),M=s();l();const W=n(!1);n({});const A=n([]),F=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1}),N=n({}),H=n(!1),L=n({}),P=n([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),S=n([]),$=n([]),U=n([]);n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"});const Z=n({plugins:[a],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[],resourceClick:function(e){console.log("Additional Data:")}});return c((async()=>{await(async()=>{try{H.value=!0;const e=await M.get(`/api/users/${x.workerId?x.workerId:I.user.id}/`);F.value=e.data,H.value=!1}catch(e){console.log(e)}})(),await(async()=>{try{const e=await M.get(`/api/task/${x.workerId?x.workerId:I.user.id}/worker-tasks/`);P.value=e.data,console.log("worker tasks",P.value)}catch(e){P.value=[]}})(),(async(e=!1)=>{try{const t=await M.get(`/api/task/worker-today/${x.workerId?x.workerId:I.user.id}/`);N.value=t.data,e&&C.green("Tasks list Refreshed")}catch(t){console.log(t)}})(),A.value=P.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,status:e.status,unit:e.unit,note:e.note,project:e.project}))),U.value=P.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status}))),S.value=U.value,$.value=A.value,Z.value={...Z.value,resources:S.value,events:$.value},console.log("tasks",Z.value.events,"resources",Z.value.resources)})),(a,s)=>{const r=e;return d(),u(y,null,[p("div",j,[p("div",D,[p("div",h,[v(f(t),{options:f(Z)},{eventContent:m((e=>[p("div",{onClick:t=>{return a=e.event.extendedProps,console.log("detail",a),L.value=a,void(W.value=!0);var a},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},[p("p",_,k(e.event.title),1),p("div",null,[p("p",T,k(new Date(e.event.start).toDateString())+" to "+k(new Date(e.event.end).toDateString()),1)])],8,b)])),_:1},8,["options"])])])]),f(W)?(d(),w(r,{key:0,taskDetailModal:f(W),taskData:f(L),"onUpdate:modalHandler":s[0]||(s[0]=e=>W.value=!1)},null,8,["taskDetailModal","taskData"])):g("",!0)],64)}}});export{x as _};
