import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-1cd693c6.js";import{_ as a}from"./AddUpdateUser-8d6b4152.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-7517b3bd.js";import{_ as t}from"./JobTodos.vue_vue_type_style_index_0_lang-2fab0078.js";import{_ as l}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-c2b9b4b2.js";import{_ as i}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-11f2dc4d.js";import{_ as r,a as o}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-61717480.js";import{_ as n}from"./UserProfileInfo-c6d286d3.js";import{_ as d}from"./VAvatar.vue_vue_type_style_index_0_lang-942b1a60.js";import{f as c,b as u,y as p,r as v,x as m,o as y,C as _,D as k,E as b,F as f,m as w,K as g,U as h,I as j,H as x,N as C,G as T,O as D,V as I,J as M}from"./index-7009f34f.js";import{F as K}from"./FullCalendar-877ade42.js";import{i as A}from"./index-08833a75.js";import{u as U}from"./useAPI-f33e336a.js";import{u as P}from"./useNotyf-94f82190.js";const H={class:"lifestyle-dashboard lifestyle-dashboard-v3"},O={class:"illustration-header"},V={class:"p-4"},W={class:"header-meta"},F={class:"summary-stats"},J={class:"summary-stat"},L=b("span",null,"Status",-1),N={class:"summary-stat"},$=b("span",null,"Email",-1),S={class:"summary-stat h-hidden-tablet-p"},q=b("span",null,"Mail notify ",-1),z={class:"columns is-multiline"},E={class:"tabs-wrapper column is-12"},G={class:"tabs-inner"},R={class:"tabs is-toggle"},Z=[b("span",null,"Profile",-1)],X=[b("span",null,"Tasks",-1)],Y=[b("span",null,"Todos",-1)],B=[b("span",null,"Activities",-1)],Q=b("li",{class:"tab-naver"},null,-1),ee={key:0,class:"columns is-multiline"},ae={key:1,class:"columns is-multiline"},se={class:"tabs-wrapper"},te={class:"tabs-inner"},le={class:"tabs is-boxed"},ie=[b("span",null,"Calendar View",-1)],re=[b("span",null,"Cards View",-1)],oe=[b("span",null,"Today Tasks",-1)],ne=[b("span",null,"Chronic View",-1)],de=b("li",{class:"tab-naver"},null,-1),ce={key:0,class:"column is-12"},ue={key:1,class:"column is-12"},pe={key:2,class:"column is-12"},ve=["onClick"],me={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},ye={style:{"padding-right":"10px",color:"#f1f1f1"}},_e={key:3,class:"column is-12"},ke={key:2,class:"columns is-multiline"},be={class:"column is-12"},fe={key:3,class:"columns is-multiline"},we={class:"column is-12"},ge=c({__name:"IbexWorkerProfile",setup(c){const ge=u(),he=P(),je=U(),xe=p(),Ce=v([]);m();const Te=v(""),De=v(!1),Ie=v("calendar"),Me=v("profile"),Ke=v(""),Ae=v(!1),Ue=v({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});v(!1),v("all"),v("");const Pe=v(!1),He=v([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),Oe=v([]),Ve=v([]),We=v([]),Fe=v({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),Je=v({plugins:[A],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),Le=async()=>{try{Pe.value=!0;const e=await je.get(`/api/users/${xe.params.id?xe.params.id:ge.user.id}/`);Ue.value=e.data,Pe.value=!1}catch(e){console.log(e)}},Ne=v({}),$e=v(!1),Se=v({});return y((async()=>{await Le(),await(async()=>{try{const e=await je.get(`/api/task/${xe.params.id?xe.params.id:ge.user.id}/worker-tasks/`);He.value=e.data,console.log("worker tasks",He.value)}catch(e){He.value=[]}})(),(async(e=!1)=>{try{const a=await je.get(`/api/task/worker-today/${xe.params.id?xe.params.id:ge.user.id}/`);Se.value=a.data,e&&he.green("Tasks list Refreshed")}catch(a){console.log(a)}})(),Ce.value=He.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:Fe[e.status],status:e.status,project:e.project}))),We.value=He.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:Fe[e.project.status]}))),Oe.value=We.value,Ve.value=Ce.value,Je.value={...Je.value,resources:Oe.value,events:Ve.value},console.log("tasks",Je.value.events,"resources",Je.value.resources)})),(c,u)=>{const p=d,v=n,m=r,y=o,A=i,U=l,P=t,ge=s,he=a,je=e;return _(),k(I,null,[b("div",H,[b("div",O,[b("div",V,[f(p,{size:"xl",squared:"",picture:w(Ue).avatar,alt:""},null,8,["picture"])]),b("div",W,[b("h3",null,[g(h(w(Ue)?.username)+" ",1),b("i",{onClick:u[0]||(u[0]=e=>((e="")=>{Te.value=e,De.value=!0})(w(Ue).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),b("div",F,[b("div",J,[L,b("span",null,h(w(Ue)?.is_active?"Active":" In-Active"),1)]),b("div",N,[$,b("span",null,h(w(Ue)?.email),1)]),b("div",S,[q,b("span",null,h(w(Ue).is_sentMail?"On":"Off"),1)])])])]),b("div",z,[b("div",E,[b("div",G,[b("div",R,[b("ul",null,[b("li",{class:j(["profile"===w(Me)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[1]||(u[1]=x(M((e=>Me.value="profile"),["prevent"]),["space"])),onClick:u[2]||(u[2]=e=>Me.value="profile")},Z,32)],2),b("li",{class:j(["tasks"===w(Me)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[3]||(u[3]=x(M((e=>Me.value="tasks"),["prevent"]),["space"])),onClick:u[4]||(u[4]=e=>Me.value="tasks")},X,32)],2),b("li",{class:j(["todos"===w(Me)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[5]||(u[5]=x(M((e=>Me.value="todos"),["prevent"]),["space"])),onClick:u[6]||(u[6]=e=>Me.value="todos")},Y,32)],2),b("li",{class:j(["activities"===w(Me)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[7]||(u[7]=x(M((e=>Me.value="activities"),["prevent"]),["space"])),onClick:u[8]||(u[8]=e=>Me.value="activities")},B,32)],2),Q])])])])]),"profile"==w(Me)?(_(),k("div",ee,[f(v,{"user-data":w(Ue)},null,8,["user-data"])])):C("",!0),"tasks"==w(Me)?(_(),k("div",ae,[b("div",se,[b("div",te,[b("div",le,[b("ul",null,[b("li",{class:j(["calendar"===w(Ie)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[9]||(u[9]=x(M((e=>Ie.value="calendar"),["prevent"]),["space"])),onClick:u[10]||(u[10]=e=>Ie.value="calendar")},ie,32)],2),b("li",{class:j(["cards"===w(Ie)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[11]||(u[11]=x(M((e=>Ie.value="cards"),["prevent"]),["space"])),onClick:u[12]||(u[12]=e=>Ie.value="cards")},re,32)],2),b("li",{class:j(["today"===w(Ie)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[13]||(u[13]=x(M((e=>Ie.value="today"),["prevent"]),["space"])),onClick:u[14]||(u[14]=e=>Ie.value="today")},oe,32)],2),b("li",{class:j(["chronic"===w(Ie)&&"is-active"])},[b("a",{tabindex:"0",role:"button",onKeydown:u[15]||(u[15]=x(M((e=>Ie.value="chronic"),["prevent"]),["space"])),onClick:u[16]||(u[16]=e=>Ie.value="chronic")},ne,32)],2),de])])])]),"chronic"==w(Ie)?(_(),k("div",ce,[f(m,{userId:w(xe).params.id},null,8,["userId"])])):C("",!0),"cards"==w(Ie)?(_(),k("div",ue,[f(y,{workerId:w(xe).params.id},null,8,["workerId"])])):C("",!0),"calendar"==w(Ie)?(_(),k("div",pe,[f(w(K),{options:w(Je)},{eventContent:T((e=>[b("div",{onClick:a=>{return s=e.event.extendedProps,Ne.value=s,console.log("dataa",s),void($e.value=!0);var s},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},[b("p",me,h(e.event.title),1),b("p",ye,h(new Date(e.event.start).toDateString())+" to "+h(new Date(e.event.end).toDateString()),1)],8,ve)])),_:1},8,["options"])])):C("",!0),"today"==w(Ie)?(_(),k("div",_e,[f(A,{workerId:w(xe).params.id},null,8,["workerId"])])):C("",!0)])):C("",!0),"activities"==w(Me)?(_(),k("div",ke,[b("div",be,[f(U,{user:w(xe).params.id},null,8,["user"])])])):C("",!0),"todos"==w(Me)?(_(),k("div",fe,[b("div",we,[f(P,{user:w(xe).params.id},null,8,["user"])])])):C("",!0),w(Ae)?(_(),D(ge,{key:4,isModalOpen:w(Ae),userId:w(Ke),"onUpdate:closeModalHandler":u[17]||(u[17]=e=>Ae.value=!1)},null,8,["isModalOpen","userId"])):C("",!0),w(De)?(_(),D(he,{key:5,isModalOpen:w(De),userId:w(Te),userRole:"worker","onUpdate:closeModalHandler":u[18]||(u[18]=e=>De.value=!1),"onUpdate:actionUpdateHandler":Le},null,8,["isModalOpen","userId"])):C("",!0)]),w($e)?(_(),D(je,{key:0,taskDetailModal:w($e),taskData:w(Ne),"onUpdate:modalHandler":u[19]||(u[19]=e=>$e.value=!1)},null,8,["taskDetailModal","taskData"])):C("",!0)],64)}}});export{ge as _};
