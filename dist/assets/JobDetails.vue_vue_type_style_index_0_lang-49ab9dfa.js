import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-4fa3e3b1.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-40bbbcf4.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-d0db91c2.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-6b5de0e3.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-ddc2b38a.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-915151fa.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-0800893a.js";import{_ as c}from"./VInput.vue_vue_type_script_setup_true_lang-056f7702.js";import{_ as u}from"./VControl-80863ea8.js";import{f as d,b as r,r as p,w as m,$ as v,o as f,av as h,C as _,D as y,E as g,F as b,G as k,K as w,U as x,L as j,X as C,N as V,aS as T,m as S,O as U,V as I,W as A,P as F,al as D,Q as M,R as P,S as O,B as q,J as E,I as $,x as R,H as N,k as H,aB as B,Z as z,s as J,y as K}from"./index-06a6340e.js";import{_ as G,a as W}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-72ff1024.js";import{u as Q}from"./useNotyf-c9f6b0c8.js";import{_ as Y}from"./ExcelFileEditor-848a1dde.js";import{f as X,a as ee,C as le,d as ae}from"./useSupportElement-a352115c.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang-59a6261b.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-7677c52d.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-6e6eb18d.js";import{_ as ne,a as oe}from"./ProjectFiles-f3ee3bd4.js";import{u as ce,_ as ue,a as de}from"./groupedCircleCharts-7723af6d.js";import{b as re,u as pe,a as me,c as ve,_ as fe}from"./groupedRadialCharts-eb5377d6.js";import{_ as he}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-560b39d2.js";import{A as _e}from"./vue3-apexcharts.common-d9220ed8.js";import{u as ye}from"./salesSparksChart-86e493fb.js";import{u as ge}from"./revenueAreaChart-1ff6e32d.js";import{_ as be}from"./VAvatar.vue_vue_type_style_index_0_lang-7635cdbe.js";import{h as ke}from"./moment-bad41465.js";import{_ as we}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-95fb39f5.js";import{p as xe}from"./index-c1fc2d09.js";import{a as je}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-b3f55f52.js";import{_ as Ce}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-eb48c931.js";import{_ as Ve}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-df82a9cd.js";import{o as Te}from"./via-placeholder-24645670.js";import{_ as Se}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-af8e572e.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-ac12b538.js";import{_ as Ie}from"./VDropdown.vue_vue_type_style_index_0_lang-603277da.js";import{_ as Ae}from"./VPlyr.vue_vue_type_style_index_0_lang-46b93785.js";import{_ as Fe}from"./VIconBox.vue_vue_type_style_index_0_lang-f04a6af5.js";import{f as De}from"./index-5fa9b154.js";import{_ as Me}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-99bacdb4.js";import{_ as Pe}from"./JobTodos.vue_vue_type_style_index_0_lang-7192b96f.js";import{_ as Oe}from"./UserCardDropdown-c8db6320.js";import{u as qe}from"./useThemeColors-68cf17bb.js";import{_ as Ee}from"./VTag.vue_vue_type_style_index_0_lang-b57192d1.js";import{_ as $e}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-fb6e6f5e.js";const Le=e=>(M("data-v-6b746c41"),e=e(),P(),e),Re={class:"column is-12"},Ne={class:"list-flex-toolbar is-reversed"},He={class:"columns is-multiline"},Be={key:0,class:"column is-12 card p-4 curved mb-2"},ze={class:"columns is-multiline"},Je={class:"column is-10"},Ke={class:"column is-2"},Ge=Le((()=>g("img",{class:"light-image",src:G,alt:""},null,-1))),We=Le((()=>g("img",{class:"dark-image",src:W,alt:""},null,-1))),Ze={key:0,class:"column is-12 card p-4 curved mb-2"},Qe={class:"columns is-multiline"},Ye={class:"column is-10"},Xe={class:"column is-2"},el={class:"is-flex space-between mb-4 bottom-border"},ll={class:"title is-5 m-0"},al={class:"content"},tl={class:"is-flex"},sl={key:0,class:"columns is-multiline"},il={class:"column is-6"},nl={class:"column is-2"},ol={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},dl={class:"column is-2"},rl={class:"column is-2"},pl={class:"column is-2"},ml={class:"column is-2"},vl={class:"column is-2"},fl={class:"is-flex columns is-multiline"},hl=d({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const d=e;r();const M=Z(),P=Q(),O=p(!1),q={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},E=p(!1),$=p(!1),L=p(!1),R=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),N=p(""),H=p(""),B=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),z=p({title:"",is_template:!1,object:d.objectId??"",description:""}),J=p({title:"",is_template:!1,description:""}),K=async()=>{try{const e=await M.get(`/api/calculation-section/?object=${d.objectId??""}&user_id=${d.userId??""}&is_template=${d.fetchTemplates??""}`);R.value=e.data}catch(e){console.error(e)}finally{O.value=!1}},G=async()=>{try{const e=z.value;await M.post("/api/calculation-section/",e);P.success("Section created successfully!"),K()}catch(e){console.error(e)}finally{O.value=!1}};m((()=>B.value.width),(()=>{let e=0;e=B.value.height*B.value.width,B.value.item_area=e.toFixed(2)})),m((()=>B.value.item_unit_price),(()=>{let e=0;e=B.value.item_area*B.value.item_unit_price,B.value.item_total_price=e.toFixed(2)})),m((()=>B.value.quantity),(()=>{let e=0;e=B.value.item_total_price*B.value.quantity,B.value.grand_total_price=e.toFixed(2)}));const W=async()=>{try{const e=B.value;e.section=N.value;await M.post("/api/calculation-section-items/",e);P.success("Section created successfully!"),K()}catch(e){console.error(e)}finally{O.value=!1}},Y=v((()=>{if(H.value){const e=new RegExp(H.value,"i");return R.value.filter((l=>l.title?.match(e)))}return R.value})),ee=async e=>{try{await M.delete(`/api/calculation-section/${e}/`),P.success("Section deleted successfully!"),K()}catch(l){console.error(l),P.error("Failed to delete sheet.")}};return f((async()=>{await K(),await K()})),(e,d)=>{const r=F,p=D,m=u,v=c,f=o,M=n,P=i,O=s,R=t,K=l,Z=a,Q=h("tooltip");return _(),y("div",Re,[g("div",Ne,[b(p,null,{default:k((()=>[b(r,{icon:$.value?"fas fa-window-close":"fas fa-plus",color:$.value?"warning":"primary",class:"ml-2",raised:"",onClick:d[0]||(d[0]=e=>$.value=!$.value)},{default:k((()=>[w(x($.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:d[1]||(d[1]=e=>$.value=!$.value)},{default:k((()=>[w("Import")])),_:1})])),_:1}),g("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":d[2]||(d[2]=e=>H.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,H.value]])])),_:1})])]),g("div",He,[b(T,{name:"translate-page-y"},{default:k((()=>[$.value?(_(),y("div",Be,[g("div",ze,[g("div",Je,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":d[3]||(d[3]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(M,{modelValue:z.value.description,"onUpdate:modelValue":d[4]||(d[4]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ke,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(P,{modelValue:z.value.is_template,"onUpdate:modelValue":d[5]||(d[5]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),S(Y).length?V("",!0):(_(),U(O,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[Ge,We])),_:1})),b(T,{name:"translate-page-y"},{default:k((()=>[L.value?(_(),y("div",Ze,[g("div",Qe,[g("div",Ye,[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":d[6]||(d[6]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(M,{modelValue:J.value.description,"onUpdate:modelValue":d[7]||(d[7]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Xe,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:G},{default:k((()=>[w(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(P,{modelValue:J.value.is_template,"onUpdate:modelValue":d[8]||(d[8]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):V("",!0)])),_:1}),b(T,{name:"from-bottom"},{default:k((()=>[S(Y).length?(_(!0),y(I,{key:0},A(S(Y),((e,l)=>(_(),y("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[g("div",el,[g("div",null,[g("h4",ll,x(e.title),1),g("div",al,[g("p",null,x(S(X)(e.created_at)),1)])]),g("div",tl,[b(R,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),j(b(R,{icon:"fas fa-plus",color:E.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{N.value=e,E.value=!E.value,0==E.value&&(B.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),j(b(R,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(R,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),E.value?(_(),y("div",sl,[g("div",il,[b(f,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.title,"onUpdate:modelValue":d[9]||(d[9]=e=>B.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",nl,[b(f,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.height,"onUpdate:modelValue":d[10]||(d[10]=e=>B.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ol,[b(f,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.width,"onUpdate:modelValue":d[11]||(d[11]=e=>B.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",cl,[b(f,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_area,"onUpdate:modelValue":d[12]||(d[12]=e=>B.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ul,[b(f,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.unit,"onUpdate:modelValue":d[13]||(d[13]=e=>B.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",dl,[b(f,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_unit_price,"onUpdate:modelValue":d[14]||(d[14]=e=>B.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",rl,[b(f,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.item_total_price,"onUpdate:modelValue":d[15]||(d[15]=e=>B.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",pl,[b(f,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.quantity,"onUpdate:modelValue":d[16]||(d[16]=e=>B.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ml,[b(f,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:B.value.grand_total_price,"onUpdate:modelValue":d[17]||(d[17]=e=>B.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",vl,[b(r,{light:"",fullwidth:"",onClick:W,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[w("Add Item")])),_:1})])])):V("",!0),g("div",fl,[e.items.length?(_(),U(Z,{key:0,class:"column is-12",data:e.items,columns:q,compact:""},{body:k((()=>[b(T,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(_(!0),y(I,null,A(e.items,(e=>(_(),y("div",{key:e.id,class:"flex-table-item"},[b(K,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,null,{default:k((()=>[b(f,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(K,{column:{align:"end"}},{default:k((()=>[b(R,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(R,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):V("",!0)])])))),128)):V("",!0)])),_:1})])])}}}),_l=O(hl,[["__scopeId","data-v-6b746c41"]]),yl=e=>(M("data-v-ce90a5fa"),e=e(),P(),e),gl={key:1},bl={class:"columns is-multiline"},kl={class:"list-flex-toolbar is-reversed column is-12"},wl={class:"multiselect-single-label"},xl=["src"],jl=["src"],Cl={class:"is-flex"},Vl={class:"card p-4 curved is-flex space-between"},Tl={class:"subtitle is-5 m-0"},Sl={class:"content"},Ul={class:"is-flex"},Il={key:1},Al=yl((()=>g("h1",{class:"title is-4"},"No File Uploaded",-1))),Fl=[Al],Dl={class:"modal-form columns is-multiline"},Ml={class:"file has-name"},Pl={class:"file-label"},Ol=yl((()=>g("span",{class:"file-cta"},[g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})]),g("span",{class:"file-label"}," Choose a file… ")],-1))),ql={class:"file-name light-text"},El=d({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;r(),p(null);const a=Z(),s=Q(),i=p(!1);p([[""]]);const n=p([]),d=p([]),h=p(""),T=p(!1);p("");const M=p("");p("");const P=p(!1),O=p(0),$=p({file:"",title:"",object:l.objectId}),L=e=>{let l=e.target.files[0];$.value.file=l,M.value=l.name,$.value.title=l.name},R=p(""),N=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),H=async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/?object=${l.objectId}`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}},B=(e="")=>{O.value=e,P.value=!0},z=p(!1),J=async()=>{try{z.value=!0;const e=ee($.value,[""]);await a.post("/api/excel-files/upload-excel/",e);H(),s.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,T.value=!1}};m((()=>R.value),(e=>{e&&(async e=>{try{z.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),s.success("Sheet create successfully"),H()}catch(l){console.error(l)}finally{z.value=!1,T.value=!1}})(e)}));p("excel");const K=v((()=>{if(h.value){const e=new RegExp(h.value,"i");return n.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return n.value.filter((e=>0==e.is_template))}));return v((()=>{if(h.value){const e=new RegExp(h.value,"i");return d.value.filter((l=>l.title?.match(e)))}return d.value})),f((async()=>{l.fetchAll&&await H(),l.userId&&(async()=>{try{i.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);n.value=e.data}catch(e){console.error(e)}finally{i.value=!1}})(),(async()=>{try{i.value=!0;const e=await a.get("/api/excel-files/templates/");d.value=e.data,N.value=d.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{i.value=!1}})(),await H()})),(e,n)=>{const d=ie,r=q("Multiselect"),p=u,m=o,v=F,f=D,z=t,G=Y,W=se,Z=c,Q=te;return i.value?(_(),U(d,{key:0})):(_(),y("div",gl,[g("div",bl,[g("div",kl,[b(f,null,{default:k((()=>[b(m,{style:{width:"260px"}},{default:k((({id:e})=>[b(p,null,{default:k((()=>[b(r,{modelValue:R.value,"onUpdate:modelValue":n[0]||(n[0]=e=>R.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:N.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[g("div",wl,[g("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,xl),w(" "+x(e.name),1)])])),option:k((({option:e})=>[g("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,jl),w(" "+x(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(v,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:n[1]||(n[1]=e=>B())},{default:k((()=>[w("New Sheet")])),_:1}),b(v,{icon:"fas fa-upload",raised:"",light:"",onClick:n[2]||(n[2]=e=>T.value=!T.value),outlined:"",color:"primary"},{default:k((()=>[w(" File ")])),_:1})])),_:1}),g("div",Cl,[b(p,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>h.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,h.value]])])),_:1})])]),S(K).length?(_(!0),y(I,{key:0},A(S(K),((e,l)=>(_(),y("div",{class:"column is-6",key:e.id},[g("div",Vl,[g("div",null,[g("h4",Tl,x(e.title),1),g("div",Sl,[g("p",null,x(S(X)(e.created_at)),1)])]),g("div",Ul,[b(z,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>B(e.id),"has-background":""},null,8,["onClick"]),b(z,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),s.success("Sheet deleted successfully!"),H()}catch(l){console.error(l),s.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(_(),y("div",Il,Fl))]),P.value?(_(),U(G,{key:0,class:"fullscreen","excel-file-modal":P.value,fileId:O.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":n[4]||(n[4]=e=>{P.value=!1,H()})},null,8,["excel-file-modal","fileId","object-id"])):V("",!0),b(Q,{is:"form",open:T.value,title:"Upload Task File",size:"medium",actions:"right",onClose:n[7]||(n[7]=e=>T.value=!1),onSubmit:E(J,["prevent"])},{content:k((()=>[g("div",Dl,[b(m,{class:"column is-12"},{default:k((()=>[b(W,null,{default:k((()=>[w("File Title")])),_:1}),b(p,null,{default:k((()=>[b(Z,{modelValue:$.value.title,"onUpdate:modelValue":n[5]||(n[5]=e=>$.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(m,{class:"column is-12",grouped:""},{default:k((()=>[b(p,null,{default:k((()=>[g("div",Ml,[g("label",Pl,[g("input",{onChange:L,class:"file-input",type:"file",name:"file",required:""},null,32),Ol,g("span",ql,x(M.value?M.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(v,{onClick:n[6]||(n[6]=e=>T.value=!1),raised:""},{default:k((()=>[w("Close")])),_:1})])),action:k((()=>[b(v,{type:"submit",color:"primary",raised:""},{default:k((()=>[w("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),$l=O(El,[["__scopeId","data-v-ce90a5fa"]]),Ll={class:"columns is-multiline"},Rl={class:"column is-3"},Nl={class:"column is-3"},Hl={class:"column is-3"},Bl={class:"column is-3"},zl={class:"column is-6"},Jl={class:"column is-6"},Kl={class:"column is-6"},Gl={class:"column is-6"},Wl={class:"column is-6"},Zl={class:"column is-6"},Ql=d({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=ye(),{revenueOptions:i}=ge(),{lineStatsChartOptions:n}=re(),{flexRadialChartCircleOptions:o}=pe(),{flexRadialChartStripesOptions:c}=me(),{widgetGaugeGroup1Options:u,widgetGaugeGroup2Options:d,widgetGaugeGroup3Options:r}=ve(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ce();return(e,f)=>{const h=he,w=fe,x=ue,j=de;return _(),y("div",Ll,[g("div",Rl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark1",height:S(l).chart.height,type:S(l).chart.type,series:S(l).series,options:S(l)},null,8,["height","type","series","options"])])),_:1})]),g("div",Nl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark2",height:S(a).chart.height,type:S(a).chart.type,series:S(a).series,options:S(a)},null,8,["height","type","series","options"])])),_:1})]),g("div",Hl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark3",height:S(t).chart.height,type:S(t).chart.type,series:S(t).series,options:S(t)},null,8,["height","type","series","options"])])),_:1})]),g("div",Bl,[b(h,{straight:""},{default:k((()=>[b(S(_e),{id:"widget-spark4",height:S(s).chart.height,type:S(s).chart.type,series:S(s).series,options:S(s)},null,8,["height","type","series","options"])])),_:1})]),g("div",zl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(S(_e),{id:"line-stats-widget-chart",height:S(n).chart.height,type:S(n).chart.type,series:S(n).series,options:S(n)},null,8,["height","type","series","options"])])),_:1})]),g("div",Jl,[b(w,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(S(_e),{id:"line-stats-area-chart",height:S(i).chart.height,type:S(i).chart.type,series:S(i).series,options:S(i)},null,8,["height","type","series","options"])])),_:1})]),g("div",Kl,[b(x,{title:"Sales Revenue",straight:""},{default:k((()=>[b(S(_e),{id:"flex-stat-circle",height:S(o).chart.height,type:S(o).chart.type,series:S(o).series,options:S(o)},null,8,["height","type","series","options"])])),_:1})]),g("div",Gl,[b(x,{title:"Sales Revenue",straight:""},{default:k((()=>[b(S(_e),{id:"flex-stat-radial",height:S(c).chart.height,type:S(c).chart.type,series:S(c).series,options:S(c)},null,8,["height","type","series","options"])])),_:1})]),g("div",Wl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(S(_e),{id:"group-radial-1",height:S(p).chart.height,type:S(p).chart.type,series:S(p).series,options:S(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(S(_e),{id:"group-radial-2",height:S(m).chart.height,type:S(m).chart.type,series:S(m).series,options:S(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(S(_e),{id:"group-radial-3",height:S(v).chart.height,type:S(v).chart.type,series:S(v).series,options:S(v)},null,8,["height","type","series","options"])])),_:1})]),g("div",Zl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(S(_e),{id:"group-gauge-1",height:S(u).chart.height,type:S(u).chart.type,series:S(u).series,options:S(u)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(S(_e),{id:"group-gauge-2",height:S(d).chart.height,type:S(d).chart.type,series:S(d).series,options:S(d)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(S(_e),{id:"group-gauge-3",height:S(r).chart.height,type:S(r).chart.type,series:S(r).series,options:S(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Yl=e=>(M("data-v-1f68036b"),e=e(),P(),e),Xl={class:"timeline-wrapper"},ea=Yl((()=>g("div",{class:"timeline-header"},null,-1))),la={class:"timeline-wrapper-inner"},aa={class:"timeline-container"},ta={class:"timeline-item is-unread"},sa={class:"date"},ia={class:"content-wrap"},na={class:"content-box"},oa=Yl((()=>g("div",{class:"status"},null,-1))),ca={class:"box-text"},ua={class:"meta-text"},da=["innerHTML"],ra=d({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=Z(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return f((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=be;return _(),y("div",Xl,[ea,g("div",la,[g("div",aa,[(_(!0),y(I,null,A(S(t),(e=>(_(),y("div",ta,[g("div",sa,[g("span",null,x(S(ke)(e.timestamp).format("ddd, mm yyyy")),1)]),g("div",{class:$(["dot",s[e.action]])},null,2),g("div",ia,[g("div",na,[oa,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),g("div",ca,[g("div",ua,[g("p",null,[g("span",null,x(e.actor_info?.username??"N/A")+" "+x(e.actor_info?.last_name??"N/A"),1),g("span",{class:"log-message",innerHTML:e.message},null,8,da)]),g("span",null,x(S(ke)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),pa=O(ra,[["__scopeId","data-v-1f68036b"]]),ma={class:"table is-striped is-fullwidth"},va=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Job"),g("th",{scope:"col"},"ID"),g("th",{scope:"col"},"Title"),g("th",{scope:"col"},"Status"),g("th",{scope:"col"},"Total Price"),g("th",{scope:"col"},"Total Tax"),g("th",{scope:"col"},"Amount Paid"),g("th",{scope:"col"},"Balance"),g("th",{scope:"col"},"Deadline"),g("th",{scope:"col"},"Date Paid"),g("th",{scope:"col"},"Files"),g("th",{scope:"col",class:"is-end"},"Actions")])],-1),fa=g("td",null,"Tina",-1),ha=g("td",null,"Bergmann",-1),_a=g("td",null,"Sales",-1),ya=g("td",null,"Tina",-1),ga=g("td",null,"Bergmann",-1),ba=g("td",null,"Sales",-1),ka=g("td",null,"Tina",-1),wa=g("td",null,"Bergmann",-1),xa=g("td",null,"Sales",-1),ja=g("td",null,"Bergmann",-1),Ca=g("td",null,"Sales",-1),Va={class:"is-end"},Ta={class:"is-flex is-justify-content-flex-end"},Sa=g("td",null,"Tina",-1),Ua=g("td",null,"Bergmann",-1),Ia=g("td",null,"Sales",-1),Aa=g("td",null,"Tina",-1),Fa=g("td",null,"Bergmann",-1),Da=g("td",null,"Sales",-1),Ma=g("td",null,"Tina",-1),Pa=g("td",null,"Bergmann",-1),Oa=g("td",null,"Sales",-1),qa=g("td",null,"Bergmann",-1),Ea=g("td",null,"Sales",-1),$a={class:"is-end"},La={class:"is-flex is-justify-content-flex-end"},Ra=g("td",null,"Tina",-1),Na=g("td",null,"Bergmann",-1),Ha=g("td",null,"Sales",-1),Ba=g("td",null,"Tina",-1),za=g("td",null,"Bergmann",-1),Ja=g("td",null,"Sales",-1),Ka=g("td",null,"Tina",-1),Ga=g("td",null,"Bergmann",-1),Wa=g("td",null,"Sales",-1),Za=g("td",null,"Bergmann",-1),Qa=g("td",null,"Sales",-1),Ya={class:"is-end"},Xa={class:"is-flex is-justify-content-flex-end"},et=g("td",null,"Tina",-1),lt=g("td",null,"Bergmann",-1),at=g("td",null,"Sales",-1),tt=g("td",null,"Tina",-1),st=g("td",null,"Bergmann",-1),it=g("td",null,"Sales",-1),nt=g("td",null,"Tina",-1),ot=g("td",null,"Bergmann",-1),ct=g("td",null,"Sales",-1),ut=g("td",null,"Bergmann",-1),dt=g("td",null,"Sales",-1),rt={class:"is-end"},pt={class:"is-flex is-justify-content-flex-end"},mt=d({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=xe;R();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),y("table",ma,[va,g("tbody",null,[g("tr",null,[fa,ha,_a,ya,ga,ba,ka,wa,xa,ja,Ca,g("td",Va,[g("div",Ta,[b(a)])])]),g("tr",null,[Sa,Ua,Ia,Aa,Fa,Da,Ma,Pa,Oa,qa,Ea,g("td",$a,[g("div",La,[b(a)])])]),g("tr",null,[Ra,Na,Ha,Ba,za,Ja,Ka,Ga,Wa,Za,Qa,g("td",Ya,[g("div",Xa,[b(a)])])]),g("tr",null,[et,lt,at,tt,st,it,nt,ot,ct,ut,dt,g("td",rt,[g("div",pt,[b(a)])])])])])}}}),vt={class:"table is-striped is-fullwidth"},ft=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"First Name"),g("th",{scope:"col"},"Last Name"),g("th",{scope:"col"},"Position"),g("th",{scope:"col",class:"is-end"},[g("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ht=g("td",null,"Tina",-1),_t=g("td",null,"Bergmann",-1),yt=g("td",null,"Head of Sales",-1),gt={class:"is-end"},bt={class:"is-flex is-justify-content-flex-end"},kt=g("td",null,"John",-1),wt=g("td",null,"Wistmus",-1),xt=g("td",null,"Senior Executive",-1),jt={class:"is-end"},Ct={class:"is-flex is-justify-content-flex-end"},Vt=g("td",null,"Sam",-1),Tt=g("td",null,"Watson",-1),St=g("td",null,"Software Engineer",-1),Ut={class:"is-end"},It={class:"is-flex is-justify-content-flex-end"},At=g("td",null,"Jolaine",-1),Ft=g("td",null,"Joestar",-1),Dt=g("td",null,"HR Manager",-1),Mt={class:"is-end"},Pt={class:"is-flex is-justify-content-flex-end"},Ot=g("td",null,"Anders",-1),qt=g("td",null,"Jensen",-1),Et=g("td",null,"Accountant",-1),$t={class:"is-end"},Lt={class:"is-flex is-justify-content-flex-end"},Rt=d({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=xe;R();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=we;return _(),y("table",vt,[ft,g("tbody",null,[g("tr",null,[ht,_t,yt,g("td",gt,[g("div",bt,[b(a)])])]),g("tr",null,[kt,wt,xt,g("td",jt,[g("div",Ct,[b(a)])])]),g("tr",null,[Vt,Tt,St,g("td",Ut,[g("div",It,[b(a)])])]),g("tr",null,[At,Ft,Dt,g("td",Mt,[g("div",Pt,[b(a)])])]),g("tr",null,[Ot,qt,Et,g("td",$t,[g("div",Lt,[b(a)])])])])])}}}),Nt={class:"columns is-multiline"},Ht={class:"column is-12"},Bt={class:"toolbar"},zt={class:"tabs-inner"},Jt={class:"tabs"},Kt=g("span",null,"Estimate",-1),Gt=[Kt],Wt=g("span",null,"Budget",-1),Zt=[Wt],Qt=g("span",null,"Owner Invoice",-1),Yt=[Qt],Xt=g("li",{class:"tab-naver"},null,-1),es={key:0,class:"column is-12"},ls={key:1,class:"column is-12"},as={key:2,class:"column is-12"},ts=d({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=xe;R();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Rt,s=mt;return _(),y("div",Nt,[g("div",Ht,[g("div",Bt,[g("div",zt,[g("div",Jt,[g("ul",null,[g("li",{class:$(["estimate"===S(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N(E((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},Gt,32)],2),g("li",{class:$(["budget"===S(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=N(E((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},Zt,32)],2),g("li",{class:$(["invoice"===S(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=N(E((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Yt,32)],2),Xt])])])])]),"estimate"===S(a)?(_(),y("div",es,[b(t)])):V("",!0),"budget"===S(a)?(_(),y("div",ls)):V("",!0),"invoice"===S(a)?(_(),y("div",as,[b(s)])):V("",!0)])}}}),ss={class:"user-grid-toolbar"},is=g("span",{class:"icon"},[g("i",{class:"fas fa-plus"})],-1),ns=g("span",null,"Progress",-1),os={class:"user-grid user-grid-v1"},cs={class:"columns is-multiline"},us={class:"grid-item"},ds={class:"is-flex"},rs=d({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=u,n=q("Multiselect"),c=o,d=F,r=D,p=B,m=Ve,v=Ce;return _(),y("div",null,[g("div",ss,[b(i,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>H(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(l)]])])),_:1}),b(r,null,{default:k((()=>[b(c,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:S(a),"onUpdate:modelValue":s[1]||(s[1]=e=>H(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(d,null,{default:k((()=>[is,ns])),_:1})])),_:1})]),g("div",os,[g("div",cs,[(_(),y(I,null,A(20,(e=>g("div",{key:e,class:"column is-3"},[g("div",us,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),g("div",ds,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ps={key:1},ms={class:"card-grid-toolbar"},vs={class:"buttons"},fs=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),hs=g("span",null,"Progress",-1),_s={class:"card-grid card-grid-v4"},ys=g("img",{class:"light-image",src:G,alt:""},null,-1),gs=g("img",{class:"dark-image",src:W,alt:""},null,-1),bs=["href","title"],ks=["src","alt"],ws={class:"card-grid-item-content"},xs={class:"dark-inverted"},js={key:0},Cs=g("summary",null,"Read More",-1),Vs={key:0,class:"card-grid-item-footer"},Ts={class:"meta"},Ss={class:"dark-inverted"},Us=d({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=Z(),t=p(""),i=p(!1),n=p(!1),c=p(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const h=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return f((()=>{"job"===l.type&&m()})),(e,a)=>{const r=rs,p=u,v=q("Multiselect"),f=o,D=F,M=s,P=be,O=je;return S(i)?(_(),U(r,{key:0})):(_(),y("div",ps,[g("div",ms,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>H(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(t)]])])),_:1}),g("div",vs,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:S(c),"onUpdate:modelValue":a[1]||(a[1]=e=>H(c)?c.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(D,{onClick:a[2]||(a[2]=e=>n.value=!S(n)),color:"primary",raised:""},{default:k((()=>[fs,hs])),_:1})])]),g("div",_s,[b(M,{class:$([0!==S(h).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ys,gs])),_:1},8,["class"]),b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(S(h),(e=>(_(),y("div",{key:e.id,class:"column is-3"},[g("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[g("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>S(Te)(400,300))},null,40,ks),g("div",ws,[g("h3",xs,x(e.title?e.title:"No Title"),1),g("p",null,[w(x(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(_(),y("details",js,[Cs,w(" "+x(e.description?e.description:""),1)])):V("",!0)])]),e.uploaded_by_info?(_(),y("div",Vs,[b(P,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),g("div",Ts,[g("span",Ss,x(e.uploaded_by_info.username??"N/A")+" "+x(e.uploaded_by_info.last_name??""),1),g("span",null,x(S(X)(e.created_at)),1)])])):V("",!0)],8,bs)])))),128))])),_:1})]),S(n)?(_(),U(O,{key:0,job:l.object,openProgressModal:S(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):V("",!0)]))}}}),Is={class:"columns is-multiline"},As={class:"column is-12"},Fs={class:"column is-12"},Ds=d({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},parent:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=p(!1),s=Z(),i=Q(),d=()=>{l("update:modalHandler",!1)},r=p({id:"",type:a.type,object:a.object,parent:a.parent,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),m=async()=>{try{t.value=!0;const e=ee(r.value,[""]);e.append("value",r.value.title.replaceAll(" ","").toLocaleLowerCase());await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),d()}catch(e){console.log(e)}finally{t.value=!1}};return f((()=>{})),(e,l)=>{const s=c,i=u,p=o,v=n,f=F,h=te;return _(),U(h,{is:"form",open:a.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:E(m,["prevent"]),onClose:l[2]||(l[2]=e=>d())},{content:k((()=>[g("div",Is,[g("div",As,[b(p,{label:"Title *"},{default:k((()=>[b(i,null,{default:k((()=>[b(s,{modelValue:S(r).title,"onUpdate:modelValue":l[0]||(l[0]=e=>S(r).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Fs,[b(p,{label:"Description (Optional)"},{default:k((()=>[b(i,null,{default:k((()=>[b(v,{modelValue:S(r).description,"onUpdate:modelValue":l[1]||(l[1]=e=>S(r).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:k((()=>[b(f,{loading:S(t),type:"submit",color:"warning",raised:""},{default:k((()=>[w("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Ms={class:"modal-form columns is-multiline"},Ps={class:"column is-full"},Os={class:"field"},qs=g("label",{class:"label"},"Title ",-1),Es={class:"control"},$s={class:"field column is-half"},Ls={class:"file"},Rs={class:"file-label"},Ns={class:"file-cta"},Hs=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Bs={class:"file-label"},zs=d({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;p(null);const t=Z(),s=Q(),i=p(!1),n=r(),c=()=>{l("close:ModalHandler",!1)},d=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),m=async()=>{try{i.value=!0;const e=ee(d.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${d.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),c()}catch(e){console.log(e)}finally{i.value=!1}},v=p(""),h=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(d.value.file=a,v.value=a.name)};return f((()=>{})),(e,l)=>{const t=u,s=o,n=F,r=te;return _(),U(r,{is:"form",open:a.openFileModal,title:"Add Attachment",size:"medium",actions:"right",onSubmit:E(m,["prevent"]),onClose:c},{content:k((()=>[g("div",Ms,[g("div",Ps,[g("div",Os,[qs,g("div",Es,[j(g("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>S(d).title=e)},null,512),[[C,S(d).title]])])])]),g("div",$s,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Ls,[g("label",Rs,[g("input",{onChange:h,class:"file-input",type:"file",name:"resume"},null,32),g("span",Ns,[Hs,g("span",Bs,x(S(v)?S(v):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:k((()=>[b(n,{type:"submit",color:"primary",loading:S(i),raised:""},{default:k((()=>[w(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(n,{color:"light",onClick:c,raised:""},{default:k((()=>[w("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Js={key:0,class:"modal-form"},Ks=["src"],Gs=["src"],Ws=["src"],Zs=["src"],Qs={key:1,class:"modal-form"},Ys=g("h1",{class:"title is-5"},"No media file attached",-1),Xs=[Ys],ei=d({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return f((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Ae,n=F,o=te;return _(),U(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(_(),y("div",Js,[a.document?.includes(".pdf")?(_(),y("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ks)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(_(),y("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Gs)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(_(),y("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ws)):V("",!0),a.document?.includes(".mp4")?(_(),U(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(_(),y("img",{key:4,src:a.document,alt:""},null,8,Zs))])):(_(),y("div",Qs,Xs))])),cancel:k((()=>[b(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","title"])}}}),li={class:"tile-grid-item"},ai={class:"tile-grid-item-inner"},ti=["src"],si={class:"meta"},ii={class:"dark-inverted"},ni=g("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),oi=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),ci=g("div",{class:"meta"},[g("span",null,"Download"),g("span",null,"Download this file")],-1),ui=[oi,ci],di=g("hr",{class:"dropdown-divider"},null,-1),ri=g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),pi=g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete this file")],-1),mi=[ri,pi],vi=d({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",webp:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=p("");return(e,c)=>{const u=Ie;return _(),y("div",null,[g("div",li,[g("div",ai,[g("img",{onClick:c[0]||(c[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,ti),g("div",si,[g("span",ii,x(a.document.title??"N/A"),1),g("span",null,[g("span",null,x(a.document?.file_info?.size??0)+" MB",1),ni,g("span",null,"At:"+x(S(ae)(a.document.created_at)),1)])]),b(u,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[g("a",{role:"menuitem",onClick:c[1]||(c[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},ui),di,g("a",{role:"menuitem",onClick:c[2]||(c[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},mi)])),_:1})])]),S(s)?(_(),U(ei,{key:0,openDocViewModal:S(s),document:S(t),DocumentType:S(o),title:S(i),"onUpdate:closeModalHandler":c[3]||(c[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0)])}}}),fi={key:1},hi={key:0},_i={class:"tabs-wrapper"},yi={class:"tabs-inner"},gi={class:"tabs"},bi=[g("span",null,"Recent",-1)],ki=["onKeydown","onClick"],wi={key:0},xi={key:0},ji={class:"tile-grid-toolbar"},Ci={class:"buttons"},Vi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Ti=g("span",null,"File",-1),Si=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Ui=g("span",null,"Folder",-1),Ii=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Ai=g("span",null,"Folder",-1),Fi={key:1},Di={class:"tile-grid-toolbar"},Mi={class:"buttons"},Pi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Oi=g("span",null,"File",-1),qi=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Ei=g("span",null,"Folder",-1),$i=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Li=g("span",null,"Folder",-1),Ri={class:"tile-grid tile-grid-v2"},Ni=g("img",{class:"light-image",src:G,alt:""},null,-1),Hi=g("img",{class:"dark-image",src:W,alt:""},null,-1),Bi=d({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=Q(),i=Z(),n=p(!1),c=p([]),d=p(""),r=p(0),m=p(!1),h=p(""),w=p(""),D=p(""),M=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),P=["All Files","Recently Updated","My Files","Team Files","Deprecated"],O=()=>{d.value=a.docType,n.value=!n.value};p("");const L=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),R=()=>{L.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},B=async()=>{try{const e=await i.delete(`/api/media-folder/${a.folderId}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),L.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},z=async()=>{try{m.value=!0;const e=await i.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);M.value=e.data}catch(e){console.log(e)}finally{m.value=!1}},J=async()=>{try{const e=await i.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);c.value=e.data,D.value="recent"}catch(e){console.log(e)}},K=async e=>{try{const l=await i.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),t.purple("File Deleted Successfully"),z()}catch(l){console.log(l)}},G=p(!1),W=(e="")=>{h.value=e,G.value=!G.value},Y=v((()=>w.value?M.value.filter((e=>e.title.match(new RegExp(w.value,"i"))||e.file_info?.name?.match(new RegExp(w.value,"i"))||e.created_at.match(new RegExp(w.value,"i")))):M.value));return f((()=>{z(),J()})),(e,l)=>{const t=ie,i=q("ObjectDocumentsTiles",!0),p=u,v=q("Multiselect"),f=o,h=F,M=vi,Z=s,Q=Ue,X=zs,ee=Ds;return _(),y("div",null,[S(m)?(_(),U(t,{key:0,rows:4})):(_(),y("div",fi,[S(c).length?(_(),y("div",hi,[g("div",_i,[g("div",yi,[g("div",gi,[g("ul",null,[g("li",{class:$(["recent"===S(D)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N(E((e=>D.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>D.value="recent")},bi,32)],2),(_(!0),y(I,null,A(S(c),(e=>(_(),y("li",{class:$([S(D)===e.value&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:N(E((l=>D.value=e.value),["prevent"]),["space"]),onClick:l=>D.value=e.value},[g("span",null,x(e.title),1)],40,ki)],2)))),256))])])])]),(_(!0),y(I,null,A(S(c),(e=>(_(),y("div",{key:e.id},[S(D)==e.value?(_(),y("div",wi,[b(i,{onDeleteFolderUpdate:l[2]||(l[2]=e=>J()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):V("",!0)])))),128)),"recent"===S(D)?(_(),y("div",xi,[g("div",ji,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>H(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(w)]])])),_:1}),g("div",Ci,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:S(r),"onUpdate:modelValue":l[4]||(l[4]=e=>H(r)?r.value=e:null),options:P,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[5]||(l[5]=e=>O()),color:"primary",raised:""},{default:k((()=>[Vi,Ti])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[Si,Ui])),_:1}),b(h,{onClick:R,color:"danger",raised:""},{default:k((()=>[Ii,Ai])),_:1})])]),b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(S(Y),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(M,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])):V("",!0)])):(_(),y("div",Fi,[g("div",Di,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>H(w)?w.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[C,S(w)]])])),_:1}),g("div",Mi,[b(f,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:S(r),"onUpdate:modelValue":l[7]||(l[7]=e=>H(r)?r.value=e:null),options:P,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(h,{onClick:l[8]||(l[8]=e=>O()),color:"primary",raised:""},{default:k((()=>[Pi,Oi])),_:1}),b(h,{onClick:W,color:"info",raised:""},{default:k((()=>[qi,Ei])),_:1}),b(h,{onClick:R,color:"danger",raised:""},{default:k((()=>[$i,Li])),_:1})])]),g("div",Ri,[0!=S(Y).length||S(m)?V("",!0):(_(),U(Z,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[Ni,Hi])),_:1})),g("div",null,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(_(!0),y(I,null,A(S(Y),(e=>(_(),y("div",{key:e.id,class:"column is-4"},[b(M,{document:e,onDeleteSelectedFile:K},null,8,["document"])])))),128))])),_:1})])])])),S(L).isSweetAlertOpen?(_(),U(Q,{key:2,isSweetAlertOpen:S(L).isSweetAlertOpen,title:S(L).title,subtitle:S(L).subtitle,btntext:S(L).btntext,onConfirm:B,onCancel:()=>S(L).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):V("",!0),S(n)?(_(),U(X,{key:3,openFileModal:S(n),object:a.objectId,type:S(d),"onClose:ModalHandler":l[9]||(l[9]=e=>n.value=!1),"onUpdate:OnSuccess":z},null,8,["openFileModal","object","type"])):V("",!0),S(G)?(_(),U(ee,{key:4,"open-create-folder-modal":S(G),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[10]||(l[10]=e=>G.value=!1),"onUpdate:onSuccess":l[11]||(l[11]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)]))])}}}),zi={class:"modal-form columns is-multiline"},Ji={class:"column is-12 is-flex"},Ki={class:"file"},Gi=["onClick"],Wi={class:"file-cta"},Zi=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Qi={class:"file-label"},Yi=g("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Xi={class:"column is-full"},en=g("p",null,"Selected Photos",-1),ln=g("br",null,null,-1),an=d({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=Z(),s=Q(),i=p(!1),n=r(),c=p(""),d=p(null),m=p(!1),v=()=>l("close:ModalHandler",!1),f=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const e=ee(f.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),v()}catch(e){console.error(e)}finally{i.value=!1}},j=()=>{m.value=!0,d.value&&(d.value.accept="image/*",d.value.setAttribute("capture","environment"),d.value.removeAttribute("multiple"),d.value.click())},C=()=>{m.value=!1,d.value&&(d.value.accept="image/*",d.value.removeAttribute("capture"),d.value.setAttribute("multiple","true"),d.value.click())},V=p([]),T=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,V.value=e.map((e=>e.name)),c.value=e.length>1?`${e.length} photos selected`:e[0].name,m.value&&(f.value.title=e[0].name,await h())}d.value&&(d.value.value="")};return(e,l)=>{const t=u,s=o,n=Fe,r=F,p=te;return _(),U(p,{is:"form",open:a.openFileModal,title:"Add Photos",size:"medium",actions:"right",onSubmit:E(h,["prevent"]),onClose:v},{content:k((()=>[g("div",zi,[g("input",{ref_key:"fileInput",ref:d,onChange:T,class:"file-input",type:"file",style:{display:"none"}},null,544),g("div",Ji,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Ki,[g("label",{class:"file-label",onClick:E(C,["prevent"])},[g("span",Wi,[Zi,g("span",Qi,x(S(c)?S(c):"Choose photo(s)"),1)])],8,Gi)])])),_:1})])),_:1}),b(n,{class:"ml-2",onClick:j,size:"small",color:"info",bordered:""},{default:k((()=>[Yi])),_:1})]),g("div",Xi,[en,(_(!0),y(I,null,A(S(V),(e=>(_(),y("span",null,[w(x(e)+" ",1),ln])))),256))])])])),action:k((()=>[b(r,{type:"submit",color:"primary",loading:S(i),raised:""},{default:k((()=>[w(" Save ")])),_:1},8,["loading"])])),cancel:k((()=>[b(r,{color:"light",onClick:v,raised:""},{default:k((()=>[w("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),tn={class:"column is-2"},sn={class:"card-grid-item is-relative"},nn=["src","alt"],on=["src","alt"],cn={class:"card-grid-item-content is-flex is-align-items-center space-between"},un=d({__name:"NewDocumentViewer",props:{file:{}},emits:["updateOnSuccess"],setup(e,{emit:l}){const a=e,s=Z(),i=Q(),n=p("");p([]);const o=p(""),c=p(!1),u=p(""),d=p(""),r=e=>{o.value=e.file_info?.url,d.value=e.file_info?.type,u.value=e.title,c.value=!c.value},m={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},v=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",icon:""}),h=async()=>{try{await s.delete(`/api/attachment/${n.value}/`),l("updateOnSuccess",null),v.value.isSweetAlertOpen=!1,i.success("File deleted successfully")}catch(e){console.error("Error deleting file:",e)}};return f((()=>{})),(e,l)=>{const s=t,i=ei,p=Ue;return _(),y("div",tn,[g("a",sn,["png"===a.file?.file_info?.type||"jpg"===a.file?.file_info?.type||"webp"===a.file?.file_info?.type||"jpeg"===a.file?.file_info?.type?(_(),y("img",{key:0,src:a.file?.file_info?.url,alt:a.file?.title,onClick:l[0]||(l[0]=e=>r(a.file))},null,8,nn)):(_(),y("img",{key:1,src:m[a.file?.file_info?.type],alt:a.file?.title,onClick:l[1]||(l[1]=e=>r(a.file))},null,8,on)),g("div",cn,[g("h3",{onClick:l[2]||(l[2]=e=>r(a.file)),class:"dark-inverted"},x(a.file?.title),1),g("span",null,[g("span",null,x(a.file?.file_info?.size?a.file?.file_info?.size:0)+" MB",1)]),b(s,{style:{position:"absolute",top:"1%",right:"1%"},onClick:l[3]||(l[3]=e=>{return l=a.file?.id,n.value=l,void(v.value={title:" Delete this file?",subtitle:"This file will be deleted permanently.",isSweetAlertOpen:!0,btntext:"Delete",icon:"fas fa-bell"});var l}),icon:"fas fa-trash",color:"danger"})])]),S(c)?(_(),U(i,{key:0,openDocViewModal:S(c),document:S(o),DocumentType:S(d),title:S(u),"onUpdate:closeModalHandler":l[4]||(l[4]=e=>c.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):V("",!0),S(v).isSweetAlertOpen?(_(),U(p,{key:1,title:S(v).title,subtitle:S(v).subtitle,btntext:S(v).btntext,icon:S(v).icon,onCancel:()=>{S(v).isSweetAlertOpen=!1},onConfirm:h},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0)])}}}),dn={class:"card-grid-toolbar"},rn={class:"buttons"},pn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),mn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),vn=g("span",null,"Folder",-1),fn=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),hn=g("span",null,"Folder",-1),_n={key:0,class:"card-grid card-grid-v4"},yn={class:"columns is-multiline"},gn={class:"card-grid-item"},bn={class:"card-grid card-grid-v4"},kn=["onClick"],wn=g("img",{src:"/icons/folders.png",alt:"item.title"},null,-1),xn={class:"card-grid-item-content"},jn={class:"dark-inverted"},Cn={key:1,class:"card-grid card-grid-v4"},Vn=g("div",{class:"column is-2"},[g("div",{class:"card-grid-item"},[g("img",{class:"light-image",src:G,alt:""}),g("img",{class:"dark-image",src:W,alt:""}),g("div",{class:"card-grid-item-content"},[g("h3",{class:"dark-inverted"},"No Item Found")])])],-1),Tn=d({__name:"NewJobFolders",props:{objectId:String,type:{type:String,required:!0}},setup(e){const l=e,a=Q(),t=Z(),s=p(""),i=p(!1),n=p(!1),o=p([]),c=p([]),u=p([]),d=p(!1),r=p(""),m=v((()=>o.value[o.value.length-1]||null)),h=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text",Icon:""}),j=async()=>{d.value=!0;try{const e=await t.get(`/api/media-folder/?object=${l.objectId}&type=${l.type}`);c.value=e.data.filter((e=>null===e.parent)),u.value=[]}catch(e){console.error("Error fetching top folders:",e)}finally{d.value=!1}},C=async e=>{d.value=!0;try{const a=await t.get(`/api/media-folder/${e}/sub-folders/`);c.value=a.data;const s=await t.get(`/api/attachment/by-object/${e}/?type=${l.type}`);u.value=s.data}catch(a){console.error("Error fetching folder contents:",a)}finally{d.value=!1}},S=async()=>{o.value.pop();const e=m.value;e?await C(e.id):await j()},D=p(!1),M=p(""),P=p(""),O=async()=>{m.value?M.value=m.value?m.value.id:"":P.value=l.objectId,D.value=!0},q=async()=>{M.value?await C(M.value):await j()},E=async()=>{s.value=m.value?m.value.id:l.objectId,"photos"===l.type?n.value=!0:i.value=!0},$=async()=>{try{h.value.isSweetAlertOpen=!1,await t.delete(`/api/media-folder/${r.value}/`),S(),m.value?await C(m.value.id):await j(),a.success("Folder deleted successfully")}catch(e){console.error("Error deleting folder:",e)}},L=async()=>{m.value&&await C(m.value.id)};return f((()=>{j()})),(e,a)=>{const t=F,p=B,v=un,f=zs,j=an,R=Ue,N=Ds;return _(),y("div",null,[g("div",dn,[o.value.length?(_(),U(t,{key:0,color:"warning",light:"",class:"mr-1",size:"medium",outlined:"",onClick:S,icon:"fas fa-chevron-left"})):V("",!0),g("div",null,[m.value?(_(),U(t,{key:1,color:"warning",light:"",bold:"",fullwidth:"",icon:"fas fa-folder-open"},{default:k((()=>[w(x(m.value.title),1)])),_:1})):(_(),U(t,{key:0,icon:"fas fa-folder",color:"warning",light:"",bold:"",fullwidth:""},{default:k((()=>[w("Main Folders")])),_:1}))]),g("div",rn,[m.value?(_(),U(t,{key:0,onClick:E,color:"primary",light:"",outlined:"",raised:""},{default:k((()=>[pn,g("span",null,x("photos"==l.type?"Photos":"File"),1)])),_:1})):V("",!0),b(t,{onClick:O,color:"info",outlined:"",raised:""},{default:k((()=>[mn,vn])),_:1}),m.value?(_(),U(t,{key:1,onClick:a[0]||(a[0]=e=>((e="")=>{r.value=e.id,h.value={title:`Delete ${e.title} folder?`,subtitle:"Once deleted, you will not be able to recover this folder and the content in it.",isSweetAlertOpen:!0,btntext:"Delete",Icon:"fas fa-bell"}})(m.value)),color:"danger",raised:"",outlined:""},{default:k((()=>[fn,hn])),_:1})):V("",!0)])]),g("div",null,[d.value?(_(),y("div",_n,[g("div",yn,[(_(),y(I,null,A(18,(e=>g("div",{key:e,class:"column is-2"},[g("div",gn,[b(p,{height:"160px"})])]))),64))])])):V("",!0),g("div",bn,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[c.value.length?(_(!0),y(I,{key:0},A(c.value,(e=>(_(),y("div",{key:e.id,class:"column is-2"},[g("a",{onClick:l=>(async e=>{o.value.push(e),await C(e.id)})(e),class:"card-grid-item"},[wn,g("div",xn,[g("h3",jn,x(e.title),1)])],8,kn)])))),128)):V("",!0),u.value.length?(_(!0),y(I,{key:1},A(u.value,(e=>(_(),U(v,{key:e.id,file:e,onUpdateOnSuccess:L},null,8,["file"])))),128)):V("",!0)])),_:1})]),c.value.length||u.value.length||d.value?V("",!0):(_(),y("div",Cn,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[Vn])),_:1})])),i.value?(_(),U(f,{key:2,openFileModal:i.value,object:s.value,type:l.type,"onClose:ModalHandler":a[1]||(a[1]=e=>i.value=!1),"onUpdate:OnSuccess":a[2]||(a[2]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),n.value?(_(),U(j,{key:3,openFileModal:n.value,object:s.value,type:l.type,"onClose:ModalHandler":a[3]||(a[3]=e=>n.value=!1),"onUpdate:OnSuccess":a[4]||(a[4]=e=>C(s.value))},null,8,["openFileModal","object","type"])):V("",!0),h.value.isSweetAlertOpen?(_(),U(R,{key:4,title:h.value.title,subtitle:h.value.subtitle,btntext:h.value.btntext,icon:h.value.Icon,onCancel:()=>{h.value.isSweetAlertOpen=!1},onConfirm:$},null,8,["title","subtitle","btntext","icon","onCancel"])):V("",!0),D.value?(_(),U(N,{key:5,"open-create-folder-modal":D.value,type:l.type,object:P.value,parent:M.value,"onUpdate:modalHandler":a[5]||(a[5]=e=>D.value=!1),"onUpdate:OnSuccess":q},null,8,["open-create-folder-modal","type","object","parent"])):V("",!0)])])}}}),Sn={class:"tabs-wrapper"},Un={class:"tabs-inner"},In={class:"tabs is-boxed"},An=[g("span",null,"Documents",-1)],Fn=[g("span",null,"Photos",-1)],Dn=[g("span",null,"Videos",-1)],Mn=g("li",{class:"tab-naver"},null,-1),Pn={key:0},On={class:"tile-grid tile-grid-v2"},qn=g("img",{class:"light-image",src:G,alt:""},null,-1),En=g("img",{class:"dark-image",src:W,alt:""},null,-1),$n={key:1},Ln={key:2},Rn=d({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo","updateOnSuccess"],setup(e,{emit:l}){const a=e;Q();const t=Z(),i=p("");p(0);const n=p(""),o=p("contracts"),c=p(!1),u=p([]),d=p("documents");p("site_visits"),p("job_videos");const r=v((()=>i.value?De.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):De)),m=async(e="contracts")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},h=p(""),w=p(!1),x=p([]),j=p([]),C=p([]),T=async(e="")=>{try{const l=await t.get(`/api/media-folder/?object=${a.leadId}&type=${e}`);"documents"===e?x.value=l.data:"photos"===e?j.value=l.data:"videos"===e&&(C.value=l.data)}catch(l){console.log(l)}},I=(e="documents")=>{"documents"===e?T("documents"):"photos"===e?T("photos"):"videos"===e&&T("videos")};return f((()=>{m(),I("documents")})),(e,l)=>{const t=Tn,i=s,o=zs,u=Ds;return _(),y("div",null,[g("div",Sn,[g("div",Un,[g("div",In,[g("ul",null,[g("li",{class:$(["documents"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N(E((e=>d.value="documents"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>{d.value="documents",I("documents")})},An,32)],2),g("li",{class:$(["photos"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=N(E((e=>d.value="photos"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>{d.value="photos",I("photos")})},Fn,32)],2),g("li",{class:$(["videos"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=N(E((e=>d.value="videos"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>{d.value="videos",I("videos")})},Dn,32)],2),Mn])])])]),"documents"==S(d)?(_(),y("div",Pn,[b(t,{type:"documents",objectId:a.leadId},null,8,["objectId"]),g("div",On,[b(i,{class:$([0!==S(r).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[qn,En])),_:1},8,["class"])])])):V("",!0),"photos"==S(d)?(_(),y("div",$n,[b(t,{type:"photos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),"videos"==S(d)?(_(),y("div",Ln,[b(t,{type:"videos",objectId:a.leadId},null,8,["objectId"])])):V("",!0),S(c)?(_(),U(o,{key:3,openFileModal:S(c),object:a.leadId,type:S(n),"onClose:ModalHandler":l[6]||(l[6]=e=>c.value=!1),"onUpdate:OnSuccess":m},null,8,["openFileModal","object","type"])):V("",!0),S(w)?(_(),U(u,{key:4,"open-create-folder-modal":S(w),type:S(h),object:a.leadId,"onUpdate:modalHandler":l[7]||(l[7]=e=>w.value=!1),"onUpdate:onSuccess":l[8]||(l[8]=e=>I(S(h)))},null,8,["open-create-folder-modal","type","object"])):V("",!0)])}}}),Nn={class:"stat-widget flex-stat-widget is-straight"},Hn={class:"chart-media"},Bn={class:"meta"},zn={class:"dark-inverted"},Jn={class:"is-dark-primary"},Kn={class:"chart-container"},Gn=d({__name:"ProgressWidget",props:{title:{default:"Widget Title"},value:{default:"8,641.26"},text:{default:""}},setup(e){const l=e;return(e,a)=>(_(),y("div",Nn,[g("div",Hn,[g("div",Bn,[g("h4",zn,x(l.title),1),g("span",Jn,x(l.value),1),g("p",null,x(l.text),1)]),g("div",Kn,[z(e.$slots,"default")])])]))}}),Wn=d({__name:"TasksProgressGageChart",props:{percentCount:{type:Number,required:!0,default:0}},setup(e){const l=e,a=qe(),t=J({series:[l.percentCount],chart:{height:190,type:"radialBar",offsetX:-15,offsetY:-10,toolbar:{show:!1}},colors:[a.info,a.secondary],plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"13px",fontWeight:"600",color:a.lightText,show:!1},value:{offsetY:5,fontSize:"16px",fontFamily:"Roboto, sans-serif",fontWeight:"500",color:void 0,formatter:function(e){return e+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:4},labels:["(30 days)"]});return(e,l)=>(_(),U(S(_e),{id:"flex-stat-radial",height:S(t).chart.height,type:S(t).chart.type,series:S(t).series,options:S(t)},null,8,["height","type","series","options"]))}}),Zn=d({__name:"CircularChart",props:{percentCount:{type:Number,required:!0,default:0},id:{type:String,required:!0,default:""},color:{type:String,required:!0,default:""}},setup(e){const l=e;qe();const a=J({series:[l.percentCount],chart:{height:102,type:"radialBar",offsetY:-10,toolbar:{show:!1}},colors:[l.color],plotOptions:{radialBar:{hollow:{size:"35%"},dataLabels:{show:!1}}},labels:[""]});return(e,t)=>(_(),U(S(_e),{id:l.id,height:S(a).chart.height,type:S(a).chart.type,series:S(a).series,options:S(a)},null,8,["id","height","type","series","options"]))}}),Qn={key:0,class:"columns is-multiline"},Yn={class:"column is-6"},Xn={class:"column is-6"},eo=d({__name:"ProjectTasksStats",props:{project:{type:String,required:!0}},setup(e){const l=e,a=qe(),t=Z(),s=p(!1),i=p({stats:{active:0,pending:0,completed:0,cancelled:0},tasks_progress:0,pending_tasks:0,total_tasks:0,status_percentage:{active:0,pending:0,completed:0,cancelled:0}});return f((()=>{(async()=>{try{s.value=!0;const e=await t.get(`/api/task/project-wise-stats/${l.project}/`);i.value=e.data}catch(e){console.log(e)}finally{s.value=!1}})()})),(e,l)=>{const t=Gn,n=de;return S(s)?V("",!0):(_(),y("div",Qn,[g("div",Yn,[b(t,{title:"Job Progress",value:`${S(i).total_tasks} Total Tasks`,text:"This is the total progress on job base on tasks that have been completed.",straight:""},{default:k((()=>[b(Wn,{percentCount:S(i).tasks_progress},null,8,["percentCount"])])),_:1},8,["value"])]),g("div",Xn,[b(n,{title:"Tasks Stats",values:[S(i).stats.active,S(i).stats.pending,S(i).stats.cancelled],labels:["Active Tasks","Pending Tasks","Cancelled Tasks"]},{chart1:k((()=>[S(i).status_percentage?(_(),U(Zn,{key:0,id:"group-radial-1",color:S(a).info,percentCount:S(i).status_percentage.active},null,8,["color","percentCount"])):V("",!0)])),chart2:k((()=>[S(i).status_percentage?(_(),U(Zn,{key:0,color:S(a).warning,id:"group-radial-2",percentCount:S(i).status_percentage.pending},null,8,["color","percentCount"])):V("",!0)])),chart3:k((()=>[S(i).status_percentage?(_(),U(Zn,{key:0,color:S(a).danger,id:"group-radial-3",percentCount:S(i).status_percentage.cancelled},null,8,["color","percentCount"])):V("",!0)])),_:1},8,["values"])])]))}}}),lo={class:"business-dashboard hr-dashboard"},ao={class:"columns is-multiline"},to={class:"column is-12"},so={class:"columns is-multiline"},io={class:"column is-12"},no={class:"block-header"},oo={class:"left"},co={class:"current-user"},uo={class:"center"},ro=g("h4",{class:"block-heading"},"Current State",-1),po=g("h4",{class:"block-heading"},"Address",-1),mo={class:"block-text"},vo=g("br",null,null,-1),fo=g("br",null,null,-1),ho={class:"right"},_o=g("h4",{class:"block-heading"},"Managers",-1),yo={class:"candidates"},go=g("button",null,[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),bo={class:"column is-12"},ko={class:"tabs-wrapper"},wo={class:"tabs-inner"},xo={class:"tabs is-toggle"},jo=[g("span",null,"Job Management",-1)],Co=[g("span",null,"Documents/Files",-1)],Vo=[g("span",null,"Old Estimates",-1)],To=[g("span",null,"Proposals",-1)],So=[g("span",null,"Tasks",-1)],Uo=[g("span",null,"Activities",-1)],Io=[g("span",null,"Job progress",-1)],Ao=[g("span",null,"Calculations",-1)],Fo=[g("span",null,"Finance",-1)],Do=[g("span",null,"Report",-1)],Mo=g("li",{class:"tab-naver"},null,-1),Po={key:0,class:"column is-12"},Oo={class:"columns is-multiline"},qo={class:"column is-8"},Eo={class:"columns is-multiline"},$o={class:"column is-12"},Lo={class:"feed-settings"},Ro=g("h3",{class:"dark-inverted"},null,-1),No={class:"buttons"},Ho={class:"column is-12"},Bo={class:"side-text mt-0"},zo=g("h3",{class:"dark-inverted"},"Job Description",-1),Jo=["innerHTML"],Ko={class:"column is-12"},Go={class:"column is-12"},Wo={class:"recent-rookies"},Zo=g("div",{class:"recent-rookies-header"},[g("h3",{class:"dark-inverted"},"Internal Users")],-1),Qo={class:"columns is-multiline user-grid user-grid-v4"},Yo={class:"column is-4"},Xo={class:"grid-item"},ec={class:"dark-inverted"},lc={class:"capitalized"},ac={class:"button-wrap has-text-centered"},tc={class:"column is-4"},sc={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},ic={key:1,class:"column is-12"},nc={key:2,class:"column is-12"},oc={key:3,class:"column is-12"},cc={class:"tabs-inner"},uc={class:"tabs is-boxed"},dc=[g("span",null,"Proposals",-1)],rc=[g("span",null,"Grouped Proposals",-1)],pc={key:0},mc={key:1},vc={key:4,class:"column is-12"},fc={key:5,class:"column is-12"},hc={key:6,class:"column is-12"},_c={key:7,class:"column is-12"},yc={key:8,class:"column is-12"},gc={key:9,class:"column is-12"},bc={key:10,class:"column is-12"},kc={class:"tabs-inner"},wc={class:"tabs is-boxed"},xc=[g("span",null,"Excel Sheets",-1)],jc=[g("span",null,"Custom Calculations",-1)],Cc={key:0},Vc={key:1},Tc=d({__name:"JobDetails",setup(l){pe();const a=K(),t=R(),s=Z(),i=Q(),n=p(!1),o=p(""),c=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const u=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),d=p("excel"),r=p("management"),m=p("childProposals");let v;const C=async()=>{try{n.value=!0;const e=await s.get(`/api/project/${a.params.id}/detail/`);u.value=e.data,e.data.latitude&&((e,l)=>{if(v&&v.remove(),v=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(v),e&&l){const a=[e,l];L.marker(a).addTo(v),v.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{n.value=!1}},T=p([]),M=p(!1),P=async()=>{try{M.value=!0;await s.patch(`/api/project/${a.params.id}/`,{status:"completed"});i.success("Jobs Completed Successfully."),C()}catch(Error){console.log(Error)}finally{M.value=!1}};return f((()=>{C(),a.query.jobTab&&(r.value=a.query.jobTab)})),(l,i)=>{const n=be,p=Ee,v=F,f=D,M=eo,O=Oe,q=Pe,L=Me,R=ne,H=Rn,B=Bi,z=Se,J=Us,K=ts,G=pa,W=Ql,Z=oe,Q=$l,Y=_l,X=e,ee=h("tooltip");return _(),y("div",lo,[g("div",ao,[g("div",to,[g("div",so,[g("div",io,[g("div",no,[g("div",oo,[g("div",co,[b(n,{size:"large",picture:S(u).image,squared:""},null,8,["picture"]),g("h3",null,[w(x(S(u).title?S(u).title:"No Title")+" ",1),g("sup",null,[b(p,{rounded:"",size:"tiny",color:"info"},{default:k((()=>[w(x(S(u).status),1)])),_:1})])])])]),g("div",uo,[ro,g("p",null,[b(p,{rounded:"",color:"warning"},{default:k((()=>[w(x("lead"==S(u).current_state?"Is Lead":"Is Job"),1)])),_:1})]),po,g("p",mo,[w(x(S(u).address?S(u).address:"No Address Added")+" ",1),vo,w(" "+x(S(u).city?S(u).city:"No City Added")+", "+x(S(u).state?S(u).state:"No State Added")+" ",1),fo,w(" "+x(S(u).zip_code?S(u).zip_code:"No Zip Code Added"),1)])]),g("div",ho,[_o,g("div",yo,[(_(!0),y(I,null,A(S(u).managers_list,(e=>j((_(),U(n,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[ee,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),go]),b(f,null,{default:k((()=>[b(v,{class:"mt-1",onClick:i[0]||(i[0]=e=>{return l=S(a).params.id,o.value=l,void(c.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:k((()=>[w(" Update "+x("lead"==S(u).current_state?"Lead":"Job"),1)])),_:1}),"lead"!=S(u).current_state?(_(),U(v,{key:0,class:"mt-1",onClick:P,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:k((()=>[w(" Mark As Done ")])),_:1})):V("",!0)])),_:1})])])]),g("div",bo,[g("div",ko,[g("div",wo,[g("div",xo,[g("ul",null,[g("li",{class:$(["management"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[1]||(i[1]=N(E((()=>{r.value="management",S(t).push({query:{...S(a).query,jobTab:"management"}})}),["prevent"]),["space"])),onClick:i[2]||(i[2]=()=>{r.value="management",S(t).push({query:{...S(a).query,jobTab:"management"}})})},jo,32)],2),g("li",{class:$(["documents"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[3]||(i[3]=N(E((()=>{r.value="documents",S(t).push({query:{...S(a).query,jobTab:"documents"}})}),["prevent"]),["space"])),onClick:i[4]||(i[4]=()=>{r.value="documents",S(t).push({query:{...S(a).query,jobTab:"documents"}})})},Co,32)],2),g("li",{class:$(["files"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[5]||(i[5]=N(E((()=>{r.value="files",S(t).push({query:{...S(a).query,jobTab:"files"}})}),["prevent"]),["space"])),onClick:i[6]||(i[6]=()=>{r.value="files",S(t).push({query:{...S(a).query,jobTab:"files"}})})},Vo,32)],2),g("li",{class:$(["proposals"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[7]||(i[7]=N(E((()=>{r.value="proposals",S(t).push({query:{...S(a).query,jobTab:"proposals"}})}),["prevent"]),["space"])),onClick:i[8]||(i[8]=()=>{r.value="proposals",S(t).push({query:{...S(a).query,jobTab:"proposals"}})})},To,32)],2),g("li",{class:$(["tasks"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[9]||(i[9]=N(E((()=>{r.value="tasks",S(t).push({query:{...S(a).query,jobTab:"tasks"}})}),["prevent"]),["space"])),onClick:i[10]||(i[10]=()=>{r.value="tasks",S(t).push({query:{...S(a).query,jobTab:"tasks"}})})},So,32)],2),g("li",{class:$(["activities"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[11]||(i[11]=N(E((()=>{r.value="activities",S(t).push({query:{...S(a).query,jobTab:"activities"}})}),["prevent"]),["space"])),onClick:i[12]||(i[12]=()=>{r.value="activities",S(t).push({query:{...S(a).query,jobTab:"activities"}})})},Uo,32)],2),g("li",{class:$(["progress"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[13]||(i[13]=N(E((()=>{r.value="progress",S(t).push({query:{...S(a).query,jobTab:"progress"}})}),["prevent"]),["space"])),onClick:i[14]||(i[14]=()=>{r.value="progress",S(t).push({query:{...S(a).query,jobTab:"progress"}})})},Io,32)],2),g("li",{class:$(["calculations"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[15]||(i[15]=N(E((()=>{r.value="calculations",S(t).push({query:{...S(a).query,jobTab:"calculations"}})}),["prevent"]),["space"])),onClick:i[16]||(i[16]=()=>{r.value="calculations",S(t).push({query:{...S(a).query,jobTab:"calculations"}})})},Ao,32)],2),g("li",{class:$(["finance"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[17]||(i[17]=N(E((()=>{r.value="finance",S(t).push({query:{...S(a).query,jobTab:"finance"}})}),["prevent"]),["space"])),onClick:i[18]||(i[18]=()=>{r.value="finance",S(t).push({query:{...S(a).query,jobTab:"finance"}})})},Fo,32)],2),g("li",{class:$(["report"===S(r)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[19]||(i[19]=N(E((()=>{r.value="report",S(t).push({query:{...S(a).query,jobTab:"report"}})}),["prevent"]),["space"])),onClick:i[20]||(i[20]=()=>{r.value="report",S(t).push({query:{...S(a).query,jobTab:"report"}})})},Do,32)],2),Mo])])])])]),"management"===S(r)?(_(),y("div",Po,[g("div",Oo,[g("div",qo,[g("div",Eo,[g("div",$o,[g("div",Lo,[Ro,g("div",No,[(_(!0),y(I,null,A(S(u).tags,((e,l)=>(_(),y("button",{key:l,class:"button is-selected is-light is-dark-outlined"},x(e),1)))),128))])])]),g("div",Ho,[g("div",Bo,[zo,g("div",{innerHTML:S(u).notes},null,8,Jo)])]),g("div",Ko,[b(M,{project:S(a).params.id},null,8,["project"])]),g("div",Go,[g("div",Wo,[Zo,g("div",Qo,[(_(!0),y(I,null,A(S(u).sales_people_info,(e=>(_(),y("div",Yo,[g("div",Xo,[b(O),b(n,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),g("h3",ec,x(e.username??"N/A")+" "+x(e.last_name??""),1),g("p",lc,x(e.role),1),g("div",ac,[b(v,{color:"primary",raised:""},{default:k((()=>[w(" View Profile ")])),_:1})])])])))),256))])])])])]),g("div",tc,["management"===S(r)?(_(),y("div",sc)):V("",!0),b(q,{project:S(a).params.id},null,8,["project"]),b(L,{projectId:S(a).params.id},null,8,["projectId"])])])])):V("",!0),"files"==S(r)?(_(),y("div",ic,[b(R,{projectId:S(a).params.id,files:S(u).uploaded_files,"onUpdate:onUploadFile":C},null,8,["projectId","files"])])):V("",!0),"documents"===S(r)?(_(),y("div",nc,[b(H,{leadId:S(a).params.id,uploaded_files:S(u).uploaded_files,getProjectInfo:C},null,8,["leadId","uploaded_files"])])):V("",!0),"proposals"===S(r)?(_(),y("div",oc,[g("div",cc,[g("div",uc,[g("ul",null,[g("li",{class:$(["childProposals"===S(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[21]||(i[21]=N(E((e=>m.value="childProposals"),["prevent"]),["space"])),onClick:i[22]||(i[22]=e=>m.value="childProposals")},dc,32)],2),g("li",{class:$(["groupedProposals"===S(m)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[23]||(i[23]=N(E((e=>m.value="groupedProposals"),["prevent"]),["space"])),onClick:i[24]||(i[24]=e=>{m.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await s.get(`/api/attachment/by-object/${a.params.id}/?type=${e}`);T.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},rc,32)],2)])])]),"childProposals"==S(m)?(_(),y("div",pc,[b($e,{"lead-id":S(a).params.id,onUpdateCompany:C},null,8,["lead-id"])])):V("",!0),"groupedProposals"==S(m)?(_(),y("div",mc,[b(B,{"doc-type":"proposal_formats","object-id":S(a).params.id},null,8,["object-id"])])):V("",!0)])):V("",!0),"activities"===S(r)?(_(),y("div",vc,[b(z,{jobId:S(a).params.id},null,8,["jobId"])])):V("",!0),"progress"===S(r)?(_(),y("div",fc,[b(J,{object:S(a).params.id,type:"job"},null,8,["object"])])):V("",!0),"finance"===S(r)?(_(),y("div",hc,[b(K)])):V("",!0),"activityLogs"===S(r)?(_(),y("div",_c,[b(G,{object_id:S(a).params.id||S(u).id,object_type:"lead"},null,8,["object_id"])])):V("",!0),"report"===S(r)?(_(),y("div",yc,[b(W)])):V("",!0),"tasks"===S(r)?(_(),y("div",gc,[b(Z,{projectID:S(a).params.id},null,8,["projectID"])])):V("",!0),"calculations"===S(r)?(_(),y("div",bc,[g("div",kc,[g("div",wc,[g("ul",null,[g("li",{class:$(["excel"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[25]||(i[25]=N(E((e=>d.value="excel"),["prevent"]),["space"])),onClick:i[26]||(i[26]=e=>d.value="excel")},xc,32)],2),g("li",{class:$(["custom"===S(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:i[27]||(i[27]=N(E((e=>d.value="custom"),["prevent"]),["space"])),onClick:i[28]||(i[28]=e=>d.value="custom")},jc,32)],2)])])]),"excel"==S(d)?(_(),y("div",Cc,[b(Q,{objectId:S(a).params.id},null,8,["objectId"])])):V("",!0),"custom"==S(d)?(_(),y("div",Vc,[b(Y,{objectId:S(a).params.id},null,8,["objectId"])])):V("",!0)])):V("",!0)])])]),S(c)?(_(),U(X,{key:0,addUpdateLeadModal:S(c),leadId:S(o),"onUpdate:modalHandler":i[29]||(i[29]=e=>c.value=!1),"onUpdate:OnSuccess":C},null,8,["addUpdateLeadModal","leadId"])):V("",!0)])}}});export{Tc as _};
