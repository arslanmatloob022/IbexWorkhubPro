import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-1e7bf8a6.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-6eb8232c.js";import{_ as a,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-522b8907.js";import{_ as l}from"./VIconWrap.vue_vue_type_style_index_0_lang-1f26d747.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-c8c3850c.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-363a386e.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-47a43eac.js";import{_ as o}from"./VControl-39887b1d.js";import{_ as u}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-9de448f3.js";import{f as c,y as d,r as p,x as _,$ as m,w as y,o as v,m as f,C as g,O as x,D as b,E as k,F as h,G as w,L as j,X as V,k as A,N as C,V as P,W as S,aS as O,U as q,I as L,K as T,Q as F,R as W,S as z,T as I,A as $}from"./index-7c1dcaaf.js";import{_ as N,a as U}from"./search-4-dark-2b5b440c.js";import{u as D}from"./useAPI-406751a8.js";import{f as E}from"./useSupportElement-83f217cb.js";import{u as R}from"./useNotyf-105f747a.js";import{u as K}from"./viewWrapper-68a4e9d7.js";import{b as M}from"./route-block-83d24a4e.js";import"./VFlex.vue_vue_type_style_index_0_lang-22af8f15.js";import"./via-placeholder-24645670.js";import"./VLabel.vue_vue_type_script_setup_true_lang-78d45496.js";import"./useVFieldContext-0e392ffd.js";import"./VPlaceloadWrap-58f1eb7e.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-1f831d5b.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-6beac42e.js";import"./VField.vue_vue_type_script_setup_true_lang-771aa9b9.js";import"./notyf-519206c8.js";import"./useThemeColors-1643f15c.js";const Y=e=>(F("data-v-96546e49"),e=e(),W(),e),B={key:1,class:"is-relative tabs-wrapper is-slider is-squared"},G={class:"page-content-inner"},H={class:"list-flex-toolbar is-reversed"},Q={class:"flex-list-v2"},X=Y((()=>k("img",{class:"light-image",src:N,alt:""},null,-1))),Z=Y((()=>k("img",{class:"dark-image",src:U,alt:""},null,-1))),J={key:1,class:"tab-content is-active"},ee={class:"light-text text-overflow"},te=["onClick"],ae=["onClick"],se=Y((()=>k("i",{style:{color:"var(--info)"},class:"fas fa-copy cu-pointer","aria-hidden":"true"},null,-1))),le={class:"item-name dark-inverted"},ne={class:"item-meta"},ie={class:"light-text mt-2"},re={class:"",style:{"font-size":"18px"}},oe={class:"item-name dark-inverted"},ue={class:"item-meta"},ce=z(c({__name:"IbexPaymentsList",setup(c){const F=d(),W=p(""),z=p(!1),I=R(),$=D();_();const N=p(""),U=p("paid"),K=p(12),M=p(6),Y=p(!1),ce=p({count:0,next:null,previous:null,results:[{id:"",client_info:{id:"",username:"",email:"",role:"",avatar:""},description:"",checkoutLink:"",type:"",created_by_info:{id:"",username:"",email:"",role:"",avatar:""},amount:0,status:"",created_at:"",created_by:"",client:null}]}),de={description:{label:"Description",grow:!0,media:!0},picture:{label:"Created by",grow:!0,media:!0},amount:{label:"Amount",align:"center"},client:{label:"Client",align:"center",grow:!0},status:"Status",team:{label:"Method"},actions:{label:"Actions",align:"end"}};m((()=>{const e=(_e.value-1)*K.value,t=e+K.value;return pe.value.slice(e,t)})),y((()=>F.query.page),((e,t)=>{e!=t&&me()}));const pe=m((()=>{if(N.value){const e=new RegExp(N.value,"i");return ce.value.results.filter((t=>t.id.match(e)||t.created_by_info.username.match(e)||t.type.match(e)||t.description.match(e)))}return ce.value.results})),_e=m((()=>{let e=F.query.page;return e=null==e||"undefined"==e?1:F.query.page,Number.parseInt(F.query.page)||1}));p(1);const me=async()=>{try{Y.value=!0;const e=await $.get(`/api/paypal/?page=${F.query.page?F.query.page:1}&page_size=${K.value}`);ce.value=e.data}catch(e){console.log(e)}finally{Y.value=!1}},ye=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ve=async()=>{try{z.value=!0;await $.delete(`/api/paypal/${W.value}/`);ye.value.isSweetAlertOpen=!1,I.success("Payment deleted successfully"),me()}catch(e){console.log(e)}finally{z.value=!1}},fe={created:"info",pending:"warning",canceled:"danger",succeeded:"primary",processing:"success"};return v((()=>{me()})),(c,d)=>{const p=u,_=o,m=r,y=s,v=i,F=n,z=l,$=a,D=t,R=e;return f(Y)?(g(),x(p,{key:0})):(g(),b("div",B,[k("div",G,[k("div",H,[h(_,{icon:"feather:search"},{default:w((()=>[j(k("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>A(N)?N.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,f(N)]])])),_:1})]),k("div",Q,[0===f(pe).length?(g(),x(m,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:w((()=>[X,Z])),_:1})):C("",!0),"paid"===f(U)?(g(),b("div",J,[f(ce).count?(g(),x($,{key:0,data:f(pe),columns:de,rounded:""},{body:w((()=>[h(O,{name:"list",tag:"div",class:"flex-list-inner"},{default:w((()=>[(g(!0),b(P,null,S(f(pe),(e=>(g(),b("div",{key:e.id,class:"flex-table-item"},[h(y,null,{default:w((()=>[k("div",null,[k("p",ee,q(e.description?e.description:"not added"),1),k("p",{class:L(["light-text text-overflow","succeeded"===e.status?"is-link":""]),onClick:t=>(e=>{if("succeeded"===e.status){const t=`https://dashboard.stripe.com/payments/${e.response?.id}`;window.open(t,"_blank")}})(e)}," Payment link ",10,te),"succeeded"!==e.status?(g(),b("p",{key:0,class:"mt-2",onClick:t=>{var a;(a=e.checkoutLink)?navigator.clipboard.writeText(a).then((()=>{I.success("Link copied to clipboard!")})).catch((e=>{I.error("Failed to copy the link: ",e)})):I.error("No link to copy!")}},[T(" Checkout link "),se],8,ae)):C("",!0)])])),_:2},1024),h(y,{column:{media:!0,grow:!0}},{default:w((()=>[k("div",null,[k("span",le,q(e?.created_by_info?.username),1),k("span",ne,[k("span",null,q(e.created_by_info?.email),1)]),k("span",ie,"At: "+q(f(E)(e.created_at)),1)])])),_:2},1024),h(y,null,{default:w((()=>[k("span",re,"$"+q(e.amount),1)])),_:2},1024),h(y,null,{default:w((()=>[k("div",null,[k("span",oe,q(e?.client_info?.username?e?.client_info?.username:"N/A"),1),k("span",ue,[k("span",null,q(e.client_info?.email),1)])])])),_:2},1024),h(y,null,{default:w((()=>[h(v,{elevated:"",raised:"",rounded:"",style:{"text-transform":"capitalize"},color:fe[e.status]},{default:w((()=>[T(q(e.status),1)])),_:2},1032,["color"])])),_:2},1024),h(y,null,{default:w((()=>["Stripe"==e.type?(g(),x(F,{key:0,picture:"/icons/stripe-48.png",squared:"",size:"medium"})):(g(),x(F,{key:1,picture:"/icons/paypal-48.png",squared:"",size:"medium"}))])),_:2},1024),h(y,{column:{align:"end"}},{default:w((()=>[h(z,{onClick:t=>{return a=e.id,W.value=a,void(ye.value={title:"Are you sure?",subtitle:"You will not be able to recover this Payment again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var a},color:"danger",class:"cu-pointer",icon:"lucide:trash"},null,8,["onClick"])])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):C("",!0),f(ce).count>f(K)?(g(),x(D,{key:1,"item-per-page":f(K),modelValue:f(_e),"onUpdate:modelValue":d[1]||(d[1]=e=>A(_e)?_e.value=e:null),"total-items":f(ce).count,"current-page":f(_e),"max-links-displayed":f(M)},null,8,["item-per-page","modelValue","total-items","current-page","max-links-displayed"])):C("",!0)])):C("",!0)])]),f(ye).isSweetAlertOpen?(g(),x(R,{key:0,isSweetAlertOpen:f(ye).isSweetAlertOpen,title:f(ye).title,loading:!1,subtitle:f(ye).subtitle,btntext:f(ye).btntext,onConfirm:ve,onCancel:()=>f(ye).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0)]))}}}),[["__scopeId","data-v-96546e49"]]),de={class:"page-content-inner"},pe=c({__name:"index",setup(e){I();return K().setPageTitle("Payments"),$((()=>({title:"Payments"}))),(e,t)=>{const a=ce;return g(),b("div",de,[h(a)])}}});"function"==typeof M&&M(pe);export{pe as default};
