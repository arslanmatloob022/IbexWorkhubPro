import{d as o}from"./index-a3511ab8.js";import{u as t}from"./userSession-1e35e5f3.js";import{u as e}from"./useAPI-2f913358.js";import{u as s}from"./layoutSwitcher-616936e2.js";import{u as r}from"./company-ca9a809c.js";import"./useNotyf-bee6672a.js";import"./notyf-bdcd12d6.js";import"./useThemeColors-9cb1eefd.js";import"./useSupportElement-ec851bb5.js";const a=s(),i=o((async({router:o,pinia:s})=>{const i=t(s),m=e(),u=r();if(i.isLoggedIn)try{const o=(await m.get("/v3/api/account/get_user_from_token")).data[0];o.company&&await u.loadCompany(o.company),a.setDynamicLayoutId("sideblock-default"),i.setUser(o)}catch(n){i.logoutUser()}o.beforeEach((o=>{if(o.meta.requiresAuth&&!i.isLoggedIn)return{name:"/auth/login",query:{redirect:o.fullPath}}}))}));export{i as default};
