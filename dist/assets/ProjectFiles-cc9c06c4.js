import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-2e6c648f.js";import{_ as t}from"./SweetAlert.vue_vue_type_style_index_0_lang-3bead4b7.js";import{_ as l}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-3ab8bc4e.js";import{F as a}from"./FullCalendar-9650a679.js";import{T as i,b as s,D as n,a as o,c as r,i as c}from"./index-a35a3d11.js";import{Z as d,P as u,X as m,c as p,Q as h,T as f,x as v,y as g,aS as y,W as k,v as b,aT as _,aU as w,ac as C}from"./index-51c95dce.js";import{i as x}from"./index-a67a7147.js";import{u as j}from"./useAPI-93c1587d.js";import{b as S}from"./useSupportElement-dad956f5.js";import{f as D,r as M,o as T,C as R,D as P,F as I,G as A,E as W,U as E,m as O,b as U,$ as H,av as V,O as F,L as z,X as N,k as $,K as G,N as L,I as q,H as Y,V as B,W as K,P as Q,al as X,J,a4 as Z,Q as ee,R as te,S as le,aS as ae}from"./index-ff07ea10.js";import{_ as ie}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-18f4b9ee.js";import{_ as se}from"./VTag.vue_vue_type_style_index_0_lang-d9bbc019.js";import{_ as ne}from"./VAvatar.vue_vue_type_style_index_0_lang-c58b961b.js";import{_ as oe}from"./VDropdown.vue_vue_type_style_index_0_lang-813e7a1a.js";import{_ as re}from"./VControl-c42c36b2.js";import{_ as ce}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-958fccde.js";import{_ as de,a as ue}from"./projects-dark-4a371d8a.js";import{u as me}from"./useNotyf-88b03f41.js";import{_ as pe}from"./VModal.vue_vue_type_style_index_0_lang-9a56314a.js";import{_ as he}from"./VField.vue_vue_type_script_setup_true_lang-402029c8.js";import{_ as fe}from"./VInput.vue_vue_type_script_setup_true_lang-be3c37d5.js";import{_ as ve}from"./VLabel.vue_vue_type_script_setup_true_lang-a0fe1228.js";import{_ as ge,a as ye}from"./search-4-dark-2b5b440c.js";import{_ as ke}from"./sheet-50221dfe.js";import{o as be}from"./via-placeholder-24645670.js";class _e extends h{constructor(){super(...arguments),this.buildDayTableModel=f(s),this.slicer=new n,this.state={labelId:_()}}render(){const{props:e,state:t,context:l}=this,{dateProfile:a,forPrint:i}=e,{options:s}=l,n=this.buildDayTableModel(a,l.dateProfileGenerator),r=this.slicer.sliceProps(e,a,s.nextDayThreshold,l,n),c=null!=e.tableWidth?e.tableWidth/s.aspectRatio:null,d=n.cells.length,u=null!=c?c/d:null;return g("div",{ref:e.elRef,"data-date":e.isoDateStr,className:"fc-multimonth-month",style:{width:e.width},role:"grid","aria-labelledby":t.labelId},g("div",{className:"fc-multimonth-header",style:{marginBottom:u},role:"presentation"},g("div",{className:"fc-multimonth-title",id:t.labelId},l.dateEnv.format(e.dateProfile.currentRange.start,e.titleFormat)),g("table",{className:["fc-multimonth-header-table",l.theme.getClass("table")].join(" "),role:"presentation"},g("thead",{role:"rowgroup"},g(w,{dateProfile:e.dateProfile,dates:n.headerDates,datesRepDistinctDays:!1})))),g("div",{className:["fc-multimonth-daygrid","fc-daygrid","fc-daygrid-body",!i&&"fc-daygrid-body-balanced",i&&"fc-daygrid-body-unbalanced",i&&"fc-daygrid-body-natural"].join(" "),style:{marginTop:-u}},g("table",{className:["fc-multimonth-daygrid-table",l.theme.getClass("table")].join(" "),style:{height:i?"":c},role:"presentation"},g("tbody",{role:"rowgroup"},g(o,Object.assign({},r,{dateProfile:a,cells:n.cells,eventSelection:e.eventSelection,dayMaxEvents:!i,dayMaxEventRows:!i,showWeekNumbers:s.weekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:i}))))))}}const we=d(1,"month");function Ce(e,t,l,a,i){const{start:s,end:n}=t.currentRange;let o=s;const c=[];for(;o.valueOf()<n.valueOf();){const s=l.add(o,we),n={start:e.skipHiddenDays(o),end:e.skipHiddenDays(s,-1,!0)};let d=r({currentRange:n,snapToWeek:!0,fixedWeekCount:a,dateEnv:l});d={start:e.skipHiddenDays(d.start),end:e.skipHiddenDays(d.end,-1,!0)};const u=t.activeRange?C(t.activeRange,i?d:n):null;c.push({currentDate:t.currentDate,isValid:t.isValid,validRange:t.validRange,renderRange:d,activeRange:u,currentRange:n,currentRangeUnit:"month",isRangeAllDay:!0,dateIncrement:t.dateIncrement,slotMinTime:t.slotMaxTime,slotMaxTime:t.slotMinTime}),o=s}return c}const xe=u({year:"numeric",month:"long"}),je=u({month:"long"});function Se(e,t){return e||(t[0].currentRange.start.getUTCFullYear()!==t[t.length-1].currentRange.start.getUTCFullYear()?xe:je)}const De={multiMonthTitleFormat:u,multiMonthMaxColumns:Number,multiMonthMinWidth:Number};m(".fc .fc-multimonth{border:1px solid var(--fc-border-color);display:flex;flex-wrap:wrap;overflow-x:hidden;overflow-y:auto}.fc .fc-multimonth-title{font-size:1.2em;font-weight:700;padding:1em 0;text-align:center}.fc .fc-multimonth-daygrid{background:var(--fc-page-bg-color)}.fc .fc-multimonth-daygrid-table,.fc .fc-multimonth-header-table{table-layout:fixed;width:100%}.fc .fc-multimonth-daygrid-table{border-top-style:hidden!important}.fc .fc-multimonth-singlecol .fc-multimonth{position:relative}.fc .fc-multimonth-singlecol .fc-multimonth-header{background:var(--fc-page-bg-color);position:relative;top:0;z-index:2}.fc .fc-multimonth-singlecol .fc-multimonth-daygrid{position:relative;z-index:1}.fc .fc-multimonth-singlecol .fc-multimonth-daygrid-table,.fc .fc-multimonth-singlecol .fc-multimonth-header-table{border-left-style:hidden;border-right-style:hidden}.fc .fc-multimonth-singlecol .fc-multimonth-month:last-child .fc-multimonth-daygrid-table{border-bottom-style:hidden}.fc .fc-multimonth-multicol{line-height:1}.fc .fc-multimonth-multicol .fc-multimonth-month{padding:0 1.2em 1.2em}.fc .fc-multimonth-multicol .fc-daygrid-more-link{border:1px solid var(--fc-event-border-color);display:block;float:none;padding:1px}.fc .fc-multimonth-compact{line-height:1}.fc .fc-multimonth-compact .fc-multimonth-daygrid-table,.fc .fc-multimonth-compact .fc-multimonth-header-table{font-size:.9em}.fc-media-screen .fc-multimonth-singlecol .fc-multimonth-header{position:sticky}.fc-media-print .fc-multimonth{overflow:visible}");var Me=p({name:"@fullcalendar/multimonth",initialView:"multiMonthYear",optionRefiners:De,views:{multiMonth:{component:class extends h{constructor(){super(...arguments),this.splitDateProfileByMonth=f(Ce),this.buildMonthFormat=f(Se),this.scrollElRef=v(),this.firstMonthElRef=v(),this.needsScrollReset=!1,this.handleSizing=e=>{e&&this.updateSize()}}render(){const{context:e,props:t,state:l}=this,{options:a}=e,{clientWidth:i,clientHeight:s}=l,n=l.monthHPadding||0,o=Math.min(null!=i?Math.floor(i/(a.multiMonthMinWidth+n)):1,a.multiMonthMaxColumns)||1,r=100/o+"%",c=null==i?null:i/o-n,d=null!=i&&1===o,u=this.splitDateProfileByMonth(e.dateProfileGenerator,t.dateProfile,e.dateEnv,!d&&a.fixedWeekCount,a.showNonCurrentDates),m=this.buildMonthFormat(a.multiMonthTitleFormat,u),p=["fc-multimonth",d?"fc-multimonth-singlecol":"fc-multimonth-multicol",null!=c&&c<400?"fc-multimonth-compact":"",t.isHeightAuto?"":"fc-scroller"];return g(k,{elRef:this.scrollElRef,elClasses:p,viewSpec:e.viewSpec},u.map(((e,l)=>{const a=y(e.currentRange.start);return g(_e,Object.assign({},t,{key:a,isoDateStr:a,elRef:0===l?this.firstMonthElRef:void 0,titleFormat:m,dateProfile:e,width:r,tableWidth:c,clientWidth:i,clientHeight:s}))})))}componentDidMount(){this.updateSize(),this.context.addResizeHandler(this.handleSizing),this.requestScrollReset()}componentDidUpdate(e){b(e,this.props)||this.handleSizing(!1),e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}updateSize(){const e=this.scrollElRef.current,t=this.firstMonthElRef.current;e&&this.setState({clientWidth:e.clientWidth,clientHeight:e.clientHeight}),t&&e&&null==this.state.monthHPadding&&this.setState({monthHPadding:e.clientWidth-t.firstChild.offsetWidth})}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&null!=this.state.monthHPadding){const{currentDate:e}=this.props.dateProfile,t=this.scrollElRef.current,l=t.querySelector(`[data-date="${y(e)}"]`);t.scrollTop=l.getBoundingClientRect().top-this.firstMonthElRef.current.getBoundingClientRect().top,this.needsScrollReset=!1}}shouldComponentUpdate(){return!0}},dateProfileGeneratorClass:i,multiMonthMinWidth:350,multiMonthMaxColumns:3},multiMonthYear:{type:"multiMonth",duration:{years:1},fixedWeekCount:!0,showNonCurrentDates:!1}}});const Te={class:"column is-12",id:"CalendarStyling"},Re=["onClick"],Pe={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},Ie={style:{"padding-right":"10px",color:"#f1f1f1"}},Ae=D({__name:"ProjectTasksCalendar",props:{projectID:{type:Number,required:!0}},setup(e){const t=e,l=j(),i=M([]),s=M(!1),n=M([]),o={pending:"#f39c12",in_progress:"#3498db",completed:"#2ecc71",cancelled:"#e74c3c"},r=M({plugins:[c,Me,x],initialView:"dayGridMonth",dayMaxEventRows:!1,height:"auto",selectable:!0,editable:!1,views:{dayGridMonth:{slotDuration:{week:3,day:7},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},headerToolbar:{left:"today prev,next",center:"title",right:"dayGridWeek,dayGridMonth,multiMonthYear"},events:[]});return T((()=>{(async()=>{try{s.value=!0;const e=await l.get(`api/task/${t.projectID}/project/`);i.value=e.data,n.value=i.value.map((e=>({id:e.id,start:e.startDate,end:S(e.endDate),title:e.title,color:e.color||"#2c3e50",description:e.description,borderColor:o[e.status]||"#2c3e50",status:e.status,project:e.project}))),r.value.events=n.value}catch(e){console.error("Failed to fetch tasks:",e)}finally{s.value=!1}})()})),(e,t)=>(R(),P("div",Te,[I(O(a),{options:r.value},{eventContent:A((e=>[W("div",{onClick:t=>{return l=e.event.extendedProps,void alert(`Task Detail:\n${l.title}\nStatus: ${l.status}`);var l},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px","background-color":"rgba(0, 0, 0, 0.3)"}},[W("p",Pe,E(e.event.title),1),W("p",Ie,E(new Date(e.event.start).toDateString())+" to "+E(new Date(e.event.end).toDateString()),1)],8,Re)])),_:1},8,["options"])]))}}),We=e=>(ee("data-v-13f64b69"),e=e(),te(),e),Ee={key:1},Oe={class:"list-flex-toolbar is-reversed"},Ue={class:"tabs-inner"},He={class:"tabs"},Ve=[We((()=>W("span",null,"All",-1)))],Fe=[We((()=>W("span",null,"Calendar",-1)))],ze=[We((()=>W("span",null,"Completed",-1)))],Ne=We((()=>W("li",{class:"tab-naver"},null,-1))),$e={class:"flex-list-wrapper flex-list-v2"},Ge={key:0},Le={class:"all-projects"},qe={class:"all-projects-header"},Ye={class:"header-item"},Be={class:"item-inner"},Ke=We((()=>W("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),Qe=We((()=>W("p",null,"Total Tasks",-1))),Xe={class:"header-item"},Je={class:"item-inner"},Ze=We((()=>W("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),et=We((()=>W("p",null,"Completed Tasks",-1))),tt={class:"header-item"},lt={class:"item-inner"},at=We((()=>W("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),it=We((()=>W("p",null,"Pending Tasks",-1))),st={class:"header-item"},nt={class:"item-inner"},ot=We((()=>W("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),rt=We((()=>W("p",null,"Active Tasks",-1))),ct={key:0,class:"columns is-multiline projects-card-grid"},dt={class:"column is-6"},ut={class:"top-section"},mt={class:"head"},pt=["onClick"],ht=["onClick"],ft=[We((()=>W("div",{class:"icon"},[W("i",{class:"lnir lnir-play","aria-hidden":"true"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Active"),W("span",null,"Start work on this task")],-1)))],vt=["onClick"],gt=[We((()=>W("div",{class:"icon"},[W("i",{class:"lnir lnir-playlist-alt","aria-hidden":"true"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Pending"),W("span",null,"Waiting to work on")],-1)))],yt=["onClick"],kt=[We((()=>W("div",{class:"icon"},[W("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Completed"),W("span",null,"Mark task as completed")],-1)))],bt=We((()=>W("hr",{class:"dropdown-divider"},null,-1))),_t=["onClick"],wt=[We((()=>W("div",{class:"icon"},[W("i",{class:"lnir lnir-pencil-alt","aria-hidden":"true"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Edit"),W("span",null,"Edit Task detail")],-1)))],Ct=["onClick"],xt=[We((()=>W("div",{class:"icon"},[W("i",{class:"lnir lnir-trash-can-alt-1","aria-hidden":"true"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Delete "),W("span",null,"Delete this task")],-1)))],jt=["onClick"],St=["innerHTML"],Dt=["onClick"],Mt={class:"foot-block"},Tt=We((()=>W("h4",{class:"heading"},"Worker(s)",-1))),Rt={class:"developers"},Pt={class:"foot-block"},It=We((()=>W("h4",{class:"heading"},"Start date",-1))),At={class:"foot-block"},Wt=We((()=>W("h4",{class:"heading"},"End date",-1))),Et={class:"foot-block"},Ot=We((()=>W("h4",{class:"heading"},"Status",-1))),Ut=We((()=>W("img",{class:"light-image is-larger",src:de,alt:""},null,-1))),Ht=We((()=>W("img",{class:"dark-image is-larger",src:ue,alt:""},null,-1))),Vt={key:1},Ft={class:"all-projects"},zt={key:0,class:"columns is-multiline projects-card-grid"},Nt=["onClick"],$t={class:"grid-item"},Gt={class:"top-section"},Lt={class:"head"},qt=["onClick"],Yt=[We((()=>W("div",{class:"icon"},[W("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Active"),W("span",null,"Start work on this task")],-1)))],Bt=["onClick"],Kt=[We((()=>W("div",{class:"icon"},[W("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Pending"),W("span",null,"Waiting to work on")],-1)))],Qt=["onClick"],Xt=[We((()=>W("div",{class:"icon"},[W("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Completed"),W("span",null,"Mark task as completed")],-1)))],Jt=We((()=>W("hr",{class:"dropdown-divider"},null,-1))),Zt=["onClick"],el=[We((()=>W("div",{class:"icon"},[W("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Edit"),W("span",null,"Edit Task detail")],-1)))],tl=["onClick"],ll=[We((()=>W("div",{class:"icon"},[W("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),We((()=>W("div",{class:"meta"},[W("span",null,"Delete "),W("span",null,"Delete this task")],-1)))],al={class:"body"},il={class:"bottom-section"},sl={class:"foot-block"},nl=We((()=>W("h4",{class:"heading"},"Worker(s)",-1))),ol={class:"developers"},rl={class:"foot-block"},cl=We((()=>W("h4",{class:"heading"},"Start date",-1))),dl={class:"foot-block"},ul=We((()=>W("h4",{class:"heading"},"End date",-1))),ml={class:"foot-block"},pl=We((()=>W("h4",{class:"heading"},"Status",-1))),hl=We((()=>W("img",{class:"light-image is-larger",src:de,alt:""},null,-1))),fl=We((()=>W("img",{class:"dark-image is-larger",src:ue,alt:""},null,-1))),vl={key:2},gl={class:"all-projects"},yl=le(D({__name:"ProjectsTasks",props:{projectID:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(a,{emit:i}){const s=a,n=U(),o=j(),r=me();M(1);const c=M("");M("Edit Project"),M("Add Task");const d=M(""),u=M("active"),m=M(0),p=M(!1),h=M(!1),f=M(0),v=M({}),g=M(""),y=M(!1),k=M("");M([{id:0,username:"",email:"",phoneNumber:""}]);const b=M([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),_=M({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),w=(e,t)=>{console.log("detail",e),v.value=e,k.value=t,y.value=!0},C=e=>{f.value=e,_.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},x=async()=>{try{p.value=!0;const e=await o.get(`api/task/${s.projectID}/project/`);b.value=e.data,console.log(e.data)}catch(e){console.log(e)}finally{p.value=!1}},S={active:"#336aeb",pending:"#faad42",canceled:"#e62864",completed:"#f3c2c2ff"},D={active:"info",pending:"warning",canceled:"danger",completed:"primary"},ee=H((()=>{let e=b.value.filter((e=>"active"==e.status));return i("update:completedTasks",e.length),e.length})),te=H((()=>{let e=b.value.filter((e=>"pending"==e.status));return i("update:activeTasks",e.length),e.length})),le=H((()=>b.value.filter((e=>"completed"==e.status)).length)),ae=e=>{g.value=e,h.value=!0},de=()=>{x(),h.value=!1,g.value=""},ue=async(e,t)=>{try{p.value=!0;await o.patch(`/api/task/${e}/`,{status:t,schedule_mode:localStorage.getItem("isScheduleMode")});x(),r.success(`Task set to ${t} successfully`),m.value=0,p.value=!1}catch(l){console.log(l)}},pe=async()=>{try{p.value=!0;const e=await o.delete(`/api/task/${f.value}/`);console.log(e),r.success("Task deleted successfully"),x(),_.value.isSweetAlertOpen=!1,m.value=0}catch(e){console.log(e)}finally{p.value=!1}},he=H((()=>{if(d.value){const e=new RegExp(d.value,"i");return b.value.filter((t=>"completed"!=t.status&&(t.title.match(e)||t.description.match(e)||t.status.match(e))))}return b.value.filter((e=>"completed"!=e.status))})),fe=H((()=>{if(d.value){const e=new RegExp(d.value,"i");return b.value.filter((t=>"completed"==t.status&&(t.title.match(e)||t.description.match(e)||t.status.match(e))))}return b.value.filter((e=>"completed"==e.status))}));return T((()=>{x()})),(a,i)=>{const o=ce,r=re,m=Q,f=X,j=oe,M=ne,T=se,U=ie,H=Ae,me=l,ve=t,ge=e,ye=V("tooltip");return R(),P(B,null,[O(p)?(R(),F(o,{key:0})):(R(),P("div",Ee,[W("div",Oe,[I(f,null,{default:A((()=>[I(r,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:A((()=>[z(W("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>$(d)?d.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[N,O(d)]])])),_:1}),"client"!=O(n).user.role?(R(),F(m,{key:0,onClick:i[1]||(i[1]=e=>ae()),color:"primary",icon:"fas fa-plus",elevated:"",raised:""},{default:A((()=>[G("Task")])),_:1})):L("",!0)])),_:1}),W("div",Ue,[W("div",He,[W("ul",null,[W("li",{class:q(["active"===O(u)&&"is-active"])},[W("a",{tabindex:"0",role:"button",onKeydown:i[2]||(i[2]=Y(J((e=>u.value="active"),["prevent"]),["space"])),onClick:i[3]||(i[3]=e=>u.value="active")},Ve,32)],2),W("li",{class:q(["calendar"===O(u)&&"is-active"])},[W("a",{tabindex:"0",role:"button",onKeydown:i[4]||(i[4]=Y(J((e=>u.value="calendar"),["prevent"]),["space"])),onClick:i[5]||(i[5]=e=>u.value="calendar")},Fe,32)],2),W("li",{class:q(["closed"===O(u)&&"is-active"])},[W("a",{tabindex:"0",role:"button",onKeydown:i[6]||(i[6]=Y(J((e=>u.value="closed"),["prevent"]),["space"])),onClick:i[7]||(i[7]=e=>u.value="closed")},ze,32)],2),Ne])])])]),W("div",$e,["active"===O(u)?(R(),P("div",Ge,[W("div",Le,[W("div",qe,[W("div",Ye,[W("div",Be,[Ke,W("span",null,E(O(b).length),1),Qe])]),W("div",Xe,[W("div",Je,[Ze,W("span",null,E(O(le)),1),et])]),W("div",tt,[W("div",lt,[at,W("span",null,E(O(te)),1),it])]),W("div",st,[W("div",nt,[ot,W("span",null,E(O(ee)),1),rt])])]),O(he).length?(R(),P("div",ct,[(R(!0),P(B,null,K(O(he),(e=>(R(),P("div",dt,[W("div",{class:"grid-item cu-pointer",style:Z({backgroundImage:`linear-gradient(350deg, transparent 65%, ${S[e.status]}30)`})},[W("div",ut,[W("div",mt,[W("h3",{onClick:t=>w(e,e.id),class:"cu-pointer"},E(e.title),9,pt),"client"!=O(n).user.role?(R(),F(j,{key:0,icon:"feather:more-vertical",spaced:"",right:""},{content:A((()=>[W("a",{onClick:t=>ue(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},ft,8,ht),W("a",{onClick:t=>ue(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},gt,8,vt),W("a",{onClick:t=>ue(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},kt,8,yt),bt,W("a",{onClick:t=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},wt,8,_t),W("a",{onClick:t=>C(e.id),role:"menuitem",class:"dropdown-item is-media"},xt,8,Ct)])),_:2},1024)):L("",!0)]),W("div",{onClick:t=>w(e,e.id),class:"body cu-pointer"},[W("p",{innerHTML:e.description},null,8,St)],8,jt)]),W("div",{onClick:t=>w(e,e.id),class:"cu-pointer bottom-section"},[W("div",Mt,[Tt,W("div",Rt,[(R(!0),P(B,null,K(e.workers,(e=>z((R(),F(M,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[ye,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),W("div",Pt,[It,W("p",null,E(e.startDate),1)]),W("div",At,[Wt,W("p",null,E(e.endDate),1)]),W("div",Et,[Ot,I(T,{outlined:"",rounded:"",style:{"text-transform":"capitalize"},color:D[e.status]},{default:A((()=>[G(E(e.status),1)])),_:2},1032,["color"])])],8,Dt)],4)])))),256))])):(R(),F(U,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:A((()=>[Ut,Ht])),_:1}))])])):"closed"===O(u)?(R(),P("div",Vt,[W("div",Ft,[O(fe).length?(R(),P("div",zt,[(R(!0),P(B,null,K(O(fe),(e=>(R(),P("div",{onClick:t=>w(e,e.id),class:"column is-6"},[W("div",$t,[W("div",Gt,[W("div",Lt,[W("h3",null,E(e.title),1),I(j,{icon:"feather:more-vertical",spaced:"",right:""},{content:A((()=>[W("a",{onClick:t=>ue(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Yt,8,qt),W("a",{onClick:t=>ue(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Kt,8,Bt),W("a",{onClick:t=>ue(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Xt,8,Qt),Jt,W("a",{onClick:t=>ae(e.id),role:"menuitem",class:"dropdown-item is-media"},el,8,Zt),W("a",{onClick:t=>C(e.id),role:"menuitem",class:"dropdown-item is-media"},ll,8,tl)])),_:2},1024)]),W("div",al,[W("p",null,E(e.description),1)])]),W("div",il,[W("div",sl,[nl,W("div",ol,[(R(!0),P(B,null,K(e.workers,(e=>z((R(),F(M,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[ye,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),W("div",rl,[cl,W("p",null,E(e.startDate),1)]),W("div",dl,[ul,W("p",null,E(e.endDate),1)]),W("div",ml,[pl,W("p",null,E(e.status),1)])])])],8,Nt)))),256))])):(R(),F(U,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:A((()=>[hl,fl])),_:1}))])])):"calendar"===O(u)?(R(),P("div",vl,[W("div",gl,[I(H,{projectID:s.projectID},null,8,["projectID"])])])):L("",!0)])])),O(y)?(R(),F(me,{key:2,taskDetailModal:O(y),taskData:O(v),taskId:O(k),"onUpdate:modalHandler":i[8]||(i[8]=e=>y.value=!1)},null,8,["taskDetailModal","taskData","taskId"])):L("",!0),O(_).isSweetAlertOpen?(R(),F(ve,{key:3,isSweetAlertOpen:O(_).isSweetAlertOpen,title:O(_).title,subtitle:O(_).subtitle,btntext:O(_).btntext,onConfirm:pe,loading:O(p),onCancel:()=>O(_).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):L("",!0),O(h)?(R(),F(ge,{key:4,projectID:s.projectID,isOpen:O(h),taskIdSelected:O(g),startDate:O(c),"onUpdate:modalHandler":de,"onUpdate:OnSuccess":x},null,8,["projectID","isOpen","taskIdSelected","startDate"])):L("",!0)],64)}}}),[["__scopeId","data-v-13f64b69"]]),kl=e=>(ee("data-v-0c7f5f21"),e=e(),te(),e),bl={class:"tile-grid-toolbar"},_l={class:"buttons"},wl={class:"tile-grid tile-grid-v2"},Cl=kl((()=>W("img",{class:"light-image",src:ge,alt:""},null,-1))),xl=kl((()=>W("img",{class:"dark-image",src:ye,alt:""},null,-1))),jl={class:"tile-grid-item"},Sl={class:"tile-grid-item-inner"},Dl={class:"meta"},Ml={class:"dark-inverted"},Tl=["onClick"],Rl=[kl((()=>W("div",{class:"icon"},[W("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1))),kl((()=>W("div",{class:"meta"},[W("span",null,"Delete"),W("span",null,"Delete this file")],-1)))],Pl={class:"modal-form columns is-multiline"},Il={class:"file has-name"},Al={class:"file-label"},Wl=kl((()=>W("span",{class:"file-cta"},[W("span",{class:"file-icon"},[W("i",{class:"fas fa-cloud-upload-alt"})]),W("span",{class:"file-label"}," Choose a fileâ€¦ ")],-1))),El={class:"file-name light-text"},Ol=le(D({__name:"ProjectFiles",props:{projectId:{},files:{}},emits:["update:onUploadFile"],setup(e,{emit:l}){const a=e,i=j(),s=me(),n=M(!1),o=M(!1),r=M(""),c=H((()=>r.value?a.files.filter((e=>e.match(new RegExp(r.value,"i")))):a.files)),d=M(""),u=M(""),m=M("");let p=null;const h=async()=>{try{n.value=!0;const e=await i.post(`/api/task/bulk-upload/${a.projectId}/`,{file:p,start:m.value});s.green("Tasks Will be generated automatically"),console.log(e),l("update:onUploadFile",null),n.value=!1}catch(e){console.log(e)}finally{o.value=!1}},f=e=>{const t=e.match(/\d{4}-\d{2}-\d{2}/);if(t){return t[0]}return"N/A"},v=e=>{let t=e.target.files[0];p=t,u.value=t.name},g=M({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),y=async()=>{try{n.value=!0;await i.patch(`/api/project/${a.projectId}/delete-doc-tasks/`,{document_name:d.value});l("update:onUploadFile",null),s.success("Sheet deleted successfully!"),g.value.isSweetAlertOpen=!1}catch(e){console.log(e)}finally{n.value=!1}};return(e,l)=>{const a=re,i=Q,s=ie,n=oe,p=t,k=ve,b=fe,_=he,w=pe;return R(),P(B,null,[W("div",null,[W("div",bl,[I(a,{icon:"feather:search"},{default:A((()=>[z(W("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>$(r)?r.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[N,O(r)]])])),_:1}),W("div",_l,[I(i,{icon:"fas fa-plus",raised:"",size:"small",light:"",onClick:l[1]||(l[1]=e=>o.value=!O(o)),outlined:"",color:"primary"},{default:A((()=>[G(" File ")])),_:1})])]),W("div",wl,[I(s,{class:q([0!==O(c).length&&"is-hidden"]),title:"There is not file uploaded",subtitle:"There is no file uploaded on this project to create the tasks. As you will upload the file and that will appear here on the spot",larger:""},{image:A((()=>[Cl,xl])),_:1},8,["class"]),I(ae,{name:"list",tag:"div",class:"columns is-multiline"},{default:A((()=>[(R(!0),P(B,null,K(O(c),(e=>(R(),P("div",{key:e.id,class:"column is-6"},[W("div",jl,[W("div",Sl,[W("img",{src:ke,alt:"",onErrorOnce:l[2]||(l[2]=e=>O(be)(150))},null,32),W("div",Dl,[W("span",Ml,E(e.length>20?e.slice(0,24):e),1),W("span",null,[W("span",null,"Updated: "+E(f(e)),1)])]),I(n,{icon:"feather:more-vertical",spaced:"",right:""},{content:A((()=>[W("a",{onClick:t=>{return l=e,d.value=l,void(g.value={title:"Are you sure?",subtitle:"This file and all task generated from this file will be deleted permanently!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l},role:"menuitem",class:"dropdown-item is-media"},Rl,8,Tl)])),_:2},1024)])])])))),128))])),_:1})])]),O(g).isSweetAlertOpen?(R(),F(p,{key:0,isSweetAlertOpen:O(g).isSweetAlertOpen,title:O(g).title,subtitle:O(g).subtitle,btntext:O(g).btntext,onConfirm:y,onCancel:()=>O(g).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):L("",!0),I(w,{is:"form",open:O(o),title:"Upload Task File",size:"medium",actions:"right",onClose:l[5]||(l[5]=e=>o.value=!1),onSubmit:J(h,["prevent"])},{content:A((()=>[W("div",Pl,[I(_,{class:"column is-12"},{default:A((()=>[I(k,null,{default:A((()=>[G("Start date of task")])),_:1}),I(a,null,{default:A((()=>[I(b,{modelValue:O(m),"onUpdate:modelValue":l[3]||(l[3]=e=>$(m)?m.value=e:null),type:"date"},null,8,["modelValue"])])),_:1})])),_:1}),I(_,{class:"column is-12",grouped:""},{default:A((()=>[I(a,null,{default:A((()=>[W("div",Il,[W("label",Al,[W("input",{onChange:v,class:"file-input",type:"file",name:"file",required:""},null,32),Wl,W("span",El,E(O(u)?O(u):"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:A((()=>[I(i,{onClick:l[4]||(l[4]=e=>o.value=!1),raised:""},{default:A((()=>[G("Close")])),_:1})])),action:A((()=>[I(i,{type:"submit",color:"primary",raised:""},{default:A((()=>[G("Upload")])),_:1})])),_:1},8,["open","onSubmit"])],64)}}}),[["__scopeId","data-v-0c7f5f21"]]);export{Ol as _,yl as a,Ae as b};
