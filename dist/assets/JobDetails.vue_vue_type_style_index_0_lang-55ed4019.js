import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-6f6321bf.js";import{c as l,_ as a}from"./VFlexTable.vue_vue_type_style_index_0_lang-94a9ad67.js";import{_ as t}from"./VIconWrap.vue_vue_type_style_index_0_lang-c1c99d95.js";import{_ as s}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-6c81ff89.js";import{_ as i}from"./VCheckbox.vue_vue_type_style_index_0_lang-6b2e2efa.js";import{_ as n}from"./VTextarea.vue_vue_type_script_setup_true_lang-b4483fe6.js";import{_ as o}from"./VField.vue_vue_type_script_setup_true_lang-3c363bc3.js";import{_ as c}from"./VInput.vue_vue_type_script_setup_true_lang-d38fee35.js";import{_ as d}from"./VControl-0d38e52d.js";import{f as u,b as r,r as p,w as m,$ as v,o as _,av as f,C as h,D as y,E as g,F as b,G as k,K as x,U as w,L as j,X as V,N as C,aS as T,m as U,O as S,V as I,W as A,P as M,al as P,Q as D,R as E,S as F,B as R,J as O,I as N,x as B,H as K,k as $,aB as J,y as H}from"./index-28c95c0d.js";import{_ as z,a as q}from"./search-4-dark-2b5b440c.js";import{u as G}from"./useAPI-2b4e8864.js";import{u as W}from"./useNotyf-157d8162.js";import{_ as Z}from"./ExcelFileEditor-aca2fe91.js";import{b as Q,a as X,C as Y,f as ee}from"./useSupportElement-c09b1442.js";import{_ as le}from"./VModal.vue_vue_type_style_index_0_lang-8ee47c4e.js";import{_ as ae}from"./VLabel.vue_vue_type_script_setup_true_lang-a1a78ba5.js";import{_ as te}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-0c628ecf.js";import{_ as se,a as ie}from"./ProjectFiles-27fd8b78.js";import{u as ne,_ as oe,a as ce}from"./groupedCircleCharts-151e26bf.js";import{b as de,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-b0f8e929.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-0eef1a9e.js";import{A as _e}from"./vue3-apexcharts.common-fd42eda0.js";import{u as fe}from"./salesSparksChart-551c57db.js";import{u as he}from"./revenueAreaChart-a018924d.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-93e29d4a.js";import{h as ge}from"./moment-1b9a430c.js";import{_ as be}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-5f8f579b.js";import{p as ke}from"./index-c1fc2d09.js";import{a as xe}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-c3b4e4e1.js";import{_ as we}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-3275ea8b.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-2123b31e.js";import{o as Ve}from"./via-placeholder-24645670.js";import{_ as Ce}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-9374b2ac.js";import{_ as Te}from"./VDropdown.vue_vue_type_style_index_0_lang-823a66ca.js";import{f as Ue}from"./index-5fa9b154.js";import{_ as Se}from"./UIWidget.vue_vue_type_style_index_0_lang-1355224b.js";import{_ as Ie}from"./JobTodos.vue_vue_type_style_index_0_lang-d555cedc.js";import{_ as Ae}from"./UserCardDropdown-95bfb3bc.js";import{_ as Me}from"./VTag.vue_vue_type_style_index_0_lang-60e2d185.js";import{_ as Pe}from"./VIconBox.vue_vue_type_style_index_0_lang-de1dc241.js";import{_ as De}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-e51a8a78.js";const Ee=e=>(D("data-v-6b746c41"),e=e(),E(),e),Fe={class:"column is-12"},Re={class:"list-flex-toolbar is-reversed"},Le={class:"columns is-multiline"},Oe={key:0,class:"column is-12 card p-4 curved mb-2"},Ne={class:"columns is-multiline"},Be={class:"column is-10"},Ke={class:"column is-2"},$e=Ee((()=>g("img",{class:"light-image",src:z,alt:""},null,-1))),Je=Ee((()=>g("img",{class:"dark-image",src:q,alt:""},null,-1))),He={key:0,class:"column is-12 card p-4 curved mb-2"},ze={class:"columns is-multiline"},qe={class:"column is-10"},Ge={class:"column is-2"},We={class:"is-flex space-between mb-4 bottom-border"},Ze={class:"title is-5 m-0"},Qe={class:"content"},Xe={class:"is-flex"},Ye={key:0,class:"columns is-multiline"},el={class:"column is-6"},ll={class:"column is-2"},al={class:"column is-2"},tl={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},nl={class:"column is-2"},ol={class:"column is-2"},cl={class:"column is-2"},dl={class:"column is-2"},ul={class:"is-flex columns is-multiline"},rl=u({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const u=e;r();const D=G(),E=W(),F=p(!1),R={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},L=p(!1),O=p(!1),N=p(!1),B=p([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),K=p(""),$=p(""),J=p({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),H=p({title:"",is_template:!1,object:u.objectId??"",description:""}),z=p({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await D.get(`/api/calculation-section/?object=${u.objectId??""}&user_id=${u.userId??""}&is_template=${u.fetchTemplates??""}`);B.value=e.data}catch(e){console.error(e)}finally{F.value=!1}},Z=async()=>{try{const e=H.value;await D.post("/api/calculation-section/",e);E.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{F.value=!1}};m((()=>J.value.width),(()=>{let e=0;e=J.value.height*J.value.width,J.value.item_area=e.toFixed(2)})),m((()=>J.value.item_unit_price),(()=>{let e=0;e=J.value.item_area*J.value.item_unit_price,J.value.item_total_price=e.toFixed(2)})),m((()=>J.value.quantity),(()=>{let e=0;e=J.value.item_total_price*J.value.quantity,J.value.grand_total_price=e.toFixed(2)}));const X=async()=>{try{const e=J.value;e.section=K.value;await D.post("/api/calculation-section-items/",e);E.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{F.value=!1}},Y=v((()=>{if($.value){const e=new RegExp($.value,"i");return B.value.filter((l=>l.title?.match(e)))}return B.value})),ee=async e=>{try{await D.delete(`/api/calculation-section/${e}/`),E.success("Section deleted successfully!"),q()}catch(l){console.error(l),E.error("Failed to delete sheet.")}};return _((async()=>{await q(),await q()})),(e,u)=>{const r=M,p=P,m=d,v=c,_=o,D=n,E=i,F=s,B=t,q=l,G=a,W=f("tooltip");return h(),y("div",Fe,[g("div",Re,[b(p,null,{default:k((()=>[b(r,{icon:O.value?"fas fa-window-close":"fas fa-plus",color:O.value?"warning":"primary",class:"ml-2",raised:"",onClick:u[0]||(u[0]=e=>O.value=!O.value)},{default:k((()=>[x(w(O.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),b(r,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:u[1]||(u[1]=e=>O.value=!O.value)},{default:k((()=>[x("Import")])),_:1})])),_:1}),g("div",null,[b(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>$.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,$.value]])])),_:1})])]),g("div",Le,[b(T,{name:"translate-page-y"},{default:k((()=>[O.value?(h(),y("div",Oe,[g("div",Ne,[g("div",Be,[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:H.value.title,"onUpdate:modelValue":u[3]||(u[3]=e=>H.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(D,{modelValue:H.value.description,"onUpdate:modelValue":u[4]||(u[4]=e=>H.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ke,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:Z},{default:k((()=>[x(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(E,{modelValue:H.value.is_template,"onUpdate:modelValue":u[5]||(u[5]=e=>H.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):C("",!0)])),_:1}),U(Y).length?C("",!0):(h(),S(F,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:k((()=>[$e,Je])),_:1})),b(T,{name:"translate-page-y"},{default:k((()=>[N.value?(h(),y("div",He,[g("div",ze,[g("div",qe,[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:z.value.title,"onUpdate:modelValue":u[6]||(u[6]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(D,{modelValue:z.value.description,"onUpdate:modelValue":u[7]||(u[7]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",Ge,[b(r,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:Z},{default:k((()=>[x(" Add Section")])),_:1}),b(m,{raw:"",subcontrol:""},{default:k((()=>[b(E,{modelValue:z.value.is_template,"onUpdate:modelValue":u[8]||(u[8]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):C("",!0)])),_:1}),b(T,{name:"from-bottom"},{default:k((()=>[U(Y).length?(h(!0),y(I,{key:0},A(U(Y),((e,l)=>(h(),y("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[g("div",We,[g("div",null,[g("h4",Ze,w(e.title),1),g("div",Qe,[g("p",null,w(U(Q)(e.created_at)),1)])]),g("div",Xe,[b(B,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),j(b(B,{icon:"fas fa-plus",color:L.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{K.value=e,L.value=!L.value,0==L.value&&(J.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[W,"Add Item",void 0,{rounded:!0,primary:!0}]]),j(b(B,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[W,"Create Template",void 0,{rounded:!0,warning:!0}]]),b(B,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),L.value?(h(),y("div",Ye,[g("div",el,[b(_,{label:"Title"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.title,"onUpdate:modelValue":u[9]||(u[9]=e=>J.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ll,[b(_,{label:"Height"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.height,"onUpdate:modelValue":u[10]||(u[10]=e=>J.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",al,[b(_,{label:"Width"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.width,"onUpdate:modelValue":u[11]||(u[11]=e=>J.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",tl,[b(_,{label:"Area"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_area,"onUpdate:modelValue":u[12]||(u[12]=e=>J.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",sl,[b(_,{label:"Unit"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.unit,"onUpdate:modelValue":u[13]||(u[13]=e=>J.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",il,[b(_,{label:"Unit Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_unit_price,"onUpdate:modelValue":u[14]||(u[14]=e=>J.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",nl,[b(_,{label:"Total Price"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.item_total_price,"onUpdate:modelValue":u[15]||(u[15]=e=>J.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",ol,[b(_,{label:"Quantity"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.quantity,"onUpdate:modelValue":u[16]||(u[16]=e=>J.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",cl,[b(_,{label:"Grand Total"},{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:J.value.grand_total_price,"onUpdate:modelValue":u[17]||(u[17]=e=>J.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",dl,[b(r,{light:"",fullwidth:"",onClick:X,color:"primary",outlined:"",class:"mt-5"},{default:k((()=>[x("Add Item")])),_:1})])])):C("",!0),g("div",ul,[e.items.length?(h(),S(G,{key:0,class:"column is-12",data:e.items,columns:R,compact:""},{body:k((()=>[b(T,{name:"list",tag:"div",class:"flex-list-inner"},{default:k((()=>[(h(!0),y(I,null,A(e.items,(e=>(h(),y("div",{key:e.id,class:"flex-table-item"},[b(q,{column:{grow:!0},"data-th":"Label"},{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,null,{default:k((()=>[b(_,null,{default:k((()=>[b(m,null,{default:k((()=>[b(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),b(q,{column:{align:"end"}},{default:k((()=>[b(B,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),b(B,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):C("",!0)])])))),128)):C("",!0)])),_:1})])])}}}),pl=F(rl,[["__scopeId","data-v-6b746c41"]]),ml=e=>(D("data-v-00dd0426"),e=e(),E(),e),vl={key:1},_l={class:"columns is-multiline"},fl={class:"list-flex-toolbar is-reversed column is-12"},hl={class:"multiselect-single-label"},yl=["src"],gl=["src"],bl={class:"is-flex"},kl={class:"card p-4 curved is-flex space-between"},xl={class:"subtitle is-5 m-0"},wl={class:"content"},jl={class:"is-flex"},Vl={class:"modal-form columns is-multiline"},Cl={class:"file has-name"},Tl={class:"file-label"},Ul=ml((()=>g("span",{class:"file-cta"},[g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})]),g("span",{class:"file-label"}," Choose a file… ")],-1))),Sl={class:"file-name light-text"},Il=u({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e,a=r();p(null);const s=G(),i=W(),n=p(!1);p([[""]]);const u=p([]),f=p([]),T=p(""),D=p(!1);p("");const E=p("");p("");const F=p(!1),L=p(0),N=p({file:"",title:"",user_id:a.user.id,object_id:l.objectId}),B=e=>{let l=e.target.files[0];N.value.file=l,E.value=l.name,N.value.title=l.name},K=p(""),$=p([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),J=async()=>{try{n.value=!0;const e=await s.get("/api/excel-files/");u.value=e.data}catch(e){console.error(e)}finally{n.value=!1}},H=(e="")=>{L.value=e,F.value=!0},z=p(!1),q=async()=>{try{z.value=!0;const e=X(N.value,[""]);await s.post("/api/excel-files/upload-excel/",e);J(),i.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,D.value=!1}};m((()=>K.value),(e=>{e&&(async e=>{try{z.value=!0,await s.post(`/api/excel-files/create-from-template/${e}/`),i.success("Sheet create successfully"),J()}catch(l){console.error(l)}finally{z.value=!1,D.value=!1}})(e)}));p("excel");const Y=v((()=>{if(T.value){const e=new RegExp(T.value,"i");return u.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return u.value.filter((e=>0==e.is_template))}));return v((()=>{if(T.value){const e=new RegExp(T.value,"i");return f.value.filter((l=>l.title?.match(e)))}return f.value})),_((async()=>{l.fetchAll&&await J(),l.userId&&(async()=>{try{n.value=!0;const e=await s.get(`/api/excel-files/by-user/${l.userId}/`);u.value=e.data}catch(e){console.error(e)}finally{n.value=!1}})(),(async()=>{try{n.value=!0;const e=await s.get("/api/excel-files/templates/");f.value=e.data,$.value=f.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{n.value=!1}})(),await J()})),(e,l)=>{const a=te,u=R("Multiselect"),r=d,p=o,m=M,v=P,_=t,f=Z,z=ae,G=c,W=le;return n.value?(h(),S(a,{key:0})):(h(),y("div",vl,[g("div",_l,[g("div",fl,[b(v,null,{default:k((()=>[b(p,{style:{width:"260px"}},{default:k((({id:e})=>[b(r,null,{default:k((()=>[b(u,{modelValue:K.value,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:$.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:k((({value:e})=>[g("div",hl,[g("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,yl),x(" "+w(e.name),1)])])),option:k((({option:e})=>[g("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,gl),x(" "+w(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(m,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>H())},{default:k((()=>[x("New Sheet")])),_:1}),b(m,{icon:"fas fa-upload",raised:"",light:"",onClick:l[2]||(l[2]=e=>D.value=!D.value),outlined:"",color:"primary"},{default:k((()=>[x(" File ")])),_:1})])),_:1}),g("div",bl,[b(r,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>T.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,T.value]])])),_:1})])]),(h(!0),y(I,null,A(U(Y),((e,l)=>(h(),y("div",{class:"column is-6",key:e.id},[g("div",kl,[g("div",null,[g("h4",xl,w(e.title),1),g("div",wl,[g("p",null,w(U(Q)(e.created_at)),1)])]),g("div",jl,[b(_,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>H(e.id),"has-background":""},null,8,["onClick"]),b(_,{onClick:l=>(async e=>{try{await s.delete(`/api/excel-files/${e}/`),i.success("Sheet deleted successfully!"),J()}catch(l){console.error(l),i.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128))]),F.value?(h(),S(f,{key:0,class:"fullscreen","excel-file-modal":F.value,fileId:L.value,isTemplate:!1,"onUpdate:modalHandler":l[4]||(l[4]=e=>{F.value=!1,J()})},null,8,["excel-file-modal","fileId"])):C("",!0),b(W,{is:"form",open:D.value,title:"Upload Task File",size:"medium",actions:"right",onClose:l[7]||(l[7]=e=>D.value=!1),onSubmit:O(q,["prevent"])},{content:k((()=>[g("div",Vl,[b(p,{class:"column is-12"},{default:k((()=>[b(z,null,{default:k((()=>[x("File Title")])),_:1}),b(r,null,{default:k((()=>[b(G,{modelValue:N.value.title,"onUpdate:modelValue":l[5]||(l[5]=e=>N.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),b(p,{class:"column is-12",grouped:""},{default:k((()=>[b(r,null,{default:k((()=>[g("div",Cl,[g("label",Tl,[g("input",{onChange:B,class:"file-input",type:"file",name:"file",required:""},null,32),Ul,g("span",Sl,w(E.value?E.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:k((()=>[b(m,{onClick:l[6]||(l[6]=e=>D.value=!1),raised:""},{default:k((()=>[x("Close")])),_:1})])),action:k((()=>[b(m,{type:"submit",color:"primary",raised:""},{default:k((()=>[x("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Al=F(Il,[["__scopeId","data-v-00dd0426"]]),Ml={class:"columns is-multiline"},Pl={class:"column is-3"},Dl={class:"column is-3"},El={class:"column is-3"},Fl={class:"column is-3"},Rl={class:"column is-6"},Ll={class:"column is-6"},Ol={class:"column is-6"},Nl={class:"column is-6"},Bl={class:"column is-6"},Kl={class:"column is-6"},$l=u({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=fe(),{revenueOptions:i}=he(),{lineStatsChartOptions:n}=de(),{flexRadialChartCircleOptions:o}=ue(),{flexRadialChartStripesOptions:c}=re(),{widgetGaugeGroup1Options:d,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ne();return(e,_)=>{const f=ve,x=me,w=oe,j=ce;return h(),y("div",Ml,[g("div",Pl,[b(f,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark1",height:U(l).chart.height,type:U(l).chart.type,series:U(l).series,options:U(l)},null,8,["height","type","series","options"])])),_:1})]),g("div",Dl,[b(f,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark2",height:U(a).chart.height,type:U(a).chart.type,series:U(a).series,options:U(a)},null,8,["height","type","series","options"])])),_:1})]),g("div",El,[b(f,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark3",height:U(t).chart.height,type:U(t).chart.type,series:U(t).series,options:U(t)},null,8,["height","type","series","options"])])),_:1})]),g("div",Fl,[b(f,{straight:""},{default:k((()=>[b(U(_e),{id:"widget-spark4",height:U(s).chart.height,type:U(s).chart.type,series:U(s).series,options:U(s)},null,8,["height","type","series","options"])])),_:1})]),g("div",Rl,[b(x,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(U(_e),{id:"line-stats-widget-chart",height:U(n).chart.height,type:U(n).chart.type,series:U(n).series,options:U(n)},null,8,["height","type","series","options"])])),_:1})]),g("div",Ll,[b(x,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:k((()=>[b(U(_e),{id:"line-stats-area-chart",height:U(i).chart.height,type:U(i).chart.type,series:U(i).series,options:U(i)},null,8,["height","type","series","options"])])),_:1})]),g("div",Ol,[b(w,{title:"Sales Revenue",straight:""},{default:k((()=>[b(U(_e),{id:"flex-stat-circle",height:U(o).chart.height,type:U(o).chart.type,series:U(o).series,options:U(o)},null,8,["height","type","series","options"])])),_:1})]),g("div",Nl,[b(w,{title:"Sales Revenue",straight:""},{default:k((()=>[b(U(_e),{id:"flex-stat-radial",height:U(c).chart.height,type:U(c).chart.type,series:U(c).series,options:U(c)},null,8,["height","type","series","options"])])),_:1})]),g("div",Bl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:k((()=>[b(U(_e),{id:"group-radial-1",height:U(p).chart.height,type:U(p).chart.type,series:U(p).series,options:U(p)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(U(_e),{id:"group-radial-2",height:U(m).chart.height,type:U(m).chart.type,series:U(m).series,options:U(m)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(U(_e),{id:"group-radial-3",height:U(v).chart.height,type:U(v).chart.type,series:U(v).series,options:U(v)},null,8,["height","type","series","options"])])),_:1})]),g("div",Kl,[b(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:k((()=>[b(U(_e),{id:"group-gauge-1",height:U(d).chart.height,type:U(d).chart.type,series:U(d).series,options:U(d)},null,8,["height","type","series","options"])])),chart2:k((()=>[b(U(_e),{id:"group-gauge-2",height:U(u).chart.height,type:U(u).chart.type,series:U(u).series,options:U(u)},null,8,["height","type","series","options"])])),chart3:k((()=>[b(U(_e),{id:"group-gauge-3",height:U(r).chart.height,type:U(r).chart.type,series:U(r).series,options:U(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Jl=e=>(D("data-v-1f68036b"),e=e(),E(),e),Hl={class:"timeline-wrapper"},zl=Jl((()=>g("div",{class:"timeline-header"},null,-1))),ql={class:"timeline-wrapper-inner"},Gl={class:"timeline-container"},Wl={class:"timeline-item is-unread"},Zl={class:"date"},Ql={class:"content-wrap"},Xl={class:"content-box"},Yl=Jl((()=>g("div",{class:"status"},null,-1))),ea={class:"box-text"},la={class:"meta-text"},aa=["innerHTML"],ta=u({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=G(),t=p([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return _((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=ye;return h(),y("div",Hl,[zl,g("div",ql,[g("div",Gl,[(h(!0),y(I,null,A(U(t),(e=>(h(),y("div",Wl,[g("div",Zl,[g("span",null,w(U(ge)(e.timestamp).format("ddd, mm yyyy")),1)]),g("div",{class:N(["dot",s[e.action]])},null,2),g("div",Ql,[g("div",Xl,[Yl,b(a,{picture:e.actor_info?.avatar},null,8,["picture"]),g("div",ea,[g("div",la,[g("p",null,[g("span",null,w(e.actor_info?.username??"N/A")+" "+w(e.actor_info?.last_name??"N/A"),1),g("span",{class:"log-message",innerHTML:e.message},null,8,aa)]),g("span",null,w(U(ge)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),sa=F(ta,[["__scopeId","data-v-1f68036b"]]),ia={class:"table is-striped is-fullwidth"},na=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Job"),g("th",{scope:"col"},"ID"),g("th",{scope:"col"},"Title"),g("th",{scope:"col"},"Status"),g("th",{scope:"col"},"Total Price"),g("th",{scope:"col"},"Total Tax"),g("th",{scope:"col"},"Amount Paid"),g("th",{scope:"col"},"Balance"),g("th",{scope:"col"},"Deadline"),g("th",{scope:"col"},"Date Paid"),g("th",{scope:"col"},"Files"),g("th",{scope:"col",class:"is-end"},"Actions")])],-1),oa=g("td",null,"Tina",-1),ca=g("td",null,"Bergmann",-1),da=g("td",null,"Sales",-1),ua=g("td",null,"Tina",-1),ra=g("td",null,"Bergmann",-1),pa=g("td",null,"Sales",-1),ma=g("td",null,"Tina",-1),va=g("td",null,"Bergmann",-1),_a=g("td",null,"Sales",-1),fa=g("td",null,"Bergmann",-1),ha=g("td",null,"Sales",-1),ya={class:"is-end"},ga={class:"is-flex is-justify-content-flex-end"},ba=g("td",null,"Tina",-1),ka=g("td",null,"Bergmann",-1),xa=g("td",null,"Sales",-1),wa=g("td",null,"Tina",-1),ja=g("td",null,"Bergmann",-1),Va=g("td",null,"Sales",-1),Ca=g("td",null,"Tina",-1),Ta=g("td",null,"Bergmann",-1),Ua=g("td",null,"Sales",-1),Sa=g("td",null,"Bergmann",-1),Ia=g("td",null,"Sales",-1),Aa={class:"is-end"},Ma={class:"is-flex is-justify-content-flex-end"},Pa=g("td",null,"Tina",-1),Da=g("td",null,"Bergmann",-1),Ea=g("td",null,"Sales",-1),Fa=g("td",null,"Tina",-1),Ra=g("td",null,"Bergmann",-1),La=g("td",null,"Sales",-1),Oa=g("td",null,"Tina",-1),Na=g("td",null,"Bergmann",-1),Ba=g("td",null,"Sales",-1),Ka=g("td",null,"Bergmann",-1),$a=g("td",null,"Sales",-1),Ja={class:"is-end"},Ha={class:"is-flex is-justify-content-flex-end"},za=g("td",null,"Tina",-1),qa=g("td",null,"Bergmann",-1),Ga=g("td",null,"Sales",-1),Wa=g("td",null,"Tina",-1),Za=g("td",null,"Bergmann",-1),Qa=g("td",null,"Sales",-1),Xa=g("td",null,"Tina",-1),Ya=g("td",null,"Bergmann",-1),et=g("td",null,"Sales",-1),lt=g("td",null,"Bergmann",-1),at=g("td",null,"Sales",-1),tt={class:"is-end"},st={class:"is-flex is-justify-content-flex-end"},it=u({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;B();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=be;return h(),y("table",ia,[na,g("tbody",null,[g("tr",null,[oa,ca,da,ua,ra,pa,ma,va,_a,fa,ha,g("td",ya,[g("div",ga,[b(a)])])]),g("tr",null,[ba,ka,xa,wa,ja,Va,Ca,Ta,Ua,Sa,Ia,g("td",Aa,[g("div",Ma,[b(a)])])]),g("tr",null,[Pa,Da,Ea,Fa,Ra,La,Oa,Na,Ba,Ka,$a,g("td",Ja,[g("div",Ha,[b(a)])])]),g("tr",null,[za,qa,Ga,Wa,Za,Qa,Xa,Ya,et,lt,at,g("td",tt,[g("div",st,[b(a)])])])])])}}}),nt={class:"table is-striped is-fullwidth"},ot=g("thead",null,[g("tr",null,[g("th",{scope:"col"},"First Name"),g("th",{scope:"col"},"Last Name"),g("th",{scope:"col"},"Position"),g("th",{scope:"col",class:"is-end"},[g("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),ct=g("td",null,"Tina",-1),dt=g("td",null,"Bergmann",-1),ut=g("td",null,"Head of Sales",-1),rt={class:"is-end"},pt={class:"is-flex is-justify-content-flex-end"},mt=g("td",null,"John",-1),vt=g("td",null,"Wistmus",-1),_t=g("td",null,"Senior Executive",-1),ft={class:"is-end"},ht={class:"is-flex is-justify-content-flex-end"},yt=g("td",null,"Sam",-1),gt=g("td",null,"Watson",-1),bt=g("td",null,"Software Engineer",-1),kt={class:"is-end"},xt={class:"is-flex is-justify-content-flex-end"},wt=g("td",null,"Jolaine",-1),jt=g("td",null,"Joestar",-1),Vt=g("td",null,"HR Manager",-1),Ct={class:"is-end"},Tt={class:"is-flex is-justify-content-flex-end"},Ut=g("td",null,"Anders",-1),St=g("td",null,"Jensen",-1),It=g("td",null,"Accountant",-1),At={class:"is-end"},Mt={class:"is-flex is-justify-content-flex-end"},Pt=u({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;B();const t=p("");return p(l.activeTab),v((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=be;return h(),y("table",nt,[ot,g("tbody",null,[g("tr",null,[ct,dt,ut,g("td",rt,[g("div",pt,[b(a)])])]),g("tr",null,[mt,vt,_t,g("td",ft,[g("div",ht,[b(a)])])]),g("tr",null,[yt,gt,bt,g("td",kt,[g("div",xt,[b(a)])])]),g("tr",null,[wt,jt,Vt,g("td",Ct,[g("div",Tt,[b(a)])])]),g("tr",null,[Ut,St,It,g("td",At,[g("div",Mt,[b(a)])])])])])}}}),Dt={class:"columns is-multiline"},Et={class:"column is-12"},Ft={class:"toolbar"},Rt={class:"tabs-inner"},Lt={class:"tabs"},Ot=g("span",null,"Estimate",-1),Nt=[Ot],Bt=g("span",null,"Budget",-1),Kt=[Bt],$t=g("span",null,"Owner Invoice",-1),Jt=[$t],Ht=g("li",{class:"tab-naver"},null,-1),zt={key:0,class:"column is-12"},qt={key:1,class:"column is-12"},Gt={key:2,class:"column is-12"},Wt=u({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;B();const a=p("estimate"),t=p("");return v((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Pt,s=it;return h(),y("div",Dt,[g("div",Et,[g("div",Ft,[g("div",Rt,[g("div",Lt,[g("ul",null,[g("li",{class:N(["estimate"===U(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=K(O((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},Nt,32)],2),g("li",{class:N(["budget"===U(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=K(O((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},Kt,32)],2),g("li",{class:N(["invoice"===U(a)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=K(O((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Jt,32)],2),Ht])])])])]),"estimate"===U(a)?(h(),y("div",zt,[b(t)])):C("",!0),"budget"===U(a)?(h(),y("div",qt)):C("",!0),"invoice"===U(a)?(h(),y("div",Gt,[b(s)])):C("",!0)])}}}),Zt={class:"user-grid-toolbar"},Qt=g("span",{class:"icon"},[g("i",{class:"fas fa-plus"})],-1),Xt=g("span",null,"Progress",-1),Yt={class:"user-grid user-grid-v1"},es={class:"columns is-multiline"},ls={class:"grid-item"},as={class:"is-flex"},ts=u({__name:"JobProgressLoader",setup(e){const l=p(""),a=p(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=d,n=R("Multiselect"),c=o,u=M,r=P,p=J,m=je,v=we;return h(),y("div",null,[g("div",Zt,[b(i,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>$(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,U(l)]])])),_:1}),b(r,null,{default:k((()=>[b(c,{class:"h-hidden-mobile"},{default:k((()=>[b(i,null,{default:k((()=>[b(n,{modelValue:U(a),"onUpdate:modelValue":s[1]||(s[1]=e=>$(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(u,null,{default:k((()=>[Qt,Xt])),_:1})])),_:1})]),g("div",Yt,[g("div",es,[(h(),y(I,null,A(20,(e=>g("div",{key:e,class:"column is-3"},[g("div",ls,[b(p,{height:"160px",centered:"",class:"mb-2"}),b(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),g("div",as,[b(v,{size:"small",class:"mx-1"}),b(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),ss={key:1},is={class:"card-grid-toolbar"},ns={class:"buttons"},os=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),cs=g("span",null,"Progress",-1),ds={class:"card-grid card-grid-v4"},us=g("img",{class:"light-image",src:z,alt:""},null,-1),rs=g("img",{class:"dark-image",src:q,alt:""},null,-1),ps=["href","title"],ms=["src","alt"],vs={class:"card-grid-item-content"},_s={class:"dark-inverted"},fs={key:0},hs=g("summary",null,"Read More",-1),ys={key:0,class:"card-grid-item-footer"},gs={class:"meta"},bs={class:"dark-inverted"},ks=u({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=G(),t=p(""),i=p(!1),n=p(!1),c=p(0),u=["All Posts","Recent Posts","Older Posts","Popular Posts"],r=p([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),m=async()=>{try{i.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);r.value=e.data}catch(e){console.log(e)}finally{i.value=!1}};v((()=>r.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const f=v((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),r.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return r.value}));return _((()=>{"job"===l.type&&m()})),(e,a)=>{const r=ts,p=d,v=R("Multiselect"),_=o,P=M,D=s,E=ye,F=xe;return U(i)?(h(),S(r,{key:0})):(h(),y("div",ss,[g("div",is,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>$(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,U(t)]])])),_:1}),g("div",ns,[b(_,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(v,{modelValue:U(c),"onUpdate:modelValue":a[1]||(a[1]=e=>$(c)?c.value=e:null),options:u,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(P,{onClick:a[2]||(a[2]=e=>n.value=!U(n)),color:"primary",raised:""},{default:k((()=>[os,cs])),_:1})])]),g("div",ds,[b(D,{class:N([0!==U(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[us,rs])),_:1},8,["class"]),b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(h(!0),y(I,null,A(U(f),(e=>(h(),y("div",{key:e.id,class:"column is-3"},[g("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[g("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>U(Ve)(400,300))},null,40,ms),g("div",vs,[g("h3",_s,w(e.title?e.title:"No Title"),1),g("p",null,[x(w(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(h(),y("details",fs,[hs,x(" "+w(e.description?e.description:""),1)])):C("",!0)])]),e.uploaded_by_info?(h(),y("div",ys,[b(E,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),g("div",gs,[g("span",bs,w(e.uploaded_by_info.username??"N/A")+" "+w(e.uploaded_by_info.last_name??""),1),g("span",null,w(U(Q)(e.created_at)),1)])])):C("",!0)],8,ps)])))),128))])),_:1})]),U(n)?(h(),S(F,{key:0,job:l.object,openProgressModal:U(n),"onUpdate:OnSuccess":m,"onClose:ModalHandler":a[4]||(a[4]=e=>n.value=!1)},null,8,["job","openProgressModal"])):C("",!0)]))}}}),xs={class:"modal-form columns is-multiline"},ws={class:"column is-full"},js={class:"field"},Vs=g("label",{class:"label"},"Title ",-1),Cs={class:"control"},Ts={class:"field column is-half"},Us={class:"file"},Ss={class:"file-label"},Is={class:"file-cta"},As=g("span",{class:"file-icon"},[g("i",{class:"fas fa-cloud-upload-alt"})],-1),Ms={class:"file-label"},Ps=u({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;p(null);const t=G(),s=W(),i=p(!1),n=r(),c=()=>{l("close:ModalHandler",!1)},u=p({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),m=async()=>{try{i.value=!0;const e=X(u.value,["file"]);await t.post("/api/attachment/",e);Y({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${u.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),c()}catch(e){console.log(e)}finally{i.value=!1}},v=p(""),f=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(u.value.file=a,v.value=a.name)};return _((()=>{})),(e,l)=>{const t=d,s=o,n=M,r=le;return h(),S(r,{is:"form",open:a.openFileModal,title:"Add Progress",size:"medium",actions:"right",onSubmit:O(m,["prevent"]),onClose:c},{content:k((()=>[g("div",xs,[g("div",ws,[g("div",js,[Vs,g("div",Cs,[j(g("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>U(u).title=e)},null,512),[[V,U(u).title]])])])]),g("div",Ts,[b(s,{grouped:""},{default:k((()=>[b(t,null,{default:k((()=>[g("div",Us,[g("label",Ss,[g("input",{onChange:f,class:"file-input",type:"file",name:"resume"},null,32),g("span",Is,[As,g("span",Ms,w(U(v)?U(v):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:k((()=>[b(n,{type:"submit",color:"primary",loading:U(i),raised:""},{default:k((()=>[x(" Save")])),_:1},8,["loading"])])),cancel:k((()=>[b(n,{color:"light",onClick:c,raised:""},{default:k((()=>[x("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Ds={key:0,class:"modal-form"},Es=["src"],Fs=["src"],Rs=["src"],Ls=["src"],Os={key:1,class:"modal-form"},Ns=[g("h1",{class:"title is-5"},"No media file attached",-1)],Bs=u({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return _((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=M,n=le;return h(),S(n,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:k((()=>[a.document?(h(),y("div",Ds,[a.document?.includes(".pdf")?(h(),y("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Es)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(h(),y("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Fs)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(h(),y("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Rs)):(h(),y("img",{key:3,src:a.document,alt:""},null,8,Ls))])):(h(),y("div",Os,Ns))])),cancel:k((()=>[b(i,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:k((()=>[x("Close")])),_:1})])),_:1},8,["open","title"])}}}),Ks={class:"tile-grid-item"},$s={class:"tile-grid-item-inner"},Js=["src"],Hs={class:"meta"},zs={class:"dark-inverted"},qs=g("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),Gs=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),g("div",{class:"meta"},[g("span",null,"Download"),g("span",null,"Download this file")],-1)],Ws=g("hr",{class:"dropdown-divider"},null,-1),Zs=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete this file")],-1)],Qs=u({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=p(""),s=p(!1),i=p(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png"};return(e,o)=>{const c=Te;return h(),y("div",null,[g("div",Ks,[g("div",$s,[g("img",{onClick:o[0]||(o[0]=e=>{return l=a.document?.file,t.value=l,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,Js),g("div",Hs,[g("span",zs,w(a.document.title??"N/A"),1),g("span",null,[g("span",null,w(a.document?.file_info?.size??0)+" MB",1),qs,g("span",null,"At:"+w(U(ee)(a.document.created_at)),1)])]),b(c,{icon:"feather:more-vertical",spaced:"",right:""},{content:k((()=>[g("a",{role:"menuitem",onClick:o[1]||(o[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},Gs),Ws,g("a",{role:"menuitem",onClick:o[2]||(o[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},Zs)])),_:1})])]),U(s)?(h(),S(Bs,{key:0,openDocViewModal:U(s),document:U(t),title:U(i),"onUpdate:closeModalHandler":o[3]||(o[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","title"])):C("",!0)])}}}),Xs={key:1},Ys={class:"tile-grid-toolbar"},ei={class:"buttons"},li=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ai=g("span",null,"Add File",-1),ti={class:"tile-grid tile-grid-v2"},si=g("img",{class:"light-image",src:z,alt:""},null,-1),ii=g("img",{class:"dark-image",src:q,alt:""},null,-1),ni=u({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{}},setup(e){const l=e,a=W(),t=G(),i=p(""),n=p(0),c=p(""),u=p(!1),r=p(!1),m=p([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),f=["All Files","Recently Updated","My Files","Team Files","Deprecated"],x=async(e="proposal_formats")=>{try{u.value=!0;const e=await t.get(`/api/attachment/by-object/${l.objectId}/?type=${l.docType}`);m.value=e.data}catch(a){console.log(a)}finally{u.value=!1}},w=async e=>{try{const s=await t.delete(`/api/attachment/${e}/`);Y({object_type:"files",object_id:l.objectId,action:"DELETE",message:`Deleted a file named <b>${s.data.title}</b>.`,performedOnName:"job"}),a.purple("File Deleted Successfully"),x()}catch(s){console.log(s)}},P=v((()=>i.value?m.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):m.value));return _((()=>{x()})),(e,a)=>{const t=te,p=d,m=R("Multiselect"),v=o,_=M,D=s,E=Qs,F=Ps;return h(),y("div",null,[U(u)?(h(),S(t,{key:0,rows:4})):(h(),y("div",Xs,[g("div",Ys,[b(p,{icon:"feather:search"},{default:k((()=>[j(g("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>$(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[V,U(i)]])])),_:1}),g("div",ei,[b(v,{class:"h-hidden-mobile"},{default:k((()=>[b(p,null,{default:k((()=>[b(m,{modelValue:U(n),"onUpdate:modelValue":a[1]||(a[1]=e=>$(n)?n.value=e:null),options:f,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),b(_,{onClick:a[2]||(a[2]=e=>(c.value=l.docType,void(r.value=!r.value))),color:"primary",raised:""},{default:k((()=>[li,ai])),_:1})])]),g("div",ti,[0!=U(P).length||U(u)?C("",!0):(h(),S(D,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[si,ii])),_:1})),g("div",null,[b(T,{name:"list",tag:"div",class:"columns is-multiline"},{default:k((()=>[(h(!0),y(I,null,A(U(P),(e=>(h(),y("div",{key:e.id,class:"column is-4"},[b(E,{document:e,onDeleteSelectedFile:w},null,8,["document"])])))),128))])),_:1})])]),U(r)?(h(),S(F,{key:0,openFileModal:U(r),object:l.objectId,type:U(c),"onClose:ModalHandler":a[3]||(a[3]=e=>r.value=!1),"onUpdate:OnSuccess":x},null,8,["openFileModal","object","type"])):C("",!0)]))])}}}),oi={class:"tabs-inner"},ci={class:"tabs"},di=[g("span",null,"Grouped Proposals",-1)],ui=[g("span",null,"Contracts",-1)],ri=[g("span",null,"Customer Estimates",-1)],pi=[g("span",null,"Job Scope",-1)],mi=[g("span",null,"Asbestos & Lead Report",-1)],vi=[g("span",null,"Permits",-1)],_i=[g("span",null,"Bids & Material",-1)],fi=[g("span",null,"Miscellaneous",-1)],hi=[g("span",null,"Uploaded Files",-1)],yi=[g("span",null,"Calculations",-1)],gi=g("li",{class:"tab-naver"},null,-1),bi={class:"tile-grid tile-grid-v2"},ki=g("img",{class:"light-image",src:z,alt:""},null,-1),xi=g("img",{class:"dark-image",src:q,alt:""},null,-1),wi={key:0},ji={key:1},Vi={key:2},Ci={key:3},Ti={key:4},Ui={key:5},Si={key:6},Ii={key:7},Ai={key:8},Mi={key:9},Pi=u({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo"],setup(e,{emit:l}){const a=e;W();const t=G(),i=p("");p(0);const n=p(""),o=p("proposal_formats"),c=p(!1),d=p([]),u=v((()=>i.value?Ue.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Ue)),r=()=>{l("getProjectInfo",null)},m=async(e="proposal_formats")=>{try{o.value=e;const l=await t.get(`/api/attachment/by-object/${a.leadId}/?type=${e}`);d.value=l.data}catch(l){console.log(l)}};return _((()=>{m()})),(e,l)=>{const t=s,i=ni,d=se,p=Al,v=Ps;return h(),y("div",null,[g("div",oi,[g("div",ci,[g("ul",null,[g("li",{class:N(["proposal_formats"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=K(O((e=>m("proposal_formats")),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>m("proposal_formats"))},di,32)],2),g("li",{class:N(["contracts"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=K(O((e=>m("contracts")),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>m("contracts"))},ui,32)],2),g("li",{class:N(["estimates"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=K(O((e=>m("estimates")),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>m("estimates"))},ri,32)],2),g("li",{class:N(["job_scope"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[6]||(l[6]=K(O((e=>o.value="job_scope"),["prevent"]),["space"])),onClick:l[7]||(l[7]=e=>o.value="job_scope")},pi,32)],2),g("li",{class:N(["asbestos"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[8]||(l[8]=K(O((e=>o.value="asbestos"),["prevent"]),["space"])),onClick:l[9]||(l[9]=e=>o.value="asbestos")},mi,32)],2),g("li",{class:N(["permits"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[10]||(l[10]=K(O((e=>o.value="permits"),["prevent"]),["space"])),onClick:l[11]||(l[11]=e=>o.value="permits")},vi,32)],2),g("li",{class:N(["material"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[12]||(l[12]=K(O((e=>o.value="material"),["prevent"]),["space"])),onClick:l[13]||(l[13]=e=>o.value="material")},_i,32)],2),g("li",{class:N(["miscellaneous"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[14]||(l[14]=K(O((e=>o.value="miscellaneous"),["prevent"]),["space"])),onClick:l[15]||(l[15]=e=>o.value="miscellaneous")},fi,32)],2),g("li",{class:N(["files"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[16]||(l[16]=K(O((e=>m("files")),["prevent"]),["space"])),onClick:l[17]||(l[17]=e=>m("files"))},hi,32)],2),g("li",{class:N(["calculations"===U(o)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:l[18]||(l[18]=K(O((e=>m("calculations")),["prevent"]),["space"])),onClick:l[19]||(l[19]=e=>m("calculations"))},yi,32)],2),gi])])]),g("div",bi,[b(t,{class:N([0!==U(u).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:k((()=>[ki,xi])),_:1},8,["class"]),"contracts"==U(o)?(h(),y("div",wi,[b(i,{"doc-type":"contracts","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"estimates"==U(o)?(h(),y("div",ji,[b(i,{"doc-type":"estimates","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"proposal_formats"==U(o)?(h(),y("div",Vi,[b(i,{"doc-type":"proposal_formats","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"job_scope"==U(o)?(h(),y("div",Ci,[b(i,{"doc-type":"job_scope","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"asbestos"==U(o)?(h(),y("div",Ti,[b(i,{"doc-type":"asbestos","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"permits"==U(o)?(h(),y("div",Ui,[b(i,{"doc-type":"permits","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"material"==U(o)?(h(),y("div",Si,[b(i,{"doc-type":"material","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"miscellaneous"==U(o)?(h(),y("div",Ii,[b(i,{"doc-type":"miscellaneous","object-id":a.leadId},null,8,["object-id"])])):C("",!0),"files"==U(o)?(h(),y("div",Ai,[b(d,{projectId:a.leadId,files:a.uploaded_files,"onUpdate:onUploadFile":r},null,8,["projectId","files"])])):C("",!0),"calculations"==U(o)?(h(),y("div",Mi,[b(p)])):C("",!0)]),U(c)?(h(),S(v,{key:0,openFileModal:U(c),object:a.leadId,type:U(n),"onClose:ModalHandler":l[20]||(l[20]=e=>c.value=!1),"onUpdate:OnSuccess":m},null,8,["openFileModal","object","type"])):C("",!0)])}}}),Di={class:"business-dashboard hr-dashboard"},Ei={class:"columns is-multiline"},Fi={class:"column is-12"},Ri={class:"columns is-multiline"},Li={class:"column is-12"},Oi={class:"block-header"},Ni={class:"left"},Bi={class:"current-user"},Ki={class:"center"},$i=g("h4",{class:"block-heading"},"Address",-1),Ji={class:"block-text"},Hi=g("br",null,null,-1),zi=g("br",null,null,-1),qi={class:"right"},Gi=g("h4",{class:"block-heading"},"Managers",-1),Wi={class:"candidates"},Zi=g("button",null,[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),Qi={class:"column is-12"},Xi={class:"toolbar"},Yi={class:"tabs-inner"},en={class:"tabs is-boxed"},ln=[g("span",null,"Job Management",-1)],an=[g("span",null,"Documents/Files",-1)],tn=[g("span",null,"Proposals",-1)],sn=[g("span",null,"Tasks",-1)],nn=[g("span",null,"Activities",-1)],on=[g("span",null,"Job progress",-1)],cn=[g("span",null,"Calculations",-1)],dn=[g("span",null,"Finance",-1)],un=[g("span",null,"Report",-1)],rn=g("li",{class:"tab-naver"},null,-1),pn={key:0,class:"column is-12"},mn={class:"columns is-multiline"},vn={class:"column is-8"},_n={class:"columns is-multiline"},fn={class:"column is-12"},hn={class:"feed-settings"},yn=g("h3",{class:"dark-inverted"},"Job feeds",-1),gn={class:"buttons"},bn={class:"column is-4"},kn={class:"side-text"},xn=g("h3",{class:"dark-inverted"},"Job Description",-1),wn=["innerHTML"],jn=g("a",{class:"action-link",tabindex:"0"},"Read More",-1),Vn={class:"column is-7 is-offset-1"},Cn={class:"incoming"},Tn=g("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),Un=g("div",null,[g("span",{class:"item-name dark-inverted"},"Messages"),g("span",{class:"item-meta"},[g("span",null,"Inbox messages")])],-1),Sn=g("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),In=g("div",null,[g("span",{class:"item-name dark-inverted"},"Tasks"),g("span",{class:"item-meta"},[g("span",null,"Pending tasks")])],-1),An={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},Mn={key:4,class:"light-text"},Pn={class:"column is-12"},Dn={class:"recent-rookies"},En=g("div",{class:"recent-rookies-header"},[g("h3",{class:"dark-inverted"},"Internal Users"),g("a",{class:"action-link",tabindex:"0"},"View All")],-1),Fn={class:"columns is-multiline user-grid user-grid-v4"},Rn={class:"column is-4"},Ln={class:"grid-item"},On={class:"dark-inverted"},Nn={class:"capitalized"},Bn={class:"button-wrap has-text-centered"},Kn={class:"column is-4"},$n={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},Jn=g("div",{class:"widget-toolbar"},[g("div",{class:"left"},[g("a",{class:"action-icon"},[g("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),g("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),g("div",{class:"center"},[g("h3",null,"October 2020")]),g("div",{class:"right"},[g("a",{class:"action-icon"},[g("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),g("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),Hn=g("table",{class:"calendar"},[g("thead",null,[g("tr",null,[g("th",{scope:"col"},"Mon"),g("th",{scope:"col"},"Tue"),g("th",{scope:"col"},"Wed"),g("th",{scope:"col"},"Thu"),g("th",{scope:"col"},"Fri"),g("th",{scope:"col"},"Sat"),g("th",{scope:"col"},"Sun")])]),g("tbody",null,[g("tr",null,[g("td",{class:"prev-month"},"29"),g("td",{class:"prev-month"},"30"),g("td",{class:"prev-month"},"31"),g("td",null,"1"),g("td",null,"2"),g("td",null,"3"),g("td",null,"4")]),g("tr",null,[g("td",null,"5"),g("td",null,"6"),g("td",null,"7"),g("td",null,"8"),g("td",null,"9"),g("td",null,"10"),g("td",null,"11")]),g("tr",null,[g("td",null,"12"),g("td",null,"13"),g("td",null,"14"),g("td",null,"15"),g("td",null,"16"),g("td",null,"17"),g("td",{class:"current-day"},"18")]),g("tr",null,[g("td",null,"19"),g("td",null,"20"),g("td",null,"21"),g("td",null,"22"),g("td",null,"23"),g("td",null,"24"),g("td",null,"25")]),g("tr",null,[g("td",null,"26"),g("td",null,"27"),g("td",null,"28"),g("td",null,"29"),g("td",null,"30"),g("td",null,"31"),g("td",{class:"next-month"},"1")])])],-1),zn={key:1,class:"column is-12"},qn={key:2,class:"column is-12"},Gn={key:3,class:"column is-12"},Wn={key:4,class:"column is-12"},Zn={key:5,class:"column is-12"},Qn={key:6,class:"column is-12"},Xn={key:7,class:"column is-12"},Yn={key:8,class:"column is-12"},eo={key:9,class:"column is-12"},lo={class:"tabs-inner"},ao={class:"tabs is-boxed"},to=[g("span",null,"Excel Sheets",-1)],so=[g("span",null,"Custom Calculations",-1)],io={key:0},no={key:1},oo=u({__name:"JobDetails",setup(l){const t=H();B();const s=G();W();const i=p(!1),n=p(""),o=p(!1);p(null),p("Untitled"),p({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const c=p({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),d=p("excel"),u=p("management"),r=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],m={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let v;const V=async()=>{try{i.value=!0;const e=await s.get(`/api/project/${t.params.id}/detail/`);c.value=e.data,e.data.latitude&&((e,l)=>{if(v&&v.remove(),v=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(v),e&&l){const a=[e,l];L.marker(a).addTo(v),v.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{i.value=!1}};return _((()=>{V()})),(l,s)=>{const i=ye,p=M,v=Pe,_=Me,T=a,P=Ae,D=Ie,E=Se,F=Pi,R=Ce,L=ks,B=Wt,$=sa,J=$l,H=ie,z=Al,q=pl,G=e,W=f("tooltip");return h(),y("div",Di,[g("div",Ei,[g("div",Fi,[g("div",Ri,[g("div",Li,[g("div",Oi,[g("div",Ni,[g("div",Bi,[b(i,{size:"large",picture:"lead"==U(c).current_state?"/icons/lead-shield-96.png":"/icons/job-sheild.png",squared:""},null,8,["picture"]),g("h3",null,w(U(c).title?U(c).title:"No Title"),1)])]),g("div",Ki,[$i,g("p",Ji,[x(w(U(c).address?U(c).address:"No Address Added")+" ",1),Hi,x(" "+w(U(c).city?U(c).city:"No City Added")+", "+w(U(c).state?U(c).state:"No State Added")+" ",1),zi,x(" "+w(U(c).zip_code?U(c).zip_code:"No Zip Code Added"),1)])]),g("div",qi,[Gi,g("div",Wi,[(h(!0),y(I,null,A(U(c).managers_list,(e=>j((h(),S(i,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[W,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),Zi]),b(p,{class:"mt-1",onClick:s[0]||(s[0]=e=>{return l=U(t).params.id,n.value=l,void(o.value=!0);var l}),bold:"",fullwidth:"","dark-outlined":""},{default:k((()=>[x(" Update "+w("lead"==U(c).current_state?"lead":"job"),1)])),_:1})])])]),g("div",Qi,[g("div",Xi,[g("div",Yi,[g("div",en,[g("ul",null,[g("li",{class:N(["management"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[1]||(s[1]=K(O((e=>u.value="management"),["prevent"]),["space"])),onClick:s[2]||(s[2]=e=>u.value="management")},ln,32)],2),g("li",{class:N(["documents"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[3]||(s[3]=K(O((e=>u.value="documents"),["prevent"]),["space"])),onClick:s[4]||(s[4]=e=>u.value="documents")},an,32)],2),g("li",{class:N(["proposals"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[5]||(s[5]=K(O((e=>u.value="proposals"),["prevent"]),["space"])),onClick:s[6]||(s[6]=e=>u.value="proposals")},tn,32)],2),g("li",{class:N(["tasks"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[7]||(s[7]=K(O((e=>u.value="tasks"),["prevent"]),["space"])),onClick:s[8]||(s[8]=e=>u.value="tasks")},sn,32)],2),g("li",{class:N(["activities"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[9]||(s[9]=K(O((e=>u.value="activities"),["prevent"]),["space"])),onClick:s[10]||(s[10]=e=>u.value="activities")},nn,32)],2),g("li",{class:N(["progress"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[11]||(s[11]=K(O((e=>u.value="progress"),["prevent"]),["space"])),onClick:s[12]||(s[12]=e=>u.value="progress")},on,32)],2),g("li",{class:N(["calculations"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[13]||(s[13]=K(O((e=>u.value="calculations"),["prevent"]),["space"])),onClick:s[14]||(s[14]=e=>u.value="calculations")},cn,32)],2),g("li",{class:N(["finance"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[15]||(s[15]=K(O((e=>u.value="finance"),["prevent"]),["space"])),onClick:s[16]||(s[16]=e=>u.value="finance")},dn,32)],2),g("li",{class:N(["report"===U(u)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[17]||(s[17]=K(O((e=>u.value="report"),["prevent"]),["space"])),onClick:s[18]||(s[18]=e=>u.value="report")},un,32)],2),rn])])])])]),"management"===U(u)?(h(),y("div",pn,[g("div",mn,[g("div",vn,[g("div",_n,[g("div",fn,[g("div",hn,[yn,g("div",gn,[(h(!0),y(I,null,A(U(c).tags,((e,l)=>(h(),y("button",{key:l,class:"button is-selected is-light is-dark-outlined"},w(e),1)))),128))])])]),g("div",bn,[g("div",kn,[xn,g("div",{innerHTML:U(c).notes},null,8,wn),jn])]),g("div",Vn,[g("div",Cn,[b(T,{rounded:"",data:r,columns:m},{"body-cell":k((({row:e,column:l,value:a})=>["type"===l.key&&"messages"===e.type?(h(),y(I,{key:0},[b(v,{color:"green"},{default:k((()=>[Tn])),_:1}),Un],64)):"type"===l.key&&"tasks"===e.type?(h(),y(I,{key:1},[b(v,{color:"orange"},{default:k((()=>[Sn])),_:1}),In],64)):"status"===l.key?(h(),y(I,{key:2},["new"===e.status?(h(),S(_,{key:0,rounded:"",color:"success",label:"New"})):(h(),S(_,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(h(),y("a",An,"Open")):(h(),y("span",Mn,w(a),1))])),_:1})])]),g("div",Pn,[g("div",Dn,[En,g("div",Fn,[(h(!0),y(I,null,A(U(c).sales_people_info,(e=>(h(),y("div",Rn,[g("div",Ln,[b(P),b(i,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),g("h3",On,w(e.username??"N/A")+" "+w(e.last_name??""),1),g("p",Nn,w(e.role),1),g("div",Bn,[b(p,{color:"primary",raised:""},{default:k((()=>[x(" View Profile ")])),_:1})])])])))),256))])])])])]),g("div",Kn,["management"===U(u)?(h(),y("div",$n)):C("",!0),b(D,{project:U(t).params.id},null,8,["project"]),b(E,{class:"picker-widget"},{header:k((()=>[Jn])),body:k((()=>[Hn])),_:1})])])])):C("",!0),"documents"===U(u)?(h(),y("div",zn,[b(F,{leadId:U(t).params.id,uploaded_files:U(c).uploaded_files,getProjectInfo:V},null,8,["leadId","uploaded_files"])])):C("",!0),"proposals"===U(u)?(h(),y("div",qn,[b(De,{"lead-id":U(t).params.id,onUpdateCompany:V},null,8,["lead-id"])])):C("",!0),"activities"===U(u)?(h(),y("div",Gn,[b(R,{jobId:U(t).params.id},null,8,["jobId"])])):C("",!0),"progress"===U(u)?(h(),y("div",Wn,[b(L,{object:U(t).params.id,type:"job"},null,8,["object"])])):C("",!0),"finance"===U(u)?(h(),y("div",Zn,[b(B)])):C("",!0),"activityLogs"===U(u)?(h(),y("div",Qn,[b($,{object_id:U(t).params.id||U(c).id,object_type:"lead"},null,8,["object_id"])])):C("",!0),"report"===U(u)?(h(),y("div",Xn,[b(J)])):C("",!0),"tasks"===U(u)?(h(),y("div",Yn,[b(H,{projectID:U(t).params.id},null,8,["projectID"])])):C("",!0),"calculations"===U(u)?(h(),y("div",eo,[g("div",lo,[g("div",ao,[g("ul",null,[g("li",{class:N(["excel"===U(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[19]||(s[19]=K(O((e=>d.value="excel"),["prevent"]),["space"])),onClick:s[20]||(s[20]=e=>d.value="excel")},to,32)],2),g("li",{class:N(["custom"===U(d)&&"is-active"])},[g("a",{tabindex:"0",role:"button",onKeydown:s[21]||(s[21]=K(O((e=>d.value="custom"),["prevent"]),["space"])),onClick:s[22]||(s[22]=e=>d.value="custom")},so,32)],2)])])]),"excel"==U(d)?(h(),y("div",io,[b(z)])):C("",!0),"custom"==U(d)?(h(),y("div",no,[b(q,{objectId:U(t).params.id},null,8,["objectId"])])):C("",!0)])):C("",!0)])])]),U(o)?(h(),S(G,{key:0,addUpdateLeadModal:U(o),leadId:U(n),"onUpdate:modalHandler":s[23]||(s[23]=e=>o.value=!1),"onUpdate:OnSuccess":V},null,8,["addUpdateLeadModal","leadId"])):C("",!0)])}}});export{oo as _};
