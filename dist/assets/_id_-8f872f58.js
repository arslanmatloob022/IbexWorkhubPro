import{a as e,_ as a}from"./SiteDetailModal-f3251bd9.js";import{_ as l}from"./AddJobsModal-c3f59bec.js";import{_ as t}from"./VCheckbox.vue_vue_type_style_index_0_lang-4171c578.js";import{_ as s}from"./TimeSheetDetail.vue_vue_type_script_setup_true_lang-dc4bb729.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-dab44eb0.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import{_ as r}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-203bc318.js";import{_ as c,a as d}from"./projects-dark-4a371d8a.js";import{u,b as m}from"./useAPI-2f913358.js";import{f as p,e as f}from"./useSupportElement-ec851bb5.js";import{e as v,r as g,o as y,v as h,x as b,A as I,l as _,F as k,O as w,P as x,Q as S,H as C,y as A,B as j,z as V,V as M,W as N,J as T,L as R,a4 as L,w as W,C as D,M as P,s as O,K as z,N as U,j as $,ad as J,a3 as G,t as E}from"./index-a3511ab8.js";import{_ as F}from"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import{_ as B,i as q,a as H,b as Y}from"./index-d8c1426b.js";import{F as Z}from"./index-405e4760.js";import{u as K}from"./company-ca9a809c.js";import{_ as Q}from"./VTextarea.vue_vue_type_script_setup_true_lang-e1d809a1.js";import{_ as X}from"./VIconButton-87810f23.js";import{_ as ee}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as ae}from"./VControl-f6dba4dd.js";import{u as le}from"./useNotyf-bee6672a.js";import{A as te}from"./vue3-apexcharts.common-763b2026.js";import{u as se}from"./useThemeColors-9cb1eefd.js";import{u as oe}from"./viewWrapper-a34f2b5b.js";import"./VCollapse.vue_vue_type_style_index_0_lang-fbcf2e46.js";import"./VIcon.vue_vue_type_script_setup_true_lang-639bef4b.js";import"./VSwitchSegment.vue_vue_type_style_index_0_lang-17e4fc05.js";import"./VLabel.vue_vue_type_script_setup_true_lang-dfa6e2cd.js";import"./useVFieldContext-f66aca7a.js";import"./VInput.vue_vue_type_script_setup_true_lang-17074c81.js";import"./useDropdown-4068e34e.js";import"./VPlaceloadWrap-71c29bf4.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-ab5188b6.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-66b5c7cb.js";import"./userSession-1e35e5f3.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-9ab5aaf2.js";import"./VTags.vue_vue_type_script_setup_true_lang-2b457582.js";import"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import"./notyf-bdcd12d6.js";import"./vue.runtime.esm-bundler-7473b242.js";const ie=e=>(M("data-v-f93dc170"),e=e(),N(),e),ne={class:"timeline-wrapper"},re=ie((()=>I("div",{class:"timeline-header"},null,-1))),ce={class:"timeline-wrapper-inner"},de={class:"timeline-container"},ue={class:"timeline-item is-unread"},me={class:"date"},pe=ie((()=>I("div",{class:"dot is-success"},null,-1))),fe={class:"content-wrap"},ve=["onClick"],ge=ie((()=>I("div",{class:"no-status"},null,-1))),ye={class:"container"},he={class:"half"},be={class:"",style:{display:"flex","align-items":"center"}},Ie={class:"box-text"},_e={class:"meta-text"},ke={class:""},we=ie((()=>I("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1))),xe={class:"half"},Se={class:"",style:{display:"flex","align-items":"center"}},Ce={class:"box-text"},Ae={class:"meta-text"},je={style:{display:"flex"}},Ve=ie((()=>I("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1))),Me={class:"box-end"},Ne=ie((()=>I("div",{class:"icon"},[I("i",{"aria-hidden":"true",class:"lnil lnil-bubble"})],-1))),Te=ie((()=>I("div",{class:"meta"},[I("span",null,"Activity"),I("span",null,"View activity of Timesheet")],-1))),Re=[Ne,Te],Le=ie((()=>I("img",{class:"light-image is-larger",src:c,alt:""},null,-1))),We=ie((()=>I("img",{class:"dark-image is-larger",src:d,alt:""},null,-1))),De=v({__name:"JobTImesheet",props:{id:{type:String,default:0}},setup(e){const a=e,l=u();m();const t=g(!1),c=g(!1),d=g(0),v=g([]);return y((()=>{(async()=>{try{t.value=!0;const e=await l.get(`v3/api/timesheet/job/${a.id}/`);v.value=e.data,console.log("timesheeeet",v.value),t.value=!1}catch(e){console.log(e)}})()})),(e,a)=>{const l=r,u=n,m=i,g=o,y=s;return h(),b("div",ne,[re,I("div",ce,[I("div",de,[_(t)?(h(),k(l,{key:0})):w("",!0),(h(!0),b(x,null,S(_(v),(e=>(h(),b("div",ue,[I("div",me,[I("span",null,C(_(p)(e.created_at)),1)]),pe,I("div",fe,[I("div",{class:"content-box",onClick:()=>{c.value=!0,d.value=e.id}},[ge,I("div",ye,[I("div",he,[I("div",be,[A(u,{picture:e.bookOnImageURL,squared:"",size:"medium"},null,8,["picture"]),I("div",Ie,[I("div",_e,[I("p",null,[I("span",null,C(_(f)(e.bookOnTime)),1)]),I("span",ke,[we,j(" "+C(e.bookOnLocation&&e.bookOnLocation.length>90?e.bookOnLocation.slice(0,90)+"...":e.bookOnLocation),1)])])])])]),I("div",xe,[I("div",Se,[A(u,{picture:e.bookOffImageURL,squared:"",size:"medium"},null,8,["picture"]),I("div",Ce,[I("div",Ae,[I("p",null,[I("span",null,C(_(f)(e.bookOffTime)),1)]),I("span",je,[Ve,j(" "+C(e.bookOffLocation&&e.bookOffLocation.length>90?e.bookOffLocation.slice(0,90)+"...":e.bookOffLocation),1)])])])])])]),I("div",Me,[A(m,{icon:"feather:more-vertical",spaced:"",right:""},{content:V((()=>[I("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:a[0]||(a[0]=e=>c.value=!0)},Re)])),_:1})])],8,ve)])])))),256)),0==_(v).length?(h(),k(g,{key:1,title:"No Activity found.",subtitle:"Looks like you don't have done any activity on this worker yet as you will do anything, that will be showing up in here."},{image:V((()=>[Le,We])),_:1})):w("",!0)])]),_(c)?(h(),k(y,{key:0,timeSheetDetailModal:_(c),timesheetId:"993","onUpdate:modalHandler":a[1]||(a[1]=()=>{c.value=!1})},null,8,["timeSheetDetailModal"])):w("",!0)])}}}),Pe=T(De,[["__scopeId","data-v-f93dc170"]]),Oe={class:"row"},ze={class:"columns is-multiline"},Ue={class:"column is-6"},$e={class:"columns is-multiline"},Je={class:"column is-12"},Ge={class:"columns is-multiline"},Ee={class:"column is-3"},Fe={class:"column is-9"},Be={class:"is-flex space-between"},qe={style:{width:"120px","white-space":"nowrap"},class:"title is-5 mb-2"},He=I("i",{class:"lnir lnir-apple","aria-hidden":"true"},null,-1),Ye=I("i",{class:"iconify ml-3 cu-pointer pointer","data-icon":"feather:external-link"},null,-1),Ze=[He,Ye],Ke={class:"is-flex cus-align-center mb-1"},Qe=I("i",{class:"iconify text-light","data-icon":"feather:phone","aria-hidden":"true"},null,-1),Xe={class:"is-bold"},ea={class:"is-flex cus-align-center mb-1"},aa=I("i",{class:"iconify","data-icon":"feather:mail","aria-hidden":"true"},null,-1),la={class:"is-bold"},ta={class:"is-flex cus-align-center mb-1 text-light"},sa=I("i",{class:"iconify","data-icon":"feather:map-pin","aria-hidden":"true"},null,-1),oa={class:"is-bold"},ia={class:"column is-12"},na={class:"columns is-multiline"},ra={class:"column is-5"},ca=I("h3",{class:"title is-5 mb-2"},"Site Name",-1),da={class:"is-bold"},ua={class:"column is-5"},ma=I("h3",{class:"title is-5 mb-2"},"Date",-1),pa={class:"is-bold"},fa={class:"column is-2"},va={class:"column is-10"},ga=I("h3",{class:"title is-5 mb-2"},"Site Addreess",-1),ya={class:"is-bold"},ha={class:"column is-2"},ba=I("div",{class:"column is-6"},[I("div",{id:"myMap",style:{height:"324px",width:"100%","border-radius":"10px"}})],-1),Ia=I("button",{style:{display:"none"}},"close",-1),_a=v({__name:"RotaDetailView",props:{timeSheetDetailModal:{type:Boolean},timesheetId:{},rotaId:{},getRota:{type:Function}},emits:["update:modalHandler"],setup(e,{emit:a}){const l=e;let t,s,o;const i=g([]),r=R(),c=u(),d=g(!1),m=g(!1),p=g({id:0,siteInfo:{id:5,name:"",address:"",postcode:"",city:"",inchargeName:"",color:"",latitude:0,longitude:0,geofence:{},comments:""},workerInfo:{id:0,firstName:"",lastName:"",latitude:0,longitude:0,postCode:" ",phoneNumber:"",emailAddress:"",profileImageURL:""},customerCompanyInfo:{id:36,name:"",trade_name:"",email:"",phone_number:"",logo:"",postcode:"",latitude:0,longitude:0,business_details:"",reg_no:"",business_type:"",covered_distance:75,vat_no:null,address:"",color:"",created_at:"",company:0,industry:0},date:"",start:"",end:"",shift:"",hourlyRate:0,notes:"",createdAt:"",createdBy:"",UpdatedAt:null,updatedBy:"",company:0,site:0,worker:0,customerCompany:0,job:null,jobsList:[{id:"",end:"",start:"",jobName:"",resourceId:""}]}),f=()=>{a("update:modalHandler",!1),l.getRota()},v=()=>{r.push({name:"/sidebar/company/workers/[id]",params:{id:p.value.wokrkerInfo.id}})};return y((async()=>{await(async()=>{try{const e=await c.get(`/v3/api/timesheet/details/${l.timesheetId}/`);p.value=e.data,console.log("rota info",p.value),i.value=e.data.jobsList.map((e=>({...e,title:e.jobName})))}catch(e){console.log(e)}})(),((e,a,l,i)=>{const n=new google.maps.LatLng(e,a),r=new google.maps.LatLng(l,i);t=new google.maps.Map(document.getElementById("myMap"),{center:n,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:7}),s=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer,o.setMap(t);const c={origin:n,destination:r,travelMode:google.maps.TravelMode.DRIVING};s.route(c,(function(e,a){a===google.maps.DirectionsStatus.OK?o.setDirections(e):console.error("Error fetching directions: "+a)})),new google.maps.Marker({position:n,map:t,title:"Worker Location"}),new google.maps.Marker({position:r,map:t,title:"Site Location"})})(p.value.wokrkerInfo&&p.value.wokrkerInfo.latitude?p.value.wokrkerInfo.latitude:"0",p.value.wokrkerInfo&&p.value.wokrkerInfo.longitude?p.value.wokrkerInfo:"0",p.value.siteInfo&&p.value.siteInfo.latitude?p.value.siteInfo.latitude:0,p.value.siteInfo&&p.value.siteInfo.longitude?p.value.siteInfo.longitude:"0")})),(e,a)=>{const t=n,s=L,o=B,i=F;return h(),k(i,{open:l.timeSheetDetailModal,title:"Rota Detail",size:"xl",actions:"right",onClose:f},{content:V((()=>[I("div",Oe,[I("div",ze,[I("div",Ue,[I("div",$e,[I("i",{style:{position:"absolute",top:"44px",left:"166px"},class:"fas fa-pencil-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:a[0]||(a[0]=e=>d.value=!0)}),I("i",{style:{position:"absolute",top:"44px",left:"190px",color:"var(--danger)"},class:"fas fa-trash-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:a[1]||(a[1]=()=>{m.value=!m.value})}),I("div",Je,[A(s,{radius:"large",elevated:""},{default:V((()=>[I("div",Ge,[I("div",Ee,[A(t,{onClick:v,picture:p.value.workerInfo&&p.value.workerInfo.profileImageURL?p.value.workerInfo.profileImageURL:"",size:"big",squared:""},null,8,["picture"])]),I("div",Fe,[I("div",Be,[I("div",null,[I("h3",qe,C(p.value.workerInfo?p.value.workerInfo.firstName:"------")+" "+C(p.value.workerInfo?p.value.workerInfo.lastName:"------"),1)]),I("div",{onClick:v,class:"is-flex cus-align-center"},Ze)]),I("div",Ke,[Qe,I("p",Xe,C(p.value.workerInfo?p.value.workerInfo.phoneNumber:"------"),1)]),I("div",ea,[aa,I("p",la,C(p.value.workerInfo?p.value.workerInfo.emailAddress:"------"),1)]),I("div",ta,[sa,I("p",oa,C(p.value.workerInfo?p.value.workerInfo.postCode:"------"),1)])])])])),_:1})]),I("div",ia,[A(s,{radius:"large",elevated:""},{default:V((()=>[I("div",na,[I("div",ra,[ca,I("p",da,C(p.value.siteInfo?p.value.siteInfo.name:"------"),1)]),I("div",ua,[ma,I("p",pa,C(p.value&&p.value.created_at?p.value.created_at.slice(0,10):"------"),1)]),I("div",fa,[A(t,{picture:p.value.customerCompanyInfo?p.value.customerCompanyInfo.logo:"/images/logoplaceholder.png",size:"medium",rounded:""},null,8,["picture"])]),I("div",va,[ga,I("p",ya,C(p.value.siteInfo?p.value.siteInfo.address:"------"),1)]),I("div",ha,[A(t,{picture:"day"==p.value.shift?"/images/dayTime.png":"/images/nightTime.png",size:"medium",rounded:""},null,8,["picture"])])])])),_:1})])])]),ba])]),A(s,{class:"mt-3",radius:"large",elevated:""},{default:V((()=>[A(o,{timesheetId:"993"})])),_:1})])),action:V((()=>[])),cancel:V((()=>[Ia])),_:1},8,["open"])}}}),ka=e=>(M("data-v-f779d416"),e=e(),N(),e),wa={id:"rota-celender"},xa={class:"columns is-multiline"},Sa=ka((()=>I("div",{class:"column is-7 is-flex space-between"},[I("h6",{style:{"white-space":"nowrap"},class:"cus-main-heading mr-3 ml-1 mt-5"}," Job Scheduling ")],-1))),Ca={class:"column is-5 mt-4"},Aa={class:"list-flex-toolbar is-reversed"},ja={class:"buttons"},Va={class:"p-2 flex-columns event-content",style:{display:"flex","justify-content":"space-between",height:"90px",width:"100%","border-radius":"12px","background-color":"#effaec",padding:"6px 10px"}},Ma={class:"is-flex space-between mb-2"},Na=ka((()=>I("i",{class:"fas fa-sun",style:{color:"#3f72c8","font-size":"16px"},"aria-hidden":"true"},null,-1))),Ta={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},Ra={class:"is-flex mb-1"},La=["src"],Wa={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},Da=ka((()=>I("div",{class:"is-flex"},[I("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#666"}})],-1))),Pa={style:{"margin-top":"12px","font-weight":"600","margin-bottom":"8px","padding-left":"10px",color:"#666"}},Oa=v({__name:"JobRota",props:{id:{type:String,default:"0"},calendarView:{type:String,default:"dayGridMonth"}},setup(e){const a=e,l=g(""),t=g("");K();const s=u(),o=g(!1),i=g(!1),n=g([]);g([]);const r=g("");g(0);const c=g({plugins:[q,H],initialView:a.calendarView,height:"auto",selectable:!0,eventClick:function(e){r.value=e.event.id,o.value=!o.value},eventColor:"transparent",themeSystem:"bootstrap5",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},views:{dayGridMonth:{eventLimit:3},dayGridWeek:{eventLimit:50},dayGridDay:{eventLimit:50}},eventLimitClick:"popover",droppable:!0,editable:!0,dayCellDidMount:function(e){!function(e){var a=e.el;a.style.background="#fff",a.style.borderRadius="16px"}(e)},events:[],datesSet:function(e){l.value=e.startStr.substring(0,10),t.value=e.endStr.substring(0,10)}}),d=()=>{n.value=[];const e=document.querySelector("#rota-celender");e&&e.querySelectorAll("td").forEach((function(e){e.removeAttribute("style")}))},m=e=>{n.value.splice(e,1)},p=async()=>{const{data:e}=await s.get(`v3/api/timesheet/job/${a.id}`);var l;c.value.events=((l=e).forEach((e=>{const a=e.bookOnTime,l=e.bookOffTime;e.startedTime=a,e.endedTime=l,e.start=e.bookOnTime})),l),console.log("rota data",e),d()};return W([()=>l.value,()=>t.value],(([e,a],[l,t])=>{p()})),y((()=>{p()})),W((()=>a.workerId),((e,a)=>{p()})),(e,l)=>{const t=D,s=Y,u=_a;return h(),b(x,null,[I("div",wa,[I("div",xa,[Sa,I("div",Ca,[I("div",Aa,[I("div",ja,[A(t,{disabled:!n.value.length,color:"info",onClick:d,elevated:""},{default:V((()=>[j(" Clear Selection ("+C(n.value.length)+") ",1)])),_:1},8,["disabled"]),A(t,{disabled:!n.value.length,color:"primary",onClick:l[0]||(l[0]=e=>i.value=!i.value),elevated:""},{default:V((()=>[j(" Add Rota - Days ("+C(n.value.length)+") ",1)])),_:1},8,["disabled"])])])])]),A(_(Z),{options:c.value},{eventContent:V((e=>[I("div",Va,[I("div",Ma,[Na,I("p",Ta,C(e.event.extendedProps.startedTime?e.event.extendedProps.startedTime.slice(11,16):"-- : --")+" - "+C(e.event.extendedProps.endedTime?e.event.extendedProps.endedTime.slice(11,16):"----"),1)]),I("div",null,[I("div",Ra,[I("img",{style:{width:"30px"},src:e.event.extendedProps.workerInfo.profileImageURL,alt:""},null,8,La),I("p",Wa,C(e.event.extendedProps.workerInfo?`${e.event.extendedProps.workerInfo.firstName}\n             ${e.event.extendedProps.workerInfo.lastName}`:"Not Added"),1)]),Da,I("p",Pa," Worked: "+C(e.event.extendedProps.hoursWorked?e.event.extendedProps.hoursWorked:"0")+" Hours ",1)])])])),_:1},8,["options"])]),i.value?(h(),k(s,{key:0,"onUpdate:modalHandler":l[1]||(l[1]=()=>{i.value=!i.value,d()}),"onUpdate:OnSuccess":p,AddRotaModalOpen:i.value,selectedDatesArray:n.value,workerId:a.workerId,onRemoveDate:m},null,8,["AddRotaModalOpen","selectedDatesArray","workerId"])):w("",!0),o.value?(h(),k(u,{key:1,timeSheetDetailModal:o.value,timesheetId:r.value,"onUpdate:modalHandler":l[2]||(l[2]=()=>{o.value=!1}),getRota:p},null,8,["timeSheetDetailModal","timesheetId"])):w("",!0)],64)}}}),za=T(Oa,[["__scopeId","data-v-f779d416"]]),Ua=e=>(M("data-v-fb16d804"),e=e(),N(),e),$a={class:"card columns is-multiline mb-3",style:{"border-radius":"24px",width:"100%",padding:"20px 20px","background-image":"linear-gradient(180deg, white 85%, #faad4225)"}},Ja={class:"column is-12 mt-0"},Ga=Ua((()=>I("i",{class:"lnir lnir-pencil-alt",style:{"font-weight":"800"},"aria-hidden":"true"},null,-1))),Ea=Ua((()=>I("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Fa=Ua((()=>I("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1))),Ba=Ua((()=>I("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),qa=Ua((()=>I("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1))),Ha=Ua((()=>I("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Ya=Ua((()=>I("i",{class:"fas fa-clock","aria-hidden":"true"},null,-1))),Za=Ua((()=>I("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Ka=Ua((()=>I("i",{class:"fas fa-child","aria-hidden":"true"},null,-1))),Qa=Ua((()=>I("i",{class:"fas fa-check-circle ml-1","aria-hidden":"true"},null,-1))),Xa={class:"column is-6"},el={class:"row"},al={class:"columns is-multiline"},ll={class:"column is-12 is-md-bold dark-text"},tl={class:"column is-3"},sl={class:"is-small-bold"},ol={style:{"font-size":"13px",color:"#bbb"}},il={class:"is-small-bold"},nl={style:{"font-size":"13px",color:"#bbb"}},rl={class:"column is-3"},cl={class:"is-small-bold mb-1"},dl={style:{"font-size":"13px",color:"#bbb"}},ul={class:"is-small-bold dark-text"},ml={style:{"font-size":"13px",color:"#bbb"}},pl={class:"column is-4"},fl=Ua((()=>I("h1",{class:"title"},"Manager",-1))),vl={class:"is-flex"},gl={class:"manager-info ml-2"},yl={class:"is-bold mb-2"},hl={class:"is-bold mb-2"},bl={key:0,class:"modal-form columns is-multiline cu-all-input mt-6"},Il={class:"field column is-12 mb-0",id:"rota-celender-two"},_l={class:"columns is-multiline mb-3 cu-all-input"},kl={class:"column is-12"},wl={class:"field columns is-multiline mb-0 cu-all-input space-between lengthy-smart-search-dropdown"},xl={class:"field column is-6 mb-0 is-relative"},Sl={class:"mb-2 columns is-multiline"},Cl={class:"column is-4"},Al=["src"],jl={class:"column is-5"},Vl={key:0},Ml={key:1,class:"is-bold"},Nl={class:"column is-12"},Tl=Ua((()=>I("h1",null,"Job",-1))),Rl={class:"is-bold"},Ll={class:"column is-5"},Wl=Ua((()=>I("h1",null,"Id",-1))),Dl={class:"is-bold"},Pl={class:"column is-4"},Ol=Ua((()=>I("h1",null,"Type",-1))),zl={class:"is-bold"},Ul={class:"column is-5"},$l=Ua((()=>I("h1",null,"Created At",-1))),Jl={class:"is-bold"},Gl={class:"column is-4"},El=Ua((()=>I("h1",null,"Manager",-1))),Fl={class:"is-bold"},Bl={class:"column is-12"},ql=Ua((()=>I("h1",null,"Description",-1))),Hl={class:"is-bold"},Yl={key:1,class:"modal-form columns is-multiline cu-all-input mt-1"},Zl={class:"field column is-12 mb-0",id:"rota-celender-two"},Kl={class:"columns is-multiline mb-3 cu-all-input"},Ql={class:"column is-12 mt-5"},Xl={key:0,class:"column is-12"},et={class:"field columns is-multiline mb-0 cu-all-input space-between lengthy-smart-search-dropdown"},at={class:"field column is-5 mb-0"},lt={class:"multiselect-single-label",style:{"background-color":"transparent"}},tt={style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},st={class:"",style:{display:"flex","flex-direction":"column","align-items":"start"}},ot={style:{color:"#666","font-size":"1rem"}},it={style:{"font-weight":"500","font-size":"1.2rem"}},nt={style:{display:"flex","flex-direction":"row",gap:"0.2rem","align-items":"start"}},rt={style:{color:"#666","font-size":"0.9rem"}},ct={style:{color:"#666","font-size":"0.9rem"}},dt=Ua((()=>I("span",{style:{"background-color":"#eee",height:"2px",width:"100%"}},null,-1))),ut={class:"mt-5 is-flex space-between cus-align-center"},mt=Ua((()=>I("h1",null,"Or",-1))),pt={class:"field column is-6 mb-0"},ft={class:"mb-2 columns is-multiline"},vt={class:"column is-4"},gt=["src"],yt={class:"column is-5"},ht={key:0},bt={key:1,class:"is-bold"},It={class:"column is-4"},_t=Ua((()=>I("h1",null,"Site Id",-1))),kt={class:"is-bold"},wt={class:"column is-5"},xt=Ua((()=>I("h1",null,"Site Name",-1))),St={class:"is-bold"},Ct={class:"column is-4"},At=Ua((()=>I("h1",null,"Post Code",-1))),jt={class:"is-bold"},Vt={class:"column is-5"},Mt=Ua((()=>I("h1",null,"Address",-1))),Nt={class:"is-bold"},Tt={class:"column is-4"},Rt=Ua((()=>I("h1",null,"Incharge Name",-1))),Lt={class:"is-bold"},Wt={class:"column is-5"},Dt=Ua((()=>I("h1",null,"Incharge Email",-1))),Pt={class:"is-bold"},Ot={key:1,class:"column is-12"},zt={class:"field columns is-multiline mb-0 cu-all-input space-between smart-search-dropdown"},Ut={class:"field column is-5 mb-0"},$t={class:"multiselect-single-label",style:{"background-color":"transparent"}},Jt=["src"],Gt=["src"],Et={class:"field column is-6 mb-0"},Ft={key:0,class:"is-md-bold mb-2"},Bt={key:1,class:"is-md-bold mb-2"},qt={class:"mb-2 columns is-multiline"},Ht=["onClick"],Yt={class:"info ml-3"},Zt={class:"is-md-bold"},Kt={class:"is-bold cu-align-center"},Qt=Ua((()=>I("i",{class:"iconify mr-1","data-icon":"feather:mail","aria-hidden":"true"},null,-1))),Xt={class:"is-bold cu-align-center"},es=Ua((()=>I("i",{class:"lnil lnil-map-marker mr-1","aria-hidden":"true"},null,-1))),as={class:"column is-3"},ls=Ua((()=>I("h1",null,"Profile Completion",-1))),ts={class:"is-bold"},ss={style:{color:"var(--primary)"}},os={class:"is-bold"},is={class:"column is-3"},ns=Ua((()=>I("h1",null,"Anomalies",-1))),rs={class:"is-bold"},cs={class:"is-bold"},ds={class:"is-bold"},us={key:2,class:"modal-form columns is-multiline cu-all-input"},ms={class:"field column is-12 mb-0",id:"rota-celender-two"},ps={class:"columns is-multiline mb-3 cu-all-input"},fs={class:"column is-12"},vs=Ua((()=>I("h1",null,"Pending for checks",-1))),gs={class:"column is-12"},ys={key:2,class:"modal-form columns is-multiline cu-all-input mt-6"},hs={class:"field column is-12 mb-0",id:"rota-celender-two"},bs={class:"columns is-multiline mb-3 cu-all-input"},Is={class:"column is-12"},_s={class:"field columns is-multiline mb-0 cu-all-input space-between lengthy-smart-search-dropdown"},ks={class:"field column is-12 mb-0 is-relative"},ws={class:"mb-2 columns is-multiline"},xs={class:"field column is-6 mb-0"},Ss={key:0,class:"is-md-bold mb-2"},Cs={key:1,class:"is-md-bold mb-2"},As={class:"mb-2 columns is-multiline"},js={class:"column is-6 is-flex"},Vs={class:"info ml-3"},Ms={class:"is-md-bold"},Ns={class:"is-bold cu-align-center"},Ts=Ua((()=>I("i",{class:"iconify mr-1","data-icon":"feather:mail","aria-hidden":"true"},null,-1))),Rs={class:"is-bold cu-align-center"},Ls=Ua((()=>I("i",{class:"lnil lnil-map-marker mr-1","aria-hidden":"true"},null,-1))),Ws={class:"column is-3"},Ds=Ua((()=>I("h1",null,"Profile Completion",-1))),Ps={class:"is-bold"},Os={style:{color:"var(--primary)"}},zs={class:"is-bold"},Us={class:"column is-3"},$s=Ua((()=>I("h1",null,"Anomalies",-1))),Js={class:"is-bold"},Gs={class:"is-bold"},Es={class:"is-bold"},Fs={key:3,class:"modal-form columns is-multiline cu-all-input mt-0"},Bs={class:"field column is-12 mb-0",id:"rota-celender-two"},qs={class:"columns is-multiline mb-3 cu-all-input"},Hs={class:"column is-12 mt-5"},Ys={class:"column is-12"},Zs={key:0},Ks={key:1},Qs={key:4,class:"modal-form columns is-multiline cu-all-input mt-5"},Xs={class:"field column is-12 mb-0",id:"rota-celender-two"},eo={class:"columns is-multiline mb-3 cu-all-input"},ao={class:"column is-12"},lo={class:"field columns is-multiline mb-0 cu-all-input"},to={class:"field column is-5 mb-0 is-relative"},so={class:"mb-2 columns is-multiline"},oo={class:"field column is-6 mb-0"},io=Ua((()=>I("h1",{class:"is-md-bold mb-2"}," Please verify wether the following steps have been successfully executed. ",-1))),no={class:"field column is-3 mb-0"},ro=Ua((()=>I("div",{class:"field column is-12 mb-0 is-relative"},null,-1))),co=v({__name:"JobsForms",setup(s){const o=R(),i=se(),r=P(),c=g(0),d=K(),m=g(!1),p=le(),f=u(),v=g(!1),M=g(!1);g(0);const N=g(!1),T=g("site"),L=g("rotaView"),E=g(""),F=g(""),B=g(""),q=g("");let H=g([]),Y=g([]),Z=g([]);const oe=g([]),ie=g([]),ne=g([]),re=g([]),ce=g([]),de=g({}),ue=g({}),me=g(""),pe=g([0]),fe=g(""),ve=g(!1),ge=g(!1),ye=g(!1),he=g(!1),be=g(["created","waitingRAMS","readyToStart","started","completed"]),Ie=e=>be.value.indexOf(e)<=be.value.indexOf(_e.value.state);g({name:"",address:"",postcode:"",latitude:0,longitude:0,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{},color:"",contract:0});const _e=g({id:1,managerInfo:{company:0,email:"",first_name:"",id:0,last_name:"",partner:null,phoneNo:"",profileImage:"",role:""},assignedWorkers:[{id:0,firstName:"",lastName:"",latitude:0,longitude:0,postCode:"",phoneNumber:"",emailAddress:"",profileImageURL:"",profileStat:{percentage:5.9,emptyFields:[{doc:"",status:!1,is_uploaded:!1}],anomalieStats:{expired:0,required_not_uploaded:0,optional_not_uploaded:0}},readyToGo:!1}],siteInfo:{id:0,name:"",address:"",postcode:"",latitude:0,longitude:0,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:null,comments:null,geofence:[{lat:0,lng:0}],created_at:"2024-05-03T11:39:57.787398Z",updated_at:"2024-05-03T11:39:57.968769Z",color:"#D875C7",regionFormat:"Convenience Central",areaManager:"Mark Pannell ",managingDirector:"Kevin Tindall ",contract:60,contractInfo:{id:0,name:" ",company:0,customer_company:0,incharge_name:"",color:"",charge_rate:0,cuCompanyInfo:{id:0,name:"",email:"",logo:"",phone_number:""}}},workersList:[],title:"",description:"",externalId:"",isWorkWithContractor:!0,status:"",createdAt:"",updatedAt:"",manager:null,workers:[],state:"",file:""}),ke=O({series:[0],chart:{height:240,type:"radialBar",toolbar:{show:!1}},colors:[i.success],plotOptions:{radialBar:{hollow:{size:"40%"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontWeight:500,offsetY:-10,color:i.success},value:{show:!0,fontWeight:600,color:i.success,fontSize:"16px",offsetY:-10}}}},labels:[""]}),we=async()=>{try{m.value=!0;const e=await f.get(`/v3/api/vixen-job/${r.params.id}/`);_e.value=e.data,fe.value=e.data.state,m.value=!1}catch(e){console.log(e)}},xe=e=>{T.value=e},Se=e=>{const a=new Date(e),l=new Intl.DateTimeFormat("en-US",{weekday:"long",day:"2-digit",month:"long"});_e.value.title=`Job at ${l.format(a)}`},Ce=async()=>{try{if(m.value=!0,F.value){await f.patch(`/v3/api/vixen-job/${r.params.id}/`,{site:F.value});p.success("Site assigned to job")}else p.error("Please select a site first");m.value=!1}catch(e){console.log(e)}},Ae=async()=>{try{const e=await f.get(`/v3/api/vixen-job/${r.params.id}/assigned-workers/`);_e.value.assignedWorkers=e.data,ce.value=e.data}catch(e){console.log(e)}},je=async()=>{try{await f.patch(`/v3/api/vixen-job/${r.params.id}/`,{state:"completed"});p.success("Job mark as completed successfully"),o.push("/sidebar/company/jobs")}catch(e){console.log(e)}};return W(F,((e,a)=>{(async e=>{try{const a=await f.get(`/v3/api/site/${e}/detail/`);_e.value.siteInfo=a.data,console.log("current selected site",a.data)}catch(a){console.log(a)}})(e)})),W(q,((e,a)=>{_e.value.manager=e})),W(F,((e,a)=>{M.value=!1;const l=oe.value.find((a=>a.id==e));l&&(de.value=l,console.log("current sellected site",de.value),M.value=!0)})),W(B,((e,a)=>{M.value=!1,(async e=>{try{await f.post(`/v3/api/vixen-job/${r.params.id}/assign/${e}/`),p.success("worker assigned"),Ae()}catch(a){console.log(a)}})(e);const l=ne.value.find((a=>a.id==e));l&&(re.value.push(l),ue.value=l,console.log("current sellected worker",ue.value),M.value=!0)})),W([ve,ge,ye,he],(([e,a,l,t])=>{let s=0;e&&s++,a&&s++,l&&s++,t&&s++,pe.value=25*s})),y((()=>{we(),(async()=>{try{const e=await f.get(`/v3/api/worker/${d.loggedCompany.id}/worker-short-info/`);ne.value=e.data,ie.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL})))}catch{p.error("Invalid data")}finally{m.value=!1}})(),(async()=>{try{const e=await f.get(`/v3/api/account/user/company-managers/${d.loggedCompany.id}/`,{});H.value=e.data.map((e=>({value:e.id.toString(),name:`${e.first_name} ${e.last_name}`,icon:e.profileImage,email:e.email}))),e.data&&(q.value=e.data[0].id)}catch{p.error("Invalid data")}finally{m.value=!1}})(),(()=>{let e=new Date,a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");Se(`${a}-${l}-${t}`)})(),(async()=>{try{const e=await f.get(`/v3/api/contract/company/${d.loggedCompany.id}/`,{});Y.value=e.data.map((e=>({value:e.id.toString(),name:e.name}))),e.data?E.value=e.data[0].id:E.value=""}catch(e){console.log(e)}})(),(async()=>{try{m.value=!0;const e=await f.get(`/v3/api/site/option/${d.loggedCompany.id}/`);Z.value=e.data.map((e=>({value:e.id.toString(),name:`${e.name}`,postcode:e.postcode,incharge:e.inchargeName}))),e.data&&(oe.value=e.data),m.value=!1}catch(e){console.log(e)}})(),Ae()})),(s,i)=>{const d=D,u=J,g=n,y=z("Multiselect"),M=ae,R=ee,W=e,P=X,O=Q,E=za,q=Pe,H=t,Y=l,K=a;return h(),b("div",null,[I("div",$a,[I("div",Ja,[A(u,null,{default:V((()=>[A(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[0]||(i[0]=()=>{fe.value="created"}),class:U([Ie("created")?"parentActiveState":"","created"===_(fe)?"parentActiveTab":""])},{default:V((()=>[Ga,j(" Created "),Ea])),_:1},8,["class"]),A(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[1]||(i[1]=()=>{fe.value="waitingRAMS"}),class:U([Ie("waitingRAMS")?"parentActiveState":"","waitingRAMS"===_(fe)?"parentActiveTab":""])},{default:V((()=>[Fa,j(" Pending for Checks "),Ba])),_:1},8,["class"]),A(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[2]||(i[2]=()=>{fe.value="readyToStart"}),class:U([Ie("readyToStart")?"parentActiveState":"","readyToStart"===_(fe)?"parentActiveTab":""])},{default:V((()=>[qa,j(" Ready to start "),Ha])),_:1},8,["class"]),A(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[3]||(i[3]=()=>{fe.value="started"}),class:U([Ie("started")?"parentActiveState":"","started"===_(fe)?"parentActiveTab":""])},{default:V((()=>[Ya,j(" In Progress "),Za])),_:1},8,["class"]),A(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[4]||(i[4]=()=>{fe.value="completed"}),class:U([Ie("completed")?"parentActiveState":"","completed"===_(fe)?"parentActiveTab":""])},{default:V((()=>[Ka,j(" Completed "),Qa])),_:1},8,["class"])])),_:1})]),I("div",Xa,[I("div",el,[I("div",al,[I("p",ll,C(_(_e).title?_(_e).title:"-----"),1),I("div",tl,[I("p",sl,[j(" Id: "),I("span",ol,C(_(_e).externalId?_(_e).externalId:"-----"),1)]),I("p",il,[j(" Workers: "),I("span",nl,C(_(_e).workers?_(_e).workers.length:"0"),1)])]),I("div",rl,[I("p",cl,[j(" Type: "),I("span",dl,C(_(_e).isWorkWithContractor?"Work with contractor":"Self Serve"),1)]),I("p",ul,[j(" Created At: "),I("span",ml,C(_(_e).createdAt?_(_e).createdAt.slice(0,10):"-----"),1)])])])])]),I("div",pl,[fl,I("div",vl,[A(g,{picture:_(_e).managerInfo&&_(_e).managerInfo.profileImage?_(_e).managerInfo.profileImage:"",size:"medium",squared:""},null,8,["picture"]),I("div",gl,[I("p",yl,C(_(_e).managerInfo&&_(_e).managerInfo.first_name?_(_e).managerInfo.first_name:"------")+" "+C(_(_e).managerInfo&&_(_e).managerInfo.last_name?_(_e).managerInfo.last_name:""),1),I("p",hl,C(_(_e).managerInfo&&_(_e).managerInfo.email?_(_e).managerInfo.email:"------"),1)])])])]),"created"==_(fe)?(h(),b("div",bl,[I("div",Il,[I("div",_l,[I("div",kl,[I("div",wl,[I("div",xl,[I("i",{onClick:i[5]||(i[5]=e=>{return a=_(_e).id,c.value=a,void(v.value=!0);var a}),class:"fas fa-pen cu-pointer","aria-hidden":"true",style:{position:"absolute",right:"14px",top:"10px"}}),I("div",Sl,[I("div",Cl,[_(_e).siteInfo&&_(_e).siteInfo.contractInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo&&!_(m)?(h(),b("img",{key:0,class:"small-img",src:_(_e).siteInfo.contractInfo.cuCompanyInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo.logo?_(_e).siteInfo.contractInfo.cuCompanyInfo.logo:"",size:"medium"},null,8,Al)):w("",!0)]),I("div",jl,[_(_e).siteInfo&&_(_e).siteInfo.contractInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo&&!_(m)?(h(),b("h1",Vl,C(_(_e).siteInfo.contractInfo.cuCompanyInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo.name?_(_e).siteInfo.contractInfo.cuCompanyInfo.name:"Not added yet"),1)):w("",!0),_(_e).siteInfo&&_(_e).siteInfo.contractInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo&&!_(m)?(h(),b("p",Ml,C(_(_e).siteInfo.contractInfo.cuCompanyInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo.email?_(_e).siteInfo.contractInfo.cuCompanyInfo.email:"------"),1)):w("",!0)]),I("div",Nl,[Tl,I("p",Rl,C(_(_e)&&_(_e).title?_(_e).title:"0"),1)]),I("div",Ll,[Wl,I("p",Dl,C(_(_e).externalId&&_(_e).externalId?_(_e).externalId:"-----"),1)]),I("div",Pl,[Ol,I("p",zl,C(_(_e).isWorkWithContractor&&_(_e).isWorkWithContractor?"Work with contractor":" Self Serve"),1)]),I("div",Ul,[$l,I("p",Jl,C(_(_e).createdAt&&_(_e).createdAt?_(_e).createdAt.slice(0,10):"0"),1)]),I("div",Gl,[El,I("p",Fl,C(_(_e).managerInfo&&_(_e).managerInfo.first_name?_(_e).managerInfo.first_name:"--- --- "),1)]),I("div",Bl,[ql,I("p",Hl,C(_(_e).description&&_(_e).description?_(_e).description:"-----"),1)])])])])])])])])):w("",!0),"waitingRAMS"==_(fe)?(h(),b("div",Yl,[I("div",Zl,[I("div",Kl,[I("div",Ql,[A(u,null,{default:V((()=>[A(d,{rounded:"",onClick:i[6]||(i[6]=e=>xe("waitingRAMS")),color:"waitingRAMS"===_(T)?"primary":""},{default:V((()=>[j("1 - Manage RAMS ")])),_:1},8,["color"]),A(d,{rounded:"",onClick:i[7]||(i[7]=e=>xe("site")),color:"site"===_(T)?"primary":""},{default:V((()=>[j("2 - Job Site (optional) ")])),_:1},8,["color"]),A(d,{rounded:"",onClick:i[8]||(i[8]=e=>xe("worker")),color:"worker"===_(T)?"primary":""},{default:V((()=>[j("3 - Allocate Worker (optional) ")])),_:1},8,["color"])])),_:1})]),"site"==_(T)?(h(),b("div",Xl,[I("div",et,[I("div",at,[I("label",null,"Select Site ("+C(_(Z).length>10?_(Z).length:"0"+_(Z).length)+")*",1),A(R,null,{default:V((({id:e})=>[A(M,{class:"placement-wrapper"},{default:V((()=>[A(y,{class:"multi-select lg-multiselect",modelValue:_(F),"onUpdate:modelValue":i[9]||(i[9]=e=>$(F)?F.value=e:null),attrs:{id:e},placeholder:"Select site",label:"name",options:_(Z),searchable:!0,"track-by":"name",height:300},{singlelabel:V((({value:e})=>[I("div",lt,C(e.name),1)])),option:V((({option:e})=>[I("div",tt,[I("div",st,[I("span",ot,"ID: 00"+C(e.value),1),I("span",it,C(e.name),1),I("div",nt,[I("span",rt,"Post Code: "+C(e.postcode?e.postcode:" ---"),1),j(" | "),I("span",ct,"Incharge: "+C(e.incharge),1)])]),dt])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),I("div",ut,[A(d,{onClick:Ce,elevated:"",color:"warning"},{default:V((()=>[j(" Assign Site ")])),_:1}),mt,A(d,{onClick:i[10]||(i[10]=()=>{N.value=!_(N)}),elevated:"",color:"warning"},{default:V((()=>[j(" Create new Site ")])),_:1})])]),I("div",pt,[I("div",ft,[I("div",vt,[_(_e).siteInfo&&_(_e).siteInfo.contractInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo&&!_(m)?(h(),b("img",{key:0,class:"small-img",src:_(_e).siteInfo.contractInfo.cuCompanyInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo.logo?_(_e).siteInfo.contractInfo.cuCompanyInfo.logo:"",size:"medium"},null,8,gt)):w("",!0)]),I("div",yt,[_(_e).siteInfo&&_(_e).siteInfo.contractInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo&&!_(m)?(h(),b("h1",ht,C(_(_e).siteInfo.contractInfo.cuCompanyInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo.name?_(_e).siteInfo.contractInfo.cuCompanyInfo.name:"Not added yet"),1)):w("",!0),_(_e).siteInfo&&_(_e).siteInfo.contractInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo&&!_(m)?(h(),b("p",bt,C(_(_e).siteInfo.contractInfo.cuCompanyInfo&&_(_e).siteInfo.contractInfo.cuCompanyInfo.email?_(_e).siteInfo.contractInfo.cuCompanyInfo.email:"------"),1)):w("",!0)]),I("div",It,[_t,I("p",kt," 00"+C(_(_e).siteInfo&&_(_e).siteInfo.id?_(_e).siteInfo.id:"0"),1)]),I("div",wt,[xt,I("p",St,C(_(_e).siteInfo&&_(_e).siteInfo.name?_(_e).siteInfo.name:"0"),1)]),I("div",Ct,[At,I("p",jt,C(_(_e).siteInfo&&_(_e).siteInfo.postcode?_(_e).siteInfo.postcode:"--- --- "),1)]),I("div",Vt,[Mt,I("p",Nt,C(_(_e).siteInfo&&_(_e).siteInfo.address?_(_e).siteInfo.address:"-----"),1)]),I("div",Tt,[Rt,I("p",Lt,C(_(_e).siteInfo&&_(_e).siteInfo.inchargeName?_(_e).siteInfo.inchargeName:"--- --- "),1)]),I("div",Wt,[Dt,I("p",Pt,C(_(_e).siteInfo&&_(_e).siteInfo.inchargeEmail?_(_e).siteInfo.inchargeEmail:"-----"),1)])]),_(m)?w("",!0):(h(),k(W,{key:0,style:{width:"90%",height:"220px"},siteData:_(_e).siteInfo?_(_e).siteInfo:_(_e)},null,8,["siteData"]))])])])):w("",!0),"worker"==_(T)?(h(),b("div",Ot,[I("div",zt,[I("div",Ut,[I("label",null,"Select Worker ("+C(_(ie).length>10?_(ie).length:"0"+_(ie).length)+")*",1),A(R,null,{default:V((({id:e})=>[A(M,{class:"placement-wrapper"},{default:V((()=>[A(y,{class:"multi-select lg-multiselect",modelValue:_(B),"onUpdate:modelValue":i[11]||(i[11]=e=>$(B)?B.value=e:null),attrs:{id:e},placeholder:"Select site",label:"name",options:_(ie),searchable:!0,"track-by":"name"},{singlelabel:V((({value:e})=>[I("div",$t,[I("img",{class:"select-label-icon mr-2 value-image",src:e.icon,alt:""},null,8,Jt),j(" "+C(e.name),1)])])),option:V((({option:e})=>[I("img",{class:"select-label-icon mr-2 value-image",src:e.icon,alt:""},null,8,Gt),j(" "+C(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),I("div",Et,[_(_e).assignedWorkers.length?(h(),b("h1",Ft," Assigned Workers ("+C(_(_e).assignedWorkers.length)+") ",1)):(h(),b("h1",Bt," No Assigned Worker Assigned yet ")),(h(!0),b(x,null,S(_(_e).assignedWorkers,(e=>(h(),b("div",{key:e.id,class:"card px-4 py-3 mb-2 rounded"},[A(P,{onClick:a=>(async e=>{try{await f.delete(`/v3/api/vixen-job/${r.params.id}/remove/${e}/`),p.error("Worker removed from the site"),Ae()}catch(a){console.log(a)}})(e.id),color:"danger",light:"",raised:"",circle:"",icon:"feather:x",style:{position:"absolute","font-size":"22px",right:"10px",top:"10px",cursor:"pointer",padding:"0",width:"22px",height:"22px"}},null,8,["onClick"]),I("div",qt,[I("div",{class:"column is-6 is-flex cu-pointer",onClick:a=>{return l=e.id,void o.push({name:"/sidebar/company/workers/[id]",params:{id:l}});var l}},[A(g,{picture:e.profileImageURL?e.profileImageURL:"/demo/avatars/11.jpg",size:"large"},null,8,["picture"]),I("div",Yt,[I("p",Zt,C(e.firstName?e.firstName:"---")+" "+C(e.lastName?e.lastName:"---"),1),I("p",Kt,[Qt,j(" "+C(e.emailAddress?e.emailAddress:"--- --- "),1)]),I("p",Xt,[es,j(" "+C(e.postCode?e.postCode:"--- --- "),1)])])],8,Ht),I("div",as,[ls,I("p",ts,[I("span",ss,C(e.profileStat&&e.profileStat.percentage?e.profileStat.percentage:"0")+"%",1),j(" Complete ")]),I("p",os,[I("span",{style:G({color:e.readyToGo?"var(--primary)":"var(--danger)"})},C(1==e.readyToGo?"Ready to go":"Not Ready"),5)])]),I("div",is,[ns,I("p",rs," Mandatory : - "+C(e.profileStat.anomalieStats?e.profileStat.anomalieStats.required_not_uploaded:"0"),1),I("p",cs," Optional : - "+C(e.profileStat.anomalieStats?e.profileStat.anomalieStats.optional_not_uploaded:"0"),1),I("p",ds," Expired : - "+C(e.profileStat.anomalieStats?e.profileStat.anomalieStats.expired:"0"),1)])])])))),128))])])])):w("",!0),"waitingRAMS"==_(T)?(h(),b("div",us,[I("div",ms,[I("div",ps,[I("div",fs,[vs,I("div",gs,[A(R,null,{default:V((()=>[A(M,null,{default:V((()=>[A(O,{modelValue:_(me),"onUpdate:modelValue":i[12]||(i[12]=e=>$(me)?me.value=e:null),rows:"4",placeholder:"Enter note..."},null,8,["modelValue"])])),_:1})])),_:1})])])])])])):w("",!0)])])])):w("",!0),"readyToStart"==_(fe)?(h(),b("div",ys,[I("div",hs,[I("div",bs,[I("div",Is,[I("div",_s,[I("div",ks,[I("div",ws,[I("div",xs,[_(ce).length?(h(),b("h1",Ss,C(_(ce).length)+" - Workers are assigned and ready to start the job. ",1)):(h(),b("h1",Cs," No Assigned Worker Assigned yet ")),(h(!0),b(x,null,S(_(ce),(e=>(h(),b("div",{key:e.id,class:"card px-4 py-3 mb-2 rounded"},[I("div",As,[I("div",js,[A(g,{picture:e.profileImageURL?e.profileImageURL:"/demo/avatars/11.jpg",size:"large"},null,8,["picture"]),I("div",Vs,[I("p",Ms,C(e.firstName?e.firstName:"---")+" "+C(e.lastName?e.lastName:"---"),1),I("p",Ns,[Ts,j(" "+C(e.emailAddress?e.emailAddress:"--- --- "),1)]),I("p",Rs,[Ls,j(" "+C(e.postCode?e.postCode:"--- --- "),1)])])]),I("div",Ws,[Ds,I("p",Ps,[I("span",Os,C(e.profileStat.percentage)+"%",1),j(" Complete ")]),I("p",zs,[I("span",{style:G({color:e.readyToGo?"var(--primary)":"var(--danger)"})},C(e.readyToGo?"Ready to go":"Not Ready"),5)])]),I("div",Us,[$s,I("p",Js," Mandatory : - "+C(e.profileStat.anomalieStats?e.profileStat.anomalieStats.required_not_uploaded:"0"),1),I("p",Gs," Optional : - "+C(e.profileStat.anomalieStats?e.profileStat.anomalieStats.optional_not_uploaded:"0"),1),I("p",Es," Expired : - "+C(e.profileStat.anomalieStats?e.profileStat.anomalieStats.expired:"0"),1)])])])))),128))])])])])])])])])):w("",!0),"started"==_(fe)?(h(),b("div",Fs,[I("div",Bs,[I("div",qs,[I("div",Hs,[A(u,null,{default:V((()=>[A(d,{rounded:"",onClick:i[13]||(i[13]=()=>{L.value="rotaView"}),color:"rotaView"===_(L)?"primary":""},{default:V((()=>[j("Schedule ")])),_:1},8,["color"]),A(d,{rounded:"",onClick:i[14]||(i[14]=()=>{L.value="timesheet"}),color:"timesheet"===_(L)?"primary":""},{default:V((()=>[j("Site visit logs ")])),_:1},8,["color"])])),_:1})]),I("div",Ys,["rotaView"==_(L)?(h(),b("div",Zs,[A(E,{id:_(r).params.id},null,8,["id"])])):w("",!0),"timesheet"==_(L)?(h(),b("div",Ks,[A(q,{id:_(r).params.id},null,8,["id"])])):w("",!0)])])])])):w("",!0),"completed"==_(fe)?(h(),b("div",Qs,[I("div",Xs,[I("div",eo,[I("div",ao,[I("div",lo,[I("div",to,[I("div",so,[I("div",oo,[io,A(R,null,{default:V((()=>[A(M,{raw:"",subcontrol:""},{default:V((()=>[A(H,{modelValue:_(ye),"onUpdate:modelValue":i[15]||(i[15]=e=>$(ye)?ye.value=e:null),label:"PM assigned ?",color:"info"},null,8,["modelValue"])])),_:1}),A(M,{raw:"",subcontrol:""},{default:V((()=>[A(H,{modelValue:_(ge),"onUpdate:modelValue":i[16]||(i[16]=e=>$(ge)?ge.value=e:null),label:"Checks completed (RAMS/CPP) ?",color:"primary"},null,8,["modelValue"])])),_:1}),A(M,{raw:"",subcontrol:""},{default:V((()=>[A(H,{modelValue:_(he),"onUpdate:modelValue":i[17]||(i[17]=e=>$(he)?he.value=e:null),label:"Workers compliance checked ?",color:"success"},null,8,["modelValue"])])),_:1}),A(M,{raw:"",subcontrol:""},{default:V((()=>[A(H,{modelValue:_(ve),"onUpdate:modelValue":i[18]||(i[18]=e=>$(ve)?ve.value=e:null),color:"info",label:"Job completed successfully ?"},null,8,["modelValue"])])),_:1})])),_:1}),A(d,{onClick:je,style:{float:"right"},elevated:"",color:"warning"},{default:V((()=>[j("Complete Job")])),_:1})])])]),I("div",no,[A(_(te),{id:"radial-circle",class:"circle-chart-wrapper",height:_(ke).chart.height,type:_(ke).chart.type,series:[_(pe)],options:_(ke)},null,8,["height","type","series","options"])]),ro])])])])])):w("",!0),_(v)?(h(),k(Y,{key:5,jobId:_(c),AddJobModalOpen:_(v),"onUpdate:modalHandler":i[19]||(i[19]=e=>v.value=!1),"onUpdate:onSuccess":we},null,8,["jobId","AddJobModalOpen"])):w("",!0),_(N)?(h(),k(K,{key:6,contractId:_(_e).siteInfo.contract,"onUpdate:modalHandler":i[20]||(i[20]=()=>{N.value=!_(N)}),AddSiteModalOpen:_(N),"onUpdate:OnSuccess":we},null,8,["contractId","AddSiteModalOpen"])):w("",!0)])}}}),uo=T(co,[["__scopeId","data-v-fb16d804"]]),mo=v({__name:"[id]",setup:e=>(oe().setPageTitle("Job Info"),E({title:"Jobs - Arez"}),(e,a)=>{const l=uo;return h(),b("div",null,[A(l)])})});export{mo as default};
