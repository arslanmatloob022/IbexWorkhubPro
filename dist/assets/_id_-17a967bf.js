import{_ as e}from"./AddUpdateUser-1cc5ac63.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-0418399c.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-1b23da92.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-2886593b.js";import{_ as l}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-b504e853.js";import{f as i,r,$ as n,o,C as u,D as p,m as c,O as _,E as d,F as v,G as m,L as y,k as g,X as f,U as h,K as k,I as j,V as b,W as x,aS as w,N as V,P as I,y as T,H as C,J as A,A as P}from"./index-69081f3d.js";import{_ as S}from"./VField.vue_vue_type_script_setup_true_lang-05c8a30c.js";import{_ as L}from"./VControl-9c54ab47.js";import{_ as M}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-49cf227c.js";import{_ as W,a as F}from"./search-1-dark-61831a90.js";import{u as N}from"./useAPI-1291b2e3.js";import{u as U}from"./useNotyf-346954c1.js";import{_ as O,a as E}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-a1fe1c4f.js";import{i as R}from"./index-60d43df9.js";import{u as K}from"./personalScoreGauge-5febb1d9.js";import{u as D}from"./viewWrapper-de78572e.js";import"./VModal.vue_vue_type_style_index_0_lang-579ee674.js";import"./VIcon.vue_vue_type_script_setup_true_lang-486fea66.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-d6149ef2.js";import"./VLabel.vue_vue_type_script_setup_true_lang-af499751.js";import"./useVFieldContext-706bc66d.js";import"./VFilePond.vue_vue_type_script_lang-31854833.js";import"./VInput.vue_vue_type_script_setup_true_lang-2eaa04da.js";import"./useSupportElement-1d09722f.js";import"./VFlex.vue_vue_type_style_index_0_lang-8a6f33e9.js";import"./VPlaceloadWrap-1d89fb9d.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-2409ac51.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-205d63fc.js";import"./notyf-93785595.js";import"./useThemeColors-f709bd19.js";import"./TaskInfoModal.vue_vue_type_script_setup_true_lang-30e272d1.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-196090ab.js";import"./search-6-dark-6c9b195a.js";import"./via-placeholder-24645670.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-07191c3a.js";import"./VBlock.vue_vue_type_style_index_0_lang-9a794712.js";import"./UpdateTask.vue_vue_type_script_setup_true_lang-8f35a18b.js";import"./VOption.vue_vue_type_style_index_0_lang-887da321.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-8128506c.js";import"./VDropdown.vue_vue_type_style_index_0_lang-c10d3788.js";import"./useDropdown-490d1405.js";import"./projects-dark-4a371d8a.js";import"./VFlexTable.vue_vue_type_style_index_0_lang-0bed1c58.js";import"./search-4-dark-2b5b440c.js";import"./index-c1fc2d09.js";import"./having-coffee-dark-69a7d2f6.js";import"./index-51c95dce.js";import"./billboard-95768f63.js";const H={key:1},X={class:"list-view-toolbar"},$={class:"list-info"},q={key:0},z={key:1},B={class:"buttons"},G={class:"page-content-inner"},J={class:"list-view list-view-v1"},Q=d("img",{class:"light-image",src:W,alt:""},null,-1),Y=d("img",{class:"dark-image",src:F,alt:""},null,-1),Z={class:"list-view-inner"},ee={class:"list-view-item-inner"},se={class:"meta-left"},ae=d("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),te={class:"meta-right"},le={class:"tags"},ie={class:"stats"},re={class:"stat"},ne=d("span",null,"Status",-1),oe=d("div",{class:"separator"},null,-1),ue={class:"stat"},pe=d("span",null,"Active tasks",-1),ce=d("div",{class:"separator"},null,-1),_e={class:"stat"},de=d("span",null,"Pending tasks",-1),ve=i({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(i){const T=i,C=N();U();const A=r(!1),P=r({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),W=r(""),F=n((()=>W.value?P.value.filter((e=>e.username.match(new RegExp(W.value,"i"))||e.email.match(new RegExp(W.value,"i")))):P.value));console.log(F.value);const O=r(!1),E=()=>{O.value=!0},R=async()=>{try{A.value=!0;const e=await C.get(`/api/users/workers/?supplier=${T.supplierId}`);P.value=e.data}catch(e){console.log(e)}finally{A.value=!1}};return o((()=>{R()})),(i,r)=>{const n=M,o=L,C=S,P=I,N=l,U=t,K=a,D=s,ve=e;return u(),p(b,null,[c(A)?(u(),_(n,{key:0})):(u(),p("div",H,[d("div",X,[v(C,null,{default:m((()=>[v(o,{icon:"feather:search"},{default:m((()=>[y(d("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>g(W)?W.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(W)]])])),_:1})])),_:1}),d("div",$,[1===c(F).length?(u(),p("span",q,"1 record found")):(u(),p("span",z,h(c(F).length)+" records found",1))]),d("div",B,[v(P,{color:"primary",onClick:E,icon:"fas fa-plus",elevated:""},{default:m((()=>[k(" Worker ")])),_:1})])]),d("div",G,[d("div",J,[v(N,{class:j([0!==c(F).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:m((()=>[Q,Y])),_:1},8,["class"]),d("div",Z,[v(w,{name:"list-complete",tag:"div"},{default:m((()=>[(u(!0),p(b,null,x(c(F),((e,s)=>(u(),p("div",{key:s,class:"list-view-item"},[d("div",ee,[v(U,{picture:e.avatar,size:"large"},null,8,["picture"]),d("div",se,[d("h3",null,h(e.username),1),d("span",null,[ae,d("span",null,h(e.email),1)])]),d("div",te,[d("div",le,[v(K,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),d("div",ie,[d("div",re,[d("span",null,h(e.is_active?"Active":"In-Active"),1),ne]),oe,d("div",ue,[d("span",null,h(e.active_tasks),1),pe]),ce,d("div",_e,[d("span",null,h(e.pending_tasks),1),de])])])])])))),128))])),_:1})])]),c(F).length>5?(u(),_(D,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):V("",!0)])])),c(O)?(u(),_(ve,{key:2,isModalOpen:c(O),supplierId:T.supplierId,userRole:"worker","onUpdate:closeModalHandler":r[1]||(r[1]=e=>O.value=!1),"onUpdate:actionUpdateHandler":R},null,8,["isModalOpen","supplierId"])):V("",!0)],64)}}}),me={class:"lifestyle-dashboard lifestyle-dashboard-v3"},ye={class:"illustration-header"},ge={class:"p-4"},fe={class:"header-meta"},he={class:"summary-stats"},ke={class:"summary-stat"},je=d("span",null,"Role",-1),be={class:"summary-stat"},xe=d("span",null,"Status",-1),we={class:"summary-stat"},Ve=d("span",null,"Phone",-1),Ie={class:"summary-stat"},Te=d("span",null,"Email",-1),Ce={class:"summary-stat h-hidden-tablet-p"},Ae=d("span",null,"Email Notification",-1),Pe={class:"columns is-multiline is-flex-tablet-p"},Se={class:"list-flex-toolbar is-reversed"},Le={class:"tabs-inner"},Me={class:"tabs is-boxed"},We=[d("span",null,"Chronic View",-1)],Fe=[d("span",null,"Tasks",-1)],Ne=[d("span",null,"Workers",-1)],Ue=d("li",{class:"tab-naver"},null,-1),Oe={key:0,class:"column is-12"},Ee={key:1,class:"column is-12"},Re={key:2,class:"column is-12"},Ke=i({__name:"SubContractorProfile",setup(e){U();const s=N(),a=T();r([]),K();const l=r({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});r(!1),r("all");const i=r(!1),n=r("chronic");r([]),r([]),r([]),r([]),r({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),r({plugins:[R],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]});return r({}),o((async()=>{await(async()=>{try{i.value=!0;const e=await s.get(`/api/users/${a.params.id}`);l.value=e.data}catch(e){console.log(e)}finally{i.value=!1}})()})),(e,s)=>{const r=t,o=O,_=E,m=ve;return u(),p("div",me,[d("div",ye,[d("div",ge,[v(r,{size:"xl",squared:"",picture:c(l).avatar,alt:""},null,8,["picture"])]),d("div",fe,[d("h3",null,h(c(i)?"Loading...":c(l)?.username),1),d("div",he,[d("div",ke,[d("span",null,h(c(i)?"Loading...":c(l)?.role),1),je]),d("div",be,[d("span",null,h(c(i)?"Loading...":c(l)?.is_active?"Active":" In-Active"),1),xe]),d("div",we,[d("span",null,h(c(i)?"Loading...":c(l)?.phoneNumber?c(l)?.phoneNumber:"N/A"),1),Ve]),d("div",Ie,[d("span",null,h(c(i)?"Loading...":c(l)?.email),1),Te]),d("div",Ce,[d("span",null,h(c(i)?"Loading...":c(l).is_sentMail?"On":"Off"),1),Ae])])])]),d("div",Pe,[d("div",Se,[d("div",Le,[d("div",Me,[d("ul",null,[d("li",{class:j(["chronic"===c(n)&&"is-active"])},[d("a",{tabindex:"0",role:"button",onKeydown:s[0]||(s[0]=C(A((e=>n.value="chronic"),["prevent"]),["space"])),onClick:s[1]||(s[1]=e=>n.value="chronic")},We,32)],2),d("li",{class:j(["tasks"===c(n)&&"is-active"])},[d("a",{tabindex:"0",role:"button",onKeydown:s[2]||(s[2]=C(A((e=>n.value="tasks"),["prevent"]),["space"])),onClick:s[3]||(s[3]=e=>n.value="tasks")},Fe,32)],2),d("li",{class:j(["workers"===c(n)&&"is-active"])},[d("a",{tabindex:"0",role:"button",onKeydown:s[4]||(s[4]=C(A((e=>n.value="workers"),["prevent"]),["space"])),onClick:s[5]||(s[5]=e=>n.value="workers")},Ne,32)],2),Ue])])])]),"chronic"==c(n)?(u(),p("div",Oe,[v(o,{userId:c(a).params.id},null,8,["userId"])])):V("",!0),"tasks"==c(n)?(u(),p("div",Ee,[v(_,{workerId:c(a).params.id},null,8,["workerId"])])):V("",!0),"workers"==c(n)?(u(),p("div",Re,[v(m,{"supplier-id":c(a).params.id},null,8,["supplier-id"])])):V("",!0)])])}}}),De={class:""},He=i({__name:"[id]",setup:e=>(D().setPageTitle("Sub-Contractor Info"),P({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ke;return u(),p("div",De,[v(a)])})});export{He as default};
