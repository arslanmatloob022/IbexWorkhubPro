import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-00d792ab.js";import{_ as a}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-f4d7343f.js";import{_ as l}from"./AddUpdateUser.vue_vue_type_script_setup_true_lang-644160cb.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-6ade93ae.js";import{_ as t}from"./VDropdown.vue_vue_type_style_index_0_lang-934ff033.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-edc87df5.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-9fb6d72e.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-1aa6ab97.js";import{e as o,r as u,t as d,Z as p,o as _,y as c,z as v,l as m,H as g,C as y,A as f,B as h,S as w,T as j,j as k,J as b,D as x,O as C,Q as V,R as A,aR as P,P as S,E as M,v as O,ak as I}from"./index-8bd914ed.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-f830af8d.js";import{_ as E}from"./VControl-38a99561.js";import{_ as T}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-f9f914f0.js";import{_ as D,a as F}from"./search-1-dark-61831a90.js";import{u as H}from"./useAPI-a183d4e1.js";import{f as R}from"./useSupportElement-b09e0a28.js";import{u as z}from"./useNotyf-14e47800.js";import{u as J}from"./viewWrapper-751cd710.js";import"./VModal.vue_vue_type_style_index_0_lang-eabe29d0.js";import"./VIcon.vue_vue_type_script_setup_true_lang-3adf982f.js";import"./VInput.vue_vue_type_script_setup_true_lang-bd18217b.js";import"./useVFieldContext-42cc4cef.js";import"./VLabel.vue_vue_type_script_setup_true_lang-56f2b33a.js";import"./VRadio.vue_vue_type_style_index_0_lang-f8744fd5.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-8102ac3c.js";import"./VFilePond.vue_vue_type_script_lang-f6f01fd1.js";import"./VFlex.vue_vue_type_style_index_0_lang-c3a7fb0e.js";import"./useDropdown-0df6ca4e.js";import"./VPlaceloadWrap-745c7497.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-26b5b112.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-12aa813f.js";import"./userSession-8a97646a.js";import"./notyf-6fcf247d.js";import"./useThemeColors-c415a40d.js";const L={key:1},N={class:"list-view-toolbar"},W={class:"list-info"},B={key:0},Q={key:1},Y={class:"buttons"},$={class:"page-content-inner"},K={class:"list-view list-view-v1"},Z=y("img",{class:"light-image",src:D,alt:""},null,-1),q=y("img",{class:"dark-image",src:F,alt:""},null,-1),G={class:"list-view-inner"},X={class:"list-view-item-inner"},ee=["onClick"],ae=y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),le={class:"meta-right"},se={class:"tags"},te={class:"stats"},ie={class:"stat"},ne=y("span",null,"Phone",-1),re=y("div",{class:"separator"},null,-1),oe={class:"stat"},ue=y("span",null,"Joined",-1),de=y("div",{class:"separator"},null,-1),pe=["onClick"],_e=y("span",null,"Status",-1),ce=["onClick"],ve=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-user-alt"})],-1),y("div",{class:"meta"},[y("span",null,"Profile"),y("span",null,"View profile")],-1)],me=["onClick"],ge=[y("div",{class:"icon"},[y("i",{class:"lnil lnil-pencil","aria-hidden":"true"})],-1),y("div",{class:"meta"},[y("span",null,"Edit"),y("span",null,"Edit Manager info")],-1)],ye=["onClick"],fe=[y("div",{class:"icon"},[y("i",{class:"lnil lnil-code","aria-hidden":"true"})],-1),y("div",{class:"meta"},[y("span",null,"Password"),y("span",null,"Change user password")],-1)],he=y("hr",{class:"dropdown-divider"},null,-1),we=["onClick"],je=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash"})],-1),y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete this user permanently")],-1)],ke=o({__name:"IbexManagers",setup(o){const O=z(),I=H(),D=u(!1),F=u(!1),J=u(""),ke=u(""),be=u(""),xe=u(!1),Ce=d(),Ve=u([{id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:null,is_active:!0,phoneNumber:"",username:"",is_sentMail:!1}]),Ae=u({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Pe=async()=>{try{F.value=!0;const e=await I.get("/api/users/by-role/manager/",{});Ve.value=e.data,D.value=!1}catch(e){console.log(e)}finally{F.value=!1}},Se=(e="")=>{J.value=e,D.value=!D.value},Me=p((()=>be.value?Ve.value.filter((e=>e.username.match(new RegExp(be.value,"i"))||e.email.match(new RegExp(be.value,"i")))):Ve.value)),Oe=async()=>{try{F.value=!0;await I.delete(`/api/users/${J.value}/`);Pe(),Ae.value.isSweetAlertOpen=!1,O.success("Manager deleted successfully")}catch(e){console.log(e)}finally{F.value=!1}},Ie=e=>{Ce.push(`/sidebar/dashboard/managers/${e}`)};return _((()=>{Pe()})),(o,u)=>{const d=T,p=E,_=U,O=M,I=r,H=n,z=i,Ce=t,Ve=s,Ue=l,Ee=a,Te=e;return c(),v(V,null,[m(F)?(c(),g(d,{key:0})):(c(),v("div",L,[y("div",N,[f(_,null,{default:h((()=>[f(p,{icon:"feather:search"},{default:h((()=>[w(y("input",{"onUpdate:modelValue":u[0]||(u[0]=e=>k(be)?be.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[j,m(be)]])])),_:1})])),_:1}),y("div",W,[1===m(Me).length?(c(),v("span",B,"1 record found")):(c(),v("span",Q,b(m(Me).length)+" records found",1))]),y("div",Y,[f(O,{onClick:u[1]||(u[1]=e=>Se()),color:"primary",icon:"fas fa-plus",elevated:""},{default:h((()=>[x(" Manager ")])),_:1})])]),y("div",$,[y("div",K,[f(I,{class:C([0!==m(Me).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:h((()=>[Z,q])),_:1},8,["class"]),y("div",G,[f(P,{name:"list-complete",tag:"div"},{default:h((()=>[(c(!0),v(V,null,A(m(Me),((e,a)=>(c(),v("div",{key:a,class:"list-view-item"},[y("div",X,[f(H,{onClick:a=>Ie(e.id),picture:e.avatar,size:"large"},null,8,["onClick","picture"]),y("div",{onClick:a=>Ie(e.id),class:"meta-left"},[y("h3",null,b(e.username),1),y("span",null,[ae,y("span",null,b(e.email),1)])],8,ee),y("div",le,[y("div",se,[f(z,{label:e.role.replace(/^\w/,(e=>e.toUpperCase())),color:"warning",rounded:"",elevated:""},null,8,["label"])]),y("div",te,[y("div",ie,[y("span",null,b(e.phoneNumber),1),ne]),re,y("div",oe,[y("span",null,b(m(R)(e.date_joined)),1),ue]),de,y("div",{onClick:a=>Se(e.id),class:"stat"},[y("span",null,b(e.is_active?"Active":"In-Active"),1),_e],8,pe)]),f(Ce,{icon:"feather:more-vertical",spaced:"",right:""},{content:h((()=>[y("a",{role:"menuitem",onClick:a=>Ie(e.id),class:"dropdown-item is-media"},ve,8,ce),y("a",{role:"menuitem",onClick:()=>{D.value=!0,J.value=e.id},class:"dropdown-item is-media"},ge,8,me),y("a",{onClick:a=>{return l=e.id,ke.value=l,void(xe.value=!0);var l},role:"menuitem",class:"dropdown-item is-media"},fe,8,ye),he,y("a",{role:"menuitem",onClick:a=>{return l=e.id,J.value=l,void(Ae.value={title:"Are you sure?",subtitle:"You will not be able to recover this Manager again!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var l},class:"dropdown-item is-media"},je,8,we)])),_:2},1024)])])])))),128))])),_:1})])]),m(Me).length>5?(c(),g(Ve,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):S("",!0)])])),m(D)?(c(),g(Ue,{key:2,"is-modal-open":m(D),"user-role":"manager","user-id":m(J),"onUpdate:closeModalHandler":u[2]||(u[2]=e=>D.value=!1),"onUpdate:actionUpdateHandler":Pe},null,8,["is-modal-open","user-id"])):S("",!0),m(xe)?(c(),g(Ee,{key:3,isModalOpen:m(xe),userId:m(ke),"onUpdate:closeModalHandler":u[3]||(u[3]=e=>xe.value=!1)},null,8,["isModalOpen","userId"])):S("",!0),m(Ae).isSweetAlertOpen?(c(),g(Te,{key:4,isSweetAlertOpen:m(Ae).isSweetAlertOpen,title:m(Ae).title,loading:!1,subtitle:m(Ae).subtitle,btntext:m(Ae).btntext,onConfirm:Oe,onCancel:()=>m(Ae).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):S("",!0)],64)}}}),be={class:"page-content-inner"},xe=y("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),Ce=o({__name:"index",setup:e=>(J().setPageTitle("Managers"),O({title:"Managers"}),(e,a)=>{const l=ke;return c(),v("div",be,[(c(),g(I,{to:"[data-teleport-bg]"},[xe])),f(l,{class:"has-navbar-spacing"})])})});export{Ce as default};
