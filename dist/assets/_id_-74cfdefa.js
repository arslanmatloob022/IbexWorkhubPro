import{_ as e}from"./AddUpdateUser-4af8326e.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-9ff45e26.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-9510ba2a.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-2d228be5.js";import{_ as t}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-dbdc9b54.js";import{e as i,r as n,Z as r,o,B as u,C as p,l as c,N as d,D as _,E as m,F as v,K as g,j as y,W as f,T as h,J as j,H as k,U as b,V as x,aR as w,M as V,O as P,x as A,z as I}from"./index-fd0ff1bc.js";import{_ as T}from"./VField.vue_vue_type_script_setup_true_lang-b071d7cf.js";import{_ as S}from"./VControl-0edd8c23.js";import{_ as C}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-efb50f24.js";import{_ as M,a as L}from"./search-1-dark-61831a90.js";import{u as W}from"./useAPI-4bb46aa3.js";import{u as N}from"./useNotyf-70dc65ec.js";import{i as E}from"./index-f52ed8ce.js";import{u as F}from"./personalScoreGauge-e8b2f765.js";import{u as U}from"./viewWrapper-7df9e515.js";import"./VModal.vue_vue_type_style_index_0_lang-7c403184.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-3f6a730c.js";import"./VLabel.vue_vue_type_script_setup_true_lang-53303c8b.js";import"./useVFieldContext-276b773b.js";import"./VIcon.vue_vue_type_script_setup_true_lang-901fa241.js";import"./VFilePond.vue_vue_type_script_lang-921bae74.js";import"./VInput.vue_vue_type_script_setup_true_lang-673c9510.js";import"./useSupportElement-9beffb7e.js";import"./userSession-71b1c148.js";import"./VFlex.vue_vue_type_style_index_0_lang-d749dcbb.js";import"./VPlaceloadWrap-66e62246.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-d777f9f3.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-d8b03d3c.js";import"./notyf-14362462.js";import"./useThemeColors-129035d3.js";import"./billboard-5857d5e1.js";const O={key:1},H={class:"list-view-toolbar"},R={class:"list-info"},z={key:0},q={key:1},B={class:"buttons"},K={class:"page-content-inner"},D={class:"list-view list-view-v1"},J=_("img",{class:"light-image",src:M,alt:""},null,-1),Y=_("img",{class:"dark-image",src:L,alt:""},null,-1),Z={class:"list-view-inner"},$={class:"list-view-item-inner"},G={class:"meta-left"},X=_("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),Q={class:"meta-right"},ee={class:"tags"},se={class:"stats"},ae={class:"stat"},le=_("span",null,"Status",-1),te=_("div",{class:"separator"},null,-1),ie={class:"stat"},ne=_("span",null,"Active tasks",-1),re=_("div",{class:"separator"},null,-1),oe={class:"stat"},ue=_("span",null,"Pending tasks",-1),pe=i({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(i){const A=i,I=W();N();const M=n(!1),L=n({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),E=n(""),F=r((()=>E.value?L.value.filter((e=>e.username.match(new RegExp(E.value,"i"))||e.email.match(new RegExp(E.value,"i")))):L.value));console.log(F.value);const U=n(!1),pe=()=>{U.value=!0},ce=async()=>{try{M.value=!0;const e=await I.get(`/api/users/workers/?supplier=${A.supplierId}`);L.value=e.data}catch(e){console.log(e)}finally{M.value=!1}};return o((()=>{ce()})),(i,n)=>{const r=C,o=S,I=T,L=P,W=t,N=l,de=a,_e=s,me=e;return u(),p(b,null,[c(M)?(u(),d(r,{key:0})):(u(),p("div",O,[_("div",H,[m(I,null,{default:v((()=>[m(o,{icon:"feather:search"},{default:v((()=>[g(_("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>y(E)?E.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(E)]])])),_:1})])),_:1}),_("div",R,[1===c(F).length?(u(),p("span",z,"1 record found")):(u(),p("span",q,h(c(F).length)+" records found",1))]),_("div",B,[m(L,{color:"primary",onClick:pe,icon:"fas fa-plus",elevated:""},{default:v((()=>[j(" Worker ")])),_:1})])]),_("div",K,[_("div",D,[m(W,{class:k([0!==c(F).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[J,Y])),_:1},8,["class"]),_("div",Z,[m(w,{name:"list-complete",tag:"div"},{default:v((()=>[(u(!0),p(b,null,x(c(F),((e,s)=>(u(),p("div",{key:s,class:"list-view-item"},[_("div",$,[m(N,{picture:e.avatar,size:"large"},null,8,["picture"]),_("div",G,[_("h3",null,h(e.username),1),_("span",null,[X,_("span",null,h(e.email),1)])]),_("div",Q,[_("div",ee,[m(de,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),_("div",se,[_("div",ae,[_("span",null,h(e.is_active?"Active":"In-Active"),1),le]),te,_("div",ie,[_("span",null,h(e.active_tasks),1),ne]),re,_("div",oe,[_("span",null,h(e.pending_tasks),1),ue])])])])])))),128))])),_:1})])]),c(F).length>5?(u(),d(_e,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):V("",!0)])])),c(U)?(u(),d(me,{key:2,isModalOpen:c(U),supplierId:A.supplierId,userRole:"worker","onUpdate:closeModalHandler":n[1]||(n[1]=e=>U.value=!1),"onUpdate:actionUpdateHandler":ce},null,8,["isModalOpen","supplierId"])):V("",!0)],64)}}}),ce={class:"lifestyle-dashboard lifestyle-dashboard-v3"},de={class:"illustration-header"},_e={class:"p-4"},me={class:"header-meta"},ve={class:"summary-stats"},ge={class:"summary-stat"},ye=_("span",null,"Role",-1),fe={class:"summary-stat"},he=_("span",null,"Status",-1),je={class:"summary-stat"},ke=_("span",null,"Phone",-1),be={class:"summary-stat"},xe=_("span",null,"Email",-1),we={class:"summary-stat h-hidden-tablet-p"},Ve=_("span",null,"Email Notification",-1),Pe={class:"columns is-multiline is-flex-tablet-p"},Ae={class:"column is-12"},Ie=i({__name:"SubContractorProfile",setup(e){N();const s=W(),a=A();n([]),F();const t=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all");const i=n(!1);n([]),n([]),n([]),n([]),n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),n({plugins:[E],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]});return n({}),o((async()=>{await(async()=>{try{i.value=!0;const e=await s.get(`/api/users/${a.params.id}`);t.value=e.data}catch(e){console.log(e)}finally{i.value=!1}})()})),(e,s)=>{const n=l,r=pe;return u(),p("div",ce,[_("div",de,[_("div",_e,[m(n,{size:"xl",squared:"",picture:c(t).avatar,alt:""},null,8,["picture"])]),_("div",me,[_("h3",null,h(c(i)?"Loading...":c(t)?.username),1),_("div",ve,[_("div",ge,[_("span",null,h(c(i)?"Loading...":c(t)?.role),1),ye]),_("div",fe,[_("span",null,h(c(i)?"Loading...":c(t)?.is_active?"Active":" In-Active"),1),he]),_("div",je,[_("span",null,h(c(i)?"Loading...":c(t)?.phoneNumber?c(t)?.phoneNumber:"N/A"),1),ke]),_("div",be,[_("span",null,h(c(i)?"Loading...":c(t)?.email),1),xe]),_("div",we,[_("span",null,h(c(i)?"Loading...":c(t).is_sentMail?"On":"Off"),1),Ve])])])]),_("div",Pe,[_("div",Ae,[m(r,{"supplier-id":c(a).params.id},null,8,["supplier-id"])])])])}}}),Te={class:""},Se=i({__name:"[id]",setup:e=>(U().setPageTitle("Sub-Contractor Info"),I({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ie;return u(),p("div",Te,[m(a)])})});export{Se as default};
