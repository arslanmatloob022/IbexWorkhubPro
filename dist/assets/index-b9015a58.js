import{_ as e}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-75564e1d.js";import{_ as t}from"./SiteJobs-9cf9ba1b.js";import{_ as a}from"./VField.vue_vue_type_script_setup_true_lang-e06a2d38.js";import{_ as l}from"./VControl-f6dba4dd.js";import{_ as s,a as o}from"./search-4-dark-2b5b440c.js";import{u as n}from"./company-ca9a809c.js";import{u as r}from"./useNotyf-bee6672a.js";import{u as i}from"./useAPI-2f913358.js";import{u as c}from"./viewWrapper-a34f2b5b.js";import{e as m,M as p,L as u,r as d,o as g,w as _,K as y,v,x as h,A as f,y as b,z as j,H as x,l as w,B as S,O as V,F as C,P as k,t as z}from"./index-a3511ab8.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-776f3a3f.js";import"./SiteDetailModal-f3251bd9.js";import"./VModal.vue_vue_type_style_index_0_lang-5bc69d1a.js";import"./useSupportElement-ec851bb5.js";import"./userSession-1e35e5f3.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-9ab5aaf2.js";import"./VLabel.vue_vue_type_script_setup_true_lang-dfa6e2cd.js";import"./useVFieldContext-f66aca7a.js";import"./RotaView-db6c8a2b.js";import"./ActionsVerificationModal-5c3ee020.js";import"./VCollapse.vue_vue_type_style_index_0_lang-fbcf2e46.js";import"./VIcon.vue_vue_type_script_setup_true_lang-639bef4b.js";import"./VInput.vue_vue_type_script_setup_true_lang-17074c81.js";import"./index-d8c1426b.js";import"./vue3-apexcharts.common-763b2026.js";import"./vue.runtime.esm-bundler-7473b242.js";import"./useThemeColors-9cb1eefd.js";import"./VAvatar.vue_vue_type_style_index_0_lang-584dd1be.js";import"./projects-dark-4a371d8a.js";import"./VTags.vue_vue_type_script_setup_true_lang-2b457582.js";import"./VTag.vue_vue_type_style_index_0_lang-d04753a5.js";import"./index-405e4760.js";import"./VDropdown.vue_vue_type_style_index_0_lang-dab44eb0.js";import"./useDropdown-4068e34e.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-ee2cd179.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-ab5188b6.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-66b5c7cb.js";import"./notyf-bdcd12d6.js";const P={class:"columns mt-5",style:{"margin-bottom":"3rem",gap:"1.5rem"}},I={style:{"margin-left":"1rem","font-weight":"500","font-size":"1.3rem",color:"#555",transform:"translateY(0.5rem)"}},T={class:"multiselect-single-label",style:{"background-color":"transparent"}},A=["src"],D={class:"",style:{display:"flex","flex-direction":"column",gap:"0.3rem"}},M={class:"",style:{display:"flex","align-items":"center",gap:"0.5rem"}},J=["src"],N={style:{display:"flex","flex-direction":"column",gap:"0.3rem"}},U={style:{color:"#444","font-size":"1.2rem","font-weight":"500"}},Y={style:{color:"#666","font-size":"1rem"}},B=f("span",{style:{color:"#444"}},"Email:",-1),F={style:{"margin-left":"1rem","font-weight":"500","font-size":"1.3rem",color:"#555",transform:"translateY(0.5rem)"}},L={class:"multiselect-single-label",style:{"background-color":"transparent"}},$={style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},q={class:"",style:{display:"flex","flex-direction":"column","align-items":"start"}},E={style:{color:"#666","font-size":"1rem"}},K={style:{"font-weight":"500","font-size":"1.2rem"}},R={style:{display:"flex","flex-direction":"row",gap:"0.2rem","align-items":"start"}},W={style:{color:"#666","font-size":"0.9rem"}},G=f("span",{style:{"background-color":"#ccc",height:"0.8rem",width:"2px"}},null,-1),H={style:{color:"#666","font-size":"0.9rem"}},O=f("span",{style:{"background-color":"#ccc",height:"0.8rem",width:"2px"}},null,-1),X={style:{color:"#666","font-size":"0.9rem"}},Z=f("span",{style:{"background-color":"#eee",height:"2px",width:"100%"}},null,-1),Q={style:{"margin-left":"1rem","font-weight":"500","font-size":"1.3rem",color:"#555",transform:"translateY(0.5rem)"}},ee={class:"multiselect-single-label",style:{"background-color":"transparent"}},te={class:"",style:{display:"flex","flex-direction":"column","align-items":"start"}},ae={style:{color:"#666","font-size":"0.9rem"}},le={style:{"font-weight":"500","font-size":"1.1rem"}},se={style:{display:"flex","flex-direction":"row",gap:"0.2rem","align-items":"start"}},oe={style:{color:"#666","font-size":"0.8rem"}},ne=f("span",{style:{"background-color":"#ccc",height:"0.8rem",width:"2px"}},null,-1),re={style:{color:"#666","font-size":"0.8rem"}},ie=f("span",{style:{"background-color":"#ccc",height:"0.8rem",width:"2px"}},null,-1),ce={style:{color:"#666","font-size":"0.8rem"}},me={key:0,class:"contract-wrapper sitejob-space"},pe=f("img",{class:"light-image",src:s,alt:""},null,-1),ue=f("img",{class:"dark-image",src:o,alt:""},null,-1),de=m({__name:"jobPlacement",setup(s){c();const o=i();p(),u();const m=n(),z=r(),de=d(!1),ge=d(""),_e=d(""),ye=d(""),ve=d(1);let he=d([]),fe=d([]),be=d([]);const je=d([]),xe=d([]),we=d(""),Se=d(""),Ve=e=>{console.log("Selected value:",e);const t=je.value.find((t=>t.id==e));console.log("Selected Company:",t),t?(we.value=t.name,console.log("Selected Company:",we.value)):console.error("Company with id",e,"not found")},Ce=e=>{console.log("Selected value:",e);const t=xe.value.find((t=>t.id==e));console.log("Selected Contract:",t),t?(Se.value=t.name,console.log("Selected Contract:",Se.value)):console.error("Contract with id",e,"not found")};return g((()=>{(async()=>{de.value=!0;try{const e=await o.get(`/v3/api/customer-company/company/${m.loggedCompany.id}`);console.log("Companies:",e.data),je.value=e.data,he.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png",email:e.email}))),de.value=!1}catch(e){console.log(e),z.error("Something went wrong!"),de.value=!1}})()})),_(ge,(()=>{(async()=>{de.value=!0,be.value=[];try{const e=await o.get(`/v3/api/contract/customer-company/${ge.value}/`);xe.value=e.data,console.log("Contracts1:",e.data),fe.value=[],fe.value=e.data.map((e=>({value:e.id.toString(),id:e.id,name:e.name,sites:e.sitesCount,incharge:e.incharge_name,rate:e.over_rate}))),de.value=!1}catch(e){console.log(e),z.error("Something went wrong!"),de.value=!1}})()})),_(_e,(()=>{(async()=>{if(de.value=!0,!_e.value)return z.error("Contract Id is required!");try{const e=await o.get(`/v3/api/site/contract/${_e.value}/`);be.value=[],be.value=e.data.sites.map((e=>({value:e.id.toString(),id:e.id,name:e.name,jobs:e?.jobs,postcode:e.postcode,city:e.city,contractSiteId:e.id,inchargeName:e.incharge_name}))),de.value=!1}catch(e){console.log(e),z.error("Something went wrong (Sites)!"),de.value=!1}})()})),(s,o)=>{const n=y("Multiselect"),r=l,i=a,c=t,m=e;return v(),h(k,null,[f("div",P,[b(i,{class:"pl-2"},{default:j((({id:e})=>[b(r,{class:"placement-wrapper"},{default:j((()=>[f("span",I,"Customers("+x(w(he).length>10?w(he).length:"0"+w(he).length)+")",1),b(n,{style:{width:"100%",height:"55px","border-radius":"1rem","background-color":"transparent",border:"none",outline:"none"},modelValue:ge.value,"onUpdate:modelValue":o[0]||(o[0]=e=>ge.value=e),attrs:{id:e},placeholder:"Select a customer company",label:"name",options:w(he),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect",onInput:Ve},{singlelabel:j((({value:e})=>[f("div",T,[f("img",{style:{width:"30px","border-radius":"0.5rem"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,A),S(" "+x(e.name),1)])])),option:j((({option:e})=>[f("div",D,[f("div",M,[f("img",{style:{width:"40px","border-radius":"0.5rem"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,J),f("div",N,[f("span",U,x(e.name),1),f("span",Y,[B,S(" "+x(e.email),1)])])])])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(i,{class:"pl-2"},{default:j((({id:e})=>[b(r,{class:"placement-wrapper"},{default:j((()=>[f("span",F,x(we.value)+" Contracts ("+x(w(fe).length>10?w(fe).length:"0"+w(fe).length)+")",1),b(n,{style:{width:"100%",height:"55px","border-radius":"1rem","background-color":"transparent",border:"none",outline:"none"},modelValue:_e.value,"onUpdate:modelValue":o[1]||(o[1]=e=>_e.value=e),attrs:{id:e},placeholder:"Select Contract",label:"name",options:w(fe),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect",onInput:Ce},{singlelabel:j((({value:e})=>[f("div",L,x(e.name),1)])),option:j((({option:e})=>[f("div",$,[f("div",q,[f("span",E,"Contract_ID: #00"+x(e.id),1),f("span",K,x(e.name)+" ( "+x(e.sites>10?e.sites:"0"+e.sites)+")",1),f("div",R,[f("span",W,"Total Sites: "+x(e.sites>10?e.sites:"0"+e.sites),1),G,f("span",H,"Charge Rate: Â£"+x(e.rate),1),O,f("span",X,"Incharge: "+x(e.incharge),1)])]),Z])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b(i,{class:"pl-2"},{default:j((({id:e})=>[b(r,{class:"placement-wrapper"},{default:j((()=>[f("span",Q,x(Se.value)+" Sites ("+x(w(be).length>10?w(be).length:"0"+w(be).length)+")",1),b(n,{style:{width:"100%",height:"55px","border-radius":"1rem","background-color":"transparent",border:"none",outline:"none"},modelValue:ye.value,"onUpdate:modelValue":o[2]||(o[2]=e=>ye.value=e),attrs:{id:e},placeholder:"Select Contract Site",label:"name",options:w(be),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect"},{singlelabel:j((({value:e})=>[f("div",ee,x(e.name),1)])),option:j((({option:e})=>[f("div",te,[f("span",ae,"Contract_ID: #00"+x(e.id),1),f("span",le,x(e.name)+" ("+x(e?.jobs>10?e?.jobs:"0"+e?.jobs)+")",1),f("div",se,[f("span",oe,"Total Jobs: "+x(e.jobs>10?e.jobs:"0"+e.jobs),1),ne,f("span",re,"Postcode: "+x(e.postcode),1),ie,f("span",ce,"City: "+x(e.city),1)])])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),ye.value?(v(),h("div",me,[b(c,{siteID:ye.value,isShow:ve.value},null,8,["siteID","isShow"])])):V("",!0),ye.value?V("",!0):(v(),C(m,{key:1,title:"Please select the company contract and site associated with your company.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n\t\t\t\t\t\tsearch terms you've entered. Please try different search terms or\n\t\t\t\t\t\tcriteria.",larger:""},{image:j((()=>[pe,ue])),_:1}))],64)}}}),ge={class:"page-content-inner"},_e=m({__name:"index",setup:e=>(c().setPageTitle("Job Placements"),z({title:"Job Placements - Arez"}),(e,t)=>{const a=de;return v(),h("div",ge,[b(a)])})});export{_e as default};
