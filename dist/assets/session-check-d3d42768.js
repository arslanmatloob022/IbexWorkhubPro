import{d as e}from"./index-0be7d825.js";import{u as o}from"./userSession-56f5c36a.js";import{u as r}from"./useAPI-4f36037c.js";import{u as t}from"./layoutSwitcher-c32fd309.js";import{u as s}from"./company-d9bcd565.js";import"./useNotyf-8f2dd69a.js";import"./notyf-69250ce7.js";import"./useThemeColors-ca687f1c.js";import"./useSupportElement-7ea35b98.js";const a=t(),i=e((async({router:e,pinia:t})=>{const i=o(t);if(r(),s(),i.isLoggedIn)try{a.setDynamicLayoutId("sideblock-default")}catch(l){i.logoutUser()}e.beforeEach((e=>e.meta.requiresAuth&&!i.isLoggedIn?{name:"/auth/login",query:{redirect:e.fullPath}}:("supplier"!==i.user.role||!1!==e.meta.isPartnerAllowed&&void 0!==e.meta.isPartnerAllowed)&&("manager"!==i.user.role||!1!==e.meta.isManagerAllowed&&void 0!==e.meta.isManagerAllowed)&&("contractor"!==i.user.role||!1!==e.meta.isContractorAllowed&&void 0!==e.meta.isContractorAllowed)&&("worker"!==i.user.role||!1!==e.meta.isWorkerAllowed&&void 0!==e.meta.isWorkerAllowed)&&("client"!==i.user.role||!1!==e.meta.isClientAllowed&&void 0!==e.meta.isClientAllowed)?void 0:{name:"/auth/login",query:{redirect:e.fullPath}}))}));export{i as default};
