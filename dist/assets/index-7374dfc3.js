import{_ as e}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-a98a6142.js";import{A as t}from"./vue3-apexcharts.common-5fb06877.js";import{u as a}from"./useThemeColors-6c14c032.js";import{e as s,r as l,s as i,o as n,y as o,z as r,H as d,l as c,P as u,C as g,S as p,Y as f,A as m,D as h,J as v,B as y,aB as b,w as x,M as R,Q as w,R as S,j as k,T as _,K as C,E,W as D,X as T,L as M}from"./index-b750ebd3.js";import{_ as P}from"./VAvatar.vue_vue_type_style_index_0_lang-f86e362a.js";import{_ as O,a as I}from"./projects-dark-4a371d8a.js";import{u as N}from"./useAPI-d7cc4ad4.js";import{u as j}from"./useNotyf-fd6acdce.js";import{_ as H}from"./VModal.vue_vue_type_style_index_0_lang-81be354b.js";import{_ as z}from"./VCollapse.vue_vue_type_style_index_0_lang-9134865e.js";import{_ as V}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-2149a20d.js";import{_ as W}from"./VInput.vue_vue_type_script_setup_true_lang-76fd6db5.js";import{_ as A}from"./VLabel.vue_vue_type_script_setup_true_lang-30ee3a3d.js";import{_ as L}from"./VField.vue_vue_type_script_setup_true_lang-25e58195.js";import{_ as U}from"./VControl-48792b30.js";import{_ as B}from"./VTags.vue_vue_type_script_setup_true_lang-32468bae.js";import{_ as G}from"./VTag.vue_vue_type_style_index_0_lang-cd43fd3d.js";import{u as q}from"./company-75c11f3b.js";import{i as $,F,c as J,a as Y,m as X,d as K,y as Q,D as Z,b as ee,e as te,f as ae,g as se,h as le,j as ie,k as ne,S as oe,V as re,l as de,r as ce,R as ue,s as ge,_ as pe,n as fe,B as me,o as he,p as ve,P as ye,q as be,t as xe,u as Re,v as we,w as Se,x as ke,E as _e,z as Ce,A as Ee,W as De,C as Te,G as Me,H as Pe,I as Oe,J as Ie,K as Ne,L as je,M as He,N as ze,O as Ve,Q as We,T as Ae,U as Le,X as Ue}from"./index-77864be0.js";const Be={styke:"width:100%; height:100%"},Ge=s({__name:"TimestampMap",props:{activities:{},timestamp:{}},emits:["update:modalHandler"],setup(e,{emit:s}){const g=e,p=a(),f=l(!1),m=i({series:[{name:"Profiles",data:g.activities}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[p.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:g.timestamp},tooltip:{y:{formatter:function(e){return e}}}});return n((()=>{f.value=!0})),(e,a)=>(o(),r("div",Be,[f.value?(o(),d(c(t),{key:0,id:"line-stats-widget-chart2",height:m.value.chart.height,type:m.value.chart.type,series:m.value.series,options:m.value},null,8,["height","type","series","options"])):u("",!0)]))}}),qe={id:"activity_map2",style:{"border-radius":"20px"}},$e=s({__name:"HeatMap",props:{activity:{}},setup(e){const t=e;return n((()=>{(e=>{var t=[],a=51.45047,s=-.34572;e.forEach((e=>{0!=e.latitude&&0!=e.longitude&&(t.push(new google.maps.LatLng(e.latitude,e.longitude)),a=e.latitude,s=e.longitude)}));let l=new google.maps.Map(document.getElementById("activity_map2"),{zoom:16,center:{lat:a,lng:s},mapTypeId:google.maps.MapTypeId.ROADMAP});console.log("mapp",l),new google.maps.visualization.HeatmapLayer({data:t,map:l,radius:20})})(t.activity),console.log("acitivity",t.activity)})),(e,t)=>(o(),r("div",qe))}}),Fe={key:0,class:"columns is-multiline"},Je={class:"column is-12"},Ye={class:"is-flex"},Xe={class:"content-wrap"},Ke={class:"content-box"},Qe={class:"columns is-multiline"},Ze={class:"column is-6"},et=g("p",{class:"is-bold mb-1"},"Book on",-1),tt={class:"card is-flex p-3"},at={class:"box-text ml-2"},st={class:"meta-text"},lt={class:"ml-1 mb-3 is-bold"},it={class:"ml-1 mb-1 is-bold"},nt={class:"ml-1",style:{width:"80px"}},ot=g("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1),rt=g("div",{id:"myMapOn",style:{height:"140px",width:"160px","border-radius":"10px"}},null,-1),dt={class:"column is-6"},ct=g("p",{class:"is-bold mb-1"},"Book off",-1),ut={class:"card is-flex p-3"},gt={class:"box-text ml-2"},pt={class:"meta-text"},ft={class:"ml-1 mb-3 is-bold"},mt={class:"ml-1"},ht={class:"ml-1",style:{width:"80px"}},vt=g("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1),yt=g("div",{id:"myMapOff",style:{height:"140px",width:"160px","border-radius":"10px"}},null,-1),bt={class:"column is-12 mt-3"},xt={class:"column is-12"},Rt={key:1},wt=g("img",{class:"light-image is-larger",src:O,alt:""},null,-1),St=g("img",{class:"dark-image is-larger",src:I,alt:""},null,-1),kt=s({__name:"timeSheetComponent",props:{timesheetId:{}},emits:["update:modalHandler"],setup(t,{emit:s}){const c=t,x=a(),R=l(!1);j();const w=N(),S=l(!1),k=l([]),_=l([]),C=l({timeSheetID:0,device_data:[{acceX:0,acceY:0,acceZ:0,accuracy_level:0,activity_type:"",activity_value:0,altitude:0,app_version:"",battery_level:0,climb:0,deviceUserName:"",device_type:"",direction:0,gyroX:0,gyroY:0,gyroZ:0,heartRate:0,horizontal:0,id:0,latitude:0,longitude:0,movement_type:"",readingsTimeDelta:0,speed:0,timeStamp:"",vertical:0,timeSheetID:0,worker_id:0}],created_at:"",worker_id:0,bookOnTime:"",bookOffTime:"",bookOnLat:"",bookOnLong:"",bookOnLocation:"",bookOffLat:"",bookOffLong:"",bookOffLocation:"",hoursWorked:"",bookOnImageURL:"",bookOffImageURL:"",isBookOnImageVerified:!1,isBookOffImageVerified:!1}),E=i({series:[{name:"Profiles",data:[]}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[x.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}}});let D={};return n((()=>{((e,t)=>{let a={lat:e,lng:length};D=new google.maps.Map(document.getElementById("myMapOn"),{center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:t},map:D,title:"Worker"})})(51.4497984,-.3464489),((e,t)=>{let a={lat:e,lng:length};D=new google.maps.Map(document.getElementById("myMapOff"),{center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:t},map:D,title:"Worker"})})(51.4497984,-.3464489),(async()=>{try{R.value=!0;const e=await w.get(`v3/api/timesheet/details/${c.timesheetId}/`,{});C.value=e.data;let t=[],a=[];e.data.device_data.forEach((e=>{t.push(parseFloat(e.activity_value).toFixed(3)),a.push(e.timeStamp&&e.timeStamp.length>20?e.timeStamp.slice(11,16):e.timeStamp)})),E.value.series[0].data=t,E.value.xaxis.categories=a,k.value=t,_.value=a,S.value=!0}catch(e){console.log(e)}finally{R.value=!1}})()})),(t,a)=>{const s=b,l=P,i=$e,n=Ge,c=e;return C.value.device_data.length?(o(),r("div",Fe,[g("div",Je,[g("div",Ye,[R.value?(o(),d(s,{key:0,height:"80px",width:"50%",class:"mx-2"})):u("",!0),R.value?(o(),d(s,{key:1,height:"80px",width:"50%",class:"mx-2 mb-6"})):u("",!0)]),g("div",Xe,[p(g("div",Ke,[g("div",Qe,[g("div",Ze,[et,g("div",tt,[m(l,{picture:C.value.bookOnImageURL?C.value.bookOnImageURL:"",squared:"",size:"medium"},null,8,["picture"]),g("div",at,[g("div",st,[g("p",lt,[h(" Time: "),g("span",it,v(C.value.bookOnTime?C.value.bookOnTime.slice(0,10):"-- --")+" "+v(C.value.bookOnTime?C.value.bookOnTime.slice(11,16):"-- --"),1)]),g("span",nt,[ot,h(" "+v(C.value.bookOnLocation?C.value.bookOnLocation:"-----")+" London ",1)])])]),rt])]),g("div",dt,[ct,g("div",ut,[m(l,{picture:C.value.bookOffImageURL?C.value.bookOffImageURL:"",squared:"",size:"medium"},null,8,["picture"]),g("div",gt,[g("div",pt,[g("p",ft,[h(" Time: "),g("span",mt,v(C.value.bookOffTime?C.value.bookOffTime.slice(0,10):"-- --")+" "+v(C.value.bookOnTime?C.value.bookOnTime.slice(11,16):"-- --"),1)]),g("span",ht,[vt,h(" "+v(C.value.bookOffLocation?C.value.bookOffLocation:"-----")+", London ",1)])])]),yt])])])],512),[[f,!R.value]])])]),g("div",bt,[S.value?(o(),d(i,{key:0,style:{height:"280px",width:"100%"},activity:C.value.device_data},null,8,["activity"])):u("",!0),R.value?(o(),d(s,{key:1,height:"280px",width:"100%",class:"mx-2"})):u("",!0)]),g("div",xt,[R.value?(o(),d(s,{key:0,height:"280px",width:"100%",class:"mx-2"})):u("",!0),S.value?(o(),d(n,{key:1,activities:k.value,timestamp:_.value},null,8,["activities","timestamp"])):u("",!0)])])):(o(),r("div",Rt,[m(c,{title:"No Activity found.",subtitle:"Looks like worker did not performed any activity within this time-stamp "},{image:y((()=>[wt,St])),_:1})]))}}}),_t=e=>(D("data-v-39435e54"),e=e(),T(),e),Ct={class:"modal-form columns is-multiline",id:"addRota"},Et={class:"field column is-12 mb-0"},Dt={class:"columns is-multiline mb-3"},Tt={class:"field is-flex column is-12 mb-0"},Mt=_t((()=>g("h1",null,"Selected dates:",-1))),Pt={class:"field column is-6 mb-0"},Ot=_t((()=>g("label",null,"Select customer company*",-1))),It={class:"multiselect-single-label"},Nt=["src"],jt=["src"],Ht={class:"field column is-6 mb-0"},zt=_t((()=>g("label",null,"Select Site *",-1))),Vt={class:"multiselect-single-label"},Wt={class:"field column is-6 mb-0"},At=_t((()=>g("label",{class:"mb-2"},"Select Worker *",-1))),Lt={class:"multiselect-single-label"},Ut=["src"],Bt=["src"],Gt={class:"field column is-3 mb-0"},qt={class:"field column is-3 mb-0"},$t={class:"field column is-12 mb-0"},Ft=_t((()=>g("label",null,"Select Job ",-1))),Jt={class:"multiselect-single-label"},Yt={class:"column is-12 mb-0"},Xt={key:0,class:"field column is-6 mb-0"},Kt={key:1,class:"field column is-6 mb-0"},Qt={key:2,class:"field column is-6 mb-0"},Zt={key:3,class:"field column is-6 mb-0"},ea={key:4,class:"field column is-12 mb-0",style:{width:"100%",display:"flex","justify-content":"flex-end",float:"right"}},ta={class:"column is-12"},aa={class:"p-2 is-flex",style:{position:"relative",width:"100%"}},sa=["onClick"],la=[_t((()=>g("i",{class:"iconify close","data-icon":"feather:x-circle","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1)))],ia=_t((()=>g("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"white",display:"flex","align-items":"center"}},null,-1))),na={class:"item-name dark-inverted",style:{"font-weight":"500"}},oa={style:{"font-weight":"500","margin-bottom":"0px","padding-left":"5px",color:"white"}},ra=_t((()=>g("div",{class:"head-info"},[g("div",{class:"head-progress"})],-1))),da={class:"body-inner-content"},ca={class:"field columns is-multiline mb-0"},ua={class:"column is-12"},ga={class:"columns is-multiline space-around"},pa={class:"field column is-5 mb-0"},fa=_t((()=>g("label",null,"Charge Rate",-1))),ma={class:"control"},ha={class:"field column is-5 mb-0"},va=_t((()=>g("label",null,"Charge Hours",-1))),ya={class:"control"},ba={class:"field column is-11 mb-0"},xa=_t((()=>g("label",null,"Notes",-1))),Ra={class:"control"},wa=s({__name:"AddRotaModal",props:{AddRotaModalOpen:{type:Boolean},selectedDatesArray:{},workerId:{}},emits:["update:modalHandler","update:OnSuccess","remove-date"],setup(e,{emit:t}){const a=e,s=q(),i=l(!1),f=j(),b=N(),D=l(!1),T=l(""),M=l(""),P=l("");let O=l([]);const I=l("");l("");const J=l([]),Y=l([]);let X=l([]),K=l([]),Q=l([]);l([{id:0,firstName:"",lastName:"",profileImageURL:""}]);const Z=[{title:"Additional Information",content:"Add additional information about rota, rate or worker"}],ee=l([{id:0,jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"08:00:00",endTime:"16:00:00",hourlyRate:0,overtimeRate:0,isActive:!1,jobType:"",color:"",isApproval:!0,createdAt:"",updatedAt:null,workingDays:[],contractSite:0}]),te=l({id:0,jobName:"",start:"",end:""}),ae=l({dates:[],id:0,start:"08:00",end:"16:00",hours:0,shift:"",hourlyRate:0,notes:"",createdBy:"",UpdatedAt:"",updatedBy:"",company:"",site:"",worker:"",customerCompany:"",job:"",jobsList:[]}),se=()=>{t("update:modalHandler",!1)},le=()=>{Y.value=Y.value.filter((e=>!e.hasOwnProperty("display"))),Y.value.push({start:`2024-04-23T${ae.value.start}`,end:`2024-04-23T${ae.value.end}`,display:"background"}),ie.value.resources=Y.value,ie.value.events=Y.value},ie=l({plugins:[$],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineDay",height:"auto",resourceAreaWidth:"10%",selectable:!0,now:"2024-04-23",headerToolbar:{left:"",center:"",right:""},droppable:!0,editable:!0,views:{resourceTimelineDay:{type:"timeline",duration:{days:2},slotDuration:"00:30:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}},resourceAreaHeaderContent:"Jobs"}),ne=async()=>{i.value=!0;try{await b.post("/v3/api/rota/create/",{dates:JSON.stringify(a.selectedDatesArray),start:ae.value.start,end:ae.value.end,shift:ae.value.shift,hourlyRate:ae.value.hourlyRate,notes:ae.value.notes,createdBy:ae.value.createdBy,UpdatedAt:ae.value.UpdatedAt,updatedBy:ae.value.updatedBy,company:s.loggedCompany.id,site:M.value,worker:T.value,customerCompany:I.value,job:ae.value.job,jobsList:JSON.stringify(Y.value)});t("update:OnSuccess",null),f.success("Rota Added Successfuly"),i.value=!1,se()}catch(e){console.log(e),f.error("You're assigning the same worker on the same date please try different."),i.value=!1}},oe=()=>{te.value.start=`2024-04-23T${te.value.start}`,te.value.end=`2024-04-23T${te.value.end}`,te.value.resourceId=te.value.id;const e={...te.value};Y.value.push(e),le(),te.value.id=0,te.value.end="",te.value.start="",te.value.jobName="",f.success("Job Added")};return x(P,((e,t)=>{console.log("wactch id",P);const a=J.value.find((t=>t.id==e));a&&(Y.value.push({id:a.id,jobName:a.jobName,start:`2024-04-23T${a.startTime}`,end:`2024-04-23T${a.endTime}`,resourceId:a.id,title:a.jobName}),console.log("selected job",a),le())})),x(I,((e,t)=>{(async()=>{try{const e=await b.get(`/v3/api/site/customer-company/${I.value}/`);O.value=e.data.map((e=>({value:e.id.toString(),name:`${e.name} - ${e.contractInfo.name}`}))),e.data&&(M.value=e.data[0].id)}catch(e){console.log(e)}})()})),x(M,((e,t)=>{(async()=>{try{const e=await b.get(`/v3/api/jobs/site/${M.value}/`,{});ee.value=e.data,J.value=e.data.jobs,console.log("jobs",J.value),Q.value=e.data.jobs.map((e=>({value:e.id.toString(),name:e.jobName})))}catch(e){}})()})),x([()=>ae.value.start,()=>ae.value.end],(([e,t],[a,s])=>{le()})),n((()=>{(async()=>{try{const e=await b.get(`/v3/api/worker/${s.loggedCompany.id}/worker-short-info/`);K.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL}))),T.value=a.workerId}catch{f.error("Invalid data")}finally{i.value=!1}})(),le(),(async()=>{i.value=!0;const e=await b.get(`/v3/api/customer-company/company/${s.loggedCompany.id}`);X.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png"}))),e.data&&(I.value=e.data[0].id),i.value=!1})(),a.workerId&&(T.value=a.workerId.toString())})),(e,s)=>{const l=G,n=B,f=U,b=R("Multiselect"),x=L,N=A,j=W,q=V,$=E,J=z,ee=H;return o(),d(ee,{is:"form",size:"xl",open:a.AddRotaModalOpen,title:"Add Rota",actions:"right",onSubmit:C(ne,["prevent"]),onClose:se},{content:y((()=>[g("div",Ct,[g("div",Et,[g("div",Dt,[g("div",Tt,[Mt,m(f,{class:"is-flex"},{default:y((()=>[(o(!0),r(w,null,S(a.selectedDatesArray,((e,a)=>(o(),d(n,{addons:"",key:a},{default:y((()=>[m(l,{light:"",class:"ml-2",label:e,color:"primary",outlined:"",rounded:""},null,8,["label"]),m(l,{rounded:"",outlined:"",remove:"",onClick:e=>(e=>{t("remove-date",e)})(a)},null,8,["onClick"])])),_:2},1024)))),128))])),_:1})]),g("div",Pt,[Ot,m(x,{class:"pl-2"},{default:y((({id:e})=>[m(f,null,{default:y((()=>[m(b,{required:"",modelValue:c(I),"onUpdate:modelValue":s[0]||(s[0]=e=>k(I)?I.value=e:null),attrs:{id:e},placeholder:"Select customer company",label:"name",options:c(X),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect"},{singlelabel:y((({value:e})=>[g("div",It,[g("img",{style:{width:"30px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,Nt),h(" "+v(e.name),1)])])),option:y((({option:e})=>[g("img",{style:{width:"40px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,jt),h(" "+v(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Ht,[zt,m(x,{class:"pl-2"},{default:y((({id:e})=>[m(f,null,{default:y((()=>[m(b,{required:"",modelValue:c(M),"onUpdate:modelValue":s[1]||(s[1]=e=>k(M)?M.value=e:null),attrs:{id:e},placeholder:"Select a site",label:"name",options:c(O),searchable:!0,"track-by":"name",height:40},{singlelabel:y((({value:e})=>[g("div",Vt,v(e.name),1)])),option:y((({option:e})=>[h(v(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Wt,[At,m(x,{class:""},{default:y((({id:e})=>[m(f,null,{default:y((()=>[m(b,{required:"",modelValue:c(T),"onUpdate:modelValue":s[2]||(s[2]=e=>k(T)?T.value=e:null),attrs:{id:e},placeholder:"Select worker",label:"name",options:c(K),searchable:!0,"track-by":"name",height:400},{singlelabel:y((({value:e})=>[g("div",Lt,[g("img",{style:{width:"24px",height:"24px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,Ut),h(" "+v(e.name),1)])])),option:y((({option:e})=>[g("img",{style:{width:"30px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Bt),h(" "+v(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Gt,[m(x,null,{default:y((()=>[m(N,null,{default:y((()=>[h("Start Time *")])),_:1}),m(f,null,{default:y((()=>[m(j,{required:"",modelValue:c(ae).start,"onUpdate:modelValue":s[3]||(s[3]=e=>c(ae).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",qt,[m(x,null,{default:y((()=>[m(N,null,{default:y((()=>[h("End Time *")])),_:1}),m(f,null,{default:y((()=>[m(j,{required:"",modelValue:c(ae).end,"onUpdate:modelValue":s[4]||(s[4]=e=>c(ae).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),g("div",$t,[Ft,m(x,{class:"pl-2"},{default:y((({id:e})=>[m(f,null,{default:y((()=>[m(b,{modelValue:c(P),"onUpdate:modelValue":s[5]||(s[5]=e=>k(P)?P.value=e:null),attrs:{id:e},placeholder:"Select a job",label:"name",options:c(Q),searchable:!0,"track-by":"name",height:100},{singlelabel:y((({value:e})=>[g("div",Jt,v(e.name),1)])),option:y((({option:e})=>[h(v(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),g("div",Yt,[m(x,null,{default:y((()=>[m(f,null,{default:y((()=>[m(q,{modelValue:c(D),"onUpdate:modelValue":s[6]||(s[6]=e=>k(D)?D.value=e:null),label:"Create new jobs"},null,8,["modelValue"])])),_:1})])),_:1})]),c(D)?(o(),r("div",Xt,[m(x,null,{default:y((()=>[m(N,null,{default:y((()=>[h("Job Name")])),_:1}),m(f,null,{default:y((()=>[m(j,{modelValue:c(te).jobName,"onUpdate:modelValue":s[7]||(s[7]=e=>c(te).jobName=e),type:"text",placeholder:"Job name"},null,8,["modelValue"])])),_:1})])),_:1})])):u("",!0),c(D)?(o(),r("div",Kt,[m(x,null,{default:y((()=>[m(N,null,{default:y((()=>[h("Job Id")])),_:1}),m(f,null,{default:y((()=>[m(j,{modelValue:c(te).id,"onUpdate:modelValue":s[8]||(s[8]=e=>c(te).id=e),type:"text",placeholder:"Job id"},null,8,["modelValue"])])),_:1})])),_:1})])):u("",!0),c(D)?(o(),r("div",Qt,[m(x,null,{default:y((()=>[m(N,null,{default:y((()=>[h("Start Time *")])),_:1}),m(f,null,{default:y((()=>[m(j,{modelValue:c(te).start,"onUpdate:modelValue":s[9]||(s[9]=e=>c(te).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])):u("",!0),c(D)?(o(),r("div",Zt,[m(x,null,{default:y((()=>[m(N,null,{default:y((()=>[h("End Time *")])),_:1}),m(f,null,{default:y((()=>[m(j,{modelValue:c(te).end,"onUpdate:modelValue":s[10]||(s[10]=e=>c(te).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])):u("",!0),c(D)?(o(),r("div",ea,[m($,{color:"primary",onClick:oe,elevated:"",rounded:"",light:""},{default:y((()=>[h(" Add ")])),_:1})])):u("",!0),g("div",ta,[m(c(F),{options:c(ie)},{eventContent:y((e=>[g("div",aa,[e.event.extendedProps.jobName?(o(),r("span",{key:0,style:{position:"absolute",top:"0.7rem",right:"1rem","z-index":"9999909"},onClick:()=>{return t=e.event.id,t=parseInt(t),Y.value=Y.value.filter((e=>e.id!==t)),void le();var t},class:"close-icon"},la,8,sa)):u("",!0),ia,e.event.id?(o(),d(l,{key:1,light:"",color:"info",class:"mr-5"},{default:y((()=>[g("span",na,"Job-00"+v(e.event.id),1)])),_:2},1024)):u("",!0),g("p",oa,v(e.event.extendedProps.jobName),1)])])),_:1},8,["options"])])]),m(J,{items:Z,"with-chevron":"",style:{"border-radius":"14px"}},{"collapse-item-head":y((e=>[ra])),"collapse-item-content":y((e=>[g("div",da,[g("div",ca,[g("div",ua,[g("div",ga,[g("div",pa,[fa,g("div",ma,[p(g("input",{type:"number",name:"rate","onUpdate:modelValue":s[11]||(s[11]=e=>c(ae).hourlyRate=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[_,c(ae).hourlyRate]])])]),g("div",ha,[va,g("div",ya,[p(g("input",{type:"number",name:"rate","onUpdate:modelValue":s[12]||(s[12]=e=>c(ae).hours=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[_,c(ae).hours]])])]),g("div",ba,[xa,g("div",Ra,[p(g("input",{type:"text",name:"note","onUpdate:modelValue":s[13]||(s[13]=e=>c(ae).notes=e),class:"input is-primary-focus",placeholder:"Enter Note"},null,512),[[_,c(ae).notes]])])])])])])])])),_:1})])])])),action:y((()=>[m($,{type:"submit",color:"primary",loading:c(i),raised:""},{default:y((()=>[h("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Sa=M(wa,[["__scopeId","data-v-39435e54"]]);class ka extends ie{constructor(){super(...arguments),this.headerElRef=K()}renderSimpleLayout(e,t){let{props:a,context:s}=this,l=[],i=ne(s.options);return e&&l.push({type:"header",key:"header",isSticky:i,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),l.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),Q(re,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},Q(oe,{liquid:!a.isHeightAuto&&!a.forPrint,collapsibleWidth:a.forPrint,cols:[],sections:l}))}renderHScrollLayout(e,t,a,s){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{props:i,context:n}=this,o=!i.forPrint&&ne(n.options),r=!i.forPrint&&de(n.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:o,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),r&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ce}]}),Q(re,{elClasses:["fc-daygrid"],viewSpec:n.viewSpec},Q(l,{liquid:!i.isHeightAuto&&!i.forPrint,forPrint:i.forPrint,collapsibleWidth:i.forPrint,colGroups:[{cols:[{span:a,minWidth:s}]}],sections:d}))}}function _a(e,t){let a=[];for(let s=0;s<t;s+=1)a[s]=[];for(let s of e)a[s.row].push(s);return a}function Ca(e,t){let a=[];for(let s=0;s<t;s+=1)a[s]=[];for(let s of e)a[s.firstCol].push(s);return a}function Ea(e,t){let a=[];if(e){for(let s=0;s<t;s+=1)a[s]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)a[t.row].segs.push(t)}else for(let s=0;s<t;s+=1)a[s]=null;return a}const Da=J({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Ta(e){let{display:t}=e.eventRange.ui;return"list-item"===t||"auto"===t&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class Ma extends Re{render(){let{props:e}=this;return Q(we,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Da,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class Pa extends Re{render(){let{props:e,context:t}=this,{options:a}=t,{seg:s}=e,l=a.eventTimeFormat||Da,i=Se(s,l,t,!0,e.defaultDisplayEventEnd);return Q(_e,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ke(e.seg,t),defaultGenerator:Oa,timeText:i,isResizing:!1,isDateSelecting:!1}))}}function Oa(e){return Q(pe,null,Q("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&Q("div",{className:"fc-event-time"},e.timeText),Q("div",{className:"fc-event-title"},e.event.title||Q(pe,null," ")))}class Ia extends Re{constructor(){super(...arguments),this.compileSegs=X(Na)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:a}=this.compileSegs(e.singlePlacements);return Q(ze,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:a,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return Q(pe,null,t.map((t=>{let s=t.eventRange.instance.instanceId;return Q("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:a[s]?"hidden":""}},Ta(t)?Q(Pa,Object.assign({seg:t,isDragging:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},fe(t,e.todayRange))):Q(Ma,Object.assign({seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===e.eventSelection,defaultDisplayEventEnd:!1},fe(t,e.todayRange))))})))}})}}function Na(e){let t=[],a=[];for(let s of e)t.push(s.seg),s.isVisible||a.push(s.seg);return{allSegs:t,invisibleSegs:a}}const ja=J({week:"narrow"});class Ha extends ie{constructor(){super(...arguments),this.rootElRef=K(),this.state={dayNumberId:Ce()},this.handleRootEl=e=>{Ee(this.rootElRef,e),Ee(this.props.elRef,e)}}render(){let{context:e,props:t,state:a,rootElRef:s}=this,{options:l,dateEnv:i}=e,{date:n,dateProfile:o}=t;const r=t.showDayNumber&&function(e,t,a){const{start:s,end:l}=t,i=Oe(l,-1),n=a.getYear(s),o=a.getMonth(s),r=a.getYear(i),d=a.getMonth(i);return!(n===r&&o===d)&&Boolean(e.valueOf()===s.valueOf()||1===a.getDay(e)&&e.valueOf()<l.valueOf())}(n,o.currentRange,i);return Q(Pe,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":a.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:za,date:n,dateProfile:o,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:r,extraRenderProps:t.extraRenderProps},((i,o)=>Q("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&Q(De,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Te(e,n,"week"),date:n,defaultFormat:ja}),!o.isDisabled&&(t.showDayNumber||Me(l)||t.forceDayTop)?Q("div",{className:"fc-daygrid-day-top"},Q(i,{elTag:"a",elClasses:["fc-daygrid-day-number",r&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Te(e,n)),{id:a.dayNumberId})})):t.showDayNumber?Q("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Q("a",{className:"fc-daygrid-day-number"}," ")):void 0,Q("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,Q("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},Q(Ia,{allDayDate:n,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:s,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),Q("div",{className:"fc-daygrid-day-bg"},t.bgContent))))}}function za(e){return e.dayNumberText||Q(pe,null," ")}function Va(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function Wa(e){return Va(e)+":"+e.lastCol}function Aa(e,t,a,s,l,i,n){let o=new Ua((t=>{let a=e[t.index].eventRange.instance.instanceId+":"+t.span.start+":"+(t.span.end-1);return l[a]||1}));o.allowReslicing=!0,o.strictOrder=s,!0===t||!0===a?(o.maxCoord=i,o.hiddenConsumes=!0):"number"==typeof t?o.maxStackCnt=t:"number"==typeof a&&(o.maxStackCnt=a,o.hiddenConsumes=!0);let r=[],d=[];for(let v=0;v<e.length;v+=1){let t=e[v],a=Wa(t);null!=l[a]?r.push({index:v,span:{start:t.firstCol,end:t.lastCol+1}}):d.push(t)}let c=o.addSegs(r),u=o.toRects(),{singleColPlacements:g,multiColPlacements:p,leftoverMargins:f}=function(e,t,a){let s=function(e,t){let a=[];for(let s=0;s<t;s+=1)a.push([]);for(let s of e)for(let e=s.span.start;e<s.span.end;e+=1)a[e].push(s);return a}(e,a.length),l=[],i=[],n=[];for(let o=0;o<a.length;o+=1){let e=s[o],r=[],d=0,c=0;for(let s of e){let e=t[s.index];r.push({seg:La(e,o,o+1,a),isVisible:!0,isAbsolute:!1,absoluteTop:s.levelCoord,marginTop:s.levelCoord-d}),d=s.levelCoord+s.thickness}let u=[];d=0,c=0;for(let s of e){let e=t[s.index],l=s.span.end-s.span.start>1,i=s.span.start===o;c+=s.levelCoord-d,d=s.levelCoord+s.thickness,l?(c+=s.thickness,i&&u.push({seg:La(e,s.span.start,s.span.end,a),isVisible:!0,isAbsolute:!0,absoluteTop:s.levelCoord,marginTop:0})):i&&(u.push({seg:La(e,s.span.start,s.span.end,a),isVisible:!0,isAbsolute:!1,absoluteTop:s.levelCoord,marginTop:c}),c=0)}l.push(r),i.push(u),n.push(c)}return{singleColPlacements:l,multiColPlacements:i,leftoverMargins:n}}(u,e,n),m=[],h=[];for(let v of d){p[v.firstCol].push({seg:v,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=v.firstCol;e<=v.lastCol;e+=1)g[e].push({seg:La(v,e,e+1,n),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<n.length;v+=1)m.push(0);for(let v of c){let t=e[v.index],a=v.span;p[a.start].push({seg:La(t,a.start,a.end,n),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=a.start;e<a.end;e+=1)m[e]+=1,g[e].push({seg:La(t,e,e+1,n),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let v=0;v<n.length;v+=1)h.push(f[v]);return{singleColPlacements:g,multiColPlacements:p,moreCnts:m,moreMarginTops:h}}function La(e,t,a,s){if(e.firstCol===t&&e.lastCol===a-1)return e;let l=e.eventRange,i=l.range,n=Ie(i,{start:s[t].date,end:ae(s[a-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:a-1,eventRange:{def:l.def,ui:Object.assign(Object.assign({},l.ui),{durationEditable:!1}),instance:l.instance,range:n},isStart:e.isStart&&n.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&n.end.valueOf()===i.end.valueOf()})}class Ua extends Ne{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:a}=this,s=e=>!this.forceHidden[je(e)];for(let l=0;l<a.length;l+=1)a[l]=a[l].filter(s);return t}handleInvalidInsertion(e,t,a){const{entriesByLevel:s,forceHidden:l}=this,{touchingEntry:i,touchingLevel:n,touchingLateral:o}=e;if(this.hiddenConsumes&&i){const e=je(i);if(!l[e])if(this.allowReslicing){const e=Object.assign(Object.assign({},i),{span:He(i.span,t.span)});l[je(e)]=!0,s[n][o]=e,a.push(e),this.splitEntry(i,t,a)}else l[e]=!0,a.push(i)}super.handleInvalidInsertion(e,t,a)}}class Ba extends ie{constructor(){super(...arguments),this.cellElRefs=new ue,this.frameElRefs=new ue,this.fgElRefs=new ue,this.segHarnessRefs=new ue,this.rootElRef=K(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:a}=this,{options:s}=a,l=e.cells.length,i=Ca(e.businessHourSegs,l),n=Ca(e.bgEventSegs,l),o=Ca(this.getHighlightSegs(),l),r=Ca(this.getMirrorSegs(),l),{singleColPlacements:d,multiColPlacements:c,moreCnts:u,moreMarginTops:g}=Aa(ge(e.fgEventSegs,s.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,s.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),p=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return Q("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map(((t,a)=>{let s=this.renderFgSegs(a,e.forPrint?d[a]:c[a],e.todayRange,p),l=this.renderFgSegs(a,function(e,t){if(!e.length)return[];let a=function(e){let t={};for(let a of e)for(let e of a)t[e.seg.eventRange.instance.instanceId]=e.absoluteTop;return t}(t);return e.map((e=>({seg:e,isVisible:!0,isAbsolute:!0,absoluteTop:a[e.eventRange.instance.instanceId],marginTop:0})))}(r[a],c),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return Q(Ha,{key:t.key,elRef:this.cellElRefs.createRef(t.key),innerElRef:this.frameElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===a,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,moreCnt:u[a],moreMarginTop:g[a],singlePlacements:d[a],fgContentElRef:this.fgElRefs.createRef(t.key),fgContent:Q(pe,null,Q(pe,null,s),Q(pe,null,l)),bgContent:Q(pe,null,this.renderFillSegs(o[a],"highlight"),this.renderFillSegs(i[a],"non-business"),this.renderFillSegs(n[a],"bg-event")),minHeight:e.cellMinHeight})})))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let a=this.props;this.updateSizing(!Y(e,a))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,a,s,l,i,n){let{context:o}=this,{eventSelection:r}=this.props,{framePositions:d}=this.state,c=1===this.props.cells.length,u=l||i||n,g=[];if(d)for(let p of t){let{seg:e}=p,{instanceId:t}=e.eventRange.instance,f=p.isVisible&&!s[t],m=p.isAbsolute,h="",v="";m&&(o.isRtl?(v=0,h=d.lefts[e.lastCol]-d.lefts[e.firstCol]):(h=0,v=d.rights[e.firstCol]-d.rights[e.lastCol])),g.push(Q("div",{className:"fc-daygrid-event-harness"+(m?" fc-daygrid-event-harness-abs":""),key:Va(e),ref:u?null:this.segHarnessRefs.createRef(Wa(e)),style:{visibility:f?"":"hidden",marginTop:m?"":p.marginTop,top:m?p.absoluteTop:"",left:h,right:v}},Ta(e)?Q(Pa,Object.assign({seg:e,isDragging:l,isSelected:t===r,defaultDisplayEventEnd:c},fe(e,a))):Q(Ma,Object.assign({seg:e,isDragging:l,isResizing:i,isDateSelecting:n,isSelected:t===r,defaultDisplayEventEnd:c},fe(e,a)))))}return g}renderFillSegs(e,t){let{isRtl:a}=this.context,{todayRange:s}=this.props,{framePositions:l}=this.state,i=[];if(l)for(let n of e){let e=a?{right:0,left:l.lefts[n.lastCol]-l.lefts[n.firstCol]}:{left:0,right:l.rights[n.firstCol]-l.rights[n.lastCol]};i.push(Q("div",{key:ve(n.eventRange),className:"fc-daygrid-bg-harness",style:e},"bg-event"===t?Q(me,Object.assign({seg:n},fe(n,s))):he(t)))}return Q(pe,{},...i)}updateSizing(e){let{props:t,state:a,frameElRefs:s}=this;if(!t.forPrint&&null!==t.clientWidth){if(e){let e=t.cells.map((e=>s.currentMap[e.key]));if(e.length){let t=this.rootElRef.current,s=new ye(t,e,!0,!1);a.framePositions&&a.framePositions.similarTo(s)||this.setState({framePositions:new ye(t,e,!0,!1)})}}const l=this.state.segHeights,i=this.querySegHeights(),n=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},l),i),maxContentHeight:n?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let a in e){let s=Math.round(e[a].getBoundingClientRect().height);t[a]=Math.max(t[a]||0,s)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],a=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-a.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map((t=>e[t.key]))}}Ba.addStateEquality({segHeights:Y});class Ga extends ie{constructor(){super(...arguments),this.splitBusinessHourSegs=X(_a),this.splitBgEventSegs=X(_a),this.splitFgEventSegs=X(_a),this.splitDateSelectionSegs=X(_a),this.splitEventDrag=X(Ea),this.splitEventResize=X(Ea),this.rowRefs=new ue}render(){let{props:e,context:t}=this,a=e.cells.length,s=this.splitBusinessHourSegs(e.businessHourSegs,a),l=this.splitBgEventSegs(e.bgEventSegs,a),i=this.splitFgEventSegs(e.fgEventSegs,a),n=this.splitDateSelectionSegs(e.dateSelectionSegs,a),o=this.splitEventDrag(e.eventDrag,a),r=this.splitEventResize(e.eventResize,a),d=a>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return Q(Le,{unit:"day"},((t,c)=>Q(pe,null,e.cells.map(((t,u)=>Q(Ba,{ref:this.rowRefs.createRef(u),key:t.length?t[0].date.toISOString():u,showDayNumbers:a>1,showWeekNumbers:e.showWeekNumbers,todayRange:c,dateProfile:e.dateProfile,cells:t,renderIntro:e.renderRowIntro,businessHourSegs:s[u],eventSelection:e.eventSelection,bgEventSegs:l[u].filter(qa),fgEventSegs:i[u],dateSelectionSegs:n[u],eventDrag:o[u],eventResize:r[u],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ye(this.rootEl,this.rowRefs.collect().map((e=>e.getCellEls()[0])),!1,!0),this.colPositions=new ye(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:a,rowPositions:s}=this,l=a.leftToIndex(e),i=s.topToIndex(t);if(null!=i&&null!=l){let e=this.props.cells[i][l];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(i,l),allDay:!0},e.extraDateSpan),dayEl:this.getCellEl(i,l),rect:{left:a.lefts[l],right:a.rights[l],top:s.tops[i],bottom:s.bottoms[i]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let a=this.props.cells[e][t].date;return{start:a,end:ae(a,1)}}}function qa(e){return e.eventRange.def.allDay}class $a extends ie{constructor(){super(...arguments),this.elRef=K(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:a,expandRows:s}=e,l=!0===a||!0===t;l&&!s&&(l=!1,t=null,a=null);let i=["fc-daygrid-body",l?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return Q("div",{ref:this.elRef,className:i.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Q("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,Q("tbody",{role:"presentation"},Q(Ga,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:a,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function(e,t){let a;t.currentRangeUnit.match(/year|month/)&&(a=e.querySelector(`[data-date="${Ve(t.currentDate)}-01"]`));a||(a=e.querySelector(`[data-date="${We(t.currentDate)}"]`));return a}(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),a=t.closest(".fc-scroller"),s=e.getBoundingClientRect().top-t.getBoundingClientRect().top;a.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}class Fa extends Ae{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class Ja extends ie{constructor(){super(...arguments),this.slicer=new Fa,this.tableRef=K()}render(){let{props:e,context:t}=this;return Q($a,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}function Ya(e,t){let a=new be(e.renderRange,t);return new xe(a,/year|month|week/.test(e.currentRangeUnit))}le(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var Xa=Ue({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class extends ka{constructor(){super(...arguments),this.buildDayTableModel=X(Ya),this.headerRef=K(),this.tableRef=K()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:a}=this,s=this.buildDayTableModel(a.dateProfile,t),l=e.dayHeaders&&Q(Z,{ref:this.headerRef,dateProfile:a.dateProfile,dates:s.headerDates,datesRepDistinctDays:1===s.rowCnt}),i=t=>Q(Ja,{ref:this.tableRef,dateProfile:a.dateProfile,dayTableModel:s,businessHours:a.businessHours,dateSelection:a.dateSelection,eventStore:a.eventStore,eventUiBases:a.eventUiBases,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!a.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:a.forPrint});return e.dayMinWidth?this.renderHScrollLayout(l,i,s.colCnt,e.dayMinWidth):this.renderSimpleLayout(l,i)}},dateProfileGeneratorClass:class extends ee{buildRenderRange(e,t,a){let s=super.buildRenderRange(e,t,a),{props:l}=this;return function(e){let t,{dateEnv:a,currentRange:s}=e,{start:l,end:i}=s;e.snapToWeek&&(l=a.startOfWeek(l),t=a.startOfWeek(i),t.valueOf()!==i.valueOf()&&(i=te(t,1)));if(e.fixedWeekCount){let e=a.startOfWeek(a.startOfMonth(ae(s.end,-1))),t=Math.ceil(se(e,i));i=te(i,6-t)}return{start:l,end:i}}({currentRange:s,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:l.fixedWeekCount,dateEnv:l.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});export{kt as _,Sa as a,Xa as i};
