import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-40a554fc.js";import{_ as a}from"./AddUpdateUser-d9f53528.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-bc181844.js";import{_ as t}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-78deeb7b.js";import{_ as l,a as r}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-b11f0772.js";import{_ as i}from"./VIconBox.vue_vue_type_style_index_0_lang-a18c2eb3.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-cd438bf8.js";import{f as o,b as d,y as c,r as u,x as p,o as v,C as m,D as h,E as k,F as y,m as f,K as _,U as b,G as w,I as g,H as j,N as T,O as x,V as C,J as D}from"./index-175b3e55.js";import{F as I}from"./FullCalendar-99548327.js";import{i as M}from"./index-55eb4335.js";import{u as A}from"./useAPI-4749054c.js";import{u as P}from"./useNotyf-4a6d74a6.js";const N={class:"lifestyle-dashboard lifestyle-dashboard-v3"},U={class:"illustration-header"},V={class:"p-4"},H={class:"header-meta"},O={class:"summary-stats"},K={class:"summary-stat"},W=k("span",null,"Role",-1),F={class:"summary-stat"},L=k("span",null,"Status",-1),B={class:"summary-stat"},R=k("span",null,"Phone",-1),S={class:"summary-stat"},$=k("span",null,"Email",-1),q={class:"summary-stat h-hidden-tablet-p"},E=k("span",null,"Mail notify ",-1),Z={class:"summary-stat h-hidden-tablet-p"},z=k("span",null,"Password ",-1),G={class:"columns is-multiline is-flex-tablet-p"},J={class:"column is-3"},X={class:"health-tile"},Y={class:"tile-head"},Q=k("i",{class:"fas fa-clipboard-list","aria-hidden":"true"},null,-1),ee={class:"dark-inverted"},ae=k("h3",{class:"dark-inverted"},"Total Tasks",-1),se=k("p",null,"Number of tasks assigned within 30 Days duration",-1),te={class:"column is-3"},le={class:"health-tile"},re={class:"tile-head"},ie=k("i",{"aria-hidden":"true",class:"fas fa-tint"},null,-1),ne={class:"dark-inverted"},oe=k("h3",{class:"dark-inverted"},"Active Tasks",-1),de=k("p",null,"Tasks are currently active and worker notified",-1),ce={class:"column is-3"},ue={class:"health-tile"},pe={class:"tile-head"},ve=k("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1),me={class:"dark-inverted"},he=k("h3",{class:"dark-inverted"},"Pending Tasks",-1),ke=k("p",null,"Tasks that are pending and worker need to done.",-1),ye={class:"column is-3"},fe={class:"health-tile"},_e={class:"tile-head"},be=k("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1),we={class:"dark-inverted"},ge=k("h3",{class:"dark-inverted"},"Completed Tasks",-1),je=k("p",null," The worker has done his job on these tasks and assure by the manager ",-1),Te={class:"columns is-multiline"},xe={class:"list-flex-toolbar is-reversed"},Ce={class:"tabs-inner"},De={class:"tabs is-boxed"},Ie=[k("span",null,"Chronic View",-1)],Me=[k("span",null,"Calendar View",-1)],Ae=[k("span",null,"Cards View",-1)],Pe=[k("span",null,"Today Tasks",-1)],Ne=k("li",{class:"tab-naver"},null,-1),Ue={key:0,class:"column is-12"},Ve={key:1,class:"column is-12"},He={key:2,class:"column is-12"},Oe=["onClick"],Ke={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},We={style:{"padding-right":"10px",color:"#f1f1f1"}},Fe={key:3,class:"column is-12"},Le=o({__name:"IbexWorkerProfile",setup(o){const Le=d(),Be=P(),Re=A(),Se=c(),$e=u([]);p();const qe=u(""),Ee=u(!1),Ze=u("chronic"),ze=u(""),Ge=u(!1),Je=u({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});u(!1),u("all"),u("");const Xe=u(!1),Ye=u([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),Qe=u([]),ea=u([]),aa=u([]),sa=u({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),ta=u({plugins:[M],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),la=async()=>{try{Xe.value=!0;const e=await Re.get(`/api/users/${Se.params.id?Se.params.id:Le.user.id}/`);Je.value=e.data,Xe.value=!1}catch(e){console.log(e)}},ra=u({}),ia=u(!1),na=u({});return v((async()=>{await la(),await(async()=>{try{const e=await Re.get(`/api/task/${Se.params.id?Se.params.id:Le.user.id}/worker-tasks/`);Ye.value=e.data,console.log("worker tasks",Ye.value)}catch(e){Ye.value=[]}})(),(async(e=!1)=>{try{const a=await Re.get(`/api/task/worker-today/${Se.params.id?Se.params.id:Le.user.id}/`);na.value=a.data,e&&Be.green("Tasks list Refreshed")}catch(a){console.log(a)}})(),$e.value=Ye.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:sa[e.status],status:e.status,project:e.project}))),aa.value=Ye.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:sa[e.project.status]}))),Qe.value=aa.value,ea.value=$e.value,ta.value={...ta.value,resources:Qe.value,events:ea.value},console.log("tasks",ta.value.events,"resources",ta.value.resources)})),(o,d)=>{const c=n,u=i,p=l,v=r,M=t,A=s,P=a,Le=e;return m(),h(C,null,[k("div",N,[k("div",U,[k("div",V,[y(c,{size:"xl",squared:"",picture:f(Je).avatar,alt:""},null,8,["picture"])]),k("div",H,[k("h3",null,[_(b(f(Je)?.username)+" ",1),k("i",{onClick:d[0]||(d[0]=e=>((e="")=>{qe.value=e,Ee.value=!0})(f(Je).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),k("div",O,[k("div",K,[W,k("span",null,b(f(Je)?.role),1)]),k("div",F,[L,k("span",null,b(f(Je)?.is_active?"Active":" In-Active"),1)]),k("div",B,[R,k("span",null,b(f(Je)?.phoneNumber?f(Je)?.phoneNumber:"N/A"),1)]),k("div",S,[$,k("span",null,b(f(Je)?.email),1)]),k("div",q,[E,k("span",null,b(f(Je).is_sentMail?"On":"Off"),1)]),k("div",Z,[z,k("span",null,[k("i",{onClick:d[1]||(d[1]=e=>{return a=f(Je).id,ze.value=a,void(Ge.value=!0);var a}),class:"fas fa-lock cu-pointer","aria-hidden":"true"})])])])])]),k("div",G,[k("div",J,[k("div",X,[k("div",Y,[y(u,{color:"primary"},{default:w((()=>[Q])),_:1}),k("h4",null,[k("span",ee,b(f(na)?.stats?.pending+f(na)?.stats?.active+f(na)?.stats?.completed),1)])]),ae,se])]),k("div",te,[k("div",le,[k("div",re,[y(u,{color:"primary"},{default:w((()=>[ie])),_:1}),k("h4",null,[k("span",ne,b(f(na)?.stats?.active?f(na)?.stats?.active:0),1)])]),oe,de])]),k("div",ce,[k("div",ue,[k("div",pe,[y(u,{color:"primary"},{default:w((()=>[ve])),_:1}),k("h4",null,[k("span",me,b(f(na)?.stats?.pending?f(na)?.stats?.pending:0),1)])]),he,ke])]),k("div",ye,[k("div",fe,[k("div",_e,[y(u,{color:"primary"},{default:w((()=>[be])),_:1}),k("h4",null,[k("span",we,b(f(na)?.stats?.completed?f(na)?.stats?.completed:0),1)])]),ge,je])])]),k("div",Te,[k("div",xe,[k("div",Ce,[k("div",De,[k("ul",null,[k("li",{class:g(["chronic"===f(Ze)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:d[2]||(d[2]=j(D((e=>Ze.value="chronic"),["prevent"]),["space"])),onClick:d[3]||(d[3]=e=>Ze.value="chronic")},Ie,32)],2),k("li",{class:g(["calendar"===f(Ze)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:d[4]||(d[4]=j(D((e=>Ze.value="calendar"),["prevent"]),["space"])),onClick:d[5]||(d[5]=e=>Ze.value="calendar")},Me,32)],2),k("li",{class:g(["cards"===f(Ze)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:d[6]||(d[6]=j(D((e=>Ze.value="cards"),["prevent"]),["space"])),onClick:d[7]||(d[7]=e=>Ze.value="cards")},Ae,32)],2),k("li",{class:g(["today"===f(Ze)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:d[8]||(d[8]=j(D((e=>Ze.value="today"),["prevent"]),["space"])),onClick:d[9]||(d[9]=e=>Ze.value="today")},Pe,32)],2),Ne])])])]),"chronic"==f(Ze)?(m(),h("div",Ue,[y(p,{userId:f(Se).params.id},null,8,["userId"])])):T("",!0),"cards"==f(Ze)?(m(),h("div",Ve,[y(v,{workerId:f(Se).params.id},null,8,["workerId"])])):T("",!0),"calendar"==f(Ze)?(m(),h("div",He,[y(f(I),{options:f(ta)},{eventContent:w((e=>[k("div",{onClick:a=>{return s=e.event.extendedProps,ra.value=s,console.log("dataa",s),void(ia.value=!0);var s},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},[k("p",Ke,b(e.event.title),1),k("p",We,b(new Date(e.event.start).toDateString())+" to "+b(new Date(e.event.end).toDateString()),1)],8,Oe)])),_:1},8,["options"])])):T("",!0),"today"==f(Ze)?(m(),h("div",Fe,[y(M,{workerId:f(Se).params.id},null,8,["workerId"])])):T("",!0)]),f(Ge)?(m(),x(A,{key:0,isModalOpen:f(Ge),userId:f(ze),"onUpdate:closeModalHandler":d[10]||(d[10]=e=>Ge.value=!1)},null,8,["isModalOpen","userId"])):T("",!0),f(Ee)?(m(),x(P,{key:1,isModalOpen:f(Ee),userId:f(qe),userRole:"worker","onUpdate:closeModalHandler":d[11]||(d[11]=e=>Ee.value=!1),"onUpdate:actionUpdateHandler":la},null,8,["isModalOpen","userId"])):T("",!0)]),f(ia)?(m(),x(Le,{key:0,taskDetailModal:f(ia),taskData:f(ra),"onUpdate:modalHandler":d[12]||(d[12]=e=>ia.value=!1)},null,8,["taskDetailModal","taskData"])):T("",!0)],64)}}});export{Le as _};
