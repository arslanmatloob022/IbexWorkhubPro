import{_ as a}from"./VBlock.vue_vue_type_style_index_0_lang-df909563.js";import{_ as e}from"./VAvatarStack.vue_vue_type_script_setup_true_lang-41ed75ca.js";import{_ as s}from"./VIconWrap.vue_vue_type_style_index_0_lang-64853ef6.js";import{u as t}from"./useNotyf-9ffdf924.js";import{u as r}from"./useAPI-9b3b30e1.js";import{f as o,b as i,y as c,x as l,r as n,o as d,C as u,D as p,E as k,m as y,V as f,W as g,F as m,G as v,O as _,N as h,U as w}from"./index-ff8cc036.js";const T={class:"list-widget is-straight"},j={class:"widget-head"},b=k("h3",{class:"dark-inverted"},"Today Tasks",-1),I={key:0,class:"inner-list"},x={href:"#"},C={key:1,class:"inner-list"},D=k("a",{href:"#"},"No Tasks Found Of This Day.",-1),N=k("span",null,"Today",-1),V=o({__name:"ProjectTodayTasks",props:{projectId:{default:""},straight:{type:Boolean},workerId:{}},setup(o){const V=o,$=i(),F=r(),O=t();c(),l();const R=n({tasks:[{id:"1a82e8dc-496e-45be-a5f6-1b202abdadc8",workers:[{id:"fe8b01ec-1f56-4ecd-886e-31defc4a96a1",username:"Others",email:"others@gmail.com",role:"worker",avatar:"https://res.cloudinary.com/dcqeugna3/image/upload/v1/media/static/users_avatars/logo1_pfu1ge"}],color:"#2c3e50",title:"Fifth title",description:"Description",startDate:"2024-10-02",endDate:"2024-10-16",status:"active",is_active:!1,updated:"2024-10-05T05:29:28.348706Z",created:"2024-10-05T05:29:28.348727Z",costCode:"Code",quantity:"Quanityt",unit:"Unit",fileName:null,note:null,priority:"Medium",project:"e7f43430-677e-4b23-b420-fca1fe4310f2"}],stats:{active:1,completed:1,pending:1}}),U=async a=>{try{const e=await F.get(`/api/task/today-tasks/?project=${V.projectId}`);R.value=e.data.map((a=>({...a,workers:a.workers.map((a=>({...a,picture:a?.avatar,initials:a?.username?.slice(0,2).toUpperCase()})))}))),a&&O.green("Tasks list Refreshed"),console.log("data",R.value)}catch(e){console.log(e)}};return d((()=>{V.workerId?(async a=>{try{const e=await F.get(`/api/task/worker-today/${V.workerId}/`);R.value=e.data,a&&O.green("Tasks list Refreshed"),console.log("data",R.value)}catch(e){console.log(e)}})(!1):"worker"==$.user.role?(async a=>{try{const e=await F.get(`/api/task/worker-today/${$.user.id}/`);R.value=e.data,a&&O.green("Tasks list Refreshed"),console.log("data",R.value)}catch(e){console.log(e)}})(!1):U(!1)})),(t,r)=>{const o=s,i=e,c=a;return u(),p("div",T,[k("div",j,[b,k("i",{onClick:r[0]||(r[0]=a=>U(!0)),style:{color:"var(--primary)"},class:"fas fa-redo cu-pointer","aria-hidden":"true"})]),y(R).length?(u(),p("div",I,[k("div",null,[(u(!0),p(f,null,g(y(R),(a=>(u(),_(c,{key:a.id,center:"",lighter:"",class:"inner-list-item"},{icon:v((()=>[m(o,{icon:"lucide:clock","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:v((()=>[a.workers.length?(u(),_(i,{key:0,avatars:a.workers,size:"small",limit:3},null,8,["avatars"])):h("",!0)])),default:v((()=>[k("a",x,w(a.title),1),k("span",null,w(a.status),1)])),_:2},1024)))),128))])])):(u(),p("div",C,[k("div",null,[m(c,{center:"",lighter:"",class:"inner-list-item"},{icon:v((()=>[m(o,{icon:"lucide:check","dark-card-bordered":"",dark:"5",color:"secondary"})])),action:v((()=>[m(o,{color:"success","has-background":"","has-large-icon":"",icon:"fas fa-check-circle"})])),default:v((()=>[D,N])),_:1})])]))])}}});export{V as _};
