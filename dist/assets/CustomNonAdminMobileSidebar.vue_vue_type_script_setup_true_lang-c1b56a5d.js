import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-579ee674.js";import{f as l,b as a,T as s,r as t,o as i,C as o,D as n,F as r,G as u,J as d,E as c,m as p,V as m,W as _,K as v,k as f,N as y,O as b,a1 as g,P as k,I as w,U as h,Q as j,R as V,S as x,B as C}from"./index-69081f3d.js";import{_ as P}from"./VInput.vue_vue_type_script_setup_true_lang-2eaa04da.js";import{_ as S,a as M}from"./VOption.vue_vue_type_style_index_0_lang-887da321.js";import{_ as I}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-d6149ef2.js";import{_ as L}from"./VField.vue_vue_type_script_setup_true_lang-05c8a30c.js";import{_ as U}from"./VControl-9c54ab47.js";import{u as z}from"./useNotyf-346954c1.js";import{u as N}from"./company-3bba4552.js";import{u as O}from"./useAPI-1291b2e3.js";const B={class:"modal-form columns is-multiline"},F={key:0,class:"field column is-12 mb-0"},T=(e=>(j("data-v-1596d713"),e=e(),V(),e))((()=>c("label",{class:"light-text",style:{"font-size":"16px"}},"Sector ",-1))),W={class:"indutryOptions"},A=["onClick"],E=["src"],H={style:{"font-size":"12px"}},K={class:"colums is-multiline cu-all-input",style:{"margin-bottom":"40px"}},Q={class:"column is-12 light-text pl-0 is-flex cus-align-center",style:{"font-size":"16px"}},R={key:1,class:"mb-3 is-reversed",style:{width:"100%"}},$=x(l({__name:"InvitationLink",props:{invitationModal:{type:Boolean}},emits:["update:modalHandler","update:OnSuccess"],setup(l,{emit:j}){const V=l,x=a();s();const C=O(),$=t(!1),q=z(),D=N(),G=t(""),J=t(""),Y=t(""),X=t(!1),Z=t(!1),ee=t(""),le=t(""),ae=t(!1);t(!1);const se=()=>{j("update:modalHandler",!1)},te=D.suppliers?D.suppliers:[];return i((()=>{"partner"==x.user.role&&(Y.value=x.user.partner),J.value=D.loggedCompany.industry?D.loggedCompany.industry[0].id:""})),(l,a)=>{const s=U,t=L,i=I,j=S,z=M,N=P,O=k,ie=e;return o(),n("template",null,[r(g,{name:"fade-slow"},{default:u((()=>[r(ie,{is:"form",open:V.invitationModal,title:"Worker Signup Link",size:"small",actions:"right",onSubmit:a[8]||(a[8]=d((e=>(async()=>{try{if(console.log(D.loggedCompany.id),!J.value)return void q.error("Please select industry first");$.value=!0;const e=await C.post("/v3/api/worker/worker_invitation/create-worker-invitation/",{company:D.loggedCompany.id,industry:Y.value}),l=window.location.origin;G.value=`${l}/worker-signup/`+e.data.token,$.value=!1}catch(e){console.error("ok",e),$.value=!1}})()),["prevent"])),onClose:se,class:"crete-link-modal"},{content:u((()=>[c("div",B,[p(G)?y("",!0):(o(),n("div",F,[r(t,{class:""},{default:u((()=>[T,r(s,null,{default:u((()=>[c("div",W,[(o(!0),n(m,null,_(p(D).loggedCompany.industry,((e,l)=>(o(),n("div",{style:{"margin-bottom":"20px"},key:l,class:w(p(J)==e.id?"cus-selected":"options"),onClick:l=>J.value=e.id},[c("img",{src:e.industryLogo},null,8,E),c("p",H,h(e.name),1)],10,A)))),128))])])),_:1})])),_:1}),c("div",K,[c("label",Q,[v("Work through business partner ? "),c("span",null,[r(t,null,{default:u((()=>[r(s,null,{default:u((()=>[r(i,{disabled:"partner"==p(x).user.role,modelValue:p(ae),"onUpdate:modelValue":a[0]||(a[0]=e=>f(ae)?ae.value=e:null),label:"Yes"},null,8,["disabled","modelValue"])])),_:1})])),_:1})])]),r(t,null,{default:u((()=>[r(s,null,{default:u((()=>[r(z,{disabled:!p(ae),modelValue:p(Y),"onUpdate:modelValue":a[1]||(a[1]=e=>f(Y)?Y.value=e:null),rounded:"",name:"industry",class:"is-rounded"},{default:u((()=>[r(j,{disabled:"",value:""},{default:u((()=>[v("Select Partner")])),_:1}),(o(!0),n(m,null,_(p(te),((e,l)=>(o(),b(j,{value:p(ae)?"":e.id,key:l},{default:u((()=>[v(h(e.supplierName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1})])])),p(G)?(o(),n("div",R,[r(t,{addons:""},{default:u((()=>[r(s,{expanded:""},{default:u((()=>[r(N,{modelValue:p(G),"onUpdate:modelValue":a[2]||(a[2]=e=>f(G)?G.value=e:null),type:"text",class:"input",placeholder:"Find a repository"},null,8,["modelValue"])])),_:1}),r(s,null,{default:u((()=>[r(O,{icon:"fas fa-copy",onClick:a[3]||(a[3]=e=>{return l=p(G),navigator.clipboard.writeText(l),void q.success("Link Copied");var l}),color:"primary"},{default:u((()=>[v(" Link ")])),_:1})])),_:1})])),_:1}),c("div",null,[c("form",{onSubmit:a[5]||(a[5]=d((e=>(async()=>{try{X.value=!0,await C.post("/v3/api/worker/worker_invitation/send-worker-signup-invitation/",{link:G.value,email:ee.value}),q.success("Invitation Email sent successfully"),ee.value=""}catch{q.error("Invalid email address")}finally{X.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[r(t,{style:{width:"100%"},addons:""},{default:u((()=>[r(s,{expanded:""},{default:u((()=>[r(N,{modelValue:p(ee),"onUpdate:modelValue":a[4]||(a[4]=e=>f(ee)?ee.value=e:null),type:"email",class:"input",placeholder:"example@gmail.com"},null,8,["modelValue"])])),_:1}),r(s,null,{default:u((()=>[r(O,{type:"submit",icon:"feather:mail",loading:p(X),color:"primary"},{default:u((()=>[v(" Mail ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)]),c("div",null,[c("form",{onSubmit:a[7]||(a[7]=d((e=>(async()=>{try{Z.value=!0,await C.post("/v3/api/worker/worker_invitation/send-invitation-sms/",{message:G.value,phone:le.value}),q.success("Invitation SMS sent successfully"),le.value=""}catch{q.error("Invalid phone number")}finally{Z.value=!1}})()),["prevent"])),id:"cus-invitation-tools"},[r(t,{style:{width:"100%"},addons:""},{default:u((()=>[r(s,{expanded:""},{default:u((()=>[r(N,{modelValue:p(le),"onUpdate:modelValue":a[6]||(a[6]=e=>f(le)?le.value=e:null),pattern:"^\\+44\\d{10}$",type:"phone",class:"input",required:"",placeholder:"+4400000000"},null,8,["modelValue"])])),_:1}),r(s,null,{default:u((()=>[r(O,{type:"submit",icon:"feather:message-circle",loading:p(X),color:"primary"},{default:u((()=>[v(" SMS ")])),_:1},8,["loading"])])),_:1})])),_:1})],32)])])):y("",!0)])])),action:u((()=>[p(G)?y("",!0):(o(),b(O,{key:0,type:"submit",color:"primary",rounded:"",loading:p($),icon:"fas fa-link",raised:""},{default:u((()=>[v(" Create")])),_:1},8,["loading"]))])),cancel:u((()=>[r(O,{style:{display:"none"},rounded:"",color:"light",onClick:se,raised:""},{default:u((()=>[v("Close ")])),_:1})])),_:1},8,["open"])])),_:1})])}}}),[["__scopeId","data-v-1596d713"]]),q={class:"mobile-subsidebar"},D={class:"inner"},G=c("div",{class:"sidebar-title"},[c("h3",null,"Menu")],-1),J={key:0,class:"submenu","data-simplebar":""},Y=c("li",{class:"divider"},null,-1),X={key:1,class:"submenu","data-simplebar":""},Z=c("li",{class:"divider"},null,-1),ee={key:2,class:"submenu","data-simplebar":""},le=c("li",{class:"divider"},null,-1),ae={key:3,class:"submenu","data-simplebar":""},se=c("li",{class:"divider"},null,-1),te=l({__name:"CustomNonAdminMobileSidebar",setup(e){const l=a();return(e,a)=>{const s=C("RouterLink");return o(),n("div",q,[c("div",D,[G,"manager"==p(l).user.role?(o(),n("ul",J,[c("li",null,[r(s,{to:"/sidebar/manager/projects"},{default:u((()=>[v(" My Projects ")])),_:1})]),c("li",null,[r(s,{to:"/sidebar/manager/calendar"},{default:u((()=>[v(" Projects calendar ")])),_:1})]),Y,c("li",null,[r(s,{to:"/sidebar/manager/profile"},{default:u((()=>[v(" Profile ")])),_:1})])])):y("",!0),"client"==p(l).user.role?(o(),n("ul",X,[c("li",null,[r(s,{to:"/sidebar/client/projects"},{default:u((()=>[v(" My Projects ")])),_:1})]),c("li",null,[r(s,{to:"/sidebar/client/calendar"},{default:u((()=>[v(" Projects calendar ")])),_:1})]),Z,c("li",null,[r(s,{to:"/sidebar/client/profile"},{default:u((()=>[v(" Profile ")])),_:1})])])):y("",!0),"worker"==p(l).user.role?(o(),n("ul",ee,[c("li",null,[r(s,{to:"/sidebar/worker/projects"},{default:u((()=>[v(" My Projects ")])),_:1})]),c("li",null,[r(s,{to:"/sidebar/worker/calendar"},{default:u((()=>[v(" Projects calendar ")])),_:1})]),le,c("li",null,[r(s,{to:"/sidebar/worker/profile"},{default:u((()=>[v(" Profile ")])),_:1})])])):y("",!0),"contractor"==p(l).user.role?(o(),n("ul",ae,[c("li",null,[r(s,{to:"/sidebar/contractor/projects"},{default:u((()=>[v(" My Projects ")])),_:1})]),c("li",null,[r(s,{to:"/sidebar/contractor/calendar"},{default:u((()=>[v(" Projects calendar ")])),_:1})]),se,c("li",null,[r(s,{to:"/sidebar/contractor/profile"},{default:u((()=>[v(" Profile ")])),_:1})])])):y("",!0)])])}}});export{te as _,$ as a};
