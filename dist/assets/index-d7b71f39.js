import{_ as e}from"./AddUpdateUser-9e7da04f.js";import{_ as t}from"./SweetAlert.vue_vue_type_style_index_0_lang-0716c8fb.js";import{_ as a}from"./VIcon.vue_vue_type_script_setup_true_lang-4184f363.js";import{_ as s}from"./VTag.vue_vue_type_style_index_0_lang-f2720d3d.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-6c80847a.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-f24e440b.js";import{e as i,v as n,r as o,Z as u,o as c,B as _,C as p,l as d,N as m,M as v,D as g,E as y,F as f,K as b,W as j,j as h,H as x,U as k,V as w,aR as S,O as V,ak as A,T as C,z as P}from"./index-3c9acd8a.js";import{_ as O}from"./VControl-812f66fd.js";import{_ as E}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-f1665728.js";import{_ as T,a as F}from"./search-4-dark-2b5b440c.js";import{u as I}from"./useAPI-92f64e01.js";import{u as U}from"./useNotyf-f196b4fe.js";import{u as M}from"./viewWrapper-fceaf7ae.js";import{b as R}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-a1ce0dc3.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-0ec7e290.js";import"./VLabel.vue_vue_type_script_setup_true_lang-eaa7e588.js";import"./useVFieldContext-77cbceb7.js";import"./VFilePond.vue_vue_type_script_lang-2b3537a3.js";import"./VField.vue_vue_type_script_setup_true_lang-769495f6.js";import"./VInput.vue_vue_type_script_setup_true_lang-7b458631.js";import"./useSupportElement-bf3d0144.js";import"./userSession-fda79979.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-cb856952.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-4d97d83a.js";import"./notyf-b561eff2.js";import"./useThemeColors-4038adc6.js";const $={key:1},W={class:"user-grid-toolbar"},z=g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),L=g("span",null,"Contractor",-1),N={class:"user-grid user-grid-v1"},B=g("img",{class:"light-image",src:T,alt:""},null,-1),D=g("img",{class:"dark-image",src:F,alt:""},null,-1),H={class:"grid-item"},K={class:"dark-inverted"},Z={class:"people"},J={class:"buttons"},Q=["onClick"],G=[g("span",{class:"icon"},[g("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:user"})],-1),g("span",null,"Profile",-1)],X=["onClick"],Y={class:"icon"},q=g("span",null,"Remove",-1),ee=i({__name:"ContractorsList",setup(i){const P=I(),T=U(),F=n(),M=o(""),R=o(!1),ee=o([{id:"bc199abb-e8f3-4074-91c1-a73c182de6aa",active_project:0,completed_project:1,cancelled_project:0,pending_project:0,password:"pbkdf2_sha256$260000$OczZJ7bosNcSEPl14SwE2W$BE95gFMgOF4gKAvgE5PIfMbSmRXSrPjn0+Th1ox5lOQ=",last_login:null,date_joined:"2024-05-23T10:14:39.803183Z",email:"ibexbuilderstudios@gmail.com",role:"contractor",avatar:null,is_active:!0,phoneNumber:"23984729370",username:"Patrick",last_name:"",is_sentMail:!1,supplier:null}]),te=o(""),ae=o(!1),se=u((()=>M.value?ee.value.filter((e=>e.username.match(new RegExp(M.value,"i"))||e.email.match(new RegExp(M.value,"i")))):ee.value)),le=o({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),re=o(""),ie=async()=>{try{R.value=!0;await P.delete(`/api/users/${re.value}/`,{});ne(),T.green("Contractor deleted successfully")}catch(e){console.log(e),T.error("Error while deleting")}finally{R.value=!1,le.value.isSweetAlertOpen=!1}},ne=async()=>{try{R.value=!0;const e=await P.get("/api/users/contractors/",{});ee.value=e.data,console.log("data",ee.value)}catch(e){console.log(e)}finally{R.value=!1}};return c((()=>{ne()})),(i,n)=>{const o=E,u=O,c=V,P=A,T=r,I=l,U=s,ee=a,oe=t,ue=e;return _(),p(k,null,[d(R)?(_(),m(o,{key:0})):v("",!0),d(R)?v("",!0):(_(),p("div",$,[g("div",W,[y(u,{icon:"feather:search"},{default:f((()=>[b(g("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>h(M)?M.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[j,d(M)]])])),_:1}),y(P,null,{default:f((()=>[y(c,{onClick:n[1]||(n[1]=e=>((e="")=>{te.value=e,ae.value=!ae.value})()),color:"primary",raised:""},{default:f((()=>[z,L])),_:1})])),_:1})]),g("div",N,[y(T,{class:x([0!==d(se).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:f((()=>[B,D])),_:1},8,["class"]),y(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:f((()=>[(_(!0),p(k,null,w(d(se),(e=>(_(),p("div",{key:e.id,class:"column is-3"},[g("div",H,[y(I,{picture:e.avatar,size:"big"},null,8,["picture"]),g("h3",K,C(e.username)+" "+C(e.last_name?e.last_name:""),1),g("p",null,C(e.role),1),g("div",Z,[y(U,{color:e.is_active?"primary":"warning",rounded:"",label:e.is_active?"Active":"In-Active"},null,8,["color","label"])]),g("div",J,[g("button",{onClick:t=>{return a=e.id,void F.push(`/sidebar/dashboard/contractors/${a}`);var a},class:"button v-button is-dark-outlined"},G,8,Q),g("button",{onClick:t=>{return a=e,re.value=a.id,void(le.value={title:`Delete ${a.username}?`,subtitle:"After deleting this worker you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var a},class:"button v-button is-dark-outlined"},[g("span",Y,[y(ee,{icon:"lucide:trash"})]),q],8,X)])])])))),128))])),_:1})]),d(le).isSweetAlertOpen?(_(),m(oe,{key:0,loading:d(R),isSweetAlertOpen:d(le).isSweetAlertOpen,title:d(le).title,subtitle:d(le).subtitle,btntext:d(le).btntext,onConfirm:ie,onCancel:()=>d(le).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):v("",!0),d(ae)?(_(),m(ue,{key:1,"is-modal-open":d(ae),"user-role":"contractor","user-id":d(te),"onUpdate:closeModalHandler":n[2]||(n[2]=e=>ae.value=!1),"onUpdate:actionUpdateHandler":ne},null,8,["is-modal-open","user-id"])):v("",!0)]))],64)}}}),te={class:"page-content-inner"},ae=i({__name:"index",setup:e=>(M().setPageTitle("Contractors"),P({title:"Contractors - Ibex"}),(e,t)=>{const a=ee;return _(),p("div",te,[y(a)])})});"function"==typeof R&&R(ae);export{ae as default};
