import{_ as e}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-a8d8d5b6.js";import{_ as l,a}from"./ProjectFiles-aa528ccc.js";import{c as t,_ as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-c197c373.js";import{_ as i}from"./VIconWrap.vue_vue_type_style_index_0_lang-9b370220.js";import{_ as n}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-dd8ffca4.js";import{_ as o}from"./VCheckbox.vue_vue_type_style_index_0_lang-d0c5713e.js";import{_ as d}from"./VTextarea.vue_vue_type_script_setup_true_lang-21dc7818.js";import{_ as c}from"./VField.vue_vue_type_script_setup_true_lang-1d164d67.js";import{_ as u}from"./VInput.vue_vue_type_script_setup_true_lang-125f3a26.js";import{_ as r}from"./VControl-da6e6797.js";import{f as p,b as m,r as v,w as f,$ as h,o as _,av as y,C as b,D as g,E as k,F as w,G as x,K as j,U as C,L as V,X as U,N as I,aS as S,m as T,O as F,V as D,W as A,P,al as M,Q as O,R as E,S as K,B as R,J as $,I as B,x as H,H as N,k as z,aB as J,y as q}from"./index-cef3c94b.js";import{_ as W,a as G}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-dbdf91af.js";import{u as Q}from"./useNotyf-11e01064.js";import{_ as X}from"./ExcelFileEditor-e45dd718.js";import{d as Y,a as ee,C as le,f as ae}from"./useSupportElement-4d162b3b.js";import{_ as te}from"./VModal.vue_vue_type_style_index_0_lang-de273261.js";import{_ as se}from"./VLabel.vue_vue_type_script_setup_true_lang-05d203b2.js";import{_ as ie}from"./PlaceloadV4.vue_vue_type_style_index_0_lang-19adbf18.js";import{u as ne,_ as oe,a as de}from"./groupedCircleCharts-068e2d87.js";import{b as ce,u as ue,a as re,c as pe,_ as me}from"./groupedRadialCharts-09175244.js";import{_ as ve}from"./SparkStatWidget.vue_vue_type_style_index_0_lang-d20c842e.js";import{A as fe}from"./vue3-apexcharts.common-7e43f8b4.js";import{u as he}from"./salesSparksChart-170ae0cf.js";import{u as _e}from"./revenueAreaChart-a4cea412.js";import{_ as ye}from"./VAvatar.vue_vue_type_style_index_0_lang-7343b16f.js";import{h as be}from"./moment-1b9a430c.js";import{_ as ge}from"./FlexTableDropdown.vue_vue_type_script_setup_true_lang-8d8b94b7.js";import{p as ke}from"./index-c1fc2d09.js";import{a as we}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-9cc756f5.js";import{_ as xe}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-6e9fb886.js";import{_ as je}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-b9ea34a4.js";import{o as Ce}from"./via-placeholder-24645670.js";import{_ as Ve}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-be8004da.js";import{_ as Ue}from"./SweetAlert.vue_vue_type_style_index_0_lang-2aace95e.js";import{_ as Ie}from"./VDropdown.vue_vue_type_style_index_0_lang-7d5d5efb.js";import{_ as Se}from"./VPlyr.vue_vue_type_style_index_0_lang-7d7c7062.js";import{_ as Te}from"./VIconBox.vue_vue_type_style_index_0_lang-b505ef2e.js";import{f as Fe}from"./index-5fa9b154.js";import{_ as De}from"./UIWidget.vue_vue_type_style_index_0_lang-86a9f2f9.js";import{_ as Ae}from"./JobTodos.vue_vue_type_style_index_0_lang-4ff0efbf.js";import{_ as Pe}from"./UserCardDropdown-84d931ff.js";import{_ as Me}from"./VTag.vue_vue_type_style_index_0_lang-8d7dd639.js";import{_ as Oe}from"./LeadProposalsList.vue_vue_type_style_index_0_lang-1fdb8b91.js";const Ee=e=>(O("data-v-6b746c41"),e=e(),E(),e),Ke={class:"column is-12"},Le={class:"list-flex-toolbar is-reversed"},Re={class:"columns is-multiline"},$e={key:0,class:"column is-12 card p-4 curved mb-2"},Be={class:"columns is-multiline"},He={class:"column is-10"},Ne={class:"column is-2"},ze=Ee((()=>k("img",{class:"light-image",src:W,alt:""},null,-1))),Je=Ee((()=>k("img",{class:"dark-image",src:G,alt:""},null,-1))),qe={key:0,class:"column is-12 card p-4 curved mb-2"},We={class:"columns is-multiline"},Ge={class:"column is-10"},Ze={class:"column is-2"},Qe={class:"is-flex space-between mb-4 bottom-border"},Xe={class:"title is-5 m-0"},Ye={class:"content"},el={class:"is-flex"},ll={key:0,class:"columns is-multiline"},al={class:"column is-6"},tl={class:"column is-2"},sl={class:"column is-2"},il={class:"column is-2"},nl={class:"column is-2"},ol={class:"column is-2"},dl={class:"column is-2"},cl={class:"column is-2"},ul={class:"column is-2"},rl={class:"column is-2"},pl={class:"is-flex columns is-multiline"},ml=p({__name:"CalculationsList",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m();const a=Z(),p=Q(),O=v(!1),E={username:{label:"Title",grow:!0},location:"Height",industry:"Width",unit:"Unit",contacts:"Unit Price",totalPrice:"Total Price",quantity:"Quantity",grandTotalPrice:"Grand Total Price",action:{label:"Action",align:"end"}},K=v(!1),L=v(!1),R=v(!1),$=v([{id:"",title:"",is_template:!1,object:"",description:"",created_at:"",items:[{id:"cd65c781-5fd1-48d9-9d6c-7af86ec5a72f",title:"Item One Of Kitchen Tiling",height:0,width:0,item_area:0,unit:"Sq ft",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"2025-03-23T10:25:29.447261Z",updated_at:"2025-03-23T10:25:29.447272Z",section:"bdff8ebb-a0f5-475a-bc48-a6c3699eb550"}]}]),B=v(""),H=v(""),N=v({id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""}),z=v({title:"",is_template:!1,object:l.objectId??"",description:""}),J=v({title:"",is_template:!1,description:""}),q=async()=>{try{const e=await a.get(`/api/calculation-section/?object=${l.objectId??""}&user_id=${l.userId??""}&is_template=${l.fetchTemplates??""}`);$.value=e.data}catch(e){console.error(e)}finally{O.value=!1}},W=async()=>{try{const e=z.value;await a.post("/api/calculation-section/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{O.value=!1}};f((()=>N.value.width),(()=>{let e=0;e=N.value.height*N.value.width,N.value.item_area=e.toFixed(2)})),f((()=>N.value.item_unit_price),(()=>{let e=0;e=N.value.item_area*N.value.item_unit_price,N.value.item_total_price=e.toFixed(2)})),f((()=>N.value.quantity),(()=>{let e=0;e=N.value.item_total_price*N.value.quantity,N.value.grand_total_price=e.toFixed(2)}));const G=async()=>{try{const e=N.value;e.section=B.value;await a.post("/api/calculation-section-items/",e);p.success("Section created successfully!"),q()}catch(e){console.error(e)}finally{O.value=!1}},X=h((()=>{if(H.value){const e=new RegExp(H.value,"i");return $.value.filter((l=>l.title?.match(e)))}return $.value})),ee=async e=>{try{await a.delete(`/api/calculation-section/${e}/`),p.success("Section deleted successfully!"),q()}catch(l){console.error(l),p.error("Failed to delete sheet.")}};return _((async()=>{await q(),await q()})),(e,l)=>{const a=P,p=M,m=r,v=u,f=c,h=d,_=o,O=n,$=i,q=t,Z=s,Q=y("tooltip");return b(),g("div",Ke,[k("div",Le,[w(p,null,{default:x((()=>[w(a,{icon:L.value?"fas fa-window-close":"fas fa-plus",color:L.value?"warning":"primary",class:"ml-2",raised:"",onClick:l[0]||(l[0]=e=>L.value=!L.value)},{default:x((()=>[j(C(L.value?"Close":"Calculation"),1)])),_:1},8,["icon","color"]),w(a,{icon:"fas fa-file-import",color:"info",class:"ml-2",raised:"",onClick:l[1]||(l[1]=e=>L.value=!L.value)},{default:x((()=>[j("Import")])),_:1})])),_:1}),k("div",null,[w(m,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>H.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,H.value]])])),_:1})])]),k("div",Re,[w(S,{name:"translate-page-y"},{default:x((()=>[L.value?(b(),g("div",$e,[k("div",Be,[k("div",He,[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:z.value.title,"onUpdate:modelValue":l[3]||(l[3]=e=>z.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(h,{modelValue:z.value.description,"onUpdate:modelValue":l[4]||(l[4]=e=>z.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",Ne,[w(a,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:W},{default:x((()=>[j(" Add Section")])),_:1}),w(m,{raw:"",subcontrol:""},{default:x((()=>[w(_,{modelValue:z.value.is_template,"onUpdate:modelValue":l[5]||(l[5]=e=>z.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):I("",!0)])),_:1}),T(X).length?I("",!0):(b(),F(O,{key:0,title:"There is not custom calculations are added on this Job.",subtitle:"Too bad. Looks like we couldn't find any calculation and measurements for the\n          Job.",larger:""},{image:x((()=>[ze,Je])),_:1})),w(S,{name:"translate-page-y"},{default:x((()=>[R.value?(b(),g("div",qe,[k("div",We,[k("div",Ge,[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:J.value.title,"onUpdate:modelValue":l[6]||(l[6]=e=>J.value.title=e),type:"text",placeholder:"Calculation Title"},null,8,["modelValue"])])),_:1})])),_:1}),w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(h,{modelValue:J.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>J.value.description=e),type:"text",rows:"2",placeholder:"Calculation Description"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",Ze,[w(a,{color:"primary",outlined:"",light:"",bold:"",fullwidth:"",class:"ml-2",raised:"",onClick:W},{default:x((()=>[j(" Add Section")])),_:1}),w(m,{raw:"",subcontrol:""},{default:x((()=>[w(_,{modelValue:J.value.is_template,"onUpdate:modelValue":l[8]||(l[8]=e=>J.value.is_template=e),label:"Create Template",color:"info"},null,8,["modelValue"])])),_:1})])])])):I("",!0)])),_:1}),w(S,{name:"from-bottom"},{default:x((()=>[T(X).length?(b(!0),g(D,{key:0},A(T(X),((e,t)=>(b(),g("div",{class:"column is-12 card p-4 curved mb-2",key:e.id},[k("div",Qe,[k("div",null,[k("h4",Xe,C(e.title),1),k("div",Ye,[k("p",null,C(T(Y)(e.created_at)),1)])]),k("div",el,[w($,{icon:"lucide:pen",color:"info",class:"cu-pointer","has-background":""}),V(w($,{icon:"fas fa-plus",color:K.value?"dark":"primary",class:"cu-pointer ml-1",onClick:l=>(async e=>{B.value=e,K.value=!K.value,0==K.value&&(N.value={id:"",title:"",height:0,width:0,item_area:0,unit:"",item_unit_price:0,item_total_price:0,quantity:0,grand_total_price:0,additional_data:{},is_active:!0,created_at:"",updated_at:"",section:""})})(e.id),"has-background":""},null,8,["color","onClick"]),[[Q,"Add Item",void 0,{rounded:!0,primary:!0}]]),V(w($,{onClick:l=>ee(e.id),icon:"fas fa-copy",color:"warning","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"]),[[Q,"Create Template",void 0,{rounded:!0,warning:!0}]]),w($,{onClick:l=>ee(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])]),K.value?(b(),g("div",ll,[k("div",al,[w(f,{label:"Title"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.title,"onUpdate:modelValue":l[9]||(l[9]=e=>N.value.title=e),type:"text",placeholder:"Item Title"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",tl,[w(f,{label:"Height"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.height,"onUpdate:modelValue":l[10]||(l[10]=e=>N.value.height=e),type:"text",placeholder:"Height"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",sl,[w(f,{label:"Width"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.width,"onUpdate:modelValue":l[11]||(l[11]=e=>N.value.width=e),type:"text",placeholder:"Width"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",il,[w(f,{label:"Area"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.item_area,"onUpdate:modelValue":l[12]||(l[12]=e=>N.value.item_area=e),type:"number",step:"2",placeholder:"Area"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",nl,[w(f,{label:"Unit"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.unit,"onUpdate:modelValue":l[13]||(l[13]=e=>N.value.unit=e),type:"text",placeholder:"Unit"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ol,[w(f,{label:"Unit Price"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.item_unit_price,"onUpdate:modelValue":l[14]||(l[14]=e=>N.value.item_unit_price=e),type:"text",placeholder:"Unit price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",dl,[w(f,{label:"Total Price"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.item_total_price,"onUpdate:modelValue":l[15]||(l[15]=e=>N.value.item_total_price=e),type:"text",placeholder:"Total price"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",cl,[w(f,{label:"Quantity"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.quantity,"onUpdate:modelValue":l[16]||(l[16]=e=>N.value.quantity=e),type:"text",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",ul,[w(f,{label:"Grand Total"},{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:N.value.grand_total_price,"onUpdate:modelValue":l[17]||(l[17]=e=>N.value.grand_total_price=e),type:"text",placeholder:"Grand Total"},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",rl,[w(a,{light:"",fullwidth:"",onClick:G,color:"primary",outlined:"",class:"mt-5"},{default:x((()=>[j("Add Item")])),_:1})])])):I("",!0),k("div",pl,[e.items.length?(b(),F(Z,{key:0,class:"column is-12",data:e.items,columns:E,compact:""},{body:x((()=>[w(S,{name:"list",tag:"div",class:"flex-list-inner"},{default:x((()=>[(b(!0),g(D,null,A(e.items,(e=>(b(),g("div",{key:e.id,class:"flex-table-item"},[w(q,{column:{grow:!0},"data-th":"Label"},{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,type:"text",placeholder:"Title"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.height,"onUpdate:modelValue":l=>e.height=l,type:"text",placeholder:"height"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.width,"onUpdate:modelValue":l=>e.width=l,type:"text",placeholder:"width"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.unit,"onUpdate:modelValue":l=>e.unit=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.item_unit_price,"onUpdate:modelValue":l=>e.item_unit_price=l,type:"text",placeholder:"unit"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.item_total_price,"onUpdate:modelValue":l=>e.item_total_price=l,type:"text",placeholder:"total price"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.quantity,"onUpdate:modelValue":l=>e.quantity=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,null,{default:x((()=>[w(f,null,{default:x((()=>[w(m,null,{default:x((()=>[w(v,{modelValue:e.grand_total_price,"onUpdate:modelValue":l=>e.grand_total_price=l,type:"text",placeholder:"quantity"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024),w(q,{column:{align:"end"}},{default:x((()=>[w($,{icon:"lucide:pen",color:"info",class:"cu-pointer"}),w($,{icon:"lucide:trash",color:"danger",class:"cu-pointer ml-1"})])),_:1})])))),128))])),_:2},1024)])),_:2},1032,["data"])):I("",!0)])])))),128)):I("",!0)])),_:1})])])}}}),vl=K(ml,[["__scopeId","data-v-6b746c41"]]),fl=e=>(O("data-v-ce90a5fa"),e=e(),E(),e),hl={key:1},_l={class:"columns is-multiline"},yl={class:"list-flex-toolbar is-reversed column is-12"},bl={class:"multiselect-single-label"},gl=["src"],kl=["src"],wl={class:"is-flex"},xl={class:"card p-4 curved is-flex space-between"},jl={class:"subtitle is-5 m-0"},Cl={class:"content"},Vl={class:"is-flex"},Ul={key:1},Il=fl((()=>k("h1",{class:"title is-4"},"No File Uploaded",-1))),Sl=[Il],Tl={class:"modal-form columns is-multiline"},Fl={class:"file has-name"},Dl={class:"file-label"},Al=fl((()=>k("span",{class:"file-cta"},[k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})]),k("span",{class:"file-label"}," Choose a file… ")],-1))),Pl={class:"file-name light-text"},Ml=p({__name:"ExcelSheetComponent",props:{fetchAll:{},fetchTemplates:{},userId:{},objectId:{}},setup(e){const l=e;m(),v(null);const a=Z(),t=Q(),s=v(!1);v([[""]]);const n=v([]),o=v([]),d=v(""),p=v(!1);v("");const y=v("");v("");const S=v(!1),O=v(0),E=v({file:"",title:"",object:l.objectId}),K=e=>{let l=e.target.files[0];E.value.file=l,y.value=l.name,E.value.title=l.name},L=v(""),B=v([{value:"javascript",name:"Javascript",icon:"/images/icons/stacks/js.svg"}]),H=async()=>{try{s.value=!0;const e=await a.get(`/api/excel-files/?object=${l.objectId}`);n.value=e.data}catch(e){console.error(e)}finally{s.value=!1}},N=(e="")=>{O.value=e,S.value=!0},z=v(!1),J=async()=>{try{z.value=!0;const e=ee(E.value,[""]);await a.post("/api/excel-files/upload-excel/",e);H(),t.success("Sheet uploaded successfully")}catch(e){console.error(e)}finally{z.value=!1,p.value=!1}};f((()=>L.value),(e=>{e&&(async e=>{try{z.value=!0,await a.post(`/api/excel-files/create-from-template/${e}/`),t.success("Sheet create successfully"),H()}catch(l){console.error(l)}finally{z.value=!1,p.value=!1}})(e)}));v("excel");const q=h((()=>{if(d.value){const e=new RegExp(d.value,"i");return n.value.filter((l=>l.title?.match(e)&&0==l.is_template))}return n.value.filter((e=>0==e.is_template))}));return h((()=>{if(d.value){const e=new RegExp(d.value,"i");return o.value.filter((l=>l.title?.match(e)))}return o.value})),_((async()=>{l.fetchAll&&await H(),l.userId&&(async()=>{try{s.value=!0;const e=await a.get(`/api/excel-files/by-user/${l.userId}/`);n.value=e.data}catch(e){console.error(e)}finally{s.value=!1}})(),(async()=>{try{s.value=!0;const e=await a.get("/api/excel-files/templates/");o.value=e.data,B.value=o.value.map((e=>({value:e.id,name:e.title})))}catch(e){console.error(e)}finally{s.value=!1}})(),await H()})),(e,n)=>{const o=ie,m=R("Multiselect"),v=r,f=c,h=P,_=M,z=i,W=X,G=se,Z=u,Q=te;return s.value?(b(),F(o,{key:0})):(b(),g("div",hl,[k("div",_l,[k("div",yl,[w(_,null,{default:x((()=>[w(f,{style:{width:"260px"}},{default:x((({id:e})=>[w(v,null,{default:x((()=>[w(m,{modelValue:L.value,"onUpdate:modelValue":n[0]||(n[0]=e=>L.value=e),attrs:{id:e},placeholder:"Create with template",label:"name",options:B.value,searchable:!0,"track-by":"name","max-height":145},{singlelabel:x((({value:e})=>[k("div",bl,[k("img",{class:"select-label-icon",src:e.icon,alt:""},null,8,gl),j(" "+C(e.name),1)])])),option:x((({option:e})=>[k("img",{class:"select-option-icon",src:e.icon,alt:""},null,8,kl),j(" "+C(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),w(h,{icon:"fas fa-plus",color:"info",outlined:"",light:"",class:"ml-2",raised:"",onClick:n[1]||(n[1]=e=>N())},{default:x((()=>[j("New Sheet")])),_:1}),w(h,{icon:"fas fa-upload",raised:"",light:"",onClick:n[2]||(n[2]=e=>p.value=!p.value),outlined:"",color:"primary"},{default:x((()=>[j(" File ")])),_:1})])),_:1}),k("div",wl,[w(v,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>d.value=e),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,d.value]])])),_:1})])]),T(q).length?(b(!0),g(D,{key:0},A(T(q),((e,l)=>(b(),g("div",{class:"column is-6",key:e.id},[k("div",xl,[k("div",null,[k("h4",jl,C(e.title),1),k("div",Cl,[k("p",null,C(T(Y)(e.created_at)),1)])]),k("div",Vl,[w(z,{icon:"lucide:pen",color:"info",class:"cu-pointer",onClick:l=>N(e.id),"has-background":""},null,8,["onClick"]),w(z,{onClick:l=>(async e=>{try{await a.delete(`/api/excel-files/${e}/`),t.success("Sheet deleted successfully!"),H()}catch(l){console.error(l),t.error("Failed to delete sheet.")}})(e.id),icon:"lucide:trash",color:"danger","has-background":"",class:"cu-pointer ml-1"},null,8,["onClick"])])])])))),128)):(b(),g("div",Ul,Sl))]),S.value?(b(),F(W,{key:0,class:"fullscreen","excel-file-modal":S.value,fileId:O.value,"object-id":l.objectId,isTemplate:!1,"onUpdate:modalHandler":n[4]||(n[4]=e=>{S.value=!1,H()})},null,8,["excel-file-modal","fileId","object-id"])):I("",!0),w(Q,{is:"form",open:p.value,title:"Upload Task File",size:"medium",actions:"right",onClose:n[7]||(n[7]=e=>p.value=!1),onSubmit:$(J,["prevent"])},{content:x((()=>[k("div",Tl,[w(f,{class:"column is-12"},{default:x((()=>[w(G,null,{default:x((()=>[j("File Title")])),_:1}),w(v,null,{default:x((()=>[w(Z,{modelValue:E.value.title,"onUpdate:modelValue":n[5]||(n[5]=e=>E.value.title=e),type:"text"},null,8,["modelValue"])])),_:1})])),_:1}),w(f,{class:"column is-12",grouped:""},{default:x((()=>[w(v,null,{default:x((()=>[k("div",Fl,[k("label",Dl,[k("input",{onChange:K,class:"file-input",type:"file",name:"file",required:""},null,32),Al,k("span",Pl,C(y.value?y.value:"Upload any file"),1)])])])),_:1})])),_:1})])])),cancel:x((()=>[w(h,{onClick:n[6]||(n[6]=e=>p.value=!1),raised:""},{default:x((()=>[j("Close")])),_:1})])),action:x((()=>[w(h,{type:"submit",color:"primary",raised:""},{default:x((()=>[j("Upload")])),_:1})])),_:1},8,["open","onSubmit"])]))}}}),Ol=K(Ml,[["__scopeId","data-v-ce90a5fa"]]),El={class:"columns is-multiline"},Kl={class:"column is-3"},Ll={class:"column is-3"},Rl={class:"column is-3"},$l={class:"column is-3"},Bl={class:"column is-6"},Hl={class:"column is-6"},Nl={class:"column is-6"},zl={class:"column is-6"},Jl={class:"column is-6"},ql={class:"column is-6"},Wl=p({__name:"JobReport",setup(e){const{spark1:l,spark2:a,spark3:t,spark4:s}=he(),{revenueOptions:i}=_e(),{lineStatsChartOptions:n}=ce(),{flexRadialChartCircleOptions:o}=ue(),{flexRadialChartStripesOptions:d}=re(),{widgetGaugeGroup1Options:c,widgetGaugeGroup2Options:u,widgetGaugeGroup3Options:r}=pe(),{widgetRadialGroup1Options:p,widgetRadialGroup2Options:m,widgetRadialGroup3Options:v}=ne();return(e,f)=>{const h=ve,_=me,y=oe,j=de;return b(),g("div",El,[k("div",Kl,[w(h,{straight:""},{default:x((()=>[w(T(fe),{id:"widget-spark1",height:T(l).chart.height,type:T(l).chart.type,series:T(l).series,options:T(l)},null,8,["height","type","series","options"])])),_:1})]),k("div",Ll,[w(h,{straight:""},{default:x((()=>[w(T(fe),{id:"widget-spark2",height:T(a).chart.height,type:T(a).chart.type,series:T(a).series,options:T(a)},null,8,["height","type","series","options"])])),_:1})]),k("div",Rl,[w(h,{straight:""},{default:x((()=>[w(T(fe),{id:"widget-spark3",height:T(t).chart.height,type:T(t).chart.type,series:T(t).series,options:T(t)},null,8,["height","type","series","options"])])),_:1})]),k("div",$l,[w(h,{straight:""},{default:x((()=>[w(T(fe),{id:"widget-spark4",height:T(s).chart.height,type:T(s).chart.type,series:T(s).series,options:T(s)},null,8,["height","type","series","options"])])),_:1})]),k("div",Bl,[w(_,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:x((()=>[w(T(fe),{id:"line-stats-widget-chart",height:T(n).chart.height,type:T(n).chart.type,series:T(n).series,options:T(n)},null,8,["height","type","series","options"])])),_:1})]),k("div",Hl,[w(_,{title:"Revenue","current-label":"This Month","current-value":"$75,648.43","previous-label":"Last Month","previous-value":"$91,512.18",straight:""},{default:x((()=>[w(T(fe),{id:"line-stats-area-chart",height:T(i).chart.height,type:T(i).chart.type,series:T(i).series,options:T(i)},null,8,["height","type","series","options"])])),_:1})]),k("div",Nl,[w(y,{title:"Sales Revenue",straight:""},{default:x((()=>[w(T(fe),{id:"flex-stat-circle",height:T(o).chart.height,type:T(o).chart.type,series:T(o).series,options:T(o)},null,8,["height","type","series","options"])])),_:1})]),k("div",zl,[w(y,{title:"Sales Revenue",straight:""},{default:x((()=>[w(T(fe),{id:"flex-stat-radial",height:T(d).chart.height,type:T(d).chart.type,series:T(d).series,options:T(d)},null,8,["height","type","series","options"])])),_:1})]),k("div",Jl,[w(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"]},{chart1:x((()=>[w(T(fe),{id:"group-radial-1",height:T(p).chart.height,type:T(p).chart.type,series:T(p).series,options:T(p)},null,8,["height","type","series","options"])])),chart2:x((()=>[w(T(fe),{id:"group-radial-2",height:T(m).chart.height,type:T(m).chart.type,series:T(m).series,options:T(m)},null,8,["height","type","series","options"])])),chart3:x((()=>[w(T(fe),{id:"group-radial-3",height:T(v).chart.height,type:T(v).chart.type,series:T(v).series,options:T(v)},null,8,["height","type","series","options"])])),_:1})]),k("div",ql,[w(j,{title:"Additional Stats",values:["264","1,203","3,078"],labels:["New Deals","Proposals","Closed Deals"],gauge:""},{chart1:x((()=>[w(T(fe),{id:"group-gauge-1",height:T(c).chart.height,type:T(c).chart.type,series:T(c).series,options:T(c)},null,8,["height","type","series","options"])])),chart2:x((()=>[w(T(fe),{id:"group-gauge-2",height:T(u).chart.height,type:T(u).chart.type,series:T(u).series,options:T(u)},null,8,["height","type","series","options"])])),chart3:x((()=>[w(T(fe),{id:"group-gauge-3",height:T(r).chart.height,type:T(r).chart.type,series:T(r).series,options:T(r)},null,8,["height","type","series","options"])])),_:1})])])}}}),Gl=e=>(O("data-v-1f68036b"),e=e(),E(),e),Zl={class:"timeline-wrapper"},Ql=Gl((()=>k("div",{class:"timeline-header"},null,-1))),Xl={class:"timeline-wrapper-inner"},Yl={class:"timeline-container"},ea={class:"timeline-item is-unread"},la={class:"date"},aa={class:"content-wrap"},ta={class:"content-box"},sa=Gl((()=>k("div",{class:"status"},null,-1))),ia={class:"box-text"},na={class:"meta-text"},oa=["innerHTML"],da=p({__name:"JobActivities",props:{object_id:{},object_type:{}},setup(e){const l=e,a=Z(),t=v([{id:"06b62536-220c-4d54-b437-50f035677d17",action:"UPDATE",timestamp:"2025-02-21T18:09:11.830145Z",actor_info:{id:"0feda007-d8a0-4b96-acb7-d7763614854e",username:"Test &",last_name:"Dev",email:"test@dev.com",role:"admin",avatar:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/static/users_avatars/Screenshot_from_2025-01-17_15-14-32.png"},message:"updated <b>HENNING</b> lead information.",object_id:"1be101da-7a93-43af-b3e3-d1ca908aa2c9",object_type:"lead",actor:"0feda007-d8a0-4b96-acb7-d7763614854e"}]),s={UPDATE:"is-info",RETRIEVE:"is-warning",DELETE:"is-danger",CREATE:"is-primary"};return _((()=>{(async()=>{try{const e=await a.get(`/api/activity-logs/?object_id=${l.object_id}`);t.value=e.data}catch(e){console.log(e)}})()})),(e,l)=>{const a=ye;return b(),g("div",Zl,[Ql,k("div",Xl,[k("div",Yl,[(b(!0),g(D,null,A(T(t),(e=>(b(),g("div",ea,[k("div",la,[k("span",null,C(T(be)(e.timestamp).format("ddd, mm yyyy")),1)]),k("div",{class:B(["dot",s[e.action]])},null,2),k("div",aa,[k("div",ta,[sa,w(a,{picture:e.actor_info?.avatar},null,8,["picture"]),k("div",ia,[k("div",na,[k("p",null,[k("span",null,C(e.actor_info?.username??"N/A")+" "+C(e.actor_info?.last_name??"N/A"),1),k("span",{class:"log-message",innerHTML:e.message},null,8,oa)]),k("span",null,C(T(be)(e.timestamp).format("hh:mm:ss")),1)])])])])])))),256))])])])}}}),ca=K(da,[["__scopeId","data-v-1f68036b"]]),ua={class:"table is-striped is-fullwidth"},ra=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Job"),k("th",{scope:"col"},"ID"),k("th",{scope:"col"},"Title"),k("th",{scope:"col"},"Status"),k("th",{scope:"col"},"Total Price"),k("th",{scope:"col"},"Total Tax"),k("th",{scope:"col"},"Amount Paid"),k("th",{scope:"col"},"Balance"),k("th",{scope:"col"},"Deadline"),k("th",{scope:"col"},"Date Paid"),k("th",{scope:"col"},"Files"),k("th",{scope:"col",class:"is-end"},"Actions")])],-1),pa=k("td",null,"Tina",-1),ma=k("td",null,"Bergmann",-1),va=k("td",null,"Sales",-1),fa=k("td",null,"Tina",-1),ha=k("td",null,"Bergmann",-1),_a=k("td",null,"Sales",-1),ya=k("td",null,"Tina",-1),ba=k("td",null,"Bergmann",-1),ga=k("td",null,"Sales",-1),ka=k("td",null,"Bergmann",-1),wa=k("td",null,"Sales",-1),xa={class:"is-end"},ja={class:"is-flex is-justify-content-flex-end"},Ca=k("td",null,"Tina",-1),Va=k("td",null,"Bergmann",-1),Ua=k("td",null,"Sales",-1),Ia=k("td",null,"Tina",-1),Sa=k("td",null,"Bergmann",-1),Ta=k("td",null,"Sales",-1),Fa=k("td",null,"Tina",-1),Da=k("td",null,"Bergmann",-1),Aa=k("td",null,"Sales",-1),Pa=k("td",null,"Bergmann",-1),Ma=k("td",null,"Sales",-1),Oa={class:"is-end"},Ea={class:"is-flex is-justify-content-flex-end"},Ka=k("td",null,"Tina",-1),La=k("td",null,"Bergmann",-1),Ra=k("td",null,"Sales",-1),$a=k("td",null,"Tina",-1),Ba=k("td",null,"Bergmann",-1),Ha=k("td",null,"Sales",-1),Na=k("td",null,"Tina",-1),za=k("td",null,"Bergmann",-1),Ja=k("td",null,"Sales",-1),qa=k("td",null,"Bergmann",-1),Wa=k("td",null,"Sales",-1),Ga={class:"is-end"},Za={class:"is-flex is-justify-content-flex-end"},Qa=k("td",null,"Tina",-1),Xa=k("td",null,"Bergmann",-1),Ya=k("td",null,"Sales",-1),et=k("td",null,"Tina",-1),lt=k("td",null,"Bergmann",-1),at=k("td",null,"Sales",-1),tt=k("td",null,"Tina",-1),st=k("td",null,"Bergmann",-1),it=k("td",null,"Sales",-1),nt=k("td",null,"Bergmann",-1),ot=k("td",null,"Sales",-1),dt={class:"is-end"},ct={class:"is-flex is-justify-content-flex-end"},ut=p({__name:"JobInvoice",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;H();const t=v("");return v(l.activeTab),h((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=ge;return b(),g("table",ua,[ra,k("tbody",null,[k("tr",null,[pa,ma,va,fa,ha,_a,ya,ba,ga,ka,wa,k("td",xa,[k("div",ja,[w(a)])])]),k("tr",null,[Ca,Va,Ua,Ia,Sa,Ta,Fa,Da,Aa,Pa,Ma,k("td",Oa,[k("div",Ea,[w(a)])])]),k("tr",null,[Ka,La,Ra,$a,Ba,Ha,Na,za,Ja,qa,Wa,k("td",Ga,[k("div",Za,[w(a)])])]),k("tr",null,[Qa,Xa,Ya,et,lt,at,tt,st,it,nt,ot,k("td",dt,[k("div",ct,[w(a)])])])])])}}}),rt={class:"table is-striped is-fullwidth"},pt=k("thead",null,[k("tr",null,[k("th",{scope:"col"},"First Name"),k("th",{scope:"col"},"Last Name"),k("th",{scope:"col"},"Position"),k("th",{scope:"col",class:"is-end"},[k("div",{class:"dark-inverted is-flex is-justify-content-flex-end"}," Actions ")])])],-1),mt=k("td",null,"Tina",-1),vt=k("td",null,"Bergmann",-1),ft=k("td",null,"Head of Sales",-1),ht={class:"is-end"},_t={class:"is-flex is-justify-content-flex-end"},yt=k("td",null,"John",-1),bt=k("td",null,"Wistmus",-1),gt=k("td",null,"Senior Executive",-1),kt={class:"is-end"},wt={class:"is-flex is-justify-content-flex-end"},xt=k("td",null,"Sam",-1),jt=k("td",null,"Watson",-1),Ct=k("td",null,"Software Engineer",-1),Vt={class:"is-end"},Ut={class:"is-flex is-justify-content-flex-end"},It=k("td",null,"Jolaine",-1),St=k("td",null,"Joestar",-1),Tt=k("td",null,"HR Manager",-1),Ft={class:"is-end"},Dt={class:"is-flex is-justify-content-flex-end"},At=k("td",null,"Anders",-1),Pt=k("td",null,"Jensen",-1),Mt=k("td",null,"Accountant",-1),Ot={class:"is-end"},Et={class:"is-flex is-justify-content-flex-end"},Kt=p({__name:"JobEstimates",props:{activeTab:{default:"active"}},setup(e){const l=e,a=ke;H();const t=v("");return v(l.activeTab),h((()=>{if(t.value){const e=new RegExp(t.value,"i");return a.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return a})),(e,l)=>{const a=ge;return b(),g("table",rt,[pt,k("tbody",null,[k("tr",null,[mt,vt,ft,k("td",ht,[k("div",_t,[w(a)])])]),k("tr",null,[yt,bt,gt,k("td",kt,[k("div",wt,[w(a)])])]),k("tr",null,[xt,jt,Ct,k("td",Vt,[k("div",Ut,[w(a)])])]),k("tr",null,[It,St,Tt,k("td",Ft,[k("div",Dt,[w(a)])])]),k("tr",null,[At,Pt,Mt,k("td",Ot,[k("div",Et,[w(a)])])])])])}}}),Lt={class:"columns is-multiline"},Rt={class:"column is-12"},$t={class:"toolbar"},Bt={class:"tabs-inner"},Ht={class:"tabs"},Nt=k("span",null,"Estimate",-1),zt=[Nt],Jt=k("span",null,"Budget",-1),qt=[Jt],Wt=k("span",null,"Owner Invoice",-1),Gt=[Wt],Zt=k("li",{class:"tab-naver"},null,-1),Qt={key:0,class:"column is-12"},Xt={key:1,class:"column is-12"},Yt={key:2,class:"column is-12"},es=p({__name:"JobFinance",props:{activeTab:{default:"active"}},setup(e){const l=ke;H();const a=v("estimate"),t=v("");return h((()=>{if(t.value){const e=new RegExp(t.value,"i");return l.filter((l=>l.name.match(e)||l.customer.match(e)||l.industry.match(e)||l.status.match(e)||l.duration.match(e)))}return l})),(e,l)=>{const t=Kt,s=ut;return b(),g("div",Lt,[k("div",Rt,[k("div",$t,[k("div",Bt,[k("div",Ht,[k("ul",null,[k("li",{class:B(["estimate"===T(a)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N($((e=>a.value="estimate"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>a.value="estimate")},zt,32)],2),k("li",{class:B(["budget"===T(a)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[2]||(l[2]=N($((e=>a.value="budget"),["prevent"]),["space"])),onClick:l[3]||(l[3]=e=>a.value="budget")},qt,32)],2),k("li",{class:B(["invoice"===T(a)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[4]||(l[4]=N($((e=>a.value="invoice"),["prevent"]),["space"])),onClick:l[5]||(l[5]=e=>a.value="invoice")},Gt,32)],2),Zt])])])])]),"estimate"===T(a)?(b(),g("div",Qt,[w(t)])):I("",!0),"budget"===T(a)?(b(),g("div",Xt)):I("",!0),"invoice"===T(a)?(b(),g("div",Yt,[w(s)])):I("",!0)])}}}),ls={class:"user-grid-toolbar"},as=k("span",{class:"icon"},[k("i",{class:"fas fa-plus"})],-1),ts=k("span",null,"Progress",-1),ss={class:"user-grid user-grid-v1"},is={class:"columns is-multiline"},ns={class:"grid-item"},os={class:"is-flex"},ds=p({__name:"JobProgressLoader",setup(e){const l=v(""),a=v(0),t=["All","UI/UX Design","Web Development","Software Eng.","Business"];return(e,s)=>{const i=r,n=R("Multiselect"),o=c,d=P,u=M,p=J,m=je,v=xe;return b(),g("div",null,[k("div",ls,[w(i,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>z(l)?l.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,T(l)]])])),_:1}),w(u,null,{default:x((()=>[w(o,{class:"h-hidden-mobile"},{default:x((()=>[w(i,null,{default:x((()=>[w(n,{modelValue:T(a),"onUpdate:modelValue":s[1]||(s[1]=e=>z(a)?a.value=e:null),options:t,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(d,null,{default:x((()=>[as,ts])),_:1})])),_:1})]),k("div",ss,[k("div",is,[(b(),g(D,null,A(20,(e=>k("div",{key:e,class:"column is-3"},[k("div",ns,[w(p,{height:"160px",centered:"",class:"mb-2"}),w(m,{class:"mb-5",width:"80%",lines:3,"last-line-width":"60%"}),k("div",os,[w(v,{size:"small",class:"mx-1"}),w(m,{class:"mb-4",width:"80%",lines:2,"last-line-width":"60%"})])])]))),64))])])])}}}),cs={key:1},us={class:"card-grid-toolbar"},rs={class:"buttons"},ps=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),ms=k("span",null,"Progress",-1),vs={class:"card-grid card-grid-v4"},fs=k("img",{class:"light-image",src:W,alt:""},null,-1),hs=k("img",{class:"dark-image",src:G,alt:""},null,-1),_s=["href","title"],ys=["src","alt"],bs={class:"card-grid-item-content"},gs={class:"dark-inverted"},ks={key:0},ws=k("summary",null,"Read More",-1),xs={key:0,class:"card-grid-item-footer"},js={class:"meta"},Cs={class:"dark-inverted"},Vs=p({__name:"JobProgress",props:{object:{},type:{},taskData:{}},setup(e){const l=e,a=Z(),t=v(""),s=v(!1),i=v(!1),o=v(0),d=["All Posts","Recent Posts","Older Posts","Popular Posts"],u=v([{id:"",uploaded_by_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},file_info:{url:"",name:"",type:"",size:0},progress:0,title:"",description:"",created_at:"",file:"",job:"",task:"",uploaded_by:""}]),p=async()=>{try{s.value=!0;const e=await a.get(`/api/job-progress/by-job/${l.object}/`);u.value=e.data}catch(e){console.log(e)}finally{s.value=!1}};h((()=>u.value.map((e=>({src:e.file_info.url,thumbnail:e.file_info.url,w:1200,h:900,alt:e.file_info.name})))));const m=h((()=>{if(t.value){const e=new RegExp(t.value,"i");return console.log(e),u.value.filter((l=>l.title?.match(e)||l.created_at?.match(e)||l.uploaded_by_info?.username?.match(e)||l.uploaded_by_info?.email?.match(e)||l.uploaded_by_info?.last_name?.match(e)))}return u.value}));return _((()=>{"job"===l.type&&p()})),(e,a)=>{const u=ds,v=r,f=R("Multiselect"),h=c,_=P,y=n,M=ye,O=we;return T(s)?(b(),F(u,{key:0})):(b(),g("div",cs,[k("div",us,[w(v,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>z(t)?t.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,T(t)]])])),_:1}),k("div",rs,[w(h,{class:"h-hidden-mobile"},{default:x((()=>[w(v,null,{default:x((()=>[w(f,{modelValue:T(o),"onUpdate:modelValue":a[1]||(a[1]=e=>z(o)?o.value=e:null),options:d,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(_,{onClick:a[2]||(a[2]=e=>i.value=!T(i)),color:"primary",raised:""},{default:x((()=>[ps,ms])),_:1})])]),k("div",vs,[w(y,{class:B([0!==T(m).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[fs,hs])),_:1},8,["class"]),w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(T(m),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{href:e.file,title:e.title,itemprop:"contentUrl","data-pswp-width":"1200","data-pswp-height":"900",target:"_blank","data-cropped":"true",ref_for:!0,ref:"noreferrer",class:"card-grid-item"},[k("img",{src:e.file,alt:e.title,onErrorOnce:a[3]||(a[3]=e=>T(Ce)(400,300))},null,40,ys),k("div",bs,[k("h3",gs,C(e.title?e.title:"No Title"),1),k("p",null,[j(C(e.description?e.description.slice(0,34):"No Description")+" ",1),e.description.length>44?(b(),g("details",ks,[ws,j(" "+C(e.description?e.description:""),1)])):I("",!0)])]),e.uploaded_by_info?(b(),g("div",xs,[w(M,{picture:e.uploaded_by_info.avatar,size:"small"},null,8,["picture"]),k("div",js,[k("span",Cs,C(e.uploaded_by_info.username??"N/A")+" "+C(e.uploaded_by_info.last_name??""),1),k("span",null,C(T(Y)(e.created_at)),1)])])):I("",!0)],8,_s)])))),128))])),_:1})]),T(i)?(b(),F(O,{key:0,job:l.object,openProgressModal:T(i),"onUpdate:OnSuccess":p,"onClose:ModalHandler":a[4]||(a[4]=e=>i.value=!1)},null,8,["job","openProgressModal"])):I("",!0)]))}}}),Us={class:"columns is-multiline"},Is={class:"column is-12"},Ss={class:"column is-12"},Ts=p({__name:"CreateFolderModal",props:{openCreateFolderModal:{type:Boolean,default:!1},type:{default:""},object:{default:""},parent:{default:""}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=v(!1),s=Z(),i=Q(),n=()=>{l("update:modalHandler",!1)},o=v({id:"",type:a.type,object:a.object,parent:a.parent,title:"",description:"",viewPermissions:[],uploadPermissions:[]}),p=async()=>{try{t.value=!0;const e=ee(o.value,[""]);e.append("value",o.value.title.replaceAll(" ","").toLocaleLowerCase());await s.post("/api/media-folder/",e);i.success("Folder created successfully"),l("update:OnSuccess",null),n()}catch(e){console.log(e)}finally{t.value=!1}};return _((()=>{})),(e,l)=>{const s=u,i=r,m=c,v=d,f=P,h=te;return b(),F(h,{is:"form",open:a.openCreateFolderModal,title:"Folder Info",size:"medium",actions:"right",onSubmit:$(p,["prevent"]),onClose:l[2]||(l[2]=e=>n())},{content:x((()=>[k("div",Us,[k("div",Is,[j(C(a.parent)+" ",1),w(m,{label:"Title *"},{default:x((()=>[w(i,null,{default:x((()=>[w(s,{modelValue:T(o).title,"onUpdate:modelValue":l[0]||(l[0]=e=>T(o).title=e),placeholder:"Folder Title",type:"text",name:"title",required:""},null,8,["modelValue"])])),_:1})])),_:1})]),k("div",Ss,[w(m,{label:"Description (Optional)"},{default:x((()=>[w(i,null,{default:x((()=>[w(v,{modelValue:T(o).description,"onUpdate:modelValue":l[1]||(l[1]=e=>T(o).description=e),rows:"2",placeholder:"Description..."},null,8,["modelValue"])])),_:1})])),_:1})])])])),action:x((()=>[w(f,{loading:T(t),type:"submit",color:"warning",raised:""},{default:x((()=>[j("Create")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),Fs={class:"modal-form columns is-multiline"},Ds={class:"column is-full"},As={class:"field"},Ps=k("label",{class:"label"},"Title ",-1),Ms={class:"control"},Os={class:"field column is-half"},Es={class:"file"},Ks={class:"file-label"},Ls={class:"file-cta"},Rs=k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})],-1),$s={class:"file-label"},Bs=p({__name:"UploadDocumentModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e;v(null);const t=Z(),s=Q(),i=v(!1),n=m(),o=()=>{l("close:ModalHandler",!1)},d=v({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),u=async()=>{try{i.value=!0;const e=ee(d.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${d.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),o()}catch(e){console.log(e)}finally{i.value=!1}},p=v(""),f=e=>{const l=e.target,a=l.files?.[0];l.value="",a&&(d.value.file=a,p.value=a.name)};return _((()=>{})),(e,l)=>{const t=r,s=c,n=P,m=te;return b(),F(m,{is:"form",open:a.openFileModal,title:"Add Attachment",size:"medium",actions:"right",onSubmit:$(u,["prevent"]),onClose:o},{content:x((()=>[k("div",Fs,[k("div",Ds,[k("div",As,[Ps,k("div",Ms,[V(k("input",{type:"text",required:"",class:"input",placeholder:"Enter Title","onUpdate:modelValue":l[0]||(l[0]=e=>T(d).title=e)},null,512),[[U,T(d).title]])])])]),k("div",Os,[w(s,{grouped:""},{default:x((()=>[w(t,null,{default:x((()=>[k("div",Es,[k("label",Ks,[k("input",{onChange:f,class:"file-input",type:"file",name:"resume"},null,32),k("span",Ls,[Rs,k("span",$s,C(T(p)?T(p):"Choose a file…"),1)])])])])),_:1})])),_:1})])])])),action:x((()=>[w(n,{type:"submit",color:"primary",loading:T(i),raised:""},{default:x((()=>[j(" Save")])),_:1},8,["loading"])])),cancel:x((()=>[w(n,{color:"light",onClick:o,raised:""},{default:x((()=>[j("Close ")])),_:1})])),_:1},8,["open","onSubmit"])}}}),Hs={key:0,class:"modal-form"},Ns=["src"],zs=["src"],Js=["src"],qs=["src"],Ws={key:1,class:"modal-form"},Gs=k("h1",{class:"title is-5"},"No media file attached",-1),Zs=[Gs],Qs=p({__name:"DocumentViewer",props:{openDocViewModal:{type:Boolean},document:{},title:{}},emits:["update:closeModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=()=>{l("update:closeModalHandler",!1)},s=e=>`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`;return _((async()=>{console.log("picture",a.document)})),(e,l)=>{const i=Se,n=P,o=te;return b(),F(o,{is:"form",open:a.openDocViewModal,title:a.title?a.title:"Attached Document",size:"xl",actions:"right",onClose:t},{content:x((()=>[a.document?(b(),g("div",Hs,[a.document?.includes(".pdf")?(b(),g("iframe",{key:0,src:`${a.document}#toolbar=0&view=FitH`,style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Ns)):a.document?.toLowerCase().includes(".doc")||a.document?.toLowerCase().includes(".docx")?(b(),g("iframe",{key:1,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,zs)):a.document?.toLowerCase().includes(".xls")||a.document?.toLowerCase().includes(".xlsx")?(b(),g("iframe",{key:2,src:s(a.document),style:{width:"100%",height:"800px",border:"none"}},"\n          Oops! an error has occurred.\n        ",8,Js)):I("",!0),a.document?.includes(".mp4")?(b(),F(i,{key:3,ratio:"4by3",source:a.document,poster:"/video/poster-3.jpg",embed:""},null,8,["source"])):(b(),g("img",{key:4,src:a.document,alt:""},null,8,qs))])):(b(),g("div",Ws,Zs))])),cancel:x((()=>[w(n,{type:"submit",style:{display:"none"},color:"primary",raised:""},{default:x((()=>[j("Close")])),_:1})])),_:1},8,["open","title"])}}}),Xs={class:"tile-grid-item"},Ys={class:"tile-grid-item-inner"},ei=["src"],li={class:"meta"},ai={class:"dark-inverted"},ti=k("i",{"aria-hidden":"true",class:"fas fa-circle icon-separator"},null,-1),si=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-cloud-download"})],-1),ii=k("div",{class:"meta"},[k("span",null,"Download"),k("span",null,"Download this file")],-1),ni=[si,ii],oi=k("hr",{class:"dropdown-divider"},null,-1),di=k("div",{class:"icon"},[k("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),ci=k("div",{class:"meta"},[k("span",null,"Delete"),k("span",null,"Delete this file")],-1),ui=[di,ci],ri=p({__name:"DocumentTile",props:{document:{}},emits:["deleteSelectedFile"],setup(e,{emit:l}){const a=e,t=v(""),s=v(!1),i=v(""),n={pdf:"/images/icons/files/pdf.svg",xls:"/images/icons/files/sheet.svg",doc:"/images/icons/files/doc-2.svg",ppt:"/images/icons/files/ppt.svg",ai:"/images/icons/files/ai.svg",docx:"/images/icons/files/doc-2.svg",docs:"/images/icons/files/doc-2.svg",xlsx:"/images/icons/files/sheet.svg",ai2:"/images/icons/files/ai.svg",xlx:"/images/icons/files/sheet.svg",ods:"/images/icons/files/sheet.svg",png:"/icons/png-icon.png",jpg:"/icons/jpg-50.png",jpeg:"/icons/jpg-50.png",mp4:"/images/icons/files/video.svg"},o=v("");return(e,d)=>{const c=Ie;return b(),g("div",null,[k("div",Xs,[k("div",Ys,[k("img",{onClick:d[0]||(d[0]=e=>{return l=a.document,t.value=l.file_info?.url,o.value=l.file_info?.type,i.value=l.title,void(s.value=!s.value);var l}),src:n[a.document?.file_info?.type]},null,8,ei),k("div",li,[k("span",ai,C(a.document.title??"N/A"),1),k("span",null,[k("span",null,C(a.document?.file_info?.size??0)+" MB",1),ti,k("span",null,"At:"+C(T(ae)(a.document.created_at)),1)])]),w(c,{icon:"feather:more-vertical",spaced:"",right:""},{content:x((()=>[k("a",{role:"menuitem",onClick:d[1]||(d[1]=e=>(async(e,l)=>{try{const a=await fetch(e);if(!a.ok)throw new Error("Network response was not ok");const t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(a){console.error("Download failed:",a)}})(a.document.file,a.document.title)),class:"dropdown-item is-media"},ni),oi,k("a",{role:"menuitem",onClick:d[2]||(d[2]=e=>{return t=a.document.id,void l("deleteSelectedFile",t);var t}),class:"dropdown-item is-media"},ui)])),_:1})])]),T(s)?(b(),F(Qs,{key:0,openDocViewModal:T(s),document:T(t),DocumentType:T(o),title:T(i),"onUpdate:closeModalHandler":d[3]||(d[3]=e=>s.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):I("",!0)])}}}),pi={key:1},mi={key:0},vi={class:"tabs-wrapper"},fi={class:"tabs-inner"},hi={class:"tabs"},_i=k("span",null,"Recent",-1),yi=[_i],bi=["onKeydown","onClick"],gi={key:0},ki={key:0},wi={class:"tile-grid-toolbar"},xi={class:"buttons"},ji=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Ci=k("span",null,"File",-1),Vi=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Ui=k("span",null,"Folder",-1),Ii=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Si=k("span",null,"Folder",-1),Ti={key:1},Fi={class:"tile-grid-toolbar"},Di={class:"buttons"},Ai=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Pi=k("span",null,"File",-1),Mi=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),Oi=k("span",null,"Folder",-1),Ei=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Ki=k("span",null,"Folder",-1),Li={class:"tile-grid tile-grid-v2"},Ri=k("img",{class:"light-image",src:W,alt:""},null,-1),$i=k("img",{class:"dark-image",src:G,alt:""},null,-1),Bi=p({__name:"ObjectDocumentsTiles",props:{objectId:{},docType:{},folderId:{}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=Q(),s=Z(),i=v(""),o=v(""),d=v(0),u=v(""),p=v(!1),m=v(!1),f=v([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),y=["All Files","Recently Updated","My Files","Team Files","Deprecated"],j=()=>{u.value=a.docType,m.value=!m.value};v("");const M=v({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),O=()=>{M.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},E=async()=>{try{const e=await s.delete(`/api/media-folder/${a.folderId}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),M.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},K=async()=>{try{p.value=!0;const e=await s.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);f.value=e.data}catch(e){console.log(e)}finally{p.value=!1}},L=v([]),H=async()=>{try{const e=await s.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);L.value=e.data,i.value="recent"}catch(e){console.log(e)}},J=async e=>{try{const l=await s.delete(`/api/attachment/${e}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a file named <b>${l.data.title}</b>.`,performedOnName:"job"}),t.purple("File Deleted Successfully"),K()}catch(l){console.log(l)}},q=v(""),W=v(!1),G=(e="")=>{q.value=e,W.value=!W.value},X=h((()=>o.value?f.value.filter((e=>e.title.match(new RegExp(o.value,"i"))||e.file_info?.name?.match(new RegExp(o.value,"i"))||e.created_at.match(new RegExp(o.value,"i")))):f.value));return _((()=>{K(),H()})),(e,l)=>{const t=ie,s=R("ObjectDocumentsTiles",!0),v=r,f=R("Multiselect"),h=c,_=P,q=ri,Z=n,Q=Ue,Y=Bs,ee=Ts;return b(),g("div",null,[T(p)?(b(),F(t,{key:0,rows:4})):(b(),g("div",pi,[T(L).length?(b(),g("div",mi,[k("div",vi,[k("div",fi,[k("div",hi,[k("ul",null,[k("li",{class:B(["recent"===T(i)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N($((e=>i.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>i.value="recent")},yi,32)],2),(b(!0),g(D,null,A(T(L),(e=>(b(),g("li",{class:B([T(i)===e.value&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:N($((l=>i.value=e.value),["prevent"]),["space"]),onClick:l=>i.value=e.value},[k("span",null,C(e.title),1)],40,bi)],2)))),256))])])])]),(b(!0),g(D,null,A(T(L),(e=>(b(),g("div",{key:e.id},[T(i)==e.value?(b(),g("div",gi,[w(s,{onDeleteFolderUpdate:l[2]||(l[2]=e=>H()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):I("",!0)])))),128)),"recent"===T(i)?(b(),g("div",ki,[k("div",wi,[w(v,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>z(o)?o.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,T(o)]])])),_:1}),k("div",xi,[w(h,{class:"h-hidden-mobile"},{default:x((()=>[w(v,null,{default:x((()=>[w(f,{modelValue:T(d),"onUpdate:modelValue":l[4]||(l[4]=e=>z(d)?d.value=e:null),options:y,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(_,{onClick:l[5]||(l[5]=e=>j()),color:"primary",raised:""},{default:x((()=>[ji,Ci])),_:1}),w(_,{onClick:G,color:"info",raised:""},{default:x((()=>[Vi,Ui])),_:1}),w(_,{onClick:O,color:"danger",raised:""},{default:x((()=>[Ii,Si])),_:1})])]),w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(T(X),(e=>(b(),g("div",{key:e.id,class:"column is-4"},[w(q,{document:e,onDeleteSelectedFile:J},null,8,["document"])])))),128))])),_:1})])):I("",!0)])):(b(),g("div",Ti,[k("div",Fi,[w(v,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>z(o)?o.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,T(o)]])])),_:1}),k("div",Di,[w(h,{class:"h-hidden-mobile"},{default:x((()=>[w(v,null,{default:x((()=>[w(f,{modelValue:T(d),"onUpdate:modelValue":l[7]||(l[7]=e=>z(d)?d.value=e:null),options:y,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(_,{onClick:l[8]||(l[8]=e=>j()),color:"primary",raised:""},{default:x((()=>[Ai,Pi])),_:1}),w(_,{onClick:G,color:"info",raised:""},{default:x((()=>[Mi,Oi])),_:1}),w(_,{onClick:O,color:"danger",raised:""},{default:x((()=>[Ei,Ki])),_:1})])]),k("div",Li,[0!=T(X).length||T(p)?I("",!0):(b(),F(Z,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[Ri,$i])),_:1})),k("div",null,[w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(T(X),(e=>(b(),g("div",{key:e.id,class:"column is-4"},[w(q,{document:e,onDeleteSelectedFile:J},null,8,["document"])])))),128))])),_:1})])])])),T(M).isSweetAlertOpen?(b(),F(Q,{key:2,isSweetAlertOpen:T(M).isSweetAlertOpen,title:T(M).title,subtitle:T(M).subtitle,btntext:T(M).btntext,onConfirm:E,onCancel:()=>T(M).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):I("",!0),T(m)?(b(),F(Y,{key:3,openFileModal:T(m),object:a.objectId,type:T(u),"onClose:ModalHandler":l[9]||(l[9]=e=>m.value=!1),"onUpdate:OnSuccess":K},null,8,["openFileModal","object","type"])):I("",!0),T(W)?(b(),F(ee,{key:4,"open-create-folder-modal":T(W),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[10]||(l[10]=e=>W.value=!1),"onUpdate:onSuccess":l[11]||(l[11]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):I("",!0)]))])}}}),Hi={class:"modal-form columns is-multiline"},Ni={class:"column is-12 is-flex"},zi={class:"file"},Ji=["onClick"],qi={class:"file-cta"},Wi=k("span",{class:"file-icon"},[k("i",{class:"fas fa-cloud-upload-alt"})],-1),Gi={class:"file-label"},Zi=k("i",{class:"fas fa-camera","aria-hidden":"true"},null,-1),Qi={class:"column is-full"},Xi=k("p",null,"Selected Photos",-1),Yi=k("br",null,null,-1),en=p({__name:"UploadPhotosModal",props:{openFileModal:{type:Boolean},type:{},object:{}},emits:["close:ModalHandler","update:OnSuccess"],setup(e,{emit:l}){const a=e,t=Z(),s=Q(),i=v(!1),n=m(),o=v(""),d=v(null),u=v(!1),p=()=>l("close:ModalHandler",!1),f=v({type:a.type,object:a.object,title:"",uploaded_by:n.user.id,file:null}),h=async()=>{if(f.value.file&&0!==f.value.file.length)try{i.value=!0;const e=ee(f.value,["file"]);await t.post("/api/attachment/",e);le({object_type:"files",object_id:a.object,action:"CREATE",message:`Uploaded new file named <b>${f.value.title}</b>.`,performedOnName:"job"}),s.success("File uploaded successfully!"),l("update:OnSuccess",null),p()}catch(e){console.error(e)}finally{i.value=!1}},_=()=>{u.value=!0,d.value&&(d.value.accept="image/*",d.value.setAttribute("capture","environment"),d.value.removeAttribute("multiple"),d.value.click())},y=()=>{u.value=!1,d.value&&(d.value.accept="image/*",d.value.removeAttribute("capture"),d.value.setAttribute("multiple","true"),d.value.click())},V=v([]),U=async e=>{const l=e.target;if(l.files&&l.files.length>0){const e=Array.from(l.files);f.value.file=e,V.value=e.map((e=>e.name)),o.value=e.length>1?`${e.length} photos selected`:e[0].name,u.value&&(f.value.title=e[0].name,await h())}d.value&&(d.value.value="")};return(e,l)=>{const t=r,s=c,n=Te,u=P,m=te;return b(),F(m,{is:"form",open:a.openFileModal,title:"Add Photos",size:"medium",actions:"right",onSubmit:$(h,["prevent"]),onClose:p},{content:x((()=>[k("div",Hi,[k("input",{ref_key:"fileInput",ref:d,onChange:U,class:"file-input",type:"file",style:{display:"none"}},null,544),k("div",Ni,[w(s,{grouped:""},{default:x((()=>[w(t,null,{default:x((()=>[k("div",zi,[k("label",{class:"file-label",onClick:$(y,["prevent"])},[k("span",qi,[Wi,k("span",Gi,C(T(o)?T(o):"Choose photo(s)"),1)])],8,Ji)])])),_:1})])),_:1}),w(n,{class:"ml-2",onClick:_,size:"small",color:"info",bordered:""},{default:x((()=>[Zi])),_:1})]),k("div",Qi,[Xi,(b(!0),g(D,null,A(T(V),(e=>(b(),g("span",null,[j(C(e)+" ",1),Yi])))),256))])])])),action:x((()=>[w(u,{type:"submit",color:"primary",loading:T(i),raised:""},{default:x((()=>[j(" Save ")])),_:1},8,["loading"])])),cancel:x((()=>[w(u,{color:"light",onClick:p,raised:""},{default:x((()=>[j("Close")])),_:1})])),_:1},8,["open","onSubmit"])}}}),ln={key:1},an={key:0},tn={class:"tabs-wrapper"},sn={class:"tabs-inner"},nn={class:"tabs"},on=k("span",null,"Recent",-1),dn=[on],cn=["onKeydown","onClick"],un={key:0},rn={key:0},pn={class:"tile-grid-toolbar"},mn={class:"buttons"},vn=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),fn=k("span",null,"File",-1),hn=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-folder-plus"})],-1),_n=k("span",null,"Folder",-1),yn=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),bn=k("span",null,"Folder",-1),gn={class:"card-grid card-grid-v4"},kn=["onClick"],wn=["src"],xn={class:"card-grid-item-footer"},jn={class:"meta"},Cn={class:"dark-inverted"},Vn={key:1},Un={class:"card-grid-toolbar"},In={class:"buttons"},Sn=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),Tn=k("span",null,"Photos",-1),Fn=k("span",{class:"icon"},[k("i",{"aria-hidden":"true",class:"fas fa-trash"})],-1),Dn=k("span",null,"Folder",-1),An={class:"card-grid card-grid-v4"},Pn=k("img",{class:"light-image",src:W,alt:""},null,-1),Mn=k("img",{class:"dark-image",src:G,alt:""},null,-1),On=["onClick"],En=["src"],Kn={class:"card-grid-item-footer"},Ln={class:"meta"},Rn={class:"dark-inverted"},$n=p({__name:"ObjectPhotosCard",props:{objectId:{},docType:{},folderId:{},showFolderDeleteBtn:{type:Boolean}},emits:["update:objectId","deleteFolderUpdate"],setup(e,{emit:l}){const a=e,t=Q(),s=Z(),i=v(""),o=v(0),d=v(""),u=v(!1),p=v(!1),m=v(""),f=v(!1),y=v(!1),j=v(!1),M=v([]),O=v("recent"),E=v([{id:"27223081-e97a-4420-91f2-6a08da82d846",uploaded_by_info:{id:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b",username:"APIs",last_name:"Dev",email:"api@dev.com",role:"admin",avatar:null},file_info:{url:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",name:"combined_proposal_95Ac2Fu.pdf",type:"pdf",size:.14},file:"https://ibex-documents.s3.us-east-2.amazonaws.com/public/attachments/combined_proposal_95Ac2Fu.pdf",type:"proposal_formats",object:"751b95b2-9961-45a0-948c-96f85cea6a52",created_at:"2025-02-14T19:42:31.991589Z",title:"proposal",uploaded_by:"709ef38f-b1e3-48f2-8cd9-5a8e3e0c9a1b"}]),K=["All Files","Recently Updated","My Files","Team Files","Deprecated"],L=()=>{d.value=a.docType,p.value=!p.value},H=v(""),J=v(!1),q=(e="")=>{H.value=e,J.value=!J.value};v("");const W=v({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),G=()=>{W.value={title:" Delete this folder?",subtitle:"This action cannot be undone.",isSweetAlertOpen:!0,btntext:"Delete"}},X=async()=>{try{const e=await s.delete(`/api/media-folder/${a.folderId}/`);le({object_type:"files",object_id:a.objectId,action:"DELETE",message:`Deleted a folder named <b>${e.data.name}</b>.`,performedOnName:"job"}),t.purple("Folder Deleted Successfully"),W.value.isSweetAlertOpen=!1,l("deleteFolderUpdate",null)}catch(e){console.log(e)}},ee=async(e="proposal_formats")=>{try{u.value=!0;const e=await s.get(`/api/attachment/by-object/${a.objectId}/?type=${a.docType}`);E.value=e.data}catch(l){console.log(l)}finally{u.value=!1}},ae=async()=>{try{const e=await s.get(`/api/media-folder/?parent=${a.folderId}&object=${a.objectId}`);M.value=e.data,O.value="recent"}catch(e){console.log(e)}},te=e=>{f.value=e.file_info?.url,m.value=e.file_info?.type,y.value=e.title,j.value=!j.value},se=h((()=>i.value?E.value.filter((e=>e.title.match(new RegExp(i.value,"i"))||e.file_info?.name?.match(new RegExp(i.value,"i"))||e.created_at.match(new RegExp(i.value,"i")))):E.value));return _((()=>{ee(),ae()})),(e,l)=>{const t=ie,s=R("ObjectPhotosCard",!0),v=r,h=R("Multiselect"),_=c,E=P,H=ye,Z=n,Q=Ue,le=en,ne=Qs,oe=Ts;return b(),g("div",null,[T(u)?(b(),F(t,{key:0,rows:4})):(b(),g("div",ln,[T(M).length?(b(),g("div",an,[k("div",tn,[k("div",sn,[k("div",nn,[k("ul",null,[k("li",{class:B(["recent"===T(O)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:l[0]||(l[0]=N($((e=>O.value="recent"),["prevent"]),["space"])),onClick:l[1]||(l[1]=e=>O.value="recent")},dn,32)],2),(b(!0),g(D,null,A(T(M),(e=>(b(),g("li",{class:B([T(O)===e.value&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:N($((l=>O.value=e.value),["prevent"]),["space"]),onClick:l=>O.value=e.value},[k("span",null,C(e.title),1)],40,cn)],2)))),256))])])])]),(b(!0),g(D,null,A(T(M),(e=>(b(),g("div",{key:e.id},[T(O)==e.value?(b(),g("div",un,[w(s,{onDeleteFolderUpdate:l[2]||(l[2]=e=>ae()),"doc-type":e.value,"object-id":a.objectId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):I("",!0)])))),128)),"recent"===T(O)?(b(),g("div",rn,[k("div",pn,[w(v,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>z(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,T(i)]])])),_:1}),k("div",mn,[w(_,{class:"h-hidden-mobile"},{default:x((()=>[w(v,null,{default:x((()=>[w(h,{modelValue:T(o),"onUpdate:modelValue":l[4]||(l[4]=e=>z(o)?o.value=e:null),options:K,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(E,{onClick:l[5]||(l[5]=e=>L()),color:"primary",raised:""},{default:x((()=>[vn,fn])),_:1}),w(E,{onClick:q,color:"info",raised:""},{default:x((()=>[hn,_n])),_:1}),w(E,{onClick:G,color:"danger",raised:""},{default:x((()=>[yn,bn])),_:1})])]),k("div",gn,[w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(T(se),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{onClick:l=>te(e),class:"card-grid-item"},[k("img",{src:e.file,alt:"",onErrorOnce:l[6]||(l[6]=e=>T(Ce)(400,300))},null,40,wn),k("div",xn,[w(H,{picture:e.uploaded_by_info?.avatar,size:"small"},null,8,["picture"]),k("div",jn,[k("span",Cn,C(e.uploaded_by_info.username),1),k("span",null,C(T(Y)(e.created_at)),1)])])],8,kn)])))),128))])),_:1})])])):I("",!0)])):(b(),g("div",Vn,[k("div",Un,[w(v,{icon:"feather:search"},{default:x((()=>[V(k("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>z(i)?i.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[U,T(i)]])])),_:1}),k("div",In,[w(_,{class:"h-hidden-mobile"},{default:x((()=>[w(v,null,{default:x((()=>[w(h,{modelValue:T(o),"onUpdate:modelValue":l[8]||(l[8]=e=>z(o)?o.value=e:null),options:K,"max-height":145,placeholder:"Select an option"},null,8,["modelValue"])])),_:1})])),_:1}),w(E,{onClick:l[9]||(l[9]=e=>L()),color:"primary",raised:""},{default:x((()=>[Sn,Tn])),_:1}),a.showFolderDeleteBtn?(b(),F(E,{key:0,onClick:G,color:"danger",raised:""},{default:x((()=>[Fn,Dn])),_:1})):I("",!0)])]),k("div",An,[0!=T(se).length||T(u)?I("",!0):(b(),F(Z,{key:0,title:"We couldn't find any matching file of this directory.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[Pn,Mn])),_:1})),k("div",null,[w(S,{name:"list",tag:"div",class:"columns is-multiline"},{default:x((()=>[(b(!0),g(D,null,A(T(se),(e=>(b(),g("div",{key:e.id,class:"column is-3"},[k("a",{onClick:l=>te(e),class:"card-grid-item"},[k("img",{src:e.file,alt:"",onErrorOnce:l[10]||(l[10]=e=>T(Ce)(400,300))},null,40,En),k("div",Kn,[w(H,{picture:e.uploaded_by_info?.avatar,size:"small"},null,8,["picture"]),k("div",Ln,[k("span",Rn,C(e.uploaded_by_info.username),1),k("span",null,C(T(Y)(e.created_at)),1)])])],8,On)])))),128))])),_:1})])])])),T(W).isSweetAlertOpen?(b(),F(Q,{key:2,isSweetAlertOpen:T(W).isSweetAlertOpen,title:T(W).title,subtitle:T(W).subtitle,btntext:T(W).btntext,onConfirm:X,onCancel:()=>T(W).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):I("",!0),T(p)?(b(),F(le,{key:3,openFileModal:T(p),object:a.objectId,type:T(d),"onClose:ModalHandler":l[11]||(l[11]=e=>p.value=!1),"onUpdate:OnSuccess":ee},null,8,["openFileModal","object","type"])):I("",!0),T(j)?(b(),F(ne,{key:4,openDocViewModal:T(j),document:T(f),DocumentType:T(m),title:T(y),"onUpdate:closeModalHandler":l[12]||(l[12]=e=>j.value=!1)},null,8,["openDocViewModal","document","DocumentType","title"])):I("",!0),T(J)?(b(),F(oe,{key:5,"open-create-folder-modal":T(J),type:a.docType,object:a.objectId,parent:a.folderId,"onUpdate:modalHandler":l[13]||(l[13]=e=>J.value=!1),"onUpdate:onSuccess":l[14]||(l[14]=()=>{})},null,8,["open-create-folder-modal","type","object","parent"])):I("",!0)]))])}}}),Bn={class:"tabs-wrapper"},Hn={class:"tabs-inner"},Nn={class:"tabs is-boxed"},zn=[k("span",null,"Documents",-1)],Jn=[k("span",null,"Photos",-1)],qn=[k("span",null,"Videos",-1)],Wn=k("li",{class:"tab-naver"},null,-1),Gn={key:0},Zn={class:"tabs-wrapper"},Qn={class:"tabs-inner"},Xn={class:"tabs"},Yn=[k("span",null,"Contracts",-1)],eo=[k("span",null,"Customer Estimates",-1)],lo=[k("span",null,"Job Scope",-1)],ao=[k("span",null,"Asbestos & Lead Report",-1)],to=[k("span",null,"Permits",-1)],so=[k("span",null,"Bids & Material",-1)],io=[k("span",null,"Miscellaneous",-1)],no=[k("span",null,"Uploaded Files",-1)],oo=[k("span",null,"Calculations",-1)],co=["onKeydown","onClick"],uo={class:"is-cus-active"},ro=[k("span",null,[k("i",{class:"fas fa-folder-plus"}),j(" Folder")],-1)],po=k("li",{class:"tab-naver"},null,-1),mo={class:"tile-grid tile-grid-v2"},vo=k("img",{class:"light-image",src:W,alt:""},null,-1),fo=k("img",{class:"dark-image",src:G,alt:""},null,-1),ho={key:0},_o={key:1},yo={key:2},bo={key:3},go={key:4},ko={key:5},wo={key:6},xo={key:7},jo={key:8},Co={key:9},Vo={key:0},Uo={key:1},Io={class:"tabs-wrapper"},So={class:"tabs-inner"},To={class:"tabs"},Fo=[k("span",null,"Site Visit Photos",-1)],Do=[k("span",null,"Inspiration Photos",-1)],Ao=[k("span",null,"Trade Photos",-1)],Po=[k("span",null,"Design Approval Photos",-1)],Mo=["onKeydown","onClick"],Oo={class:"is-cus-active"},Eo=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],Ko=k("li",{class:"tab-naver"},null,-1),Lo={class:"tile-grid tile-grid-v2"},Ro=k("img",{class:"light-image",src:W,alt:""},null,-1),$o=k("img",{class:"dark-image",src:G,alt:""},null,-1),Bo={key:0},Ho={key:1},No={key:2},zo={key:3},Jo={key:0},qo={key:2},Wo={class:"tabs-wrapper"},Go={class:"tabs-inner"},Zo={class:"tabs"},Qo=[k("span",null,"Job videos",-1)],Xo=[k("span",null,"Other videos",-1)],Yo=["onKeydown","onClick"],ed={class:"is-cus-active"},ld=[k("span",null,[k("i",{class:"fas fa-plus"}),j(" Folder")],-1)],ad=k("li",{class:"tab-naver"},null,-1),td={class:"tile-grid tile-grid-v2"},sd=k("img",{class:"light-image",src:W,alt:""},null,-1),id=k("img",{class:"dark-image",src:G,alt:""},null,-1),nd={key:0},od={key:1},dd={key:0},cd=p({__name:"JobDocuments",props:{leadId:{},uploaded_files:{}},emits:["getProjectInfo","updateOnSuccess"],setup(e,{emit:a}){const t=e;Q();const s=Z(),i=v("");v(0);const o=v(""),d=v("contracts"),c=v(!1),u=v([]),r=v("documents"),p=v("site_visits"),m=v("job_videos"),f=h((()=>i.value?Fe.filter((e=>e.name.match(new RegExp(i.value,"i"))||e.size.match(new RegExp(i.value,"i")))):Fe)),y=()=>{a("getProjectInfo",null)},j=async(e="contracts")=>{try{d.value=e;const l=await s.get(`/api/attachment/by-object/${t.leadId}/?type=${e}`);u.value=l.data}catch(l){console.log(l)}},V=v(""),U=v(!1),S=v([]),P=v([]),M=v([]),O=(e="")=>{V.value=e,U.value=!U.value},E=async(e="")=>{try{const l=await s.get(`/api/media-folder/?object=${t.leadId}&type=${e}`);"documents"===e?S.value=l.data:"photos"===e?P.value=l.data:"videos"===e&&(M.value=l.data)}catch(l){console.log(l)}},K=(e="documents")=>{"documents"===e?E("documents"):"photos"===e?E("photos"):"videos"===e&&E("videos")};return _((()=>{j(),K("documents")})),(e,a)=>{const s=n,i=Bi,u=l,v=Ol,h=$n,_=Bs,E=Ts;return b(),g("div",null,[k("div",Bn,[k("div",Hn,[k("div",Nn,[k("ul",null,[k("li",{class:B(["documents"===T(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[0]||(a[0]=N($((e=>r.value="documents"),["prevent"]),["space"])),onClick:a[1]||(a[1]=e=>{r.value="documents",K("documents")})},zn,32)],2),k("li",{class:B(["photos"===T(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[2]||(a[2]=N($((e=>r.value="photos"),["prevent"]),["space"])),onClick:a[3]||(a[3]=e=>{r.value="photos",K("photos")})},Jn,32)],2),k("li",{class:B(["videos"===T(r)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[4]||(a[4]=N($((e=>r.value="videos"),["prevent"]),["space"])),onClick:a[5]||(a[5]=e=>{r.value="videos",K("videos")})},qn,32)],2),Wn])])])]),"documents"==T(r)?(b(),g("div",Gn,[k("div",Zn,[k("div",Qn,[k("div",Xn,[k("ul",null,[k("li",{class:B(["contracts"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[6]||(a[6]=N($((e=>j("contracts")),["prevent"]),["space"])),onClick:a[7]||(a[7]=e=>j("contracts"))},Yn,32)],2),k("li",{class:B(["estimates"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[8]||(a[8]=N($((e=>j("estimates")),["prevent"]),["space"])),onClick:a[9]||(a[9]=e=>j("estimates"))},eo,32)],2),k("li",{class:B(["job_scope"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[10]||(a[10]=N($((e=>d.value="job_scope"),["prevent"]),["space"])),onClick:a[11]||(a[11]=e=>d.value="job_scope")},lo,32)],2),k("li",{class:B(["asbestos"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[12]||(a[12]=N($((e=>d.value="asbestos"),["prevent"]),["space"])),onClick:a[13]||(a[13]=e=>d.value="asbestos")},ao,32)],2),k("li",{class:B(["permits"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[14]||(a[14]=N($((e=>d.value="permits"),["prevent"]),["space"])),onClick:a[15]||(a[15]=e=>d.value="permits")},to,32)],2),k("li",{class:B(["material"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[16]||(a[16]=N($((e=>d.value="material"),["prevent"]),["space"])),onClick:a[17]||(a[17]=e=>d.value="material")},so,32)],2),k("li",{class:B(["miscellaneous"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[18]||(a[18]=N($((e=>d.value="miscellaneous"),["prevent"]),["space"])),onClick:a[19]||(a[19]=e=>d.value="miscellaneous")},io,32)],2),k("li",{class:B(["files"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[20]||(a[20]=N($((e=>j("files")),["prevent"]),["space"])),onClick:a[21]||(a[21]=e=>j("files"))},no,32)],2),k("li",{class:B(["calculations"===T(d)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[22]||(a[22]=N($((e=>j("calculations")),["prevent"]),["space"])),onClick:a[23]||(a[23]=e=>j("calculations"))},oo,32)],2),(b(!0),g(D,null,A(T(S),(e=>(b(),g("li",{key:e.id,class:B([T(d)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:N($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>j(e.title)},[k("span",null,C(e.title),1)],40,co)],2)))),128)),k("li",uo,[k("a",{tabindex:"0",role:"button",onKeydown:a[24]||(a[24]=N($((e=>O("documents")),["prevent"]),["space"])),onClick:a[25]||(a[25]=e=>O("documents"))},ro,32)]),po])])])]),k("div",mo,[w(s,{class:B([0!==T(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[vo,fo])),_:1},8,["class"]),"contracts"==T(d)?(b(),g("div",ho,[w(i,{onDeleteFolderUpdate:a[26]||(a[26]=e=>K("documents")),"doc-type":"contracts","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"estimates"==T(d)?(b(),g("div",_o,[w(i,{onDeleteFolderUpdate:a[27]||(a[27]=e=>K("documents")),"doc-type":"estimates","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"proposal_formats"==T(d)?(b(),g("div",yo,[w(i,{onDeleteFolderUpdate:a[28]||(a[28]=e=>K("documents")),"doc-type":"proposal_formats","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"job_scope"==T(d)?(b(),g("div",bo,[w(i,{onDeleteFolderUpdate:a[29]||(a[29]=e=>K("documents")),"doc-type":"job_scope","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"asbestos"==T(d)?(b(),g("div",go,[w(i,{onDeleteFolderUpdate:a[30]||(a[30]=e=>K("documents")),"doc-type":"asbestos","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"permits"==T(d)?(b(),g("div",ko,[w(i,{onDeleteFolderUpdate:a[31]||(a[31]=e=>K("documents")),"doc-type":"permits","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"material"==T(d)?(b(),g("div",wo,[w(i,{onDeleteFolderUpdate:a[32]||(a[32]=e=>K("documents")),"doc-type":"material","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"miscellaneous"==T(d)?(b(),g("div",xo,[w(i,{onDeleteFolderUpdate:a[33]||(a[33]=e=>K("documents")),"doc-type":"miscellaneous","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"files"==T(d)?(b(),g("div",jo,[w(u,{projectId:t.leadId,files:t.uploaded_files,"onUpdate:onUploadFile":y},null,8,["projectId","files"])])):I("",!0),"calculations"==T(d)?(b(),g("div",Co,[w(v,{"object-id":t.leadId},null,8,["object-id"])])):I("",!0),(b(!0),g(D,null,A(T(S),(e=>(b(),g("div",{key:e.id},[T(d)==e.title?(b(),g("div",Vo,[w(i,{onDeleteFolderUpdate:a[34]||(a[34]=e=>K("documents")),"doc-type":e.title,"object-id":t.leadId,folderId:e.id},null,8,["doc-type","object-id","folderId"])])):I("",!0)])))),128))])])):I("",!0),"photos"==T(r)?(b(),g("div",Uo,[k("div",Io,[k("div",So,[k("div",To,[k("ul",null,[k("li",{class:B(["site_visits"===T(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[35]||(a[35]=N($((e=>j("site_visits")),["prevent"]),["space"])),onClick:a[36]||(a[36]=e=>{j("site_visits"),p.value="site_visits"})},Fo,32)],2),k("li",{class:B(["inspiration_photos"===T(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[37]||(a[37]=N($((e=>j("inspiration_photos")),["prevent"]),["space"])),onClick:a[38]||(a[38]=e=>{j("inspiration_photos"),p.value="inspiration_photos"})},Do,32)],2),k("li",{class:B(["trade_photos"===T(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[39]||(a[39]=N($((e=>j("trade_photos")),["prevent"]),["space"])),onClick:a[40]||(a[40]=e=>{j("trade_photos"),p.value="trade_photos"})},Ao,32)],2),k("li",{class:B(["design_approval"===T(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[41]||(a[41]=N($((e=>j("design_approval")),["prevent"]),["space"])),onClick:a[42]||(a[42]=e=>{j("design_approval"),p.value="design_approval"})},Po,32)],2),(b(!0),g(D,null,A(T(P),(e=>(b(),g("li",{key:e.id,class:B([T(p)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:N($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),p.value=e.title}},[k("span",null,C(e.title),1)],40,Mo)],2)))),128)),k("li",Oo,[k("a",{tabindex:"0",role:"button",onKeydown:a[43]||(a[43]=N($((e=>O("photos")),["prevent"]),["space"])),onClick:a[44]||(a[44]=e=>O("photos"))},Eo,32)]),Ko])])])]),k("div",Lo,[w(s,{class:B([0!==T(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[Ro,$o])),_:1},8,["class"]),"site_visits"==T(p)?(b(),g("div",Bo,[w(h,{onDeleteFolderUpdate:a[45]||(a[45]=e=>K("photos")),"doc-type":"site_visits","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"inspiration_photos"==T(p)?(b(),g("div",Ho,[w(h,{onDeleteFolderUpdate:a[46]||(a[46]=e=>K("photos")),"doc-type":"inspiration_photos","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"trade_photos"==T(p)?(b(),g("div",No,[w(h,{onDeleteFolderUpdate:a[47]||(a[47]=e=>K("photos")),"doc-type":"trade_photos","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"design_approval"==T(p)?(b(),g("div",zo,[w(h,{onDeleteFolderUpdate:a[48]||(a[48]=e=>K("photos")),"doc-type":"design_approval","object-id":t.leadId},null,8,["object-id"])])):I("",!0),(b(!0),g(D,null,A(T(P),(e=>(b(),g("div",{key:e.id},[T(p)==e.title?(b(),g("div",Jo,[w(h,{onDeleteFolderUpdate:a[49]||(a[49]=e=>K("photos")),"doc-type":e.title,"object-id":t.leadId,folderId:e.id,showFolderDeleteBtn:!0},null,8,["doc-type","object-id","folderId"])])):I("",!0)])))),128))])])):I("",!0),"videos"==T(r)?(b(),g("div",qo,[k("div",Wo,[k("div",Go,[k("div",Zo,[k("ul",null,[k("li",{class:B(["job_videos"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[50]||(a[50]=N($((e=>j("job_videos")),["prevent"]),["space"])),onClick:a[51]||(a[51]=e=>{m.value="job_videos",j("job_videos")})},Qo,32)],2),k("li",{class:B(["other_videos"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:a[52]||(a[52]=N($((e=>j("other_videos")),["prevent"]),["space"])),onClick:a[53]||(a[53]=e=>{m.value="other_videos",j("other_videos")})},Xo,32)],2),(b(!0),g(D,null,A(T(M),(e=>(b(),g("li",{key:e.id,class:B([T(m)===e.title&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:N($((l=>j(e.title)),["prevent"]),["space"]),onClick:l=>{j(e.title),m.value=e.title}},[k("span",null,C(e.title),1)],40,Yo)],2)))),128)),k("li",ed,[k("a",{tabindex:"0",role:"button",onKeydown:a[54]||(a[54]=N($((e=>O("videos")),["prevent"]),["space"])),onClick:a[55]||(a[55]=e=>O("videos"))},ld,32)]),ad])])])]),k("div",td,[w(s,{class:B([0!==T(f).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:x((()=>[sd,id])),_:1},8,["class"]),"job_videos"==T(m)?(b(),g("div",nd,[w(i,{onDeleteFolderUpdate:a[56]||(a[56]=e=>K("videos")),"doc-type":"job_videos","object-id":t.leadId},null,8,["object-id"])])):I("",!0),"other_videos"==T(m)?(b(),g("div",od,[w(i,{"doc-type":"other_videos","object-id":t.leadId,onDeleteFolderUpdate:a[57]||(a[57]=e=>K("videos"))},null,8,["object-id"])])):I("",!0),(b(!0),g(D,null,A(T(M),(e=>(b(),g("div",{key:e.id},[T(m)==e.title?(b(),g("div",dd,[w(i,{"doc-type":e.value,"object-id":t.leadId,folderId:e.id,onDeleteFolderUpdate:a[58]||(a[58]=e=>K("videos"))},null,8,["doc-type","object-id","folderId"])])):I("",!0)])))),128))])])):I("",!0),T(c)?(b(),F(_,{key:3,openFileModal:T(c),object:t.leadId,type:T(o),"onClose:ModalHandler":a[59]||(a[59]=e=>c.value=!1),"onUpdate:OnSuccess":j},null,8,["openFileModal","object","type"])):I("",!0),T(U)?(b(),F(E,{key:4,"open-create-folder-modal":T(U),type:T(V),object:t.leadId,"onUpdate:modalHandler":a[60]||(a[60]=e=>U.value=!1),"onUpdate:onSuccess":a[61]||(a[61]=e=>K(T(V)))},null,8,["open-create-folder-modal","type","object"])):I("",!0)])}}}),ud={class:"business-dashboard hr-dashboard"},rd={class:"columns is-multiline"},pd={class:"column is-12"},md={class:"columns is-multiline"},vd={class:"column is-12"},fd={class:"block-header"},hd={class:"left"},_d={class:"current-user"},yd={class:"center"},bd=k("h4",{class:"block-heading"},"Current State",-1),gd=k("h4",{class:"block-heading"},"Address",-1),kd={class:"block-text"},wd=k("br",null,null,-1),xd=k("br",null,null,-1),jd={class:"right"},Cd=k("h4",{class:"block-heading"},"Managers",-1),Vd={class:"candidates"},Ud=k("button",null,[k("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:plus"})],-1),Id={class:"column is-12"},Sd={class:"tabs-wrapper"},Td={class:"tabs-inner"},Fd={class:"tabs is-toggle"},Dd=[k("span",null,"Job Management",-1)],Ad=[k("span",null,"Documents/Files",-1)],Pd=[k("span",null,"Proposals",-1)],Md=[k("span",null,"Tasks",-1)],Od=[k("span",null,"Activities",-1)],Ed=[k("span",null,"Job progress",-1)],Kd=[k("span",null,"Calculations",-1)],Ld=[k("span",null,"Finance",-1)],Rd=[k("span",null,"Report",-1)],$d=k("li",{class:"tab-naver"},null,-1),Bd={key:0,class:"column is-12"},Hd={class:"columns is-multiline"},Nd={class:"column is-8"},zd={class:"columns is-multiline"},Jd={class:"column is-12"},qd={class:"feed-settings"},Wd=k("h3",{class:"dark-inverted"},"Job feeds",-1),Gd={class:"buttons"},Zd={class:"column is-4"},Qd={class:"side-text"},Xd=k("h3",{class:"dark-inverted"},"Job Description",-1),Yd=["innerHTML"],ec=k("a",{class:"action-link",tabindex:"0"},"Read More",-1),lc={class:"column is-7 is-offset-1"},ac={class:"incoming"},tc=k("i",{"aria-hidden":"true",class:"lnil lnil-envelope-alt"},null,-1),sc=k("div",null,[k("span",{class:"item-name dark-inverted"},"Messages"),k("span",{class:"item-meta"},[k("span",null,"Inbox messages")])],-1),ic=k("i",{"aria-hidden":"true",class:"lnil lnil-checkmark-circle"},null,-1),nc=k("div",null,[k("span",{class:"item-name dark-inverted"},"Tasks"),k("span",{class:"item-meta"},[k("span",null,"Pending tasks")])],-1),oc={key:3,tabindex:"0",class:"action-link is-pushed-mobile"},dc={key:4,class:"light-text"},cc={class:"column is-12"},uc={class:"recent-rookies"},rc=k("div",{class:"recent-rookies-header"},[k("h3",{class:"dark-inverted"},"Internal Users"),k("a",{class:"action-link",tabindex:"0"},"View All")],-1),pc={class:"columns is-multiline user-grid user-grid-v4"},mc={class:"column is-4"},vc={class:"grid-item"},fc={class:"dark-inverted"},hc={class:"capitalized"},_c={class:"button-wrap has-text-centered"},yc={class:"column is-4"},bc={key:0,class:"card mb-4",id:"workerProfileMap",style:{height:"300px",width:"100%","border-radius":"10px","z-index":"9"}},gc=k("div",{class:"widget-toolbar"},[k("div",{class:"left"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-left"})])]),k("div",{class:"center"},[k("h3",null,"October 2020")]),k("div",{class:"right"},[k("a",{class:"action-icon"},[k("i",{"aria-hidden":"true",class:"iconify rtl-hidden","data-icon":"feather:chevron-right"}),k("i",{"aria-hidden":"true",class:"iconify ltr-hidden","data-icon":"feather:chevron-left"})])])],-1),kc=k("table",{class:"calendar"},[k("thead",null,[k("tr",null,[k("th",{scope:"col"},"Mon"),k("th",{scope:"col"},"Tue"),k("th",{scope:"col"},"Wed"),k("th",{scope:"col"},"Thu"),k("th",{scope:"col"},"Fri"),k("th",{scope:"col"},"Sat"),k("th",{scope:"col"},"Sun")])]),k("tbody",null,[k("tr",null,[k("td",{class:"prev-month"},"29"),k("td",{class:"prev-month"},"30"),k("td",{class:"prev-month"},"31"),k("td",null,"1"),k("td",null,"2"),k("td",null,"3"),k("td",null,"4")]),k("tr",null,[k("td",null,"5"),k("td",null,"6"),k("td",null,"7"),k("td",null,"8"),k("td",null,"9"),k("td",null,"10"),k("td",null,"11")]),k("tr",null,[k("td",null,"12"),k("td",null,"13"),k("td",null,"14"),k("td",null,"15"),k("td",null,"16"),k("td",null,"17"),k("td",{class:"current-day"},"18")]),k("tr",null,[k("td",null,"19"),k("td",null,"20"),k("td",null,"21"),k("td",null,"22"),k("td",null,"23"),k("td",null,"24"),k("td",null,"25")]),k("tr",null,[k("td",null,"26"),k("td",null,"27"),k("td",null,"28"),k("td",null,"29"),k("td",null,"30"),k("td",null,"31"),k("td",{class:"next-month"},"1")])])],-1),wc={key:1,class:"column is-12"},xc={key:2,class:"column is-12"},jc={class:"tabs-inner"},Cc={class:"tabs is-boxed"},Vc=[k("span",null,"Proposals",-1)],Uc=[k("span",null,"Grouped Proposals",-1)],Ic={key:0},Sc={key:1},Tc={key:3,class:"column is-12"},Fc={key:4,class:"column is-12"},Dc={key:5,class:"column is-12"},Ac={key:6,class:"column is-12"},Pc={key:7,class:"column is-12"},Mc={key:8,class:"column is-12"},Oc={key:9,class:"column is-12"},Ec={class:"tabs-inner"},Kc={class:"tabs is-boxed"},Lc=[k("span",null,"Excel Sheets",-1)],Rc=[k("span",null,"Custom Calculations",-1)],$c={key:0},Bc={key:1},Hc={key:10},Nc=p({__name:"JobDetails",setup(t){const i=q();H();const n=Z(),o=Q(),d=v(!1),c=v(""),u=v(!1);v(null),v("Untitled"),v({data:Array.from({length:80},(()=>Array(50).fill(""))),rowHeaders:!0,colHeaders:!0,contextMenu:!0,width:"100%",height:"500px"});const r=v({id:"",sales_people_info:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:null,email:"",role:"",avatar:""},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],clientInfo:{id:"",username:"",last_name:null,email:"",role:"",avatar:null},created_by_info:{id:"",username:"",last_name:null,email:"",role:"",avatar:""},managers_list:[{id:"",username:"",last_name:null,email:"",role:"",avatar:null},{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],uploaded_files:[],title:"",address:"",current_state:"",city:"",state:"",status:"",zip_code:"",confidence:"",sale_date:"",tags:[],estimated_from:"",estimated_to:"",sources:"",project_type:"",notes:"",attach_mail:"",latitude:null,longitude:null,created_at:"",updated_at:"",created_by:"",client:"",contractor:null,sales_people:[],managers:[]}),p=v("excel"),m=v("management"),f=v("childProposals"),h=[{type:"messages",count:5,status:"new"},{type:"tasks",count:3,status:"pending"}],U={type:{label:"Type",grow:"lg",media:!0},count:{label:"Count",align:"center"},status:"Status",actions:{label:"Actions",align:"end"}};let S;const O=async()=>{try{d.value=!0;const e=await n.get(`/api/project/${i.params.id}/detail/`);r.value=e.data,e.data.latitude&&((e,l)=>{if(S&&S.remove(),S=L.map("workerProfileMap").setView([51.4497984,-.3464489],24),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(S),e&&l){const a=[e,l];L.marker(a).addTo(S),S.setView(a,34)}else console.log("Invalid latitude or longitude for supplier")})(e.data.latitude??39.63,e.data.longitude??-105.3199999)}catch(e){console.error(e)}finally{d.value=!1}},E=v([]),K=v(!1),R=async()=>{try{K.value=!0;await n.patch(`/api/project/${i.params.id}/`,{status:"completed"});o.success("Jobs Completed Successfully."),O()}catch(Error){console.log(Error)}finally{K.value=!1}};return _((()=>{O()})),(t,o)=>{const d=ye,v=Me,_=P,S=M,K=Te,L=s,H=Pe,z=Ae,J=De,q=cd,W=Bi,G=Ve,Z=Vs,Q=es,X=ca,Y=Wl,ee=a,le=Ol,ae=vl,te=l,se=e,ie=y("tooltip");return b(),g("div",ud,[k("div",rd,[k("div",pd,[k("div",md,[k("div",vd,[k("div",fd,[k("div",hd,[k("div",_d,[w(d,{size:"large",picture:T(r).image,squared:""},null,8,["picture"]),k("h3",null,[j(C(T(r).title?T(r).title:"No Title")+" ",1),k("sup",null,[w(v,{rounded:"",size:"tiny",color:"info"},{default:x((()=>[j(C(T(r).status),1)])),_:1})])])])]),k("div",yd,[bd,k("p",null,C("lead"==T(r).current_state?"Is Lead":"Is Job"),1),gd,k("p",kd,[j(C(T(r).address?T(r).address:"No Address Added")+" ",1),wd,j(" "+C(T(r).city?T(r).city:"No City Added")+", "+C(T(r).state?T(r).state:"No State Added")+" ",1),xd,j(" "+C(T(r).zip_code?T(r).zip_code:"No Zip Code Added"),1)])]),k("div",jd,[Cd,k("div",Vd,[(b(!0),g(D,null,A(T(r).managers_list,(e=>V((b(),F(d,{picture:e.avatar,initials:e.username.slice(0,2),squared:"",color:"warning"},null,8,["picture","initials"])),[[ie,`${e.username??"N/A"} ${e.last_name??""}`,void 0,{info:!0,rounded:!0}]]))),256)),Ud]),w(S,null,{default:x((()=>[w(_,{class:"mt-1",onClick:o[0]||(o[0]=e=>{return l=T(i).params.id,c.value=l,void(u.value=!0);var l}),bold:"",color:"warning",light:"",outlined:"","dark-outlined":"",icon:"fas fa-pen"},{default:x((()=>[j(" Update "+C("lead"==T(r).current_state?"lead":"job"),1)])),_:1}),"lead"!=T(r).current_state?(b(),F(_,{key:0,class:"mt-1",onClick:R,bold:"",color:"info",outlined:"",light:"","dark-outlined":"",icon:"fas fa-check"},{default:x((()=>[j(" Mark As Done ")])),_:1})):I("",!0)])),_:1})])])]),k("div",Id,[k("div",Sd,[k("div",Td,[k("div",Fd,[k("ul",null,[k("li",{class:B(["management"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[1]||(o[1]=N($((e=>m.value="management"),["prevent"]),["space"])),onClick:o[2]||(o[2]=e=>m.value="management")},Dd,32)],2),k("li",{class:B(["documents"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[3]||(o[3]=N($((e=>m.value="documents"),["prevent"]),["space"])),onClick:o[4]||(o[4]=e=>m.value="documents")},Ad,32)],2),k("li",{class:B(["proposals"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[5]||(o[5]=N($((e=>m.value="proposals"),["prevent"]),["space"])),onClick:o[6]||(o[6]=e=>m.value="proposals")},Pd,32)],2),k("li",{class:B(["tasks"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[7]||(o[7]=N($((e=>m.value="tasks"),["prevent"]),["space"])),onClick:o[8]||(o[8]=e=>m.value="tasks")},Md,32)],2),k("li",{class:B(["activities"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[9]||(o[9]=N($((e=>m.value="activities"),["prevent"]),["space"])),onClick:o[10]||(o[10]=e=>m.value="activities")},Od,32)],2),k("li",{class:B(["progress"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[11]||(o[11]=N($((e=>m.value="progress"),["prevent"]),["space"])),onClick:o[12]||(o[12]=e=>m.value="progress")},Ed,32)],2),k("li",{class:B(["calculations"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[13]||(o[13]=N($((e=>m.value="calculations"),["prevent"]),["space"])),onClick:o[14]||(o[14]=e=>m.value="calculations")},Kd,32)],2),k("li",{class:B(["finance"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[15]||(o[15]=N($((e=>m.value="finance"),["prevent"]),["space"])),onClick:o[16]||(o[16]=e=>m.value="finance")},Ld,32)],2),k("li",{class:B(["report"===T(m)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[17]||(o[17]=N($((e=>m.value="report"),["prevent"]),["space"])),onClick:o[18]||(o[18]=e=>m.value="report")},Rd,32)],2),$d])])])])]),"management"===T(m)?(b(),g("div",Bd,[k("div",Hd,[k("div",Nd,[k("div",zd,[k("div",Jd,[k("div",qd,[Wd,k("div",Gd,[(b(!0),g(D,null,A(T(r).tags,((e,l)=>(b(),g("button",{key:l,class:"button is-selected is-light is-dark-outlined"},C(e),1)))),128))])])]),k("div",Zd,[k("div",Qd,[Xd,k("div",{innerHTML:T(r).notes},null,8,Yd),ec])]),k("div",lc,[k("div",ac,[w(L,{rounded:"",data:h,columns:U},{"body-cell":x((({row:e,column:l,value:a})=>["type"===l.key&&"messages"===e.type?(b(),g(D,{key:0},[w(K,{color:"green"},{default:x((()=>[tc])),_:1}),sc],64)):"type"===l.key&&"tasks"===e.type?(b(),g(D,{key:1},[w(K,{color:"orange"},{default:x((()=>[ic])),_:1}),nc],64)):"status"===l.key?(b(),g(D,{key:2},["new"===e.status?(b(),F(v,{key:0,rounded:"",color:"success",label:"New"})):(b(),F(v,{key:1,rounded:"",label:"Pending"}))],64)):"actions"===l.key?(b(),g("a",oc,"Open")):(b(),g("span",dc,C(a),1))])),_:1})])]),k("div",cc,[k("div",uc,[rc,k("div",pc,[(b(!0),g(D,null,A(T(r).sales_people_info,(e=>(b(),g("div",mc,[k("div",vc,[w(H),w(d,{picture:e.avatar,initials:e.username.slice(0,2),size:"large"},null,8,["picture","initials"]),k("h3",fc,C(e.username??"N/A")+" "+C(e.last_name??""),1),k("p",hc,C(e.role),1),k("div",_c,[w(_,{color:"primary",raised:""},{default:x((()=>[j(" View Profile ")])),_:1})])])])))),256))])])])])]),k("div",yc,["management"===T(m)?(b(),g("div",bc)):I("",!0),w(z,{project:T(i).params.id},null,8,["project"]),w(J,{class:"picker-widget"},{header:x((()=>[gc])),body:x((()=>[kc])),_:1})])])])):I("",!0),"documents"===T(m)?(b(),g("div",wc,[w(q,{leadId:T(i).params.id,uploaded_files:T(r).uploaded_files,getProjectInfo:O},null,8,["leadId","uploaded_files"])])):I("",!0),"proposals"===T(m)?(b(),g("div",xc,[k("div",jc,[k("div",Cc,[k("ul",null,[k("li",{class:B(["childProposals"===T(f)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[19]||(o[19]=N($((e=>f.value="childProposals"),["prevent"]),["space"])),onClick:o[20]||(o[20]=e=>f.value="childProposals")},Vc,32)],2),k("li",{class:B(["groupedProposals"===T(f)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[21]||(o[21]=N($((e=>f.value="groupedProposals"),["prevent"]),["space"])),onClick:o[22]||(o[22]=e=>{f.value="groupedProposals",(async(e="proposal_formats")=>{try{const l=await n.get(`/api/attachment/by-object/${i.params.id}/?type=${e}`);E.value=l.data}catch(l){console.log(l)}})("proposal_formats")})},Uc,32)],2)])])]),"childProposals"==T(f)?(b(),g("div",Ic,[w(Oe,{"lead-id":T(i).params.id,onUpdateCompany:O},null,8,["lead-id"])])):I("",!0),"groupedProposals"==T(f)?(b(),g("div",Sc,[w(W,{"doc-type":"proposal_formats","object-id":T(i).params.id},null,8,["object-id"])])):I("",!0)])):I("",!0),"activities"===T(m)?(b(),g("div",Tc,[w(G,{jobId:T(i).params.id},null,8,["jobId"])])):I("",!0),"progress"===T(m)?(b(),g("div",Fc,[w(Z,{object:T(i).params.id,type:"job"},null,8,["object"])])):I("",!0),"finance"===T(m)?(b(),g("div",Dc,[w(Q)])):I("",!0),"activityLogs"===T(m)?(b(),g("div",Ac,[w(X,{object_id:T(i).params.id||T(r).id,object_type:"lead"},null,8,["object_id"])])):I("",!0),"report"===T(m)?(b(),g("div",Pc,[w(Y)])):I("",!0),"tasks"===T(m)?(b(),g("div",Mc,[w(ee,{projectID:T(i).params.id},null,8,["projectID"])])):I("",!0),"calculations"===T(m)?(b(),g("div",Oc,[k("div",Ec,[k("div",Kc,[k("ul",null,[k("li",{class:B(["excel"===T(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[23]||(o[23]=N($((e=>p.value="excel"),["prevent"]),["space"])),onClick:o[24]||(o[24]=e=>p.value="excel")},Lc,32)],2),k("li",{class:B(["custom"===T(p)&&"is-active"])},[k("a",{tabindex:"0",role:"button",onKeydown:o[25]||(o[25]=N($((e=>p.value="custom"),["prevent"]),["space"])),onClick:o[26]||(o[26]=e=>p.value="custom")},Rc,32)],2)])])]),"excel"==T(p)?(b(),g("div",$c,[w(le,{objectId:T(i).params.id},null,8,["objectId"])])):I("",!0),"custom"==T(p)?(b(),g("div",Bc,[w(ae,{objectId:T(i).params.id},null,8,["objectId"])])):I("",!0)])):I("",!0),"files"==T(m)?(b(),g("div",Hc,[w(te,{projectId:T(i).params.id,files:T(r).uploaded_files,"onUpdate:onUploadFile":O},null,8,["projectId","files"])])):I("",!0)])])]),T(u)?(b(),F(se,{key:0,addUpdateLeadModal:T(u),leadId:T(c),"onUpdate:modalHandler":o[27]||(o[27]=e=>u.value=!1),"onUpdate:OnSuccess":O},null,8,["addUpdateLeadModal","leadId"])):I("",!0)])}}});export{Nc as _};
