import{_ as e}from"./CreateProposalTasksModal-30995701.js";import{_ as a}from"./SweetAlert.vue_vue_type_style_index_0_lang-7eab213b.js";import{_ as l}from"./LeadAddUpdateModal.vue_vue_type_style_index_0_lang-dff207d3.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-c2e0f3b0.js";import{_ as s,c as i}from"./VFlexTable.vue_vue_type_style_index_0_lang-d785e7d5.js";import{_ as n}from"./VTag.vue_vue_type_style_index_0_lang-5125ae59.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-ca30f99d.js";import{_ as r}from"./VPlaceloadWrap-77bf6011.js";import{f as u,r as d,C as c,D as p,E as m,V as _,W as v,F as f,G as g,aB as y,x as b,y as h,w as j,$ as x,o as w,B as k,av as V,L as A,X as C,m as S,k as I,H as P,I as O,K as $,U as M,N as U,O as N,aS as T,P as q,al as z,J as L,A as D}from"./index-ba14f1f1.js";import{_ as J}from"./VPlaceloadText.vue_vue_type_style_index_0_lang-ba0e69ec.js";import{_ as E}from"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-4ff8b326.js";import{_ as F}from"./VAvatar.vue_vue_type_style_index_0_lang-92bd5b85.js";import{_ as B}from"./VDropdown.vue_vue_type_style_index_0_lang-4ebe90aa.js";import{_ as H}from"./VField.vue_vue_type_script_setup_true_lang-1cabf718.js";import{_ as W}from"./VControl-74e24725.js";import{_ as K,a as X}from"./search-4-dark-2b5b440c.js";import{u as Z}from"./useAPI-b0fd6de1.js";import{u as R}from"./useNotyf-4477eed9.js";import{d as Q,i as G}from"./useSupportElement-aae289b4.js";import{g as Y}from"./estimatesScripts-614ff270.js";import{h as ee}from"./moment-bad41465.js";import{u as ae}from"./viewWrapper-acdc4eb6.js";import{b as le}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-6e1fbce0.js";import"./VRadio.vue_vue_type_style_index_0_lang-ba916219.js";import"./VLabel.vue_vue_type_script_setup_true_lang-e0409d66.js";import"./useVFieldContext-99133028.js";import"./UnitAddUpdateModal.vue_vue_type_script_setup_true_lang-c27565bb.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-d8752579.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-e0f60d95.js";import"./VInput.vue_vue_type_script_setup_true_lang-b3727ccf.js";import"./VOption.vue_vue_type_style_index_0_lang-ec11555e.js";import"./costItems-5171abc5.js";import"./VIconButton-aff32873.js";import"./company-57d92ede.js";import"./LeadProposalsList.vue_vue_type_style_index_0_lang-e369806b.js";import"./ProposalViewModal.vue_vue_type_style_index_0_lang-1410b9f1.js";import"./V-Snack.vue_vue_type_style_index_0_lang-b8608bbb.js";import"./VIcon.vue_vue_type_script_setup_true_lang-987542a3.js";import"./PlaceloadV1.vue_vue_type_style_index_0_lang-2905487b.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-e8cef95f.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-e4035761.js";import"./ckeditor-78dda8c9.js";import"./vue.runtime.esm-bundler-b91e2072.js";import"./ckeditor-0a608ce6.js";import"./VFlex.vue_vue_type_style_index_0_lang-32ab5d95.js";import"./useDropdown-76934e48.js";import"./notyf-c63da6b6.js";import"./useThemeColors-aeca8cde.js";const te={class:"list-view list-view-v1"},se={class:"list-view-inner"},ie=u({__name:"PlaceloadNoButtonV1",setup:e=>(d(""),(e,a)=>{const l=E,t=J,s=y,i=r;return c(),p("div",null,[m("div",te,[m("div",se,[(c(),p(_,null,v(10,(e=>m("div",{key:e,class:"list-view-item"},[f(i,null,{default:g((()=>[f(l,{size:"medium"}),f(t,{"last-line-width":"60%",class:"mx-2"}),f(s,{class:"mx-2",disabled:""}),f(s,{class:"mx-2 h-hidden-tablet-p"}),f(s,{class:"mx-2 h-hidden-tablet-p"}),f(s,{class:"mx-2"})])),_:1})]))),64))])])])})}),ne={class:"list-flex-toolbar columns is-multiline"},oe={class:"column is-6 is-flex is-align-items-center"},re=["onKeyup"],ue=[m("div",{class:"icon"},[m("i",{class:"fas fa-sort-alpha-down","aria-hidden":"true"})],-1),m("div",{class:"meta"},[m("span",null,"Ascending"),m("span",null,"Alphabetical Ascending Sorting")],-1)],de=[m("div",{class:"icon"},[m("i",{class:"fas fa-sort-alpha-down-alt","aria-hidden":"true"})],-1),m("div",{class:"meta"},[m("span",null,"Descending"),m("span",null,"Alphabetical Descending Sorting")],-1)],ce=[m("div",{class:"icon"},[m("i",{class:"fas fa-sort-numeric-down","aria-hidden":"true"})],-1),m("div",{class:"meta"},[m("span",null,"Most Recent"),m("span",null,"Sort most recently created")],-1)],pe=[m("div",{class:"icon"},[m("i",{class:"fas fa-sort-numeric-down-alt","aria-hidden":"true"})],-1),m("div",{class:"meta"},[m("span",null,"Most Old"),m("span",null,"Sort the most oldest")],-1)],me={key:0,class:"multiselect-single-label"},_e={class:"column is-6 is-flex is-justify-content-end"},ve={class:"multiselect-single-label"},fe={key:1,class:"page-content-inner"},ge={class:"flex-list-wrapper flex-list-v1"},ye=m("div",{class:"columns is-multiline"},[m("div",{class:"column is-3"}),m("div",{class:"column is-6 justify-right"})],-1),be=m("img",{class:"light-image",src:K,alt:""},null,-1),he=m("img",{class:"dark-image",src:X,alt:""},null,-1),je={key:1},xe={class:"item-name dark-inverted is-flex show-text-300"},we={class:"item-meta show-text-200"},ke={key:0,class:"show-text-200"},Ve={class:"item-name"},Ae={class:"item-meta"},Ce={key:1,class:"show-text-200"},Se={class:"item-name dark-inverted"},Ie={class:"item-meta"},Pe={class:"item-name dark-inverted"},Oe={class:"item-meta"},$e=["onClick"],Me=[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),m("div",{class:"meta"},[m("span",null,"View"),m("span",null,"View user details")],-1)],Ue=["onClick"],Ne=[m("div",{class:"icon"},[m("i",{class:"lnil lnil-copy","aria-hidden":"true"})],-1),m("div",{class:"meta"},[m("span",null,"Add Proposals"),m("span",null,"Add new proposal to lead")],-1)],Te=["onClick"],qe=[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),m("div",{class:"meta"},[m("span",null,"Edit"),m("span",null,"Update Lead Info")],-1)],ze=m("hr",{class:"dropdown-divider"},null,-1),Le=["onClick"],De=[m("div",{class:"icon"},[m("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),m("div",{class:"meta"},[m("span",null,"Delete"),m("span",null,"Delete Proposal Permanently")],-1)],Je=u({__name:"JobsList",setup(r){const u=b(),y=R(),D=Z(),J=d(),E=d("all"),K=d({id:"54985a54-db61-4761-becd-3b35f8ec503e",sales_people_info:[],clientInfo:null,created_by_info:null,manager_info:null,title:"test job",address:null,current_state:"lead",city:null,state:null,status:null,zip_code:null,confidence:"0.00",sale_date:null,tags:[],estimated_from:null,estimated_to:null,sources:null,project_type:null,notes:null,attach_mail:null,created_at:"2025-01-15T19:55:18.448485Z",updated_at:"2025-01-15T19:55:18.448510Z",created_by:null,manager:null,client:null,sales_people:[]}),X=d(""),ae=h(),le=d(""),te=d([{value:"",name:"",icon:""}]),se=d(1),Je=d(""),Ee=d(!1),Fe=d(!1),Be={username:{label:"Job",grow:"lg"},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},He=d([{id:"bc199abb-e8f3-4074-91c1-a73c182de6aa",active_project:0,completed_project:1,cancelled_project:0,pending_project:0,password:"pbkdf2_sha256$260000$OczZJ7bosNcSEPl14SwE2W$BE95gFMgOF4gKAvgE5PIfMbSmRXSrPjn0+Th1ox5lOQ=",last_login:null,date_joined:"2024-05-23T10:14:39.803183Z",email:"ibexbuilderstudios@gmail.com",role:"contractor",avatar:null,is_active:!0,phoneNumber:"23984729370",username:"Patrick",last_name:"",is_sentMail:!1,supplier:null}]),We=d([{id:"",sales_people_info:[{id:"",username:"",last_name:"",email:"",role:"",avatar:null}],clientInfo:{id:"",username:"",last_name:"",email:"",role:"",avatar:""},created_by_info:null,contractor_info:{id:"",username:"",last_name:"",email:"",role:"",avatar:null},managers_list:[{id:"",username:"",last_name:"",email:"",role:"",avatar:""}],title:"",description:"",image:"",color:"",startDate:"",endDate:"",status:"",is_active:!1,address:"",wifiAvaliabe:!1,parkingAvaliable:!1,property_features:null,created:"",uploaded_files:[],leadStatus:"",current_state:"",city:"",state:"",zip_code:"",confidence:"",sale_date:null,estimated_from:null,estimated_to:null,tags:[],sources:"",project_type:null,notes:"",attach_mail:null,latitude:31.5440886,longitude:74.3839007,client:"",contractor:"",created_by:null,managers:[""],sales_people:[]}]),Ke=d(!0),Xe=d(""),Ze=d(20),Re=d({count:40,next:"https://api.ibexworkhub.com/api/project/project-jobs/?is-paginated=true&page=2&page_size=10",previous:null,results:[]}),Qe=e=>{Xe.value=e,Fe.value=!0},Ge=d({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Ye=async()=>{try{J.value=!0;await D.delete(`/api/project/${Xe.value}/`);y.success("Proposal delete successfully"),aa()}catch(e){y.error(` ${e}, Proposal`),y.error("Something went wrong please try later")}finally{J.value=!1,Ge.value.isSweetAlertOpen=!1}},ea=(e="")=>{X.value=e},aa=async()=>{try{J.value=!0;const e=await D.get(`/api/project/project-jobs/?is-paginated=${Ke.value}&page=${se.value}&page_size=${Ze.value}&search=${Je.value}&contractor=${le.value?le.value:""}`);Re.value=e.data,K.value=e.data?.results?.filter((e=>"completed"==e.status)),We.value=e.data?.results?.filter((e=>"completed"!=e.status))}catch(e){y.error(` ${e}, Lead`)}finally{J.value=!1}};j((()=>le.value),(e=>{e?(se.value=1,Ze.value=Re.value.count,aa()):(se.value=1,Ze.value=20,aa())})),j((()=>Je.value),(e=>{e||aa()})),j((()=>ae.query.page),(e=>{se.value=ae.query.page??1,aa()})),j((()=>se.value),(e=>{u.push({query:{...ae.query,page:e}})}));const la=x((()=>We.value)),ta=x((()=>{let e=ae.query.page;return e=null==e||"undefined"==e?1:ae.query.page,Number.parseInt(ae.query.page)||1})),sa=x((()=>{let e=la.value||[];return X.value?[...e].sort(((e,a)=>"ascending"===X.value?e?.clientInfo?.username.localeCompare(a?.clientInfo?.username)||e?.contractor_info?.username.localeCompare(a?.contractor_info?.username):"descending"===X.value?a?.clientInfo?.username.localeCompare(e?.clientInfo?.username)||a?.contractor_info?.username.localeCompare(e?.contractor_info?.username):"new"===X.value?ee(a.created).valueOf()-ee(e.created).valueOf():"old"===X.value?ee(e.created).valueOf()-ee(a.created).valueOf():0)):la.value}));return w((()=>{aa(),(async()=>{try{J.value=!0;const e=await D.get("/api/users/by-role-option/contractor/");He.value=e.data,te.value=e.data?.map((e=>({value:e.id,name:`${e.username} ${e.last_name?e.last_name:""}`,icon:e.avatar}))),te.value.unshift({value:"",name:"All",icon:""}),le.value=""}catch(e){console.log(e)}finally{J.value=!1}})()})),(r,d)=>{const y=W,b=H,h=B,j=F,x=k("Multiselect"),w=q,D=z,K=ie,Z=o,R=i,ee=n,ae=s,se=t,He=l,We=a,Ke=e,la=V("tooltip");return c(),p("div",null,[m("div",null,[m("div",ne,[m("div",oe,[f(b,null,{default:g((()=>[f(y,{icon:"feather:search"},{default:g((()=>[A(m("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>I(Je)?Je.value=e:null),class:"input custom-text-filter",placeholder:"Type and press enter...",onKeyup:P(aa,["enter"])},null,40,re),[[C,S(Je)]])])),_:1})])),_:1}),f(h,{title:"Apply sorting",modern:"",spaced:""},{content:g((()=>[m("a",{onClick:d[1]||(d[1]=e=>ea("ascending")),class:O(["dropdown-item is-media",{"is-active":"ascending"===S(X)}])},ue,2),m("a",{onClick:d[2]||(d[2]=e=>ea("descending")),class:O(["dropdown-item is-media",{"is-active":"descending"===S(X)}])},de,2),m("a",{onClick:d[3]||(d[3]=e=>ea("new")),class:O(["dropdown-item is-media",{"is-active":"new"===S(X)}])},ce,2),m("a",{onClick:d[4]||(d[4]=e=>ea("old")),class:O(["dropdown-item is-media",{"is-active":"old"===S(X)}])},pe,2)])),_:1}),f(b,{class:"h-hidden-mobile",style:{"min-width":"200px"}},{default:g((({id:e})=>[f(y,null,{default:g((()=>[f(x,{modelValue:S(le),"onUpdate:modelValue":d[5]||(d[5]=e=>I(le)?le.value=e:null),attrs:{id:e},placeholder:"Select a contractor",label:"name",options:S(te),searchable:!0,"track-by":"name","max-height":145},{singlelabel:g((({value:e})=>[S(le)?(c(),p("div",me,[f(j,{size:"small",squared:"",class:"mr-2",picture:e.icon},null,8,["picture"]),$(" "+M(e.name),1)])):U("",!0)])),option:g((({option:e})=>[f(j,{size:"small",squared:"",class:"mr-2",picture:e.icon},null,8,["picture"]),$(" "+M(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),m("div",_e,[f(b,{class:"smart-search-dropdown h-hidden-desktop",style:{"min-width":"180px",height:"44px"}},{default:g((({id:e})=>[f(y,null,{default:g((()=>[f(x,{modelValue:S(le),"onUpdate:modelValue":d[6]||(d[6]=e=>I(le)?le.value=e:null),attrs:{id:e},placeholder:"Select a contractor",label:"name",options:S(te),searchable:!0,"track-by":"name","max-height":145},{singlelabel:g((({value:e})=>[m("div",ve,[f(j,{size:"small",squared:"",class:"mr-2",picture:e.icon},null,8,["picture"]),$(" "+M(e.name),1)])])),option:g((({option:e})=>[f(j,{size:"small",squared:"",class:"mr-2",picture:e.icon},null,8,["picture"]),$(" "+M(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),f(D,null,{default:g((()=>[f(w,{onClick:d[7]||(d[7]=e=>Qe("")),color:"primary",icon:"fas fa-plus",elevated:""},{default:g((()=>[$(" Lead Opportunity ")])),_:1})])),_:1})])]),S(J)?(c(),N(K,{key:0})):(c(),p("div",fe,[m("div",ge,[ye,S(sa)?.length?U("",!0):(c(),N(Z,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:g((()=>[be,he])),_:1})),"all"===S(E)?(c(),p("div",je,[S(sa)?.length?(c(),N(ae,{key:0,data:S(sa),columns:Be,compact:""},{body:g((()=>[f(T,{name:"list",tag:"div",class:"flex-list-inner"},{default:g((()=>[(c(!0),p(_,null,v(S(sa),(e=>(c(),p("div",{key:e.id,class:"flex-table-item"},[f(R,{onClick:()=>{S(u).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:"lg"}},{default:g((()=>[f(j,{picture:e.image?e.image:"/IbexImages/home-icon.png",squared:"",size:"medium"},null,8,["picture"]),m("div",null,[m("span",xe,M(e.title?e.title:"N/A"),1),m("span",we,[m("span",null,M(e.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),f(R,{onClick:()=>{S(u).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:g((()=>[e.clientInfo?(c(),p("div",ke,[m("span",Ve,M(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),m("span",Ae,[m("span",null,M(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):U("",!0),e.contractor_info?(c(),p("div",Ce,[m("span",Se,M(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),m("span",Ie,[m("span",null,M(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):U("",!0)])),_:2},1032,["onClick"]),f(R,{onClick:()=>{S(u).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:g((()=>[m("div",null,[m("span",Pe,M(S(Q)(e.created)),1),m("span",Oe,[m("span",null,"At:"+M(S(G)(e.created)),1)])])])),_:2},1032,["onClick"]),f(R,{onClick:()=>{S(u).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:g((()=>[f(ee,{class:"capitalized",color:S(Y)[e.status],rounded:""},{default:g((()=>[$(M(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),f(R,{onClick:()=>{S(u).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:g((()=>[m("div",null,[(c(!0),p(_,null,v(e.managers_list,(e=>A((c(),N(j,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[la,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),f(R,{column:{align:"end"}},{default:g((()=>[f(h,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:g((({close:a})=>[m("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{S(u).push(`/sidebar/dashboard/jobs/${e.id}`)}},Me,8,$e),m("a",{role:"menuitem",onClick:a=>{return l=e.id,Xe.value=l,void(Ee.value=!Ee.value);var l},class:"dropdown-item is-media"},Ne,8,Ue),m("a",{role:"menuitem",class:"dropdown-item is-media",onClick:L((a=>Qe(e.id)),["prevent"])},qe,8,Te),ze,m("a",{role:"menuitem",class:"dropdown-item is-media",onClick:L((a=>{return l=e.id,Xe.value=l,void(Ge.value={title:"Delete Job?",subtitle:"Are you sure to delete this Job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var l}),["prevent"])},De,8,Le)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):U("",!0),S(Re).count>S(Ze)?(c(),N(se,{key:1,"item-per-page":S(Ze),modelValue:S(ta),"onUpdate:modelValue":d[8]||(d[8]=e=>I(ta)?ta.value=e:null),"total-items":S(Re).count,"current-page":S(ta),"max-links-displayed":5},null,8,["item-per-page","modelValue","total-items","current-page"])):U("",!0)])):U("",!0)])]))]),S(Fe)?(c(),N(He,{key:0,addUpdateLeadModal:S(Fe),leadId:S(Xe),"onUpdate:modalHandler":d[9]||(d[9]=e=>Fe.value=!1),"onUpdate:OnSuccess":aa},null,8,["addUpdateLeadModal","leadId"])):U("",!0),S(Ge).isSweetAlertOpen?(c(),N(We,{key:1,isSweetAlertOpen:S(Ge).isSweetAlertOpen,title:S(Ge).title,subtitle:S(Ge).subtitle,loading:S(J),btntext:S(Ge).btntext,onConfirm:Ye,onCancel:()=>S(Ge).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","loading","btntext","onCancel"])):U("",!0),S(Ee)?(c(),N(Ke,{key:2,"lead-proposal-modal":S(Ee),"lead-id":S(Xe),"onUpdate:modalHandler":d[10]||(d[10]=e=>Ee.value=!1),"onUpdate:OnSuccess":aa},null,8,["lead-proposal-modal","lead-id"])):U("",!0)])}}}),Ee=u({__name:"index",setup:e=>(ae().setPageTitle("All Jobs"),D({title:"All Jobs - Ibex"}),(e,a)=>{const l=Je;return c(),p("div",null,[f(l)])})});"function"==typeof le&&le(Ee);export{Ee as default};
