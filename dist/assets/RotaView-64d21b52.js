import{_ as e}from"./VModal.vue_vue_type_style_index_0_lang-6cdff73e.js";import{e as t,r as a,o as l,B as s,C as i,E as o,F as n,D as r,J as d,T as c,K as u,j as p,W as m,l as g,a0 as f,O as v,P as h,Q as y,R as b,w as x,A as w,N as k,I as R,s as S,M as _,L as C,aA as I,v as E,U as D,a4 as T,V as M,a3 as N}from"./index-75e9b231.js";import{u as O}from"./useNotyf-e1a94979.js";import{_ as P}from"./VCollapse.vue_vue_type_style_index_0_lang-470c99fa.js";import{_ as V}from"./VInput.vue_vue_type_script_setup_true_lang-5bfa57d7.js";import{_ as j}from"./VLabel.vue_vue_type_script_setup_true_lang-8a2344a2.js";import{_ as A}from"./VField.vue_vue_type_script_setup_true_lang-a7cabfc9.js";import{_ as H}from"./VControl-35a80ff0.js";import{u as z}from"./useAPI-32665254.js";import{u as W}from"./company-51f3ca14.js";import{_ as L}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-077ef043.js";import{A as U}from"./vue3-apexcharts.common-6891621c.js";import{u as B}from"./useThemeColors-941faa9e.js";import{_ as G}from"./VAvatar.vue_vue_type_style_index_0_lang-2a193c84.js";import{_ as $,a as q}from"./projects-dark-4a371d8a.js";import{_ as F}from"./VTag.vue_vue_type_style_index_0_lang-bf4fb4b0.js";import{F as J}from"./FullCalendar-d57780ef.js";import{i as Y,X as K,Y as Z,Z as X,_ as Q,$ as ee,a0 as te,a1 as ae,a2 as le,a3 as se,a4 as ie,a5 as oe,a6 as ne,a7 as re,a8 as de,a9 as ce,aa as ue,ab as pe,ac as me,ad as ge,ae as fe,af as ve,ag as he,ah as ye,ai as be,aj as xe,ak as we,al as ke,am as Re,an as Se,ao as _e,ap as Ce,aq as Ie,ar as Ee,as as De,at as Te,au as Me,av as Ne,aw as Oe,ax as Pe,ay as Ve,az as je,aA as Ae,aB as He,aC as ze,aD as We,aE as Le,aF as Ue,aG as Be,c as Ge}from"./index-55eb4335.js";import{_ as $e}from"./VSwitchBlock.vue_vue_type_style_index_0_lang-0b983a1f.js";import{_ as qe}from"./VTags.vue_vue_type_script_setup_true_lang-b43631cb.js";import{i as Fe}from"./index-37e62c97.js";const Je=e=>(h("data-v-c4615761"),e=e(),y(),e),Ye={class:"cus-justify-center"},Ke=Je((()=>r("i",{class:"lnir lnir-alarm-2 m-4",style:{"font-size":"60px",color:"var(--danger)"}},null,-1))),Ze={class:"modal-form columns is-multiline"},Xe={class:"field column is-12 mb-0"},Qe={class:"content",style:{"background-color":"#ececec71",padding:"6px","border-radius":"8px"}},et={style:{"font-size":"14px"}},tt=Je((()=>r("span",{style:{color:"var(--danger)","font-size":"17px","font-weight":"500"}},"Caution: ",-1))),at=Je((()=>r("br",null,null,-1))),lt={class:"field column is-12 mb-0"},st={style:{"font-weight":"500",color:"var(--danger)"}},it={class:"control"},ot=b(t({__name:"ActionsVerificationModal",props:{actionVerificationModal:{type:Boolean},message:{},captionText:{},btnText:{}},emits:["update:modalHandler","update:OnSuccess"],setup(t,{emit:h}){const y=t,b=a(""),x=O(),w=()=>{b.value==y.captionText?(console.log("consoliingg"),h("update:OnSuccess",null),h("update:modalHandler",!1)):x.error("Your entered text does not match.")};return l((()=>{})),(t,a)=>{const l=v,h=e;return s(),i("template",null,[o(f,{name:"fade-slow"},{default:n((()=>[o(h,{open:t.actionVerificationModal,title:"Action Alert",actions:"right",onClose:a[1]||(a[1]=e=>t.actionVerificationModal=!1)},{content:n((()=>[r("div",Ye,[Ke,r("div",Ze,[r("div",Xe,[r("div",Qe,[r("p",et,[tt,d(" "+c(y.message)+" ",1),at])])]),r("div",lt,[r("label",null,[d("To perform this action, type: "),r("span",st,c(y.captionText),1),d(" below:")]),r("div",it,[u(r("input",{type:"text",name:"documentTitle","onUpdate:modelValue":a[0]||(a[0]=e=>p(b)?b.value=e:null),required:"",class:"input is-primary-focus",placeholder:"Enter captcha text"},null,512),[[m,g(b)]])])])])])])),cancel:n((()=>[o(l,{style:{display:"none"},rounded:"",color:"light",raised:""},{default:n((()=>[d("Close")])),_:1})])),action:n((()=>[o(l,{type:"submit",onClick:w,color:"primary",raised:""},{default:n((()=>[d(c(y.btnText?y.btnText:"Confirm"),1)])),_:1})])),_:1},8,["open"])])),_:1})])}}}),[["__scopeId","data-v-c4615761"]]),nt=e=>(h("data-v-0615def8"),e=e(),y(),e),rt={class:"modal-form columns is-multiline",id:"addRota"},dt={class:"field column is-12 mb-0"},ct={class:"columns is-multiline mb-3"},ut={class:"field column is-6 mb-0"},pt=nt((()=>r("label",null,"Select customer company*",-1))),mt={class:"multiselect-single-label"},gt=["src"],ft=["src"],vt={class:"field column is-6 mb-0"},ht=nt((()=>r("label",null,"Select Site *",-1))),yt={class:"multiselect-single-label"},bt={class:"field column is-6 mb-0"},xt=nt((()=>r("label",{class:"mb-2"},"Select Worker *",-1))),wt={class:"multiselect-single-label"},kt=["src"],Rt=["src"],St={class:"field column is-3 mb-0"},_t={class:"field column is-3 mb-0"},Ct=nt((()=>r("div",{class:"head-info"},[r("div",{class:"head-progress"})],-1))),It={class:"body-inner-content"},Et={class:"field columns is-multiline mb-0"},Dt={class:"column is-12"},Tt={class:"columns is-multiline space-around"},Mt={class:"field column is-5 mb-0"},Nt=nt((()=>r("label",null,"Charge Rate",-1))),Ot={class:"control"},Pt={class:"field column is-5 mb-0"},Vt=nt((()=>r("label",null,"Charge Hours",-1))),jt={class:"control"},At={class:"field column is-11 mb-0"},Ht=nt((()=>r("label",null,"Notes",-1))),zt={class:"control"},Wt=b(t({__name:"editRotaModal",props:{editRotaModalOpen:{type:Boolean},rotaId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(t,{emit:i}){const p=t,f=W(),h=a(!1),y=O(),b=z(),S=a("");a("");let _=a([]);const C=a("");let I=a([]);a("");let E=a([]);a([{id:0,firstName:"",lastName:"",profileImageURL:""}]);const D=[{title:"Additional Information",content:"Add additional information about rota, rate or worker"}],T=a({dates:[],id:0,start:"",end:"",hours:0,shift:"",hourlyRate:0,notes:"",createdBy:"",UpdatedAt:"",updatedBy:"",company:"",site:"",worker:"",customerCompany:"",job:""}),M=()=>{i("update:modalHandler",!1)},N=async()=>{h.value=!0;try{T.value.shift="day";const e=await b.patch(`/v3/api/rota/${p.rotaId}/`,T.value);console.log("rota resopmse",e.data),i("update:OnSuccess",null),y.success("Rota Added Successfuly"),h.value=!1,M()}catch(e){console.log(e),h.value=!1}},L=async e=>{try{const t=await b.get(`/v3/api/site/customer-company/${e||C.value}/`);_.value=t.data.map((e=>({value:e.id.toString(),name:e.name})))}catch(t){console.log(t)}},U=e=>{L(e)};x(C,((e,t)=>{L(e)}));return l((()=>{(async()=>{try{const e=await b.get(`/v3/api/rota/${p.rotaId}/`);T.value=e.data}catch(e){console.log(e)}})(),(async()=>{try{const e=await b.get(`/v3/api/worker/${f.loggedCompany.id}/worker-short-info/`);E.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL}))),S.value=p.workerId}catch{y.error("Invalid data")}finally{h.value=!1}})(),(async()=>{h.value=!0;const e=await b.get(`/v3/api/customer-company/company/${f.loggedCompany.id}`);I.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png"}))),e.data&&(C.value=e.data[0].id),h.value=!1})()})),(t,a)=>{const l=w("Multiselect"),i=H,f=A,y=j,b=V,x=P,S=v,C=e;return s(),k(C,{is:"form",size:"xl",open:p.editRotaModalOpen,title:"Edit Rota",actions:"right",onSubmit:R(N,["prevent"]),onClose:M},{content:n((()=>[r("div",rt,[r("div",dt,[r("div",ct,[r("div",ut,[pt,o(f,{class:"pl-2"},{default:n((({id:e})=>[o(i,null,{default:n((()=>[o(l,{required:"",modelValue:g(T).customerCompany,"onUpdate:modelValue":a[0]||(a[0]=e=>g(T).customerCompany=e),attrs:{id:e},placeholder:"Select customer company",label:"name",options:g(I),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect",onInput:U},{singlelabel:n((({value:e})=>[r("div",mt,[r("img",{style:{width:"30px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,gt),d(" "+c(e.name),1)])])),option:n((({option:e})=>[r("img",{style:{width:"40px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,ft),d(" "+c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",vt,[ht,o(f,{class:"pl-2"},{default:n((({id:e})=>[o(i,null,{default:n((()=>[o(l,{required:"",modelValue:g(T).site,"onUpdate:modelValue":a[1]||(a[1]=e=>g(T).site=e),attrs:{id:e},placeholder:"Select a site",label:"name",options:g(_),searchable:!0,"track-by":"name",height:400},{singlelabel:n((({value:e})=>[r("div",yt,c(e.name),1)])),option:n((({option:e})=>[d(c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",bt,[xt,o(f,{class:""},{default:n((({id:e})=>[o(i,null,{default:n((()=>[o(l,{required:"",modelValue:g(T).worker,"onUpdate:modelValue":a[2]||(a[2]=e=>g(T).worker=e),attrs:{id:e},placeholder:"Select worker",label:"name",options:g(E),searchable:!0,"track-by":"name",height:400},{singlelabel:n((({value:e})=>[r("div",wt,[r("img",{style:{width:"24px",height:"24px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,kt),d(" "+c(e.name),1)])])),option:n((({option:e})=>[r("img",{style:{width:"30px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Rt),d(" "+c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",St,[o(f,null,{default:n((()=>[o(y,null,{default:n((()=>[d("Start Time *")])),_:1}),o(i,null,{default:n((()=>[o(b,{required:"",modelValue:g(T).start,"onUpdate:modelValue":a[3]||(a[3]=e=>g(T).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",_t,[o(f,null,{default:n((()=>[o(y,null,{default:n((()=>[d("End Time *")])),_:1}),o(i,null,{default:n((()=>[o(b,{required:"",modelValue:g(T).end,"onUpdate:modelValue":a[4]||(a[4]=e=>g(T).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])]),o(x,{items:D,"with-chevron":"",style:{"border-radius":"14px"}},{"collapse-item-head":n((e=>[Ct])),"collapse-item-content":n((e=>[r("div",It,[r("div",Et,[r("div",Dt,[r("div",Tt,[r("div",Mt,[Nt,r("div",Ot,[u(r("input",{type:"number",name:"rate","onUpdate:modelValue":a[5]||(a[5]=e=>g(T).hourlyRate=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[m,g(T).hourlyRate]])])]),r("div",Pt,[Vt,r("div",jt,[u(r("input",{type:"number",name:"rate","onUpdate:modelValue":a[6]||(a[6]=e=>g(T).hours=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[m,g(T).hours]])])]),r("div",At,[Ht,r("div",zt,[u(r("input",{type:"text",name:"note","onUpdate:modelValue":a[7]||(a[7]=e=>g(T).notes=e),class:"input is-primary-focus",placeholder:"Enter Note"},null,512),[[m,g(T).notes]])])])])])])])])),_:1})])])])),action:n((()=>[o(S,{type:"submit",color:"primary",loading:g(h),raised:""},{default:n((()=>[d("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),[["__scopeId","data-v-0615def8"]]),Lt={styke:"width:100%; height:100%"},Ut=t({__name:"TimestampMap",props:{activities:{},timestamp:{}},emits:["update:modalHandler"],setup(e,{emit:t}){const o=e,n=B(),r=a(!1),d=S({series:[{name:"Profiles",data:o.activities}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[n.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:o.timestamp},tooltip:{y:{formatter:function(e){return e}}}});return l((()=>{r.value=!0})),(e,t)=>(s(),i("div",Lt,[r.value?(s(),k(g(U),{key:0,id:"line-stats-widget-chart2",height:d.value.chart.height,type:d.value.chart.type,series:d.value.series,options:d.value},null,8,["height","type","series","options"])):_("",!0)]))}}),Bt={id:"activity_map2",style:{"border-radius":"20px"}},Gt=t({__name:"HeatMap",props:{activity:{}},setup(e){const t=e;return l((()=>{(e=>{var t=[],a=51.45047,l=-.34572;e.forEach((e=>{0!=e.latitude&&0!=e.longitude&&(t.push(new google.maps.LatLng(e.latitude,e.longitude)),a=e.latitude,l=e.longitude)}));let s=new google.maps.Map(document.getElementById("activity_map2"),{zoom:16,center:{lat:a,lng:l},mapTypeId:google.maps.MapTypeId.ROADMAP});console.log("mapp",s),new google.maps.visualization.HeatmapLayer({data:t,map:s,radius:20})})(t.activity),console.log("acitivity",t.activity)})),(e,t)=>(s(),i("div",Bt))}}),$t={key:0,class:"columns is-multiline"},qt={class:"column is-12"},Ft={class:"is-flex"},Jt={class:"content-wrap"},Yt={class:"content-box"},Kt={class:"columns is-multiline"},Zt={class:"column is-6"},Xt=r("p",{class:"is-bold mb-1"},"Book on",-1),Qt={class:"card is-flex p-3"},ea={class:"box-text ml-2"},ta={class:"meta-text"},aa={class:"ml-1 mb-3 is-bold"},la={class:"ml-1 mb-1 is-bold"},sa={class:"ml-1",style:{width:"80px"}},ia=r("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1),oa=r("div",{id:"myMapOn",style:{height:"140px",width:"160px","border-radius":"10px"}},null,-1),na={class:"column is-6"},ra=r("p",{class:"is-bold mb-1"},"Book off",-1),da={class:"card is-flex p-3"},ca={class:"box-text ml-2"},ua={class:"meta-text"},pa={class:"ml-1 mb-3 is-bold"},ma={class:"ml-1"},ga={class:"ml-1",style:{width:"80px"}},fa=r("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1),va=r("div",{id:"myMapOff",style:{height:"140px",width:"160px","border-radius":"10px"}},null,-1),ha={class:"column is-12 mt-3"},ya={class:"column is-12"},ba={key:1},xa=r("img",{class:"light-image is-larger",src:$,alt:""},null,-1),wa=r("img",{class:"dark-image is-larger",src:q,alt:""},null,-1),ka=t({__name:"timeSheetComponent",props:{timesheetId:{}},emits:["update:modalHandler"],setup(e,{emit:t}){const p=e,m=B(),g=a(!1);O();const f=z(),v=a(!1),h=a([]),y=a([]),b=a({timeSheetID:0,device_data:[{acceX:0,acceY:0,acceZ:0,accuracy_level:0,activity_type:"",activity_value:0,altitude:0,app_version:"",battery_level:0,climb:0,deviceUserName:"",device_type:"",direction:0,gyroX:0,gyroY:0,gyroZ:0,heartRate:0,horizontal:0,id:0,latitude:0,longitude:0,movement_type:"",readingsTimeDelta:0,speed:0,timeStamp:"",vertical:0,timeSheetID:0,worker_id:0}],created_at:"",worker_id:0,bookOnTime:"",bookOffTime:"",bookOnLat:"",bookOnLong:"",bookOnLocation:"",bookOffLat:"",bookOffLong:"",bookOffLocation:"",hoursWorked:"",bookOnImageURL:"",bookOffImageURL:"",isBookOnImageVerified:!1,isBookOffImageVerified:!1}),x=S({series:[{name:"Profiles",data:[]}],chart:{height:270,type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:[m.success],dataLabels:{enabled:!1},stroke:{width:[4,5,5],curve:"smooth"},grid:{row:{colors:["transparent","transparent"],opacity:0},yaxis:{lines:{show:!1}}},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}}});let w={};return l((()=>{((e,t)=>{let a={lat:e,lng:length};w=new google.maps.Map(document.getElementById("myMapOn"),{center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:t},map:w,title:"Worker"})})(51.4497984,-.3464489),((e,t)=>{let a={lat:e,lng:length};w=new google.maps.Map(document.getElementById("myMapOff"),{center:a,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:6}),new google.maps.Marker({position:{lat:e,lng:t},map:w,title:"Worker"})})(51.4497984,-.3464489),(async()=>{try{g.value=!0;const e=await f.get(`v3/api/timesheet/details/${p.timesheetId}/`,{});b.value=e.data;let t=[],a=[];e.data.device_data.forEach((e=>{t.push(parseFloat(e.activity_value).toFixed(3)),a.push(e.timeStamp&&e.timeStamp.length>20?e.timeStamp.slice(11,16):e.timeStamp)})),x.value.series[0].data=t,x.value.xaxis.categories=a,h.value=t,y.value=a,v.value=!0}catch(e){console.log(e)}finally{g.value=!1}})()})),(e,t)=>{const a=I,l=G,p=Gt,m=Ut,f=L;return b.value.device_data.length?(s(),i("div",$t,[r("div",qt,[r("div",Ft,[g.value?(s(),k(a,{key:0,height:"80px",width:"50%",class:"mx-2"})):_("",!0),g.value?(s(),k(a,{key:1,height:"80px",width:"50%",class:"mx-2 mb-6"})):_("",!0)]),r("div",Jt,[u(r("div",Yt,[r("div",Kt,[r("div",Zt,[Xt,r("div",Qt,[o(l,{picture:b.value.bookOnImageURL?b.value.bookOnImageURL:"",squared:"",size:"medium"},null,8,["picture"]),r("div",ea,[r("div",ta,[r("p",aa,[d(" Time: "),r("span",la,c(b.value.bookOnTime?b.value.bookOnTime.slice(0,10):"-- --")+" "+c(b.value.bookOnTime?b.value.bookOnTime.slice(11,16):"-- --"),1)]),r("span",sa,[ia,d(" "+c(b.value.bookOnLocation?b.value.bookOnLocation:"-----")+" London ",1)])])]),oa])]),r("div",na,[ra,r("div",da,[o(l,{picture:b.value.bookOffImageURL?b.value.bookOffImageURL:"",squared:"",size:"medium"},null,8,["picture"]),r("div",ca,[r("div",ua,[r("p",pa,[d(" Time: "),r("span",ma,c(b.value.bookOffTime?b.value.bookOffTime.slice(0,10):"-- --")+" "+c(b.value.bookOnTime?b.value.bookOnTime.slice(11,16):"-- --"),1)]),r("span",ga,[fa,d(" "+c(b.value.bookOffLocation?b.value.bookOffLocation:"-----")+", London ",1)])])]),va])])])],512),[[C,!g.value]])])]),r("div",ha,[v.value?(s(),k(p,{key:0,style:{height:"280px",width:"100%"},activity:b.value.device_data},null,8,["activity"])):_("",!0),g.value?(s(),k(a,{key:1,height:"280px",width:"100%",class:"mx-2"})):_("",!0)]),r("div",ya,[g.value?(s(),k(a,{key:0,height:"280px",width:"100%",class:"mx-2"})):_("",!0),v.value?(s(),k(m,{key:1,activities:h.value,timestamp:y.value},null,8,["activities","timestamp"])):_("",!0)])])):(s(),i("div",ba,[o(f,{title:"No Activity found.",subtitle:"Looks like worker did not performed any activity within this time-stamp "},{image:n((()=>[xa,wa])),_:1})]))}}}),Ra={class:"row"},Sa={class:"columns is-multiline"},_a={class:"column is-6"},Ca={class:"columns is-multiline"},Ia={class:"column is-12"},Ea={class:"columns is-multiline"},Da={class:"column is-3"},Ta={class:"column is-9"},Ma={class:"is-flex space-between"},Na={style:{width:"120px","white-space":"nowrap"},class:"title is-5 mb-2"},Oa=[r("i",{class:"lnir lnir-apple","aria-hidden":"true"},null,-1),r("i",{class:"iconify ml-3 cu-pointer pointer","data-icon":"feather:external-link"},null,-1)],Pa={class:"is-flex cus-align-center mb-1"},Va=r("i",{class:"iconify text-light","data-icon":"feather:phone","aria-hidden":"true"},null,-1),ja={class:"is-bold"},Aa={class:"is-flex cus-align-center mb-1"},Ha=r("i",{class:"iconify","data-icon":"feather:mail","aria-hidden":"true"},null,-1),za={class:"is-bold"},Wa={class:"is-flex cus-align-center mb-1 text-light"},La=r("i",{class:"iconify","data-icon":"feather:map-pin","aria-hidden":"true"},null,-1),Ua={class:"is-bold"},Ba={class:"column is-12"},Ga={class:"columns is-multiline"},$a={class:"column is-5"},qa={class:"columns is-multiline"},Fa={class:"column is-12"},Ja=r("h3",{class:"title is-5 mb-2"},"Site Name",-1),Ya={class:"is-bold"},Ka={class:"column is-12"},Za=r("h3",{class:"title is-5 mb-2"},"Site Addreess",-1),Xa={class:"is-bold"},Qa={class:"column is-5"},el={class:"columns is-multiline"},tl={class:"column is-12"},al=r("h3",{class:"title is-5 mb-2"},"Date",-1),ll={class:"is-bold"},sl={class:"column is-12"},il=r("h3",{class:"title is-5 mb-2"},"Shift Time",-1),ol={class:"is-bold"},nl={class:"column is-2"},rl={class:"columns is-multiline"},dl={class:"column is-12"},cl={class:"column is-12"},ul=r("div",{class:"column is-6"},[r("div",{id:"myMap",style:{height:"324px",width:"100%","border-radius":"10px"}})],-1),pl={class:"column is-12"},ml={class:"p-2 is-flex",style:{}},gl=r("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"white",display:"flex","align-items":"center"}},null,-1),fl={class:"item-name dark-inverted",style:{"font-weight":"500"}},vl={style:{"font-weight":"500","margin-bottom":"0px","padding-left":"5px",color:"white"}},hl=r("button",{style:{display:"none"}},"close",-1),yl=t({__name:"rotaDetailModal",props:{timeSheetDetailModal:{type:Boolean},timesheetId:{},rotaId:{},getRota:{type:Function}},emits:["update:modalHandler"],setup(t,{emit:d}){const u=t;let p,m,f;const v=a([]),h=E(),y=O(),b=z(),x=a(!1),w=a(!1);a(0);const R=a({id:0,siteInfo:{id:5,name:"",address:"",postcode:"",city:"",inchargeName:"",color:"",latitude:0,longitude:0,geofence:{},comments:""},wokrkerInfo:{id:0,firstName:"",lastName:"",latitude:0,longitude:0,postCode:" ",phoneNumber:"",emailAddress:"",profileImageURL:""},customerCompanyInfo:{id:36,name:"",trade_name:"",email:"",phone_number:"",logo:"",postcode:"",latitude:0,longitude:0,business_details:"",reg_no:"",business_type:"",covered_distance:75,vat_no:null,address:"",color:"",created_at:"",company:0,industry:0},date:"",start:"",end:"",shift:"",hourlyRate:0,notes:"",createdAt:"",createdBy:"",UpdatedAt:null,updatedBy:"",company:0,site:0,worker:0,customerCompany:0,job:null,jobsList:[{id:"",end:"",start:"",jobName:"",resourceId:""}]}),S=()=>{d("update:modalHandler",!1),u.getRota()},C=async()=>{try{const e=await b.get(`/v3/api/rota/${u.rotaId}/detail/`);R.value=e.data,v.value=e.data.jobsList.map((e=>({...e,title:e.jobName}))),N()}catch(e){console.log(e)}},I=async()=>{try{await b.delete(`/v3/api/rota/${u.rotaId}/`);S(),y.error("Job deleted successfuly")}catch(e){console.log(e)}},M=()=>{h.push({name:"/sidebar/company/workers/[id]",params:{id:R.value.wokrkerInfo.id}}),console.log("clickingg")},N=()=>{P.value.resources=v.value,P.value.events=v.value},P=a({plugins:[Y],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineDay",height:"auto",resourceAreaWidth:"10%",selectable:!0,now:"2024-04-23",headerToolbar:{left:"",center:"",right:""},droppable:!0,editable:!0,views:{resourceTimelineDay:{type:"timeline",duration:{days:2},slotDuration:"00:30:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}},resourceAreaHeaderContent:"Jobs",eventClick:e=>{console.log("clicking on",e.event.id)}});return l((async()=>{await C(),((e,t,a,l)=>{const s=new google.maps.LatLng(e,t),i=new google.maps.LatLng(a,l);p=new google.maps.Map(document.getElementById("myMap"),{center:s,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:7}),m=new google.maps.DirectionsService,f=new google.maps.DirectionsRenderer,f.setMap(p);const o={origin:s,destination:i,travelMode:google.maps.TravelMode.DRIVING};m.route(o,(function(e,t){t===google.maps.DirectionsStatus.OK?f.setDirections(e):console.error("Error fetching directions: "+t)})),new google.maps.Marker({position:s,map:p,title:"Worker Location"}),new google.maps.Marker({position:i,map:p,title:"Site Location"})})(R.value.wokrkerInfo.latitude,R.value.wokrkerInfo.longitude,R.value.siteInfo.latitude,R.value.siteInfo.longitude)})),(t,a)=>{const l=G,d=T,p=F,m=ka,f=e,v=Wt,h=ot;return s(),i(D,null,[o(f,{open:u.timeSheetDetailModal,title:"Rota Detail",size:"xl",actions:"right",onClose:S},{content:n((()=>[r("div",Ra,[r("div",Sa,[r("div",_a,[r("div",Ca,[r("i",{style:{position:"absolute",top:"44px",left:"166px"},class:"fas fa-pencil-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:a[0]||(a[0]=e=>x.value=!0)}),r("i",{style:{position:"absolute",top:"44px",left:"190px",color:"var(--danger)"},class:"fas fa-trash-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:a[1]||(a[1]=()=>{w.value=!w.value})}),r("div",Ia,[o(d,{radius:"large",elevated:""},{default:n((()=>[r("div",Ea,[r("div",Da,[o(l,{onClick:M,picture:R.value.wokrkerInfo.profileImageURL,size:"big",squared:""},null,8,["picture"])]),r("div",Ta,[r("div",Ma,[r("div",null,[r("h3",Na,c(R.value.wokrkerInfo?R.value.wokrkerInfo.firstName:"------")+" "+c(R.value.wokrkerInfo?R.value.wokrkerInfo.lastName:"------"),1)]),r("div",{onClick:M,class:"is-flex cus-align-center"},Oa)]),r("div",Pa,[Va,r("p",ja,c(R.value.wokrkerInfo?R.value.wokrkerInfo.phoneNumber:"------"),1)]),r("div",Aa,[Ha,r("p",za,c(R.value.wokrkerInfo?R.value.wokrkerInfo.emailAddress:"------"),1)]),r("div",Wa,[La,r("p",Ua,c(R.value.wokrkerInfo?R.value.wokrkerInfo.postCode:"------"),1)])])])])),_:1})]),r("div",Ba,[o(d,{radius:"large",elevated:""},{default:n((()=>[r("div",Ga,[r("div",$a,[r("div",qa,[r("div",Fa,[Ja,r("p",Ya,c(R.value.siteInfo?R.value.siteInfo.name:"------"),1)]),r("div",Ka,[Za,r("p",Xa,c(R.value.siteInfo?R.value.siteInfo.address:"------"),1)])])]),r("div",Qa,[r("div",el,[r("div",tl,[al,r("p",ll,c(R.value?R.value.date:"------"),1)]),r("div",sl,[il,r("p",ol,c(R.value?R.value.start:"-- --")+" "+c(R.value?R.value.end:"-- --"),1)])])]),r("div",nl,[r("div",rl,[r("div",dl,[o(l,{picture:R.value.customerCompanyInfo?R.value.customerCompanyInfo.logo:"/images/logoplaceholder.png",size:"medium",rounded:""},null,8,["picture"])]),r("div",cl,[o(l,{picture:"day"==R.value.shift?"/images/dayTime.png":"/images/nightTime.png",size:"medium",rounded:""},null,8,["picture"])])])])])])),_:1})])])]),ul,r("div",pl,[o(g(J),{options:P.value},{eventContent:n((e=>[r("div",ml,[gl,e.event.id?(s(),k(p,{key:0,light:"",color:"info",class:"mr-5"},{default:n((()=>[r("span",fl,"Job-00"+c(e.event.id),1)])),_:2},1024)):_("",!0),r("p",vl,c(e.event.extendedProps.jobName),1)])])),_:1},8,["options"])])])]),o(d,{class:"mt-3",radius:"large",elevated:""},{default:n((()=>[o(m,{timesheetId:u.timesheetId},null,8,["timesheetId"])])),_:1})])),action:n((()=>[])),cancel:n((()=>[hl])),_:1},8,["open"]),x.value?(s(),k(v,{key:0,editRotaModalOpen:x.value,rotaId:R.value.id,"onUpdate:modalHandler":a[2]||(a[2]=e=>x.value=!1),"onUpdate:OnSuccess":C},null,8,["editRotaModalOpen","rotaId"])):_("",!0),w.value?(s(),k(h,{key:1,actionVerificationModal:w.value,captionText:"delete job",message:"Are you sure you want to delete this job permanentaly, if you do so then you won't be able to recover it again?","onUpdate:OnSuccess":I},null,8,["actionVerificationModal"])):_("",!0)],64)}}}),bl=e=>(h("data-v-39435e54"),e=e(),y(),e),xl={class:"modal-form columns is-multiline",id:"addRota"},wl={class:"field column is-12 mb-0"},kl={class:"columns is-multiline mb-3"},Rl={class:"field is-flex column is-12 mb-0"},Sl=bl((()=>r("h1",null,"Selected dates:",-1))),_l={class:"field column is-6 mb-0"},Cl=bl((()=>r("label",null,"Select customer company*",-1))),Il={class:"multiselect-single-label"},El=["src"],Dl=["src"],Tl={class:"field column is-6 mb-0"},Ml=bl((()=>r("label",null,"Select Site *",-1))),Nl={class:"multiselect-single-label"},Ol={class:"field column is-6 mb-0"},Pl=bl((()=>r("label",{class:"mb-2"},"Select Worker *",-1))),Vl={class:"multiselect-single-label"},jl=["src"],Al=["src"],Hl={class:"field column is-3 mb-0"},zl={class:"field column is-3 mb-0"},Wl={class:"field column is-12 mb-0"},Ll=bl((()=>r("label",null,"Select Job ",-1))),Ul={class:"multiselect-single-label"},Bl={class:"column is-12 mb-0"},Gl={key:0,class:"field column is-6 mb-0"},$l={key:1,class:"field column is-6 mb-0"},ql={key:2,class:"field column is-6 mb-0"},Fl={key:3,class:"field column is-6 mb-0"},Jl={key:4,class:"field column is-12 mb-0",style:{width:"100%",display:"flex","justify-content":"flex-end",float:"right"}},Yl={class:"column is-12"},Kl={class:"p-2 is-flex",style:{position:"relative",width:"100%"}},Zl=["onClick"],Xl=[bl((()=>r("i",{class:"iconify close","data-icon":"feather:x-circle","aria-hidden":"true",style:{"font-size":"1.5rem"}},null,-1)))],Ql=bl((()=>r("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"white",display:"flex","align-items":"center"}},null,-1))),es={class:"item-name dark-inverted",style:{"font-weight":"500"}},ts={style:{"font-weight":"500","margin-bottom":"0px","padding-left":"5px",color:"white"}},as=bl((()=>r("div",{class:"head-info"},[r("div",{class:"head-progress"})],-1))),ls={class:"body-inner-content"},ss={class:"field columns is-multiline mb-0"},is={class:"column is-12"},os={class:"columns is-multiline space-around"},ns={class:"field column is-5 mb-0"},rs=bl((()=>r("label",null,"Charge Rate",-1))),ds={class:"control"},cs={class:"field column is-5 mb-0"},us=bl((()=>r("label",null,"Charge Hours",-1))),ps={class:"control"},ms={class:"field column is-11 mb-0"},gs=bl((()=>r("label",null,"Notes",-1))),fs={class:"control"},vs=t({__name:"AddRotaModal",props:{AddRotaModalOpen:{type:Boolean},selectedDatesArray:{},workerId:{}},emits:["update:modalHandler","update:OnSuccess","remove-date"],setup(t,{emit:f}){const h=t,y=W(),b=a(!1),S=O(),C=z(),I=a(!1),E=a(""),T=a(""),N=a("");let L=a([]);const U=a("");a("");const B=a([]),G=a([]);let $=a([]),q=a([]),K=a([]);a([{id:0,firstName:"",lastName:"",profileImageURL:""}]);const Z=[{title:"Additional Information",content:"Add additional information about rota, rate or worker"}],X=a([{id:0,jobName:"",description:"",shift:"",startDate:"",endDate:"",startTime:"08:00:00",endTime:"16:00:00",hourlyRate:0,overtimeRate:0,isActive:!1,jobType:"",color:"",isApproval:!0,createdAt:"",updatedAt:null,workingDays:[],contractSite:0}]),Q=a({id:0,jobName:"",start:"",end:""}),ee=a({dates:[],id:0,start:"08:00",end:"16:00",hours:0,shift:"",hourlyRate:0,notes:"",createdBy:"",UpdatedAt:"",updatedBy:"",company:"",site:"",worker:"",customerCompany:"",job:"",jobsList:[]}),te=()=>{f("update:modalHandler",!1)},ae=()=>{G.value=G.value.filter((e=>!e.hasOwnProperty("display"))),G.value.push({start:`2024-04-23T${ee.value.start}`,end:`2024-04-23T${ee.value.end}`,display:"background"}),le.value.resources=G.value,le.value.events=G.value},le=a({plugins:[Y],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineDay",height:"auto",resourceAreaWidth:"10%",selectable:!0,now:"2024-04-23",headerToolbar:{left:"",center:"",right:""},droppable:!0,editable:!0,views:{resourceTimelineDay:{type:"timeline",duration:{days:2},slotDuration:"00:30:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}},resourceAreaHeaderContent:"Jobs"}),se=async()=>{b.value=!0;try{await C.post("/v3/api/rota/create/",{dates:JSON.stringify(h.selectedDatesArray),start:ee.value.start,end:ee.value.end,shift:ee.value.shift,hourlyRate:ee.value.hourlyRate,notes:ee.value.notes,createdBy:ee.value.createdBy,UpdatedAt:ee.value.UpdatedAt,updatedBy:ee.value.updatedBy,company:y.loggedCompany.id,site:T.value,worker:E.value,customerCompany:U.value,job:ee.value.job,jobsList:JSON.stringify(G.value)});f("update:OnSuccess",null),S.success("Rota Added Successfuly"),b.value=!1,te()}catch(e){console.log(e),S.error("You're assigning the same worker on the same date please try different."),b.value=!1}},ie=()=>{Q.value.start=`2024-04-23T${Q.value.start}`,Q.value.end=`2024-04-23T${Q.value.end}`,Q.value.resourceId=Q.value.id;const e={...Q.value};G.value.push(e),ae(),Q.value.id=0,Q.value.end="",Q.value.start="",Q.value.jobName="",S.success("Job Added")};return x(N,((e,t)=>{console.log("wactch id",N);const a=B.value.find((t=>t.id==e));a&&(G.value.push({id:a.id,jobName:a.jobName,start:`2024-04-23T${a.startTime}`,end:`2024-04-23T${a.endTime}`,resourceId:a.id,title:a.jobName}),console.log("selected job",a),ae())})),x(U,((e,t)=>{(async()=>{try{const e=await C.get(`/v3/api/site/customer-company/${U.value}/`);L.value=e.data.map((e=>({value:e.id.toString(),name:`${e.name} - ${e.contractInfo.name}`}))),e.data&&(T.value=e.data[0].id)}catch(e){console.log(e)}})()})),x(T,((e,t)=>{(async()=>{try{const e=await C.get(`/v3/api/jobs/site/${T.value}/`,{});X.value=e.data,B.value=e.data.jobs,console.log("jobs",B.value),K.value=e.data.jobs.map((e=>({value:e.id.toString(),name:e.jobName})))}catch(e){}})()})),x([()=>ee.value.start,()=>ee.value.end],(([e,t],[a,l])=>{ae()})),l((()=>{(async()=>{try{const e=await C.get(`/v3/api/worker/${y.loggedCompany.id}/worker-short-info/`);q.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL}))),E.value=h.workerId}catch{S.error("Invalid data")}finally{b.value=!1}})(),ae(),(async()=>{b.value=!0;const e=await C.get(`/v3/api/customer-company/company/${y.loggedCompany.id}`);$.value=e.data.map((e=>({value:e.id.toString(),name:e.name,icon:e.logo?e.logo:"/default/icon.png"}))),e.data&&(U.value=e.data[0].id),b.value=!1})(),h.workerId&&(E.value=h.workerId.toString())})),(t,a)=>{const l=F,y=qe,x=H,S=w("Multiselect"),C=A,O=j,z=V,W=$e,B=v,Y=P,X=e;return s(),k(X,{is:"form",size:"xl",open:h.AddRotaModalOpen,title:"Add Rota",actions:"right",onSubmit:R(se,["prevent"]),onClose:te},{content:n((()=>[r("div",xl,[r("div",wl,[r("div",kl,[r("div",Rl,[Sl,o(x,{class:"is-flex"},{default:n((()=>[(s(!0),i(D,null,M(h.selectedDatesArray,((e,t)=>(s(),k(y,{addons:"",key:t},{default:n((()=>[o(l,{light:"",class:"ml-2",label:e,color:"primary",outlined:"",rounded:""},null,8,["label"]),o(l,{rounded:"",outlined:"",remove:"",onClick:e=>(e=>{f("remove-date",e)})(t)},null,8,["onClick"])])),_:2},1024)))),128))])),_:1})]),r("div",_l,[Cl,o(C,{class:"pl-2"},{default:n((({id:e})=>[o(x,null,{default:n((()=>[o(S,{required:"",modelValue:g(U),"onUpdate:modelValue":a[0]||(a[0]=e=>p(U)?U.value=e:null),attrs:{id:e},placeholder:"Select customer company",label:"name",options:g($),searchable:!0,"track-by":"name",height:300,class:"lg-multiselect"},{singlelabel:n((({value:e})=>[r("div",Il,[r("img",{style:{width:"30px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,El),d(" "+c(e.name),1)])])),option:n((({option:e})=>[r("img",{style:{width:"40px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Dl),d(" "+c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",Tl,[Ml,o(C,{class:"pl-2"},{default:n((({id:e})=>[o(x,null,{default:n((()=>[o(S,{required:"",modelValue:g(T),"onUpdate:modelValue":a[1]||(a[1]=e=>p(T)?T.value=e:null),attrs:{id:e},placeholder:"Select a site",label:"name",options:g(L),searchable:!0,"track-by":"name",height:40},{singlelabel:n((({value:e})=>[r("div",Nl,c(e.name),1)])),option:n((({option:e})=>[d(c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",Ol,[Pl,o(C,{class:""},{default:n((({id:e})=>[o(x,null,{default:n((()=>[o(S,{required:"",modelValue:g(E),"onUpdate:modelValue":a[2]||(a[2]=e=>p(E)?E.value=e:null),attrs:{id:e},placeholder:"Select worker",label:"name",options:g(q),searchable:!0,"track-by":"name",height:400},{singlelabel:n((({value:e})=>[r("div",Vl,[r("img",{style:{width:"24px",height:"24px"},class:"select-label-icon mr-2",src:e.icon,alt:""},null,8,jl),d(" "+c(e.name),1)])])),option:n((({option:e})=>[r("img",{style:{width:"30px","padding-right":"6px"},class:"select-option-icon mr-2",src:e.icon,alt:""},null,8,Al),d(" "+c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",Hl,[o(C,null,{default:n((()=>[o(O,null,{default:n((()=>[d("Start Time *")])),_:1}),o(x,null,{default:n((()=>[o(z,{required:"",modelValue:g(ee).start,"onUpdate:modelValue":a[3]||(a[3]=e=>g(ee).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",zl,[o(C,null,{default:n((()=>[o(O,null,{default:n((()=>[d("End Time *")])),_:1}),o(x,null,{default:n((()=>[o(z,{required:"",modelValue:g(ee).end,"onUpdate:modelValue":a[4]||(a[4]=e=>g(ee).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})]),r("div",Wl,[Ll,o(C,{class:"pl-2"},{default:n((({id:e})=>[o(x,null,{default:n((()=>[o(S,{modelValue:g(N),"onUpdate:modelValue":a[5]||(a[5]=e=>p(N)?N.value=e:null),attrs:{id:e},placeholder:"Select a job",label:"name",options:g(K),searchable:!0,"track-by":"name",height:100},{singlelabel:n((({value:e})=>[r("div",Ul,c(e.name),1)])),option:n((({option:e})=>[d(c(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),r("div",Bl,[o(C,null,{default:n((()=>[o(x,null,{default:n((()=>[o(W,{modelValue:g(I),"onUpdate:modelValue":a[6]||(a[6]=e=>p(I)?I.value=e:null),label:"Create new jobs"},null,8,["modelValue"])])),_:1})])),_:1})]),g(I)?(s(),i("div",Gl,[o(C,null,{default:n((()=>[o(O,null,{default:n((()=>[d("Job Name")])),_:1}),o(x,null,{default:n((()=>[o(z,{modelValue:g(Q).jobName,"onUpdate:modelValue":a[7]||(a[7]=e=>g(Q).jobName=e),type:"text",placeholder:"Job name"},null,8,["modelValue"])])),_:1})])),_:1})])):_("",!0),g(I)?(s(),i("div",$l,[o(C,null,{default:n((()=>[o(O,null,{default:n((()=>[d("Job Id")])),_:1}),o(x,null,{default:n((()=>[o(z,{modelValue:g(Q).id,"onUpdate:modelValue":a[8]||(a[8]=e=>g(Q).id=e),type:"text",placeholder:"Job id"},null,8,["modelValue"])])),_:1})])),_:1})])):_("",!0),g(I)?(s(),i("div",ql,[o(C,null,{default:n((()=>[o(O,null,{default:n((()=>[d("Start Time *")])),_:1}),o(x,null,{default:n((()=>[o(z,{modelValue:g(Q).start,"onUpdate:modelValue":a[9]||(a[9]=e=>g(Q).start=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])):_("",!0),g(I)?(s(),i("div",Fl,[o(C,null,{default:n((()=>[o(O,null,{default:n((()=>[d("End Time *")])),_:1}),o(x,null,{default:n((()=>[o(z,{modelValue:g(Q).end,"onUpdate:modelValue":a[10]||(a[10]=e=>g(Q).end=e),type:"time"},null,8,["modelValue"])])),_:1})])),_:1})])):_("",!0),g(I)?(s(),i("div",Jl,[o(B,{color:"primary",onClick:ie,elevated:"",rounded:"",light:""},{default:n((()=>[d(" Add ")])),_:1})])):_("",!0),r("div",Yl,[o(g(J),{options:g(le)},{eventContent:n((e=>[r("div",Kl,[e.event.extendedProps.jobName?(s(),i("span",{key:0,style:{position:"absolute",top:"0.7rem",right:"1rem","z-index":"9999909"},onClick:()=>{return t=e.event.id,t=parseInt(t),G.value=G.value.filter((e=>e.id!==t)),void ae();var t},class:"close-icon"},Xl,8,Zl)):_("",!0),Ql,e.event.id?(s(),k(l,{key:1,light:"",color:"info",class:"mr-5"},{default:n((()=>[r("span",es,"Job-00"+c(e.event.id),1)])),_:2},1024)):_("",!0),r("p",ts,c(e.event.extendedProps.jobName),1)])])),_:1},8,["options"])])]),o(Y,{items:Z,"with-chevron":"",style:{"border-radius":"14px"}},{"collapse-item-head":n((e=>[as])),"collapse-item-content":n((e=>[r("div",ls,[r("div",ss,[r("div",is,[r("div",os,[r("div",ns,[rs,r("div",ds,[u(r("input",{type:"number",name:"rate","onUpdate:modelValue":a[11]||(a[11]=e=>g(ee).hourlyRate=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[m,g(ee).hourlyRate]])])]),r("div",cs,[us,r("div",ps,[u(r("input",{type:"number",name:"rate","onUpdate:modelValue":a[12]||(a[12]=e=>g(ee).hours=e),class:"input is-primary-focus",placeholder:"Rate per hour"},null,512),[[m,g(ee).hours]])])]),r("div",ms,[gs,r("div",fs,[u(r("input",{type:"text",name:"note","onUpdate:modelValue":a[13]||(a[13]=e=>g(ee).notes=e),class:"input is-primary-focus",placeholder:"Enter Note"},null,512),[[m,g(ee).notes]])])])])])])])])),_:1})])])])),action:n((()=>[o(B,{type:"submit",color:"primary",loading:g(b),raised:""},{default:n((()=>[d("Save")])),_:1},8,["loading"])])),_:1},8,["open","onSubmit"])}}}),hs=b(vs,[["__scopeId","data-v-39435e54"]]);class ys extends de{constructor(){super(...arguments),this.headerElRef=Q()}renderSimpleLayout(e,t){let{props:a,context:l}=this,s=[],i=ce(l.options);return e&&s.push({type:"header",key:"header",isSticky:i,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),ee(pe,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},ee(ue,{liquid:!a.isHeightAuto&&!a.forPrint,collapsibleWidth:a.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,a,l){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:i,context:o}=this,n=!i.forPrint&&ce(o.options),r=!i.forPrint&&me(o.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:n,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),r&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ge}]}),ee(pe,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},ee(s,{liquid:!i.isHeightAuto&&!i.forPrint,forPrint:i.forPrint,collapsibleWidth:i.forPrint,colGroups:[{cols:[{span:a,minWidth:l}]}],sections:d}))}}function bs(e,t){let a=[];for(let l=0;l<t;l+=1)a[l]=[];for(let l of e)a[l.row].push(l);return a}function xs(e,t){let a=[];for(let l=0;l<t;l+=1)a[l]=[];for(let l of e)a[l.firstCol].push(l);return a}function ws(e,t){let a=[];if(e){for(let l=0;l<t;l+=1)a[l]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)a[t.row].segs.push(t)}else for(let l=0;l<t;l+=1)a[l]=null;return a}const ks=K({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Rs(e){let{display:t}=e.eventRange.ui;return"list-item"===t||"auto"===t&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class Ss extends Re{render(){let{props:e}=this;return ee(Se,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:ks,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class _s extends Re{render(){let{props:e,context:t}=this,{options:a}=t,{seg:l}=e,s=a.eventTimeFormat||ks,i=_e(l,s,t,!0,e.defaultDisplayEventEnd);return ee(Ie,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Ce(e.seg,t),defaultGenerator:Cs,timeText:i,isResizing:!1,isDateSelecting:!1}))}}function Cs(e){return ee(he,null,ee("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&ee("div",{className:"fc-event-time"},e.timeText),ee("div",{className:"fc-event-title"},e.event.title||ee(he,null," ")))}class Is extends Re{constructor(){super(...arguments),this.compileSegs=X(Es)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:a}=this.compileSegs(e.singlePlacements);return ee(ze,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:a,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return ee(he,null,t.map((t=>{let l=t.eventRange.instance.instanceId;return ee("div",{className:"fc-daygrid-event-harness",key:l,style:{visibility:a[l]?"hidden":""}},Rs(t)?ee(_s,Object.assign({seg:t,isDragging:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},ye(t,e.todayRange))):ee(Ss,Object.assign({seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},ye(t,e.todayRange))))})))}})}}function Es(e){let t=[],a=[];for(let l of e)t.push(l.seg),l.isVisible||a.push(l.seg);return{allSegs:t,invisibleSegs:a}}const Ds=K({week:"narrow"});class Ts extends de{constructor(){super(...arguments),this.rootElRef=Q(),this.state={dayNumberId:Ee()},this.handleRootEl=e=>{De(this.rootElRef,e),De(this.props.elRef,e)}}render(){let{context:e,props:t,state:a,rootElRef:l}=this,{options:s,dateEnv:i}=e,{date:o,dateProfile:n}=t;const r=t.showDayNumber&&function(e,t,a){const{start:l,end:s}=t,i=Pe(s,-1),o=a.getYear(l),n=a.getMonth(l),r=a.getYear(i),d=a.getMonth(i);return!(o===r&&n===d)&&Boolean(e.valueOf()===l.valueOf()||1===a.getDay(e)&&e.valueOf()<s.valueOf())}(o,n.currentRange,i);return ee(Oe,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":a.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Ms,date:o,dateProfile:n,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:r,extraRenderProps:t.extraRenderProps},((i,n)=>ee("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&ee(Te,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Me(e,o,"week"),date:o,defaultFormat:Ds}),!n.isDisabled&&(t.showDayNumber||Ne(s)||t.forceDayTop)?ee("div",{className:"fc-daygrid-day-top"},ee(i,{elTag:"a",elClasses:["fc-daygrid-day-number",r&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Me(e,o)),{id:a.dayNumberId})})):t.showDayNumber?ee("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},ee("a",{className:"fc-daygrid-day-number"}," ")):void 0,ee("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,ee("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},ee(Is,{allDayDate:o,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:l,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),ee("div",{className:"fc-daygrid-day-bg"},t.bgContent))))}}function Ms(e){return e.dayNumberText||ee(he,null," ")}function Ns(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function Os(e){return Ns(e)+":"+e.lastCol}function Ps(e,t,a,l,s,i,o){let n=new js((t=>{let a=e[t.index].eventRange.instance.instanceId+":"+t.span.start+":"+(t.span.end-1);return s[a]||1}));n.allowReslicing=!0,n.strictOrder=l,!0===t||!0===a?(n.maxCoord=i,n.hiddenConsumes=!0):"number"==typeof t?n.maxStackCnt=t:"number"==typeof a&&(n.maxStackCnt=a,n.hiddenConsumes=!0);let r=[],d=[];for(let h=0;h<e.length;h+=1){let t=e[h],a=Os(t);null!=s[a]?r.push({index:h,span:{start:t.firstCol,end:t.lastCol+1}}):d.push(t)}let c=n.addSegs(r),u=n.toRects(),{singleColPlacements:p,multiColPlacements:m,leftoverMargins:g}=function(e,t,a){let l=function(e,t){let a=[];for(let l=0;l<t;l+=1)a.push([]);for(let l of e)for(let e=l.span.start;e<l.span.end;e+=1)a[e].push(l);return a}(e,a.length),s=[],i=[],o=[];for(let n=0;n<a.length;n+=1){let e=l[n],r=[],d=0,c=0;for(let l of e){let e=t[l.index];r.push({seg:Vs(e,n,n+1,a),isVisible:!0,isAbsolute:!1,absoluteTop:l.levelCoord,marginTop:l.levelCoord-d}),d=l.levelCoord+l.thickness}let u=[];d=0,c=0;for(let l of e){let e=t[l.index],s=l.span.end-l.span.start>1,i=l.span.start===n;c+=l.levelCoord-d,d=l.levelCoord+l.thickness,s?(c+=l.thickness,i&&u.push({seg:Vs(e,l.span.start,l.span.end,a),isVisible:!0,isAbsolute:!0,absoluteTop:l.levelCoord,marginTop:0})):i&&(u.push({seg:Vs(e,l.span.start,l.span.end,a),isVisible:!0,isAbsolute:!1,absoluteTop:l.levelCoord,marginTop:c}),c=0)}s.push(r),i.push(u),o.push(c)}return{singleColPlacements:s,multiColPlacements:i,leftoverMargins:o}}(u,e,o),f=[],v=[];for(let h of d){m[h.firstCol].push({seg:h,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=h.firstCol;e<=h.lastCol;e+=1)p[e].push({seg:Vs(h,e,e+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let h=0;h<o.length;h+=1)f.push(0);for(let h of c){let t=e[h.index],a=h.span;m[a.start].push({seg:Vs(t,a.start,a.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let e=a.start;e<a.end;e+=1)f[e]+=1,p[e].push({seg:Vs(t,e,e+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let h=0;h<o.length;h+=1)v.push(g[h]);return{singleColPlacements:p,multiColPlacements:m,moreCnts:f,moreMarginTops:v}}function Vs(e,t,a,l){if(e.firstCol===t&&e.lastCol===a-1)return e;let s=e.eventRange,i=s.range,o=Ve(i,{start:l[t].date,end:oe(l[a-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:a-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:o},isStart:e.isStart&&o.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&o.end.valueOf()===i.end.valueOf()})}class js extends je{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:a}=this,l=e=>!this.forceHidden[Ae(e)];for(let s=0;s<a.length;s+=1)a[s]=a[s].filter(l);return t}handleInvalidInsertion(e,t,a){const{entriesByLevel:l,forceHidden:s}=this,{touchingEntry:i,touchingLevel:o,touchingLateral:n}=e;if(this.hiddenConsumes&&i){const e=Ae(i);if(!s[e])if(this.allowReslicing){const e=Object.assign(Object.assign({},i),{span:He(i.span,t.span)});s[Ae(e)]=!0,l[o][n]=e,a.push(e),this.splitEntry(i,t,a)}else s[e]=!0,a.push(i)}super.handleInvalidInsertion(e,t,a)}}class As extends de{constructor(){super(...arguments),this.cellElRefs=new fe,this.frameElRefs=new fe,this.fgElRefs=new fe,this.segHarnessRefs=new fe,this.rootElRef=Q(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:a}=this,{options:l}=a,s=e.cells.length,i=xs(e.businessHourSegs,s),o=xs(e.bgEventSegs,s),n=xs(this.getHighlightSegs(),s),r=xs(this.getMirrorSegs(),s),{singleColPlacements:d,multiColPlacements:c,moreCnts:u,moreMarginTops:p}=Ps(ve(e.fgEventSegs,l.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,l.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),m=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return ee("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map(((t,a)=>{let l=this.renderFgSegs(a,e.forPrint?d[a]:c[a],e.todayRange,m),s=this.renderFgSegs(a,function(e,t){if(!e.length)return[];let a=function(e){let t={};for(let a of e)for(let e of a)t[e.seg.eventRange.instance.instanceId]=e.absoluteTop;return t}(t);return e.map((e=>({seg:e,isVisible:!0,isAbsolute:!0,absoluteTop:a[e.eventRange.instance.instanceId],marginTop:0})))}(r[a],c),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return ee(Ts,{key:t.key,elRef:this.cellElRefs.createRef(t.key),innerElRef:this.frameElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===a,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,moreCnt:u[a],moreMarginTop:p[a],singlePlacements:d[a],fgContentElRef:this.fgElRefs.createRef(t.key),fgContent:ee(he,null,ee(he,null,l),ee(he,null,s)),bgContent:ee(he,null,this.renderFillSegs(n[a],"highlight"),this.renderFillSegs(i[a],"non-business"),this.renderFillSegs(o[a],"bg-event")),minHeight:e.cellMinHeight})})))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let a=this.props;this.updateSizing(!Z(e,a))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,a,l,s,i,o){let{context:n}=this,{eventSelection:r}=this.props,{framePositions:d}=this.state,c=1===this.props.cells.length,u=s||i||o,p=[];if(d)for(let m of t){let{seg:e}=m,{instanceId:t}=e.eventRange.instance,g=m.isVisible&&!l[t],f=m.isAbsolute,v="",h="";f&&(n.isRtl?(h=0,v=d.lefts[e.lastCol]-d.lefts[e.firstCol]):(v=0,h=d.rights[e.firstCol]-d.rights[e.lastCol])),p.push(ee("div",{className:"fc-daygrid-event-harness"+(f?" fc-daygrid-event-harness-abs":""),key:Ns(e),ref:u?null:this.segHarnessRefs.createRef(Os(e)),style:{visibility:g?"":"hidden",marginTop:f?"":m.marginTop,top:f?m.absoluteTop:"",left:v,right:h}},Rs(e)?ee(_s,Object.assign({seg:e,isDragging:s,isSelected:t===r,defaultDisplayEventEnd:c},ye(e,a))):ee(Ss,Object.assign({seg:e,isDragging:s,isResizing:i,isDateSelecting:o,isSelected:t===r,defaultDisplayEventEnd:c},ye(e,a)))))}return p}renderFillSegs(e,t){let{isRtl:a}=this.context,{todayRange:l}=this.props,{framePositions:s}=this.state,i=[];if(s)for(let o of e){let e=a?{right:0,left:s.lefts[o.lastCol]-s.lefts[o.firstCol]}:{left:0,right:s.rights[o.firstCol]-s.rights[o.lastCol]};i.push(ee("div",{key:we(o.eventRange),className:"fc-daygrid-bg-harness",style:e},"bg-event"===t?ee(be,Object.assign({seg:o},ye(o,l))):xe(t)))}return ee(he,{},...i)}updateSizing(e){let{props:t,state:a,frameElRefs:l}=this;if(!t.forPrint&&null!==t.clientWidth){if(e){let e=t.cells.map((e=>l.currentMap[e.key]));if(e.length){let t=this.rootElRef.current,l=new ke(t,e,!0,!1);a.framePositions&&a.framePositions.similarTo(l)||this.setState({framePositions:new ke(t,e,!0,!1)})}}const s=this.state.segHeights,i=this.querySegHeights(),o=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},s),i),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let a in e){let l=Math.round(e[a].getBoundingClientRect().height);t[a]=Math.max(t[a]||0,l)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],a=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-a.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map((t=>e[t.key]))}}As.addStateEquality({segHeights:Z});class Hs extends de{constructor(){super(...arguments),this.splitBusinessHourSegs=X(bs),this.splitBgEventSegs=X(bs),this.splitFgEventSegs=X(bs),this.splitDateSelectionSegs=X(bs),this.splitEventDrag=X(ws),this.splitEventResize=X(ws),this.rowRefs=new fe}render(){let{props:e,context:t}=this,a=e.cells.length,l=this.splitBusinessHourSegs(e.businessHourSegs,a),s=this.splitBgEventSegs(e.bgEventSegs,a),i=this.splitFgEventSegs(e.fgEventSegs,a),o=this.splitDateSelectionSegs(e.dateSelectionSegs,a),n=this.splitEventDrag(e.eventDrag,a),r=this.splitEventResize(e.eventResize,a),d=a>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return ee(Be,{unit:"day"},((t,c)=>ee(he,null,e.cells.map(((t,u)=>ee(As,{ref:this.rowRefs.createRef(u),key:t.length?t[0].date.toISOString():u,showDayNumbers:a>1,showWeekNumbers:e.showWeekNumbers,todayRange:c,dateProfile:e.dateProfile,cells:t,renderIntro:e.renderRowIntro,businessHourSegs:l[u],eventSelection:e.eventSelection,bgEventSegs:s[u].filter(zs),fgEventSegs:i[u],dateSelectionSegs:o[u],eventDrag:n[u],eventResize:r[u],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ke(this.rootEl,this.rowRefs.collect().map((e=>e.getCellEls()[0])),!1,!0),this.colPositions=new ke(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:a,rowPositions:l}=this,s=a.leftToIndex(e),i=l.topToIndex(t);if(null!=i&&null!=s){let e=this.props.cells[i][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(i,s),allDay:!0},e.extraDateSpan),dayEl:this.getCellEl(i,s),rect:{left:a.lefts[s],right:a.rights[s],top:l.tops[i],bottom:l.bottoms[i]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let a=this.props.cells[e][t].date;return{start:a,end:oe(a,1)}}}function zs(e){return e.eventRange.def.allDay}class Ws extends de{constructor(){super(...arguments),this.elRef=Q(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:a,expandRows:l}=e,s=!0===a||!0===t;s&&!l&&(s=!1,t=null,a=null);let i=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",l?"":"fc-daygrid-body-natural"];return ee("div",{ref:this.elRef,className:i.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},ee("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:l?e.clientHeight:""}},e.colGroupNode,ee("tbody",{role:"presentation"},ee(Hs,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:a,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function(e,t){let a;t.currentRangeUnit.match(/year|month/)&&(a=e.querySelector(`[data-date="${We(t.currentDate)}-01"]`));a||(a=e.querySelector(`[data-date="${Le(t.currentDate)}"]`));return a}(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),a=t.closest(".fc-scroller"),l=e.getBoundingClientRect().top-t.getBoundingClientRect().top;a.scrollTop=l?l+1:0}this.needsScrollReset=!1}}}class Ls extends Ue{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class Us extends de{constructor(){super(...arguments),this.slicer=new Ls,this.tableRef=Q()}render(){let{props:e,context:t}=this;return ee(Ws,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}function Bs(e,t){let a=new ae(e.renderRange,t);return new le(a,/year|month|week/.test(e.currentRangeUnit))}re(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var Gs=Ge({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class extends ys{constructor(){super(...arguments),this.buildDayTableModel=X(Bs),this.headerRef=Q(),this.tableRef=Q()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:a}=this,l=this.buildDayTableModel(a.dateProfile,t),s=e.dayHeaders&&ee(te,{ref:this.headerRef,dateProfile:a.dateProfile,dates:l.headerDates,datesRepDistinctDays:1===l.rowCnt}),i=t=>ee(Us,{ref:this.tableRef,dateProfile:a.dateProfile,dayTableModel:l,businessHours:a.businessHours,dateSelection:a.dateSelection,eventStore:a.eventStore,eventUiBases:a.eventUiBases,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!a.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:a.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,i,l.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,i)}},dateProfileGeneratorClass:class extends se{buildRenderRange(e,t,a){let l=super.buildRenderRange(e,t,a),{props:s}=this;return function(e){let t,{dateEnv:a,currentRange:l}=e,{start:s,end:i}=l;e.snapToWeek&&(s=a.startOfWeek(s),t=a.startOfWeek(i),t.valueOf()!==i.valueOf()&&(i=ie(t,1)));if(e.fixedWeekCount){let e=a.startOfWeek(a.startOfMonth(oe(l.end,-1))),t=Math.ceil(ne(e,i));i=ie(i,6-t)}return{start:s,end:i}}({currentRange:l,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});const $s={id:"rota-celender"},qs={class:"columns is-multiline"},Fs=(e=>(h("data-v-07129a90"),e=e(),y(),e))((()=>r("div",{class:"column is-7 is-flex space-between"},[r("h6",{style:{"white-space":"nowrap"},class:"cus-main-heading mr-3 ml-1 mt-5"}," Rota View ")],-1))),Js={class:"column is-5 mt-4"},Ys={class:"list-flex-toolbar is-reversed"},Ks={class:"buttons"},Zs={class:"is-flex space-between mb-2"},Xs={key:0,style:{color:"#f89216","font-size":"16px"},class:"fas fa-sun","aria-hidden":"true"},Qs={key:1,class:"fas fa-moon",style:{color:"#3f72c8","font-size":"16px"},"aria-hidden":"true"},ei={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},ti={class:"is-flex mb-1"},ai={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},li={class:"is-flex"},si={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#666"}},ii={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#666"}},oi=t({__name:"RotaView",props:{id:{type:String,default:"0"},workerId:{type:Number,default:0},siteID:{type:Number,default:0},calendarView:{type:String,default:"dayGridMonth"}},setup(e){const t=e,u=a(""),p=a(""),m=W(),f=z(),h=a(!1),y=a(!1),b=a([]);a([]);const w=a("3773"),R=a(0);const S=a({plugins:[Gs,Fe],initialView:t.calendarView,height:"auto",selectable:!0,eventClick:function(e){h.value=!h.value,R.value=e.event.id},eventColor:"transparent",themeSystem:"bootstrap5",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},views:{dayGridMonth:{eventLimit:3},dayGridWeek:{eventLimit:50},dayGridDay:{eventLimit:50}},eventLimitClick:"popover",droppable:!0,editable:!0,dayCellDidMount:function(e){!function(e){var t=e.el;t.style.background="#fff",t.style.borderRadius="16px"}(e)},events:[],dateClick:function(e){(e=>{const t=b.value.indexOf(e.dateStr);-1!==t?(b.value.splice(t,1),e.dayEl.style.backgroundColor="#fff"):(b.value.push(e.dateStr),e.dayEl.style.backgroundColor="#C0DEFF")})(e)},datesSet:function(e){u.value=e.startStr.substring(0,10),p.value=e.endStr.substring(0,10)}}),C=()=>{b.value=[];const e=document.querySelector("#rota-celender");e&&e.querySelectorAll("td").forEach((function(e){e.removeAttribute("style")}))},I=e=>{b.value.splice(e,1)},E=async()=>{let e={company:m.loggedCompany.id,start_date:u.value,end_date:p.value};console.log("props",t.workerId),0===t.workerId?delete e.worker:0!==t.workerId&&(e.worker=t.workerId),0===t.siteID?delete e.site:0!==t.siteID&&(e.site=t.siteID);const{data:a}=await f.post("/v3/api/rota/date-range/",e);var l;S.value.events=((l=a).forEach((e=>{const t=e.start,a=e.end;e.startedTime=t,e.endedTime=a,e.start=e.date})),l),console.log("rota data",a),C()};return x([()=>u.value,()=>p.value],(([e,t],[a,l])=>{E()})),l((()=>{E()})),x((()=>t.workerId),((e,t)=>{E()})),(e,a)=>{const l=v,u=hs,p=yl;return s(),i(D,null,[r("div",$s,[r("div",qs,[Fs,r("div",Js,[r("div",Ys,[r("div",Ks,[o(l,{disabled:!b.value.length,color:"info",onClick:C,elevated:""},{default:n((()=>[d(" Clear Selection ("+c(b.value.length)+") ",1)])),_:1},8,["disabled"]),o(l,{disabled:!b.value.length,color:"primary",onClick:a[0]||(a[0]=e=>y.value=!y.value),elevated:""},{default:n((()=>[d(" Add Rota - Days ("+c(b.value.length)+") ",1)])),_:1},8,["disabled"])])])])]),o(g(J),{options:S.value},{eventContent:n((e=>[r("div",{class:"p-2 flex-columns event-content",style:N([{backgroundColor:"day"==e.event.extendedProps.shift?"#effaec":"#eae9f1"},{display:"flex","justify-content":"space-between",height:"90px",width:"100%","border-radius":"12px"}])},[r("div",Zs,["day"==e.event.extendedProps.shift?(s(),i("i",Xs)):(s(),i("i",Qs)),r("p",ei,c(e.event.extendedProps.startedTime?e.event.extendedProps.startedTime:"-- : --")+" - "+c(e.event.extendedProps.endedTime?e.event.extendedProps.endedTime:"----"),1)]),r("div",null,[r("div",ti,[r("p",ai,c(e.event.extendedProps.worker?`${e.event.extendedProps.worker.firstName}\n              ${e.event.extendedProps.worker.lastName}`:"Not Added"),1)]),r("div",li,[r("p",si,c(e.event.extendedProps.companyName?e.event.extendedProps.companyName:"----"),1)]),r("p",ii,c(e.event.extendedProps.siteName?e.event.extendedProps.siteName.slice(0,28):"-- -- --"),1)])],4)])),_:1},8,["options"])]),y.value?(s(),k(u,{key:0,"onUpdate:modalHandler":a[1]||(a[1]=()=>{y.value=!y.value,C()}),"onUpdate:OnSuccess":E,AddRotaModalOpen:y.value,selectedDatesArray:b.value,workerId:t.workerId,onRemoveDate:I},null,8,["AddRotaModalOpen","selectedDatesArray","workerId"])):_("",!0),h.value?(s(),k(p,{key:1,timeSheetDetailModal:h.value,timesheetId:w.value,rotaId:R.value,"onUpdate:modalHandler":a[2]||(a[2]=()=>{h.value=!1}),getRota:E},null,8,["timeSheetDetailModal","timesheetId","rotaId"])):_("",!0)],64)}}}),ni=b(oi,[["__scopeId","data-v-07129a90"]]);export{ni as _};
