import{e,s as l,x as a,v as s,r as t,b as o,_ as i,o as r,B as n,C as p,D as u,K as d,W as _,l as m,E as c,F as f,N as v,M as y,z as V}from"./index-e0cd5955.js";import{u as b,_ as g}from"./WorksheetItems.vue_vue_type_script_setup_true_lang-5c48f053.js";import{_ as j}from"./VCollapse.vue_vue_type_style_index_0_lang-3010764a.js";import{_ as x}from"./VTextarea.vue_vue_type_script_setup_true_lang-0804d4ce.js";import{_ as h}from"./VField.vue_vue_type_script_setup_true_lang-fd16b076.js";import{_ as I}from"./VControl-f6e54973.js";import{_ as T}from"./VRadio.vue_vue_type_style_index_0_lang-69e127d9.js";import{u as C}from"./useAPI-1ca2c210.js";import{u as w}from"./useNotyf-8e789831.js";import{u as D}from"./userSession-6cd011ad.js";import{u as P}from"./viewWrapper-9193d714.js";import"./VModal.vue_vue_type_style_index_0_lang-96b91895.js";import"./VInput.vue_vue_type_script_setup_true_lang-b40a410d.js";import"./useVFieldContext-63556070.js";import"./VOption.vue_vue_type_style_index_0_lang-42913ab0.js";import"./useSupportElement-0a987e1f.js";import"./VAvatar.vue_vue_type_style_index_0_lang-dac16305.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-5ffb66ef.js";import"./VLabel.vue_vue_type_script_setup_true_lang-a1bc2ec8.js";import"./proposalItems-b5d6355d.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-e2c7c1dd.js";import"./VDropdown.vue_vue_type_style_index_0_lang-ee12b32f.js";import"./VIcon.vue_vue_type_script_setup_true_lang-52c529c4.js";import"./useDropdown-410d9a2a.js";import"./notyf-e86eacdd.js";import"./useThemeColors-421d414c.js";const k={class:"modal-form columns is-multiline"},q={class:"field column is-6 mb-0"},N=u("label",null,"Title: *",-1),A={class:"control"},U={class:"column is-6"},E={class:"field column is-6"},O=u("label",null,"Approval Deadline *",-1),S={class:"control"},L={class:"field column is-6"},F=u("label",null,"Attachments",-1),M=u("div",{class:"file"},[u("label",{class:"file-label"},[u("input",{class:"file-input",type:"file",name:"resume"}),u("span",{class:"file-cta"},[u("span",{class:"file-icon"},[u("i",{class:"fas fa-cloud-upload-alt"})]),u("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),R={class:"body-inner-content"},W={class:"field columns is-multiline mb-0"},K={class:"field column is-12 mb-0"},H=u("label",{for:"",class:"label"},"Internal Notes",-1),J={class:"field column is-12 mb-0"},z=u("label",{for:"",class:"label"},"Introductory Text",-1),B={class:"field column is-12 mb-0"},Q=u("label",{for:"",class:"label"},"Closing Text",-1),X=e({__name:"ProposalDetailComponent",props:{proposalId:{},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:V}){const P=e,X=l(),Z=b();D(),w();const $=C(),G=a();s(),t({}),t(!1);const Y=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];t({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const ee=t({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});t("worksheet");const le=o((()=>i((()=>import("./ckeditor-433e508c.js").then((e=>e.c))),["assets/ckeditor-433e508c.js","assets/index-e0cd5955.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-bfbcc68a.js"]).then((e=>e.default.component)))),ae={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return r((async()=>{X.value=await i((()=>import("./ckeditor-805cd633.js").then((e=>e.c))),["assets/ckeditor-805cd633.js","assets/index-e0cd5955.js","assets/index-ce8747cd.css"]).then((e=>e.default)),(P.proposalId||G.params.id)&&(async()=>{try{const e=await $.get(`/api/lead-proposal/${G.params.id}/detail/`);ee.value=e.data,Z.getProposalCostItems(G.params.id)}catch(e){console.log(e)}})()})),(e,l)=>{const a=T,s=I,t=h,o=x,i=j,r=g;return n(),p("div",k,[u("div",q,[N,u("div",A,[d(u("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>m(ee).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[_,m(ee).title]])])]),u("div",U,[c(t,{class:"m-0 p-0",label:"Type"},{default:f((()=>[c(s,null,{default:f((()=>[c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[1]||(l[1]=e=>m(ee).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[2]||(l[2]=e=>m(ee).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[3]||(l[3]=e=>m(ee).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",E,[O,u("div",S,[d(u("input",{type:"date",name:"firstName","onUpdate:modelValue":l[4]||(l[4]=e=>m(ee).approval_deadline=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Approval deadline"},null,512),[[_,m(ee).approval_deadline]])])]),u("div",L,[F,c(t,{grouped:""},{default:f((()=>[c(s,null,{default:f((()=>[M])),_:1})])),_:1})]),c(i,{items:Y,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":f((e=>[u("div",R,[u("div",W,[u("div",K,[H,c(t,null,{default:f((()=>[c(s,null,{default:f((()=>[c(o,{modelValue:m(ee).internalNotes,"onUpdate:modelValue":l[5]||(l[5]=e=>m(ee).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",J,[z,m(X)?(n(),v(m(le),{key:0,modelValue:m(ee).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>m(ee).introductoryText=e),editor:m(X),config:ae},null,8,["modelValue","editor"])):y("",!0)]),u("div",B,[Q,m(X)?(n(),v(m(le),{key:0,modelValue:m(ee).closingText,"onUpdate:modelValue":l[7]||(l[7]=e=>m(ee).closingText=e),editor:m(X),config:ae},null,8,["modelValue","editor"])):y("",!0)])])])])),_:1}),c(r,{proposalData:m(ee),proposalId:m(ee).id},null,8,["proposalData","proposalId"])])}}}),Z=e({__name:"[id]",setup:e=>(P().setPageTitle("Lead Proposals"),V({title:"Lead Proposals - Ibex"}),(e,l)=>(n(),p("div",null,[c(X)])))});export{Z as default};
