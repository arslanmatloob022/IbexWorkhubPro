import{_ as e}from"./AddUpdateUser-b4c2c949.js";import{_ as s}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-d8b75cc8.js";import{_ as a}from"./VTag.vue_vue_type_style_index_0_lang-1598f1d1.js";import{_ as l}from"./VAvatar.vue_vue_type_style_index_0_lang-c1d7da00.js";import{_ as t}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-29fbd14b.js";import{e as i,r as n,Z as r,o,y as u,z as p,l as c,H as d,C as _,A as m,B as v,S as y,j as g,T as f,J as h,D as j,O as b,Q as k,R as x,aR as w,P as V,E as P,N as A,v as I}from"./index-1c9998f2.js";import{_ as S}from"./VField.vue_vue_type_script_setup_true_lang-d32c83cb.js";import{_ as T}from"./VControl-d9c5d1bd.js";import{_ as C}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-c711243f.js";import{_ as L,a as M}from"./search-1-dark-61831a90.js";import{u as W}from"./useAPI-a1408a11.js";import{u as N}from"./useNotyf-431b7a11.js";import{i as R}from"./index-f52ed8ce.js";import{u as O}from"./personalScoreGauge-9d423292.js";import{u as U}from"./viewWrapper-5cfdb7bc.js";import"./VModal.vue_vue_type_style_index_0_lang-55fd0f65.js";import"./VRadio.vue_vue_type_style_index_0_lang-c9c832f4.js";import"./VLabel.vue_vue_type_script_setup_true_lang-802eeb4e.js";import"./useVFieldContext-ca37e9ed.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-1d8eb6c3.js";import"./VIcon.vue_vue_type_script_setup_true_lang-59cf53a7.js";import"./VFilePond.vue_vue_type_script_lang-bec9b940.js";import"./VInput.vue_vue_type_script_setup_true_lang-0fa40a56.js";import"./useSupportElement-5b7eeae1.js";import"./userSession-b81fab96.js";import"./VFlex.vue_vue_type_style_index_0_lang-e38b5938.js";import"./VPlaceloadWrap-8d4cee10.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-cf21e824.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-b691e2ed.js";import"./notyf-be42da4a.js";import"./useThemeColors-a418b894.js";import"./billboard-5857d5e1.js";const E={key:1},F={class:"list-view-toolbar"},H={class:"list-info"},q={key:0},z={key:1},B={class:"buttons"},D={class:"page-content-inner"},G={class:"list-view list-view-v1"},Q=_("img",{class:"light-image",src:L,alt:""},null,-1),$=_("img",{class:"dark-image",src:M,alt:""},null,-1),J={class:"list-view-inner"},K={class:"list-view-item-inner"},Y={class:"meta-left"},Z=_("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),X={class:"meta-right"},ee={class:"tags"},se={class:"stats"},ae={class:"stat"},le=_("span",null,"Status",-1),te=_("div",{class:"separator"},null,-1),ie={class:"stat"},ne=_("span",null,"Active tasks",-1),re=_("div",{class:"separator"},null,-1),oe={class:"stat"},ue=_("span",null,"Pending tasks",-1),pe=i({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(i){const A=i,I=W();N();const L=n(!1),M=n({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),R=n(""),O=r((()=>R.value?M.value.filter((e=>e.username.match(new RegExp(R.value,"i"))||e.email.match(new RegExp(R.value,"i")))):M.value));console.log(O.value);const U=n(!1),pe=()=>{U.value=!0},ce=async()=>{try{L.value=!0;const e=await I.get(`/api/users/workers/?supplier=${A.supplierId}`);M.value=e.data}catch(e){console.log(e)}finally{L.value=!1}};return o((()=>{ce()})),(i,n)=>{const r=C,o=T,I=S,M=P,W=t,N=l,de=a,_e=s,me=e;return u(),p(k,null,[c(L)?(u(),d(r,{key:0})):(u(),p("div",E,[_("div",F,[m(I,null,{default:v((()=>[m(o,{icon:"feather:search"},{default:v((()=>[y(_("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>g(R)?R.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,c(R)]])])),_:1})])),_:1}),_("div",H,[1===c(O).length?(u(),p("span",q,"1 record found")):(u(),p("span",z,h(c(O).length)+" records found",1))]),_("div",B,[m(M,{color:"primary",onClick:pe,icon:"fas fa-plus",elevated:""},{default:v((()=>[j(" Worker ")])),_:1})])]),_("div",D,[_("div",G,[m(W,{class:b([0!==c(O).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:v((()=>[Q,$])),_:1},8,["class"]),_("div",J,[m(w,{name:"list-complete",tag:"div"},{default:v((()=>[(u(!0),p(k,null,x(c(O),((e,s)=>(u(),p("div",{key:s,class:"list-view-item"},[_("div",K,[m(N,{picture:e.avatar,size:"large"},null,8,["picture"]),_("div",Y,[_("h3",null,h(e.username),1),_("span",null,[Z,_("span",null,h(e.email),1)])]),_("div",X,[_("div",ee,[m(de,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),_("div",se,[_("div",ae,[_("span",null,h(e.is_active?"Active":"In-Active"),1),le]),te,_("div",ie,[_("span",null,h(e.active_tasks),1),ne]),re,_("div",oe,[_("span",null,h(e.pending_tasks),1),ue])])])])])))),128))])),_:1})])]),c(O).length>5?(u(),d(_e,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):V("",!0)])])),c(U)?(u(),d(me,{key:2,isModalOpen:c(U),supplierId:A.supplierId,userRole:"worker","onUpdate:closeModalHandler":n[1]||(n[1]=e=>U.value=!1),"onUpdate:actionUpdateHandler":ce},null,8,["isModalOpen","supplierId"])):V("",!0)],64)}}}),ce={class:"lifestyle-dashboard lifestyle-dashboard-v3"},de={class:"illustration-header"},_e={class:"p-4"},me={class:"header-meta"},ve={class:"summary-stats"},ye={class:"summary-stat"},ge=_("span",null,"Role",-1),fe={class:"summary-stat"},he=_("span",null,"Status",-1),je={class:"summary-stat"},be=_("span",null,"Phone",-1),ke={class:"summary-stat"},xe=_("span",null,"Email",-1),we={class:"summary-stat h-hidden-tablet-p"},Ve=_("span",null,"Email Notification",-1),Pe={class:"columns is-multiline is-flex-tablet-p"},Ae={class:"column is-12"},Ie=i({__name:"SubContractorProfile",setup(e){N();const s=W(),a=A();n([]),O();const t=n({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});n(!1),n("all");const i=n(!1);n([]),n([]),n([]),n([]),n({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),n({plugins:[R],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]});return n({}),o((async()=>{await(async()=>{try{i.value=!0;const e=await s.get(`/api/users/${a.params.id}`);t.value=e.data}catch(e){console.log(e)}finally{i.value=!1}})()})),(e,s)=>{const n=l,r=pe;return u(),p("div",ce,[_("div",de,[_("div",_e,[m(n,{size:"xl",squared:"",picture:c(t).avatar,alt:""},null,8,["picture"])]),_("div",me,[_("h3",null,h(c(i)?"Loading...":c(t)?.username),1),_("div",ve,[_("div",ye,[_("span",null,h(c(i)?"Loading...":c(t)?.role),1),ge]),_("div",fe,[_("span",null,h(c(i)?"Loading...":c(t)?.is_active?"Active":" In-Active"),1),he]),_("div",je,[_("span",null,h(c(i)?"Loading...":c(t)?.phoneNumber?c(t)?.phoneNumber:"N/A"),1),be]),_("div",ke,[_("span",null,h(c(i)?"Loading...":c(t)?.email),1),xe]),_("div",we,[_("span",null,h(c(i)?"Loading...":c(t).is_sentMail?"On":"Off"),1),Ve])])])]),_("div",Pe,[_("div",Ae,[m(r,{"supplier-id":c(a).params.id},null,8,["supplier-id"])])])])}}}),Se={class:""},Te=i({__name:"[id]",setup:e=>(U().setPageTitle("Sub-Contractor Info"),I({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ie;return u(),p("div",Se,[m(a)])})});export{Te as default};
