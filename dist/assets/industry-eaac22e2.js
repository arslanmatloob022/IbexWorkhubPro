import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-df2b83f3.js";import{_ as t}from"./VFlex.vue_vue_type_style_index_0_lang-b564a019.js";import{e as s,r as a,Z as l,o as i,y as n,z as o,C as r,A as u,B as d,S as c,T as p,l as m,j as v,H as _,Q as y,R as f,aR as g,P as b,J as h,K as w,I as x,D as j,E as k,v as A}from"./index-879cc21e.js";import{_ as S}from"./VInput.vue_vue_type_script_setup_true_lang-ae22abd0.js";import{_ as V}from"./VLabel.vue_vue_type_script_setup_true_lang-010b6911.js";import{_ as I}from"./VIconButton-a16d14d0.js";import{_ as C}from"./VFilePond.vue_vue_type_script_lang-25a2896d.js";import{_ as L}from"./VField.vue_vue_type_script_setup_true_lang-8fda54d1.js";import{_ as O,c as E}from"./VFlexTable.vue_vue_type_style_index_0_lang-8eb822b1.js";import{_ as D}from"./VDropdown.vue_vue_type_style_index_0_lang-5a74bf98.js";import{_ as F}from"./VAvatar.vue_vue_type_style_index_0_lang-560ded64.js";import{_ as z}from"./VControl-3a0d7b90.js";import{u as N}from"./useAPI-bba6ff57.js";import{u as R}from"./useNotyf-953388fb.js";import{u as W}from"./viewWrapper-cd4cd6f9.js";import"./useVFieldContext-1b6aa39a.js";import"./VIcon.vue_vue_type_script_setup_true_lang-8eb8745d.js";import"./useDropdown-84fb480e.js";import"./userSession-a2fa2e58.js";import"./notyf-058d7186.js";import"./useThemeColors-9b3162c4.js";const H={class:"columns"},P={class:"column is-6"},T={class:"list-flex-toolbar is-reversed"},$={class:"buttons"},K={class:"item-name dark-inverted"},U=["onClick"],B=r("div",{class:"icon"},[r("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1),Y={class:"meta"},q=r("span",null,"Edit Industry Details",-1),G=["onClick"],J=[r("div",{class:"icon"},[r("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),r("div",{class:"meta"},[r("span",null,"Remove"),r("span",null,"Remove from list")],-1)],Q={class:"column is-6"},Z={class:"is-raised s-card",style:{"border-radius":"20px"}},M={class:"mt-4 pl-5"},X={class:"title is-5 is-narrow toc-ignore is-flex is-justify-content-start"},ee={class:"mt-5 mb-4 is-flex is-align-items-center is-justify-content-center"},te=["onSubmit"],se=r("label",null,"Industry Logo *",-1),ae={class:"control is-flex is-justify-content-center"},le=["src"],ie={class:"mt-5"},ne=s({__name:"Industries",emits:["update:modalHandler","update:OnSuccess"],setup(s,{emit:A}){const W=a({id:"",name:"",industryLogo:""}),ne=a(""),oe=R(),re=N();a("");const ue=a(!1),de=a(0),ce=a(!1),pe=a(!1),me=a(!1),ve=a(!1),_e=a({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ye=[],fe={industryLogo:{label:"Industry",grow:!0,media:!0},actions:{label:"Actions",align:"end"}},ge=l((()=>{if(ne.value){const e=new RegExp(ne.value,"i");return ye.filter((t=>t.name.match(e)))}return ye})),be=async()=>{try{const e=await re.get("/v3/api/industry/",{});ye.length=0,ye.push(...e.data),ne.value="ss",ne.value=""}catch(e){console.error("ok",e)}},he=async()=>{try{_e.value.isSweetAlertOpen=!1;await re.delete(`/v3/api/industry/${de.value}/`,{});be(),oe.success("Delete Worker, Worker")}catch(e){console.error("ok",e)}ve.value=!1},we=async()=>{try{ue.value=!0;const e=new window.FormData;console.log(W.value,"formData value");for(const t in W.value)"industryLogo"===t&&null===W.value.industryLogo||e.append(t,W.value[t]);if(ve.value){await re.put(`/v3/api/industry/${W.value.id}/`,e);xe(),oe.dismissAll(),ue.value=!1,oe.success("worker updated, worker"),A("update:OnSuccess",null),be(),ve.value=!1}else{await re.post("/v3/api/industry/",e);xe(),oe.dismissAll(),oe.success("New worker added, New Worker"),ue.value=!1,A("update:OnSuccess",null),be()}}catch(e){let t=e.response.data??{};Object.values(t).forEach((e=>{e.forEach((e=>{console.log(e),oe.error(` ${e}, New Worker`)}))}))}},xe=()=>{A("update:modalHandler",!1),console.log("modal closed"),W.value={id:"",name:"",industryLogo:""}},je=(e,t)=>{const s=t.file;s&&(W.value={...W.value,industryLogo:s})},ke=(e,t)=>{W.value={...W.value,industryLogo:null}};return i((()=>{be()})),(s,a)=>{const l=z,i=F,A=E,N=D,R=O,oe=L,re=C,ye=I,be=V,xe=S,Ae=k,Se=t,Ve=e;return n(),o(y,null,[r("div",H,[r("div",P,[r("div",T,[r("div",$,[u(l,{icon:"feather:search"},{default:d((()=>[c(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>v(ne)?ne.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[p,m(ne)]])])),_:1})])]),m(ge).length?(n(),_(R,{key:0,data:m(ge),columns:fe,rounded:""},{body:d((()=>[u(g,{name:"list",tag:"div",class:"flex-list-inner"},{default:d((()=>[(n(!0),o(y,null,f(m(ge),(e=>(n(),o("div",{key:e.id,class:"flex-table-item"},[u(A,{column:{media:!0,grow:!0}},{default:d((()=>[u(i,{picture:e.industryLogo},null,8,["picture"]),r("div",null,[r("span",K,h(e.name),1)])])),_:2},1024),u(A,{column:{align:"end"}},{default:d((()=>[u(N,{class:"is-pushed-mobile",icon:"feather:more-vertical",spaced:"",right:""},{content:d((()=>[r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>(e=>{pe.value=!0,W.value={...e},ve.value=!0})(e)},[B,r("div",Y,[r("span",null,h((m(ve),"Edit")),1),q])],8,U),r("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:t=>{return s=e.id,de.value=s,void(_e.value={title:"Are you sure?",subtitle:"You will not be able to recover this Industry!",btntext:"Yes, Delete it",isSweetAlertOpen:!0});var s}},J,8,G)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):b("",!0)]),r("div",Q,[r("div",Z,[r("div",M,[r("h2",X,h(m(ve)?"Edit Industry":"Add Industry"),1)]),r("div",ee,[r("form",{onSubmit:w(we,["prevent"]),style:{width:"400px"}},[u(oe,null,{default:d((()=>[se])),_:1}),r("div",ae,[u(i,{size:"xl",class:"profile-v-avatar mt-4"},{avatar:d((()=>[m(pe)?(n(),o("img",{key:0,class:"avatar",src:null==m(W).industryLogo?"/images/avatars/placeholder.jpg":m(W).industryLogo,alt:""},null,8,le)):b("",!0),m(pe)?b("",!0):(n(),_(re,{key:1,class:"profile-filepond",name:"profile_filepond","chunk-retry-delays":[500,1e3,3e3],"label-idle":"<i class='fas fa-cloud-upload-alt' style='font-size:27px'></i>","accepted-file-types":["image/png","image/jpeg","image/gif"],"image-preview-height":140,"image-resize-target-width":140,"image-resize-target-height":140,"image-crop-aspect-ratio":"1:1","style-panel-layout":"compact circle","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom",onAddfile:je,onRemovefile:ke})),r("span",null,[m(pe)?(n(),_(ye,{key:0,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:edit-2",class:"edit-button is-edit",circle:"",tabindex:"0",onKeydown:a[1]||(a[1]=x(w((e=>ce.value=!0),["prevent"]),["space"])),onClick:a[2]||(a[2]=e=>{ce.value=!0,pe.value=!1,me.value=!0})})):b("",!0),m(me)?(n(),_(ye,{key:1,style:{position:"absolute",top:"60%",right:"-3%"},icon:"feather:arrow-left",class:"edit-button is-back",circle:"",tabindex:"0",onKeydown:a[3]||(a[3]=x(w((e=>ce.value=!1),["prevent"]),["space"])),onClick:a[4]||(a[4]=e=>{ce.value=!1,pe.value=!0,me.value=!1})})):b("",!0)])])),_:1})]),u(oe,null,{default:d((()=>[u(be,null,{default:d((()=>[j("Name *")])),_:1}),u(l,null,{default:d((()=>[u(xe,{required:"",type:"text",placeholder:"Enter Industry Name..",modelValue:m(W).name,"onUpdate:modelValue":a[5]||(a[5]=e=>m(W).name=e),onChange:a[6]||(a[6]=e=>{return t=e,console.log(t.target.name),void(W.value={...W.value,[t.target.name]:t.target.value});var t})},null,8,["modelValue"])])),_:1})])),_:1}),u(Se,{"justify-content":"end"},{default:d((()=>[r("div",ie,[u(Ae,{color:"primary",icon:m(ve)?"fas fa-edit":"fas fa-plus",elevated:"",type:"submit",loading:m(ue)},{default:d((()=>[j(h(m(ve)?"Edit":"Add"),1)])),_:1},8,["icon","loading"])])])),_:1})],40,te)])])])]),m(_e).isSweetAlertOpen?(n(),_(Ve,{key:0,isSweetAlertOpen:m(_e).isSweetAlertOpen,title:m(_e).title,subtitle:m(_e).subtitle,btntext:m(_e).btntext,onConfirm:he,onCancel:()=>m(_e).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):b("",!0)],64)}}}),oe={class:"page-content-inner"},re=s({__name:"industry",setup:e=>(W().setPageTitle("Industries"),A({title:"Industry - Arez"}),(e,t)=>{const s=ne;return n(),o("div",oe,[u(s)])})});export{re as default};
