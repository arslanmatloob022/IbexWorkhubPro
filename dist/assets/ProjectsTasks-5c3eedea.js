import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-b37463e4.js";import{_ as l}from"./SweetAlert.vue_vue_type_style_index_0_lang-b162a920.js";import{_ as a}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-b53e6aab.js";import{_ as s}from"./VTag.vue_vue_type_style_index_0_lang-2fdcd18f.js";import{_ as t}from"./VAvatar.vue_vue_type_style_index_0_lang-5c6ebac9.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-d9f08867.js";import{e as n,r as o,Z as c,o as d,au as r,B as u,C as p,l as m,N as v,D as h,E as k,F as g,K as _,W as f,j as y,J as w,H as b,G as j,T as C,U as x,V as D,M as S,O as T,ak as A,I as O,a3 as I,P as E,Q as P,R as V}from"./index-67f43547.js";import{_ as $}from"./VControl-2437476e.js";import{_ as W}from"./PlaceloadV3.vue_vue_type_style_index_0_lang-85c4751a.js";import{_ as U,a as M}from"./projects-dark-4a371d8a.js";import"./useSupportElement-4da5f803.js";import{u as N}from"./useNotyf-10791fcd.js";import{u as z}from"./useAPI-7f626f70.js";const K=e=>(E("data-v-f44e0448"),e=e(),P(),e),R={key:1},G={class:"list-flex-toolbar is-reversed"},H={class:"tabs-inner"},J={class:"tabs"},L=[K((()=>h("span",null,"All",-1)))],q=[K((()=>h("span",null,"Completed",-1)))],B=K((()=>h("li",{class:"tab-naver"},null,-1))),F={class:"flex-list-wrapper flex-list-v2"},Q={key:0,class:"tab-content is-active"},Y={class:"all-projects"},Z={class:"all-projects-header"},X={class:"header-item"},ee={class:"item-inner"},le=K((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-analytics-alt-1"},null,-1))),ae=K((()=>h("p",null,"Total Tasks",-1))),se={class:"header-item"},te={class:"item-inner"},ie=K((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-target-alt-1"},null,-1))),ne=K((()=>h("p",null,"Completed Tasks",-1))),oe={class:"header-item"},ce={class:"item-inner"},de=K((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-pie-chart-alt"},null,-1))),re=K((()=>h("p",null,"Pending Tasks",-1))),ue={class:"header-item"},pe={class:"item-inner"},me=K((()=>h("i",{"aria-hidden":"true",class:"lnil lnil-leaf"},null,-1))),ve=K((()=>h("p",null,"Active Tasks",-1))),he={key:0,class:"columns is-multiline projects-card-grid"},ke={class:"column is-6"},ge={class:"top-section"},_e={class:"head"},fe=["onClick"],ye=[K((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-play","aria-hidden":"true"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Active"),h("span",null,"Start work on this task")],-1)))],we=["onClick"],be=[K((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-playlist-alt","aria-hidden":"true"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Pending"),h("span",null,"Waiting to work on")],-1)))],je=["onClick"],Ce=[K((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-round-box-check","aria-hidden":"true"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Completed"),h("span",null,"Mark task as completed")],-1)))],xe=K((()=>h("hr",{class:"dropdown-divider"},null,-1))),De=["onClick"],Se=[K((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-pencil-alt","aria-hidden":"true"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Task detail")],-1)))],Te=["onClick"],Ae=[K((()=>h("div",{class:"icon"},[h("i",{class:"lnir lnir-trash-can-alt-1","aria-hidden":"true"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Delete "),h("span",null,"Delete this task")],-1)))],Oe={class:"body"},Ie={class:"bottom-section"},Ee={class:"foot-block"},Pe=K((()=>h("h4",{class:"heading"},"Worker(s)",-1))),Ve={class:"developers"},$e={class:"foot-block"},We=K((()=>h("h4",{class:"heading"},"Start date",-1))),Ue={class:"foot-block"},Me=K((()=>h("h4",{class:"heading"},"End date",-1))),Ne={class:"foot-block"},ze=K((()=>h("h4",{class:"heading"},"Status",-1))),Ke=K((()=>h("img",{class:"light-image is-larger",src:U,alt:""},null,-1))),Re=K((()=>h("img",{class:"dark-image is-larger",src:M,alt:""},null,-1))),Ge={key:1,class:"tab-content is-active"},He={class:"all-projects"},Je={key:0,class:"columns is-multiline projects-card-grid"},Le={class:"column is-6"},qe={class:"grid-item"},Be={class:"top-section"},Fe={class:"head"},Qe=["onClick"],Ye=[K((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Active"),h("span",null,"Start work on this task")],-1)))],Ze=["onClick"],Xe=[K((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Pending"),h("span",null,"Waiting to work on")],-1)))],el=["onClick"],ll=[K((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Completed"),h("span",null,"Mark task as completed")],-1)))],al=K((()=>h("hr",{class:"dropdown-divider"},null,-1))),sl=["onClick"],tl=[K((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-pencil"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Edit"),h("span",null,"Edit Task detail")],-1)))],il=["onClick"],nl=[K((()=>h("div",{class:"icon"},[h("i",{"aria-hidden":"true",class:"lnil lnil-archive"})],-1))),K((()=>h("div",{class:"meta"},[h("span",null,"Delete "),h("span",null,"Delete this task")],-1)))],ol={class:"body"},cl={class:"bottom-section"},dl={class:"foot-block"},rl=K((()=>h("h4",{class:"heading"},"Worker(s)",-1))),ul={class:"developers"},pl={class:"foot-block"},ml=K((()=>h("h4",{class:"heading"},"Start date",-1))),vl={class:"foot-block"},hl=K((()=>h("h4",{class:"heading"},"End date",-1))),kl={class:"foot-block"},gl=K((()=>h("h4",{class:"heading"},"Status",-1))),_l=K((()=>h("img",{class:"light-image is-larger",src:U,alt:""},null,-1))),fl=K((()=>h("img",{class:"dark-image is-larger",src:M,alt:""},null,-1))),yl=V(n({__name:"ProjectsTasks",props:{projectID:{default:""}},emits:["update:getAllTasks","update:completedTasks","update:activeTasks"],setup(n,{emit:E}){const P=n,V=z(),U=N();o(1);const M=o("");o("Edit Project"),o("Add Task");const K=o(""),yl=o("active"),wl=o(0),bl=o(!1),jl=o(!1),Cl=o(0);o({});const xl=o("");o([{id:0,username:"",email:"",phoneNumber:""}]);const Dl=o([{id:0,title:"",description:"",startDate:"",endDate:"",project:0,status:"",worker:[{id:0,username:"",email:"",role:"",avatar:""}],quantity:"",unit:"",costCode:""}]),Sl=o({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),Tl=e=>{Cl.value=e,Sl.value={title:"Delete Task?",subtitle:"Do you really want to delete this task permanently?",btntext:"Yes, Delete",isSweetAlertOpen:!0}},Al=async()=>{try{bl.value=!0;const e=await V.get(`api/task/${P.projectID}/project/`);Dl.value=e.data,console.log(e.data)}catch(e){console.log(e)}finally{bl.value=!1}},Ol={active:"#336aeb",pending:"#faad42",canceled:"#e62864",completed:"#f3c2c2ff"},Il={active:"info",pending:"warning",canceled:"danger",completed:"primary"},El=c((()=>{let e=Dl.value.filter((e=>"active"==e.status));return E("update:completedTasks",e.length),e.length})),Pl=c((()=>{let e=Dl.value.filter((e=>"pending"==e.status));return E("update:activeTasks",e.length),e.length})),Vl=c((()=>Dl.value.filter((e=>"completed"==e.status)).length)),$l=e=>{xl.value=e,jl.value=!0},Wl=()=>{Al(),jl.value=!1,xl.value=""},Ul=async(e,l)=>{try{bl.value=!0;await V.patch(`/api/task/${e}/`,{status:l,schedule_mode:localStorage.getItem("isScheduleMode")});Al(),U.success(`Task set to ${l} successfully`),wl.value=0,bl.value=!1}catch(a){console.log(a)}},Ml=async()=>{try{bl.value=!0;const e=await V.delete(`/api/task/${Cl.value}/`);console.log(e),U.success("Task deleted successfully"),Al(),Sl.value.isSweetAlertOpen=!1,wl.value=0}catch(e){console.log(e)}finally{bl.value=!1}},Nl=c((()=>{if(K.value){const e=new RegExp(K.value,"i");return Dl.value.filter((l=>"completed"!=l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return Dl.value.filter((e=>"completed"!=e.status))})),zl=c((()=>{if(K.value){const e=new RegExp(K.value,"i");return Dl.value.filter((l=>"completed"==l.status&&(l.title.match(e)||l.description.match(e)||l.status.match(e))))}return Dl.value.filter((e=>"completed"==e.status))}));return d((()=>{Al()})),(n,o)=>{const c=W,d=$,E=T,V=A,U=i,N=t,z=s,wl=a,Cl=l,Kl=e,Rl=r("tooltip");return u(),p(x,null,[m(bl)?(u(),v(c,{key:0})):(u(),p("div",R,[h("div",G,[k(V,null,{default:g((()=>[k(d,{class:"mr-2 h-hidden-mobile",icon:"feather:search"},{default:g((()=>[_(h("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>y(K)?K.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[f,m(K)]])])),_:1}),k(E,{onClick:o[1]||(o[1]=e=>$l()),color:"primary",icon:"fas fa-plus",elevated:"",raised:""},{default:g((()=>[w("Task")])),_:1})])),_:1}),h("div",H,[h("div",J,[h("ul",null,[h("li",{class:b(["active"===m(yl)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:o[2]||(o[2]=j(O((e=>yl.value="active"),["prevent"]),["space"])),onClick:o[3]||(o[3]=e=>yl.value="active")},L,32)],2),h("li",{class:b(["closed"===m(yl)&&"is-active"])},[h("a",{tabindex:"0",role:"button",onKeydown:o[4]||(o[4]=j(O((e=>yl.value="closed"),["prevent"]),["space"])),onClick:o[5]||(o[5]=e=>yl.value="closed")},q,32)],2),B])])])]),h("div",F,["active"===m(yl)?(u(),p("div",Q,[h("div",Y,[h("div",Z,[h("div",X,[h("div",ee,[le,h("span",null,C(m(Dl).length),1),ae])]),h("div",se,[h("div",te,[ie,h("span",null,C(m(Vl)),1),ne])]),h("div",oe,[h("div",ce,[de,h("span",null,C(m(Pl)),1),re])]),h("div",ue,[h("div",pe,[me,h("span",null,C(m(El)),1),ve])])]),m(Nl).length?(u(),p("div",he,[(u(!0),p(x,null,D(m(Nl),(e=>(u(),p("div",ke,[h("div",{class:"grid-item",style:I({backgroundImage:`linear-gradient(350deg, white 65%, ${Ol[e.status]}30)`})},[h("div",ge,[h("div",_e,[h("h3",null,C(e.title),1),k(U,{icon:"feather:more-vertical",spaced:"",right:""},{content:g((()=>[h("a",{onClick:l=>Ul(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},ye,8,fe),h("a",{onClick:l=>Ul(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},be,8,we),h("a",{onClick:l=>Ul(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},Ce,8,je),xe,h("a",{onClick:l=>$l(e.id),role:"menuitem",class:"dropdown-item is-media"},Se,8,De),h("a",{onClick:l=>Tl(e.id),role:"menuitem",class:"dropdown-item is-media"},Ae,8,Te)])),_:2},1024)]),h("div",Oe,[h("p",null,C(e.description),1)])]),h("div",Ie,[h("div",Ee,[Pe,h("div",Ve,[(u(!0),p(x,null,D(e.workers,(e=>_((u(),v(N,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[Rl,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),h("div",$e,[We,h("p",null,C(e.startDate),1)]),h("div",Ue,[Me,h("p",null,C(e.endDate),1)]),h("div",Ne,[ze,k(z,{outlined:"",rounded:"",color:Il[e.status]},{default:g((()=>[w(C(e.status),1)])),_:2},1032,["color"])])])],4)])))),256))])):(u(),v(wl,{key:1,title:"There is no task added on this projects.",subtitle:"Looks like you don't have any task on this project yet. When you'll\n                start creating tasks of this project, they will be showing up in here."},{image:g((()=>[Ke,Re])),_:1}))])])):"closed"===m(yl)?(u(),p("div",Ge,[h("div",He,[m(zl).length?(u(),p("div",Je,[(u(!0),p(x,null,D(m(zl),(e=>(u(),p("div",Le,[h("div",qe,[h("div",Be,[h("div",Fe,[h("h3",null,C(e.title),1),k(U,{icon:"feather:more-vertical",spaced:"",right:""},{content:g((()=>[h("a",{onClick:l=>Ul(e.id,"active"),role:"menuitem",class:"dropdown-item is-media"},Ye,8,Qe),h("a",{onClick:l=>Ul(e.id,"pending"),role:"menuitem",class:"dropdown-item is-media"},Xe,8,Ze),h("a",{onClick:l=>Ul(e.id,"completed"),role:"menuitem",class:"dropdown-item is-media"},ll,8,el),al,h("a",{onClick:l=>$l(e.id),role:"menuitem",class:"dropdown-item is-media"},tl,8,sl),h("a",{onClick:l=>Tl(e.id),role:"menuitem",class:"dropdown-item is-media"},nl,8,il)])),_:2},1024)]),h("div",ol,[h("p",null,C(e.description),1)])]),h("div",cl,[h("div",dl,[rl,h("div",ul,[(u(!0),p(x,null,D(e.workers,(e=>_((u(),v(N,{picture:e.avatar,size:"small",color:"primary",initials:e.avatar?"":e.username.slice(0,2)},null,8,["picture","initials"])),[[Rl,`${e.username}`,void 0,{rounded:!0,info:!0}]]))),256))])]),h("div",pl,[ml,h("p",null,C(e.startDate),1)]),h("div",vl,[hl,h("p",null,C(e.endDate),1)]),h("div",kl,[gl,h("p",null,C(e.status),1)])])])])))),256))])):(u(),v(wl,{key:1,title:"No closed projects.",subtitle:"Looks like you don't have any closed project yet. When you'll\n                start closing off projects, they will be showing up in here."},{image:g((()=>[_l,fl])),_:1}))])])):S("",!0)])])),m(Sl).isSweetAlertOpen?(u(),v(Cl,{key:2,isSweetAlertOpen:m(Sl).isSweetAlertOpen,title:m(Sl).title,subtitle:m(Sl).subtitle,btntext:m(Sl).btntext,onConfirm:Ml,loading:m(bl),onCancel:()=>m(Sl).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","loading","onCancel"])):S("",!0),m(jl)?(u(),v(Kl,{key:3,projectID:P.projectID,isOpen:m(jl),taskIdSelected:m(xl),startDate:m(M),"onUpdate:modalHandler":Wl,"onUpdate:OnSuccess":Al},null,8,["projectID","isOpen","taskIdSelected","startDate"])):S("",!0)],64)}}}),[["__scopeId","data-v-f44e0448"]]);export{yl as _};
