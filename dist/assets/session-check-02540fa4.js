import{d as e}from"./index-07330caa.js";import{u as o}from"./userSession-1b4a14a8.js";import{u as r}from"./useAPI-8d821f52.js";import{u as t}from"./layoutSwitcher-e86c843b.js";import{u as s}from"./company-5226ecf6.js";import"./useNotyf-0268ce1e.js";import"./notyf-c5799020.js";import"./useThemeColors-cc886c05.js";import"./useSupportElement-44016fc7.js";const a=t(),i=e((async({router:e,pinia:t})=>{const i=o(t);if(r(),s(),i.isLoggedIn)try{a.setDynamicLayoutId("sideblock-default")}catch(l){i.logoutUser()}e.beforeEach((e=>e.meta.requiresAuth&&!i.isLoggedIn?{name:"/auth/login",query:{redirect:e.fullPath}}:("supplier"!==i.user.role||!1!==e.meta.isPartnerAllowed&&void 0!==e.meta.isPartnerAllowed)&&("manager"!==i.user.role||!1!==e.meta.isManagerAllowed&&void 0!==e.meta.isManagerAllowed)&&("contractor"!==i.user.role||!1!==e.meta.isContractorAllowed&&void 0!==e.meta.isContractorAllowed)&&("worker"!==i.user.role||!1!==e.meta.isWorkerAllowed&&void 0!==e.meta.isWorkerAllowed)&&("client"!==i.user.role||!1!==e.meta.isClientAllowed&&void 0!==e.meta.isClientAllowed)?void 0:{name:"/auth/login",query:{redirect:e.fullPath}}))}));export{i as default};
