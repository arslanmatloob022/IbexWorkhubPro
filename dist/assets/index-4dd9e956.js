import{_ as e}from"./UpdateTask.vue_vue_type_script_setup_true_lang-c8660a51.js";import{_ as t,a}from"./ProjectManagerCalendar-a9f3e8f2.js";import{F as s}from"./FullCalendar-f2e046c5.js";import{i as r}from"./index-5790eff9.js";import{u as n}from"./useAPI-51d690ef.js";import{i as o}from"./index-8b132f24.js";import{i}from"./index-d01e51d0.js";import{f as l,r as d,o as p,C as u,D as _,E as c,F as v,G as m,U as y,m as j,O as g,N as f,I as b,H as x,J as h,Q as k,R as w,S as D,A as V}from"./index-ebe3ec19.js";import{u as M}from"./viewWrapper-84a185a0.js";import{b as I}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-d69e7fb7.js";import"./useSupportElement-b9e097c1.js";import"./useNotyf-0d335162.js";import"./notyf-c99f0315.js";import"./useThemeColors-70b40381.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-112e363c.js";import"./useVFieldContext-84670641.js";import"./VOption.vue_vue_type_style_index_0_lang-997d4a12.js";import"./VField.vue_vue_type_script_setup_true_lang-cfbb2fbb.js";import"./VLabel.vue_vue_type_script_setup_true_lang-415eec9b.js";import"./VControl-0c6a1405.js";import"./VInput.vue_vue_type_script_setup_true_lang-2a5c8b19.js";import"./estimatesScripts-99b5099c.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-850b3f73.js";import"./WorkerCalendar-3bdd4c78.js";import"./TaskInfoModal.vue_vue_type_script_setup_true_lang-ee9183d4.js";import"./VAvatar.vue_vue_type_style_index_0_lang-1d1ef4db.js";import"./VPlaceholderPage.vue_vue_type_style_index_0_lang-98f52303.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-94f313f6.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-13365529.js";import"./search-6-dark-6c9b195a.js";import"./via-placeholder-24645670.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-39ed7510.js";import"./VBlock.vue_vue_type_style_index_0_lang-3abae624.js";import"./index-04e05ac8.js";import"./index-37bedc79.js";import"./VIconBox.vue_vue_type_style_index_0_lang-20e76340.js";import"./VDropdown.vue_vue_type_style_index_0_lang-2036237f.js";import"./VIcon.vue_vue_type_script_setup_true_lang-3514b5f9.js";import"./useDropdown-1e43146f.js";const S={class:"main-div-foresee"},T={class:"project-full-calendar-foresee"},C={style:{height:"100%",position:"relative"}},P={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},G={class:"event-title"},O=l({__name:"ProjectsForeseeCalendar",setup(a){const l=n(),b=d(null),x=d([{id:"fa8457ac-9e2c-4345-8933-824c6be3de24",title:"Masonry Installation",description:"Time to install the the bricks, lintels, header and sill details (includes patching the flue hole.)",startDate:"2025-04-22",endDate:"2025-04-28",status:"active",project_title:"Wilson"}]),h=d(!1),k=d([]),w=d(0),D=d(""),V=d(""),M=d(""),I=d(""),O=d(""),A=d(""),F=d(!1),U=d(""),W=d(!1);d({pending:"#8392ab",active:"#fbcf33",completed:"#82d616",canceled:"#344767"}),d({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"});const J=d({plugins:[o,i,r],initialView:"dayGridMonth",schedulerLicenseKey:"0965592368-fcs-1694657447",initialDate:(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,1).toISOString().split("T")[0]})(),height:"auto",themeSystem:"cerulean",dragScroll:!0,resourceClickable:!0,nowIndicator:!0,eventOrder:"start",headerToolbar:{left:"today prev,next",center:"title",right:"dayGridWeek,dayGridMonth,dayGridYear"},events:[],buttonText:{today:"Today",dayGridWeek:"Week",dayGridMonth:"Month",dayGridYear:"Year"},editable:!0,views:{dayGridMonth:{type:"dayGrid",duration:{months:3},buttonText:"3 Months"}},dayCellDidMount:function(e){const t=e.date.getDay();0!==t&&6!==t||e.el.classList.add("fc-day-sat","fc-day-sun");1===new Date(e.date).getDate()&&e.el.classList.add("fc-month-start")},datesSet:function(e){O.value=e.startStr.substring(0,10),A.value=e.endStr.substring(0,10)}}),L=e=>{let t=new Date(e);return t.setDate(t.getDate()+1),t.toISOString().slice(0,10)},N=async()=>{try{h.value=!0;const e=await l.get(`/api/project/projects-tasks-by-date-range/?start_date=${O.value}&end_date=${A.value}`);x.value=e.data,J.value.events=x.value.map((e=>({id:e.id,title:e.title,start:e.startDate,end:L(e.endDate),extendedProps:{projectTitle:e.project_title}}))),console.log("Events:",J.value.events)}catch(e){console.error("Error fetching tasks:",e),k.value=[]}finally{h.value=!1}};return p((()=>{N();const e=b.value?.getApi();e&&e.gotoDate(J.value.initialDate)})),(a,r)=>{const n=t,o=e;return u(),_("div",S,[c("div",T,[v(j(s),{options:j(J),ref_key:"calendarRef",ref:b},{eventContent:m((e=>[c("div",C,[c("div",P,[c("p",G,y(e.event.extendedProps.projectTitle)+" - "+y(e.event.title),1)])])])),_:1},8,["options"])]),j(W)?(u(),g(n,{key:0,workerTasksModal:j(W),workerId:j(I),workerName:j(D),"onUpdate:modalHandler":r[0]||(r[0]=e=>W.value=!j(W))},null,8,["workerTasksModal","workerId","workerName"])):f("",!0),j(F)?(u(),g(o,{key:1,isOpen:j(F),taskIdSelected:j(U),projectID:j(w),startDate:j(V),endDate:j(M),"onUpdate:OnSuccess":N,"onUpdate:modalHandler":r[1]||(r[1]=()=>{F.value=!1})},null,8,["isOpen","taskIdSelected","projectID","startDate","endDate"])):f("",!0)])}}}),A=e=>(k("data-v-b35d2a51"),e=e(),w(),e),F={class:"columns is-multiline"},U={class:"tabs-wrapper mb-0"},W={class:"tabs is-boxed"},J=[A((()=>c("span",null,"Jobs Manager",-1)))],L=[A((()=>c("span",null,"Foresee Jobs",-1)))],N={key:0,class:"column is-12"},E={key:1,class:"column is-12"},H=D(l({__name:"ProjectsManager",setup(e){const t=d("manager");return p((async()=>{})),(e,s)=>{const r=a,n=O;return u(),_("div",F,[c("div",U,[c("div",W,[c("ul",null,[c("li",{class:b(["manager"===j(t)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[0]||(s[0]=x(h((e=>t.value="manager"),["prevent"]),["space"])),onClick:s[1]||(s[1]=e=>t.value="manager")},J,32)],2),c("li",{class:b(["foresee"===j(t)?"is-active":"not-active"])},[c("a",{tabindex:"0",role:"button",onKeydown:s[2]||(s[2]=x(h((e=>t.value="foresee"),["prevent"]),["space"])),onClick:s[3]||(s[3]=e=>t.value="foresee")},L,32)],2)])])]),"manager"===j(t)?(u(),_("div",N,[v(r)])):f("",!0),"foresee"===j(t)?(u(),_("div",E,[v(n)])):f("",!0)])}}}),[["__scopeId","data-v-b35d2a51"]]),Y=l({__name:"index",setup:e=>(M().setPageTitle("Jobs Manager"),V({title:"Jobs Manager -Ibex"}),(e,t)=>{const a=H;return u(),_("div",null,[v(a)])})});"function"==typeof I&&I(Y);export{Y as default};
