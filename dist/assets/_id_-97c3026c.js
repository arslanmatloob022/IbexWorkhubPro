import{_ as e,a}from"./SiteDetailModal-4f3b806f.js";import{_ as l}from"./AddJobsModal-b771db90.js";import{_ as t}from"./VCheckbox.vue_vue_type_style_index_0_lang-8f4925f1.js";import{_ as s}from"./TimeSheetDetail.vue_vue_type_script_setup_true_lang-2a86791c.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-ee086f33.js";import{_ as i}from"./VDropdown.vue_vue_type_style_index_0_lang-5a74bf98.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-560ded64.js";import{_ as r}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-58bafc79.js";import{_ as c,a as d}from"./projects-dark-4a371d8a.js";import{u}from"./useAPI-bba6ff57.js";import{f as m,b as p}from"./useSupportElement-23fcf6e3.js";import{e as f,r as v,o as g,y,z as h,C as b,l as I,H as _,P as k,Q as w,R as x,J as S,A as C,D as A,B as j,W as V,X as M,L as T,t as N,a4 as R,w as L,E as D,N as W,s as P,M as O,O as z,j as U,ad as $,a3 as J,v as E}from"./index-879cc21e.js";import{_ as G}from"./VModal.vue_vue_type_style_index_0_lang-02010cfa.js";import{_ as F,i as H,a as q}from"./index-042ff169.js";import{F as B}from"./index-f3193dbb.js";import{i as Y}from"./index-1987827f.js";import{_ as K}from"./VTextarea.vue_vue_type_script_setup_true_lang-f608710e.js";import{_ as Z}from"./VIconButton-a16d14d0.js";import{_ as Q}from"./VField.vue_vue_type_script_setup_true_lang-8fda54d1.js";import{_ as X}from"./VControl-3a0d7b90.js";import{u as ee}from"./useNotyf-953388fb.js";import{u as ae}from"./company-5bfaee0a.js";import{A as le}from"./vue3-apexcharts.common-e41d26dc.js";import{u as te}from"./useThemeColors-9b3162c4.js";import{u as se}from"./viewWrapper-cd4cd6f9.js";import"./VCollapse.vue_vue_type_style_index_0_lang-a8e3ee1f.js";import"./VIcon.vue_vue_type_script_setup_true_lang-8eb8745d.js";import"./VSwitchSegment.vue_vue_type_style_index_0_lang-6001fac7.js";import"./VLabel.vue_vue_type_script_setup_true_lang-010b6911.js";import"./useVFieldContext-1b6aa39a.js";import"./VInput.vue_vue_type_script_setup_true_lang-ae22abd0.js";import"./useDropdown-84fb480e.js";import"./VPlaceloadWrap-31e1b55a.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-1e98310c.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-7398d3bd.js";import"./userSession-a2fa2e58.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-5d2e46fb.js";import"./VTags.vue_vue_type_script_setup_true_lang-ebc728c4.js";import"./VTag.vue_vue_type_style_index_0_lang-725ce0ff.js";import"./notyf-058d7186.js";import"./vue.runtime.esm-bundler-9944127c.js";const oe=e=>(V("data-v-2e6799d4"),e=e(),M(),e),ie={class:"timeline-wrapper"},ne=oe((()=>b("div",{class:"timeline-header"},null,-1))),re={class:"timeline-wrapper-inner"},ce={class:"timeline-container"},de={class:"timeline-item is-unread"},ue={class:"date"},me=oe((()=>b("div",{class:"dot is-success"},null,-1))),pe={class:"content-wrap"},fe=["onClick"],ve=oe((()=>b("div",{class:"no-status"},null,-1))),ge={class:"container"},ye={class:"half"},he={class:"",style:{display:"flex","align-items":"center"}},be={class:"box-text"},Ie={class:"meta-text"},_e={class:""},ke=oe((()=>b("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1))),we={class:"half"},xe={class:"",style:{display:"flex","align-items":"center"}},Se={class:"box-text"},Ce={class:"meta-text"},Ae={style:{display:"flex"}},je=oe((()=>b("i",{class:"lnir lnir-hospital-location mr-2",style:{"font-size":"larger",color:"var(--primary)"},"aria-hidden":"true"},null,-1))),Ve={class:"box-end"},Me=oe((()=>b("div",{class:"icon"},[b("i",{"aria-hidden":"true",class:"lnil lnil-bubble"})],-1))),Te=oe((()=>b("div",{class:"meta"},[b("span",null,"Activity"),b("span",null,"View activity of Timesheet")],-1))),Ne=[Me,Te],Re=oe((()=>b("img",{class:"light-image is-larger",src:c,alt:""},null,-1))),Le=oe((()=>b("img",{class:"dark-image is-larger",src:d,alt:""},null,-1))),De=f({__name:"JobTImesheet",props:{id:{type:String,default:0}},setup(e){const a=e,l=u(),t=v(!1),c=v(!1),d=v(0),f=v([]);return g((()=>{(async()=>{try{t.value=!0;const e=await l.get(`v3/api/timesheet/job/${a.id}/`);f.value=e.data,console.log("timesheeeet",f.value),t.value=!1}catch(e){console.log(e)}})()})),(e,a)=>{const l=r,u=n,v=i,g=o,V=s;return y(),h("div",ie,[ne,b("div",re,[b("div",ce,[I(t)?(y(),_(l,{key:0})):k("",!0),(y(!0),h(w,null,x(I(f),(e=>(y(),h("div",de,[b("div",ue,[b("span",null,S(I(m)(e.created_at)),1)]),me,b("div",pe,[b("div",{class:"content-box",onClick:()=>{c.value=!0,d.value=e.id}},[ve,b("div",ge,[b("div",ye,[b("div",he,[C(u,{picture:e.bookOnImageURL,squared:"",size:"medium"},null,8,["picture"]),b("div",be,[b("div",Ie,[b("p",null,[b("span",null,S(I(p)(e.bookOnTime)),1)]),b("span",_e,[ke,A(" "+S(e.bookOnLocation&&e.bookOnLocation.length>90?e.bookOnLocation.slice(0,90)+"...":e.bookOnLocation),1)])])])])]),b("div",we,[b("div",xe,[C(u,{picture:e.bookOffImageURL,squared:"",size:"medium"},null,8,["picture"]),b("div",Se,[b("div",Ce,[b("p",null,[b("span",null,S(I(p)(e.bookOffTime)),1)]),b("span",Ae,[je,A(" "+S(e.bookOffLocation&&e.bookOffLocation.length>90?e.bookOffLocation.slice(0,90)+"...":e.bookOffLocation),1)])])])])])]),b("div",Ve,[C(v,{icon:"feather:more-vertical",spaced:"",right:""},{content:j((()=>[b("a",{role:"menuitem",href:"#",class:"dropdown-item is-media",onClick:a[0]||(a[0]=e=>c.value=!0)},Ne)])),_:1})])],8,fe)])])))),256)),0==I(f).length?(y(),_(g,{key:1,title:"No Activity found.",subtitle:"Looks like you don't have done any activity on this worker yet as you will do anything, that will be showing up in here."},{image:j((()=>[Re,Le])),_:1})):k("",!0)])]),I(c)?(y(),_(V,{key:0,timeSheetDetailModal:I(c),timesheetId:"993","onUpdate:modalHandler":a[1]||(a[1]=()=>{c.value=!1})},null,8,["timeSheetDetailModal"])):k("",!0)])}}}),We=T(De,[["__scopeId","data-v-2e6799d4"]]),Pe={class:"row"},Oe={class:"columns is-multiline"},ze={class:"column is-6"},Ue={class:"columns is-multiline"},$e={class:"column is-12"},Je={class:"columns is-multiline"},Ee={class:"column is-3"},Ge={class:"column is-9"},Fe={class:"is-flex space-between"},He={style:{width:"120px","white-space":"nowrap"},class:"title is-5 mb-2"},qe=b("i",{class:"lnir lnir-apple","aria-hidden":"true"},null,-1),Be=b("i",{class:"iconify ml-3 cu-pointer pointer","data-icon":"feather:external-link"},null,-1),Ye=[qe,Be],Ke={class:"is-flex cus-align-center mb-1"},Ze=b("i",{class:"iconify text-light","data-icon":"feather:phone","aria-hidden":"true"},null,-1),Qe={class:"is-bold"},Xe={class:"is-flex cus-align-center mb-1"},ea=b("i",{class:"iconify","data-icon":"feather:mail","aria-hidden":"true"},null,-1),aa={class:"is-bold"},la={class:"is-flex cus-align-center mb-1 text-light"},ta=b("i",{class:"iconify","data-icon":"feather:map-pin","aria-hidden":"true"},null,-1),sa={class:"is-bold"},oa={class:"column is-12"},ia={class:"columns is-multiline"},na={class:"column is-5"},ra=b("h3",{class:"title is-5 mb-2"},"Site Name",-1),ca={class:"is-bold"},da={class:"column is-5"},ua=b("h3",{class:"title is-5 mb-2"},"Date",-1),ma={class:"is-bold"},pa={class:"column is-2"},fa={class:"column is-10"},va=b("h3",{class:"title is-5 mb-2"},"Site Addreess",-1),ga={class:"is-bold"},ya={class:"column is-2"},ha=b("div",{class:"column is-6"},[b("div",{id:"myMap",style:{height:"324px",width:"100%","border-radius":"10px"}})],-1),ba=b("button",{style:{display:"none"}},"close",-1),Ia=f({__name:"RotaDetailView",props:{timeSheetDetailModal:{type:Boolean},timesheetId:{},rotaId:{},getRota:{type:Function}},emits:["update:modalHandler"],setup(e,{emit:a}){const l=e;let t,s,o;const i=v([]),r=N(),c=u(),d=v(!1),m=v(!1),p=v({id:0,siteInfo:{id:5,name:"",address:"",postcode:"",city:"",inchargeName:"",color:"",latitude:0,longitude:0,geofence:{},comments:""},workerInfo:{id:0,firstName:"",lastName:"",latitude:0,longitude:0,postCode:" ",phoneNumber:"",emailAddress:"",profileImageURL:""},customerCompanyInfo:{id:36,name:"",trade_name:"",email:"",phone_number:"",logo:"",postcode:"",latitude:0,longitude:0,business_details:"",reg_no:"",business_type:"",covered_distance:75,vat_no:null,address:"",color:"",created_at:"",company:0,industry:0},date:"",start:"",end:"",shift:"",hourlyRate:0,notes:"",createdAt:"",createdBy:"",UpdatedAt:null,updatedBy:"",company:0,site:0,worker:0,customerCompany:0,job:null,jobsList:[{id:"",end:"",start:"",jobName:"",resourceId:""}]}),f=()=>{a("update:modalHandler",!1),l.getRota()},h=()=>{r.push({name:"/sidebar/company/workers/[id]",params:{id:p.value.wokrkerInfo.id}})};return g((async()=>{await(async()=>{try{const e=await c.get(`/v3/api/timesheet/details/${l.timesheetId}/`);p.value=e.data,console.log("rota info",p.value),i.value=e.data.jobsList.map((e=>({...e,title:e.jobName})))}catch(e){console.log(e)}})(),((e,a,l,i)=>{const n=new google.maps.LatLng(e,a),r=new google.maps.LatLng(l,i);t=new google.maps.Map(document.getElementById("myMap"),{center:n,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.Satellite,zoom:7}),s=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer,o.setMap(t);const c={origin:n,destination:r,travelMode:google.maps.TravelMode.DRIVING};s.route(c,(function(e,a){a===google.maps.DirectionsStatus.OK?o.setDirections(e):console.error("Error fetching directions: "+a)})),new google.maps.Marker({position:n,map:t,title:"Worker Location"}),new google.maps.Marker({position:r,map:t,title:"Site Location"})})(p.value.wokrkerInfo&&p.value.wokrkerInfo.latitude?p.value.wokrkerInfo.latitude:"0",p.value.wokrkerInfo&&p.value.wokrkerInfo.longitude?p.value.wokrkerInfo:"0",p.value.siteInfo&&p.value.siteInfo.latitude?p.value.siteInfo.latitude:0,p.value.siteInfo&&p.value.siteInfo.longitude?p.value.siteInfo.longitude:"0")})),(e,a)=>{const t=n,s=R,o=F,i=G;return y(),_(i,{open:l.timeSheetDetailModal,title:"Rota Detail",size:"xl",actions:"right",onClose:f},{content:j((()=>[b("div",Pe,[b("div",Oe,[b("div",ze,[b("div",Ue,[b("i",{style:{position:"absolute",top:"44px",left:"166px"},class:"fas fa-pencil-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:a[0]||(a[0]=e=>d.value=!0)}),b("i",{style:{position:"absolute",top:"44px",left:"190px",color:"var(--danger)"},class:"fas fa-trash-alt cu-pointer flex-align-end","aria-hidden":"true",onClick:a[1]||(a[1]=()=>{m.value=!m.value})}),b("div",$e,[C(s,{radius:"large",elevated:""},{default:j((()=>[b("div",Je,[b("div",Ee,[C(t,{onClick:h,picture:p.value.workerInfo&&p.value.workerInfo.profileImageURL?p.value.workerInfo.profileImageURL:"",size:"big",squared:""},null,8,["picture"])]),b("div",Ge,[b("div",Fe,[b("div",null,[b("h3",He,S(p.value.workerInfo?p.value.workerInfo.firstName:"------")+" "+S(p.value.workerInfo?p.value.workerInfo.lastName:"------"),1)]),b("div",{onClick:h,class:"is-flex cus-align-center"},Ye)]),b("div",Ke,[Ze,b("p",Qe,S(p.value.workerInfo?p.value.workerInfo.phoneNumber:"------"),1)]),b("div",Xe,[ea,b("p",aa,S(p.value.workerInfo?p.value.workerInfo.emailAddress:"------"),1)]),b("div",la,[ta,b("p",sa,S(p.value.workerInfo?p.value.workerInfo.postCode:"------"),1)])])])])),_:1})]),b("div",oa,[C(s,{radius:"large",elevated:""},{default:j((()=>[b("div",ia,[b("div",na,[ra,b("p",ca,S(p.value.siteInfo?p.value.siteInfo.name:"------"),1)]),b("div",da,[ua,b("p",ma,S(p.value&&p.value.created_at?p.value.created_at.slice(0,10):"------"),1)]),b("div",pa,[C(t,{picture:p.value.customerCompanyInfo?p.value.customerCompanyInfo.logo:"/images/logoplaceholder.png",size:"medium",rounded:""},null,8,["picture"])]),b("div",fa,[va,b("p",ga,S(p.value.siteInfo?p.value.siteInfo.address:"------"),1)]),b("div",ya,[C(t,{picture:"day"==p.value.shift?"/images/dayTime.png":"/images/nightTime.png",size:"medium",rounded:""},null,8,["picture"])])])])),_:1})])])]),ha])]),C(s,{class:"mt-3",radius:"large",elevated:""},{default:j((()=>[C(o,{timesheetId:"993"})])),_:1})])),action:j((()=>[])),cancel:j((()=>[ba])),_:1},8,["open"])}}}),_a=e=>(V("data-v-914e8774"),e=e(),M(),e),ka={id:"rota-celender"},wa={class:"columns is-multiline"},xa=_a((()=>b("div",{class:"column is-7 is-flex space-between"},[b("h6",{style:{"white-space":"nowrap"},class:"cus-main-heading mr-3 ml-1 mt-5"}," Job Scheduling ")],-1))),Sa={class:"column is-5 mt-4"},Ca={class:"list-flex-toolbar is-reversed"},Aa={class:"buttons"},ja={class:"p-2 flex-columns event-content",style:{display:"flex","justify-content":"space-between",height:"90px",width:"100%","border-radius":"12px","background-color":"#effaec",padding:"6px 10px"}},Va={class:"is-flex space-between mb-2"},Ma=_a((()=>b("i",{class:"fas fa-sun",style:{color:"#3f72c8","font-size":"16px"},"aria-hidden":"true"},null,-1))),Ta={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},Na={class:"is-flex mb-1"},Ra=["src"],La={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#444"}},Da=_a((()=>b("div",{class:"is-flex"},[b("p",{style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#666"}})],-1))),Wa={style:{"margin-top":"12px","font-weight":"600","margin-bottom":"8px","padding-left":"10px",color:"#666"}},Pa=f({__name:"JobRota",props:{id:{type:String,default:"0"},calendarView:{type:String,default:"dayGridMonth"}},setup(e){const a=e,l=v(""),t=v(""),s=u(),o=v(!1),i=v(!1),n=v([]),r=v("");const c=v({plugins:[H,Y],initialView:a.calendarView,height:"auto",selectable:!0,eventClick:function(e){r.value=e.event.id,o.value=!o.value},eventColor:"transparent",themeSystem:"bootstrap5",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay"},views:{dayGridMonth:{eventLimit:3},dayGridWeek:{eventLimit:50},dayGridDay:{eventLimit:50}},eventLimitClick:"popover",droppable:!0,editable:!0,dayCellDidMount:function(e){!function(e){var a=e.el;a.style.background="#fff",a.style.borderRadius="16px"}(e)},events:[],datesSet:function(e){l.value=e.startStr.substring(0,10),t.value=e.endStr.substring(0,10)}}),d=()=>{n.value=[];const e=document.querySelector("#rota-celender");e&&e.querySelectorAll("td").forEach((function(e){e.removeAttribute("style")}))},m=e=>{n.value.splice(e,1)},p=async()=>{const{data:e}=await s.get(`v3/api/timesheet/job/${a.id}`);var l;c.value.events=((l=e).forEach((e=>{const a=e.bookOnTime,l=e.bookOffTime;e.startedTime=a,e.endedTime=l,e.start=e.bookOnTime})),l),console.log("rota data",e),d()};return L([()=>l.value,()=>t.value],(([e,a],[l,t])=>{p()})),g((()=>{p()})),L((()=>a.workerId),((e,a)=>{p()})),(e,l)=>{const t=D,s=q,u=Ia;return y(),h(w,null,[b("div",ka,[b("div",wa,[xa,b("div",Sa,[b("div",Ca,[b("div",Aa,[C(t,{disabled:!n.value.length,color:"info",onClick:d,elevated:""},{default:j((()=>[A(" Clear Selection ("+S(n.value.length)+") ",1)])),_:1},8,["disabled"]),C(t,{disabled:!n.value.length,color:"primary",onClick:l[0]||(l[0]=e=>i.value=!i.value),elevated:""},{default:j((()=>[A(" Add Rota - Days ("+S(n.value.length)+") ",1)])),_:1},8,["disabled"])])])])]),C(I(B),{options:c.value},{eventContent:j((e=>[b("div",ja,[b("div",Va,[Ma,b("p",Ta,S(e.event.extendedProps.startedTime?e.event.extendedProps.startedTime.slice(11,16):"-- : --")+" - "+S(e.event.extendedProps.endedTime?e.event.extendedProps.endedTime.slice(11,16):"----"),1)]),b("div",null,[b("div",Na,[b("img",{style:{width:"30px"},src:e.event.extendedProps.workerInfo.profileImageURL,alt:""},null,8,Ra),b("p",La,S(e.event.extendedProps.workerInfo?`${e.event.extendedProps.workerInfo.firstName}\n             ${e.event.extendedProps.workerInfo.lastName}`:"Not Added"),1)]),Da,b("p",Wa," Worked: "+S(e.event.extendedProps.hoursWorked?e.event.extendedProps.hoursWorked:"0")+" Hours ",1)])])])),_:1},8,["options"])]),i.value?(y(),_(s,{key:0,"onUpdate:modalHandler":l[1]||(l[1]=()=>{i.value=!i.value,d()}),"onUpdate:OnSuccess":p,AddRotaModalOpen:i.value,selectedDatesArray:n.value,workerId:a.workerId,onRemoveDate:m},null,8,["AddRotaModalOpen","selectedDatesArray","workerId"])):k("",!0),o.value?(y(),_(u,{key:1,timeSheetDetailModal:o.value,timesheetId:r.value,"onUpdate:modalHandler":l[2]||(l[2]=()=>{o.value=!1}),getRota:p},null,8,["timeSheetDetailModal","timesheetId"])):k("",!0)],64)}}}),Oa=T(Pa,[["__scopeId","data-v-914e8774"]]),za=e=>(V("data-v-fb16d804"),e=e(),M(),e),Ua={class:"card columns is-multiline mb-3",style:{"border-radius":"24px",width:"100%",padding:"20px 20px","background-image":"linear-gradient(180deg, white 85%, #faad4225)"}},$a={class:"column is-12 mt-0"},Ja=za((()=>b("i",{class:"lnir lnir-pencil-alt",style:{"font-weight":"800"},"aria-hidden":"true"},null,-1))),Ea=za((()=>b("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Ga=za((()=>b("i",{class:"fas fa-clipboard","aria-hidden":"true"},null,-1))),Fa=za((()=>b("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Ha=za((()=>b("i",{class:"fas fa-clipboard-check","aria-hidden":"true"},null,-1))),qa=za((()=>b("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Ba=za((()=>b("i",{class:"fas fa-clock","aria-hidden":"true"},null,-1))),Ya=za((()=>b("i",{class:"fas fa-arrow-right ml-1","aria-hidden":"true"},null,-1))),Ka=za((()=>b("i",{class:"fas fa-child","aria-hidden":"true"},null,-1))),Za=za((()=>b("i",{class:"fas fa-check-circle ml-1","aria-hidden":"true"},null,-1))),Qa={class:"column is-6"},Xa={class:"row"},el={class:"columns is-multiline"},al={class:"column is-12 is-md-bold dark-text"},ll={class:"column is-3"},tl={class:"is-small-bold"},sl={style:{"font-size":"13px",color:"#bbb"}},ol={class:"is-small-bold"},il={style:{"font-size":"13px",color:"#bbb"}},nl={class:"column is-3"},rl={class:"is-small-bold mb-1"},cl={style:{"font-size":"13px",color:"#bbb"}},dl={class:"is-small-bold dark-text"},ul={style:{"font-size":"13px",color:"#bbb"}},ml={class:"column is-4"},pl=za((()=>b("h1",{class:"title"},"Manager",-1))),fl={class:"is-flex"},vl={class:"manager-info ml-2"},gl={class:"is-bold mb-2"},yl={class:"is-bold mb-2"},hl={key:0,class:"modal-form columns is-multiline cu-all-input mt-6"},bl={class:"field column is-12 mb-0",id:"rota-celender-two"},Il={class:"columns is-multiline mb-3 cu-all-input"},_l={class:"column is-12"},kl={class:"field columns is-multiline mb-0 cu-all-input space-between lengthy-smart-search-dropdown"},wl={class:"field column is-6 mb-0 is-relative"},xl={class:"mb-2 columns is-multiline"},Sl={class:"column is-4"},Cl=["src"],Al={class:"column is-5"},jl={key:0},Vl={key:1,class:"is-bold"},Ml={class:"column is-12"},Tl=za((()=>b("h1",null,"Job",-1))),Nl={class:"is-bold"},Rl={class:"column is-5"},Ll=za((()=>b("h1",null,"Id",-1))),Dl={class:"is-bold"},Wl={class:"column is-4"},Pl=za((()=>b("h1",null,"Type",-1))),Ol={class:"is-bold"},zl={class:"column is-5"},Ul=za((()=>b("h1",null,"Created At",-1))),$l={class:"is-bold"},Jl={class:"column is-4"},El=za((()=>b("h1",null,"Manager",-1))),Gl={class:"is-bold"},Fl={class:"column is-12"},Hl=za((()=>b("h1",null,"Description",-1))),ql={class:"is-bold"},Bl={key:1,class:"modal-form columns is-multiline cu-all-input mt-1"},Yl={class:"field column is-12 mb-0",id:"rota-celender-two"},Kl={class:"columns is-multiline mb-3 cu-all-input"},Zl={class:"column is-12 mt-5"},Ql={key:0,class:"column is-12"},Xl={class:"field columns is-multiline mb-0 cu-all-input space-between lengthy-smart-search-dropdown"},et={class:"field column is-5 mb-0"},at={class:"multiselect-single-label",style:{"background-color":"transparent"}},lt={style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},tt={class:"",style:{display:"flex","flex-direction":"column","align-items":"start"}},st={style:{color:"#666","font-size":"1rem"}},ot={style:{"font-weight":"500","font-size":"1.2rem"}},it={style:{display:"flex","flex-direction":"row",gap:"0.2rem","align-items":"start"}},nt={style:{color:"#666","font-size":"0.9rem"}},rt={style:{color:"#666","font-size":"0.9rem"}},ct=za((()=>b("span",{style:{"background-color":"#eee",height:"2px",width:"100%"}},null,-1))),dt={class:"mt-5 is-flex space-between cus-align-center"},ut=za((()=>b("h1",null,"Or",-1))),mt={class:"field column is-6 mb-0"},pt={class:"mb-2 columns is-multiline"},ft={class:"column is-4"},vt=["src"],gt={class:"column is-5"},yt={key:0},ht={key:1,class:"is-bold"},bt={class:"column is-4"},It=za((()=>b("h1",null,"Site Id",-1))),_t={class:"is-bold"},kt={class:"column is-5"},wt=za((()=>b("h1",null,"Site Name",-1))),xt={class:"is-bold"},St={class:"column is-4"},Ct=za((()=>b("h1",null,"Post Code",-1))),At={class:"is-bold"},jt={class:"column is-5"},Vt=za((()=>b("h1",null,"Address",-1))),Mt={class:"is-bold"},Tt={class:"column is-4"},Nt=za((()=>b("h1",null,"Incharge Name",-1))),Rt={class:"is-bold"},Lt={class:"column is-5"},Dt=za((()=>b("h1",null,"Incharge Email",-1))),Wt={class:"is-bold"},Pt={key:1,class:"column is-12"},Ot={class:"field columns is-multiline mb-0 cu-all-input space-between smart-search-dropdown"},zt={class:"field column is-5 mb-0"},Ut={class:"multiselect-single-label",style:{"background-color":"transparent"}},$t=["src"],Jt=["src"],Et={class:"field column is-6 mb-0"},Gt={key:0,class:"is-md-bold mb-2"},Ft={key:1,class:"is-md-bold mb-2"},Ht={class:"mb-2 columns is-multiline"},qt=["onClick"],Bt={class:"info ml-3"},Yt={class:"is-md-bold"},Kt={class:"is-bold cu-align-center"},Zt=za((()=>b("i",{class:"iconify mr-1","data-icon":"feather:mail","aria-hidden":"true"},null,-1))),Qt={class:"is-bold cu-align-center"},Xt=za((()=>b("i",{class:"lnil lnil-map-marker mr-1","aria-hidden":"true"},null,-1))),es={class:"column is-3"},as=za((()=>b("h1",null,"Profile Completion",-1))),ls={class:"is-bold"},ts={style:{color:"var(--primary)"}},ss={class:"is-bold"},os={class:"column is-3"},is=za((()=>b("h1",null,"Anomalies",-1))),ns={class:"is-bold"},rs={class:"is-bold"},cs={class:"is-bold"},ds={key:2,class:"modal-form columns is-multiline cu-all-input"},us={class:"field column is-12 mb-0",id:"rota-celender-two"},ms={class:"columns is-multiline mb-3 cu-all-input"},ps={class:"column is-12"},fs=za((()=>b("h1",null,"Pending for checks",-1))),vs={class:"column is-12"},gs={key:2,class:"modal-form columns is-multiline cu-all-input mt-6"},ys={class:"field column is-12 mb-0",id:"rota-celender-two"},hs={class:"columns is-multiline mb-3 cu-all-input"},bs={class:"column is-12"},Is={class:"field columns is-multiline mb-0 cu-all-input space-between lengthy-smart-search-dropdown"},_s={class:"field column is-12 mb-0 is-relative"},ks={class:"mb-2 columns is-multiline"},ws={class:"field column is-6 mb-0"},xs={key:0,class:"is-md-bold mb-2"},Ss={key:1,class:"is-md-bold mb-2"},Cs={class:"mb-2 columns is-multiline"},As={class:"column is-6 is-flex"},js={class:"info ml-3"},Vs={class:"is-md-bold"},Ms={class:"is-bold cu-align-center"},Ts=za((()=>b("i",{class:"iconify mr-1","data-icon":"feather:mail","aria-hidden":"true"},null,-1))),Ns={class:"is-bold cu-align-center"},Rs=za((()=>b("i",{class:"lnil lnil-map-marker mr-1","aria-hidden":"true"},null,-1))),Ls={class:"column is-3"},Ds=za((()=>b("h1",null,"Profile Completion",-1))),Ws={class:"is-bold"},Ps={style:{color:"var(--primary)"}},Os={class:"is-bold"},zs={class:"column is-3"},Us=za((()=>b("h1",null,"Anomalies",-1))),$s={class:"is-bold"},Js={class:"is-bold"},Es={class:"is-bold"},Gs={key:3,class:"modal-form columns is-multiline cu-all-input mt-0"},Fs={class:"field column is-12 mb-0",id:"rota-celender-two"},Hs={class:"columns is-multiline mb-3 cu-all-input"},qs={class:"column is-12 mt-5"},Bs={class:"column is-12"},Ys={key:0},Ks={key:1},Zs={key:4,class:"modal-form columns is-multiline cu-all-input mt-5"},Qs={class:"field column is-12 mb-0",id:"rota-celender-two"},Xs={class:"columns is-multiline mb-3 cu-all-input"},eo={class:"column is-12"},ao={class:"field columns is-multiline mb-0 cu-all-input"},lo={class:"field column is-5 mb-0 is-relative"},to={class:"mb-2 columns is-multiline"},so={class:"field column is-6 mb-0"},oo=za((()=>b("h1",{class:"is-md-bold mb-2"}," Please verify wether the following steps have been successfully executed. ",-1))),io={class:"field column is-3 mb-0"},no=za((()=>b("div",{class:"field column is-12 mb-0 is-relative"},null,-1))),ro=f({__name:"JobsForms",setup(s){const o=N(),i=te(),r=W(),c=v(0),d=ae(),m=v(!1),p=ee(),f=u(),V=v(!1),M=v(!1);v(0);const T=v(!1),R=v("site"),E=v("rotaView"),G=v(""),F=v(""),H=v(""),q=v("");let B=v([]),Y=v([]),se=v([]);const oe=v([]),ie=v([]),ne=v([]),re=v([]),ce=v([]),de=v({}),ue=v({}),me=v(""),pe=v([0]),fe=v(""),ve=v(!1),ge=v(!1),ye=v(!1),he=v(!1),be=v(["created","waitingRAMS","readyToStart","started","completed"]),Ie=e=>be.value.indexOf(e)<=be.value.indexOf(_e.value.state);v({name:"",address:"",postcode:"",latitude:0,longitude:0,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:"",comments:"",geofence:{},color:"",contract:0});const _e=v({id:1,managerInfo:{company:0,email:"",first_name:"",id:0,last_name:"",partner:null,phoneNo:"",profileImage:"",role:""},assignedWorkers:[{id:0,firstName:"",lastName:"",latitude:0,longitude:0,postCode:"",phoneNumber:"",emailAddress:"",profileImageURL:"",profileStat:{percentage:5.9,emptyFields:[{doc:"",status:!1,is_uploaded:!1}],anomalieStats:{expired:0,required_not_uploaded:0,optional_not_uploaded:0}},readyToGo:!1}],siteInfo:{id:0,name:"",address:"",postcode:"",latitude:0,longitude:0,city:"",inchargeName:"",inchargePhoneNo:"",inchargeEmail:null,comments:null,geofence:[{lat:0,lng:0}],created_at:"2024-05-03T11:39:57.787398Z",updated_at:"2024-05-03T11:39:57.968769Z",color:"#D875C7",regionFormat:"Convenience Central",areaManager:"Mark Pannell ",managingDirector:"Kevin Tindall ",contract:60,contractInfo:{id:0,name:" ",company:0,customer_company:0,incharge_name:"",color:"",charge_rate:0,cuCompanyInfo:{id:0,name:"",email:"",logo:"",phone_number:""}}},workersList:[],title:"",description:"",externalId:"",isWorkWithContractor:!0,status:"",createdAt:"",updatedAt:"",manager:null,workers:[],state:"",file:""}),ke=P({series:[0],chart:{height:240,type:"radialBar",toolbar:{show:!1}},colors:[i.success],plotOptions:{radialBar:{hollow:{size:"40%"},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontWeight:500,offsetY:-10,color:i.success},value:{show:!0,fontWeight:600,color:i.success,fontSize:"16px",offsetY:-10}}}},labels:[""]}),we=async()=>{try{m.value=!0;const e=await f.get(`/v3/api/vixen-job/${r.params.id}/`);_e.value=e.data,fe.value=e.data.state,m.value=!1}catch(e){console.log(e)}},xe=e=>{R.value=e},Se=e=>{const a=new Date(e),l=new Intl.DateTimeFormat("en-US",{weekday:"long",day:"2-digit",month:"long"});_e.value.title=`Job at ${l.format(a)}`},Ce=async()=>{try{if(m.value=!0,F.value){await f.patch(`/v3/api/vixen-job/${r.params.id}/`,{site:F.value});p.success("Site assigned to job")}else p.error("Please select a site first");m.value=!1}catch(e){console.log(e)}},Ae=async()=>{try{const e=await f.get(`/v3/api/vixen-job/${r.params.id}/assigned-workers/`);_e.value.assignedWorkers=e.data,ce.value=e.data}catch(e){console.log(e)}},je=async()=>{try{await f.patch(`/v3/api/vixen-job/${r.params.id}/`,{state:"completed"});p.success("Job mark as completed successfully"),o.push("/sidebar/company/jobs")}catch(e){console.log(e)}};return L(F,((e,a)=>{(async e=>{try{const a=await f.get(`/v3/api/site/${e}/detail/`);_e.value.siteInfo=a.data,console.log("current selected site",a.data)}catch(a){console.log(a)}})(e)})),L(q,((e,a)=>{_e.value.manager=e})),L(F,((e,a)=>{M.value=!1;const l=oe.value.find((a=>a.id==e));l&&(de.value=l,console.log("current sellected site",de.value),M.value=!0)})),L(H,((e,a)=>{M.value=!1,(async e=>{try{await f.post(`/v3/api/vixen-job/${r.params.id}/assign/${e}/`),p.success("worker assigned"),Ae()}catch(a){console.log(a)}})(e);const l=ne.value.find((a=>a.id==e));l&&(re.value.push(l),ue.value=l,console.log("current sellected worker",ue.value),M.value=!0)})),L([ve,ge,ye,he],(([e,a,l,t])=>{let s=0;e&&s++,a&&s++,l&&s++,t&&s++,pe.value=25*s})),g((()=>{we(),(async()=>{try{const e=await f.get(`/v3/api/worker/${d.loggedCompany.id}/worker-short-info/`);ne.value=e.data,ie.value=e.data.map((e=>({value:e.id.toString(),name:`${e.firstName} ${e.lastName}`,icon:e.profileImageURL})))}catch{p.error("Invalid data")}finally{m.value=!1}})(),(async()=>{try{const e=await f.get(`/v3/api/account/user/company-managers/${d.loggedCompany.id}/`,{});B.value=e.data.map((e=>({value:e.id.toString(),name:`${e.first_name} ${e.last_name}`,icon:e.profileImage,email:e.email}))),e.data&&(q.value=e.data[0].id)}catch{p.error("Invalid data")}finally{m.value=!1}})(),(()=>{let e=new Date,a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");Se(`${a}-${l}-${t}`)})(),(async()=>{try{const e=await f.get(`/v3/api/contract/company/${d.loggedCompany.id}/`,{});Y.value=e.data.map((e=>({value:e.id.toString(),name:e.name}))),e.data?G.value=e.data[0].id:G.value=""}catch(e){console.log(e)}})(),(async()=>{try{m.value=!0;const e=await f.get(`/v3/api/site/option/${d.loggedCompany.id}/`);se.value=e.data.map((e=>({value:e.id.toString(),name:`${e.name}`,postcode:e.postcode,incharge:e.inchargeName}))),e.data&&(oe.value=e.data),m.value=!1}catch(e){console.log(e)}})(),Ae()})),(s,i)=>{const d=D,u=$,v=n,g=O("Multiselect"),M=X,N=Q,L=e,W=Z,P=K,G=Oa,q=We,B=t,Y=l,ee=a;return y(),h("div",null,[b("div",Ua,[b("div",$a,[C(u,null,{default:j((()=>[C(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[0]||(i[0]=()=>{fe.value="created"}),class:z([Ie("created")?"parentActiveState":"","created"===I(fe)?"parentActiveTab":""])},{default:j((()=>[Ja,A(" Created "),Ea])),_:1},8,["class"]),C(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[1]||(i[1]=()=>{fe.value="waitingRAMS"}),class:z([Ie("waitingRAMS")?"parentActiveState":"","waitingRAMS"===I(fe)?"parentActiveTab":""])},{default:j((()=>[Ga,A(" Pending for Checks "),Fa])),_:1},8,["class"]),C(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[2]||(i[2]=()=>{fe.value="readyToStart"}),class:z([Ie("readyToStart")?"parentActiveState":"","readyToStart"===I(fe)?"parentActiveTab":""])},{default:j((()=>[Ha,A(" Ready to start "),qa])),_:1},8,["class"]),C(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[3]||(i[3]=()=>{fe.value="started"}),class:z([Ie("started")?"parentActiveState":"","started"===I(fe)?"parentActiveTab":""])},{default:j((()=>[Ba,A(" In Progress "),Ya])),_:1},8,["class"]),C(d,{light:"",style:{"background-color":"transparent",padding:"5px",margin:"2px"},onClick:i[4]||(i[4]=()=>{fe.value="completed"}),class:z([Ie("completed")?"parentActiveState":"","completed"===I(fe)?"parentActiveTab":""])},{default:j((()=>[Ka,A(" Completed "),Za])),_:1},8,["class"])])),_:1})]),b("div",Qa,[b("div",Xa,[b("div",el,[b("p",al,S(I(_e).title?I(_e).title:"-----"),1),b("div",ll,[b("p",tl,[A(" Id: "),b("span",sl,S(I(_e).externalId?I(_e).externalId:"-----"),1)]),b("p",ol,[A(" Workers: "),b("span",il,S(I(_e).workers?I(_e).workers.length:"0"),1)])]),b("div",nl,[b("p",rl,[A(" Type: "),b("span",cl,S(I(_e).isWorkWithContractor?"Work with contractor":"Self Serve"),1)]),b("p",dl,[A(" Created At: "),b("span",ul,S(I(_e).createdAt?I(_e).createdAt.slice(0,10):"-----"),1)])])])])]),b("div",ml,[pl,b("div",fl,[C(v,{picture:I(_e).managerInfo&&I(_e).managerInfo.profileImage?I(_e).managerInfo.profileImage:"",size:"medium",squared:""},null,8,["picture"]),b("div",vl,[b("p",gl,S(I(_e).managerInfo&&I(_e).managerInfo.first_name?I(_e).managerInfo.first_name:"------")+" "+S(I(_e).managerInfo&&I(_e).managerInfo.last_name?I(_e).managerInfo.last_name:""),1),b("p",yl,S(I(_e).managerInfo&&I(_e).managerInfo.email?I(_e).managerInfo.email:"------"),1)])])])]),"created"==I(fe)?(y(),h("div",hl,[b("div",bl,[b("div",Il,[b("div",_l,[b("div",kl,[b("div",wl,[b("i",{onClick:i[5]||(i[5]=e=>{return a=I(_e).id,c.value=a,void(V.value=!0);var a}),class:"fas fa-pen cu-pointer","aria-hidden":"true",style:{position:"absolute",right:"14px",top:"10px"}}),b("div",xl,[b("div",Sl,[I(_e).siteInfo&&I(_e).siteInfo.contractInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo&&!I(m)?(y(),h("img",{key:0,class:"small-img",src:I(_e).siteInfo.contractInfo.cuCompanyInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo.logo?I(_e).siteInfo.contractInfo.cuCompanyInfo.logo:"",size:"medium"},null,8,Cl)):k("",!0)]),b("div",Al,[I(_e).siteInfo&&I(_e).siteInfo.contractInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo&&!I(m)?(y(),h("h1",jl,S(I(_e).siteInfo.contractInfo.cuCompanyInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo.name?I(_e).siteInfo.contractInfo.cuCompanyInfo.name:"Not added yet"),1)):k("",!0),I(_e).siteInfo&&I(_e).siteInfo.contractInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo&&!I(m)?(y(),h("p",Vl,S(I(_e).siteInfo.contractInfo.cuCompanyInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo.email?I(_e).siteInfo.contractInfo.cuCompanyInfo.email:"------"),1)):k("",!0)]),b("div",Ml,[Tl,b("p",Nl,S(I(_e)&&I(_e).title?I(_e).title:"0"),1)]),b("div",Rl,[Ll,b("p",Dl,S(I(_e).externalId&&I(_e).externalId?I(_e).externalId:"-----"),1)]),b("div",Wl,[Pl,b("p",Ol,S(I(_e).isWorkWithContractor&&I(_e).isWorkWithContractor?"Work with contractor":" Self Serve"),1)]),b("div",zl,[Ul,b("p",$l,S(I(_e).createdAt&&I(_e).createdAt?I(_e).createdAt.slice(0,10):"0"),1)]),b("div",Jl,[El,b("p",Gl,S(I(_e).managerInfo&&I(_e).managerInfo.first_name?I(_e).managerInfo.first_name:"--- --- "),1)]),b("div",Fl,[Hl,b("p",ql,S(I(_e).description&&I(_e).description?I(_e).description:"-----"),1)])])])])])])])])):k("",!0),"waitingRAMS"==I(fe)?(y(),h("div",Bl,[b("div",Yl,[b("div",Kl,[b("div",Zl,[C(u,null,{default:j((()=>[C(d,{rounded:"",onClick:i[6]||(i[6]=e=>xe("waitingRAMS")),color:"waitingRAMS"===I(R)?"primary":""},{default:j((()=>[A("1 - Manage RAMS ")])),_:1},8,["color"]),C(d,{rounded:"",onClick:i[7]||(i[7]=e=>xe("site")),color:"site"===I(R)?"primary":""},{default:j((()=>[A("2 - Job Site (optional) ")])),_:1},8,["color"]),C(d,{rounded:"",onClick:i[8]||(i[8]=e=>xe("worker")),color:"worker"===I(R)?"primary":""},{default:j((()=>[A("3 - Allocate Worker (optional) ")])),_:1},8,["color"])])),_:1})]),"site"==I(R)?(y(),h("div",Ql,[b("div",Xl,[b("div",et,[b("label",null,"Select Site ("+S(I(se).length>10?I(se).length:"0"+I(se).length)+")*",1),C(N,null,{default:j((({id:e})=>[C(M,{class:"placement-wrapper"},{default:j((()=>[C(g,{class:"multi-select lg-multiselect",modelValue:I(F),"onUpdate:modelValue":i[9]||(i[9]=e=>U(F)?F.value=e:null),attrs:{id:e},placeholder:"Select site",label:"name",options:I(se),searchable:!0,"track-by":"name",height:300},{singlelabel:j((({value:e})=>[b("div",at,S(e.name),1)])),option:j((({option:e})=>[b("div",lt,[b("div",tt,[b("span",st,"ID: 00"+S(e.value),1),b("span",ot,S(e.name),1),b("div",it,[b("span",nt,"Post Code: "+S(e.postcode?e.postcode:" ---"),1),A(" | "),b("span",rt,"Incharge: "+S(e.incharge),1)])]),ct])])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),b("div",dt,[C(d,{onClick:Ce,elevated:"",color:"warning"},{default:j((()=>[A(" Assign Site ")])),_:1}),ut,C(d,{onClick:i[10]||(i[10]=()=>{T.value=!I(T)}),elevated:"",color:"warning"},{default:j((()=>[A(" Create new Site ")])),_:1})])]),b("div",mt,[b("div",pt,[b("div",ft,[I(_e).siteInfo&&I(_e).siteInfo.contractInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo&&!I(m)?(y(),h("img",{key:0,class:"small-img",src:I(_e).siteInfo.contractInfo.cuCompanyInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo.logo?I(_e).siteInfo.contractInfo.cuCompanyInfo.logo:"",size:"medium"},null,8,vt)):k("",!0)]),b("div",gt,[I(_e).siteInfo&&I(_e).siteInfo.contractInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo&&!I(m)?(y(),h("h1",yt,S(I(_e).siteInfo.contractInfo.cuCompanyInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo.name?I(_e).siteInfo.contractInfo.cuCompanyInfo.name:"Not added yet"),1)):k("",!0),I(_e).siteInfo&&I(_e).siteInfo.contractInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo&&!I(m)?(y(),h("p",ht,S(I(_e).siteInfo.contractInfo.cuCompanyInfo&&I(_e).siteInfo.contractInfo.cuCompanyInfo.email?I(_e).siteInfo.contractInfo.cuCompanyInfo.email:"------"),1)):k("",!0)]),b("div",bt,[It,b("p",_t," 00"+S(I(_e).siteInfo&&I(_e).siteInfo.id?I(_e).siteInfo.id:"0"),1)]),b("div",kt,[wt,b("p",xt,S(I(_e).siteInfo&&I(_e).siteInfo.name?I(_e).siteInfo.name:"0"),1)]),b("div",St,[Ct,b("p",At,S(I(_e).siteInfo&&I(_e).siteInfo.postcode?I(_e).siteInfo.postcode:"--- --- "),1)]),b("div",jt,[Vt,b("p",Mt,S(I(_e).siteInfo&&I(_e).siteInfo.address?I(_e).siteInfo.address:"-----"),1)]),b("div",Tt,[Nt,b("p",Rt,S(I(_e).siteInfo&&I(_e).siteInfo.inchargeName?I(_e).siteInfo.inchargeName:"--- --- "),1)]),b("div",Lt,[Dt,b("p",Wt,S(I(_e).siteInfo&&I(_e).siteInfo.inchargeEmail?I(_e).siteInfo.inchargeEmail:"-----"),1)])]),I(m)?k("",!0):(y(),_(L,{key:0,style:{width:"90%",height:"220px"},siteData:I(_e).siteInfo?I(_e).siteInfo:I(_e)},null,8,["siteData"]))])])])):k("",!0),"worker"==I(R)?(y(),h("div",Pt,[b("div",Ot,[b("div",zt,[b("label",null,"Select Worker ("+S(I(ie).length>10?I(ie).length:"0"+I(ie).length)+")*",1),C(N,null,{default:j((({id:e})=>[C(M,{class:"placement-wrapper"},{default:j((()=>[C(g,{class:"multi-select lg-multiselect",modelValue:I(H),"onUpdate:modelValue":i[11]||(i[11]=e=>U(H)?H.value=e:null),attrs:{id:e},placeholder:"Select site",label:"name",options:I(ie),searchable:!0,"track-by":"name"},{singlelabel:j((({value:e})=>[b("div",Ut,[b("img",{class:"select-label-icon mr-2 value-image",src:e.icon,alt:""},null,8,$t),A(" "+S(e.name),1)])])),option:j((({option:e})=>[b("img",{class:"select-label-icon mr-2 value-image",src:e.icon,alt:""},null,8,Jt),A(" "+S(e.name),1)])),_:2},1032,["modelValue","attrs","options"])])),_:2},1024)])),_:1})]),b("div",Et,[I(_e).assignedWorkers.length?(y(),h("h1",Gt," Assigned Workers ("+S(I(_e).assignedWorkers.length)+") ",1)):(y(),h("h1",Ft," No Assigned Worker Assigned yet ")),(y(!0),h(w,null,x(I(_e).assignedWorkers,(e=>(y(),h("div",{key:e.id,class:"card px-4 py-3 mb-2 rounded"},[C(W,{onClick:a=>(async e=>{try{await f.delete(`/v3/api/vixen-job/${r.params.id}/remove/${e}/`),p.error("Worker removed from the site"),Ae()}catch(a){console.log(a)}})(e.id),color:"danger",light:"",raised:"",circle:"",icon:"feather:x",style:{position:"absolute","font-size":"22px",right:"10px",top:"10px",cursor:"pointer",padding:"0",width:"22px",height:"22px"}},null,8,["onClick"]),b("div",Ht,[b("div",{class:"column is-6 is-flex cu-pointer",onClick:a=>{return l=e.id,void o.push({name:"/sidebar/company/workers/[id]",params:{id:l}});var l}},[C(v,{picture:e.profileImageURL?e.profileImageURL:"/demo/avatars/11.jpg",size:"large"},null,8,["picture"]),b("div",Bt,[b("p",Yt,S(e.firstName?e.firstName:"---")+" "+S(e.lastName?e.lastName:"---"),1),b("p",Kt,[Zt,A(" "+S(e.emailAddress?e.emailAddress:"--- --- "),1)]),b("p",Qt,[Xt,A(" "+S(e.postCode?e.postCode:"--- --- "),1)])])],8,qt),b("div",es,[as,b("p",ls,[b("span",ts,S(e.profileStat&&e.profileStat.percentage?e.profileStat.percentage:"0")+"%",1),A(" Complete ")]),b("p",ss,[b("span",{style:J({color:e.readyToGo?"var(--primary)":"var(--danger)"})},S(1==e.readyToGo?"Ready to go":"Not Ready"),5)])]),b("div",os,[is,b("p",ns," Mandatory : - "+S(e.profileStat.anomalieStats?e.profileStat.anomalieStats.required_not_uploaded:"0"),1),b("p",rs," Optional : - "+S(e.profileStat.anomalieStats?e.profileStat.anomalieStats.optional_not_uploaded:"0"),1),b("p",cs," Expired : - "+S(e.profileStat.anomalieStats?e.profileStat.anomalieStats.expired:"0"),1)])])])))),128))])])])):k("",!0),"waitingRAMS"==I(R)?(y(),h("div",ds,[b("div",us,[b("div",ms,[b("div",ps,[fs,b("div",vs,[C(N,null,{default:j((()=>[C(M,null,{default:j((()=>[C(P,{modelValue:I(me),"onUpdate:modelValue":i[12]||(i[12]=e=>U(me)?me.value=e:null),rows:"4",placeholder:"Enter note..."},null,8,["modelValue"])])),_:1})])),_:1})])])])])])):k("",!0)])])])):k("",!0),"readyToStart"==I(fe)?(y(),h("div",gs,[b("div",ys,[b("div",hs,[b("div",bs,[b("div",Is,[b("div",_s,[b("div",ks,[b("div",ws,[I(ce).length?(y(),h("h1",xs,S(I(ce).length)+" - Workers are assigned and ready to start the job. ",1)):(y(),h("h1",Ss," No Assigned Worker Assigned yet ")),(y(!0),h(w,null,x(I(ce),(e=>(y(),h("div",{key:e.id,class:"card px-4 py-3 mb-2 rounded"},[b("div",Cs,[b("div",As,[C(v,{picture:e.profileImageURL?e.profileImageURL:"/demo/avatars/11.jpg",size:"large"},null,8,["picture"]),b("div",js,[b("p",Vs,S(e.firstName?e.firstName:"---")+" "+S(e.lastName?e.lastName:"---"),1),b("p",Ms,[Ts,A(" "+S(e.emailAddress?e.emailAddress:"--- --- "),1)]),b("p",Ns,[Rs,A(" "+S(e.postCode?e.postCode:"--- --- "),1)])])]),b("div",Ls,[Ds,b("p",Ws,[b("span",Ps,S(e.profileStat.percentage)+"%",1),A(" Complete ")]),b("p",Os,[b("span",{style:J({color:e.readyToGo?"var(--primary)":"var(--danger)"})},S(e.readyToGo?"Ready to go":"Not Ready"),5)])]),b("div",zs,[Us,b("p",$s," Mandatory : - "+S(e.profileStat.anomalieStats?e.profileStat.anomalieStats.required_not_uploaded:"0"),1),b("p",Js," Optional : - "+S(e.profileStat.anomalieStats?e.profileStat.anomalieStats.optional_not_uploaded:"0"),1),b("p",Es," Expired : - "+S(e.profileStat.anomalieStats?e.profileStat.anomalieStats.expired:"0"),1)])])])))),128))])])])])])])])])):k("",!0),"started"==I(fe)?(y(),h("div",Gs,[b("div",Fs,[b("div",Hs,[b("div",qs,[C(u,null,{default:j((()=>[C(d,{rounded:"",onClick:i[13]||(i[13]=()=>{E.value="rotaView"}),color:"rotaView"===I(E)?"primary":""},{default:j((()=>[A("Schedule ")])),_:1},8,["color"]),C(d,{rounded:"",onClick:i[14]||(i[14]=()=>{E.value="timesheet"}),color:"timesheet"===I(E)?"primary":""},{default:j((()=>[A("Site visit logs ")])),_:1},8,["color"])])),_:1})]),b("div",Bs,["rotaView"==I(E)?(y(),h("div",Ys,[C(G,{id:I(r).params.id},null,8,["id"])])):k("",!0),"timesheet"==I(E)?(y(),h("div",Ks,[C(q,{id:I(r).params.id},null,8,["id"])])):k("",!0)])])])])):k("",!0),"completed"==I(fe)?(y(),h("div",Zs,[b("div",Qs,[b("div",Xs,[b("div",eo,[b("div",ao,[b("div",lo,[b("div",to,[b("div",so,[oo,C(N,null,{default:j((()=>[C(M,{raw:"",subcontrol:""},{default:j((()=>[C(B,{modelValue:I(ye),"onUpdate:modelValue":i[15]||(i[15]=e=>U(ye)?ye.value=e:null),label:"PM assigned ?",color:"info"},null,8,["modelValue"])])),_:1}),C(M,{raw:"",subcontrol:""},{default:j((()=>[C(B,{modelValue:I(ge),"onUpdate:modelValue":i[16]||(i[16]=e=>U(ge)?ge.value=e:null),label:"Checks completed (RAMS/CPP) ?",color:"primary"},null,8,["modelValue"])])),_:1}),C(M,{raw:"",subcontrol:""},{default:j((()=>[C(B,{modelValue:I(he),"onUpdate:modelValue":i[17]||(i[17]=e=>U(he)?he.value=e:null),label:"Workers compliance checked ?",color:"success"},null,8,["modelValue"])])),_:1}),C(M,{raw:"",subcontrol:""},{default:j((()=>[C(B,{modelValue:I(ve),"onUpdate:modelValue":i[18]||(i[18]=e=>U(ve)?ve.value=e:null),color:"info",label:"Job completed successfully ?"},null,8,["modelValue"])])),_:1})])),_:1}),C(d,{onClick:je,style:{float:"right"},elevated:"",color:"warning"},{default:j((()=>[A("Complete Job")])),_:1})])])]),b("div",io,[C(I(le),{id:"radial-circle",class:"circle-chart-wrapper",height:I(ke).chart.height,type:I(ke).chart.type,series:[I(pe)],options:I(ke)},null,8,["height","type","series","options"])]),no])])])])])):k("",!0),I(V)?(y(),_(Y,{key:5,jobId:I(c),AddJobModalOpen:I(V),"onUpdate:modalHandler":i[19]||(i[19]=e=>V.value=!1),"onUpdate:onSuccess":we},null,8,["jobId","AddJobModalOpen"])):k("",!0),I(T)?(y(),_(ee,{key:6,contractId:I(_e).siteInfo.contract,"onUpdate:modalHandler":i[20]||(i[20]=()=>{T.value=!I(T)}),AddSiteModalOpen:I(T),"onUpdate:OnSuccess":we},null,8,["contractId","AddSiteModalOpen"])):k("",!0)])}}}),co=T(ro,[["__scopeId","data-v-fb16d804"]]),uo=f({__name:"[id]",setup:e=>(se().setPageTitle("Job Info"),E({title:"Jobs - Arez"}),(e,a)=>{const l=co;return y(),h("div",null,[C(l)])})});export{uo as default};
