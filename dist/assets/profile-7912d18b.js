import{_ as e}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-19f48bd5.js";import{_ as a}from"./AddUpdateUser-0f10ad61.js";import{_ as s}from"./JobTodos.vue_vue_type_style_index_0_lang-ceac14ff.js";import{_ as l}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-93ad1b48.js";import{_ as t}from"./UserProfileInfo-8d6ed616.js";import{_ as i}from"./SweetAlert.vue_vue_type_style_index_0_lang-b2f7e9da.js";import{_ as n}from"./VDropdown.vue_vue_type_style_index_0_lang-b9ed1665.js";import{_ as r}from"./VAvatar.vue_vue_type_style_index_0_lang-80e9223e.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-3adfb351.js";import{f as u,b as d,r as p,$ as c,o as _,C as m,D as v,E as y,F as f,G as g,L as h,X as b,m as j,k as x,I as k,V as w,W as V,aS as A,O as C,N as U,P,U as S,A as I,T as O,H as M,J as T}from"./index-ac8711cd.js";import{_ as H}from"./VControl-28ac31fa.js";import{_ as E,a as D}from"./search-6-dark-6c9b195a.js";import{u as L}from"./useAPI-0fa72346.js";import{u as K}from"./useNotyf-acf2ea3e.js";import{u as N}from"./viewWrapper-5842e12c.js";import{b as $}from"./route-block-83d24a4e.js";import"./VModal.vue_vue_type_style_index_0_lang-50304d71.js";import"./VIcon.vue_vue_type_script_setup_true_lang-b88bef5f.js";import"./VField.vue_vue_type_script_setup_true_lang-60ac471e.js";import"./VLabel.vue_vue_type_script_setup_true_lang-58375a4a.js";import"./useVFieldContext-ff042d05.js";import"./VInput.vue_vue_type_script_setup_true_lang-a1cabaaf.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-d9468888.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-6c9e401d.js";import"./VFilePond.vue_vue_type_script_lang-e97d4f2e.js";import"./useSupportElement-27411722.js";import"./VBlock.vue_vue_type_style_index_0_lang-55e443ab.js";import"./VTag.vue_vue_type_style_index_0_lang-d0eaad10.js";import"./VIconButton-0c2f613f.js";import"./having-coffee-dark-69a7d2f6.js";import"./moment-bad41465.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-4e36db43.js";import"./VOption.vue_vue_type_style_index_0_lang-3ce51752.js";import"./estimatesScripts-3481f1a0.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-a0037ff9.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-090d7d32.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-abcea6fd.js";import"./search-3-dark-1eb6ae2e.js";import"./VIconBox.vue_vue_type_style_index_0_lang-6603a1ce.js";import"./useDropdown-1f4feb17.js";import"./notyf-5c604a87.js";import"./useThemeColors-b6bf08a8.js";const z={class:"tile-grid-toolbar"},B={class:"buttons"},F=y("span",{class:"icon"},[y("i",{"aria-hidden":"true",class:"fas fa-plus"})],-1),J=y("span",null,"Admin",-1),R={class:"tile-grid tile-grid-v1"},W=y("img",{class:"light-image",src:E,alt:""},null,-1),G=y("img",{class:"dark-image",src:D,alt:""},null,-1),X={class:"tile-grid-item"},Q={class:"tile-grid-item-inner"},Y={class:"meta"},q={class:"dark-inverted"},Z={style:{"text-transform":"capitalize"}},ee=["onClick"],ae=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-lock"})],-1),y("div",{class:"meta"},[y("span",null,"Edit"),y("span",null,"Edit user")],-1)],se=["onClick"],le=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-share"})],-1),y("div",{class:"meta"},[y("span",null,"Password"),y("span",null,"Change password")],-1)],te=y("hr",{class:"dropdown-divider"},null,-1),ie=["onClick"],ne=[y("div",{class:"icon"},[y("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),y("div",{class:"meta"},[y("span",null,"Delete"),y("span",null,"Delete from list")],-1)],re=u({__name:"AdminsList",setup(s){const l=L(),t=K();d();const u=p(""),I=p(!1),O=p(""),M=p(""),T=p(!1),E=p({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),D=p([{username:"",last_name:"",email:"",password:"",status:"",role:"admin",phoneNumber:"",avatar:null}]),N=c((()=>u.value?D.value.filter((e=>e.username.match(new RegExp(u.value,"i"))||e.email.match(new RegExp(u.value,"i")))):D.value));p(0);const $=async()=>{try{I.value=!0;const e=await l.get("/api/users/by-role/admin/",{});D.value=e.data}catch(e){console.log(e)}finally{I.value=!1}},re=async()=>{try{I.value=!0;await l.delete(`/api/users/${M.value}/`,{});$(),t.success("Admin deleted successfully")}catch(e){console.error(e),t.error("Error while deleting")}finally{E.value.isSweetAlertOpen=!1,I.value=!1}},oe=(e="")=>{O.value=e,T.value=!T.value},ue=p(!1);return _((()=>{$()})),(s,l)=>{const t=H,d=P,p=o,c=r,_=n,D=a,L=i;return m(),v("div",null,[y("div",z,[f(t,{icon:"feather:search"},{default:g((()=>[h(y("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>x(u)?u.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,j(u)]])])),_:1}),y("div",B,[f(d,{onClick:l[1]||(l[1]=e=>oe()),color:"primary",raised:""},{default:g((()=>[F,J])),_:1})])]),y("div",R,[f(p,{class:k([0!==j(N).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[W,G])),_:1},8,["class"]),f(A,{name:"list",tag:"div",class:"columns is-multiline"},{default:g((()=>[(m(!0),v(w,null,V(j(N),((e,a)=>(m(),v("div",{key:a,class:"column is-6"},[y("div",X,[y("div",Q,[f(c,{picture:e.avatar,color:"primary",initials:e.username.slice(0,2),size:"medium"},null,8,["picture","initials"]),y("div",Y,[y("span",q,S(e.username)+" "+S(e.last_name?e.last_name:""),1),y("span",Z,S(e.role),1)]),f(_,{icon:"feather:more-vertical",spaced:"",right:""},{content:g((()=>[y("a",{onClick:a=>oe(e.id),role:"menuitem",class:"dropdown-item is-media"},ae,8,ee),y("a",{onClick:a=>{return s=e.id,O.value=s,void(ue.value=!0);var s},role:"menuitem",class:"dropdown-item is-media"},le,8,se),te,y("a",{onClick:a=>{return s=e,M.value=s.id,void(E.value={title:`Delete ${s.username}?`,subtitle:"After deleting this admin you won't be able to recover it again.",btntext:"Delete it",isSweetAlertOpen:!0});var s},role:"menuitem",class:"dropdown-item is-media"},ne,8,ie)])),_:2},1024)])])])))),128))])),_:1})]),j(T)?(m(),C(D,{key:0,"is-modal-open":j(T),"user-role":"admin","user-id":j(O),"onUpdate:closeModalHandler":l[2]||(l[2]=e=>T.value=!1),"onUpdate:actionUpdateHandler":$},null,8,["is-modal-open","user-id"])):U("",!0),j(E).isSweetAlertOpen?(m(),C(L,{key:1,loading:j(I),isSweetAlertOpen:j(E).isSweetAlertOpen,title:j(E).title,subtitle:j(E).subtitle,btntext:j(E).btntext,onConfirm:re,onCancel:()=>j(E).isSweetAlertOpen=!1},null,8,["loading","isSweetAlertOpen","title","subtitle","btntext","onCancel"])):U("",!0),j(ue)?(m(),C(e,{key:2,isModalOpen:j(ue),userId:j(O),"onUpdate:closeModalHandler":l[3]||(l[3]=e=>ue.value=!1),"onUpdate:actionUpdateHandler":$},null,8,["isModalOpen","userId"])):U("",!0)])}}}),oe={class:"profile-wrapper"},ue={class:"profile-header has-text-centered"},de={class:"title is-4 is-narrow is-thin"},pe={class:"light-text"},ce={class:"profile-stats"},_e={class:"profile-stat"},me={style:{"text-transform":"capitalize"}},ve=y("div",{class:"separator"},null,-1),ye={class:"profile-stat"},fe=y("i",{"aria-hidden":"true",class:"lnil lnil-phone"},null,-1),ge=y("div",{class:"separator"},null,-1),he={class:"socials"},be=[y("i",{"aria-hidden":"true",class:"fas fa-edit"},null,-1)],je=[y("i",{"aria-hidden":"true",class:"fas fa-lock"},null,-1)],xe={class:"profile-body"},ke={class:"columns is-multiline"},we={class:"column is-12"},Ve={class:"toolbar"},Ae={class:"tabs-inner"},Ce={class:"tabs is-boxed"},Ue=[y("span",null,"Personal Info",-1)],Pe=[y("span",null,"Admins",-1)],Se=[y("span",null,"Activities",-1)],Ie=[y("span",null,"Todos",-1)],Oe={key:0,class:"column is-12"},Me={key:1,class:"column is-12"},Te={key:2,class:"column is-12"},He={key:3,class:"column is-12"},Ee=u({__name:"profile",setup(i){N().setPageTitle("Profile"),I((()=>({title:"Profile Ibex-User  "}))),O();const n=L(),o=d(),u=p(!1),c=p(!1),g=p(""),h=p(!1),b=p("personal"),x=p({username:"",email:"",password:"",is_sentMail:!1,status:"",role:"",phoneNumber:"",avatar:"",supplier:""}),w=async()=>{try{h.value=!0;const e=await n.get(`/api/users/${o.user.id}/`);x.value=e.data}catch(e){console.error(e)}finally{h.value=!1}};return _((()=>{console.log("user data ",o.user),o.user.id&&w()})),(i,n)=>{const d=r,p=re,_=t,h=l,V=s,A=a,P=e;return m(),v("div",oe,[y("div",ue,[f(d,{size:"xl",picture:j(x).avatar},null,8,["picture"]),y("h3",de,S(j(x)?.username),1),y("p",pe,S(j(x)?.email?j(x)?.email:""),1),y("div",ce,[y("div",_e,[y("span",me,S(j(x)?.role),1)]),ve,y("div",ye,[fe,y("span",null,S(j(x)?.phoneNumber),1)]),ge,y("div",he,[y("a",{onClick:n[0]||(n[0]=e=>u.value=!j(u))},be),y("a",{onClick:n[1]||(n[1]=e=>{return a=j(x).id,g.value=a,void(c.value=!0);var a})},je)])])]),y("div",xe,[y("div",ke,[y("div",we,[y("div",Ve,[y("div",Ae,[y("div",Ce,[y("ul",null,[y("li",{class:k(["personal"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[2]||(n[2]=M(T((e=>b.value="personal"),["prevent"]),["space"])),onClick:n[3]||(n[3]=e=>b.value="personal")},Ue,32)],2),"admin"==j(o).user.role?(m(),v("li",{key:0,class:k(["admins"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[4]||(n[4]=M(T((e=>b.value="admins"),["prevent"]),["space"])),onClick:n[5]||(n[5]=e=>b.value="admins")},Pe,32)],2)):U("",!0),y("li",{class:k(["activities"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[6]||(n[6]=M(T((e=>b.value="activities"),["prevent"]),["space"])),onClick:n[7]||(n[7]=e=>b.value="activities")},Se,32)],2),y("li",{class:k(["todo"===j(b)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:n[8]||(n[8]=M(T((e=>b.value="todo"),["prevent"]),["space"])),onClick:n[9]||(n[9]=e=>b.value="todo")},Ie,32)],2)])])])])]),"admins"==j(b)?(m(),v("div",Oe,[f(p,{class:"mb-3"})])):U("",!0),"personal"==j(b)?(m(),v("div",Me,[f(_,{"user-data":j(x)},null,8,["user-data"])])):U("",!0),"activities"==j(b)?(m(),v("div",Te,[f(h,{"get-user-activities":!0})])):U("",!0),"todo"==j(b)?(m(),v("div",He,[f(V,{"get-user-todo":!0})])):U("",!0)])]),j(u)?(m(),C(A,{key:0,"is-modal-open":j(u),"user-role":"admin","user-id":j(o).user.id,"onUpdate:closeModalHandler":n[10]||(n[10]=e=>u.value=!1),"onUpdate:actionUpdateHandler":w},null,8,["is-modal-open","user-id"])):U("",!0),j(c)?(m(),C(P,{key:1,isModalOpen:j(c),userId:j(g),"onUpdate:closeModalHandler":n[11]||(n[11]=e=>c.value=!1),"onUpdate:actionUpdateHandler":w},null,8,["isModalOpen","userId"])):U("",!0)])}}});"function"==typeof $&&$(Ee);export{Ee as default};
