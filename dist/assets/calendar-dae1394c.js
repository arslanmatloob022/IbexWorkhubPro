import{F as e}from"./FullCalendar-6c94dac6.js";import{i as t}from"./index-f52ed8ce.js";import{u as s}from"./useAPI-329c7502.js";import{u as a}from"./useNotyf-c16238a4.js";import{u as r}from"./userSession-1b1da0d4.js";import{e as o,N as i,r as l,o as n,y as c,z as u,C as d,A as p,B as m,J as v,l as y,v as f}from"./index-023a2237.js";import{u as g}from"./viewWrapper-7c308818.js";import"./notyf-577918b8.js";import"./useThemeColors-f46d40e9.js";const w={class:"lifestyle-dashboard lifestyle-dashboard-v3"},h={class:"columns is-multiline"},j={class:"column is-12"},k={style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between"}},b={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px"}},x={style:{"margin-top":"8px","padding-right":"10px"}},T=o({__name:"WorkerCalendar",setup(o){const f=r(),g=a(),T=s();i();const C=l([]),D=l({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});l(!1),l("all"),l("");const _=l(!1),W=l([]),A=l([]),M=l([]),N=l([]),F=l({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),I=l({plugins:[t],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),L=l({});return n((async()=>{await(async()=>{try{_.value=!0;const e=await T.get(`/api/users/${f.user.id}`);D.value=e.data,_.value=!1}catch(e){console.log(e)}})(),await(async()=>{try{const e=await T.get(`/api/task/${f.user.id}/worker-tasks/`);W.value=e.data,console.log("worker tasks",W.value)}catch(e){W.value=[]}})(),(async(e=!1)=>{try{const t=await T.get(`/api/task/worker-today/${f.user.id}/`);L.value=t.data,e&&g.green("Tasks list Refreshed")}catch(t){console.log(t)}})(),C.value=W.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:F[e.status],status:e.status}))),N.value=W.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:F[e.project.status]}))),A.value=N.value,M.value=C.value,I.value={...I.value,resources:A.value,events:M.value},console.log("tasks",I.value.events,"resources",I.value.resources)})),(t,s)=>(c(),u("div",w,[d("div",h,[d("div",j,[p(y(e),{options:y(I)},{eventContent:m((e=>[d("div",k,[d("p",b,v(e.event.title),1),d("div",null,[d("p",x,v(new Date(e.event.start).toDateString())+" to "+v(new Date(e.event.end).toDateString()),1)])])])),_:1},8,["options"])])])]))}}),C={class:""},D=o({__name:"calendar",setup:e=>(g().setPageTitle("Calendar View"),f({title:"Tasks Calendar- Ibex"}),(e,t)=>{const s=T;return c(),u("div",C,[p(s)])})});export{D as default};
