import{_ as e}from"./SweetAlert.vue_vue_type_style_index_0_lang-8f28037e.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-3fba2ccf.js";import{_ as a,c as s}from"./VFlexTable.vue_vue_type_style_index_0_lang-feeef9fd.js";import{_ as l}from"./VDropdown.vue_vue_type_style_index_0_lang-849ea7ee.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-790d4aaa.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-8c643152.js";import{_ as o}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-94850840.js";import{f as r,x as u,r as c,$ as d,o as p,av as m,m as _,C as v,O as f,D as b,E as g,F as y,G as h,L as j,X as x,k,K as w,N as C,V as A,W as V,aS as P,P as S,U as I,J as N,A as $,am as O}from"./index-3810d547.js";import{_ as D}from"./VField.vue_vue_type_script_setup_true_lang-74991bb6.js";import{_ as T}from"./VControl-9d8e31c8.js";import{_ as F}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-606c8ebf.js";import{_ as J,a as L}from"./search-4-dark-2b5b440c.js";import{g as W}from"./estimatesScripts-b0203dc6.js";import{u as z}from"./useAPI-a4369ef3.js";import{u as E}from"./useNotyf-7d34b1f3.js";import{d as U,i as X}from"./useSupportElement-b0b76f55.js";import{u as M}from"./viewWrapper-7c62ca2f.js";import{b as q}from"./route-block-83d24a4e.js";import"./VFlex.vue_vue_type_style_index_0_lang-d5786162.js";import"./VIcon.vue_vue_type_script_setup_true_lang-bd06697a.js";import"./useDropdown-9f469459.js";import"./VLabel.vue_vue_type_script_setup_true_lang-62b94f82.js";import"./useVFieldContext-f70843bc.js";import"./VPlaceloadWrap-83a56b40.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-dc7d6e5b.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-2803ff5b.js";import"./notyf-38fcd30a.js";import"./useThemeColors-117f81b8.js";const B={key:1},G={class:"list-view-toolbar"},H={class:"tabs-inner"},K={class:"page-content-inner"},R={class:"flex-list-wrapper flex-list-v1"},Y=g("div",{class:"columns is-multiline"},[g("div",{class:"column is-3"}),g("div",{class:"column is-6 justify-right"})],-1),Q=g("img",{class:"light-image",src:J,alt:""},null,-1),Z=g("img",{class:"dark-image",src:L,alt:""},null,-1),ee={class:"item-name dark-inverted show-text-200"},te={class:"item-meta show-text-200"},ae={key:0,class:"show-text-200"},se={class:"item-name"},le={class:"item-meta"},ie={key:1,class:"show-text-200"},ne={class:"item-name dark-inverted"},oe={class:"item-meta"},re={class:"item-name dark-inverted"},ue={class:"item-meta"},ce=["onClick"],de=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-eye"})],-1),g("div",{class:"meta"},[g("span",null,"View"),g("span",null,"View user details")],-1)],pe=g("hr",{class:"dropdown-divider"},null,-1),me=["onClick"],_e=[g("div",{class:"icon"},[g("i",{"aria-hidden":"true",class:"lnil lnil-trash-can-alt"})],-1),g("div",{class:"meta"},[g("span",null,"Delete"),g("span",null,"Delete Proposal Permanently")],-1)],ve=r({__name:"CompletedProjects",setup(r){const $=z(),O=E(),J=u(),L=c(!1),M=c("");c(4);const q=c(0),ve=c([]),fe=c(1),be=c({title:"",subtitle:"test",isSweetAlertOpen:!1,btntext:"text"}),ge={username:{label:"Job",grow:!0},location:{label:"Contractor/Client",grow:!0},contacts:"Date Created",status:"Status",industry:"Manager",actions:{label:"Actions",align:"end"}},ye=async()=>{try{L.value=!0;let e=(await $.get("/api/project/project-jobs/",{})).data;ve.value=e.filter((e=>"completed"==e.status))}catch(e){console.log(e)}finally{L.value=!1}};c(!1);const he=c(""),je=async()=>{try{L.value=!0,await $.delete(`/api/project/${q.value}/`),O.success("Project deleted successfully"),be.value.isSweetAlertOpen=!1,ye()}catch(e){console.log(e)}finally{L.value=!1}},xe=d((()=>M.value?ve.value.filter((e=>e?.title.match(new RegExp(M.value,"i")))):ve.value));return p((()=>{ye()})),(r,u)=>{const c=F,d=T,p=D,$=S,O=o,z=n,E=s,q=i,ve=l,ye=a,ke=t,we=e,Ce=m("tooltip");return _(L)?(v(),f(c,{key:0})):(v(),b("div",B,[g("div",G,[y(p,null,{default:h((()=>[y(d,{icon:"feather:search"},{default:h((()=>[j(g("input",{"onUpdate:modelValue":u[0]||(u[0]=e=>k(M)?M.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[x,_(M)]])])),_:1})])),_:1}),g("div",H,[y($,{color:"primary",to:"/sidebar/dashboard/projects/add-project",elevated:""},{default:h((()=>[w("Add Project ")])),_:1})])]),g("div",K,[g("div",R,[Y,_(xe)?.length?C("",!0):(v(),f(O,{key:0,title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\nsearch terms you've entered. Please try different search terms or\ncriteria.",larger:""},{image:h((()=>[Q,Z])),_:1})),_(xe)?.length?(v(),f(ye,{key:1,data:_(xe),columns:ge,compact:""},{body:h((()=>[y(P,{name:"list",tag:"div",class:"flex-list-inner"},{default:h((()=>[(v(!0),b(A,null,V(_(xe),(e=>(v(),b("div",{key:e.id,class:"flex-table-item"},[y(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:h((()=>[y(z,{picture:"/IbexImages/done-job-60.png",squared:"",size:"medium"}),g("div",null,[g("span",ee,I(e?.title?e?.title:"N/A"),1),g("span",te,[g("span",null,I(e?.address?e.address:"N/A"),1)])])])),_:2},1032,["onClick"]),y(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0,grow:!0}},{default:h((()=>[e?.clientInfo?(v(),b("div",ae,[g("span",se,I(e.clientInfo?.username?e.clientInfo?.username:"N/A"),1),g("span",le,[g("span",null,I(e.clientInfo?.email?e.clientInfo?.email:"N/A"),1)])])):C("",!0),e.contractor_info?(v(),b("div",ie,[g("span",ne,I(e.contractor_info?.username?e.contractor_info?.username:"N/A"),1),g("span",oe,[g("span",null,I(e.contractor_info?.email?e.contractor_info?.email:"N/A"),1)])])):C("",!0)])),_:2},1032,["onClick"]),y(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:h((()=>[g("div",null,[g("span",re,I(_(U)(e.created)),1),g("span",ue,[g("span",null,"At:"+I(_(X)(e.created)),1)])])])),_:2},1032,["onClick"]),y(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer"},{default:h((()=>[y(q,{class:"capitalized",color:_(W)[e.status],rounded:""},{default:h((()=>[w(I(e.status?e.status:"N/A"),1)])),_:2},1032,["color"])])),_:2},1032,["onClick"]),y(E,{onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)},class:"cu-pointer",column:{media:!0}},{default:h((()=>[g("div",null,[(v(!0),b(A,null,V(e?.managers_list,(e=>j((v(),f(z,{initials:e.username.slice(0,2),picture:e.avatar,color:"primary",size:"small"},null,8,["initials","picture"])),[[Ce,`${e.username} ${e.last_name??""}`,void 0,{center:!0,primary:!0,rounded:!0}]]))),256))])])),_:2},1032,["onClick"]),y(E,{column:{align:"end"}},{default:h((()=>[y(ve,{icon:"feather:more-vertical",class:"is-pushed-mobile",spaced:"",right:""},{content:h((({close:t})=>[g("a",{role:"menuitem",class:"dropdown-item is-media",onClick:()=>{_(J).push(`/sidebar/dashboard/jobs/${e.id}`)}},de,8,ce),pe,g("a",{role:"menuitem",class:"dropdown-item is-media",onClick:N((t=>{return a=e.id,he.value=a,void(be.value={title:"Delete job?",subtitle:"Are you sure to delete this job? After delete you will not be able to recover it again.",btntext:"Yes delete",isSweetAlertOpen:!0});var a}),["prevent"])},_e,8,me)])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1},8,["data"])):C("",!0),_(xe)?.length>5?(v(),f(ke,{key:2,"current-page":_(fe),"onUpdate:currentPage":u[1]||(u[1]=e=>k(fe)?fe.value=e:null),"item-per-page":10,"total-items":80,"max-links-displayed":7,"no-router":""},null,8,["current-page"])):C("",!0)]),_(be).isSweetAlertOpen?(v(),f(we,{key:0,isSweetAlertOpen:_(be).isSweetAlertOpen,title:_(be).title,subtitle:_(be).subtitle,btntext:_(be).btntext,onConfirm:je,onCancel:()=>_(be).isSweetAlertOpen=!1},null,8,["isSweetAlertOpen","title","subtitle","btntext","onCancel"])):C("",!0)])]))}}}),fe={class:"page-content-inner"},be=g("div",{class:"lifestyle-dashboard-bg has-top-nav"},null,-1),ge=r({__name:"index",setup:e=>(M().setPageTitle("Completed Jobs"),$({title:"Completed Jobs - Ibex"}),(e,t)=>{const a=ve;return v(),b("div",fe,[(v(),f(O,{to:"[data-teleport-bg]"},[be])),y(a,{class:"has-navbar-spacing"})])})});"function"==typeof q&&q(ge);export{ge as default};
