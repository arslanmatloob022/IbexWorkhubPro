import{d as e}from"./index-f130b4cb.js";import{u as o}from"./userSession-a5ab451b.js";import{u as r}from"./useAPI-3d533a16.js";import{u as t}from"./layoutSwitcher-922bf499.js";import{u as s}from"./company-e2ab0ef2.js";import"./useNotyf-e1982812.js";import"./notyf-3492d956.js";import"./useThemeColors-5188c637.js";import"./useSupportElement-a8fec3f9.js";const a=t(),i=e((async({router:e,pinia:t})=>{const i=o(t);if(r(),s(),i.isLoggedIn)try{a.setDynamicLayoutId("sideblock-default")}catch(l){i.logoutUser()}e.beforeEach((e=>e.meta.requiresAuth&&!i.isLoggedIn?{name:"/auth/login",query:{redirect:e.fullPath}}:("supplier"!==i.user.role||!1!==e.meta.isPartnerAllowed&&void 0!==e.meta.isPartnerAllowed)&&("manager"!==i.user.role||!1!==e.meta.isManagerAllowed&&void 0!==e.meta.isManagerAllowed)&&("contractor"!==i.user.role||!1!==e.meta.isContractorAllowed&&void 0!==e.meta.isContractorAllowed)&&("worker"!==i.user.role||!1!==e.meta.isWorkerAllowed&&void 0!==e.meta.isWorkerAllowed)&&("client"!==i.user.role||!1!==e.meta.isClientAllowed&&void 0!==e.meta.isClientAllowed)?void 0:{name:"/auth/login",query:{redirect:e.fullPath}}))}));export{i as default};
