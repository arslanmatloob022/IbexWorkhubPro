import{e,r as a,F as s,t as l,N as o,o as t,v as i,M as d,y as r,z as u,C as n,A as c,B as m,I as p,l as v,O as _,K as h,D as f,j as g,U as y,E as b,W as w,X as j,L as k}from"./index-b750ebd3.js";import{_ as V}from"./VCheckbox.vue_vue_type_style_index_0_lang-14e2d51e.js";import{_ as x}from"./VField.vue_vue_type_script_setup_true_lang-25e58195.js";import{_ as C}from"./VControl-48792b30.js";import{_ as P}from"./VInput.vue_vue_type_script_setup_true_lang-76fd6db5.js";import{_ as A}from"./VLabel.vue_vue_type_script_setup_true_lang-30ee3a3d.js";import{_ as S}from"./AnimatedLogo-67f14590.js";import{_ as q}from"./station-d527b828.js";import{u as I}from"./useNotyf-fd6acdce.js";import{u as L}from"./useAPI-d7cc4ad4.js";import{u as U}from"./layoutSwitcher-a899b625.js";import"./useVFieldContext-9a307bb2.js";import"./notyf-bf301fc1.js";import"./useThemeColors-6c14c032.js";import"./userSession-d0612c40.js";const z=e=>(w("data-v-6a8ee938"),e=e(),j(),e),F={class:"modern-login"},R=z((()=>n("div",{class:"underlay h-hidden-mobile h-hidden-tablet-p"},null,-1))),B={class:"columns is-gapless is-vcentered"},D=y('<div class="column is-relative is-8 h-hidden-mobile h-hidden-tablet-p" data-v-6a8ee938><div class="hero is-fullheight is-image" data-v-6a8ee938><div class="hero-body" data-v-6a8ee938><div class="container" data-v-6a8ee938><div class="columns" data-v-6a8ee938><div class="column" data-v-6a8ee938><img class="hero-image" src="'+q+'" alt="" data-v-6a8ee938></div></div></div></div></div></div>',1),K={class:"column is-4 is-relative"},N={class:"top-tools"},E=["checked"],M=z((()=>n("span",null,null,-1))),O={class:"is-form"},T={class:"is-form-inner"},W=[z((()=>n("h2",null,"Reset Password",-1)))],X=["onSubmit"],$={class:"button-wrap has-help"},G=k(e({__name:"forget-password",setup(e){U();const y=a("login"),w=a(!1),j=s(),k=l(),q=o(),z=I(),G=L(),H=a(""),J=a(""),Q=a(""),Y=a(""),Z=async()=>{if(!w.value){if(H.value!=J.value)return void z.error("Both password and confirm password  must be matched");w.value=!0;try{await G.post("/v3/api/account/auth/set-password/",{email:Y.value,password:H.value,token:Q.value,confirm_password:J.value});ee()}catch(e){w.value=!1,z.dismissAll(),z.error("Inavlid or expired link, password update")}}},ee=()=>{w.value=!1,z.dismissAll(),z.success("Password updated successfully"),k.push("/")};t((()=>{Q.value=q.query.token,Y.value=q.query.email})),i({title:"Reset Password - Arez"});const ae=a(!1),se=a("Password"),le=()=>{se.value="Password"===se.value?"text":"Password"};return(e,a)=>{const s=S,l=d("RouterLink"),o=A,t=P,i=C,k=x,q=V,I=b;return r(),u("div",F,[R,n("div",B,[D,n("div",K,[n("div",N,[c(l,{to:"/",class:"top-logo"},{default:m((()=>[c(s,{width:"38px",height:"38px"})])),_:1}),n("label",{class:"dark-mode",tabindex:"0",role:"button",onKeydown:a[1]||(a[1]=p(h((e=>e.target.click()),["prevent"]),["space"]))},[n("input",{"data-cy":"dark-mode-toggle",type:"checkbox",checked:!v(j).isDark,onChange:a[0]||(a[0]=(...e)=>v(j).onChange&&v(j).onChange(...e))},null,40,E),M],32)]),n("div",O,[n("div",T,[n("div",{class:_(["form-text",["login"!==v(y)&&"is-hidden"]])},W,2),n("form",{method:"post","data-cy":"login-form",class:_([["login"!==v(y)&&"is-hidden"],"login-wrapper"]),onSubmit:h(Z,["prevent"])},[c(k,null,{default:m((()=>[c(i,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[f(" Password ")])),_:1}),c(t,{modelValue:v(H),"onUpdate:modelValue":a[2]||(a[2]=e=>g(H)?H.value=e:null),type:v(se),required:"",minlength:"6"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(k,null,{default:m((()=>[c(i,{icon:"lnil lnil-lock-alt autv-icon"},{default:m((()=>[c(o,{class:"auth-label"},{default:m((()=>[f(" Confirm Password ")])),_:1}),c(t,{modelValue:v(J),"onUpdate:modelValue":a[3]||(a[3]=e=>g(J)?J.value=e:null),required:"",type:v(se),minlength:"6"},null,8,["modelValue","type"])])),_:1})])),_:1}),c(k,null,{default:m((()=>[c(i,{class:"is-flex"},{default:m((()=>[c(i,{raw:"",subcontrol:""},{default:m((()=>[c(q,{modelValue:v(ae),"onUpdate:modelValue":a[4]||(a[4]=e=>g(ae)?ae.value=e:null),label:"Show Password",color:"primary",onClick:le},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n("div",$,[c(I,{id:"login-button",loading:v(w),color:"primary",type:"submit",size:"big",rounded:"",raised:"",bold:""},{default:m((()=>[f(" Submit ")])),_:1},8,["loading"])])],42,X)])])])])])}}}),[["__scopeId","data-v-6a8ee938"]]);export{G as default};
