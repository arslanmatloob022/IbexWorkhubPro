import{_ as e}from"./JobLeadActivities.vue_vue_type_style_index_0_lang-a5a138ea.js";import{_ as s}from"./JobTodos.vue_vue_type_style_index_0_lang-c4e28b76.js";import{_ as a}from"./UserProfileInfo-694449d1.js";import{_ as l}from"./AddUpdateUser-e03f663d.js";import{_ as t}from"./VFlexPagination.vue_vue_type_script_setup_true_lang-133ebf39.js";import{_ as i}from"./VTag.vue_vue_type_style_index_0_lang-6aac81a7.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-f5b5cb32.js";import{_ as r}from"./VPlaceholderPage.vue_vue_type_style_index_0_lang-16e3e971.js";import{f as o,r as u,$ as p,o as _,C as c,D as d,m as v,O as m,E as y,F as k,G as g,L as f,k as j,X as b,U as x,K as h,I as w,V,W as C,aS as I,N as P,P as T,y as S,H as A,J as K,A as M}from"./index-0d90b31f.js";import{_ as U}from"./VField.vue_vue_type_script_setup_true_lang-efa6bc49.js";import{_ as F}from"./VControl-f967abbe.js";import{_ as L}from"./PlaceloadV1.vue_vue_type_style_index_0_lang-d43a3354.js";import{_ as W,a as E}from"./search-1-dark-61831a90.js";import{u as O}from"./useAPI-7a757337.js";import{u as B}from"./useNotyf-ed231712.js";import{_ as N,a as H}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-28a22615.js";import{_ as R}from"./WorkerCalendar.vue_vue_type_style_index_0_lang-73e35c4f.js";import{u as D}from"./viewWrapper-0993cb13.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-bed92b4d.js";import"./ScheduleEmailModal.vue_vue_type_script_setup_true_lang-44546f7f.js";import"./VModal.vue_vue_type_style_index_0_lang-73a144e9.js";import"./VTextarea.vue_vue_type_script_setup_true_lang-20246106.js";import"./useVFieldContext-7abe527a.js";import"./VInput.vue_vue_type_script_setup_true_lang-2a332d13.js";import"./VOption.vue_vue_type_style_index_0_lang-283479e5.js";import"./useSupportElement-8b79af6b.js";import"./estimatesScripts-69cc3e68.js";import"./VIcon.vue_vue_type_script_setup_true_lang-619e08fb.js";import"./PlaceloadV3.vue_vue_type_style_index_0_lang-8cc49722.js";import"./VPlaceloadText.vue_vue_type_style_index_0_lang-794cf562.js";import"./VPlaceloadAvatar.vue_vue_type_style_index_0_lang-b214eaba.js";import"./search-3-dark-1eb6ae2e.js";import"./VBlock.vue_vue_type_style_index_0_lang-b887523b.js";import"./VIconButton-f4497fae.js";import"./having-coffee-dark-69a7d2f6.js";import"./moment-bad41465.js";import"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-8587892c.js";import"./VLabel.vue_vue_type_script_setup_true_lang-56d8d873.js";import"./VIconBox.vue_vue_type_style_index_0_lang-eb00a2d6.js";import"./route-block-83d24a4e.js";import"./VSwitchBlock.vue_vue_type_style_index_0_lang-010c2c4e.js";import"./VFilePond.vue_vue_type_script_lang-9a57eed0.js";import"./VFlex.vue_vue_type_style_index_0_lang-ca5ba943.js";import"./VPlaceloadWrap-4eab460a.js";import"./notyf-36f0588a.js";import"./useThemeColors-41d182f6.js";import"./TaskInfoModal.vue_vue_type_script_setup_true_lang-a87d1972.js";import"./search-6-dark-6c9b195a.js";import"./via-placeholder-24645670.js";import"./VCardAction.vue_vue_type_script_setup_true_lang-7ef16f91.js";import"./UpdateTask.vue_vue_type_script_setup_true_lang-18dcd4c6.js";import"./VDropdown.vue_vue_type_style_index_0_lang-a9511ece.js";import"./useDropdown-964e4483.js";import"./projects-dark-4a371d8a.js";import"./VFlexTable.vue_vue_type_style_index_0_lang-d35aa6e0.js";import"./search-4-dark-2b5b440c.js";import"./index-c1fc2d09.js";import"./FullCalendar-44653168.js";import"./index-37bedc79.js";import"./index-04e05ac8.js";const J={key:1},X={class:"list-view-toolbar"},$={class:"list-info"},q={key:0},z={key:1},G={class:"buttons"},Z={class:"page-content-inner"},Q={class:"list-view list-view-v1"},Y=y("img",{class:"light-image",src:W,alt:""},null,-1),ee=y("img",{class:"dark-image",src:E,alt:""},null,-1),se={class:"list-view-inner"},ae={class:"list-view-item-inner"},le={class:"meta-left"},te=y("i",{"aria-hidden":"true",class:"iconify","data-icon":"feather:map-pin"},null,-1),ie={class:"meta-right"},ne={class:"tags"},re={class:"stats"},oe={class:"stat"},ue=y("span",null,"Status",-1),pe=y("div",{class:"separator"},null,-1),_e={class:"stat"},ce=y("span",null,"Active tasks",-1),de=y("div",{class:"separator"},null,-1),ve={class:"stat"},me=y("span",null,"Pending tasks",-1),ye=o({__name:"WorkersOfSubcontractors",props:{supplierId:{}},setup(e){const s=e,a=O();B();const o=u(!1),S=u({id:"",active_tasks:0,completed_tasks:0,cancelled_tasks:0,pending_tasks:0,password:"",last_login:"",date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!0,supplier:""}),A=u(""),K=p((()=>A.value?S.value.filter((e=>e.username.match(new RegExp(A.value,"i"))||e.email.match(new RegExp(A.value,"i")))):S.value));console.log(K.value);const M=u(!1),W=()=>{M.value=!0},E=async()=>{try{o.value=!0;const e=await a.get(`/api/users/workers/?supplier=${s.supplierId}`);S.value=e.data}catch(e){console.log(e)}finally{o.value=!1}};return _((()=>{E()})),(e,a)=>{const u=L,p=F,_=U,S=T,O=r,B=n,N=i,H=t,R=l;return c(),d(V,null,[v(o)?(c(),m(u,{key:0})):(c(),d("div",J,[y("div",X,[k(_,null,{default:g((()=>[k(p,{icon:"feather:search"},{default:g((()=>[f(y("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>j(A)?A.value=e:null),class:"input custom-text-filter",placeholder:"Search..."},null,512),[[b,v(A)]])])),_:1})])),_:1}),y("div",$,[1===v(K).length?(c(),d("span",q,"1 record found")):(c(),d("span",z,x(v(K).length)+" records found",1))]),y("div",G,[k(S,{color:"primary",onClick:W,icon:"fas fa-plus",elevated:""},{default:g((()=>[h(" Worker ")])),_:1})])]),y("div",Z,[y("div",Q,[k(O,{class:w([0!==v(K).length&&"is-hidden"]),title:"We couldn't find any matching results.",subtitle:"Too bad. Looks like we couldn't find any matching results for the\n          search terms you've entered. Please try different search terms or\n          criteria.",larger:""},{image:g((()=>[Y,ee])),_:1},8,["class"]),y("div",se,[k(I,{name:"list-complete",tag:"div"},{default:g((()=>[(c(!0),d(V,null,C(v(K),((e,s)=>(c(),d("div",{key:s,class:"list-view-item"},[y("div",ae,[k(B,{picture:e.avatar,size:"large"},null,8,["picture"]),y("div",le,[y("h3",null,x(e.username),1),y("span",null,[te,y("span",null,x(e.email),1)])]),y("div",ie,[y("div",ne,[k(N,{label:e.role,color:"info",rounded:"",elevated:""},null,8,["label"])]),y("div",re,[y("div",oe,[y("span",null,x(e.is_active?"Active":"In-Active"),1),ue]),pe,y("div",_e,[y("span",null,x(e.active_tasks),1),ce]),de,y("div",ve,[y("span",null,x(e.pending_tasks),1),me])])])])])))),128))])),_:1})])]),v(K).length>5?(c(),m(H,{key:0,"item-per-page":10,"total-items":873,"current-page":42,"max-links-displayed":5})):P("",!0)])])),v(M)?(c(),m(R,{key:2,isModalOpen:v(M),supplierId:s.supplierId,userRole:"worker","onUpdate:closeModalHandler":a[1]||(a[1]=e=>M.value=!1),"onUpdate:actionUpdateHandler":E},null,8,["isModalOpen","supplierId"])):P("",!0)],64)}}}),ke={class:"lifestyle-dashboard lifestyle-dashboard-v3"},ge={class:"illustration-header"},fe={class:"p-4"},je={class:"header-meta"},be={class:"summary-stats"},xe={class:"summary-stat"},he=y("span",null,"Role",-1),we={class:"summary-stat"},Ve=y("span",null,"Email",-1),Ce={class:"tabs-wrapper"},Ie={class:"tabs-inner"},Pe={class:"tabs is-boxed",slider:""},Te=[y("span",null,"Tasks",-1)],Se=[y("span",null,"Workers",-1)],Ae=[y("span",null,"Profile Info",-1)],Ke=[y("span",null,"Todos",-1)],Me=[y("span",null,"Activities",-1)],Ue=y("li",{class:"tab-naver"},null,-1),Fe={key:0,class:"columns is-multiline is-flex-tablet-p"},Le={class:"list-flex-toolbar is-reversed"},We={class:"tabs-inner"},Ee={class:"tabs is-boxed"},Oe=[y("span",null,"Tasks Calendar",-1)],Be=[y("span",null,"Chronic View",-1)],Ne=[y("span",null,"Tasks",-1)],He=y("li",{class:"tab-naver"},null,-1),Re={key:0,class:"column is-12"},De={key:1,class:"column is-12"},Je={key:2,class:"column is-12"},Xe={key:1,class:"columns is-multiline is-flex-tablet-p"},$e={class:"column is-12"},qe={key:2,class:"columns is-multiline is-flex-tablet-p"},ze={class:"column is-12"},Ge={key:3,class:"columns is-multiline is-flex-tablet-p"},Ze={class:"column is-12"},Qe={key:4,class:"column is-12"},Ye=o({__name:"SubContractorProfile",setup(l){const t=O(),i=S(),r=u(!1),o=u("tasks"),p=u("calendar"),m=u({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});return _((async()=>{await(async()=>{try{r.value=!0;const e=await t.get(`/api/users/${i.params.id}`);m.value=e.data}catch(e){console.log(e)}finally{r.value=!1}})()})),(l,t)=>{const u=n,_=R,g=N,f=H,j=ye,b=a,h=s,V=e;return c(),d("div",ke,[y("div",ge,[y("div",fe,[k(u,{size:"xl",squared:"",picture:v(m).avatar,alt:""},null,8,["picture"])]),y("div",je,[y("h3",null,x(v(r)?"Loading...":v(m)?.username)+" "+x(v(m).last_name?v(m).last_name:""),1),y("div",be,[y("div",xe,[y("span",null,x(v(r)?"Loading...":"Subcontractor"),1),he]),y("div",we,[y("span",null,x(v(r)?"Loading...":v(m)?.email),1),Ve])])])]),y("div",Ce,[y("div",Ie,[y("div",Pe,[y("ul",null,[y("li",{class:w(["tasks"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[0]||(t[0]=A(K((e=>o.value="tasks"),["prevent"]),["space"])),onClick:t[1]||(t[1]=e=>o.value="tasks")},Te,32)],2),y("li",{class:w(["workers"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[2]||(t[2]=A(K((e=>o.value="workers"),["prevent"]),["space"])),onClick:t[3]||(t[3]=e=>o.value="workers")},Se,32)],2),y("li",{class:w(["profile"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[4]||(t[4]=A(K((e=>o.value="profile"),["prevent"]),["space"])),onClick:t[5]||(t[5]=e=>o.value="profile")},Ae,32)],2),y("li",{class:w(["todos"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[6]||(t[6]=A(K((e=>o.value="todos"),["prevent"]),["space"])),onClick:t[7]||(t[7]=e=>o.value="todos")},Ke,32)],2),y("li",{class:w(["activities"===v(o)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[8]||(t[8]=A(K((e=>o.value="activities"),["prevent"]),["space"])),onClick:t[9]||(t[9]=e=>o.value="activities")},Me,32)],2),Ue])])])]),"tasks"==v(o)?(c(),d("div",Fe,[y("div",Le,[y("div",We,[y("div",Ee,[y("ul",null,[y("li",{class:w(["calendar"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[10]||(t[10]=A(K((e=>p.value="calendar"),["prevent"]),["space"])),onClick:t[11]||(t[11]=e=>p.value="calendar")},Oe,32)],2),y("li",{class:w(["chronic"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[12]||(t[12]=A(K((e=>p.value="chronic"),["prevent"]),["space"])),onClick:t[13]||(t[13]=e=>p.value="chronic")},Be,32)],2),y("li",{class:w(["tasks"===v(p)&&"is-active"])},[y("a",{tabindex:"0",role:"button",onKeydown:t[14]||(t[14]=A(K((e=>p.value="tasks"),["prevent"]),["space"])),onClick:t[15]||(t[15]=e=>p.value="tasks")},Ne,32)],2),He])])])]),"calendar"==v(p)?(c(),d("div",Re,[k(_,{"worker-id":v(i).params.id},null,8,["worker-id"])])):P("",!0),"chronic"==v(p)?(c(),d("div",De,[k(g,{userId:v(i).params.id},null,8,["userId"])])):P("",!0),"tasks"==v(p)?(c(),d("div",Je,[k(f,{workerId:v(i).params.id},null,8,["workerId"])])):P("",!0)])):P("",!0),"workers"==v(o)?(c(),d("div",Xe,[y("div",$e,[k(j,{"supplier-id":v(i).params.id},null,8,["supplier-id"])])])):P("",!0),"profile"==v(o)?(c(),d("div",qe,[y("div",ze,[k(b,{"user-data":v(m)},null,8,["user-data"])])])):P("",!0),"todos"==v(o)?(c(),d("div",Ge,[y("div",Ze,[k(h,{user:v(i).params.id},null,8,["user"])])])):P("",!0),"activities"===v(o)?(c(),d("div",Qe,[k(V,{user:v(i).params.id},null,8,["user"])])):P("",!0)])}}}),es={class:""},ss=o({__name:"[id]",setup:e=>(D().setPageTitle("Sub-Contractor Info"),M({title:"Sub-Contractor info - Ibex"}),(e,s)=>{const a=Ye;return c(),d("div",es,[k(a)])})});export{ss as default};
