import{e,s as l,x as a,v as s,r as t,b as o,_ as i,o as r,B as n,C as p,D as u,K as d,W as m,l as _,E as c,F as f,N as v,M as y,z as V}from"./index-bd02fd97.js";import{u as g,_ as b}from"./WorksheetItems.vue_vue_type_script_setup_true_lang-bf156fc1.js";import{_ as j}from"./VCollapse.vue_vue_type_style_index_0_lang-e2237aa2.js";import{_ as x}from"./VTextarea.vue_vue_type_script_setup_true_lang-82b79b6d.js";import{_ as h}from"./VField.vue_vue_type_script_setup_true_lang-0ce07994.js";import{_ as I}from"./VControl-14860196.js";import{_ as T}from"./VRadio.vue_vue_type_style_index_0_lang-f3342fe5.js";import{u as D}from"./useAPI-5821d9f5.js";import{u as P}from"./useNotyf-a8509ab6.js";import{u as w}from"./userSession-87a2ed4a.js";import{u as C}from"./viewWrapper-284539d4.js";import"./VModal.vue_vue_type_style_index_0_lang-aa53c266.js";import"./VInput.vue_vue_type_script_setup_true_lang-2bfe3d94.js";import"./useVFieldContext-e4707cce.js";import"./VOption.vue_vue_type_style_index_0_lang-80542441.js";import"./useSupportElement-d56c346c.js";import"./VAvatar.vue_vue_type_style_index_0_lang-e9763bc9.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-46b7b901.js";import"./VDropdown.vue_vue_type_style_index_0_lang-8db773c0.js";import"./VIcon.vue_vue_type_script_setup_true_lang-519a2be1.js";import"./useDropdown-dffdc673.js";import"./VLabel.vue_vue_type_script_setup_true_lang-6c90dfca.js";import"./notyf-cbe6ec1b.js";import"./useThemeColors-951640ed.js";const q={class:"modal-form columns is-multiline"},N={class:"field column is-6 mb-0"},k=u("label",null,"Title: *",-1),A={class:"control"},U={class:"column is-6"},E={class:"field column is-6"},O=u("label",null,"Approval Deadline *",-1),S={class:"control"},L={class:"field column is-6"},F=u("label",null,"Attachments",-1),M=u("div",{class:"file"},[u("label",{class:"file-label"},[u("input",{class:"file-input",type:"file",name:"resume"}),u("span",{class:"file-cta"},[u("span",{class:"file-icon"},[u("i",{class:"fas fa-cloud-upload-alt"})]),u("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),R={class:"field column is-12"},W={class:"body-inner-content"},K={class:"field columns is-multiline mb-0"},H={class:"field column is-11 mb-0"},J=u("label",{for:"",class:"label"},"Internal Notes",-1),z={class:"field column is-11 mb-0"},B=u("label",{for:"",class:"label"},"Introductory Text",-1),Q={class:"field column is-11 mb-0"},X=u("label",{for:"",class:"label"},"Closing Text",-1),Z=e({__name:"ProposalDetailComponent",props:{proposalId:{},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:V}){const C=e,Z=l(),$=g();w(),P();const G=D(),Y=a();s(),t({}),t(!1);const ee=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];t({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const le=t({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});t("worksheet");const ae=o((()=>i((()=>import("./ckeditor-77248636.js").then((e=>e.c))),["assets/ckeditor-77248636.js","assets/index-bd02fd97.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-823f2db1.js"]).then((e=>e.default.component)))),se={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return r((async()=>{Z.value=await i((()=>import("./ckeditor-8c2617fd.js").then((e=>e.c))),["assets/ckeditor-8c2617fd.js","assets/index-bd02fd97.js","assets/index-ce8747cd.css"]).then((e=>e.default)),(C.proposalId||Y.params.id)&&((async()=>{try{const e=await G.get(`/api/lead-proposal/${Y.params.id}/detail/`);le.value=e.data,$.getProposalCostItems(Y.params.id)}catch(e){console.log(e)}})(),$.getProposalDetail(C.proposalId||Y.params.id))})),(e,l)=>{const a=T,s=I,t=h,o=x,i=j,r=b;return n(),p("div",q,[u("div",N,[k,u("div",A,[d(u("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>_(le).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[m,_(le).title]])])]),u("div",U,[c(t,{class:"m-0 p-0",label:"Type"},{default:f((()=>[c(s,null,{default:f((()=>[c(a,{modelValue:_(le).type,"onUpdate:modelValue":l[1]||(l[1]=e=>_(le).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:_(le).type,"onUpdate:modelValue":l[2]||(l[2]=e=>_(le).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:_(le).type,"onUpdate:modelValue":l[3]||(l[3]=e=>_(le).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",E,[O,u("div",S,[d(u("input",{type:"date",name:"firstName","onUpdate:modelValue":l[4]||(l[4]=e=>_(le).approval_deadline=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Approval deadline"},null,512),[[m,_(le).approval_deadline]])])]),u("div",L,[F,c(t,{grouped:""},{default:f((()=>[c(s,null,{default:f((()=>[M])),_:1})])),_:1})]),u("div",R,[c(i,{items:ee,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":f((e=>[u("div",W,[u("div",K,[u("div",H,[J,c(t,null,{default:f((()=>[c(s,null,{default:f((()=>[c(o,{modelValue:_(le).internalNotes,"onUpdate:modelValue":l[5]||(l[5]=e=>_(le).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",z,[B,_(Z)?(n(),v(_(ae),{key:0,modelValue:_(le).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>_(le).introductoryText=e),editor:_(Z),config:se},null,8,["modelValue","editor"])):y("",!0)]),u("div",Q,[X,_(Z)?(n(),v(_(ae),{key:0,modelValue:_(le).closingText,"onUpdate:modelValue":l[7]||(l[7]=e=>_(le).closingText=e),editor:_(Z),config:se},null,8,["modelValue","editor"])):y("",!0)])])])])),_:1})]),c(r,{proposalData:_(le),proposalId:_(le).id},null,8,["proposalData","proposalId"])])}}}),$=e({__name:"[id]",setup:e=>(C().setPageTitle("Lead Proposals"),V({title:"Lead Proposals - Ibex"}),(e,l)=>(n(),p("div",null,[c(Z)])))});export{$ as default};
