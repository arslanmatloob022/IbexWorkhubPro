import{e,s as l,x as a,v as s,r as t,b as o,_ as i,o as r,B as n,C as p,D as u,K as d,W as _,l as m,E as c,F as f,N as v,M as y,z as V}from"./index-666288a0.js";import{_ as b}from"./WorksheetItems.vue_vue_type_script_setup_true_lang-20e37637.js";import{_ as g}from"./VCollapse.vue_vue_type_style_index_0_lang-a3241a56.js";import{_ as j}from"./VTextarea.vue_vue_type_script_setup_true_lang-bc67cf66.js";import{_ as x}from"./VField.vue_vue_type_script_setup_true_lang-d5e364bd.js";import{_ as h}from"./VControl-5b33fee1.js";import{_ as I}from"./VRadio.vue_vue_type_style_index_0_lang-ff723c1a.js";import{u as T}from"./useAPI-d7a2b438.js";import{u as C}from"./useNotyf-dcbb7c6d.js";import{u as w}from"./userSession-fe78a4d2.js";import{u as D}from"./proposalItems-f54f1ffe.js";import{u as P}from"./viewWrapper-6710faa0.js";import"./VModal.vue_vue_type_style_index_0_lang-b78fecb3.js";import"./VInput.vue_vue_type_script_setup_true_lang-0b137daf.js";import"./useVFieldContext-87a64e03.js";import"./VOption.vue_vue_type_style_index_0_lang-11b12705.js";import"./useSupportElement-acd313a8.js";import"./VAvatar.vue_vue_type_style_index_0_lang-bbdffe16.js";import"./VCheckbox.vue_vue_type_style_index_0_lang-a718c344.js";import"./VLabel.vue_vue_type_script_setup_true_lang-7720a35a.js";import"./SweetAlert.vue_vue_type_style_index_0_lang-5055a0b8.js";import"./VDropdown.vue_vue_type_style_index_0_lang-ea259411.js";import"./VIcon.vue_vue_type_script_setup_true_lang-ec4cacc3.js";import"./useDropdown-d2d489ab.js";import"./notyf-5e4f1d13.js";import"./useThemeColors-f2f2e50c.js";const k={class:"modal-form columns is-multiline"},q={class:"field column is-6 mb-0"},N=u("label",null,"Title: *",-1),A={class:"control"},U={class:"column is-6"},E={class:"field column is-6"},O=u("label",null,"Approval Deadline *",-1),S={class:"control"},L={class:"field column is-6"},F=u("label",null,"Attachments",-1),M=u("div",{class:"file"},[u("label",{class:"file-label"},[u("input",{class:"file-input",type:"file",name:"resume"}),u("span",{class:"file-cta"},[u("span",{class:"file-icon"},[u("i",{class:"fas fa-cloud-upload-alt"})]),u("span",{class:"file-label"}," Choose a fileâ€¦ ")])])],-1),R={class:"body-inner-content"},W={class:"field columns is-multiline mb-0"},K={class:"field column is-12 mb-0"},H=u("label",{for:"",class:"label"},"Internal Notes",-1),J={class:"field column is-12 mb-0"},z=u("label",{for:"",class:"label"},"Introductory Text",-1),B={class:"field column is-12 mb-0"},Q=u("label",{for:"",class:"label"},"Closing Text",-1),X=e({__name:"ProposalDetailComponent",props:{proposalId:{},leadId:{}},emits:["update:modalHandler","update:OnSuccess"],setup(e,{emit:V}){const P=e,X=l(),Z=D();w(),C();const $=T(),G=a();s(),t({}),t(!1);const Y=[{title:"More Details",content:"Add additional information about rota, rate or worker"}];t({title:"",description:"",quantity:0,unit:0,unitCost:0,markup:0,clientPrice:0,costCode:"",costType:"",builderCost:"",margin:0,profit:0,internalNotes:""});const ee=t({title:"",approval_deadline:"",attachments:[],approvalDeadline:"",internalNotes:"",introductoryText:"",closingText:"",paymentStatus:"",worksheetItems:[],type:"proposal"});t("worksheet");const le=o((()=>i((()=>import("./ckeditor-6ef67739.js").then((e=>e.c))),["assets/ckeditor-6ef67739.js","assets/index-666288a0.js","assets/index-ce8747cd.css","assets/vue.runtime.esm-bundler-8880ced0.js"]).then((e=>e.default.component)))),ae={fontFamily:{options:['"Montserrat", sans-serif','"Roboto", sans-serif']},height:"400px",minHeight:"400px"};return r((async()=>{X.value=await i((()=>import("./ckeditor-be2e0568.js").then((e=>e.c))),["assets/ckeditor-be2e0568.js","assets/index-666288a0.js","assets/index-ce8747cd.css"]).then((e=>e.default)),(P.proposalId||G.params.id)&&(async()=>{try{const e=await $.get(`/api/lead-proposal/${G.params.id}/detail/`);ee.value=e.data,Z.getProposalCostItems(G.params.id)}catch(e){console.log(e)}})()})),(e,l)=>{const a=I,s=h,t=x,o=j,i=g,r=b;return n(),p("div",k,[u("div",q,[N,u("div",A,[d(u("input",{type:"text",name:"firstName","onUpdate:modelValue":l[0]||(l[0]=e=>m(ee).title=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Title"},null,512),[[_,m(ee).title]])])]),u("div",U,[c(t,{class:"m-0 p-0",label:"Type"},{default:f((()=>[c(s,null,{default:f((()=>[c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[1]||(l[1]=e=>m(ee).type=e),value:"proposal",label:"Proposal",name:"solid_squared_radio",color:"primary",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[2]||(l[2]=e=>m(ee).type=e),value:"change_order",label:"Change Order",name:"solid_squared_radio",color:"info",square:"",solid:""},null,8,["modelValue"]),c(a,{modelValue:m(ee).type,"onUpdate:modelValue":l[3]||(l[3]=e=>m(ee).type=e),value:"draft",label:"Draft",name:"solid_squared_radio",color:"warning",square:"",solid:""},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",E,[O,u("div",S,[d(u("input",{type:"date",name:"firstName","onUpdate:modelValue":l[4]||(l[4]=e=>m(ee).approval_deadline=e),required:"",class:"input is-primary-focus is-primary-focus",placeholder:"Proposal Approval deadline"},null,512),[[_,m(ee).approval_deadline]])])]),u("div",L,[F,c(t,{grouped:""},{default:f((()=>[c(s,null,{default:f((()=>[M])),_:1})])),_:1})]),c(i,{items:Y,"with-chevron":"",style:{"border-radius":"14px"},class:"m-3"},{"collapse-item-content":f((e=>[u("div",R,[u("div",W,[u("div",K,[H,c(t,null,{default:f((()=>[c(s,null,{default:f((()=>[c(o,{modelValue:m(ee).internalNotes,"onUpdate:modelValue":l[5]||(l[5]=e=>m(ee).internalNotes=e),rows:"4",placeholder:"Internal notes..."},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",J,[z,m(X)?(n(),v(m(le),{key:0,modelValue:m(ee).introductoryText,"onUpdate:modelValue":l[6]||(l[6]=e=>m(ee).introductoryText=e),editor:m(X),config:ae},null,8,["modelValue","editor"])):y("",!0)]),u("div",B,[Q,m(X)?(n(),v(m(le),{key:0,modelValue:m(ee).closingText,"onUpdate:modelValue":l[7]||(l[7]=e=>m(ee).closingText=e),editor:m(X),config:ae},null,8,["modelValue","editor"])):y("",!0)])])])])),_:1}),c(r,{proposalData:m(ee),proposalId:m(ee).id},null,8,["proposalData","proposalId"])])}}}),Z=e({__name:"[id]",setup:e=>(P().setPageTitle("Lead Proposals"),V({title:"Lead Proposals - Ibex"}),(e,l)=>(n(),p("div",null,[c(X)])))});export{Z as default};
