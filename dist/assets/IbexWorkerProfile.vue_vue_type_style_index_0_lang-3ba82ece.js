import{_ as e}from"./TaskInfoModal.vue_vue_type_script_setup_true_lang-98134d66.js";import{_ as a}from"./AddUpdateUser-b49fd3f1.js";import{_ as s}from"./ChangePasswordModal.vue_vue_type_script_setup_true_lang-2dba8d13.js";import{_ as t}from"./JobTodos.vue_vue_type_style_index_0_lang-2f30d6d3.js";import{_ as l}from"./ProjectTodayTasks.vue_vue_type_style_index_0_lang-a216d535.js";import{_ as r,a as i}from"./ChronicTasksView.vue_vue_type_style_index_0_lang-d9301c10.js";import{_ as o}from"./UserProfileInfo-b6f65c98.js";import{_ as n}from"./VAvatar.vue_vue_type_style_index_0_lang-efb4c369.js";import{f as d,b as c,y as u,r as p,x as v,o as m,C as y,D as k,E as _,F as f,m as b,K as w,U as g,I as h,H as j,N as x,G as T,O as C,V as D,J as I}from"./index-f3dee3af.js";import{F as M}from"./FullCalendar-207edab0.js";import{i as K}from"./index-04e05ac8.js";import{u as U}from"./useAPI-91b247fc.js";import{u as A}from"./useNotyf-248ceabc.js";const P={class:"lifestyle-dashboard lifestyle-dashboard-v3"},H={class:"illustration-header"},O={class:"p-4"},V={class:"header-meta"},W={class:"summary-stats"},F={class:"summary-stat"},N=_("span",null,"Status",-1),$={class:"summary-stat"},J=_("span",null,"Email",-1),L={class:"summary-stat h-hidden-tablet-p"},S=_("span",null,"Mail notify ",-1),q={class:"columns is-multiline"},E={class:"tabs-wrapper column is-12"},G={class:"tabs-inner"},R={class:"tabs is-toggle"},Z=[_("span",null,"Profile",-1)],z=[_("span",null,"Tasks",-1)],X=[_("span",null,"Todos",-1)],Y=_("li",{class:"tab-naver"},null,-1),B={key:0,class:"columns is-multiline"},Q={key:1,class:"columns is-multiline"},ee={class:"tabs-wrapper"},ae={class:"tabs-inner"},se={class:"tabs is-boxed"},te=[_("span",null,"Calendar View",-1)],le=[_("span",null,"Cards View",-1)],re=[_("span",null,"Today Tasks",-1)],ie=[_("span",null,"Chronic View",-1)],oe=_("li",{class:"tab-naver"},null,-1),ne={key:0,class:"column is-12"},de={key:1,class:"column is-12"},ce={key:2,class:"column is-12"},ue=["onClick"],pe={style:{"font-weight":"600","margin-bottom":"0px","padding-left":"10px",color:"#f1f1f1"}},ve={style:{"padding-right":"10px",color:"#f1f1f1"}},me={key:3,class:"column is-12"},ye={key:2,class:"columns is-multiline"},ke={class:"column is-12"},_e=d({__name:"IbexWorkerProfile",setup(d){const _e=c(),fe=A(),be=U(),we=u(),ge=p([]);v();const he=p(""),je=p(!1),xe=p("calendar"),Te=p("profile"),Ce=p(""),De=p(!1),Ie=p({id:"",password:"",last_login:null,date_joined:"",email:"",role:"",avatar:"",is_active:!0,phoneNumber:"",username:"",is_sentMail:!1});p(!1),p("all"),p("");const Me=p(!1),Ke=p([{id:"",workers:[{id:"937a8b15-62b4-4576-98af-2e53ecb90e46",username:"Test Worker",email:"testworker@gmail.com",role:"worker",avatar:"/media/static/users_avatars/selfie1_tW8X714.jpg"}],project:{id:"ab1a2dba-2786-45c0-8494-86a9229384b6",title:"Test Home",startDate:"2024-11-09",endDate:"2024-11-30",status:"active",address:"Test job address"},color:"#7c8dad",title:"Test detail",description:"Description of task",startDate:"2024-11-12",endDate:"2024-11-20",status:"active",is_active:!1,updated:"2024-11-12T03:37:52.203461Z",created:"2024-11-12T03:37:52.203474Z",costCode:"123456",quantity:"12",unit:"14",fileName:null,note:null,priority:"Low",contractor:null}]),Ue=p([]),Ae=p([]),Pe=p([]),He=p({pending:"#fbcf33",active:"#82d616",completed:"#cb0c9f",canceled:"#344767"}),Oe=p({plugins:[K],schedulerLicenseKey:"0965592368-fcs-1694657447",initialView:"resourceTimelineMonth",height:"auto",resourceAreaWidth:"20%",selectable:!0,events:[],headerToolbar:{left:"today prev,next",center:"title",right:"resourceTimelineWeek,resourceTimelineMonth,resourceTimelineYear"},editable:!0,views:{resourceTimelineWeek:{slotDuration:{days:1,hours:1},slotLabelFormat:{weekday:"short",month:"numeric",day:"numeric",year:"numeric"}}},resourceAreaHeaderContent:"Projects",resources:[]}),Ve=async()=>{try{Me.value=!0;const e=await be.get(`/api/users/${we.params.id?we.params.id:_e.user.id}/`);Ie.value=e.data,Me.value=!1}catch(e){console.log(e)}},We=p({}),Fe=p(!1),Ne=p({});return m((async()=>{await Ve(),await(async()=>{try{const e=await be.get(`/api/task/${we.params.id?we.params.id:_e.user.id}/worker-tasks/`);Ke.value=e.data,console.log("worker tasks",Ke.value)}catch(e){Ke.value=[]}})(),(async(e=!1)=>{try{const a=await be.get(`/api/task/worker-today/${we.params.id?we.params.id:_e.user.id}/`);Ne.value=a.data,e&&fe.green("Tasks list Refreshed")}catch(a){console.log(a)}})(),ge.value=Ke.value.map((e=>({id:e.id,resourceId:e.project.id,start:e.startDate,end:e.endDate,title:e.title,color:e.color,description:e.description,workers:e.workers,borderColor:He[e.status],status:e.status,project:e.project}))),Pe.value=Ke.value.map((e=>({id:e.project.id,start:e.project.startDate,end:e.project.endDate,title:e.project.title,address:e.project.address,status:e.project.status,color:He[e.project.status]}))),Ue.value=Pe.value,Ae.value=ge.value,Oe.value={...Oe.value,resources:Ue.value,events:Ae.value},console.log("tasks",Oe.value.events,"resources",Oe.value.resources)})),(d,c)=>{const u=n,p=o,v=r,m=i,K=l,U=t,A=s,_e=a,fe=e;return y(),k(D,null,[_("div",P,[_("div",H,[_("div",O,[f(u,{size:"xl",squared:"",picture:b(Ie).avatar,alt:""},null,8,["picture"])]),_("div",V,[_("h3",null,[w(g(b(Ie)?.username)+" ",1),_("i",{onClick:c[0]||(c[0]=e=>((e="")=>{he.value=e,je.value=!0})(b(Ie).id)),class:"fas fa-pencil-alt ml-2 cu-pointer","aria-hidden":"true"})]),_("div",W,[_("div",F,[N,_("span",null,g(b(Ie)?.is_active?"Active":" In-Active"),1)]),_("div",$,[J,_("span",null,g(b(Ie)?.email),1)]),_("div",L,[S,_("span",null,g(b(Ie).is_sentMail?"On":"Off"),1)])])])]),_("div",q,[_("div",E,[_("div",G,[_("div",R,[_("ul",null,[_("li",{class:h(["profile"===b(Te)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[1]||(c[1]=j(I((e=>Te.value="profile"),["prevent"]),["space"])),onClick:c[2]||(c[2]=e=>Te.value="profile")},Z,32)],2),_("li",{class:h(["tasks"===b(Te)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[3]||(c[3]=j(I((e=>Te.value="tasks"),["prevent"]),["space"])),onClick:c[4]||(c[4]=e=>Te.value="tasks")},z,32)],2),_("li",{class:h(["todos"===b(Te)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[5]||(c[5]=j(I((e=>Te.value="todos"),["prevent"]),["space"])),onClick:c[6]||(c[6]=e=>Te.value="todos")},X,32)],2),Y])])])])]),"profile"==b(Te)?(y(),k("div",B,[f(p,{"user-data":b(Ie)},null,8,["user-data"])])):x("",!0),"tasks"==b(Te)?(y(),k("div",Q,[_("div",ee,[_("div",ae,[_("div",se,[_("ul",null,[_("li",{class:h(["calendar"===b(xe)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[7]||(c[7]=j(I((e=>xe.value="calendar"),["prevent"]),["space"])),onClick:c[8]||(c[8]=e=>xe.value="calendar")},te,32)],2),_("li",{class:h(["cards"===b(xe)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[9]||(c[9]=j(I((e=>xe.value="cards"),["prevent"]),["space"])),onClick:c[10]||(c[10]=e=>xe.value="cards")},le,32)],2),_("li",{class:h(["today"===b(xe)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[11]||(c[11]=j(I((e=>xe.value="today"),["prevent"]),["space"])),onClick:c[12]||(c[12]=e=>xe.value="today")},re,32)],2),_("li",{class:h(["chronic"===b(xe)&&"is-active"])},[_("a",{tabindex:"0",role:"button",onKeydown:c[13]||(c[13]=j(I((e=>xe.value="chronic"),["prevent"]),["space"])),onClick:c[14]||(c[14]=e=>xe.value="chronic")},ie,32)],2),oe])])])]),"chronic"==b(xe)?(y(),k("div",ne,[f(v,{userId:b(we).params.id},null,8,["userId"])])):x("",!0),"cards"==b(xe)?(y(),k("div",de,[f(m,{workerId:b(we).params.id},null,8,["workerId"])])):x("",!0),"calendar"==b(xe)?(y(),k("div",ce,[f(b(M),{options:b(Oe)},{eventContent:T((e=>[_("div",{onClick:a=>{return s=e.event.extendedProps,We.value=s,console.log("dataa",s),void(Fe.value=!0);var s},style:{display:"flex","flex-wrap":"wrap","align-items":"center","justify-content":"space-between",padding:"6px"}},[_("p",pe,g(e.event.title),1),_("p",ve,g(new Date(e.event.start).toDateString())+" to "+g(new Date(e.event.end).toDateString()),1)],8,ue)])),_:1},8,["options"])])):x("",!0),"today"==b(xe)?(y(),k("div",me,[f(K,{workerId:b(we).params.id},null,8,["workerId"])])):x("",!0)])):x("",!0),"todos"==b(Te)?(y(),k("div",ye,[_("div",ke,[f(U,{user:b(we).params.id},null,8,["user"])])])):x("",!0),b(De)?(y(),C(A,{key:3,isModalOpen:b(De),userId:b(Ce),"onUpdate:closeModalHandler":c[15]||(c[15]=e=>De.value=!1)},null,8,["isModalOpen","userId"])):x("",!0),b(je)?(y(),C(_e,{key:4,isModalOpen:b(je),userId:b(he),userRole:"worker","onUpdate:closeModalHandler":c[16]||(c[16]=e=>je.value=!1),"onUpdate:actionUpdateHandler":Ve},null,8,["isModalOpen","userId"])):x("",!0)]),b(Fe)?(y(),C(fe,{key:0,taskDetailModal:b(Fe),taskData:b(We),"onUpdate:modalHandler":c[17]||(c[17]=e=>Fe.value=!1)},null,8,["taskDetailModal","taskData"])):x("",!0)],64)}}});export{_e as _};
